@using ExpressBase.Web.Filters;
@{
    Layout = "~/Views/Shared/LayoutInner.cshtml";
}
@using ExpressBase.Objects;
@{
    var bApnd = true;
    if (ViewBag.Env == "Development")
    {
        bApnd = false;
    }
}
@*
    For more information on enabling MVC for empty projects, visit http://go.microsoft.com/fwlink/?LinkID=397860
*@

<script>
    console.log(Date.now);
    var t0 = performance.now();
</script>

@* BOOTSTRAP CSS *@

<link rel="stylesheet" type="text/css" href="~/css/FormBuiderStyles.css" asp-append-version=@bApnd />
<link rel="stylesheet" type="text/css" href="~/css/DV/bootstrap-toggle.min.css">
<link rel="stylesheet" type="text/css" href="~/css/jquery.datetimepicker.css">
<link href="~/css/DV/MonthPicker.min.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" href="~/css/datatables.min.css" asp-append-version=@bApnd />
<link rel="stylesheet" type="text/css" href="~/css/Eb.css" asp-append-version=@bApnd />
<link rel="stylesheet" href="/css/Bootstrap_JQuery/bootstrap-select.css">
<link rel="stylesheet" type="text/css" href="~/css/bootstrap-multiselect.css" asp-append-version=@bApnd />
@*amal*@
<link rel="stylesheet" type="text/css" href="~/css/Eb_datatable.css" asp-append-version=@bApnd />
<link rel="stylesheet" type="text/css" href="~/css/EbControls/EbSignaturePad.css" asp-append-version=@bApnd />
@*amal*@
@*varghese*@
<link rel="stylesheet" type="text/css" href="~/css/EbFileViewer/viewer.css" asp-append-version=@bApnd>
<link rel="stylesheet" href="~/css/EbControls/EbBluePrintCss.css">
<link rel="stylesheet" href="~/css/yearpicker.css">
<link rel="stylesheet" type="text/css" href="/css/LayoutCommon/bootstrap-tagsinput.css" asp-append-version=@bApnd />
<link href="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.9/summernote.css" rel="stylesheet">
<link rel="stylesheet" href="~/css/DV/jquery.rateyo.min.css">
<link rel="stylesheet" type="text/css" href="~/css/DVBuilder.css" />
<link rel="stylesheet" type="text/css" href="~/css/splitWindow.css" />
<link rel="stylesheet" href="~/css/ChartStyle.css" asp-append-version=@bApnd>
<link rel="stylesheet" href="~/fonts/icofont/icofont.min.css">
@*<link rel="stylesheet" type="text/css" href="~/css/Common/offline-theme-dark.css" asp-append-version=@bApnd />*@
<link href="https://cdn.jsdelivr.net/npm/smartwizard@6/dist/css/smart_wizard_all.min.css" rel="stylesheet" type="text/css" />

@*propertygrid*@
<link rel="stylesheet" type="text/css" href="~/css/LayoutCommon/dragula.min.css" />
<link rel="stylesheet" href="~/css/Bundles/codemirror.bundle.min.css" asp-append-version=@bApnd />
<link rel="stylesheet" type="text/css" href="~/css/EbCommonStyles/TileSetup.css" asp-append-version=@bApnd />

<script type="text/javascript" src="~/js/jQuery Mask Plugin v1.14.9.js" asp-append-version=@bApnd></script>
@*jith*@
@*<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.20/jquery.datetimepicker.min.js" asp-append-version=@bApnd></script>*@@*jith*@
<script type="text/javascript" src="~/js/jquery.datetimepicker.min.js" asp-append-version=@bApnd></script>
<script type="text/javascript" src="~/js/yearpicker.js" asp-append-version=@bApnd></script>
@*<script type="text/javascript" src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>*@
<script type="text/javascript" src="~/js/LayoutCommon/bootstrap-toggle.min.js"></script>
<script type="text/javascript" src="~/js/datatables.min.js" asp-append-version=@bApnd></script>
<script src="~/js/Eb_Basic_DataTable.js" asp-append-version=@bApnd></script>
@*<script src="https://rawgit.com/KidSysco/jquery-ui-month-picker/v3.0.0/demo/MonthPicker.min.js"></script>*@
<script type="text/javascript" src="~/js/LayoutCommon/MonthPicker.min.js"></script>



@*BUNDLES*@
@*<environment exclude="Development">
        <script type="text/javascript" src="~/js/Bundles/eb-formrender.p1.bundle.js" asp-append-version=@bApnd></script>
    </environment>*@

<script type="text/javascript" src="~/js/FormBuilder/WebFormRenderer.js" asp-append-version=@bApnd></script>
<script type="text/javascript" src="~/js/FormBuilder/WebFormCollectionRender.js" asp-append-version=@bApnd></script>
<script type="text/javascript" src="~/js/FormBuilder/FormRenderCommon.js" asp-append-version=@bApnd></script>
<script type="text/javascript" src="~/js/EbControls/EbPowerSelect.js" asp-append-version=@bApnd></script>
<script type="text/javascript" src="~/js/EbControls/EbDataGrid.js" asp-append-version=@bApnd></script>
<script type="text/javascript" src="~/js/EbControls/EbDataGrid_New.js" asp-append-version=@bApnd></script>
<script type="text/javascript" src="~/js/TileSetup.js" asp-append-version=@bApnd></script>
@*jith*@
<script type="text/javascript" src="~/js/EbControls/EbDpFormControl.js" asp-append-version=@bApnd></script>
<script type="text/javascript" src="~/js/EbControls/EbItemListControl.js" asp-append-version=@bApnd></script>
<script type="text/javascript" src="~/js/EbControls/EbProvisionUser.js" asp-append-version=@bApnd></script>
<script type="text/javascript" src="~/js/EbControls/EbRenderQuestionsControl.js" asp-append-version=@bApnd></script>
@*jith*@
<script type="text/javascript" src="~/js/EbControls/EbReview.js" asp-append-version=@bApnd></script>
@*jith*@
<script type="text/javascript" src="~/js/FormBuilder/InitFormControls.js" asp-append-version=@bApnd></script>
@*jith*@
<script type="text/javascript" src="~/js/FormBuilder/DGUCcolumn.js" asp-append-version=@bApnd></script>
@*<script type="text/javascript" src="~/js/FormBuilder/EbControlCollection.js" asp-append-version=@bApnd></script>*@
@*jith*@
@*<script type="text/javascript" src="~/js/jquery.inputmask.bundle.js" asp-append-version=@bApnd></script>*@
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.inputmask/5.0.5/jquery.inputmask.min.js"></script>
@*jith*@
<script type="text/javascript" src="~/js/vue-select.js" asp-append-version=@bApnd></script>
<script type="text/javascript" src="~/js/vue@2.1.10.min.js" asp-append-version=@bApnd></script>
<script type="text/javascript" src="~/js/FormBuilder/bootstrap-select.js " asp-append-version=@bApnd></script>
<script type="text/javascript" src="~/js/bootstrap-multiselect.js" asp-append-version=@bApnd></script>
@*<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.1/moment.min.js"></script>*@
<script type="text/javascript" src="~/js/LayoutCommon/moment.min.js"></script>
<script type="text/javascript" src="~/js/FormBuilder/locationpicker.jquery.min.js"></script>
<script type="text/javascript" src='https://maps.google.com/maps/api/js?key=AIzaSyDcaoSVEMF_TRq6Lx-dkqh3Rvrv8_w-0tM&libraries=places'></script>

<script type="text/javascript" src="~/js/SignaturePadApis/SigWebTablet.js"></script>
@*amal*@
<script type="text/javascript" src="~/js/EbControls/EbSignaturePad.js"></script>
@*amal*@

<script type="text/javascript" src="~/js/CommonDataTable.js" asp-append-version=@bApnd></script>
<script type="text/javascript" src="~/js/splitWindow.js"></script>

@*varghese*@
<script src="~/js/EbControls/EbBluePrint.js" type="text/javascript"></script>
<script type="text/javascript" src="~/js/EbControls/EbSimpleFileUploader.js"></script>
<script type="text/javascript" src="~/js/EbFileViewer/EbFileViewerPlugin.js" asp-append-version=@bApnd></script>
<script type="text/javascript" src="~/js/EbFileViewer/viewer.js" asp-append-version=@bApnd></script>
@*varghese*@
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.15.0/d3.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-tagsinput/0.8.0/bootstrap-tagsinput.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.9/summernote.js"></script>
@*<script src="https://cdnjs.cloudflare.com/ajax/libs/rateYo/2.3.2/jquery.rateyo.min.js"></script>*@
<script type="text/javascript" src="~/js/LayoutCommon/jquery.rateyo.min.js"></script>
<script type="text/javascript" src="~/js/FormBuilder/jquery.scrollTo.js" asp-append-version=@bApnd></script>
<script type="text/javascript" src="~/js/DV/Chart.min.js"></script>
<script type="text/javascript" src="~/js/DV/Chart.Zoom.min.js"></script>

<script src="~/js/Eb_Basic_chart.js" asp-append-version=@bApnd></script>
@*<script type="text/javascript" src="~/js/Common/offline.js" asp-append-version=@bApnd></script>*@
@* for propertygrid *@
<script type="text/javascript" src="~/js/FormBuilder/Eb_PropertyGrid.js" asp-append-version=@bApnd></script>
<script type="text/javascript" src="~/js/FormBuilder/Eb_pgCXVE.js" asp-append-version=@bApnd></script>
<script type="text/javascript" src="~/js/FormBuilder/PGHelper.js" asp-append-version=@bApnd></script>
<link rel="stylesheet" type="text/css" href="~/css/PropertyGrid.css" asp-append-version=@bApnd />
<script type="text/javascript" src='~/js/Eb_dragula.js' asp-append-version=@bApnd></script>
<script type="text/javascript" src="~/js/Bundles/codemirror.bundle.js" asp-append-version=@bApnd></script>

@*nithin*@
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/typeahead.js/0.11.1/typeahead.bundle.min.js"></script>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" />
<script src="~/js/DV/leaflet.js"></script>
<script src="~/js/jquery.smartWizard.js" type="text/javascript" asp-append-version=@bApnd></script>
<script type="text/javascript" src="/webform/cxt2js?v=@ExpressBase.Objects.Singletons.BuildInfo.Md5Version"></script>
<script type="text/javascript" src="/webform/cxt2js_vis?v=@ExpressBase.Objects.Singletons.BuildInfo.Md5Version"></script>

<script>
    var t1 = performance.now();
    console.log("web form link loading took " + (t1 - t0) + " milliseconds.");
</script>



<style>
    .webform-cont {
        /*margin-top: 38px;
        height: calc(100vh - 38px);*/
        margin-left: -15px;
        width: calc(100% + 30px);
        height: 100vh;
    }

    /*.Eb-ctrlContainer .input-group-addon {
        border-radius: 0;
    }*/

    .save-cont {
        text-align: center;
    }

    .webform-save {
        /*background-color: #2827a0;
        border: none;
        padding: 3px 11px;
        color: white;
        box-shadow: -2px 2px 3px 0 #00000059;
        border-radius: 2px;*/
    }

    .radiog-cont {
        border: none;
        border-radius: 5px;
    }

    /*DataGridNew related styles - Beginning*/
    [ctype="DataGrid_New"] .ctrlstd_dg {
        min-height: 36px;
        display: inline-flex;
    }

    [ctype="DataGrid_New"] [mode="view"] .edit-rowc, [ctype="DataGrid_New"] [mode="view"] .del-rowc {
        color: gray;
        pointer-events: none;
    }

    [ctype="DataGrid_New"] .edit-rowc, [ctype="DataGrid_New"] .del-rowc, [ctype="DataGrid_New"] .check-rowc, [ctype="DataGrid_New"] .cancel-rowc {
        background: white;
        border: none;
    }

    [ctype="DataGrid_New"] [mode="edit"] .edit-rowc {
        color: #7171ff;
    }

        [ctype="DataGrid_New"] [mode="edit"] .edit-rowc:hover {
            box-shadow: inset 0 0 2.5px 1px #adadef !important;
        }

    [ctype="DataGrid_New"] [mode="edit"] .del-rowc {
        color: #f55d5d;
    }

        [ctype="DataGrid_New"] [mode="edit"] .del-rowc:hover {
            box-shadow: inset 0 0 2.5px 1px #fdd2d2 !important;
        }

    [ctype="DataGrid_New"] .check-rowc {
        color: #019a01;
    }

        [ctype="DataGrid_New"] .check-rowc:hover {
            box-shadow: inset 0 0 2.5px 1px #87c987 !important;
        }

    [ctype="DataGrid_New"] .cancel-rowc {
        color: #f55d5d;
    }

        [ctype="DataGrid_New"] .cancel-rowc:hover {
            box-shadow: inset 0 0 2.5px 1px #fdd2d2 !important;
        }

    [ctype="DataGrid_New"] table.dataTable {
        margin-top: 0px !important;
    }

    [ctype="DataGrid_New"] .DTFC_LeftHeadWrapper, [ctype="DataGrid_New"] .DTFC_RightHeadWrapper, [ctype="DataGrid_New"] .dataTables_scrollHead {
        padding-bottom: 0px !important;
        margin-bottom: 0px !important;
    }

    [ctype="DataGrid_New"] .DTFC_LeftFootWrapper, [ctype="DataGrid_New"] .DTFC_RightFootWrapper, [ctype="DataGrid_New"] .dataTables_scrollFoot {
        padding-bottom: 0 !important;
        margin-bottom: 0 !important;
    }

    [ctype="DataGrid_New"] .DTFC_LeftFootWrapper, [ctype="DataGrid_New"] .DTFC_RightFootWrapper {
        top: 17px !important;
    }

    div[ctype="DataGrid_New"] div.dataTables_wrapper tr.odd:hover {
        background-color: rgb(249, 249, 249) !important;
    }

    div[ctype="DataGrid_New"] div.dataTables_wrapper tr.even:hover {
        background-color: white !important;
    }

    div[ctype="DataGrid_New"] table.dataTable tbody > tr.selected, div[ctype="DataGrid_New"] table.dataTable tbody > tr > .selected, div[ctype="DataGrid_New"] table.dataTable tbody > tr.selected:hover {
        background-color: white !important;
    }

    div[ctype="DataGrid_New"] td.focus {
        outline: none !important;
        box-shadow: 0 3px 1px -2px rgba(0,0,0,.14), 0 2px 2px 0 rgba(0,0,0,.098), 0 1px 5px 0 rgba(0,0,0,.084);
    }

    div[ctype="DataGrid_New"] table.dataTable tbody tr.selected, div[ctype="DataGrid_New"] table.dataTable tbody th.selected, div[ctype="DataGrid_New"] table.dataTable tbody td.selected {
        color: black !important;
    }
    /*DataGridNew related styles - End*/
</style>

<style>
</style>

<div id='WebForm-cont' class="webform-cont"> </div>

<script>
    $("body").prepend(`
<div class="modal fade" id="AuditHistoryModal" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" style="opacity: 1;">&times;</button>
                <h4 class="modal-title">Audit Trail</h4>
            </div>
            <div class="modal-body">
                <div id="divAuditTrail"> </div>
            </div>
        </div>
    </div>
</div>
`);

    $("body").prepend(` <input type="file" name="excelfile" id="excelfile" style="display: none;" accept=".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel">`);

    let __resp = @Html.Raw(ViewBag.EbFormAndDataWrapper);

    let _masterData = {
        _source: "master",
        _formRefId: __resp.RefId,
        _formObj: __resp.WebFormObj,
        _formObjJsUrl: __resp.WebFormObjJsUrl,
        _relatedData: __resp.RelatedData,
        _rowId: __resp.RowId,
        _draftId: __resp.DraftId,
        _draftInfo: __resp.DraftInfo,

        _formData: (__resp.DraftId > 0 ? JSON.parse(__resp.Draft_FormData) : JSON.parse(__resp.FormDataWrap).FormData),

        _userObject:  ebcontext.user,
        _mode: __resp.Mode,
        _cid: "@ViewBag.Cid",
        _env: "@ViewBag.Env",
        _ispartial: __resp.IsPartial,
        _formPermissions: __resp.FormPermissions,
        _renderMode: __resp.RenderMode,
        _formHTML:  __resp.WebFormHtml,

        _disableEditButton: __resp.DisableEditButton
    };

    $("#layout_div").addClass("for-modal-blur"); // multiple form related changes will come
</script>


@Html.JsCode(
    @<script>
         CallWebFormCollectionRender(_masterData);
    </script>
)