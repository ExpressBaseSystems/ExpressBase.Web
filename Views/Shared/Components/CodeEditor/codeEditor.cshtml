@{ 
    @using ExpressBase.Common;
    var dsObj = EbSerializers.Json_Deserialize(ViewBag.dsObj);
}

<div id='paramdiv@(ViewBag.tabnum)' class='col-md-2'>
    <div class='pgHead'>
        <h6 class='smallfont' style='font-size: 12px;display:inline'>Parameter Div</h6>
        <div class="icon-cont  pull-right" id='close_paramdiv'><i class="fa fa-times" aria-hidden="true"></i></div>
    </div>
</div>
<div class='col-md-8' id='codewindow@(ViewBag.tabnum)' style='margin:0;padding: 0; height:450px'>
    <textarea id='code@(ViewBag.tabnum)' name='code' class='code'></textarea>
</div>
<div class='col-md-2'>
    <div id='dspropgrid@(ViewBag.tabnum)' class='pull-right' style='padding:0px'></div>
</div>
<script>
    if (@ViewBag.tabnum === 0) {
        var commonO = $("#layout_div").data("commonObj");
    }
        if (@ViewBag.tabnum === 0) {
            CodeMirror.commands.autocomplete = function (cm) {
                CodeMirror.showHint(cm, "CodeMirror.hint.sql");
            };
        }
        window["editor@(ViewBag.tabnum)"] = CodeMirror.fromTextArea(document.getElementById("code@(ViewBag.tabnum)"), {
            mode: "text/x-pgsql",
            lineNumbers: true,
            lineWrapping: false,
            extraKeys: { "Ctrl-Space": "autocomplete" },
            autoRefresh: true,
            readOnly: false,
            foldGutter: { rangeFinder: new CodeMirror.fold.combine(CodeMirror.fold.brace, CodeMirror.fold.comment) },
            gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"]
        });
        setTimeout(function () {
            window["editor@(ViewBag.tabnum)"].refresh();
        }, 500);
    commonO.ObjCollection["#vernav@(ViewBag.tabnum)"] = new DataSourceWrapper('@ViewBag.Refid', '@ViewBag.VersionNumber', @ViewBag.ObjType, @Html.Raw(ViewBag.dsObj), '@ViewBag.Status', @ViewBag.tabnum);
</script>
<style>
    .CodeMirror{
        height:100%;
    }
</style>