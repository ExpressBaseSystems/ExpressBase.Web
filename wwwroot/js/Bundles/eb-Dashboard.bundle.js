/*!
 * Chart.js
 * http://chartjs.org/
 * Version: 2.1.3
 *
 * Copyright 2016 Nick Downie
 * Released under the MIT license
 * https://github.com/chartjs/Chart.js/blob/master/LICENSE.md
 */
!function t(e, i, a) { function o(n, r) { if (!i[n]) { if (!e[n]) { var h = "function" == typeof require && require; if (!r && h) return h(n, !0); if (s) return s(n, !0); var l = new Error("Cannot find module '" + n + "'"); throw l.code = "MODULE_NOT_FOUND", l } var c = i[n] = { exports: {} }; e[n][0].call(c.exports, function (t) { var i = e[n][1][t]; return o(i ? i : t) }, c, c.exports, t, e, i, a) } return i[n].exports } for (var s = "function" == typeof require && require, n = 0; n < a.length; n++)o(a[n]); return o }({
    1: [function (t, e, i) { }, {}], 2: [function (t, e, i) { function a(t) { if (t) { var e = /^#([a-fA-F0-9]{3})$/, i = /^#([a-fA-F0-9]{6})$/, a = /^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/, o = /^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/, s = /(\w+)/, n = [0, 0, 0], r = 1, h = t.match(e); if (h) { h = h[1]; for (var l = 0; l < n.length; l++)n[l] = parseInt(h[l] + h[l], 16) } else if (h = t.match(i)) { h = h[1]; for (var l = 0; l < n.length; l++)n[l] = parseInt(h.slice(2 * l, 2 * l + 2), 16) } else if (h = t.match(a)) { for (var l = 0; l < n.length; l++)n[l] = parseInt(h[l + 1]); r = parseFloat(h[4]) } else if (h = t.match(o)) { for (var l = 0; l < n.length; l++)n[l] = Math.round(2.55 * parseFloat(h[l + 1])); r = parseFloat(h[4]) } else if (h = t.match(s)) { if ("transparent" == h[1]) return [0, 0, 0, 0]; if (n = y[h[1]], !n) return } for (var l = 0; l < n.length; l++)n[l] = x(n[l], 0, 255); return r = r || 0 == r ? x(r, 0, 1) : 1, n[3] = r, n } } function o(t) { if (t) { var e = /^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/, i = t.match(e); if (i) { var a = parseFloat(i[4]), o = x(parseInt(i[1]), 0, 360), s = x(parseFloat(i[2]), 0, 100), n = x(parseFloat(i[3]), 0, 100), r = x(isNaN(a) ? 1 : a, 0, 1); return [o, s, n, r] } } } function s(t) { if (t) { var e = /^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/, i = t.match(e); if (i) { var a = parseFloat(i[4]), o = x(parseInt(i[1]), 0, 360), s = x(parseFloat(i[2]), 0, 100), n = x(parseFloat(i[3]), 0, 100), r = x(isNaN(a) ? 1 : a, 0, 1); return [o, s, n, r] } } } function n(t) { var e = a(t); return e && e.slice(0, 3) } function r(t) { var e = o(t); return e && e.slice(0, 3) } function h(t) { var e = a(t); return e ? e[3] : (e = o(t)) ? e[3] : (e = s(t)) ? e[3] : void 0 } function l(t) { return "#" + v(t[0]) + v(t[1]) + v(t[2]) } function c(t, e) { return 1 > e || t[3] && t[3] < 1 ? d(t, e) : "rgb(" + t[0] + ", " + t[1] + ", " + t[2] + ")" } function d(t, e) { return void 0 === e && (e = void 0 !== t[3] ? t[3] : 1), "rgba(" + t[0] + ", " + t[1] + ", " + t[2] + ", " + e + ")" } function u(t, e) { if (1 > e || t[3] && t[3] < 1) return g(t, e); var i = Math.round(t[0] / 255 * 100), a = Math.round(t[1] / 255 * 100), o = Math.round(t[2] / 255 * 100); return "rgb(" + i + "%, " + a + "%, " + o + "%)" } function g(t, e) { var i = Math.round(t[0] / 255 * 100), a = Math.round(t[1] / 255 * 100), o = Math.round(t[2] / 255 * 100); return "rgba(" + i + "%, " + a + "%, " + o + "%, " + (e || t[3] || 1) + ")" } function f(t, e) { return 1 > e || t[3] && t[3] < 1 ? p(t, e) : "hsl(" + t[0] + ", " + t[1] + "%, " + t[2] + "%)" } function p(t, e) { return void 0 === e && (e = void 0 !== t[3] ? t[3] : 1), "hsla(" + t[0] + ", " + t[1] + "%, " + t[2] + "%, " + e + ")" } function m(t, e) { return void 0 === e && (e = void 0 !== t[3] ? t[3] : 1), "hwb(" + t[0] + ", " + t[1] + "%, " + t[2] + "%" + (void 0 !== e && 1 !== e ? ", " + e : "") + ")" } function b(t) { return k[t.slice(0, 3)] } function x(t, e, i) { return Math.min(Math.max(e, t), i) } function v(t) { var e = t.toString(16).toUpperCase(); return e.length < 2 ? "0" + e : e } var y = t("color-name"); e.exports = { getRgba: a, getHsla: o, getRgb: n, getHsl: r, getHwb: s, getAlpha: h, hexString: l, rgbString: c, rgbaString: d, percentString: u, percentaString: g, hslString: f, hslaString: p, hwbString: m, keyword: b }; var k = {}; for (var S in y) k[y[S]] = S }, { "color-name": 6 }], 3: [function (t, e, i) { var a = t("color-convert"), o = t("chartjs-color-string"), s = function (t) { if (t instanceof s) return t; if (!(this instanceof s)) return new s(t); if (this.values = { rgb: [0, 0, 0], hsl: [0, 0, 0], hsv: [0, 0, 0], hwb: [0, 0, 0], cmyk: [0, 0, 0, 0], alpha: 1 }, "string" == typeof t) { var e = o.getRgba(t); if (e) this.setValues("rgb", e); else if (e = o.getHsla(t)) this.setValues("hsl", e); else { if (!(e = o.getHwb(t))) throw new Error('Unable to parse color from string "' + t + '"'); this.setValues("hwb", e) } } else if ("object" == typeof t) { var e = t; if (void 0 !== e.r || void 0 !== e.red) this.setValues("rgb", e); else if (void 0 !== e.l || void 0 !== e.lightness) this.setValues("hsl", e); else if (void 0 !== e.v || void 0 !== e.value) this.setValues("hsv", e); else if (void 0 !== e.w || void 0 !== e.whiteness) this.setValues("hwb", e); else { if (void 0 === e.c && void 0 === e.cyan) throw new Error("Unable to parse color from object " + JSON.stringify(t)); this.setValues("cmyk", e) } } }; s.prototype = { rgb: function (t) { return this.setSpace("rgb", arguments) }, hsl: function (t) { return this.setSpace("hsl", arguments) }, hsv: function (t) { return this.setSpace("hsv", arguments) }, hwb: function (t) { return this.setSpace("hwb", arguments) }, cmyk: function (t) { return this.setSpace("cmyk", arguments) }, rgbArray: function () { return this.values.rgb }, hslArray: function () { return this.values.hsl }, hsvArray: function () { return this.values.hsv }, hwbArray: function () { return 1 !== this.values.alpha ? this.values.hwb.concat([this.values.alpha]) : this.values.hwb }, cmykArray: function () { return this.values.cmyk }, rgbaArray: function () { var t = this.values.rgb; return t.concat([this.values.alpha]) }, hslaArray: function () { var t = this.values.hsl; return t.concat([this.values.alpha]) }, alpha: function (t) { return void 0 === t ? this.values.alpha : (this.setValues("alpha", t), this) }, red: function (t) { return this.setChannel("rgb", 0, t) }, green: function (t) { return this.setChannel("rgb", 1, t) }, blue: function (t) { return this.setChannel("rgb", 2, t) }, hue: function (t) { return this.setChannel("hsl", 0, t) }, saturation: function (t) { return this.setChannel("hsl", 1, t) }, lightness: function (t) { return this.setChannel("hsl", 2, t) }, saturationv: function (t) { return this.setChannel("hsv", 1, t) }, whiteness: function (t) { return this.setChannel("hwb", 1, t) }, blackness: function (t) { return this.setChannel("hwb", 2, t) }, value: function (t) { return this.setChannel("hsv", 2, t) }, cyan: function (t) { return this.setChannel("cmyk", 0, t) }, magenta: function (t) { return this.setChannel("cmyk", 1, t) }, yellow: function (t) { return this.setChannel("cmyk", 2, t) }, black: function (t) { return this.setChannel("cmyk", 3, t) }, hexString: function () { return o.hexString(this.values.rgb) }, rgbString: function () { return o.rgbString(this.values.rgb, this.values.alpha) }, rgbaString: function () { return o.rgbaString(this.values.rgb, this.values.alpha) }, percentString: function () { return o.percentString(this.values.rgb, this.values.alpha) }, hslString: function () { return o.hslString(this.values.hsl, this.values.alpha) }, hslaString: function () { return o.hslaString(this.values.hsl, this.values.alpha) }, hwbString: function () { return o.hwbString(this.values.hwb, this.values.alpha) }, keyword: function () { return o.keyword(this.values.rgb, this.values.alpha) }, rgbNumber: function () { return this.values.rgb[0] << 16 | this.values.rgb[1] << 8 | this.values.rgb[2] }, luminosity: function () { for (var t = this.values.rgb, e = [], i = 0; i < t.length; i++) { var a = t[i] / 255; e[i] = .03928 >= a ? a / 12.92 : Math.pow((a + .055) / 1.055, 2.4) } return .2126 * e[0] + .7152 * e[1] + .0722 * e[2] }, contrast: function (t) { var e = this.luminosity(), i = t.luminosity(); return e > i ? (e + .05) / (i + .05) : (i + .05) / (e + .05) }, level: function (t) { var e = this.contrast(t); return e >= 7.1 ? "AAA" : e >= 4.5 ? "AA" : "" }, dark: function () { var t = this.values.rgb, e = (299 * t[0] + 587 * t[1] + 114 * t[2]) / 1e3; return 128 > e }, light: function () { return !this.dark() }, negate: function () { for (var t = [], e = 0; 3 > e; e++)t[e] = 255 - this.values.rgb[e]; return this.setValues("rgb", t), this }, lighten: function (t) { return this.values.hsl[2] += this.values.hsl[2] * t, this.setValues("hsl", this.values.hsl), this }, darken: function (t) { return this.values.hsl[2] -= this.values.hsl[2] * t, this.setValues("hsl", this.values.hsl), this }, saturate: function (t) { return this.values.hsl[1] += this.values.hsl[1] * t, this.setValues("hsl", this.values.hsl), this }, desaturate: function (t) { return this.values.hsl[1] -= this.values.hsl[1] * t, this.setValues("hsl", this.values.hsl), this }, whiten: function (t) { return this.values.hwb[1] += this.values.hwb[1] * t, this.setValues("hwb", this.values.hwb), this }, blacken: function (t) { return this.values.hwb[2] += this.values.hwb[2] * t, this.setValues("hwb", this.values.hwb), this }, greyscale: function () { var t = this.values.rgb, e = .3 * t[0] + .59 * t[1] + .11 * t[2]; return this.setValues("rgb", [e, e, e]), this }, clearer: function (t) { return this.setValues("alpha", this.values.alpha - this.values.alpha * t), this }, opaquer: function (t) { return this.setValues("alpha", this.values.alpha + this.values.alpha * t), this }, rotate: function (t) { var e = this.values.hsl[0]; return e = (e + t) % 360, e = 0 > e ? 360 + e : e, this.values.hsl[0] = e, this.setValues("hsl", this.values.hsl), this }, mix: function (t, e) { e = 1 - (null == e ? .5 : e); for (var i = 2 * e - 1, a = this.alpha() - t.alpha(), o = ((i * a == -1 ? i : (i + a) / (1 + i * a)) + 1) / 2, s = 1 - o, n = this.rgbArray(), r = t.rgbArray(), h = 0; h < n.length; h++)n[h] = n[h] * o + r[h] * s; this.setValues("rgb", n); var l = this.alpha() * e + t.alpha() * (1 - e); return this.setValues("alpha", l), this }, toJSON: function () { return this.rgb() }, clone: function () { return new s(this.rgb()) } }, s.prototype.getValues = function (t) { for (var e = {}, i = 0; i < t.length; i++)e[t.charAt(i)] = this.values[t][i]; return 1 != this.values.alpha && (e.a = this.values.alpha), e }, s.prototype.setValues = function (t, e) { var i = { rgb: ["red", "green", "blue"], hsl: ["hue", "saturation", "lightness"], hsv: ["hue", "saturation", "value"], hwb: ["hue", "whiteness", "blackness"], cmyk: ["cyan", "magenta", "yellow", "black"] }, o = { rgb: [255, 255, 255], hsl: [360, 100, 100], hsv: [360, 100, 100], hwb: [360, 100, 100], cmyk: [100, 100, 100, 100] }, s = 1; if ("alpha" == t) s = e; else if (e.length) this.values[t] = e.slice(0, t.length), s = e[t.length]; else if (void 0 !== e[t.charAt(0)]) { for (var n = 0; n < t.length; n++)this.values[t][n] = e[t.charAt(n)]; s = e.a } else if (void 0 !== e[i[t][0]]) { for (var r = i[t], n = 0; n < t.length; n++)this.values[t][n] = e[r[n]]; s = e.alpha } if (this.values.alpha = Math.max(0, Math.min(1, void 0 !== s ? s : this.values.alpha)), "alpha" != t) { for (var n = 0; n < t.length; n++) { var h = Math.max(0, Math.min(o[t][n], this.values[t][n])); this.values[t][n] = Math.round(h) } for (var l in i) { l != t && (this.values[l] = a[t][l](this.values[t])); for (var n = 0; n < l.length; n++) { var h = Math.max(0, Math.min(o[l][n], this.values[l][n])); this.values[l][n] = Math.round(h) } } return !0 } }, s.prototype.setSpace = function (t, e) { var i = e[0]; return void 0 === i ? this.getValues(t) : ("number" == typeof i && (i = Array.prototype.slice.call(e)), this.setValues(t, i), this) }, s.prototype.setChannel = function (t, e, i) { return void 0 === i ? this.values[t][e] : (this.values[t][e] = i, this.setValues(t, this.values[t]), this) }, window.Color = e.exports = s }, { "chartjs-color-string": 2, "color-convert": 5 }], 4: [function (t, e, i) { function a(t) { var e, i, a, o = t[0] / 255, s = t[1] / 255, n = t[2] / 255, r = Math.min(o, s, n), h = Math.max(o, s, n), l = h - r; return h == r ? e = 0 : o == h ? e = (s - n) / l : s == h ? e = 2 + (n - o) / l : n == h && (e = 4 + (o - s) / l), e = Math.min(60 * e, 360), 0 > e && (e += 360), a = (r + h) / 2, i = h == r ? 0 : .5 >= a ? l / (h + r) : l / (2 - h - r), [e, 100 * i, 100 * a] } function o(t) { var e, i, a, o = t[0], s = t[1], n = t[2], r = Math.min(o, s, n), h = Math.max(o, s, n), l = h - r; return i = 0 == h ? 0 : l / h * 1e3 / 10, h == r ? e = 0 : o == h ? e = (s - n) / l : s == h ? e = 2 + (n - o) / l : n == h && (e = 4 + (o - s) / l), e = Math.min(60 * e, 360), 0 > e && (e += 360), a = h / 255 * 1e3 / 10, [e, i, a] } function s(t) { var e = t[0], i = t[1], o = t[2], s = a(t)[0], n = 1 / 255 * Math.min(e, Math.min(i, o)), o = 1 - 1 / 255 * Math.max(e, Math.max(i, o)); return [s, 100 * n, 100 * o] } function n(t) { var e, i, a, o, s = t[0] / 255, n = t[1] / 255, r = t[2] / 255; return o = Math.min(1 - s, 1 - n, 1 - r), e = (1 - s - o) / (1 - o) || 0, i = (1 - n - o) / (1 - o) || 0, a = (1 - r - o) / (1 - o) || 0, [100 * e, 100 * i, 100 * a, 100 * o] } function h(t) { return G[JSON.stringify(t)] } function l(t) { var e = t[0] / 255, i = t[1] / 255, a = t[2] / 255; e = e > .04045 ? Math.pow((e + .055) / 1.055, 2.4) : e / 12.92, i = i > .04045 ? Math.pow((i + .055) / 1.055, 2.4) : i / 12.92, a = a > .04045 ? Math.pow((a + .055) / 1.055, 2.4) : a / 12.92; var o = .4124 * e + .3576 * i + .1805 * a, s = .2126 * e + .7152 * i + .0722 * a, n = .0193 * e + .1192 * i + .9505 * a; return [100 * o, 100 * s, 100 * n] } function c(t) { var e, i, a, o = l(t), s = o[0], n = o[1], r = o[2]; return s /= 95.047, n /= 100, r /= 108.883, s = s > .008856 ? Math.pow(s, 1 / 3) : 7.787 * s + 16 / 116, n = n > .008856 ? Math.pow(n, 1 / 3) : 7.787 * n + 16 / 116, r = r > .008856 ? Math.pow(r, 1 / 3) : 7.787 * r + 16 / 116, e = 116 * n - 16, i = 500 * (s - n), a = 200 * (n - r), [e, i, a] } function d(t) { return B(c(t)) } function u(t) { var e, i, a, o, s, n = t[0] / 360, r = t[1] / 100, h = t[2] / 100; if (0 == r) return s = 255 * h, [s, s, s]; i = .5 > h ? h * (1 + r) : h + r - h * r, e = 2 * h - i, o = [0, 0, 0]; for (var l = 0; 3 > l; l++)a = n + 1 / 3 * -(l - 1), 0 > a && a++ , a > 1 && a-- , s = 1 > 6 * a ? e + 6 * (i - e) * a : 1 > 2 * a ? i : 2 > 3 * a ? e + (i - e) * (2 / 3 - a) * 6 : e, o[l] = 255 * s; return o } function f(t) { var e, i, a = t[0], o = t[1] / 100, s = t[2] / 100; return 0 === s ? [0, 0, 0] : (s *= 2, o *= 1 >= s ? s : 2 - s, i = (s + o) / 2, e = 2 * o / (s + o), [a, 100 * e, 100 * i]) } function p(t) { return s(u(t)) } function m(t) { return n(u(t)) } function x(t) { return h(u(t)) } function v(t) { var e = t[0] / 60, i = t[1] / 100, a = t[2] / 100, o = Math.floor(e) % 6, s = e - Math.floor(e), n = 255 * a * (1 - i), r = 255 * a * (1 - i * s), h = 255 * a * (1 - i * (1 - s)), a = 255 * a; switch (o) { case 0: return [a, h, n]; case 1: return [r, a, n]; case 2: return [n, a, h]; case 3: return [n, r, a]; case 4: return [h, n, a]; case 5: return [a, n, r] } } function y(t) { var e, i, a = t[0], o = t[1] / 100, s = t[2] / 100; return i = (2 - o) * s, e = o * s, e /= 1 >= i ? i : 2 - i, e = e || 0, i /= 2, [a, 100 * e, 100 * i] } function k(t) { return s(v(t)) } function S(t) { return n(v(t)) } function C(t) { return h(v(t)) } function w(t) { var e, i, a, o, s = t[0] / 360, n = t[1] / 100, h = t[2] / 100, l = n + h; switch (l > 1 && (n /= l, h /= l), e = Math.floor(6 * s), i = 1 - h, a = 6 * s - e, 0 != (1 & e) && (a = 1 - a), o = n + a * (i - n), e) { default: case 6: case 0: r = i, g = o, b = n; break; case 1: r = o, g = i, b = n; break; case 2: r = n, g = i, b = o; break; case 3: r = n, g = o, b = i; break; case 4: r = o, g = n, b = i; break; case 5: r = i, g = n, b = o }return [255 * r, 255 * g, 255 * b] } function D(t) { return a(w(t)) } function M(t) { return o(w(t)) } function _(t) { return n(w(t)) } function A(t) { return h(w(t)) } function I(t) { var e, i, a, o = t[0] / 100, s = t[1] / 100, n = t[2] / 100, r = t[3] / 100; return e = 1 - Math.min(1, o * (1 - r) + r), i = 1 - Math.min(1, s * (1 - r) + r), a = 1 - Math.min(1, n * (1 - r) + r), [255 * e, 255 * i, 255 * a] } function F(t) { return a(I(t)) } function P(t) { return o(I(t)) } function T(t) { return s(I(t)) } function V(t) { return h(I(t)) } function R(t) { var e, i, a, o = t[0] / 100, s = t[1] / 100, n = t[2] / 100; return e = 3.2406 * o + -1.5372 * s + n * -.4986, i = o * -.9689 + 1.8758 * s + .0415 * n, a = .0557 * o + s * -.204 + 1.057 * n, e = e > .0031308 ? 1.055 * Math.pow(e, 1 / 2.4) - .055 : e = 12.92 * e, i = i > .0031308 ? 1.055 * Math.pow(i, 1 / 2.4) - .055 : i = 12.92 * i, a = a > .0031308 ? 1.055 * Math.pow(a, 1 / 2.4) - .055 : a = 12.92 * a, e = Math.min(Math.max(0, e), 1), i = Math.min(Math.max(0, i), 1), a = Math.min(Math.max(0, a), 1), [255 * e, 255 * i, 255 * a] } function O(t) { var e, i, a, o = t[0], s = t[1], n = t[2]; return o /= 95.047, s /= 100, n /= 108.883, o = o > .008856 ? Math.pow(o, 1 / 3) : 7.787 * o + 16 / 116, s = s > .008856 ? Math.pow(s, 1 / 3) : 7.787 * s + 16 / 116, n = n > .008856 ? Math.pow(n, 1 / 3) : 7.787 * n + 16 / 116, e = 116 * s - 16, i = 500 * (o - s), a = 200 * (s - n), [e, i, a] } function L(t) { return B(O(t)) } function W(t) { var e, i, a, o, s = t[0], n = t[1], r = t[2]; return 8 >= s ? (i = 100 * s / 903.3, o = 7.787 * (i / 100) + 16 / 116) : (i = 100 * Math.pow((s + 16) / 116, 3), o = Math.pow(i / 100, 1 / 3)), e = .008856 >= e / 95.047 ? e = 95.047 * (n / 500 + o - 16 / 116) / 7.787 : 95.047 * Math.pow(n / 500 + o, 3), a = .008859 >= a / 108.883 ? a = 108.883 * (o - r / 200 - 16 / 116) / 7.787 : 108.883 * Math.pow(o - r / 200, 3), [e, i, a] } function B(t) { var e, i, a, o = t[0], s = t[1], n = t[2]; return e = Math.atan2(n, s), i = 360 * e / 2 / Math.PI, 0 > i && (i += 360), a = Math.sqrt(s * s + n * n), [o, a, i] } function z(t) { return R(W(t)) } function H(t) { var e, i, a, o = t[0], s = t[1], n = t[2]; return a = n / 360 * 2 * Math.PI, e = s * Math.cos(a), i = s * Math.sin(a), [o, e, i] } function N(t) { return W(H(t)) } function E(t) { return z(H(t)) } function U(t) { return X[t] } function j(t) { return a(U(t)) } function q(t) { return o(U(t)) } function Y(t) { return s(U(t)) } function Q(t) { return n(U(t)) } function J(t) { return c(U(t)) } function Z(t) { return l(U(t)) } e.exports = { rgb2hsl: a, rgb2hsv: o, rgb2hwb: s, rgb2cmyk: n, rgb2keyword: h, rgb2xyz: l, rgb2lab: c, rgb2lch: d, hsl2rgb: u, hsl2hsv: f, hsl2hwb: p, hsl2cmyk: m, hsl2keyword: x, hsv2rgb: v, hsv2hsl: y, hsv2hwb: k, hsv2cmyk: S, hsv2keyword: C, hwb2rgb: w, hwb2hsl: D, hwb2hsv: M, hwb2cmyk: _, hwb2keyword: A, cmyk2rgb: I, cmyk2hsl: F, cmyk2hsv: P, cmyk2hwb: T, cmyk2keyword: V, keyword2rgb: U, keyword2hsl: j, keyword2hsv: q, keyword2hwb: Y, keyword2cmyk: Q, keyword2lab: J, keyword2xyz: Z, xyz2rgb: R, xyz2lab: O, xyz2lch: L, lab2xyz: W, lab2rgb: z, lab2lch: B, lch2lab: H, lch2xyz: N, lch2rgb: E }; var X = { aliceblue: [240, 248, 255], antiquewhite: [250, 235, 215], aqua: [0, 255, 255], aquamarine: [127, 255, 212], azure: [240, 255, 255], beige: [245, 245, 220], bisque: [255, 228, 196], black: [0, 0, 0], blanchedalmond: [255, 235, 205], blue: [0, 0, 255], blueviolet: [138, 43, 226], brown: [165, 42, 42], burlywood: [222, 184, 135], cadetblue: [95, 158, 160], chartreuse: [127, 255, 0], chocolate: [210, 105, 30], coral: [255, 127, 80], cornflowerblue: [100, 149, 237], cornsilk: [255, 248, 220], crimson: [220, 20, 60], cyan: [0, 255, 255], darkblue: [0, 0, 139], darkcyan: [0, 139, 139], darkgoldenrod: [184, 134, 11], darkgray: [169, 169, 169], darkgreen: [0, 100, 0], darkgrey: [169, 169, 169], darkkhaki: [189, 183, 107], darkmagenta: [139, 0, 139], darkolivegreen: [85, 107, 47], darkorange: [255, 140, 0], darkorchid: [153, 50, 204], darkred: [139, 0, 0], darksalmon: [233, 150, 122], darkseagreen: [143, 188, 143], darkslateblue: [72, 61, 139], darkslategray: [47, 79, 79], darkslategrey: [47, 79, 79], darkturquoise: [0, 206, 209], darkviolet: [148, 0, 211], deeppink: [255, 20, 147], deepskyblue: [0, 191, 255], dimgray: [105, 105, 105], dimgrey: [105, 105, 105], dodgerblue: [30, 144, 255], firebrick: [178, 34, 34], floralwhite: [255, 250, 240], forestgreen: [34, 139, 34], fuchsia: [255, 0, 255], gainsboro: [220, 220, 220], ghostwhite: [248, 248, 255], gold: [255, 215, 0], goldenrod: [218, 165, 32], gray: [128, 128, 128], green: [0, 128, 0], greenyellow: [173, 255, 47], grey: [128, 128, 128], honeydew: [240, 255, 240], hotpink: [255, 105, 180], indianred: [205, 92, 92], indigo: [75, 0, 130], ivory: [255, 255, 240], khaki: [240, 230, 140], lavender: [230, 230, 250], lavenderblush: [255, 240, 245], lawngreen: [124, 252, 0], lemonchiffon: [255, 250, 205], lightblue: [173, 216, 230], lightcoral: [240, 128, 128], lightcyan: [224, 255, 255], lightgoldenrodyellow: [250, 250, 210], lightgray: [211, 211, 211], lightgreen: [144, 238, 144], lightgrey: [211, 211, 211], lightpink: [255, 182, 193], lightsalmon: [255, 160, 122], lightseagreen: [32, 178, 170], lightskyblue: [135, 206, 250], lightslategray: [119, 136, 153], lightslategrey: [119, 136, 153], lightsteelblue: [176, 196, 222], lightyellow: [255, 255, 224], lime: [0, 255, 0], limegreen: [50, 205, 50], linen: [250, 240, 230], magenta: [255, 0, 255], maroon: [128, 0, 0], mediumaquamarine: [102, 205, 170], mediumblue: [0, 0, 205], mediumorchid: [186, 85, 211], mediumpurple: [147, 112, 219], mediumseagreen: [60, 179, 113], mediumslateblue: [123, 104, 238], mediumspringgreen: [0, 250, 154], mediumturquoise: [72, 209, 204], mediumvioletred: [199, 21, 133], midnightblue: [25, 25, 112], mintcream: [245, 255, 250], mistyrose: [255, 228, 225], moccasin: [255, 228, 181], navajowhite: [255, 222, 173], navy: [0, 0, 128], oldlace: [253, 245, 230], olive: [128, 128, 0], olivedrab: [107, 142, 35], orange: [255, 165, 0], orangered: [255, 69, 0], orchid: [218, 112, 214], palegoldenrod: [238, 232, 170], palegreen: [152, 251, 152], paleturquoise: [175, 238, 238], palevioletred: [219, 112, 147], papayawhip: [255, 239, 213], peachpuff: [255, 218, 185], peru: [205, 133, 63], pink: [255, 192, 203], plum: [221, 160, 221], powderblue: [176, 224, 230], purple: [128, 0, 128], rebeccapurple: [102, 51, 153], red: [255, 0, 0], rosybrown: [188, 143, 143], royalblue: [65, 105, 225], saddlebrown: [139, 69, 19], salmon: [250, 128, 114], sandybrown: [244, 164, 96], seagreen: [46, 139, 87], seashell: [255, 245, 238], sienna: [160, 82, 45], silver: [192, 192, 192], skyblue: [135, 206, 235], slateblue: [106, 90, 205], slategray: [112, 128, 144], slategrey: [112, 128, 144], snow: [255, 250, 250], springgreen: [0, 255, 127], steelblue: [70, 130, 180], tan: [210, 180, 140], teal: [0, 128, 128], thistle: [216, 191, 216], tomato: [255, 99, 71], turquoise: [64, 224, 208], violet: [238, 130, 238], wheat: [245, 222, 179], white: [255, 255, 255], whitesmoke: [245, 245, 245], yellow: [255, 255, 0], yellowgreen: [154, 205, 50] }, G = {}; for (var $ in X) G[JSON.stringify(X[$])] = $ }, {}], 5: [function (t, e, i) { var a = t("./conversions"), o = function () { return new l }; for (var s in a) { o[s + "Raw"] = function (t) { return function (e) { return "number" == typeof e && (e = Array.prototype.slice.call(arguments)), a[t](e) } }(s); var n = /(\w+)2(\w+)/.exec(s), r = n[1], h = n[2]; o[r] = o[r] || {}, o[r][h] = o[s] = function (t) { return function (e) { "number" == typeof e && (e = Array.prototype.slice.call(arguments)); var i = a[t](e); if ("string" == typeof i || void 0 === i) return i; for (var o = 0; o < i.length; o++)i[o] = Math.round(i[o]); return i } }(s) } var l = function () { this.convs = {} }; l.prototype.routeSpace = function (t, e) { var i = e[0]; return void 0 === i ? this.getValues(t) : ("number" == typeof i && (i = Array.prototype.slice.call(e)), this.setValues(t, i)) }, l.prototype.setValues = function (t, e) { return this.space = t, this.convs = {}, this.convs[t] = e, this }, l.prototype.getValues = function (t) { var e = this.convs[t]; if (!e) { var i = this.space, a = this.convs[i]; e = o[i][t](a), this.convs[t] = e } return e }, ["rgb", "hsl", "hsv", "cmyk", "keyword"].forEach(function (t) { l.prototype[t] = function (e) { return this.routeSpace(t, arguments) } }), e.exports = o }, { "./conversions": 4 }], 6: [function (t, e, i) { e.exports = { aliceblue: [240, 248, 255], antiquewhite: [250, 235, 215], aqua: [0, 255, 255], aquamarine: [127, 255, 212], azure: [240, 255, 255], beige: [245, 245, 220], bisque: [255, 228, 196], black: [0, 0, 0], blanchedalmond: [255, 235, 205], blue: [0, 0, 255], blueviolet: [138, 43, 226], brown: [165, 42, 42], burlywood: [222, 184, 135], cadetblue: [95, 158, 160], chartreuse: [127, 255, 0], chocolate: [210, 105, 30], coral: [255, 127, 80], cornflowerblue: [100, 149, 237], cornsilk: [255, 248, 220], crimson: [220, 20, 60], cyan: [0, 255, 255], darkblue: [0, 0, 139], darkcyan: [0, 139, 139], darkgoldenrod: [184, 134, 11], darkgray: [169, 169, 169], darkgreen: [0, 100, 0], darkgrey: [169, 169, 169], darkkhaki: [189, 183, 107], darkmagenta: [139, 0, 139], darkolivegreen: [85, 107, 47], darkorange: [255, 140, 0], darkorchid: [153, 50, 204], darkred: [139, 0, 0], darksalmon: [233, 150, 122], darkseagreen: [143, 188, 143], darkslateblue: [72, 61, 139], darkslategray: [47, 79, 79], darkslategrey: [47, 79, 79], darkturquoise: [0, 206, 209], darkviolet: [148, 0, 211], deeppink: [255, 20, 147], deepskyblue: [0, 191, 255], dimgray: [105, 105, 105], dimgrey: [105, 105, 105], dodgerblue: [30, 144, 255], firebrick: [178, 34, 34], floralwhite: [255, 250, 240], forestgreen: [34, 139, 34], fuchsia: [255, 0, 255], gainsboro: [220, 220, 220], ghostwhite: [248, 248, 255], gold: [255, 215, 0], goldenrod: [218, 165, 32], gray: [128, 128, 128], green: [0, 128, 0], greenyellow: [173, 255, 47], grey: [128, 128, 128], honeydew: [240, 255, 240], hotpink: [255, 105, 180], indianred: [205, 92, 92], indigo: [75, 0, 130], ivory: [255, 255, 240], khaki: [240, 230, 140], lavender: [230, 230, 250], lavenderblush: [255, 240, 245], lawngreen: [124, 252, 0], lemonchiffon: [255, 250, 205], lightblue: [173, 216, 230], lightcoral: [240, 128, 128], lightcyan: [224, 255, 255], lightgoldenrodyellow: [250, 250, 210], lightgray: [211, 211, 211], lightgreen: [144, 238, 144], lightgrey: [211, 211, 211], lightpink: [255, 182, 193], lightsalmon: [255, 160, 122], lightseagreen: [32, 178, 170], lightskyblue: [135, 206, 250], lightslategray: [119, 136, 153], lightslategrey: [119, 136, 153], lightsteelblue: [176, 196, 222], lightyellow: [255, 255, 224], lime: [0, 255, 0], limegreen: [50, 205, 50], linen: [250, 240, 230], magenta: [255, 0, 255], maroon: [128, 0, 0], mediumaquamarine: [102, 205, 170], mediumblue: [0, 0, 205], mediumorchid: [186, 85, 211], mediumpurple: [147, 112, 219], mediumseagreen: [60, 179, 113], mediumslateblue: [123, 104, 238], mediumspringgreen: [0, 250, 154], mediumturquoise: [72, 209, 204], mediumvioletred: [199, 21, 133], midnightblue: [25, 25, 112], mintcream: [245, 255, 250], mistyrose: [255, 228, 225], moccasin: [255, 228, 181], navajowhite: [255, 222, 173], navy: [0, 0, 128], oldlace: [253, 245, 230], olive: [128, 128, 0], olivedrab: [107, 142, 35], orange: [255, 165, 0], orangered: [255, 69, 0], orchid: [218, 112, 214], palegoldenrod: [238, 232, 170], palegreen: [152, 251, 152], paleturquoise: [175, 238, 238], palevioletred: [219, 112, 147], papayawhip: [255, 239, 213], peachpuff: [255, 218, 185], peru: [205, 133, 63], pink: [255, 192, 203], plum: [221, 160, 221], powderblue: [176, 224, 230], purple: [128, 0, 128], rebeccapurple: [102, 51, 153], red: [255, 0, 0], rosybrown: [188, 143, 143], royalblue: [65, 105, 225], saddlebrown: [139, 69, 19], salmon: [250, 128, 114], sandybrown: [244, 164, 96], seagreen: [46, 139, 87], seashell: [255, 245, 238], sienna: [160, 82, 45], silver: [192, 192, 192], skyblue: [135, 206, 235], slateblue: [106, 90, 205], slategray: [112, 128, 144], slategrey: [112, 128, 144], snow: [255, 250, 250], springgreen: [0, 255, 127], steelblue: [70, 130, 180], tan: [210, 180, 140], teal: [0, 128, 128], thistle: [216, 191, 216], tomato: [255, 99, 71], turquoise: [64, 224, 208], violet: [238, 130, 238], wheat: [245, 222, 179], white: [255, 255, 255], whitesmoke: [245, 245, 245], yellow: [255, 255, 0], yellowgreen: [154, 205, 50] } }, {}], 7: [function (t, e, i) { var a = t("./core/core.js")(); t("./core/core.helpers")(a), t("./core/core.element")(a), t("./core/core.animation")(a), t("./core/core.controller")(a), t("./core/core.datasetController")(a), t("./core/core.layoutService")(a), t("./core/core.legend")(a), t("./core/core.plugin.js")(a), t("./core/core.scale")(a), t("./core/core.scaleService")(a), t("./core/core.title")(a), t("./core/core.tooltip")(a), t("./controllers/controller.bar")(a), t("./controllers/controller.bubble")(a), t("./controllers/controller.doughnut")(a), t("./controllers/controller.line")(a), t("./controllers/controller.polarArea")(a), t("./controllers/controller.radar")(a), t("./scales/scale.category")(a), t("./scales/scale.linear")(a), t("./scales/scale.logarithmic")(a), t("./scales/scale.radialLinear")(a), t("./scales/scale.time")(a), t("./elements/element.arc")(a), t("./elements/element.line")(a), t("./elements/element.point")(a), t("./elements/element.rectangle")(a), t("./charts/Chart.Bar")(a), t("./charts/Chart.Bubble")(a), t("./charts/Chart.Doughnut")(a), t("./charts/Chart.Line")(a), t("./charts/Chart.PolarArea")(a), t("./charts/Chart.Radar")(a), t("./charts/Chart.Scatter")(a), window.Chart = e.exports = a }, { "./charts/Chart.Bar": 8, "./charts/Chart.Bubble": 9, "./charts/Chart.Doughnut": 10, "./charts/Chart.Line": 11, "./charts/Chart.PolarArea": 12, "./charts/Chart.Radar": 13, "./charts/Chart.Scatter": 14, "./controllers/controller.bar": 15, "./controllers/controller.bubble": 16, "./controllers/controller.doughnut": 17, "./controllers/controller.line": 18, "./controllers/controller.polarArea": 19, "./controllers/controller.radar": 20, "./core/core.animation": 21, "./core/core.controller": 22, "./core/core.datasetController": 23, "./core/core.element": 24, "./core/core.helpers": 25, "./core/core.js": 26, "./core/core.layoutService": 27, "./core/core.legend": 28, "./core/core.plugin.js": 29, "./core/core.scale": 30, "./core/core.scaleService": 31, "./core/core.title": 32, "./core/core.tooltip": 33, "./elements/element.arc": 34, "./elements/element.line": 35, "./elements/element.point": 36, "./elements/element.rectangle": 37, "./scales/scale.category": 38, "./scales/scale.linear": 39, "./scales/scale.logarithmic": 40, "./scales/scale.radialLinear": 41, "./scales/scale.time": 42 }], 8: [function (t, e, i) { "use strict"; e.exports = function (t) { t.Bar = function (e, i) { return i.type = "bar", new t(e, i) } } }, {}], 9: [function (t, e, i) { "use strict"; e.exports = function (t) { t.Bubble = function (e, i) { return i.type = "bubble", new t(e, i) } } }, {}], 10: [function (t, e, i) { "use strict"; e.exports = function (t) { t.Doughnut = function (e, i) { return i.type = "doughnut", new t(e, i) } } }, {}], 11: [function (t, e, i) { "use strict"; e.exports = function (t) { t.Line = function (e, i) { return i.type = "line", new t(e, i) } } }, {}], 12: [function (t, e, i) { "use strict"; e.exports = function (t) { t.PolarArea = function (e, i) { return i.type = "polarArea", new t(e, i) } } }, {}], 13: [function (t, e, i) { "use strict"; e.exports = function (t) { var e = t.helpers, i = { aspectRatio: 1 }; t.Radar = function (a, o) { return o.options = e.configMerge(i, o.options), o.type = "radar", new t(a, o) } } }, {}], 14: [function (t, e, i) { "use strict"; e.exports = function (t) { var e = { hover: { mode: "single" }, scales: { xAxes: [{ type: "linear", position: "bottom", id: "x-axis-1" }], yAxes: [{ type: "linear", position: "left", id: "y-axis-1" }] }, tooltips: { callbacks: { title: function (t, e) { return "" }, label: function (t, e) { return "(" + t.xLabel + ", " + t.yLabel + ")" } } } }; t.defaults.scatter = e, t.controllers.scatter = t.controllers.line, t.Scatter = function (e, i) { return i.type = "scatter", new t(e, i) } } }, {}], 15: [function (t, e, i) {
        "use strict"; e.exports = function (t) {
            var e = t.helpers; t.defaults.bar = { hover: { mode: "label" }, scales: { xAxes: [{ type: "category", categoryPercentage: .8, barPercentage: .9, gridLines: { offsetGridLines: !0 } }], yAxes: [{ type: "linear" }] } }, t.controllers.bar = t.DatasetController.extend({
                initialize: function (e, i) { t.DatasetController.prototype.initialize.call(this, e, i), this.getMeta().bar = !0 }, getBarCount: function () { var t = 0; return e.each(this.chart.data.datasets, function (e, i) { var a = this.chart.getDatasetMeta(i); a.bar && this.chart.isDatasetVisible(i) && ++t }, this), t }, addElements: function () { var i = this.getMeta(); e.each(this.getDataset().data, function (e, a) { i.data[a] = i.data[a] || new t.elements.Rectangle({ _chart: this.chart.chart, _datasetIndex: this.index, _index: a }) }, this) }, addElementAndReset: function (e) { var i = new t.elements.Rectangle({ _chart: this.chart.chart, _datasetIndex: this.index, _index: e }), a = this.getBarCount(); this.getMeta().data.splice(e, 0, i), this.updateElement(i, e, !0, a) }, update: function (t) { var i = this.getBarCount(); e.each(this.getMeta().data, function (e, a) { this.updateElement(e, a, t, i) }, this) }, updateElement: function (t, i, a, o) { var s, n = this.getMeta(), r = this.getScaleForId(n.xAxisID), h = this.getScaleForId(n.yAxisID); s = h.min < 0 && h.max < 0 ? h.getPixelForValue(h.max) : h.min > 0 && h.max > 0 ? h.getPixelForValue(h.min) : h.getPixelForValue(0), e.extend(t, { _chart: this.chart.chart, _xScale: r, _yScale: h, _datasetIndex: this.index, _index: i, _model: { x: this.calculateBarX(i, this.index), y: a ? s : this.calculateBarY(i, this.index), label: this.chart.data.labels[i], datasetLabel: this.getDataset().label, base: a ? s : this.calculateBarBase(this.index, i), width: this.calculateBarWidth(o), backgroundColor: t.custom && t.custom.backgroundColor ? t.custom.backgroundColor : e.getValueAtIndexOrDefault(this.getDataset().backgroundColor, i, this.chart.options.elements.rectangle.backgroundColor), borderSkipped: t.custom && t.custom.borderSkipped ? t.custom.borderSkipped : this.chart.options.elements.rectangle.borderSkipped, borderColor: t.custom && t.custom.borderColor ? t.custom.borderColor : e.getValueAtIndexOrDefault(this.getDataset().borderColor, i, this.chart.options.elements.rectangle.borderColor), borderWidth: t.custom && t.custom.borderWidth ? t.custom.borderWidth : e.getValueAtIndexOrDefault(this.getDataset().borderWidth, i, this.chart.options.elements.rectangle.borderWidth) } }), t.pivot() }, calculateBarBase: function (t, e) { var i = this.getMeta(), a = (this.getScaleForId(i.xAxisID), this.getScaleForId(i.yAxisID)), o = 0; if (a.options.stacked) { var s = this.chart.data.datasets[t].data[e]; if (0 > s) for (var n = 0; t > n; n++) { var r = this.chart.data.datasets[n], h = this.chart.getDatasetMeta(n); h.bar && h.yAxisID === a.id && this.chart.isDatasetVisible(n) && (o += r.data[e] < 0 ? r.data[e] : 0) } else for (var l = 0; t > l; l++) { var c = this.chart.data.datasets[l], d = this.chart.getDatasetMeta(l); d.bar && d.yAxisID === a.id && this.chart.isDatasetVisible(l) && (o += c.data[e] > 0 ? c.data[e] : 0) } return a.getPixelForValue(o) } return o = a.getPixelForValue(a.min), a.beginAtZero || a.min <= 0 && a.max >= 0 || a.min >= 0 && a.max <= 0 ? o = a.getPixelForValue(0, 0) : a.min < 0 && a.max < 0 && (o = a.getPixelForValue(a.max)), o }, getRuler: function () { var t = this.getMeta(), e = this.getScaleForId(t.xAxisID), i = (this.getScaleForId(t.yAxisID), this.getBarCount()), a = function () { for (var t = e.getPixelForTick(1) - e.getPixelForTick(0), i = 2; i < e.ticks.length; i++)t = Math.min(e.getPixelForTick(i) - e.getPixelForTick(i - 1), t); return t }.call(this), o = a * e.options.categoryPercentage, s = (a - a * e.options.categoryPercentage) / 2, n = o / i; if (e.ticks.length !== this.chart.data.labels.length) { var r = e.ticks.length / this.chart.data.labels.length; n *= r } var h = n * e.options.barPercentage, l = n - n * e.options.barPercentage; return { datasetCount: i, tickWidth: a, categoryWidth: o, categorySpacing: s, fullBarWidth: n, barWidth: h, barSpacing: l } }, calculateBarWidth: function () { var t = this.getScaleForId(this.getMeta().xAxisID), e = this.getRuler(); return t.options.stacked ? e.categoryWidth : e.barWidth }, getBarIndex: function (t) { var e, i, a = 0; for (i = 0; t > i; ++i)e = this.chart.getDatasetMeta(i), e.bar && this.chart.isDatasetVisible(i) && ++a; return a }, calculateBarX: function (t, e) { var i = this.getMeta(), a = (this.getScaleForId(i.yAxisID), this.getScaleForId(i.xAxisID)), o = this.getBarIndex(e), s = this.getRuler(), n = a.getPixelForValue(null, t, e, this.chart.isCombo); return n -= this.chart.isCombo ? s.tickWidth / 2 : 0, a.options.stacked ? n + s.categoryWidth / 2 + s.categorySpacing : n + s.barWidth / 2 + s.categorySpacing + s.barWidth * o + s.barSpacing / 2 + s.barSpacing * o }, calculateBarY: function (t, e) { var i = this.getMeta(), a = (this.getScaleForId(i.xAxisID), this.getScaleForId(i.yAxisID)), o = this.getDataset().data[t]; if (a.options.stacked) { for (var s = 0, n = 0, r = 0; e > r; r++) { var h = this.chart.data.datasets[r], l = this.chart.getDatasetMeta(r); l.bar && l.yAxisID === a.id && this.chart.isDatasetVisible(r) && (h.data[t] < 0 ? n += h.data[t] || 0 : s += h.data[t] || 0) } return 0 > o ? a.getPixelForValue(n + o) : a.getPixelForValue(s + o) } return a.getPixelForValue(o) }, draw: function (t) { var i = t || 1; e.each(this.getMeta().data, function (t, e) { var a = this.getDataset().data[e]; null === a || void 0 === a || isNaN(a) || t.transition(i).draw() }, this) }, setHoverStyle: function (t) {
                    var i = this.chart.data.datasets[t._datasetIndex], a = t._index; t._model.backgroundColor = t.custom && t.custom.hoverBackgroundColor ? t.custom.hoverBackgroundColor : e.getValueAtIndexOrDefault(i.hoverBackgroundColor, a, e.getHoverColor(t._model.backgroundColor)),
                        t._model.borderColor = t.custom && t.custom.hoverBorderColor ? t.custom.hoverBorderColor : e.getValueAtIndexOrDefault(i.hoverBorderColor, a, e.getHoverColor(t._model.borderColor)), t._model.borderWidth = t.custom && t.custom.hoverBorderWidth ? t.custom.hoverBorderWidth : e.getValueAtIndexOrDefault(i.hoverBorderWidth, a, t._model.borderWidth)
                }, removeHoverStyle: function (t) { var i = (this.chart.data.datasets[t._datasetIndex], t._index); t._model.backgroundColor = t.custom && t.custom.backgroundColor ? t.custom.backgroundColor : e.getValueAtIndexOrDefault(this.getDataset().backgroundColor, i, this.chart.options.elements.rectangle.backgroundColor), t._model.borderColor = t.custom && t.custom.borderColor ? t.custom.borderColor : e.getValueAtIndexOrDefault(this.getDataset().borderColor, i, this.chart.options.elements.rectangle.borderColor), t._model.borderWidth = t.custom && t.custom.borderWidth ? t.custom.borderWidth : e.getValueAtIndexOrDefault(this.getDataset().borderWidth, i, this.chart.options.elements.rectangle.borderWidth) }
            }), t.defaults.horizontalBar = { hover: { mode: "label" }, scales: { xAxes: [{ type: "linear", position: "bottom" }], yAxes: [{ position: "left", type: "category", categoryPercentage: .8, barPercentage: .9, gridLines: { offsetGridLines: !0 } }] } }, t.controllers.horizontalBar = t.controllers.bar.extend({ updateElement: function (t, i, a, o) { var s, n = this.getMeta(), r = this.getScaleForId(n.xAxisID), h = this.getScaleForId(n.yAxisID); s = r.min < 0 && r.max < 0 ? r.getPixelForValue(r.max) : r.min > 0 && r.max > 0 ? r.getPixelForValue(r.min) : r.getPixelForValue(0), e.extend(t, { _chart: this.chart.chart, _xScale: r, _yScale: h, _datasetIndex: this.index, _index: i, _model: { x: a ? s : this.calculateBarX(i, this.index), y: this.calculateBarY(i, this.index), label: this.chart.data.labels[i], datasetLabel: this.getDataset().label, base: a ? s : this.calculateBarBase(this.index, i), height: this.calculateBarHeight(o), backgroundColor: t.custom && t.custom.backgroundColor ? t.custom.backgroundColor : e.getValueAtIndexOrDefault(this.getDataset().backgroundColor, i, this.chart.options.elements.rectangle.backgroundColor), borderSkipped: t.custom && t.custom.borderSkipped ? t.custom.borderSkipped : this.chart.options.elements.rectangle.borderSkipped, borderColor: t.custom && t.custom.borderColor ? t.custom.borderColor : e.getValueAtIndexOrDefault(this.getDataset().borderColor, i, this.chart.options.elements.rectangle.borderColor), borderWidth: t.custom && t.custom.borderWidth ? t.custom.borderWidth : e.getValueAtIndexOrDefault(this.getDataset().borderWidth, i, this.chart.options.elements.rectangle.borderWidth) }, draw: function () { function t(t) { return h[(c + t) % 4] } var e = this._chart.ctx, i = this._view, a = i.height / 2, o = i.y - a, s = i.y + a, n = i.base - (i.base - i.x), r = i.borderWidth / 2; i.borderWidth && (o += r, s -= r, n += r), e.beginPath(), e.fillStyle = i.backgroundColor, e.strokeStyle = i.borderColor, e.lineWidth = i.borderWidth; var h = [[i.base, s], [i.base, o], [n, o], [n, s]], l = ["bottom", "left", "top", "right"], c = l.indexOf(i.borderSkipped, 0); -1 === c && (c = 0), e.moveTo.apply(e, t(0)); for (var d = 1; 4 > d; d++)e.lineTo.apply(e, t(d)); e.fill(), i.borderWidth && e.stroke() }, inRange: function (t, e) { var i = this._view, a = !1; return i && (a = i.x < i.base ? e >= i.y - i.height / 2 && e <= i.y + i.height / 2 && t >= i.x && t <= i.base : e >= i.y - i.height / 2 && e <= i.y + i.height / 2 && t >= i.base && t <= i.x), a } }), t.pivot() }, calculateBarBase: function (t, e) { var i = this.getMeta(), a = this.getScaleForId(i.xAxisID), o = (this.getScaleForId(i.yAxisID), 0); if (a.options.stacked) { var s = this.chart.data.datasets[t].data[e]; if (0 > s) for (var n = 0; t > n; n++) { var r = this.chart.data.datasets[n], h = this.chart.getDatasetMeta(n); h.bar && h.xAxisID === a.id && this.chart.isDatasetVisible(n) && (o += r.data[e] < 0 ? r.data[e] : 0) } else for (var l = 0; t > l; l++) { var c = this.chart.data.datasets[l], d = this.chart.getDatasetMeta(l); d.bar && d.xAxisID === a.id && this.chart.isDatasetVisible(l) && (o += c.data[e] > 0 ? c.data[e] : 0) } return a.getPixelForValue(o) } return o = a.getPixelForValue(a.min), a.beginAtZero || a.min <= 0 && a.max >= 0 || a.min >= 0 && a.max <= 0 ? o = a.getPixelForValue(0, 0) : a.min < 0 && a.max < 0 && (o = a.getPixelForValue(a.max)), o }, getRuler: function () { var t = this.getMeta(), e = (this.getScaleForId(t.xAxisID), this.getScaleForId(t.yAxisID)), i = this.getBarCount(), a = function () { for (var t = e.getPixelForTick(1) - e.getPixelForTick(0), i = 2; i < this.getDataset().data.length; i++)t = Math.min(e.getPixelForTick(i) - e.getPixelForTick(i - 1), t); return t }.call(this), o = a * e.options.categoryPercentage, s = (a - a * e.options.categoryPercentage) / 2, n = o / i; if (e.ticks.length !== this.chart.data.labels.length) { var r = e.ticks.length / this.chart.data.labels.length; n *= r } var h = n * e.options.barPercentage, l = n - n * e.options.barPercentage; return { datasetCount: i, tickHeight: a, categoryHeight: o, categorySpacing: s, fullBarHeight: n, barHeight: h, barSpacing: l } }, calculateBarHeight: function () { var t = this.getScaleForId(this.getMeta().yAxisID), e = this.getRuler(); return t.options.stacked ? e.categoryHeight : e.barHeight }, calculateBarX: function (t, e) { var i = this.getMeta(), a = this.getScaleForId(i.xAxisID), o = (this.getScaleForId(i.yAxisID), this.getDataset().data[t]); if (a.options.stacked) { for (var s = 0, n = 0, r = 0; e > r; r++) { var h = this.chart.data.datasets[r], l = this.chart.getDatasetMeta(r); l.bar && l.xAxisID === a.id && this.chart.isDatasetVisible(r) && (h.data[t] < 0 ? n += h.data[t] || 0 : s += h.data[t] || 0) } return 0 > o ? a.getPixelForValue(n + o) : a.getPixelForValue(s + o) } return a.getPixelForValue(o) }, calculateBarY: function (t, e) { var i = this.getMeta(), a = this.getScaleForId(i.yAxisID), o = (this.getScaleForId(i.xAxisID), this.getBarIndex(e)), s = this.getRuler(), n = a.getPixelForValue(null, t, e, this.chart.isCombo); return n -= this.chart.isCombo ? s.tickHeight / 2 : 0, a.options.stacked ? n + s.categoryHeight / 2 + s.categorySpacing : n + s.barHeight / 2 + s.categorySpacing + s.barHeight * o + s.barSpacing / 2 + s.barSpacing * o } })
        }
    }, {}], 16: [function (t, e, i) { "use strict"; e.exports = function (t) { var e = t.helpers; t.defaults.bubble = { hover: { mode: "single" }, scales: { xAxes: [{ type: "linear", position: "bottom", id: "x-axis-0" }], yAxes: [{ type: "linear", position: "left", id: "y-axis-0" }] }, tooltips: { callbacks: { title: function (t, e) { return "" }, label: function (t, e) { var i = e.datasets[t.datasetIndex].label || "", a = e.datasets[t.datasetIndex].data[t.index]; return i + ": (" + a.x + ", " + a.y + ", " + a.r + ")" } } } }, t.controllers.bubble = t.DatasetController.extend({ addElements: function () { var i = this.getMeta(); e.each(this.getDataset().data, function (e, a) { i.data[a] = i.data[a] || new t.elements.Point({ _chart: this.chart.chart, _datasetIndex: this.index, _index: a }) }, this) }, addElementAndReset: function (e) { var i = new t.elements.Point({ _chart: this.chart.chart, _datasetIndex: this.index, _index: e }); this.getMeta().data.splice(e, 0, i), this.updateElement(i, e, !0) }, update: function (t) { var i, a = this.getMeta(), o = a.data, s = this.getScaleForId(a.yAxisID); this.getScaleForId(a.xAxisID); i = s.min < 0 && s.max < 0 ? s.getPixelForValue(s.max) : s.min > 0 && s.max > 0 ? s.getPixelForValue(s.min) : s.getPixelForValue(0), e.each(o, function (e, i) { this.updateElement(e, i, t) }, this) }, updateElement: function (t, i, a) { var o, s = this.getMeta(), n = this.getScaleForId(s.yAxisID), r = this.getScaleForId(s.xAxisID); o = n.min < 0 && n.max < 0 ? n.getPixelForValue(n.max) : n.min > 0 && n.max > 0 ? n.getPixelForValue(n.min) : n.getPixelForValue(0), e.extend(t, { _chart: this.chart.chart, _xScale: r, _yScale: n, _datasetIndex: this.index, _index: i, _model: { x: a ? r.getPixelForDecimal(.5) : r.getPixelForValue(this.getDataset().data[i], i, this.index, this.chart.isCombo), y: a ? o : n.getPixelForValue(this.getDataset().data[i], i, this.index), radius: a ? 0 : t.custom && t.custom.radius ? t.custom.radius : this.getRadius(this.getDataset().data[i]), backgroundColor: t.custom && t.custom.backgroundColor ? t.custom.backgroundColor : e.getValueAtIndexOrDefault(this.getDataset().backgroundColor, i, this.chart.options.elements.point.backgroundColor), borderColor: t.custom && t.custom.borderColor ? t.custom.borderColor : e.getValueAtIndexOrDefault(this.getDataset().borderColor, i, this.chart.options.elements.point.borderColor), borderWidth: t.custom && t.custom.borderWidth ? t.custom.borderWidth : e.getValueAtIndexOrDefault(this.getDataset().borderWidth, i, this.chart.options.elements.point.borderWidth), hitRadius: t.custom && t.custom.hitRadius ? t.custom.hitRadius : e.getValueAtIndexOrDefault(this.getDataset().hitRadius, i, this.chart.options.elements.point.hitRadius) } }), t._model.skip = t.custom && t.custom.skip ? t.custom.skip : isNaN(t._model.x) || isNaN(t._model.y), t.pivot() }, getRadius: function (t) { return t.r || this.chart.options.elements.point.radius }, draw: function (t) { var i = t || 1; e.each(this.getMeta().data, function (t, e) { t.transition(i), t.draw() }) }, setHoverStyle: function (t) { var i = this.chart.data.datasets[t._datasetIndex], a = t._index; t._model.radius = t.custom && t.custom.hoverRadius ? t.custom.hoverRadius : e.getValueAtIndexOrDefault(i.hoverRadius, a, this.chart.options.elements.point.hoverRadius) + this.getRadius(this.getDataset().data[t._index]), t._model.backgroundColor = t.custom && t.custom.hoverBackgroundColor ? t.custom.hoverBackgroundColor : e.getValueAtIndexOrDefault(i.hoverBackgroundColor, a, e.getHoverColor(t._model.backgroundColor)), t._model.borderColor = t.custom && t.custom.hoverBorderColor ? t.custom.hoverBorderColor : e.getValueAtIndexOrDefault(i.hoverBorderColor, a, e.getHoverColor(t._model.borderColor)), t._model.borderWidth = t.custom && t.custom.hoverBorderWidth ? t.custom.hoverBorderWidth : e.getValueAtIndexOrDefault(i.hoverBorderWidth, a, t._model.borderWidth) }, removeHoverStyle: function (t) { var i = (this.chart.data.datasets[t._datasetIndex], t._index); t._model.radius = t.custom && t.custom.radius ? t.custom.radius : this.getRadius(this.getDataset().data[t._index]), t._model.backgroundColor = t.custom && t.custom.backgroundColor ? t.custom.backgroundColor : e.getValueAtIndexOrDefault(this.getDataset().backgroundColor, i, this.chart.options.elements.point.backgroundColor), t._model.borderColor = t.custom && t.custom.borderColor ? t.custom.borderColor : e.getValueAtIndexOrDefault(this.getDataset().borderColor, i, this.chart.options.elements.point.borderColor), t._model.borderWidth = t.custom && t.custom.borderWidth ? t.custom.borderWidth : e.getValueAtIndexOrDefault(this.getDataset().borderWidth, i, this.chart.options.elements.point.borderWidth) } }) } }, {}], 17: [function (t, e, i) { "use strict"; e.exports = function (t) { var e = t.helpers; t.defaults.doughnut = { animation: { animateRotate: !0, animateScale: !1 }, aspectRatio: 1, hover: { mode: "single" }, legendCallback: function (t) { var e = []; if (e.push('<ul class="' + t.id + '-legend">'), t.data.datasets.length) for (var i = 0; i < t.data.datasets[0].data.length; ++i)e.push('<li><span style="background-color:' + t.data.datasets[0].backgroundColor[i] + '"></span>'), t.data.labels[i] && e.push(t.data.labels[i]), e.push("</li>"); return e.push("</ul>"), e.join("") }, legend: { labels: { generateLabels: function (t) { var i = t.data; return i.labels.length && i.datasets.length ? i.labels.map(function (a, o) { var s = t.getDatasetMeta(0), n = i.datasets[0], r = s.data[o], h = r.custom && r.custom.backgroundColor ? r.custom.backgroundColor : e.getValueAtIndexOrDefault(n.backgroundColor, o, this.chart.options.elements.arc.backgroundColor), l = r.custom && r.custom.borderColor ? r.custom.borderColor : e.getValueAtIndexOrDefault(n.borderColor, o, this.chart.options.elements.arc.borderColor), c = r.custom && r.custom.borderWidth ? r.custom.borderWidth : e.getValueAtIndexOrDefault(n.borderWidth, o, this.chart.options.elements.arc.borderWidth); return { text: a, fillStyle: h, strokeStyle: l, lineWidth: c, hidden: isNaN(n.data[o]) || s.data[o].hidden, index: o } }, this) : [] } }, onClick: function (t, e) { var i, a, o, s = e.index, n = this.chart; for (i = 0, a = (n.data.datasets || []).length; a > i; ++i)o = n.getDatasetMeta(i), o.data[s].hidden = !o.data[s].hidden; n.update() } }, cutoutPercentage: 50, rotation: Math.PI * -.5, circumference: 2 * Math.PI, tooltips: { callbacks: { title: function () { return "" }, label: function (t, e) { return e.labels[t.index] + ": " + e.datasets[t.datasetIndex].data[t.index] } } } }, t.defaults.pie = e.clone(t.defaults.doughnut), e.extend(t.defaults.pie, { cutoutPercentage: 0 }), t.controllers.doughnut = t.controllers.pie = t.DatasetController.extend({ linkScales: function () { }, addElements: function () { var i = this.getMeta(); e.each(this.getDataset().data, function (e, a) { i.data[a] = i.data[a] || new t.elements.Arc({ _chart: this.chart.chart, _datasetIndex: this.index, _index: a }) }, this) }, addElementAndReset: function (i, a) { var o = new t.elements.Arc({ _chart: this.chart.chart, _datasetIndex: this.index, _index: i }); a && e.isArray(this.getDataset().backgroundColor) && this.getDataset().backgroundColor.splice(i, 0, a), this.getMeta().data.splice(i, 0, o), this.updateElement(o, i, !0) }, getRingIndex: function (t) { for (var e = 0, i = 0; t > i; ++i)this.chart.isDatasetVisible(i) && ++e; return e }, update: function (t) { var i = this.chart.chartArea.right - this.chart.chartArea.left - this.chart.options.elements.arc.borderWidth, a = this.chart.chartArea.bottom - this.chart.chartArea.top - this.chart.options.elements.arc.borderWidth, o = Math.min(i, a), s = { x: 0, y: 0 }; if (this.chart.options.circumference < 2 * Math.PI) { var n = this.chart.options.rotation % (2 * Math.PI); n += 2 * Math.PI * (n >= Math.PI ? -1 : n < -Math.PI ? 1 : 0); var r = n + this.chart.options.circumference, h = { x: Math.cos(n), y: Math.sin(n) }, l = { x: Math.cos(r), y: Math.sin(r) }, c = 0 >= n && r >= 0 || n <= 2 * Math.PI && 2 * Math.PI <= r, d = n <= .5 * Math.PI && .5 * Math.PI <= r || n <= 2.5 * Math.PI && 2.5 * Math.PI <= r, u = n <= -Math.PI && -Math.PI <= r || n <= Math.PI && Math.PI <= r, g = n <= .5 * -Math.PI && .5 * -Math.PI <= r || n <= 1.5 * Math.PI && 1.5 * Math.PI <= r, f = this.chart.options.cutoutPercentage / 100, p = { x: u ? -1 : Math.min(h.x * (h.x < 0 ? 1 : f), l.x * (l.x < 0 ? 1 : f)), y: g ? -1 : Math.min(h.y * (h.y < 0 ? 1 : f), l.y * (l.y < 0 ? 1 : f)) }, m = { x: c ? 1 : Math.max(h.x * (h.x > 0 ? 1 : f), l.x * (l.x > 0 ? 1 : f)), y: d ? 1 : Math.max(h.y * (h.y > 0 ? 1 : f), l.y * (l.y > 0 ? 1 : f)) }, b = { width: .5 * (m.x - p.x), height: .5 * (m.y - p.y) }; o = Math.min(i / b.width, a / b.height), s = { x: (m.x + p.x) * -.5, y: (m.y + p.y) * -.5 } } this.chart.outerRadius = Math.max(o / 2, 0), this.chart.innerRadius = Math.max(this.chart.options.cutoutPercentage ? this.chart.outerRadius / 100 * this.chart.options.cutoutPercentage : 1, 0), this.chart.radiusLength = (this.chart.outerRadius - this.chart.innerRadius) / this.chart.getVisibleDatasetCount(), this.chart.offsetX = s.x * this.chart.outerRadius, this.chart.offsetY = s.y * this.chart.outerRadius, this.getMeta().total = this.calculateTotal(), this.outerRadius = this.chart.outerRadius - this.chart.radiusLength * this.getRingIndex(this.index), this.innerRadius = this.outerRadius - this.chart.radiusLength, e.each(this.getMeta().data, function (e, i) { this.updateElement(e, i, t) }, this) }, updateElement: function (t, i, a) { var o = (this.chart.chartArea.left + this.chart.chartArea.right) / 2, s = (this.chart.chartArea.top + this.chart.chartArea.bottom) / 2, n = this.chart.options.rotation, r = this.chart.options.rotation, h = a && this.chart.options.animation.animateRotate ? 0 : t.hidden ? 0 : this.calculateCircumference(this.getDataset().data[i]) * (this.chart.options.circumference / (2 * Math.PI)), l = a && this.chart.options.animation.animateScale ? 0 : this.innerRadius, c = a && this.chart.options.animation.animateScale ? 0 : this.outerRadius; e.extend(t, { _chart: this.chart.chart, _datasetIndex: this.index, _index: i, _model: { x: o + this.chart.offsetX, y: s + this.chart.offsetY, startAngle: n, endAngle: r, circumference: h, outerRadius: c, innerRadius: l, backgroundColor: t.custom && t.custom.backgroundColor ? t.custom.backgroundColor : e.getValueAtIndexOrDefault(this.getDataset().backgroundColor, i, this.chart.options.elements.arc.backgroundColor), hoverBackgroundColor: t.custom && t.custom.hoverBackgroundColor ? t.custom.hoverBackgroundColor : e.getValueAtIndexOrDefault(this.getDataset().hoverBackgroundColor, i, this.chart.options.elements.arc.hoverBackgroundColor), borderWidth: t.custom && t.custom.borderWidth ? t.custom.borderWidth : e.getValueAtIndexOrDefault(this.getDataset().borderWidth, i, this.chart.options.elements.arc.borderWidth), borderColor: t.custom && t.custom.borderColor ? t.custom.borderColor : e.getValueAtIndexOrDefault(this.getDataset().borderColor, i, this.chart.options.elements.arc.borderColor), label: e.getValueAtIndexOrDefault(this.getDataset().label, i, this.chart.data.labels[i]) } }), a && this.chart.options.animation.animateRotate || (0 === i ? t._model.startAngle = this.chart.options.rotation : t._model.startAngle = this.getMeta().data[i - 1]._model.endAngle, t._model.endAngle = t._model.startAngle + t._model.circumference), t.pivot() }, draw: function (t) { var i = t || 1; e.each(this.getMeta().data, function (t, e) { t.transition(i).draw() }) }, setHoverStyle: function (t) { var i = this.chart.data.datasets[t._datasetIndex], a = t._index; t._model.backgroundColor = t.custom && t.custom.hoverBackgroundColor ? t.custom.hoverBackgroundColor : e.getValueAtIndexOrDefault(i.hoverBackgroundColor, a, e.getHoverColor(t._model.backgroundColor)), t._model.borderColor = t.custom && t.custom.hoverBorderColor ? t.custom.hoverBorderColor : e.getValueAtIndexOrDefault(i.hoverBorderColor, a, e.getHoverColor(t._model.borderColor)), t._model.borderWidth = t.custom && t.custom.hoverBorderWidth ? t.custom.hoverBorderWidth : e.getValueAtIndexOrDefault(i.hoverBorderWidth, a, t._model.borderWidth) }, removeHoverStyle: function (t) { var i = (this.chart.data.datasets[t._datasetIndex], t._index); t._model.backgroundColor = t.custom && t.custom.backgroundColor ? t.custom.backgroundColor : e.getValueAtIndexOrDefault(this.getDataset().backgroundColor, i, this.chart.options.elements.arc.backgroundColor), t._model.borderColor = t.custom && t.custom.borderColor ? t.custom.borderColor : e.getValueAtIndexOrDefault(this.getDataset().borderColor, i, this.chart.options.elements.arc.borderColor), t._model.borderWidth = t.custom && t.custom.borderWidth ? t.custom.borderWidth : e.getValueAtIndexOrDefault(this.getDataset().borderWidth, i, this.chart.options.elements.arc.borderWidth) }, calculateTotal: function () { var t, i = this.getDataset(), a = this.getMeta(), o = 0; return e.each(a.data, function (e, a) { t = i.data[a], isNaN(t) || e.hidden || (o += Math.abs(t)) }), o }, calculateCircumference: function (t) { var e = this.getMeta().total; return e > 0 && !isNaN(t) ? 2 * Math.PI * (t / e) : 0 } }) } }, {}], 18: [function (t, e, i) { "use strict"; e.exports = function (t) { var e = t.helpers; t.defaults.line = { showLines: !0, hover: { mode: "label" }, scales: { xAxes: [{ type: "category", id: "x-axis-0" }], yAxes: [{ type: "linear", id: "y-axis-0" }] } }, t.controllers.line = t.DatasetController.extend({ addElements: function () { var i = this.getMeta(); i.dataset = i.dataset || new t.elements.Line({ _chart: this.chart.chart, _datasetIndex: this.index, _points: i.data }), e.each(this.getDataset().data, function (e, a) { i.data[a] = i.data[a] || new t.elements.Point({ _chart: this.chart.chart, _datasetIndex: this.index, _index: a }) }, this) }, addElementAndReset: function (e) { var i = new t.elements.Point({ _chart: this.chart.chart, _datasetIndex: this.index, _index: e }); this.getMeta().data.splice(e, 0, i), this.updateElement(i, e, !0), this.chart.options.showLines && 0 !== this.chart.options.elements.line.tension && this.updateBezierControlPoints() }, update: function (t) { var i, a = this.getMeta(), o = a.dataset, s = a.data, n = this.getScaleForId(a.yAxisID); this.getScaleForId(a.xAxisID); i = n.min < 0 && n.max < 0 ? n.getPixelForValue(n.max) : n.min > 0 && n.max > 0 ? n.getPixelForValue(n.min) : n.getPixelForValue(0), this.chart.options.showLines && (o._scale = n, o._datasetIndex = this.index, o._children = s, void 0 !== this.getDataset().tension && void 0 === this.getDataset().lineTension && (this.getDataset().lineTension = this.getDataset().tension), o._model = { tension: o.custom && o.custom.tension ? o.custom.tension : e.getValueOrDefault(this.getDataset().lineTension, this.chart.options.elements.line.tension), backgroundColor: o.custom && o.custom.backgroundColor ? o.custom.backgroundColor : this.getDataset().backgroundColor || this.chart.options.elements.line.backgroundColor, borderWidth: o.custom && o.custom.borderWidth ? o.custom.borderWidth : this.getDataset().borderWidth || this.chart.options.elements.line.borderWidth, borderColor: o.custom && o.custom.borderColor ? o.custom.borderColor : this.getDataset().borderColor || this.chart.options.elements.line.borderColor, borderCapStyle: o.custom && o.custom.borderCapStyle ? o.custom.borderCapStyle : this.getDataset().borderCapStyle || this.chart.options.elements.line.borderCapStyle, borderDash: o.custom && o.custom.borderDash ? o.custom.borderDash : this.getDataset().borderDash || this.chart.options.elements.line.borderDash, borderDashOffset: o.custom && o.custom.borderDashOffset ? o.custom.borderDashOffset : this.getDataset().borderDashOffset || this.chart.options.elements.line.borderDashOffset, borderJoinStyle: o.custom && o.custom.borderJoinStyle ? o.custom.borderJoinStyle : this.getDataset().borderJoinStyle || this.chart.options.elements.line.borderJoinStyle, fill: o.custom && o.custom.fill ? o.custom.fill : void 0 !== this.getDataset().fill ? this.getDataset().fill : this.chart.options.elements.line.fill, scaleTop: n.top, scaleBottom: n.bottom, scaleZero: i }, o.pivot()), e.each(s, function (e, i) { this.updateElement(e, i, t) }, this), this.chart.options.showLines && 0 !== this.chart.options.elements.line.tension && this.updateBezierControlPoints() }, getPointBackgroundColor: function (t, i) { var a = this.chart.options.elements.point.backgroundColor, o = this.getDataset(); return t.custom && t.custom.backgroundColor ? a = t.custom.backgroundColor : o.pointBackgroundColor ? a = e.getValueAtIndexOrDefault(o.pointBackgroundColor, i, a) : o.backgroundColor && (a = o.backgroundColor), a }, getPointBorderColor: function (t, i) { var a = this.chart.options.elements.point.borderColor, o = this.getDataset(); return t.custom && t.custom.borderColor ? a = t.custom.borderColor : o.pointBorderColor ? a = e.getValueAtIndexOrDefault(this.getDataset().pointBorderColor, i, a) : o.borderColor && (a = o.borderColor), a }, getPointBorderWidth: function (t, i) { var a = this.chart.options.elements.point.borderWidth, o = this.getDataset(); return t.custom && void 0 !== t.custom.borderWidth ? a = t.custom.borderWidth : void 0 !== o.pointBorderWidth ? a = e.getValueAtIndexOrDefault(o.pointBorderWidth, i, a) : void 0 !== o.borderWidth && (a = o.borderWidth), a }, updateElement: function (t, i, a) { var o, s = this.getMeta(), n = this.getScaleForId(s.yAxisID), r = this.getScaleForId(s.xAxisID); o = n.min < 0 && n.max < 0 ? n.getPixelForValue(n.max) : n.min > 0 && n.max > 0 ? n.getPixelForValue(n.min) : n.getPixelForValue(0), t._chart = this.chart.chart, t._xScale = r, t._yScale = n, t._datasetIndex = this.index, t._index = i, void 0 !== this.getDataset().radius && void 0 === this.getDataset().pointRadius && (this.getDataset().pointRadius = this.getDataset().radius), void 0 !== this.getDataset().hitRadius && void 0 === this.getDataset().pointHitRadius && (this.getDataset().pointHitRadius = this.getDataset().hitRadius), t._model = { x: r.getPixelForValue(this.getDataset().data[i], i, this.index, this.chart.isCombo), y: a ? o : this.calculatePointY(this.getDataset().data[i], i, this.index, this.chart.isCombo), radius: t.custom && t.custom.radius ? t.custom.radius : e.getValueAtIndexOrDefault(this.getDataset().pointRadius, i, this.chart.options.elements.point.radius), pointStyle: t.custom && t.custom.pointStyle ? t.custom.pointStyle : e.getValueAtIndexOrDefault(this.getDataset().pointStyle, i, this.chart.options.elements.point.pointStyle), backgroundColor: this.getPointBackgroundColor(t, i), borderColor: this.getPointBorderColor(t, i), borderWidth: this.getPointBorderWidth(t, i), tension: s.dataset._model ? s.dataset._model.tension : 0, hitRadius: t.custom && t.custom.hitRadius ? t.custom.hitRadius : e.getValueAtIndexOrDefault(this.getDataset().pointHitRadius, i, this.chart.options.elements.point.hitRadius) }, t._model.skip = t.custom && t.custom.skip ? t.custom.skip : isNaN(t._model.x) || isNaN(t._model.y) }, calculatePointY: function (t, e, i, a) { var o = this.getMeta(), s = (this.getScaleForId(o.xAxisID), this.getScaleForId(o.yAxisID)); if (s.options.stacked) { for (var n = 0, r = 0, h = 0; i > h; h++) { var l = this.chart.data.datasets[h], c = this.chart.getDatasetMeta(h); "line" === c.type && this.chart.isDatasetVisible(h) && (l.data[e] < 0 ? r += l.data[e] || 0 : n += l.data[e] || 0) } return 0 > t ? s.getPixelForValue(r + t) : s.getPixelForValue(n + t) } return s.getPixelForValue(t) }, updateBezierControlPoints: function () { var t = this.getMeta(); e.each(t.data, function (i, a) { var o = e.splineCurve(e.previousItem(t.data, a)._model, i._model, e.nextItem(t.data, a)._model, t.dataset._model.tension); i._model.controlPointPreviousX = Math.max(Math.min(o.previous.x, this.chart.chartArea.right), this.chart.chartArea.left), i._model.controlPointPreviousY = Math.max(Math.min(o.previous.y, this.chart.chartArea.bottom), this.chart.chartArea.top), i._model.controlPointNextX = Math.max(Math.min(o.next.x, this.chart.chartArea.right), this.chart.chartArea.left), i._model.controlPointNextY = Math.max(Math.min(o.next.y, this.chart.chartArea.bottom), this.chart.chartArea.top), i.pivot() }, this) }, draw: function (t) { var i = this.getMeta(), a = t || 1; e.each(i.data, function (t) { t.transition(a) }), this.chart.options.showLines && i.dataset.transition(a).draw(), e.each(i.data, function (t) { t.draw() }) }, setHoverStyle: function (t) { var i = this.chart.data.datasets[t._datasetIndex], a = t._index; t._model.radius = t.custom && t.custom.hoverRadius ? t.custom.hoverRadius : e.getValueAtIndexOrDefault(i.pointHoverRadius, a, this.chart.options.elements.point.hoverRadius), t._model.backgroundColor = t.custom && t.custom.hoverBackgroundColor ? t.custom.hoverBackgroundColor : e.getValueAtIndexOrDefault(i.pointHoverBackgroundColor, a, e.getHoverColor(t._model.backgroundColor)), t._model.borderColor = t.custom && t.custom.hoverBorderColor ? t.custom.hoverBorderColor : e.getValueAtIndexOrDefault(i.pointHoverBorderColor, a, e.getHoverColor(t._model.borderColor)), t._model.borderWidth = t.custom && t.custom.hoverBorderWidth ? t.custom.hoverBorderWidth : e.getValueAtIndexOrDefault(i.pointHoverBorderWidth, a, t._model.borderWidth) }, removeHoverStyle: function (t) { var i = (this.chart.data.datasets[t._datasetIndex], t._index); void 0 !== this.getDataset().radius && void 0 === this.getDataset().pointRadius && (this.getDataset().pointRadius = this.getDataset().radius), t._model.radius = t.custom && t.custom.radius ? t.custom.radius : e.getValueAtIndexOrDefault(this.getDataset().pointRadius, i, this.chart.options.elements.point.radius), t._model.backgroundColor = this.getPointBackgroundColor(t, i), t._model.borderColor = this.getPointBorderColor(t, i), t._model.borderWidth = this.getPointBorderWidth(t, i) } }) } }, {}], 19: [function (t, e, i) { "use strict"; e.exports = function (t) { var e = t.helpers; t.defaults.polarArea = { scale: { type: "radialLinear", lineArc: !0 }, animation: { animateRotate: !0, animateScale: !0 }, aspectRatio: 1, legendCallback: function (t) { var e = []; if (e.push('<ul class="' + t.id + '-legend">'), t.data.datasets.length) for (var i = 0; i < t.data.datasets[0].data.length; ++i)e.push('<li><span style="background-color:' + t.data.datasets[0].backgroundColor[i] + '">'), t.data.labels[i] && e.push(t.data.labels[i]), e.push("</span></li>"); return e.push("</ul>"), e.join("") }, legend: { labels: { generateLabels: function (t) { var i = t.data; return i.labels.length && i.datasets.length ? i.labels.map(function (a, o) { var s = t.getDatasetMeta(0), n = i.datasets[0], r = s.data[o], h = r.custom && r.custom.backgroundColor ? r.custom.backgroundColor : e.getValueAtIndexOrDefault(n.backgroundColor, o, this.chart.options.elements.arc.backgroundColor), l = r.custom && r.custom.borderColor ? r.custom.borderColor : e.getValueAtIndexOrDefault(n.borderColor, o, this.chart.options.elements.arc.borderColor), c = r.custom && r.custom.borderWidth ? r.custom.borderWidth : e.getValueAtIndexOrDefault(n.borderWidth, o, this.chart.options.elements.arc.borderWidth); return { text: a, fillStyle: h, strokeStyle: l, lineWidth: c, hidden: isNaN(n.data[o]) || s.data[o].hidden, index: o } }, this) : [] } }, onClick: function (t, e) { var i, a, o, s = e.index, n = this.chart; for (i = 0, a = (n.data.datasets || []).length; a > i; ++i)o = n.getDatasetMeta(i), o.data[s].hidden = !o.data[s].hidden; n.update() } }, tooltips: { callbacks: { title: function () { return "" }, label: function (t, e) { return e.labels[t.index] + ": " + t.yLabel } } } }, t.controllers.polarArea = t.DatasetController.extend({ linkScales: function () { }, addElements: function () { var i = this.getMeta(); e.each(this.getDataset().data, function (e, a) { i.data[a] = i.data[a] || new t.elements.Arc({ _chart: this.chart.chart, _datasetIndex: this.index, _index: a }) }, this) }, addElementAndReset: function (e) { var i = new t.elements.Arc({ _chart: this.chart.chart, _datasetIndex: this.index, _index: e }); this.getMeta().data.splice(e, 0, i), this.updateElement(i, e, !0) }, update: function (t) { var i = this.getMeta(), a = Math.min(this.chart.chartArea.right - this.chart.chartArea.left, this.chart.chartArea.bottom - this.chart.chartArea.top); this.chart.outerRadius = Math.max((a - this.chart.options.elements.arc.borderWidth / 2) / 2, 0), this.chart.innerRadius = Math.max(this.chart.options.cutoutPercentage ? this.chart.outerRadius / 100 * this.chart.options.cutoutPercentage : 1, 0), this.chart.radiusLength = (this.chart.outerRadius - this.chart.innerRadius) / this.chart.getVisibleDatasetCount(), this.outerRadius = this.chart.outerRadius - this.chart.radiusLength * this.index, this.innerRadius = this.outerRadius - this.chart.radiusLength, i.count = this.countVisibleElements(), e.each(i.data, function (e, i) { this.updateElement(e, i, t) }, this) }, updateElement: function (t, i, a) { for (var o = this.calculateCircumference(this.getDataset().data[i]), s = (this.chart.chartArea.left + this.chart.chartArea.right) / 2, n = (this.chart.chartArea.top + this.chart.chartArea.bottom) / 2, r = 0, h = this.getMeta(), l = 0; i > l; ++l)isNaN(this.getDataset().data[l]) || h.data[l].hidden || ++r; var c = t.hidden ? 0 : this.chart.scale.getDistanceFromCenterForValue(this.getDataset().data[i]), d = -.5 * Math.PI + o * r, u = d + (t.hidden ? 0 : o), g = { x: s, y: n, innerRadius: 0, outerRadius: this.chart.options.animation.animateScale ? 0 : this.chart.scale.getDistanceFromCenterForValue(this.getDataset().data[i]), startAngle: this.chart.options.animation.animateRotate ? Math.PI * -.5 : d, endAngle: this.chart.options.animation.animateRotate ? Math.PI * -.5 : u, backgroundColor: t.custom && t.custom.backgroundColor ? t.custom.backgroundColor : e.getValueAtIndexOrDefault(this.getDataset().backgroundColor, i, this.chart.options.elements.arc.backgroundColor), borderWidth: t.custom && t.custom.borderWidth ? t.custom.borderWidth : e.getValueAtIndexOrDefault(this.getDataset().borderWidth, i, this.chart.options.elements.arc.borderWidth), borderColor: t.custom && t.custom.borderColor ? t.custom.borderColor : e.getValueAtIndexOrDefault(this.getDataset().borderColor, i, this.chart.options.elements.arc.borderColor), label: e.getValueAtIndexOrDefault(this.chart.data.labels, i, this.chart.data.labels[i]) }; e.extend(t, { _chart: this.chart.chart, _datasetIndex: this.index, _index: i, _scale: this.chart.scale, _model: a ? g : { x: s, y: n, innerRadius: 0, outerRadius: c, startAngle: d, endAngle: u, backgroundColor: t.custom && t.custom.backgroundColor ? t.custom.backgroundColor : e.getValueAtIndexOrDefault(this.getDataset().backgroundColor, i, this.chart.options.elements.arc.backgroundColor), borderWidth: t.custom && t.custom.borderWidth ? t.custom.borderWidth : e.getValueAtIndexOrDefault(this.getDataset().borderWidth, i, this.chart.options.elements.arc.borderWidth), borderColor: t.custom && t.custom.borderColor ? t.custom.borderColor : e.getValueAtIndexOrDefault(this.getDataset().borderColor, i, this.chart.options.elements.arc.borderColor), label: e.getValueAtIndexOrDefault(this.chart.data.labels, i, this.chart.data.labels[i]) } }), t.pivot() }, draw: function (t) { var i = t || 1; e.each(this.getMeta().data, function (t, e) { t.transition(i).draw() }) }, setHoverStyle: function (t) { var i = this.chart.data.datasets[t._datasetIndex], a = t._index; t._model.backgroundColor = t.custom && t.custom.hoverBackgroundColor ? t.custom.hoverBackgroundColor : e.getValueAtIndexOrDefault(i.hoverBackgroundColor, a, e.getHoverColor(t._model.backgroundColor)), t._model.borderColor = t.custom && t.custom.hoverBorderColor ? t.custom.hoverBorderColor : e.getValueAtIndexOrDefault(i.hoverBorderColor, a, e.getHoverColor(t._model.borderColor)), t._model.borderWidth = t.custom && t.custom.hoverBorderWidth ? t.custom.hoverBorderWidth : e.getValueAtIndexOrDefault(i.hoverBorderWidth, a, t._model.borderWidth) }, removeHoverStyle: function (t) { var i = (this.chart.data.datasets[t._datasetIndex], t._index); t._model.backgroundColor = t.custom && t.custom.backgroundColor ? t.custom.backgroundColor : e.getValueAtIndexOrDefault(this.getDataset().backgroundColor, i, this.chart.options.elements.arc.backgroundColor), t._model.borderColor = t.custom && t.custom.borderColor ? t.custom.borderColor : e.getValueAtIndexOrDefault(this.getDataset().borderColor, i, this.chart.options.elements.arc.borderColor), t._model.borderWidth = t.custom && t.custom.borderWidth ? t.custom.borderWidth : e.getValueAtIndexOrDefault(this.getDataset().borderWidth, i, this.chart.options.elements.arc.borderWidth) }, countVisibleElements: function () { var t = this.getDataset(), i = this.getMeta(), a = 0; return e.each(i.data, function (e, i) { isNaN(t.data[i]) || e.hidden || a++ }), a }, calculateCircumference: function (t) { var e = this.getMeta().count; return e > 0 && !isNaN(t) ? 2 * Math.PI / e : 0 } }) } }, {}], 20: [function (t, e, i) {
        "use strict"; e.exports = function (t) {
            var e = t.helpers; t.defaults.radar = { scale: { type: "radialLinear" }, elements: { line: { tension: 0 } } }, t.controllers.radar = t.DatasetController.extend({
                linkScales: function () { }, addElements: function () {
                    var i = this.getMeta(); i.dataset = i.dataset || new t.elements.Line({
                        _chart: this.chart.chart, _datasetIndex: this.index, _points: i.data, _loop: !0
                    }), e.each(this.getDataset().data, function (e, a) { i.data[a] = i.data[a] || new t.elements.Point({ _chart: this.chart.chart, _datasetIndex: this.index, _index: a, _model: { x: 0, y: 0 } }) }, this)
                }, addElementAndReset: function (e) { var i = new t.elements.Point({ _chart: this.chart.chart, _datasetIndex: this.index, _index: e }); this.getMeta().data.splice(e, 0, i), this.updateElement(i, e, !0), this.updateBezierControlPoints() }, update: function (t) { var i, a = this.getMeta(), o = a.dataset, s = a.data, n = this.chart.scale; i = n.min < 0 && n.max < 0 ? n.getPointPositionForValue(0, n.max) : n.min > 0 && n.max > 0 ? n.getPointPositionForValue(0, n.min) : n.getPointPositionForValue(0, 0), void 0 !== this.getDataset().tension && void 0 === this.getDataset().lineTension && (this.getDataset().lineTension = this.getDataset().tension), e.extend(a.dataset, { _datasetIndex: this.index, _children: s, _model: { tension: o.custom && o.custom.tension ? o.custom.tension : e.getValueOrDefault(this.getDataset().lineTension, this.chart.options.elements.line.tension), backgroundColor: o.custom && o.custom.backgroundColor ? o.custom.backgroundColor : this.getDataset().backgroundColor || this.chart.options.elements.line.backgroundColor, borderWidth: o.custom && o.custom.borderWidth ? o.custom.borderWidth : this.getDataset().borderWidth || this.chart.options.elements.line.borderWidth, borderColor: o.custom && o.custom.borderColor ? o.custom.borderColor : this.getDataset().borderColor || this.chart.options.elements.line.borderColor, fill: o.custom && o.custom.fill ? o.custom.fill : void 0 !== this.getDataset().fill ? this.getDataset().fill : this.chart.options.elements.line.fill, borderCapStyle: o.custom && o.custom.borderCapStyle ? o.custom.borderCapStyle : this.getDataset().borderCapStyle || this.chart.options.elements.line.borderCapStyle, borderDash: o.custom && o.custom.borderDash ? o.custom.borderDash : this.getDataset().borderDash || this.chart.options.elements.line.borderDash, borderDashOffset: o.custom && o.custom.borderDashOffset ? o.custom.borderDashOffset : this.getDataset().borderDashOffset || this.chart.options.elements.line.borderDashOffset, borderJoinStyle: o.custom && o.custom.borderJoinStyle ? o.custom.borderJoinStyle : this.getDataset().borderJoinStyle || this.chart.options.elements.line.borderJoinStyle, scaleTop: n.top, scaleBottom: n.bottom, scaleZero: i } }), a.dataset.pivot(), e.each(s, function (e, i) { this.updateElement(e, i, t) }, this), this.updateBezierControlPoints() }, updateElement: function (t, i, a) { var o = this.chart.scale.getPointPositionForValue(i, this.getDataset().data[i]); e.extend(t, { _datasetIndex: this.index, _index: i, _scale: this.chart.scale, _model: { x: a ? this.chart.scale.xCenter : o.x, y: a ? this.chart.scale.yCenter : o.y, tension: t.custom && t.custom.tension ? t.custom.tension : e.getValueOrDefault(this.getDataset().tension, this.chart.options.elements.line.tension), radius: t.custom && t.custom.radius ? t.custom.radius : e.getValueAtIndexOrDefault(this.getDataset().pointRadius, i, this.chart.options.elements.point.radius), backgroundColor: t.custom && t.custom.backgroundColor ? t.custom.backgroundColor : e.getValueAtIndexOrDefault(this.getDataset().pointBackgroundColor, i, this.chart.options.elements.point.backgroundColor), borderColor: t.custom && t.custom.borderColor ? t.custom.borderColor : e.getValueAtIndexOrDefault(this.getDataset().pointBorderColor, i, this.chart.options.elements.point.borderColor), borderWidth: t.custom && t.custom.borderWidth ? t.custom.borderWidth : e.getValueAtIndexOrDefault(this.getDataset().pointBorderWidth, i, this.chart.options.elements.point.borderWidth), pointStyle: t.custom && t.custom.pointStyle ? t.custom.pointStyle : e.getValueAtIndexOrDefault(this.getDataset().pointStyle, i, this.chart.options.elements.point.pointStyle), hitRadius: t.custom && t.custom.hitRadius ? t.custom.hitRadius : e.getValueAtIndexOrDefault(this.getDataset().hitRadius, i, this.chart.options.elements.point.hitRadius) } }), t._model.skip = t.custom && t.custom.skip ? t.custom.skip : isNaN(t._model.x) || isNaN(t._model.y) }, updateBezierControlPoints: function () { var t = this.getMeta(); e.each(t.data, function (i, a) { var o = e.splineCurve(e.previousItem(t.data, a, !0)._model, i._model, e.nextItem(t.data, a, !0)._model, i._model.tension); i._model.controlPointPreviousX = Math.max(Math.min(o.previous.x, this.chart.chartArea.right), this.chart.chartArea.left), i._model.controlPointPreviousY = Math.max(Math.min(o.previous.y, this.chart.chartArea.bottom), this.chart.chartArea.top), i._model.controlPointNextX = Math.max(Math.min(o.next.x, this.chart.chartArea.right), this.chart.chartArea.left), i._model.controlPointNextY = Math.max(Math.min(o.next.y, this.chart.chartArea.bottom), this.chart.chartArea.top), i.pivot() }, this) }, draw: function (t) { var i = this.getMeta(), a = t || 1; e.each(i.data, function (t, e) { t.transition(a) }), i.dataset.transition(a).draw(), e.each(i.data, function (t) { t.draw() }) }, setHoverStyle: function (t) { var i = this.chart.data.datasets[t._datasetIndex], a = t._index; t._model.radius = t.custom && t.custom.hoverRadius ? t.custom.hoverRadius : e.getValueAtIndexOrDefault(i.pointHoverRadius, a, this.chart.options.elements.point.hoverRadius), t._model.backgroundColor = t.custom && t.custom.hoverBackgroundColor ? t.custom.hoverBackgroundColor : e.getValueAtIndexOrDefault(i.pointHoverBackgroundColor, a, e.getHoverColor(t._model.backgroundColor)), t._model.borderColor = t.custom && t.custom.hoverBorderColor ? t.custom.hoverBorderColor : e.getValueAtIndexOrDefault(i.pointHoverBorderColor, a, e.getHoverColor(t._model.borderColor)), t._model.borderWidth = t.custom && t.custom.hoverBorderWidth ? t.custom.hoverBorderWidth : e.getValueAtIndexOrDefault(i.pointHoverBorderWidth, a, t._model.borderWidth) }, removeHoverStyle: function (t) { var i = (this.chart.data.datasets[t._datasetIndex], t._index); t._model.radius = t.custom && t.custom.radius ? t.custom.radius : e.getValueAtIndexOrDefault(this.getDataset().radius, i, this.chart.options.elements.point.radius), t._model.backgroundColor = t.custom && t.custom.backgroundColor ? t.custom.backgroundColor : e.getValueAtIndexOrDefault(this.getDataset().pointBackgroundColor, i, this.chart.options.elements.point.backgroundColor), t._model.borderColor = t.custom && t.custom.borderColor ? t.custom.borderColor : e.getValueAtIndexOrDefault(this.getDataset().pointBorderColor, i, this.chart.options.elements.point.borderColor), t._model.borderWidth = t.custom && t.custom.borderWidth ? t.custom.borderWidth : e.getValueAtIndexOrDefault(this.getDataset().pointBorderWidth, i, this.chart.options.elements.point.borderWidth) }
            })
        }
    }, {}], 21: [function (t, e, i) { "use strict"; e.exports = function (t) { var e = t.helpers; t.defaults.global.animation = { duration: 1e3, easing: "easeOutQuart", onProgress: e.noop, onComplete: e.noop }, t.Animation = t.Element.extend({ currentStep: null, numSteps: 60, easing: "", render: null, onAnimationProgress: null, onAnimationComplete: null }), t.animationService = { frameDuration: 17, animations: [], dropFrames: 0, request: null, addAnimation: function (t, e, i, a) { a || (t.animating = !0); for (var o = 0; o < this.animations.length; ++o)if (this.animations[o].chartInstance === t) return void (this.animations[o].animationObject = e); this.animations.push({ chartInstance: t, animationObject: e }), 1 === this.animations.length && this.requestAnimationFrame() }, cancelAnimation: function (t) { var i = e.findIndex(this.animations, function (e) { return e.chartInstance === t }); -1 !== i && (this.animations.splice(i, 1), t.animating = !1) }, requestAnimationFrame: function () { var t = this; null === t.request && (t.request = e.requestAnimFrame.call(window, function () { t.request = null, t.startDigest() })) }, startDigest: function () { var t = Date.now(), e = 0; this.dropFrames > 1 && (e = Math.floor(this.dropFrames), this.dropFrames = this.dropFrames % 1); for (var i = 0; i < this.animations.length;)null === this.animations[i].animationObject.currentStep && (this.animations[i].animationObject.currentStep = 0), this.animations[i].animationObject.currentStep += 1 + e, this.animations[i].animationObject.currentStep > this.animations[i].animationObject.numSteps && (this.animations[i].animationObject.currentStep = this.animations[i].animationObject.numSteps), this.animations[i].animationObject.render(this.animations[i].chartInstance, this.animations[i].animationObject), this.animations[i].animationObject.onAnimationProgress && this.animations[i].animationObject.onAnimationProgress.call && this.animations[i].animationObject.onAnimationProgress.call(this.animations[i].chartInstance, this.animations[i]), this.animations[i].animationObject.currentStep === this.animations[i].animationObject.numSteps ? (this.animations[i].animationObject.onAnimationComplete && this.animations[i].animationObject.onAnimationComplete.call && this.animations[i].animationObject.onAnimationComplete.call(this.animations[i].chartInstance, this.animations[i]), this.animations[i].chartInstance.animating = !1, this.animations.splice(i, 1)) : ++i; var a = Date.now(), o = (a - t) / this.frameDuration; this.dropFrames += o, this.animations.length > 0 && this.requestAnimationFrame() } } } }, {}], 22: [function (t, e, i) { "use strict"; e.exports = function (t) { var e = t.helpers; t.types = {}, t.instances = {}, t.controllers = {}, t.Controller = function (i) { return this.chart = i, this.config = i.config, this.options = this.config.options = e.configMerge(t.defaults.global, t.defaults[this.config.type], this.config.options || {}), this.id = e.uid(), Object.defineProperty(this, "data", { get: function () { return this.config.data } }), t.instances[this.id] = this, this.options.responsive && this.resize(!0), this.initialize(), this }, e.extend(t.Controller.prototype, { initialize: function () { return t.pluginService.notifyPlugins("beforeInit", [this]), this.bindEvents(), this.ensureScalesHaveIDs(), this.buildOrUpdateControllers(), this.buildScales(), this.buildSurroundingItems(), this.updateLayout(), this.resetElements(), this.initToolTip(), this.update(), t.pluginService.notifyPlugins("afterInit", [this]), this }, clear: function () { return e.clear(this.chart), this }, stop: function () { return t.animationService.cancelAnimation(this), this }, resize: function (t) { var i = this.chart.canvas, a = e.getMaximumWidth(this.chart.canvas), o = this.options.maintainAspectRatio && isNaN(this.chart.aspectRatio) === !1 && isFinite(this.chart.aspectRatio) && 0 !== this.chart.aspectRatio ? a / this.chart.aspectRatio : e.getMaximumHeight(this.chart.canvas), s = this.chart.width !== a || this.chart.height !== o; return s ? (i.width = this.chart.width = a, i.height = this.chart.height = o, e.retinaScale(this.chart), t || (this.stop(), this.update(this.options.responsiveAnimationDuration)), this) : this }, ensureScalesHaveIDs: function () { var t = "x-axis-", i = "y-axis-"; this.options.scales && (this.options.scales.xAxes && this.options.scales.xAxes.length && e.each(this.options.scales.xAxes, function (e, i) { e.id = e.id || t + i }), this.options.scales.yAxes && this.options.scales.yAxes.length && e.each(this.options.scales.yAxes, function (t, e) { t.id = t.id || i + e })) }, buildScales: function () { if (this.scales = {}, this.options.scales && (this.options.scales.xAxes && this.options.scales.xAxes.length && e.each(this.options.scales.xAxes, function (i, a) { var o = e.getValueOrDefault(i.type, "category"), s = t.scaleService.getScaleConstructor(o); if (s) { var n = new s({ ctx: this.chart.ctx, options: i, chart: this, id: i.id }); this.scales[n.id] = n } }, this), this.options.scales.yAxes && this.options.scales.yAxes.length && e.each(this.options.scales.yAxes, function (i, a) { var o = e.getValueOrDefault(i.type, "linear"), s = t.scaleService.getScaleConstructor(o); if (s) { var n = new s({ ctx: this.chart.ctx, options: i, chart: this, id: i.id }); this.scales[n.id] = n } }, this)), this.options.scale) { var i = t.scaleService.getScaleConstructor(this.options.scale.type); if (i) { var a = new i({ ctx: this.chart.ctx, options: this.options.scale, chart: this }); this.scale = a, this.scales.radialScale = a } } t.scaleService.addScalesToLayout(this) }, buildSurroundingItems: function () { this.options.title && (this.titleBlock = new t.Title({ ctx: this.chart.ctx, options: this.options.title, chart: this }), t.layoutService.addBox(this, this.titleBlock)), this.options.legend && (this.legend = new t.Legend({ ctx: this.chart.ctx, options: this.options.legend, chart: this }), t.layoutService.addBox(this, this.legend)) }, updateLayout: function () { t.layoutService.update(this, this.chart.width, this.chart.height) }, buildOrUpdateControllers: function () { var i = [], a = []; if (e.each(this.data.datasets, function (e, o) { var s = this.getDatasetMeta(o); s.type || (s.type = e.type || this.config.type), i.push(s.type), s.controller ? s.controller.updateIndex(o) : (s.controller = new t.controllers[s.type](this, o), a.push(s.controller)) }, this), i.length > 1) for (var o = 1; o < i.length; o++)if (i[o] !== i[o - 1]) { this.isCombo = !0; break } return a }, resetElements: function () { e.each(this.data.datasets, function (t, e) { this.getDatasetMeta(e).controller.reset() }, this) }, update: function (i, a) { t.pluginService.notifyPlugins("beforeUpdate", [this]), this.tooltip._data = this.data; var o = this.buildOrUpdateControllers(); e.each(this.data.datasets, function (t, e) { this.getDatasetMeta(e).controller.buildOrUpdateElements() }, this), t.layoutService.update(this, this.chart.width, this.chart.height), t.pluginService.notifyPlugins("afterScaleUpdate", [this]), e.each(o, function (t) { t.reset() }), e.each(this.data.datasets, function (t, e) { this.getDatasetMeta(e).controller.update() }, this), t.pluginService.notifyPlugins("afterUpdate", [this]), this.render(i, a) }, render: function (i, a) { if (t.pluginService.notifyPlugins("beforeRender", [this]), this.options.animation && ("undefined" != typeof i && 0 !== i || "undefined" == typeof i && 0 !== this.options.animation.duration)) { var o = new t.Animation; o.numSteps = (i || this.options.animation.duration) / 16.66, o.easing = this.options.animation.easing, o.render = function (t, i) { var a = e.easingEffects[i.easing], o = i.currentStep / i.numSteps, s = a(o); t.draw(s, o, i.currentStep) }, o.onAnimationProgress = this.options.animation.onProgress, o.onAnimationComplete = this.options.animation.onComplete, t.animationService.addAnimation(this, o, i, a) } else this.draw(), this.options.animation && this.options.animation.onComplete && this.options.animation.onComplete.call && this.options.animation.onComplete.call(this); return this }, draw: function (i) { var a = i || 1; this.clear(), t.pluginService.notifyPlugins("beforeDraw", [this, a]), e.each(this.boxes, function (t) { t.draw(this.chartArea) }, this), this.scale && this.scale.draw(), this.chart.ctx.save(), this.chart.ctx.beginPath(), this.chart.ctx.rect(this.chartArea.left, this.chartArea.top, this.chartArea.right - this.chartArea.left, this.chartArea.bottom - this.chartArea.top), this.chart.ctx.clip(), e.each(this.data.datasets, function (t, e) { this.isDatasetVisible(e) && this.getDatasetMeta(e).controller.draw(i) }, this, !0), this.chart.ctx.restore(), this.tooltip.transition(a).draw(), t.pluginService.notifyPlugins("afterDraw", [this, a]) }, getElementAtEvent: function (t) { var i = e.getRelativePosition(t, this.chart), a = []; return e.each(this.data.datasets, function (t, o) { if (this.isDatasetVisible(o)) { var s = this.getDatasetMeta(o); e.each(s.data, function (t, e) { return t.inRange(i.x, i.y) ? (a.push(t), a) : void 0 }) } }, this), a }, getElementsAtEvent: function (t) { var i = e.getRelativePosition(t, this.chart), a = [], o = function () { if (this.data.datasets) for (var t = 0; t < this.data.datasets.length; t++) { var e = this.getDatasetMeta(t); if (this.isDatasetVisible(t)) for (var a = 0; a < e.data.length; a++)if (e.data[a].inRange(i.x, i.y)) return e.data[a] } }.call(this); return o ? (e.each(this.data.datasets, function (t, e) { if (this.isDatasetVisible(e)) { var i = this.getDatasetMeta(e); a.push(i.data[o._index]) } }, this), a) : a }, getDatasetAtEvent: function (t) { var e = this.getElementAtEvent(t); return e.length > 0 && (e = this.getDatasetMeta(e[0]._datasetIndex).data), e }, getDatasetMeta: function (t) { var e = this.data.datasets[t]; e._meta || (e._meta = {}); var i = e._meta[this.id]; return i || (i = e._meta[this.id] = { type: null, data: [], dataset: null, controller: null, hidden: null, xAxisID: null, yAxisID: null }), i }, getVisibleDatasetCount: function () { for (var t = 0, e = 0, i = this.data.datasets.length; i > e; ++e)this.isDatasetVisible(e) && t++; return t }, isDatasetVisible: function (t) { var e = this.getDatasetMeta(t); return "boolean" == typeof e.hidden ? !e.hidden : !this.data.datasets[t].hidden }, generateLegend: function () { return this.options.legendCallback(this) }, destroy: function () { this.clear(), e.unbindEvents(this, this.events), e.removeResizeListener(this.chart.canvas.parentNode); var i = this.chart.canvas; i.width = this.chart.width, i.height = this.chart.height, void 0 !== this.chart.originalDevicePixelRatio && this.chart.ctx.scale(1 / this.chart.originalDevicePixelRatio, 1 / this.chart.originalDevicePixelRatio), i.style.width = this.chart.originalCanvasStyleWidth, i.style.height = this.chart.originalCanvasStyleHeight, t.pluginService.notifyPlugins("destroy", [this]), delete t.instances[this.id] }, toBase64Image: function () { return this.chart.canvas.toDataURL.apply(this.chart.canvas, arguments) }, initToolTip: function () { this.tooltip = new t.Tooltip({ _chart: this.chart, _chartInstance: this, _data: this.data, _options: this.options }, this) }, bindEvents: function () { e.bindEvents(this, this.options.events, function (t) { this.eventHandler(t) }) }, eventHandler: function (t) { if (this.lastActive = this.lastActive || [], this.lastTooltipActive = this.lastTooltipActive || [], "mouseout" === t.type) this.active = [], this.tooltipActive = []; else { var i = this, a = function (e) { switch (e) { case "single": return i.getElementAtEvent(t); case "label": return i.getElementsAtEvent(t); case "dataset": return i.getDatasetAtEvent(t); default: return t } }; this.active = a(this.options.hover.mode), this.tooltipActive = a(this.options.tooltips.mode) } if (this.options.hover.onHover && this.options.hover.onHover.call(this, this.active), ("mouseup" === t.type || "click" === t.type) && (this.options.onClick && this.options.onClick.call(this, t, this.active), this.legend && this.legend.handleEvent && this.legend.handleEvent(t)), this.lastActive.length) switch (this.options.hover.mode) { case "single": this.getDatasetMeta(this.lastActive[0]._datasetIndex).controller.removeHoverStyle(this.lastActive[0], this.lastActive[0]._datasetIndex, this.lastActive[0]._index); break; case "label": case "dataset": for (var o = 0; o < this.lastActive.length; o++)this.lastActive[o] && this.getDatasetMeta(this.lastActive[o]._datasetIndex).controller.removeHoverStyle(this.lastActive[o], this.lastActive[o]._datasetIndex, this.lastActive[o]._index) }if (this.active.length && this.options.hover.mode) switch (this.options.hover.mode) { case "single": this.getDatasetMeta(this.active[0]._datasetIndex).controller.setHoverStyle(this.active[0]); break; case "label": case "dataset": for (var s = 0; s < this.active.length; s++)this.active[s] && this.getDatasetMeta(this.active[s]._datasetIndex).controller.setHoverStyle(this.active[s]) }if ((this.options.tooltips.enabled || this.options.tooltips.custom) && (this.tooltip.initialize(), this.tooltip._active = this.tooltipActive, this.tooltip.update(!0)), this.tooltip.pivot(), !this.animating) { var n; e.each(this.active, function (t, e) { t !== this.lastActive[e] && (n = !0) }, this), e.each(this.tooltipActive, function (t, e) { t !== this.lastTooltipActive[e] && (n = !0) }, this), (this.lastActive.length !== this.active.length || this.lastTooltipActive.length !== this.tooltipActive.length || n) && (this.stop(), (this.options.tooltips.enabled || this.options.tooltips.custom) && this.tooltip.update(!0), this.render(this.options.hover.animationDuration, !0)) } return this.lastActive = this.active, this.lastTooltipActive = this.tooltipActive, this } }) } }, {}], 23: [function (t, e, i) { "use strict"; e.exports = function (t) { var e = t.helpers, i = e.noop; t.DatasetController = function (t, e) { this.initialize.call(this, t, e) }, e.extend(t.DatasetController.prototype, { initialize: function (t, e) { this.chart = t, this.index = e, this.linkScales(), this.addElements() }, updateIndex: function (t) { this.index = t }, linkScales: function () { var t = this.getMeta(), e = this.getDataset(); null === t.xAxisID && (t.xAxisID = e.xAxisID || this.chart.options.scales.xAxes[0].id), null === t.yAxisID && (t.yAxisID = e.yAxisID || this.chart.options.scales.yAxes[0].id) }, getDataset: function () { return this.chart.data.datasets[this.index] }, getMeta: function () { return this.chart.getDatasetMeta(this.index) }, getScaleForId: function (t) { return this.chart.scales[t] }, reset: function () { this.update(!0) }, buildOrUpdateElements: function () { var t = this.getMeta(), e = t.data, i = this.getDataset().data.length, a = e.length; if (a > i) e.splice(i, a - i); else if (i > a) for (var o = a; i > o; ++o)this.addElementAndReset(o) }, addElements: i, addElementAndReset: i, draw: i, removeHoverStyle: i, setHoverStyle: i, update: i }), t.DatasetController.extend = e.inherits } }, {}], 24: [function (t, e, i) { "use strict"; e.exports = function (t) { var e = t.helpers; t.elements = {}, t.Element = function (t) { e.extend(this, t), this.initialize.apply(this, arguments) }, e.extend(t.Element.prototype, { initialize: function () { this.hidden = !1 }, pivot: function () { return this._view || (this._view = e.clone(this._model)), this._start = e.clone(this._view), this }, transition: function (t) { return this._view || (this._view = e.clone(this._model)), 1 === t ? (this._view = this._model, this._start = null, this) : (this._start || this.pivot(), e.each(this._model, function (i, a) { if ("_" !== a[0] && this._model.hasOwnProperty(a)) if (this._view.hasOwnProperty(a)) if (i === this._view[a]); else if ("string" == typeof i) try { var o = e.color(this._start[a]).mix(e.color(this._model[a]), t); this._view[a] = o.rgbString() } catch (s) { this._view[a] = i } else if ("number" == typeof i) { var n = void 0 !== this._start[a] && isNaN(this._start[a]) === !1 ? this._start[a] : 0; this._view[a] = (this._model[a] - n) * t + n } else this._view[a] = i; else "number" != typeof i || isNaN(this._view[a]) ? this._view[a] = i : this._view[a] = i * t; else; }, this), this) }, tooltipPosition: function () { return { x: this._model.x, y: this._model.y } }, hasValue: function () { return e.isNumber(this._model.x) && e.isNumber(this._model.y) } }), t.Element.extend = e.inherits } }, {}], 25: [function (t, e, i) {
        "use strict"; var a = t("chartjs-color"); e.exports = function (t) {
            function e(t, e, i) { var a; return "string" == typeof t ? (a = parseInt(t, 10), -1 != t.indexOf("%") && (a = a / 100 * e.parentNode[i])) : a = t, a } function i(t, i, a) { var o, s = document.defaultView.getComputedStyle(t)[i], n = document.defaultView.getComputedStyle(t.parentNode)[i], r = null !== s && "none" !== s, h = null !== n && "none" !== n; return (r || h) && (o = Math.min(r ? e(s, t, a) : Number.POSITIVE_INFINITY, h ? e(n, t.parentNode, a) : Number.POSITIVE_INFINITY)), o } var o = t.helpers = {}; o.each = function (t, e, i, a) { var s, n; if (o.isArray(t)) if (n = t.length, a) for (s = n - 1; s >= 0; s--)e.call(i, t[s], s); else for (s = 0; n > s; s++)e.call(i, t[s], s); else if ("object" == typeof t) { var r = Object.keys(t); for (n = r.length, s = 0; n > s; s++)e.call(i, t[r[s]], r[s]) } }, o.clone = function (t) { var e = {}; return o.each(t, function (i, a) { t.hasOwnProperty(a) && (o.isArray(i) ? e[a] = i.slice(0) : "object" == typeof i && null !== i ? e[a] = o.clone(i) : e[a] = i) }), e }, o.extend = function (t) { for (var e = arguments.length, i = [], a = 1; e > a; a++)i.push(arguments[a]); return o.each(i, function (e) { o.each(e, function (i, a) { e.hasOwnProperty(a) && (t[a] = i) }) }), t }, o.configMerge = function (e) { var i = o.clone(e); return o.each(Array.prototype.slice.call(arguments, 1), function (e) { o.each(e, function (a, s) { if (e.hasOwnProperty(s)) if ("scales" === s) i[s] = o.scaleMerge(i.hasOwnProperty(s) ? i[s] : {}, a); else if ("scale" === s) i[s] = o.configMerge(i.hasOwnProperty(s) ? i[s] : {}, t.scaleService.getScaleDefaults(a.type), a); else if (i.hasOwnProperty(s) && o.isArray(i[s]) && o.isArray(a)) { var n = i[s]; o.each(a, function (t, e) { e < n.length ? "object" == typeof n[e] && null !== n[e] && "object" == typeof t && null !== t ? n[e] = o.configMerge(n[e], t) : n[e] = t : n.push(t) }) } else i.hasOwnProperty(s) && "object" == typeof i[s] && null !== i[s] && "object" == typeof a ? i[s] = o.configMerge(i[s], a) : i[s] = a }) }), i }, o.extendDeep = function (t) { function e(t) { return o.each(arguments, function (i) { i !== t && o.each(i, function (i, a) { t[a] && t[a].constructor && t[a].constructor === Object ? e(t[a], i) : t[a] = i }) }), t } return e.apply(this, arguments) }, o.scaleMerge = function (e, i) { var a = o.clone(e); return o.each(i, function (e, s) { i.hasOwnProperty(s) && ("xAxes" === s || "yAxes" === s ? a.hasOwnProperty(s) ? o.each(e, function (e, i) { var n = o.getValueOrDefault(e.type, "xAxes" === s ? "category" : "linear"), r = t.scaleService.getScaleDefaults(n); i >= a[s].length || !a[s][i].type ? a[s].push(o.configMerge(r, e)) : e.type && e.type !== a[s][i].type ? a[s][i] = o.configMerge(a[s][i], r, e) : a[s][i] = o.configMerge(a[s][i], e) }) : (a[s] = [], o.each(e, function (e) { var i = o.getValueOrDefault(e.type, "xAxes" === s ? "category" : "linear"); a[s].push(o.configMerge(t.scaleService.getScaleDefaults(i), e)) })) : a.hasOwnProperty(s) && "object" == typeof a[s] && null !== a[s] && "object" == typeof e ? a[s] = o.configMerge(a[s], e) : a[s] = e) }), a }, o.getValueAtIndexOrDefault = function (t, e, i) { return void 0 === t || null === t ? i : o.isArray(t) ? e < t.length ? t[e] : i : t }, o.getValueOrDefault = function (t, e) { return void 0 === t ? e : t }, o.indexOf = function (t, e) { if (Array.prototype.indexOf) return t.indexOf(e); for (var i = 0; i < t.length; i++)if (t[i] === e) return i; return -1 }, o.where = function (t, e) { var i = []; return o.each(t, function (t) { e(t) && i.push(t) }), i }, o.findIndex = function (t, e, i) { var a = -1; if (Array.prototype.findIndex) a = t.findIndex(e, i); else for (var o = 0; o < t.length; ++o)if (i = void 0 !== i ? i : t, e.call(i, t[o], o, t)) { a = o; break } return a }, o.findNextWhere = function (t, e, i) { (void 0 === i || null === i) && (i = -1); for (var a = i + 1; a < t.length; a++) { var o = t[a]; if (e(o)) return o } }, o.findPreviousWhere = function (t, e, i) { (void 0 === i || null === i) && (i = t.length); for (var a = i - 1; a >= 0; a--) { var o = t[a]; if (e(o)) return o } }, o.inherits = function (t) { var e = this, i = t && t.hasOwnProperty("constructor") ? t.constructor : function () { return e.apply(this, arguments) }, a = function () { this.constructor = i }; return a.prototype = e.prototype, i.prototype = new a, i.extend = o.inherits, t && o.extend(i.prototype, t), i.__super__ = e.prototype, i }, o.noop = function () { }, o.uid = function () { var t = 0; return function () { return t++ } }(), o.warn = function (t) { console && "function" == typeof console.warn && console.warn(t) }, o.isNumber = function (t) { return !isNaN(parseFloat(t)) && isFinite(t) }, o.almostEquals = function (t, e, i) { return Math.abs(t - e) < i }, o.max = function (t) { return t.reduce(function (t, e) { return isNaN(e) ? t : Math.max(t, e) }, Number.NEGATIVE_INFINITY) }, o.min = function (t) { return t.reduce(function (t, e) { return isNaN(e) ? t : Math.min(t, e) }, Number.POSITIVE_INFINITY) }, o.sign = function (t) { return Math.sign ? Math.sign(t) : (t = +t, 0 === t || isNaN(t) ? t : t > 0 ? 1 : -1) }, o.log10 = function (t) { return Math.log10 ? Math.log10(t) : Math.log(t) / Math.LN10 }, o.toRadians = function (t) { return t * (Math.PI / 180) }, o.toDegrees = function (t) { return t * (180 / Math.PI) }, o.getAngleFromPoint = function (t, e) { var i = e.x - t.x, a = e.y - t.y, o = Math.sqrt(i * i + a * a), s = Math.atan2(a, i); return s < -.5 * Math.PI && (s += 2 * Math.PI), { angle: s, distance: o } }, o.aliasPixel = function (t) { return t % 2 === 0 ? 0 : .5 }, o.splineCurve = function (t, e, i, a) { var o = t.skip ? e : t, s = e, n = i.skip ? e : i, r = Math.sqrt(Math.pow(s.x - o.x, 2) + Math.pow(s.y - o.y, 2)), h = Math.sqrt(Math.pow(n.x - s.x, 2) + Math.pow(n.y - s.y, 2)), l = r / (r + h), c = h / (r + h); l = isNaN(l) ? 0 : l, c = isNaN(c) ? 0 : c; var d = a * l, u = a * c; return { previous: { x: s.x - d * (n.x - o.x), y: s.y - d * (n.y - o.y) }, next: { x: s.x + u * (n.x - o.x), y: s.y + u * (n.y - o.y) } } }, o.nextItem = function (t, e, i) { return i ? e >= t.length - 1 ? t[0] : t[e + 1] : e >= t.length - 1 ? t[t.length - 1] : t[e + 1] }, o.previousItem = function (t, e, i) { return i ? 0 >= e ? t[t.length - 1] : t[e - 1] : 0 >= e ? t[0] : t[e - 1] }, o.niceNum = function (t, e) { var i, a = Math.floor(o.log10(t)), s = t / Math.pow(10, a); return i = e ? 1.5 > s ? 1 : 3 > s ? 2 : 7 > s ? 5 : 10 : 1 >= s ? 1 : 2 >= s ? 2 : 5 >= s ? 5 : 10, i * Math.pow(10, a) }; var s = o.easingEffects = { linear: function (t) { return t }, easeInQuad: function (t) { return t * t }, easeOutQuad: function (t) { return -1 * t * (t - 2) }, easeInOutQuad: function (t) { return (t /= .5) < 1 ? .5 * t * t : -0.5 * (--t * (t - 2) - 1) }, easeInCubic: function (t) { return t * t * t }, easeOutCubic: function (t) { return 1 * ((t = t / 1 - 1) * t * t + 1) }, easeInOutCubic: function (t) { return (t /= .5) < 1 ? .5 * t * t * t : .5 * ((t -= 2) * t * t + 2) }, easeInQuart: function (t) { return t * t * t * t }, easeOutQuart: function (t) { return -1 * ((t = t / 1 - 1) * t * t * t - 1) }, easeInOutQuart: function (t) { return (t /= .5) < 1 ? .5 * t * t * t * t : -0.5 * ((t -= 2) * t * t * t - 2) }, easeInQuint: function (t) { return 1 * (t /= 1) * t * t * t * t }, easeOutQuint: function (t) { return 1 * ((t = t / 1 - 1) * t * t * t * t + 1) }, easeInOutQuint: function (t) { return (t /= .5) < 1 ? .5 * t * t * t * t * t : .5 * ((t -= 2) * t * t * t * t + 2) }, easeInSine: function (t) { return -1 * Math.cos(t / 1 * (Math.PI / 2)) + 1 }, easeOutSine: function (t) { return 1 * Math.sin(t / 1 * (Math.PI / 2)) }, easeInOutSine: function (t) { return -0.5 * (Math.cos(Math.PI * t / 1) - 1) }, easeInExpo: function (t) { return 0 === t ? 1 : 1 * Math.pow(2, 10 * (t / 1 - 1)) }, easeOutExpo: function (t) { return 1 === t ? 1 : 1 * (-Math.pow(2, -10 * t / 1) + 1) }, easeInOutExpo: function (t) { return 0 === t ? 0 : 1 === t ? 1 : (t /= .5) < 1 ? .5 * Math.pow(2, 10 * (t - 1)) : .5 * (-Math.pow(2, -10 * --t) + 2) }, easeInCirc: function (t) { return t >= 1 ? t : -1 * (Math.sqrt(1 - (t /= 1) * t) - 1) }, easeOutCirc: function (t) { return 1 * Math.sqrt(1 - (t = t / 1 - 1) * t) }, easeInOutCirc: function (t) { return (t /= .5) < 1 ? -0.5 * (Math.sqrt(1 - t * t) - 1) : .5 * (Math.sqrt(1 - (t -= 2) * t) + 1) }, easeInElastic: function (t) { var e = 1.70158, i = 0, a = 1; return 0 === t ? 0 : 1 === (t /= 1) ? 1 : (i || (i = .3), a < Math.abs(1) ? (a = 1, e = i / 4) : e = i / (2 * Math.PI) * Math.asin(1 / a), -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((1 * t - e) * (2 * Math.PI) / i))) }, easeOutElastic: function (t) { var e = 1.70158, i = 0, a = 1; return 0 === t ? 0 : 1 === (t /= 1) ? 1 : (i || (i = .3), a < Math.abs(1) ? (a = 1, e = i / 4) : e = i / (2 * Math.PI) * Math.asin(1 / a), a * Math.pow(2, -10 * t) * Math.sin((1 * t - e) * (2 * Math.PI) / i) + 1) }, easeInOutElastic: function (t) { var e = 1.70158, i = 0, a = 1; return 0 === t ? 0 : 2 === (t /= .5) ? 1 : (i || (i = 1 * (.3 * 1.5)), a < Math.abs(1) ? (a = 1, e = i / 4) : e = i / (2 * Math.PI) * Math.asin(1 / a), 1 > t ? -.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((1 * t - e) * (2 * Math.PI) / i)) : a * Math.pow(2, -10 * (t -= 1)) * Math.sin((1 * t - e) * (2 * Math.PI) / i) * .5 + 1) }, easeInBack: function (t) { var e = 1.70158; return 1 * (t /= 1) * t * ((e + 1) * t - e) }, easeOutBack: function (t) { var e = 1.70158; return 1 * ((t = t / 1 - 1) * t * ((e + 1) * t + e) + 1) }, easeInOutBack: function (t) { var e = 1.70158; return (t /= .5) < 1 ? .5 * (t * t * (((e *= 1.525) + 1) * t - e)) : .5 * ((t -= 2) * t * (((e *= 1.525) + 1) * t + e) + 2) }, easeInBounce: function (t) { return 1 - s.easeOutBounce(1 - t) }, easeOutBounce: function (t) { return (t /= 1) < 1 / 2.75 ? 1 * (7.5625 * t * t) : 2 / 2.75 > t ? 1 * (7.5625 * (t -= 1.5 / 2.75) * t + .75) : 2.5 / 2.75 > t ? 1 * (7.5625 * (t -= 2.25 / 2.75) * t + .9375) : 1 * (7.5625 * (t -= 2.625 / 2.75) * t + .984375) }, easeInOutBounce: function (t) { return .5 > t ? .5 * s.easeInBounce(2 * t) : .5 * s.easeOutBounce(2 * t - 1) + .5 } }; o.requestAnimFrame = function () { return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (t) { return window.setTimeout(t, 1e3 / 60) } }(), o.cancelAnimFrame = function () { return window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.oCancelAnimationFrame || window.msCancelAnimationFrame || function (t) { return window.clearTimeout(t, 1e3 / 60) } }(), o.getRelativePosition = function (t, e) { var i, a, s = t.originalEvent || t, n = t.currentTarget || t.srcElement, r = n.getBoundingClientRect(); s.touches && s.touches.length > 0 ? (i = s.touches[0].clientX, a = s.touches[0].clientY) : (i = s.clientX, a = s.clientY); var h = parseFloat(o.getStyle(n, "padding-left")), l = parseFloat(o.getStyle(n, "padding-top")), c = parseFloat(o.getStyle(n, "padding-right")), d = parseFloat(o.getStyle(n, "padding-bottom")), u = r.right - r.left - h - c, g = r.bottom - r.top - l - d; return i = Math.round((i - r.left - h) / u * n.width / e.currentDevicePixelRatio), a = Math.round((a - r.top - l) / g * n.height / e.currentDevicePixelRatio), { x: i, y: a } }, o.addEvent = function (t, e, i) { t.addEventListener ? t.addEventListener(e, i) : t.attachEvent ? t.attachEvent("on" + e, i) : t["on" + e] = i }, o.removeEvent = function (t, e, i) { t.removeEventListener ? t.removeEventListener(e, i, !1) : t.detachEvent ? t.detachEvent("on" + e, i) : t["on" + e] = o.noop }, o.bindEvents = function (t, e, i) { t.events || (t.events = {}), o.each(e, function (e) { t.events[e] = function () { i.apply(t, arguments) }, o.addEvent(t.chart.canvas, e, t.events[e]) }) }, o.unbindEvents = function (t, e) { o.each(e, function (e, i) { o.removeEvent(t.chart.canvas, i, e) }) }, o.getConstraintWidth = function (t) { return i(t, "max-width", "clientWidth") }, o.getConstraintHeight = function (t) { return i(t, "max-height", "clientHeight") }, o.getMaximumWidth = function (t) { var e = t.parentNode, i = parseInt(o.getStyle(e, "padding-left")) + parseInt(o.getStyle(e, "padding-right")), a = e.clientWidth - i, s = o.getConstraintWidth(t); return void 0 !== s && (a = Math.min(a, s)), a }, o.getMaximumHeight = function (t) { var e = t.parentNode, i = parseInt(o.getStyle(e, "padding-top")) + parseInt(o.getStyle(e, "padding-bottom")), a = e.clientHeight - i, s = o.getConstraintHeight(t); return void 0 !== s && (a = Math.min(a, s)), a }, o.getStyle = function (t, e) { return t.currentStyle ? t.currentStyle[e] : document.defaultView.getComputedStyle(t, null).getPropertyValue(e) }, o.retinaScale = function (t) { var e = t.ctx, i = t.canvas.width, a = t.canvas.height, o = t.currentDevicePixelRatio = window.devicePixelRatio || 1; 1 !== o && (e.canvas.height = a * o, e.canvas.width = i * o, e.scale(o, o), t.originalDevicePixelRatio = t.originalDevicePixelRatio || o), e.canvas.style.width = i + "px", e.canvas.style.height = a + "px" }, o.clear = function (t) { t.ctx.clearRect(0, 0, t.width, t.height) }, o.fontString = function (t, e, i) { return e + " " + t + "px " + i }, o.longestText = function (t, e, i, a) {
            a = a || {}, a.data = a.data || {}, a.garbageCollect = a.garbageCollect || [], a.font !== e && (a.data = {}, a.garbageCollect = [], a.font = e), t.font = e; var s = 0; o.each(i, function (e) {
                if (void 0 !== e && null !== e) {
                    var i = a.data[e]; i || (i = a.data[e] = t.measureText(e).width, a.garbageCollect.push(e)),
                        i > s && (s = i)
                }
            }); var n = a.garbageCollect.length / 2; if (n > i.length) { for (var r = 0; n > r; r++)delete a.data[a.garbageCollect[r]]; a.garbageCollect.splice(0, n) } return s
            }, o.drawRoundedRectangle = function (t, e, i, a, o, s) { t.beginPath(), t.moveTo(e + s, i), t.lineTo(e + a - s, i), t.quadraticCurveTo(e + a, i, e + a, i + s), t.lineTo(e + a, i + o - s), t.quadraticCurveTo(e + a, i + o, e + a - s, i + o), t.lineTo(e + s, i + o), t.quadraticCurveTo(e, i + o, e, i + o - s), t.lineTo(e, i + s), t.quadraticCurveTo(e, i, e + s, i), t.closePath() }, o.color = function (e) { return a ? a(e instanceof CanvasGradient ? t.defaults.global.defaultColor : e) : (console.log("Color.js not found!"), e) }, o.addResizeListener = function (t, e) { var i = document.createElement("iframe"), a = "chartjs-hidden-iframe"; i.classlist ? i.classlist.add(a) : i.setAttribute("class", a), i.style.width = "100%", i.style.display = "block", i.style.border = 0, i.style.height = 0, i.style.margin = 0, i.style.position = "absolute", i.style.left = 0, i.style.right = 0, i.style.top = 0, i.style.bottom = 0, t.insertBefore(i, t.firstChild), (i.contentWindow || i).onresize = function () { e && e() } }, o.removeResizeListener = function (t) { var e = t.querySelector(".chartjs-hidden-iframe"); e && e.parentNode.removeChild(e) }, o.isArray = function (t) { return Array.isArray ? Array.isArray(t) : "[object Array]" === Object.prototype.toString.call(t) }, o.pushAllIfDefined = function (t, e) { "undefined" != typeof t && (o.isArray(t) ? e.push.apply(e, t) : e.push(t)) }, o.callCallback = function (t, e, i) { t && "function" == typeof t.call && t.apply(i, e) }, o.getHoverColor = function (t) { return t instanceof CanvasPattern ? t : o.color(t).saturate(.5).darken(.1).rgbString() }
        }
    }, { "chartjs-color": 3 }], 26: [function (t, e, i) { "use strict"; e.exports = function () { var t = function (e, i) { this.config = i, e.length && e[0].getContext && (e = e[0]), e.getContext && (e = e.getContext("2d")), this.ctx = e, this.canvas = e.canvas, this.width = e.canvas.width || parseInt(t.helpers.getStyle(e.canvas, "width")) || t.helpers.getMaximumWidth(e.canvas), this.height = e.canvas.height || parseInt(t.helpers.getStyle(e.canvas, "height")) || t.helpers.getMaximumHeight(e.canvas), this.aspectRatio = this.width / this.height, (isNaN(this.aspectRatio) || isFinite(this.aspectRatio) === !1) && (this.aspectRatio = void 0 !== i.aspectRatio ? i.aspectRatio : 2), this.originalCanvasStyleWidth = e.canvas.style.width, this.originalCanvasStyleHeight = e.canvas.style.height, t.helpers.retinaScale(this), i && (this.controller = new t.Controller(this)); var a = this; return t.helpers.addResizeListener(e.canvas.parentNode, function () { a.controller && a.controller.config.options.responsive && a.controller.resize() }), this.controller ? this.controller : this }; return t.defaults = { global: { responsive: !0, responsiveAnimationDuration: 0, maintainAspectRatio: !0, events: ["mousemove", "mouseout", "click", "touchstart", "touchmove"], hover: { onHover: null, mode: "single", animationDuration: 400 }, onClick: null, defaultColor: "rgba(0,0,0,0.1)", defaultFontColor: "#666", defaultFontFamily: "'Helvetica Neue', 'Helvetica', 'Arial', sans-serif", defaultFontSize: 12, defaultFontStyle: "normal", showLines: !0, elements: {}, legendCallback: function (t) { var e = []; e.push('<ul class="' + t.id + '-legend">'); for (var i = 0; i < t.data.datasets.length; i++)e.push('<li><span style="background-color:' + t.data.datasets[i].backgroundColor + '"></span>'), t.data.datasets[i].label && e.push(t.data.datasets[i].label), e.push("</li>"); return e.push("</ul>"), e.join("") } } }, t } }, {}], 27: [function (t, e, i) { "use strict"; e.exports = function (t) { var e = t.helpers; t.layoutService = { defaults: {}, addBox: function (t, e) { t.boxes || (t.boxes = []), t.boxes.push(e) }, removeBox: function (t, e) { t.boxes && t.boxes.splice(t.boxes.indexOf(e), 1) }, update: function (t, i, a) { function o(t) { var e, i = t.isHorizontal(); i ? (e = t.update(t.options.fullWidth ? p : k, y), S -= e.height) : (e = t.update(v, x), k -= e.width), C.push({ horizontal: i, minSize: e, box: t }) } function s(t) { var i = e.findNextWhere(C, function (e) { return e.box === t }); if (i) if (t.isHorizontal()) { var a = { left: w, right: D, top: 0, bottom: 0 }; t.update(t.options.fullWidth ? p : k, m / 2, a) } else t.update(i.minSize.width, S) } function n(t) { var i = e.findNextWhere(C, function (e) { return e.box === t }), a = { left: 0, right: 0, top: M, bottom: _ }; i && t.update(i.minSize.width, S, a) } function r(t) { t.isHorizontal() ? (t.left = t.options.fullWidth ? h : w, t.right = t.options.fullWidth ? i - h : w + k, t.top = P, t.bottom = P + t.height, P = t.bottom) : (t.left = F, t.right = F + t.width, t.top = M, t.bottom = M + S, F = t.right) } if (t) { var h = 0, l = 0, c = e.where(t.boxes, function (t) { return "left" === t.options.position }), d = e.where(t.boxes, function (t) { return "right" === t.options.position }), u = e.where(t.boxes, function (t) { return "top" === t.options.position }), g = e.where(t.boxes, function (t) { return "bottom" === t.options.position }), f = e.where(t.boxes, function (t) { return "chartArea" === t.options.position }); u.sort(function (t, e) { return (e.options.fullWidth ? 1 : 0) - (t.options.fullWidth ? 1 : 0) }), g.sort(function (t, e) { return (t.options.fullWidth ? 1 : 0) - (e.options.fullWidth ? 1 : 0) }); var p = i - 2 * h, m = a - 2 * l, b = p / 2, x = m / 2, v = (i - b) / (c.length + d.length), y = (a - x) / (u.length + g.length), k = p, S = m, C = []; e.each(c.concat(d, u, g), o); var w = h, D = h, M = l, _ = l; e.each(c.concat(d), s), e.each(c, function (t) { w += t.width }), e.each(d, function (t) { D += t.width }), e.each(u.concat(g), s), e.each(u, function (t) { M += t.height }), e.each(g, function (t) { _ += t.height }), e.each(c.concat(d), n), w = h, D = h, M = l, _ = l, e.each(c, function (t) { w += t.width }), e.each(d, function (t) { D += t.width }), e.each(u, function (t) { M += t.height }), e.each(g, function (t) { _ += t.height }); var A = a - M - _, I = i - w - D; (I !== k || A !== S) && (e.each(c, function (t) { t.height = A }), e.each(d, function (t) { t.height = A }), e.each(u, function (t) { t.options.fullWidth || (t.width = I) }), e.each(g, function (t) { t.options.fullWidth || (t.width = I) }), S = A, k = I); var F = h, P = l; e.each(c.concat(u), r), F += k, P += S, e.each(d, r), e.each(g, r), t.chartArea = { left: w, top: M, right: w + k, bottom: M + S }, e.each(f, function (e) { e.left = t.chartArea.left, e.top = t.chartArea.top, e.right = t.chartArea.right, e.bottom = t.chartArea.bottom, e.update(k, S) }) } } } } }, {}], 28: [function (t, e, i) { "use strict"; e.exports = function (t) { var e = t.helpers, i = e.noop; t.defaults.global.legend = { display: !0, position: "top", fullWidth: !0, reverse: !1, onClick: function (t, e) { var i = e.datasetIndex, a = this.chart, o = a.getDatasetMeta(i); o.hidden = null === o.hidden ? !a.data.datasets[i].hidden : null, a.update() }, labels: { boxWidth: 40, padding: 10, generateLabels: function (t) { var i = t.data; return e.isArray(i.datasets) ? i.datasets.map(function (e, i) { return { text: e.label, fillStyle: e.backgroundColor, hidden: !t.isDatasetVisible(i), lineCap: e.borderCapStyle, lineDash: e.borderDash, lineDashOffset: e.borderDashOffset, lineJoin: e.borderJoinStyle, lineWidth: e.borderWidth, strokeStyle: e.borderColor, datasetIndex: i } }, this) : [] } } }, t.Legend = t.Element.extend({ initialize: function (t) { e.extend(this, t), this.legendHitBoxes = [], this.doughnutMode = !1 }, beforeUpdate: i, update: function (t, e, i) { return this.beforeUpdate(), this.maxWidth = t, this.maxHeight = e, this.margins = i, this.beforeSetDimensions(), this.setDimensions(), this.afterSetDimensions(), this.beforeBuildLabels(), this.buildLabels(), this.afterBuildLabels(), this.beforeFit(), this.fit(), this.afterFit(), this.afterUpdate(), this.minSize }, afterUpdate: i, beforeSetDimensions: i, setDimensions: function () { this.isHorizontal() ? (this.width = this.maxWidth, this.left = 0, this.right = this.width) : (this.height = this.maxHeight, this.top = 0, this.bottom = this.height), this.paddingLeft = 0, this.paddingTop = 0, this.paddingRight = 0, this.paddingBottom = 0, this.minSize = { width: 0, height: 0 } }, afterSetDimensions: i, beforeBuildLabels: i, buildLabels: function () { this.legendItems = this.options.labels.generateLabels.call(this, this.chart), this.options.reverse && this.legendItems.reverse() }, afterBuildLabels: i, beforeFit: i, fit: function () { var i = this.options, a = i.labels, o = i.display, s = this.ctx, n = t.defaults.global, r = e.getValueOrDefault, h = r(a.fontSize, n.defaultFontSize), l = r(a.fontStyle, n.defaultFontStyle), c = r(a.fontFamily, n.defaultFontFamily), d = e.fontString(h, l, c), u = this.legendHitBoxes = [], g = this.minSize, f = this.isHorizontal(); if (f ? (g.width = this.maxWidth, g.height = o ? 10 : 0) : (g.width = o ? 10 : 0, g.height = this.maxHeight), o && f) { var p = this.lineWidths = [0], m = this.legendItems.length ? h + a.padding : 0; s.textAlign = "left", s.textBaseline = "top", s.font = d, e.each(this.legendItems, function (t, e) { var i = a.boxWidth + h / 2 + s.measureText(t.text).width; p[p.length - 1] + i + a.padding >= this.width && (m += h + a.padding, p[p.length] = this.left), u[e] = { left: 0, top: 0, width: i, height: h }, p[p.length - 1] += i + a.padding }, this), g.height += m } this.width = g.width, this.height = g.height }, afterFit: i, isHorizontal: function () { return "top" === this.options.position || "bottom" === this.options.position }, draw: function () { var i = this.options, a = i.labels, o = t.defaults.global, s = o.elements.line, n = this.width, r = this.lineWidths; if (i.display) { var h = this.ctx, l = { x: this.left + (n - r[0]) / 2, y: this.top + a.padding, line: 0 }, c = e.getValueOrDefault, d = c(a.fontColor, o.defaultFontColor), u = c(a.fontSize, o.defaultFontSize), g = c(a.fontStyle, o.defaultFontStyle), f = c(a.fontFamily, o.defaultFontFamily), p = e.fontString(u, g, f); if (this.isHorizontal()) { h.textAlign = "left", h.textBaseline = "top", h.lineWidth = .5, h.strokeStyle = d, h.fillStyle = d, h.font = p; var m = a.boxWidth, b = this.legendHitBoxes; e.each(this.legendItems, function (t, e) { var i = h.measureText(t.text).width, d = m + u / 2 + i, g = l.x, f = l.y; g + d >= n && (f = l.y += u + a.padding, l.line++ , g = l.x = this.left + (n - r[l.line]) / 2), h.save(), h.fillStyle = c(t.fillStyle, o.defaultColor), h.lineCap = c(t.lineCap, s.borderCapStyle), h.lineDashOffset = c(t.lineDashOffset, s.borderDashOffset), h.lineJoin = c(t.lineJoin, s.borderJoinStyle), h.lineWidth = c(t.lineWidth, s.borderWidth), h.strokeStyle = c(t.strokeStyle, o.defaultColor), h.setLineDash && h.setLineDash(c(t.lineDash, s.borderDash)), h.strokeRect(g, f, m, u), h.fillRect(g, f, m, u), h.restore(), b[e].left = g, b[e].top = f, h.fillText(t.text, m + u / 2 + g, f), t.hidden && (h.beginPath(), h.lineWidth = 2, h.moveTo(m + u / 2 + g, f + u / 2), h.lineTo(m + u / 2 + g + i, f + u / 2), h.stroke()), l.x += d + a.padding }, this) } } }, handleEvent: function (t) { var i = e.getRelativePosition(t, this.chart.chart), a = i.x, o = i.y, s = this.options; if (a >= this.left && a <= this.right && o >= this.top && o <= this.bottom) for (var n = this.legendHitBoxes, r = 0; r < n.length; ++r) { var h = n[r]; if (a >= h.left && a <= h.left + h.width && o >= h.top && o <= h.top + h.height) { s.onClick && s.onClick.call(this, t, this.legendItems[r]); break } } } }) } }, {}], 29: [function (t, e, i) { "use strict"; e.exports = function (t) { var e = t.helpers; t.plugins = [], t.pluginService = { register: function (e) { var i = t.plugins; -1 === i.indexOf(e) && i.push(e) }, remove: function (e) { var i = t.plugins, a = i.indexOf(e); -1 !== a && i.splice(a, 1) }, notifyPlugins: function (i, a, o) { e.each(t.plugins, function (t) { t[i] && "function" == typeof t[i] && t[i].apply(o, a) }, o) } }; var i = e.noop; t.PluginBase = t.Element.extend({ beforeInit: i, afterInit: i, beforeUpdate: i, afterUpdate: i, beforeDraw: i, afterDraw: i, destroy: i }) } }, {}], 30: [function (t, e, i) { "use strict"; e.exports = function (t) { var e = t.helpers; t.defaults.scale = { display: !0, position: "left", gridLines: { display: !0, color: "rgba(0, 0, 0, 0.1)", lineWidth: 1, drawOnChartArea: !0, drawTicks: !0, tickMarkLength: 10, zeroLineWidth: 1, zeroLineColor: "rgba(0,0,0,0.25)", offsetGridLines: !1 }, scaleLabel: { labelString: "", display: !1 }, ticks: { beginAtZero: !1, minRotation: 0, maxRotation: 50, mirror: !1, padding: 10, reverse: !1, display: !0, autoSkip: !0, autoSkipPadding: 0, labelOffset: 0, callback: function (t) { return "" + t } } }, t.Scale = t.Element.extend({ beforeUpdate: function () { e.callCallback(this.options.beforeUpdate, [this]) }, update: function (t, i, a) { return this.beforeUpdate(), this.maxWidth = t, this.maxHeight = i, this.margins = e.extend({ left: 0, right: 0, top: 0, bottom: 0 }, a), this.beforeSetDimensions(), this.setDimensions(), this.afterSetDimensions(), this.beforeDataLimits(), this.determineDataLimits(), this.afterDataLimits(), this.beforeBuildTicks(), this.buildTicks(), this.afterBuildTicks(), this.beforeTickToLabelConversion(), this.convertTicksToLabels(), this.afterTickToLabelConversion(), this.beforeCalculateTickRotation(), this.calculateTickRotation(), this.afterCalculateTickRotation(), this.beforeFit(), this.fit(), this.afterFit(), this.afterUpdate(), this.minSize }, afterUpdate: function () { e.callCallback(this.options.afterUpdate, [this]) }, beforeSetDimensions: function () { e.callCallback(this.options.beforeSetDimensions, [this]) }, setDimensions: function () { this.isHorizontal() ? (this.width = this.maxWidth, this.left = 0, this.right = this.width) : (this.height = this.maxHeight, this.top = 0, this.bottom = this.height), this.paddingLeft = 0, this.paddingTop = 0, this.paddingRight = 0, this.paddingBottom = 0 }, afterSetDimensions: function () { e.callCallback(this.options.afterSetDimensions, [this]) }, beforeDataLimits: function () { e.callCallback(this.options.beforeDataLimits, [this]) }, determineDataLimits: e.noop, afterDataLimits: function () { e.callCallback(this.options.afterDataLimits, [this]) }, beforeBuildTicks: function () { e.callCallback(this.options.beforeBuildTicks, [this]) }, buildTicks: e.noop, afterBuildTicks: function () { e.callCallback(this.options.afterBuildTicks, [this]) }, beforeTickToLabelConversion: function () { e.callCallback(this.options.beforeTickToLabelConversion, [this]) }, convertTicksToLabels: function () { this.ticks = this.ticks.map(function (t, e, i) { return this.options.ticks.userCallback ? this.options.ticks.userCallback(t, e, i) : this.options.ticks.callback(t, e, i) }, this) }, afterTickToLabelConversion: function () { e.callCallback(this.options.afterTickToLabelConversion, [this]) }, beforeCalculateTickRotation: function () { e.callCallback(this.options.beforeCalculateTickRotation, [this]) }, calculateTickRotation: function () { var i = e.getValueOrDefault(this.options.ticks.fontSize, t.defaults.global.defaultFontSize), a = e.getValueOrDefault(this.options.ticks.fontStyle, t.defaults.global.defaultFontStyle), o = e.getValueOrDefault(this.options.ticks.fontFamily, t.defaults.global.defaultFontFamily), s = e.fontString(i, a, o); this.ctx.font = s; var n, r = this.ctx.measureText(this.ticks[0]).width, h = this.ctx.measureText(this.ticks[this.ticks.length - 1]).width; if (this.labelRotation = this.options.ticks.minRotation || 0, this.paddingRight = 0, this.paddingLeft = 0, this.options.display && this.isHorizontal()) { this.paddingRight = h / 2 + 3, this.paddingLeft = r / 2 + 3, this.longestTextCache || (this.longestTextCache = {}); for (var l, c, d = e.longestText(this.ctx, s, this.ticks, this.longestTextCache), u = d, g = this.getPixelForTick(1) - this.getPixelForTick(0) - 6; u > g && this.labelRotation < this.options.ticks.maxRotation;) { if (l = Math.cos(e.toRadians(this.labelRotation)), c = Math.sin(e.toRadians(this.labelRotation)), n = l * r, n + i / 2 > this.yLabelWidth && (this.paddingLeft = n + i / 2), this.paddingRight = i / 2, c * d > this.maxHeight) { this.labelRotation--; break } this.labelRotation++ , u = l * d } } this.margins && (this.paddingLeft = Math.max(this.paddingLeft - this.margins.left, 0), this.paddingRight = Math.max(this.paddingRight - this.margins.right, 0)) }, afterCalculateTickRotation: function () { e.callCallback(this.options.afterCalculateTickRotation, [this]) }, beforeFit: function () { e.callCallback(this.options.beforeFit, [this]) }, fit: function () { var i = this.minSize = { width: 0, height: 0 }, a = this.options, o = a.ticks, s = a.scaleLabel, n = t.defaults.global, r = a.display, h = this.isHorizontal(), l = e.getValueOrDefault(o.fontSize, n.defaultFontSize), c = e.getValueOrDefault(o.fontStyle, n.defaultFontStyle), d = e.getValueOrDefault(o.fontFamily, n.defaultFontFamily), u = e.fontString(l, c, d), g = e.getValueOrDefault(s.fontSize, n.defaultFontSize), f = e.getValueOrDefault(s.fontStyle, n.defaultFontStyle), p = e.getValueOrDefault(s.fontFamily, n.defaultFontFamily), m = (e.fontString(g, f, p), a.gridLines.tickMarkLength); if (h ? i.width = this.isFullWidth() ? this.maxWidth - this.margins.left - this.margins.right : this.maxWidth : i.width = r ? m : 0, h ? i.height = r ? m : 0 : i.height = this.maxHeight, s.display && r && (h ? i.height += 1.5 * g : i.width += 1.5 * g), o.display && r) { this.longestTextCache || (this.longestTextCache = {}); var b = e.longestText(this.ctx, u, this.ticks, this.longestTextCache); if (h) { this.longestLabelWidth = b; var x = Math.sin(e.toRadians(this.labelRotation)) * this.longestLabelWidth + 1.5 * l; i.height = Math.min(this.maxHeight, i.height + x), this.ctx.font = u; var v = this.ctx.measureText(this.ticks[0]).width, y = this.ctx.measureText(this.ticks[this.ticks.length - 1]).width, k = Math.cos(e.toRadians(this.labelRotation)), S = Math.sin(e.toRadians(this.labelRotation)); this.paddingLeft = 0 !== this.labelRotation ? k * v + 3 : v / 2 + 3, this.paddingRight = 0 !== this.labelRotation ? S * (l / 2) + 3 : y / 2 + 3 } else { var C = this.maxWidth - i.width, w = o.mirror; w ? b = 0 : b += this.options.ticks.padding, C > b ? i.width += b : i.width = this.maxWidth, this.paddingTop = l / 2, this.paddingBottom = l / 2 } } this.margins && (this.paddingLeft = Math.max(this.paddingLeft - this.margins.left, 0), this.paddingTop = Math.max(this.paddingTop - this.margins.top, 0), this.paddingRight = Math.max(this.paddingRight - this.margins.right, 0), this.paddingBottom = Math.max(this.paddingBottom - this.margins.bottom, 0)), this.width = i.width, this.height = i.height }, afterFit: function () { e.callCallback(this.options.afterFit, [this]) }, isHorizontal: function () { return "top" === this.options.position || "bottom" === this.options.position }, isFullWidth: function () { return this.options.fullWidth }, getRightValue: function i(t) { return null === t || "undefined" == typeof t ? NaN : "number" == typeof t && isNaN(t) ? NaN : "object" == typeof t ? t instanceof Date ? t : i(this.isHorizontal() ? t.x : t.y) : t }, getLabelForIndex: e.noop, getPixelForValue: e.noop, getValueForPixel: e.noop, getPixelForTick: function (t, e) { if (this.isHorizontal()) { var i = this.width - (this.paddingLeft + this.paddingRight), a = i / Math.max(this.ticks.length - (this.options.gridLines.offsetGridLines ? 0 : 1), 1), o = a * t + this.paddingLeft; e && (o += a / 2); var s = this.left + Math.round(o); return s += this.isFullWidth() ? this.margins.left : 0 } var n = this.height - (this.paddingTop + this.paddingBottom); return this.top + t * (n / (this.ticks.length - 1)) }, getPixelForDecimal: function (t) { if (this.isHorizontal()) { var e = this.width - (this.paddingLeft + this.paddingRight), i = e * t + this.paddingLeft, a = this.left + Math.round(i); return a += this.isFullWidth() ? this.margins.left : 0 } return this.top + t * this.height }, draw: function (i) { if (this.options.display) { var a, o, s, n, r, h = 0 !== this.labelRotation, l = this.options.ticks.autoSkip; this.options.ticks.maxTicksLimit && (r = this.options.ticks.maxTicksLimit); var c = e.getValueOrDefault(this.options.ticks.fontColor, t.defaults.global.defaultFontColor), d = e.getValueOrDefault(this.options.ticks.fontSize, t.defaults.global.defaultFontSize), u = e.getValueOrDefault(this.options.ticks.fontStyle, t.defaults.global.defaultFontStyle), g = e.getValueOrDefault(this.options.ticks.fontFamily, t.defaults.global.defaultFontFamily), f = e.fontString(d, u, g), p = this.options.gridLines.tickMarkLength, m = e.getValueOrDefault(this.options.scaleLabel.fontColor, t.defaults.global.defaultFontColor), b = e.getValueOrDefault(this.options.scaleLabel.fontSize, t.defaults.global.defaultFontSize), x = e.getValueOrDefault(this.options.scaleLabel.fontStyle, t.defaults.global.defaultFontStyle), v = e.getValueOrDefault(this.options.scaleLabel.fontFamily, t.defaults.global.defaultFontFamily), y = e.fontString(b, x, v), k = Math.cos(e.toRadians(this.labelRotation)), S = (Math.sin(e.toRadians(this.labelRotation)), this.longestLabelWidth * k); if (this.ctx.fillStyle = c, this.isHorizontal()) { a = !0; var C = "bottom" === this.options.position ? this.top : this.bottom - p, w = "bottom" === this.options.position ? this.top + p : this.bottom; if (o = !1, (S / 2 + this.options.ticks.autoSkipPadding) * this.ticks.length > this.width - (this.paddingLeft + this.paddingRight) && (o = 1 + Math.floor((S / 2 + this.options.ticks.autoSkipPadding) * this.ticks.length / (this.width - (this.paddingLeft + this.paddingRight)))), r && this.ticks.length > r) for (; !o || this.ticks.length / (o || 1) > r;)o || (o = 1), o += 1; l || (o = !1), e.each(this.ticks, function (t, s) { var n = this.ticks.length === s + 1, r = o > 1 && s % o > 0 || s % o === 0 && s + o > this.ticks.length; if ((!r || n) && void 0 !== t && null !== t) { var l = this.getPixelForTick(s), c = this.getPixelForTick(s, this.options.gridLines.offsetGridLines); this.options.gridLines.display && (s === ("undefined" != typeof this.zeroLineIndex ? this.zeroLineIndex : 0) ? (this.ctx.lineWidth = this.options.gridLines.zeroLineWidth, this.ctx.strokeStyle = this.options.gridLines.zeroLineColor, a = !0) : a && (this.ctx.lineWidth = this.options.gridLines.lineWidth, this.ctx.strokeStyle = this.options.gridLines.color, a = !1), l += e.aliasPixel(this.ctx.lineWidth), this.ctx.beginPath(), this.options.gridLines.drawTicks && (this.ctx.moveTo(l, C), this.ctx.lineTo(l, w)), this.options.gridLines.drawOnChartArea && (this.ctx.moveTo(l, i.top), this.ctx.lineTo(l, i.bottom)), this.ctx.stroke()), this.options.ticks.display && (this.ctx.save(), this.ctx.translate(c + this.options.ticks.labelOffset, h ? this.top + 12 : "top" === this.options.position ? this.bottom - p : this.top + p), this.ctx.rotate(-1 * e.toRadians(this.labelRotation)), this.ctx.font = f, this.ctx.textAlign = h ? "right" : "center", this.ctx.textBaseline = h ? "middle" : "top" === this.options.position ? "bottom" : "top", this.ctx.fillText(t, 0, 0), this.ctx.restore()) } }, this), this.options.scaleLabel.display && (this.ctx.textAlign = "center", this.ctx.textBaseline = "middle", this.ctx.fillStyle = m, this.ctx.font = y, s = this.left + (this.right - this.left) / 2, n = "bottom" === this.options.position ? this.bottom - b / 2 : this.top + b / 2, this.ctx.fillText(this.options.scaleLabel.labelString, s, n)) } else { a = !0; var D = "right" === this.options.position ? this.left : this.right - 5, M = "right" === this.options.position ? this.left + 5 : this.right; if (e.each(this.ticks, function (t, o) { if (void 0 !== t && null !== t) { var s = this.getPixelForTick(o); if (this.options.gridLines.display && (o === ("undefined" != typeof this.zeroLineIndex ? this.zeroLineIndex : 0) ? (this.ctx.lineWidth = this.options.gridLines.zeroLineWidth, this.ctx.strokeStyle = this.options.gridLines.zeroLineColor, a = !0) : a && (this.ctx.lineWidth = this.options.gridLines.lineWidth, this.ctx.strokeStyle = this.options.gridLines.color, a = !1), s += e.aliasPixel(this.ctx.lineWidth), this.ctx.beginPath(), this.options.gridLines.drawTicks && (this.ctx.moveTo(D, s), this.ctx.lineTo(M, s)), this.options.gridLines.drawOnChartArea && (this.ctx.moveTo(i.left, s), this.ctx.lineTo(i.right, s)), this.ctx.stroke()), this.options.ticks.display) { var n, r = this.getPixelForTick(o, this.options.gridLines.offsetGridLines); this.ctx.save(), "left" === this.options.position ? this.options.ticks.mirror ? (n = this.right + this.options.ticks.padding, this.ctx.textAlign = "left") : (n = this.right - this.options.ticks.padding, this.ctx.textAlign = "right") : this.options.ticks.mirror ? (n = this.left - this.options.ticks.padding, this.ctx.textAlign = "right") : (n = this.left + this.options.ticks.padding, this.ctx.textAlign = "left"), this.ctx.translate(n, r + this.options.ticks.labelOffset), this.ctx.rotate(-1 * e.toRadians(this.labelRotation)), this.ctx.font = f, this.ctx.textBaseline = "middle", this.ctx.fillText(t, 0, 0), this.ctx.restore() } } }, this), this.options.scaleLabel.display) { s = "left" === this.options.position ? this.left + b / 2 : this.right - b / 2, n = this.top + (this.bottom - this.top) / 2; var _ = "left" === this.options.position ? -.5 * Math.PI : .5 * Math.PI; this.ctx.save(), this.ctx.translate(s, n), this.ctx.rotate(_), this.ctx.textAlign = "center", this.ctx.fillStyle = m, this.ctx.font = y, this.ctx.textBaseline = "middle", this.ctx.fillText(this.options.scaleLabel.labelString, 0, 0), this.ctx.restore() } } this.ctx.lineWidth = this.options.gridLines.lineWidth, this.ctx.strokeStyle = this.options.gridLines.color; var A = this.left, I = this.right, F = this.top, P = this.bottom; this.isHorizontal() ? (F = P = "top" === this.options.position ? this.bottom : this.top, F += e.aliasPixel(this.ctx.lineWidth), P += e.aliasPixel(this.ctx.lineWidth)) : (A = I = "left" === this.options.position ? this.right : this.left, A += e.aliasPixel(this.ctx.lineWidth), I += e.aliasPixel(this.ctx.lineWidth)), this.ctx.beginPath(), this.ctx.moveTo(A, F), this.ctx.lineTo(I, P), this.ctx.stroke() } } }) } }, {}], 31: [function (t, e, i) { "use strict"; e.exports = function (t) { var e = t.helpers; t.scaleService = { constructors: {}, defaults: {}, registerScaleType: function (t, i, a) { this.constructors[t] = i, this.defaults[t] = e.clone(a) }, getScaleConstructor: function (t) { return this.constructors.hasOwnProperty(t) ? this.constructors[t] : void 0 }, getScaleDefaults: function (i) { return this.defaults.hasOwnProperty(i) ? e.scaleMerge(t.defaults.scale, this.defaults[i]) : {} }, updateScaleDefaults: function (t, i) { var a = this.defaults; a.hasOwnProperty(t) && (a[t] = e.extend(a[t], i)) }, addScalesToLayout: function (i) { e.each(i.scales, function (e) { t.layoutService.addBox(i, e) }) } } } }, {}], 32: [function (t, e, i) { "use strict"; e.exports = function (t) { var e = t.helpers; t.defaults.global.title = { display: !1, position: "top", fullWidth: !0, fontStyle: "bold", padding: 10, text: "" }; var i = e.noop; t.Title = t.Element.extend({ initialize: function (i) { e.extend(this, i), this.options = e.configMerge(t.defaults.global.title, i.options), this.legendHitBoxes = [] }, beforeUpdate: i, update: function (t, e, i) { return this.beforeUpdate(), this.maxWidth = t, this.maxHeight = e, this.margins = i, this.beforeSetDimensions(), this.setDimensions(), this.afterSetDimensions(), this.beforeBuildLabels(), this.buildLabels(), this.afterBuildLabels(), this.beforeFit(), this.fit(), this.afterFit(), this.afterUpdate(), this.minSize }, afterUpdate: i, beforeSetDimensions: i, setDimensions: function () { this.isHorizontal() ? (this.width = this.maxWidth, this.left = 0, this.right = this.width) : (this.height = this.maxHeight, this.top = 0, this.bottom = this.height), this.paddingLeft = 0, this.paddingTop = 0, this.paddingRight = 0, this.paddingBottom = 0, this.minSize = { width: 0, height: 0 } }, afterSetDimensions: i, beforeBuildLabels: i, buildLabels: i, afterBuildLabels: i, beforeFit: i, fit: function () { var i = (this.ctx, e.getValueOrDefault), a = this.options, o = t.defaults.global, s = a.display, n = i(a.fontSize, o.defaultFontSize), r = this.minSize; this.isHorizontal() ? (r.width = this.maxWidth, r.height = s ? n + 2 * a.padding : 0) : (r.width = s ? n + 2 * a.padding : 0, r.height = this.maxHeight), this.width = r.width, this.height = r.height }, afterFit: i, isHorizontal: function () { var t = this.options.position; return "top" === t || "bottom" === t }, draw: function () { var i = this.ctx, a = e.getValueOrDefault, o = this.options, s = t.defaults.global; if (o.display) { var n, r, h = a(o.fontSize, s.defaultFontSize), l = a(o.fontStyle, s.defaultFontStyle), c = a(o.fontFamily, s.defaultFontFamily), d = e.fontString(h, l, c), u = 0; i.fillStyle = a(o.fontColor, s.defaultFontColor), i.font = d, this.isHorizontal() ? (n = this.left + (this.right - this.left) / 2, r = this.top + (this.bottom - this.top) / 2) : (n = "left" === o.position ? this.left + h / 2 : this.right - h / 2, r = this.top + (this.bottom - this.top) / 2, u = Math.PI * ("left" === o.position ? -.5 : .5)), i.save(), i.translate(n, r), i.rotate(u), i.textAlign = "center", i.textBaseline = "middle", i.fillText(o.text, 0, 0), i.restore() } } }) } }, {}], 33: [function (t, e, i) {
        "use strict"; e.exports = function (t) {
            function e(t, e) { return e && (i.isArray(e) ? t = t.concat(e) : t.push(e)), t } var i = t.helpers; t.defaults.global.tooltips = { enabled: !0, custom: null, mode: "single", backgroundColor: "rgba(0,0,0,0.8)", titleFontStyle: "bold", titleSpacing: 2, titleMarginBottom: 6, titleColor: "#fff", titleAlign: "left", bodySpacing: 2, bodyColor: "#fff", bodyAlign: "left", footerFontStyle: "bold", footerSpacing: 2, footerMarginTop: 6, footerColor: "#fff", footerAlign: "left", yPadding: 6, xPadding: 6, yAlign: "center", xAlign: "center", caretSize: 5, cornerRadius: 6, multiKeyBackground: "#fff", callbacks: { beforeTitle: i.noop, title: function (t, e) { var i = ""; return t.length > 0 && (t[0].xLabel ? i = t[0].xLabel : e.labels.length > 0 && t[0].index < e.labels.length && (i = e.labels[t[0].index])), i }, afterTitle: i.noop, beforeBody: i.noop, beforeLabel: i.noop, label: function (t, e) { var i = e.datasets[t.datasetIndex].label || ""; return i + ": " + t.yLabel }, afterLabel: i.noop, afterBody: i.noop, beforeFooter: i.noop, footer: i.noop, afterFooter: i.noop } }, t.Tooltip = t.Element.extend({
                initialize: function () { var e = this._options; i.extend(this, { _model: { xPadding: e.tooltips.xPadding, yPadding: e.tooltips.yPadding, xAlign: e.tooltips.yAlign, yAlign: e.tooltips.xAlign, bodyColor: e.tooltips.bodyColor, _bodyFontFamily: i.getValueOrDefault(e.tooltips.bodyFontFamily, t.defaults.global.defaultFontFamily), _bodyFontStyle: i.getValueOrDefault(e.tooltips.bodyFontStyle, t.defaults.global.defaultFontStyle), _bodyAlign: e.tooltips.bodyAlign, bodyFontSize: i.getValueOrDefault(e.tooltips.bodyFontSize, t.defaults.global.defaultFontSize), bodySpacing: e.tooltips.bodySpacing, titleColor: e.tooltips.titleColor, _titleFontFamily: i.getValueOrDefault(e.tooltips.titleFontFamily, t.defaults.global.defaultFontFamily), _titleFontStyle: i.getValueOrDefault(e.tooltips.titleFontStyle, t.defaults.global.defaultFontStyle), titleFontSize: i.getValueOrDefault(e.tooltips.titleFontSize, t.defaults.global.defaultFontSize), _titleAlign: e.tooltips.titleAlign, titleSpacing: e.tooltips.titleSpacing, titleMarginBottom: e.tooltips.titleMarginBottom, footerColor: e.tooltips.footerColor, _footerFontFamily: i.getValueOrDefault(e.tooltips.footerFontFamily, t.defaults.global.defaultFontFamily), _footerFontStyle: i.getValueOrDefault(e.tooltips.footerFontStyle, t.defaults.global.defaultFontStyle), footerFontSize: i.getValueOrDefault(e.tooltips.footerFontSize, t.defaults.global.defaultFontSize), _footerAlign: e.tooltips.footerAlign, footerSpacing: e.tooltips.footerSpacing, footerMarginTop: e.tooltips.footerMarginTop, caretSize: e.tooltips.caretSize, cornerRadius: e.tooltips.cornerRadius, backgroundColor: e.tooltips.backgroundColor, opacity: 0, legendColorBackground: e.tooltips.multiKeyBackground } }) }, getTitle: function () { var t = this._options.tooltips.callbacks.beforeTitle.apply(this, arguments), i = this._options.tooltips.callbacks.title.apply(this, arguments), a = this._options.tooltips.callbacks.afterTitle.apply(this, arguments), o = []; return o = e(o, t), o = e(o, i), o = e(o, a) }, getBeforeBody: function () { var t = this._options.tooltips.callbacks.beforeBody.apply(this, arguments); return i.isArray(t) ? t : void 0 !== t ? [t] : [] }, getBody: function (t, e) { var a = []; return i.each(t, function (t) { i.pushAllIfDefined(this._options.tooltips.callbacks.beforeLabel.call(this, t, e), a), i.pushAllIfDefined(this._options.tooltips.callbacks.label.call(this, t, e), a), i.pushAllIfDefined(this._options.tooltips.callbacks.afterLabel.call(this, t, e), a) }, this), a }, getAfterBody: function () { var t = this._options.tooltips.callbacks.afterBody.apply(this, arguments); return i.isArray(t) ? t : void 0 !== t ? [t] : [] }, getFooter: function () { var t = this._options.tooltips.callbacks.beforeFooter.apply(this, arguments), i = this._options.tooltips.callbacks.footer.apply(this, arguments), a = this._options.tooltips.callbacks.afterFooter.apply(this, arguments), o = []; return o = e(o, t), o = e(o, i), o = e(o, a) }, getAveragePosition: function (t) { if (!t.length) return !1; var e = [], a = []; i.each(t, function (t) { if (t) { var i = t.tooltipPosition(); e.push(i.x), a.push(i.y) } }); for (var o = 0, s = 0, n = 0; n < e.length; n++)o += e[n], s += a[n]; return { x: Math.round(o / e.length), y: Math.round(s / e.length) } }, update: function (t) { if (this._active.length) { this._model.opacity = 1; var e, a = this._active[0], o = [], s = []; if ("single" === this._options.tooltips.mode) { var n = a._yScale || a._scale; s.push({ xLabel: a._xScale ? a._xScale.getLabelForIndex(a._index, a._datasetIndex) : "", yLabel: n ? n.getLabelForIndex(a._index, a._datasetIndex) : "", index: a._index, datasetIndex: a._datasetIndex }), e = this.getAveragePosition(this._active) } else i.each(this._data.datasets, function (t, e) { if (this._chartInstance.isDatasetVisible(e)) { var i = this._chartInstance.getDatasetMeta(e), o = i.data[a._index]; if (o) { var n = a._yScale || a._scale; s.push({ xLabel: o._xScale ? o._xScale.getLabelForIndex(o._index, o._datasetIndex) : "", yLabel: n ? n.getLabelForIndex(o._index, o._datasetIndex) : "", index: a._index, datasetIndex: e }) } } }, this), i.each(this._active, function (t) { t && o.push({ borderColor: t._view.borderColor, backgroundColor: t._view.backgroundColor }) }, null), e = this.getAveragePosition(this._active); i.extend(this._model, { title: this.getTitle(s, this._data), beforeBody: this.getBeforeBody(s, this._data), body: this.getBody(s, this._data), afterBody: this.getAfterBody(s, this._data), footer: this.getFooter(s, this._data) }), i.extend(this._model, { x: Math.round(e.x), y: Math.round(e.y), caretPadding: i.getValueOrDefault(e.padding, 2), labelColors: o }); var r = this.getTooltipSize(this._model); this.determineAlignment(r), i.extend(this._model, this.getBackgroundPoint(this._model, r)) } else this._model.opacity = 0; return t && this._options.tooltips.custom && this._options.tooltips.custom.call(this, this._model), this }, getTooltipSize: function (t) {
                    var e = this._chart.ctx, a = { height: 2 * t.yPadding, width: 0 }, o = t.body.length + t.beforeBody.length + t.afterBody.length; return a.height += t.title.length * t.titleFontSize, a.height += (t.title.length - 1) * t.titleSpacing, a.height += t.title.length ? t.titleMarginBottom : 0, a.height += o * t.bodyFontSize, a.height += o ? (o - 1) * t.bodySpacing : 0, a.height += t.footer.length ? t.footerMarginTop : 0, a.height += t.footer.length * t.footerFontSize, a.height += t.footer.length ? (t.footer.length - 1) * t.footerSpacing : 0, e.font = i.fontString(t.titleFontSize, t._titleFontStyle, t._titleFontFamily), i.each(t.title, function (t) { a.width = Math.max(a.width, e.measureText(t).width) }), e.font = i.fontString(t.bodyFontSize, t._bodyFontStyle, t._bodyFontFamily), i.each(t.beforeBody.concat(t.afterBody), function (t) {
                    a.width = Math.max(a.width, e.measureText(t).width);
                    }), i.each(t.body, function (i) { a.width = Math.max(a.width, e.measureText(i).width + ("single" !== this._options.tooltips.mode ? t.bodyFontSize + 2 : 0)) }, this), e.font = i.fontString(t.footerFontSize, t._footerFontStyle, t._footerFontFamily), i.each(t.footer, function (t) { a.width = Math.max(a.width, e.measureText(t).width) }), a.width += 2 * t.xPadding, a
                }, determineAlignment: function (t) { this._model.y < t.height ? this._model.yAlign = "top" : this._model.y > this._chart.height - t.height && (this._model.yAlign = "bottom"); var e, i, a, o, s, n = this, r = (this._chartInstance.chartArea.left + this._chartInstance.chartArea.right) / 2, h = (this._chartInstance.chartArea.top + this._chartInstance.chartArea.bottom) / 2; "center" === this._model.yAlign ? (e = function (t) { return r >= t }, i = function (t) { return t > r }) : (e = function (e) { return e <= t.width / 2 }, i = function (e) { return e >= n._chart.width - t.width / 2 }), a = function (e) { return e + t.width > n._chart.width }, o = function (e) { return e - t.width < 0 }, s = function (t) { return h >= t ? "top" : "bottom" }, e(this._model.x) ? (this._model.xAlign = "left", a(this._model.x) && (this._model.xAlign = "center", this._model.yAlign = s(this._model.y))) : i(this._model.x) && (this._model.xAlign = "right", o(this._model.x) && (this._model.xAlign = "center", this._model.yAlign = s(this._model.y))) }, getBackgroundPoint: function (t, e) { var i = { x: t.x, y: t.y }; return "right" === t.xAlign ? i.x -= e.width : "center" === t.xAlign && (i.x -= e.width / 2), "top" === t.yAlign ? i.y += t.caretPadding + t.caretSize : "bottom" === t.yAlign ? i.y -= e.height + t.caretPadding + t.caretSize : i.y -= e.height / 2, "center" === t.yAlign ? "left" === t.xAlign ? i.x += t.caretPadding + t.caretSize : "right" === t.xAlign && (i.x -= t.caretPadding + t.caretSize) : "left" === t.xAlign ? i.x -= t.cornerRadius + t.caretPadding : "right" === t.xAlign && (i.x += t.cornerRadius + t.caretPadding), i }, drawCaret: function (t, e, a, o) { var s, n, r, h, l, c, d = this._view, u = this._chart.ctx; "center" === d.yAlign ? ("left" === d.xAlign ? (s = t.x, n = s - d.caretSize, r = s) : (s = t.x + e.width, n = s + d.caretSize, r = s), l = t.y + e.height / 2, h = l - d.caretSize, c = l + d.caretSize) : ("left" === d.xAlign ? (s = t.x + d.cornerRadius, n = s + d.caretSize, r = n + d.caretSize) : "right" === d.xAlign ? (s = t.x + e.width - d.cornerRadius, n = s - d.caretSize, r = n - d.caretSize) : (n = t.x + e.width / 2, s = n - d.caretSize, r = n + d.caretSize), "top" === d.yAlign ? (h = t.y, l = h - d.caretSize, c = h) : (h = t.y + e.height, l = h + d.caretSize, c = h)); var g = i.color(d.backgroundColor); u.fillStyle = g.alpha(a * g.alpha()).rgbString(), u.beginPath(), u.moveTo(s, h), u.lineTo(n, l), u.lineTo(r, c), u.closePath(), u.fill() }, drawTitle: function (t, e, a, o) { if (e.title.length) { a.textAlign = e._titleAlign, a.textBaseline = "top"; var s = i.color(e.titleColor); a.fillStyle = s.alpha(o * s.alpha()).rgbString(), a.font = i.fontString(e.titleFontSize, e._titleFontStyle, e._titleFontFamily), i.each(e.title, function (i, o) { a.fillText(i, t.x, t.y), t.y += e.titleFontSize + e.titleSpacing, o + 1 === e.title.length && (t.y += e.titleMarginBottom - e.titleSpacing) }) } }, drawBody: function (t, e, a, o) { a.textAlign = e._bodyAlign, a.textBaseline = "top"; var s = i.color(e.bodyColor); a.fillStyle = s.alpha(o * s.alpha()).rgbString(), a.font = i.fontString(e.bodyFontSize, e._bodyFontStyle, e._bodyFontFamily), i.each(e.beforeBody, function (i) { a.fillText(i, t.x, t.y), t.y += e.bodyFontSize + e.bodySpacing }), i.each(e.body, function (s, n) { "single" !== this._options.tooltips.mode && (a.fillStyle = i.color(e.legendColorBackground).alpha(o).rgbaString(), a.fillRect(t.x, t.y, e.bodyFontSize, e.bodyFontSize), a.strokeStyle = i.color(e.labelColors[n].borderColor).alpha(o).rgbaString(), a.strokeRect(t.x, t.y, e.bodyFontSize, e.bodyFontSize), a.fillStyle = i.color(e.labelColors[n].backgroundColor).alpha(o).rgbaString(), a.fillRect(t.x + 1, t.y + 1, e.bodyFontSize - 2, e.bodyFontSize - 2), a.fillStyle = i.color(e.bodyColor).alpha(o).rgbaString()), a.fillText(s, t.x + ("single" !== this._options.tooltips.mode ? e.bodyFontSize + 2 : 0), t.y), t.y += e.bodyFontSize + e.bodySpacing }, this), i.each(e.afterBody, function (i) { a.fillText(i, t.x, t.y), t.y += e.bodyFontSize }), t.y -= e.bodySpacing }, drawFooter: function (t, e, a, o) { if (e.footer.length) { t.y += e.footerMarginTop, a.textAlign = e._footerAlign, a.textBaseline = "top"; var s = i.color(e.footerColor); a.fillStyle = s.alpha(o * s.alpha()).rgbString(), a.font = i.fontString(e.footerFontSize, e._footerFontStyle, e._footerFontFamily), i.each(e.footer, function (i) { a.fillText(i, t.x, t.y), t.y += e.footerFontSize + e.footerSpacing }) } }, draw: function () { var t = this._chart.ctx, e = this._view; if (0 !== e.opacity) { var a = e.caretPadding, o = this.getTooltipSize(e), s = { x: e.x, y: e.y }, n = Math.abs(e.opacity < .001) ? 0 : e.opacity; if (this._options.tooltips.enabled) { var r = i.color(e.backgroundColor); t.fillStyle = r.alpha(n * r.alpha()).rgbString(), i.drawRoundedRectangle(t, s.x, s.y, o.width, o.height, e.cornerRadius), t.fill(), this.drawCaret(s, o, n, a), s.x += e.xPadding, s.y += e.yPadding, this.drawTitle(s, e, t, n), this.drawBody(s, e, t, n), this.drawFooter(s, e, t, n) } } }
            })
        }
    }, {}], 34: [function (t, e, i) { "use strict"; e.exports = function (t, e) { var i = t.helpers, a = t.defaults.global; a.elements.arc = { backgroundColor: a.defaultColor, borderColor: "#fff", borderWidth: 2 }, t.elements.Arc = t.Element.extend({ inLabelRange: function (t) { var e = this._view; return e ? Math.pow(t - e.x, 2) < Math.pow(e.radius + e.hoverRadius, 2) : !1 }, inRange: function (t, e) { var a = this._view; if (a) { for (var o = i.getAngleFromPoint(a, { x: t, y: e }), s = o.angle, n = o.distance, r = a.startAngle, h = a.endAngle; r > h;)h += 2 * Math.PI; for (; s > h;)s -= 2 * Math.PI; for (; r > s;)s += 2 * Math.PI; var l = s >= r && h >= s, c = n >= a.innerRadius && n <= a.outerRadius; return l && c } return !1 }, tooltipPosition: function () { var t = this._view, e = t.startAngle + (t.endAngle - t.startAngle) / 2, i = (t.outerRadius - t.innerRadius) / 2 + t.innerRadius; return { x: t.x + Math.cos(e) * i, y: t.y + Math.sin(e) * i } }, draw: function () { var t = this._chart.ctx, e = this._view, i = e.startAngle, a = e.endAngle; t.beginPath(), t.arc(e.x, e.y, e.outerRadius, i, a), t.arc(e.x, e.y, e.innerRadius, a, i, !0), t.closePath(), t.strokeStyle = e.borderColor, t.lineWidth = e.borderWidth, t.fillStyle = e.backgroundColor, t.fill(), t.lineJoin = "bevel", e.borderWidth && t.stroke() } }) } }, {}], 35: [function (t, e, i) { "use strict"; e.exports = function (t) { var e = t.helpers; t.defaults.global.elements.line = { tension: .4, backgroundColor: t.defaults.global.defaultColor, borderWidth: 3, borderColor: t.defaults.global.defaultColor, borderCapStyle: "butt", borderDash: [], borderDashOffset: 0, borderJoinStyle: "miter", fill: !0 }, t.elements.Line = t.Element.extend({ lineToNextPoint: function (t, e, i, a, o) { var s = this._chart.ctx; e._view.skip ? a.call(this, t, e, i) : t._view.skip ? o.call(this, t, e, i) : 0 === e._view.tension ? s.lineTo(e._view.x, e._view.y) : s.bezierCurveTo(t._view.controlPointNextX, t._view.controlPointNextY, e._view.controlPointPreviousX, e._view.controlPointPreviousY, e._view.x, e._view.y) }, draw: function () { function i(t) { n._view.skip || r._view.skip ? t && s.lineTo(a._view.scaleZero.x, a._view.scaleZero.y) : s.bezierCurveTo(r._view.controlPointNextX, r._view.controlPointNextY, n._view.controlPointPreviousX, n._view.controlPointPreviousY, n._view.x, n._view.y) } var a = this, o = this._view, s = this._chart.ctx, n = this._children[0], r = this._children[this._children.length - 1]; s.save(), this._children.length > 0 && o.fill && (s.beginPath(), e.each(this._children, function (t, i) { var a = e.previousItem(this._children, i), n = e.nextItem(this._children, i); 0 === i ? (this._loop ? s.moveTo(o.scaleZero.x, o.scaleZero.y) : s.moveTo(t._view.x, o.scaleZero), t._view.skip ? this._loop || s.moveTo(n._view.x, this._view.scaleZero) : s.lineTo(t._view.x, t._view.y)) : this.lineToNextPoint(a, t, n, function (t, e, i) { this._loop ? s.lineTo(this._view.scaleZero.x, this._view.scaleZero.y) : (s.lineTo(t._view.x, this._view.scaleZero), s.moveTo(i._view.x, this._view.scaleZero)) }, function (t, e) { s.lineTo(e._view.x, e._view.y) }) }, this), this._loop ? i(!0) : (s.lineTo(this._children[this._children.length - 1]._view.x, o.scaleZero), s.lineTo(this._children[0]._view.x, o.scaleZero)), s.fillStyle = o.backgroundColor || t.defaults.global.defaultColor, s.closePath(), s.fill()), s.lineCap = o.borderCapStyle || t.defaults.global.elements.line.borderCapStyle, s.setLineDash && s.setLineDash(o.borderDash || t.defaults.global.elements.line.borderDash), s.lineDashOffset = o.borderDashOffset || t.defaults.global.elements.line.borderDashOffset, s.lineJoin = o.borderJoinStyle || t.defaults.global.elements.line.borderJoinStyle, s.lineWidth = o.borderWidth || t.defaults.global.elements.line.borderWidth, s.strokeStyle = o.borderColor || t.defaults.global.defaultColor, s.beginPath(), e.each(this._children, function (t, i) { var a = e.previousItem(this._children, i), o = e.nextItem(this._children, i); 0 === i ? s.moveTo(t._view.x, t._view.y) : this.lineToNextPoint(a, t, o, function (t, e, i) { s.moveTo(i._view.x, i._view.y) }, function (t, e) { s.moveTo(e._view.x, e._view.y) }) }, this), this._loop && this._children.length > 0 && i(), s.stroke(), s.restore() } }) } }, {}], 36: [function (t, e, i) { "use strict"; e.exports = function (t) { var e = t.helpers, i = t.defaults.global; i.elements.point = { radius: 3, pointStyle: "circle", backgroundColor: i.defaultColor, borderWidth: 1, borderColor: i.defaultColor, hitRadius: 1, hoverRadius: 4, hoverBorderWidth: 1 }, t.elements.Point = t.Element.extend({ inRange: function (t, e) { var i = this._view; return i ? Math.pow(t - i.x, 2) + Math.pow(e - i.y, 2) < Math.pow(i.hitRadius + i.radius, 2) : !1 }, inLabelRange: function (t) { var e = this._view; return e ? Math.pow(t - e.x, 2) < Math.pow(e.radius + e.hitRadius, 2) : !1 }, tooltipPosition: function () { var t = this._view; return { x: t.x, y: t.y, padding: t.radius + t.borderWidth } }, draw: function () { var i = this._view, a = i.x, o = i.y, s = this._chart.ctx; if (!i.skip) { var n = i.pointStyle; if ("object" == typeof n && ("[object HTMLImageElement]" === n.toString() || "[object HTMLCanvasElement]" === n.toString())) return void s.drawImage(n, a - n.width / 2, o - n.height / 2); if (!isNaN(i.radius) && i.radius > 0) { s.strokeStyle = i.borderColor || t.defaults.global.defaultColor, s.lineWidth = e.getValueOrDefault(i.borderWidth, t.defaults.global.elements.point.borderWidth), s.fillStyle = i.backgroundColor || t.defaults.global.defaultColor; var r, h, l = i.radius; switch (n) { default: s.beginPath(), s.arc(a, o, l, 0, 2 * Math.PI), s.closePath(), s.fill(); break; case "triangle": s.beginPath(); var c = 3 * l / Math.sqrt(3), d = c * Math.sqrt(3) / 2; s.moveTo(a - c / 2, o + d / 3), s.lineTo(a + c / 2, o + d / 3), s.lineTo(a, o - 2 * d / 3), s.closePath(), s.fill(); break; case "rect": s.fillRect(a - 1 / Math.SQRT2 * l, o - 1 / Math.SQRT2 * l, 2 / Math.SQRT2 * l, 2 / Math.SQRT2 * l), s.strokeRect(a - 1 / Math.SQRT2 * l, o - 1 / Math.SQRT2 * l, 2 / Math.SQRT2 * l, 2 / Math.SQRT2 * l); break; case "rectRot": s.translate(a, o), s.rotate(Math.PI / 4), s.fillRect(-1 / Math.SQRT2 * l, -1 / Math.SQRT2 * l, 2 / Math.SQRT2 * l, 2 / Math.SQRT2 * l), s.strokeRect(-1 / Math.SQRT2 * l, -1 / Math.SQRT2 * l, 2 / Math.SQRT2 * l, 2 / Math.SQRT2 * l), s.setTransform(1, 0, 0, 1, 0, 0); break; case "cross": s.beginPath(), s.moveTo(a, o + l), s.lineTo(a, o - l), s.moveTo(a - l, o), s.lineTo(a + l, o), s.closePath(); break; case "crossRot": s.beginPath(), r = Math.cos(Math.PI / 4) * l, h = Math.sin(Math.PI / 4) * l, s.moveTo(a - r, o - h), s.lineTo(a + r, o + h), s.moveTo(a - r, o + h), s.lineTo(a + r, o - h), s.closePath(); break; case "star": s.beginPath(), s.moveTo(a, o + l), s.lineTo(a, o - l), s.moveTo(a - l, o), s.lineTo(a + l, o), r = Math.cos(Math.PI / 4) * l, h = Math.sin(Math.PI / 4) * l, s.moveTo(a - r, o - h), s.lineTo(a + r, o + h), s.moveTo(a - r, o + h), s.lineTo(a + r, o - h), s.closePath(); break; case "line": s.beginPath(), s.moveTo(a - l, o), s.lineTo(a + l, o), s.closePath(); break; case "dash": s.beginPath(), s.moveTo(a, o), s.lineTo(a + l, o), s.closePath() }s.stroke() } } } }) } }, {}], 37: [function (t, e, i) { "use strict"; e.exports = function (t) { var e = (t.helpers, t.defaults.global); e.elements.rectangle = { backgroundColor: e.defaultColor, borderWidth: 0, borderColor: e.defaultColor, borderSkipped: "bottom" }, t.elements.Rectangle = t.Element.extend({ draw: function () { function t(t) { return h[(c + t) % 4] } var e = this._chart.ctx, i = this._view, a = i.width / 2, o = i.x - a, s = i.x + a, n = i.base - (i.base - i.y), r = i.borderWidth / 2; i.borderWidth && (o += r, s -= r, n += r), e.beginPath(), e.fillStyle = i.backgroundColor, e.strokeStyle = i.borderColor, e.lineWidth = i.borderWidth; var h = [[o, i.base], [o, n], [s, n], [s, i.base]], l = ["bottom", "left", "top", "right"], c = l.indexOf(i.borderSkipped, 0); -1 === c && (c = 0), e.moveTo.apply(e, t(0)); for (var d = 1; 4 > d; d++)e.lineTo.apply(e, t(d)); e.fill(), i.borderWidth && e.stroke() }, height: function () { var t = this._view; return t.base - t.y }, inRange: function (t, e) { var i = this._view; return i ? i.y < i.base ? t >= i.x - i.width / 2 && t <= i.x + i.width / 2 && e >= i.y && e <= i.base : t >= i.x - i.width / 2 && t <= i.x + i.width / 2 && e >= i.base && e <= i.y : !1 }, inLabelRange: function (t) { var e = this._view; return e ? t >= e.x - e.width / 2 && t <= e.x + e.width / 2 : !1 }, tooltipPosition: function () { var t = this._view; return { x: t.x, y: t.y } } }) } }, {}], 38: [function (t, e, i) { "use strict"; e.exports = function (t) { var e = t.helpers, i = { position: "bottom" }, a = t.Scale.extend({ determineDataLimits: function () { this.minIndex = 0, this.maxIndex = this.chart.data.labels.length - 1; var t; void 0 !== this.options.ticks.min && (t = e.indexOf(this.chart.data.labels, this.options.ticks.min), this.minIndex = -1 !== t ? t : this.minIndex), void 0 !== this.options.ticks.max && (t = e.indexOf(this.chart.data.labels, this.options.ticks.max), this.maxIndex = -1 !== t ? t : this.maxIndex), this.min = this.chart.data.labels[this.minIndex], this.max = this.chart.data.labels[this.maxIndex] }, buildTicks: function (t) { this.ticks = 0 === this.minIndex && this.maxIndex === this.chart.data.labels.length - 1 ? this.chart.data.labels : this.chart.data.labels.slice(this.minIndex, this.maxIndex + 1) }, getLabelForIndex: function (t, e) { return this.ticks[t] }, getPixelForValue: function (t, e, i, a) { var o = Math.max(this.maxIndex + 1 - this.minIndex - (this.options.gridLines.offsetGridLines ? 0 : 1), 1); if (this.isHorizontal()) { var s = this.width - (this.paddingLeft + this.paddingRight), n = s / o, r = n * (e - this.minIndex) + this.paddingLeft; return this.options.gridLines.offsetGridLines && a && (r += n / 2), this.left + Math.round(r) } var h = this.height - (this.paddingTop + this.paddingBottom), l = h / o, c = l * (e - this.minIndex) + this.paddingTop; return this.options.gridLines.offsetGridLines && a && (c += l / 2), this.top + Math.round(c) }, getPixelForTick: function (t, e) { return this.getPixelForValue(this.ticks[t], t + this.minIndex, null, e) }, getValueForPixel: function (t) { var e, i = Math.max(this.ticks.length - (this.options.gridLines.offsetGridLines ? 0 : 1), 1), a = this.isHorizontal(), o = a ? this.width - (this.paddingLeft + this.paddingRight) : this.height - (this.paddingTop + this.paddingBottom), s = o / i; return this.options.gridLines.offsetGridLines && (t -= s / 2), t -= a ? this.paddingLeft : this.paddingTop, e = 0 >= t ? 0 : Math.round(t / s) } }); t.scaleService.registerScaleType("category", a, i) } }, {}], 39: [function (t, e, i) { "use strict"; e.exports = function (t) { var e = t.helpers, i = { position: "left", ticks: { callback: function (t, i, a) { var o = a.length > 3 ? a[2] - a[1] : a[1] - a[0]; Math.abs(o) > 1 && t !== Math.floor(t) && (o = t - Math.floor(t)); var s = e.log10(Math.abs(o)), n = ""; if (0 !== t) { var r = -1 * Math.floor(s); r = Math.max(Math.min(r, 20), 0), n = t.toFixed(r) } else n = "0"; return n } } }, a = t.Scale.extend({ determineDataLimits: function () { if (this.min = null, this.max = null, this.options.stacked) { var t = {}, i = !1, a = !1; e.each(this.chart.data.datasets, function (o, s) { var n = this.chart.getDatasetMeta(s); void 0 === t[n.type] && (t[n.type] = { positiveValues: [], negativeValues: [] }); var r = t[n.type].positiveValues, h = t[n.type].negativeValues; this.chart.isDatasetVisible(s) && (this.isHorizontal() ? n.xAxisID === this.id : n.yAxisID === this.id) && e.each(o.data, function (t, e) { var o = +this.getRightValue(t); isNaN(o) || n.data[e].hidden || (r[e] = r[e] || 0, h[e] = h[e] || 0, this.options.relativePoints ? r[e] = 100 : 0 > o ? (a = !0, h[e] += o) : (i = !0, r[e] += o)) }, this) }, this), e.each(t, function (t) { var i = t.positiveValues.concat(t.negativeValues), a = e.min(i), o = e.max(i); this.min = null === this.min ? a : Math.min(this.min, a), this.max = null === this.max ? o : Math.max(this.max, o) }, this) } else e.each(this.chart.data.datasets, function (t, i) { var a = this.chart.getDatasetMeta(i); this.chart.isDatasetVisible(i) && (this.isHorizontal() ? a.xAxisID === this.id : a.yAxisID === this.id) && e.each(t.data, function (t, e) { var i = +this.getRightValue(t); isNaN(i) || a.data[e].hidden || (null === this.min ? this.min = i : i < this.min && (this.min = i), null === this.max ? this.max = i : i > this.max && (this.max = i)) }, this) }, this); if (this.options.ticks.beginAtZero) { var o = e.sign(this.min), s = e.sign(this.max); 0 > o && 0 > s ? this.max = 0 : o > 0 && s > 0 && (this.min = 0) } void 0 !== this.options.ticks.min ? this.min = this.options.ticks.min : void 0 !== this.options.ticks.suggestedMin && (this.min = Math.min(this.min, this.options.ticks.suggestedMin)), void 0 !== this.options.ticks.max ? this.max = this.options.ticks.max : void 0 !== this.options.ticks.suggestedMax && (this.max = Math.max(this.max, this.options.ticks.suggestedMax)), this.min === this.max && (this.max++ , this.options.ticks.beginAtZero || this.min--) }, buildTicks: function () { this.ticks = []; var i; if (this.isHorizontal()) i = Math.min(this.options.ticks.maxTicksLimit ? this.options.ticks.maxTicksLimit : 11, Math.ceil(this.width / 50)); else { var a = e.getValueOrDefault(this.options.ticks.fontSize, t.defaults.global.defaultFontSize); i = Math.min(this.options.ticks.maxTicksLimit ? this.options.ticks.maxTicksLimit : 11, Math.ceil(this.height / (2 * a))) } i = Math.max(2, i); var o, s = this.options.ticks.fixedStepSize && this.options.ticks.fixedStepSize > 0 || this.options.ticks.stepSize && this.options.ticks.stepSize > 0; if (s) o = e.getValueOrDefault(this.options.ticks.fixedStepSize, this.options.ticks.stepSize); else { var n = e.niceNum(this.max - this.min, !1); o = e.niceNum(n / (i - 1), !0) } var r = Math.floor(this.min / o) * o, h = Math.ceil(this.max / o) * o, l = (h - r) / o; l = e.almostEquals(l, Math.round(l), o / 1e3) ? Math.round(l) : Math.ceil(l), this.ticks.push(void 0 !== this.options.ticks.min ? this.options.ticks.min : r); for (var c = 1; l > c; ++c)this.ticks.push(r + c * o); this.ticks.push(void 0 !== this.options.ticks.max ? this.options.ticks.max : h), ("left" === this.options.position || "right" === this.options.position) && this.ticks.reverse(), this.max = e.max(this.ticks), this.min = e.min(this.ticks), this.options.ticks.reverse ? (this.ticks.reverse(), this.start = this.max, this.end = this.min) : (this.start = this.min, this.end = this.max) }, getLabelForIndex: function (t, e) { return +this.getRightValue(this.chart.data.datasets[e].data[t]) }, convertTicksToLabels: function () { this.ticksAsNumbers = this.ticks.slice(), this.zeroLineIndex = this.ticks.indexOf(0), t.Scale.prototype.convertTicksToLabels.call(this) }, getPixelForValue: function (t, e, i, a) { var o, s = +this.getRightValue(t), n = this.end - this.start; if (this.isHorizontal()) { var r = this.width - (this.paddingLeft + this.paddingRight); return o = this.left + r / n * (s - this.start), Math.round(o + this.paddingLeft) } var h = this.height - (this.paddingTop + this.paddingBottom); return o = this.bottom - this.paddingBottom - h / n * (s - this.start), Math.round(o) }, getValueForPixel: function (t) { var e; if (this.isHorizontal()) { var i = this.width - (this.paddingLeft + this.paddingRight); e = (t - this.left - this.paddingLeft) / i } else { var a = this.height - (this.paddingTop + this.paddingBottom); e = (this.bottom - this.paddingBottom - t) / a } return this.start + (this.end - this.start) * e }, getPixelForTick: function (t, e) { return this.getPixelForValue(this.ticksAsNumbers[t], null, null, e) } }); t.scaleService.registerScaleType("linear", a, i) } }, {}], 40: [function (t, e, i) { "use strict"; e.exports = function (t) { var e = t.helpers, i = { position: "left", ticks: { callback: function (e, i, a) { var o = e / Math.pow(10, Math.floor(t.helpers.log10(e))); return 1 === o || 2 === o || 5 === o || 0 === i || i === a.length - 1 ? e.toExponential() : "" } } }, a = t.Scale.extend({ determineDataLimits: function () { if (this.min = null, this.max = null, this.options.stacked) { var t = {}; e.each(this.chart.data.datasets, function (i, a) { var o = this.chart.getDatasetMeta(a); this.chart.isDatasetVisible(a) && (this.isHorizontal() ? o.xAxisID === this.id : o.yAxisID === this.id) && (void 0 === t[o.type] && (t[o.type] = []), e.each(i.data, function (e, i) { var a = t[o.type], s = +this.getRightValue(e); isNaN(s) || o.data[i].hidden || (a[i] = a[i] || 0, this.options.relativePoints ? a[i] = 100 : a[i] += s) }, this)) }, this), e.each(t, function (t) { var i = e.min(t), a = e.max(t); this.min = null === this.min ? i : Math.min(this.min, i), this.max = null === this.max ? a : Math.max(this.max, a) }, this) } else e.each(this.chart.data.datasets, function (t, i) { var a = this.chart.getDatasetMeta(i); this.chart.isDatasetVisible(i) && (this.isHorizontal() ? a.xAxisID === this.id : a.yAxisID === this.id) && e.each(t.data, function (t, e) { var i = +this.getRightValue(t); isNaN(i) || a.data[e].hidden || (null === this.min ? this.min = i : i < this.min && (this.min = i), null === this.max ? this.max = i : i > this.max && (this.max = i)) }, this) }, this); this.min = void 0 !== this.options.ticks.min ? this.options.ticks.min : this.min, this.max = void 0 !== this.options.ticks.max ? this.options.ticks.max : this.max, this.min === this.max && (0 !== this.min && null !== this.min ? (this.min = Math.pow(10, Math.floor(e.log10(this.min)) - 1), this.max = Math.pow(10, Math.floor(e.log10(this.max)) + 1)) : (this.min = 1, this.max = 10)) }, buildTicks: function () { this.ticks = []; for (var t = void 0 !== this.options.ticks.min ? this.options.ticks.min : Math.pow(10, Math.floor(e.log10(this.min))); t < this.max;) { this.ticks.push(t); var i = Math.floor(e.log10(t)), a = Math.floor(t / Math.pow(10, i)) + 1; 10 === a && (a = 1, ++i), t = a * Math.pow(10, i) } var o = void 0 !== this.options.ticks.max ? this.options.ticks.max : t; this.ticks.push(o), ("left" === this.options.position || "right" === this.options.position) && this.ticks.reverse(), this.max = e.max(this.ticks), this.min = e.min(this.ticks), this.options.ticks.reverse ? (this.ticks.reverse(), this.start = this.max, this.end = this.min) : (this.start = this.min, this.end = this.max) }, convertTicksToLabels: function () { this.tickValues = this.ticks.slice(), t.Scale.prototype.convertTicksToLabels.call(this) }, getLabelForIndex: function (t, e) { return +this.getRightValue(this.chart.data.datasets[e].data[t]) }, getPixelForTick: function (t, e) { return this.getPixelForValue(this.tickValues[t], null, null, e) }, getPixelForValue: function (t, i, a, o) { var s, n = +this.getRightValue(t), r = e.log10(this.end) - e.log10(this.start); if (this.isHorizontal()) if (0 === n) s = this.left + this.paddingLeft; else { var h = this.width - (this.paddingLeft + this.paddingRight); s = this.left + h / r * (e.log10(n) - e.log10(this.start)), s += this.paddingLeft } else if (0 === n) s = this.top + this.paddingTop; else { var l = this.height - (this.paddingTop + this.paddingBottom); s = this.bottom - this.paddingBottom - l / r * (e.log10(n) - e.log10(this.start)) } return s }, getValueForPixel: function (t) { var i, a = e.log10(this.end) - e.log10(this.start); if (this.isHorizontal()) { var o = this.width - (this.paddingLeft + this.paddingRight); i = this.start * Math.pow(10, (t - this.left - this.paddingLeft) * a / o) } else { var s = this.height - (this.paddingTop + this.paddingBottom); i = Math.pow(10, (this.bottom - this.paddingBottom - t) * a / s) / this.start } return i } }); t.scaleService.registerScaleType("logarithmic", a, i) } }, {}], 41: [function (t, e, i) { "use strict"; e.exports = function (t) { var e = t.helpers, i = { display: !0, animate: !0, lineArc: !1, position: "chartArea", angleLines: { display: !0, color: "rgba(0, 0, 0, 0.1)", lineWidth: 1 }, ticks: { showLabelBackdrop: !0, backdropColor: "rgba(255,255,255,0.75)", backdropPaddingY: 2, backdropPaddingX: 2 }, pointLabels: { fontSize: 10, callback: function (t) { return t } } }, a = t.Scale.extend({ getValueCount: function () { return this.chart.data.labels.length }, setDimensions: function () { this.width = this.maxWidth, this.height = this.maxHeight, this.xCenter = Math.round(this.width / 2), this.yCenter = Math.round(this.height / 2); var i = e.min([this.height, this.width]), a = e.getValueOrDefault(this.options.ticks.fontSize, t.defaults.global.defaultFontSize); this.drawingArea = this.options.display ? i / 2 - (a / 2 + this.options.ticks.backdropPaddingY) : i / 2 }, determineDataLimits: function () { if (this.min = null, this.max = null, e.each(this.chart.data.datasets, function (t, i) { if (this.chart.isDatasetVisible(i)) { var a = this.chart.getDatasetMeta(i); e.each(t.data, function (t, e) { var i = +this.getRightValue(t); isNaN(i) || a.data[e].hidden || (null === this.min ? this.min = i : i < this.min && (this.min = i), null === this.max ? this.max = i : i > this.max && (this.max = i)) }, this) } }, this), this.options.ticks.beginAtZero) { var t = e.sign(this.min), i = e.sign(this.max); 0 > t && 0 > i ? this.max = 0 : t > 0 && i > 0 && (this.min = 0) } void 0 !== this.options.ticks.min ? this.min = this.options.ticks.min : void 0 !== this.options.ticks.suggestedMin && (this.min = Math.min(this.min, this.options.ticks.suggestedMin)), void 0 !== this.options.ticks.max ? this.max = this.options.ticks.max : void 0 !== this.options.ticks.suggestedMax && (this.max = Math.max(this.max, this.options.ticks.suggestedMax)), this.min === this.max && (this.min-- , this.max++) }, buildTicks: function () { this.ticks = []; var i = e.getValueOrDefault(this.options.ticks.fontSize, t.defaults.global.defaultFontSize), a = Math.min(this.options.ticks.maxTicksLimit ? this.options.ticks.maxTicksLimit : 11, Math.ceil(this.drawingArea / (1.5 * i))); a = Math.max(2, a); var o = e.niceNum(this.max - this.min, !1), s = e.niceNum(o / (a - 1), !0), n = Math.floor(this.min / s) * s, r = Math.ceil(this.max / s) * s, h = Math.ceil((r - n) / s); this.ticks.push(void 0 !== this.options.ticks.min ? this.options.ticks.min : n); for (var l = 1; h > l; ++l)this.ticks.push(n + l * s); this.ticks.push(void 0 !== this.options.ticks.max ? this.options.ticks.max : r), this.max = e.max(this.ticks), this.min = e.min(this.ticks), this.options.ticks.reverse ? (this.ticks.reverse(), this.start = this.max, this.end = this.min) : (this.start = this.min, this.end = this.max), this.zeroLineIndex = this.ticks.indexOf(0) }, convertTicksToLabels: function () { t.Scale.prototype.convertTicksToLabels.call(this), this.pointLabels = this.chart.data.labels.map(this.options.pointLabels.callback, this) }, getLabelForIndex: function (t, e) { return +this.getRightValue(this.chart.data.datasets[e].data[t]) }, fit: function () { var i, a, o, s, n, r, h, l, c, d, u, g, f = e.getValueOrDefault(this.options.pointLabels.fontSize, t.defaults.global.defaultFontSize), p = e.getValueOrDefault(this.options.pointLabels.fontStyle, t.defaults.global.defaultFontStyle), m = e.getValueOrDefault(this.options.pointLabels.fontFamily, t.defaults.global.defaultFontFamily), b = e.fontString(f, p, m), x = e.min([this.height / 2 - f - 5, this.width / 2]), v = this.width, y = 0; for (this.ctx.font = b, a = 0; a < this.getValueCount(); a++)i = this.getPointPosition(a, x), o = this.ctx.measureText(this.pointLabels[a] ? this.pointLabels[a] : "").width + 5, 0 === a || a === this.getValueCount() / 2 ? (s = o / 2, i.x + s > v && (v = i.x + s, n = a), i.x - s < y && (y = i.x - s, h = a)) : a < this.getValueCount() / 2 ? i.x + o > v && (v = i.x + o, n = a) : a > this.getValueCount() / 2 && i.x - o < y && (y = i.x - o, h = a); c = y, d = Math.ceil(v - this.width), r = this.getIndexAngle(n), l = this.getIndexAngle(h), u = d / Math.sin(r + Math.PI / 2), g = c / Math.sin(l + Math.PI / 2), u = e.isNumber(u) ? u : 0, g = e.isNumber(g) ? g : 0, this.drawingArea = Math.round(x - (g + u) / 2), this.setCenterPoint(g, u) }, setCenterPoint: function (t, e) { var i = this.width - e - this.drawingArea, a = t + this.drawingArea; this.xCenter = Math.round((a + i) / 2 + this.left), this.yCenter = Math.round(this.height / 2 + this.top) }, getIndexAngle: function (t) { var e = 2 * Math.PI / this.getValueCount(); return t * e - Math.PI / 2 }, getDistanceFromCenterForValue: function (t) { if (null === t) return 0; var e = this.drawingArea / (this.max - this.min); return this.options.reverse ? (this.max - t) * e : (t - this.min) * e }, getPointPosition: function (t, e) { var i = this.getIndexAngle(t); return { x: Math.round(Math.cos(i) * e) + this.xCenter, y: Math.round(Math.sin(i) * e) + this.yCenter } }, getPointPositionForValue: function (t, e) { return this.getPointPosition(t, this.getDistanceFromCenterForValue(e)) }, draw: function () { if (this.options.display) { var i = this.ctx; if (e.each(this.ticks, function (a, o) { if (o > 0 || this.options.reverse) { var s = this.getDistanceFromCenterForValue(this.ticks[o]), n = this.yCenter - s; if (this.options.gridLines.display) if (i.strokeStyle = this.options.gridLines.color, i.lineWidth = this.options.gridLines.lineWidth, this.options.lineArc) i.beginPath(), i.arc(this.xCenter, this.yCenter, s, 0, 2 * Math.PI), i.closePath(), i.stroke(); else { i.beginPath(); for (var r = 0; r < this.getValueCount(); r++) { var h = this.getPointPosition(r, this.getDistanceFromCenterForValue(this.ticks[o])); 0 === r ? i.moveTo(h.x, h.y) : i.lineTo(h.x, h.y) } i.closePath(), i.stroke() } if (this.options.ticks.display) { var l = e.getValueOrDefault(this.options.ticks.fontColor, t.defaults.global.defaultFontColor), c = e.getValueOrDefault(this.options.ticks.fontSize, t.defaults.global.defaultFontSize), d = e.getValueOrDefault(this.options.ticks.fontStyle, t.defaults.global.defaultFontStyle), u = e.getValueOrDefault(this.options.ticks.fontFamily, t.defaults.global.defaultFontFamily), g = e.fontString(c, d, u); if (i.font = g, this.options.ticks.showLabelBackdrop) { var f = i.measureText(a).width; i.fillStyle = this.options.ticks.backdropColor, i.fillRect(this.xCenter - f / 2 - this.options.ticks.backdropPaddingX, n - c / 2 - this.options.ticks.backdropPaddingY, f + 2 * this.options.ticks.backdropPaddingX, c + 2 * this.options.ticks.backdropPaddingY) } i.textAlign = "center", i.textBaseline = "middle", i.fillStyle = l, i.fillText(a, this.xCenter, n) } } }, this), !this.options.lineArc) { i.lineWidth = this.options.angleLines.lineWidth, i.strokeStyle = this.options.angleLines.color; for (var a = this.getValueCount() - 1; a >= 0; a--) { if (this.options.angleLines.display) { var o = this.getPointPosition(a, this.getDistanceFromCenterForValue(this.options.reverse ? this.min : this.max)); i.beginPath(), i.moveTo(this.xCenter, this.yCenter), i.lineTo(o.x, o.y), i.stroke(), i.closePath() } var s = this.getPointPosition(a, this.getDistanceFromCenterForValue(this.options.reverse ? this.min : this.max) + 5), n = e.getValueOrDefault(this.options.pointLabels.fontColor, t.defaults.global.defaultFontColor), r = e.getValueOrDefault(this.options.pointLabels.fontSize, t.defaults.global.defaultFontSize), h = e.getValueOrDefault(this.options.pointLabels.fontStyle, t.defaults.global.defaultFontStyle), l = e.getValueOrDefault(this.options.pointLabels.fontFamily, t.defaults.global.defaultFontFamily), c = e.fontString(r, h, l); i.font = c, i.fillStyle = n; var d = this.pointLabels.length, u = this.pointLabels.length / 2, g = u / 2, f = g > a || a > d - g, p = a === g || a === d - g; 0 === a ? i.textAlign = "center" : a === u ? i.textAlign = "center" : u > a ? i.textAlign = "left" : i.textAlign = "right", p ? i.textBaseline = "middle" : f ? i.textBaseline = "bottom" : i.textBaseline = "top", i.fillText(this.pointLabels[a] ? this.pointLabels[a] : "", s.x, s.y) } } } } }); t.scaleService.registerScaleType("radialLinear", a, i) } }, {}], 42: [function (t, e, i) {
        "use strict"; var a = t("moment"); a = "function" == typeof a ? a : window.moment, e.exports = function (t) {
            var e = t.helpers, i = { units: [{ name: "millisecond", steps: [1, 2, 5, 10, 20, 50, 100, 250, 500] }, { name: "second", steps: [1, 2, 5, 10, 30] }, { name: "minute", steps: [1, 2, 5, 10, 30] }, { name: "hour", steps: [1, 2, 3, 6, 12] }, { name: "day", steps: [1, 2, 5] }, { name: "week", maxStep: 4 }, { name: "month", maxStep: 3 }, { name: "quarter", maxStep: 4 }, { name: "year", maxStep: !1 }] }, o = { position: "bottom", time: { parser: !1, format: !1, unit: !1, round: !1, displayFormat: !1, isoWeekday: !1, displayFormats: { millisecond: "h:mm:ss.SSS a", second: "h:mm:ss a", minute: "h:mm:ss a", hour: "MMM D, hA", day: "ll", week: "ll", month: "MMM YYYY", quarter: "[Q]Q - YYYY", year: "YYYY" } }, ticks: { autoSkip: !1 } }, s = t.Scale.extend({
                initialize: function () { if (!a) throw new Error("Chart.js - Moment.js could not be found! You must include it before Chart.js to use the time scale. Download at https://momentjs.com"); t.Scale.prototype.initialize.call(this) }, getLabelMoment: function (t, e) { return this.labelMoments[t][e] }, getMomentStartOf: function (t) { return "week" === this.options.time.unit && this.options.time.isoWeekday !== !1 ? t.clone().startOf("isoWeek").isoWeekday(this.options.time.isoWeekday) : t.clone().startOf(this.tickUnit) }, determineDataLimits: function () { this.labelMoments = []; var t = []; this.chart.data.labels && this.chart.data.labels.length > 0 ? (e.each(this.chart.data.labels, function (e, i) { var a = this.parseTime(e); a.isValid() && (this.options.time.round && a.startOf(this.options.time.round), t.push(a)) }, this), this.firstTick = a.min.call(this, t), this.lastTick = a.max.call(this, t)) : (this.firstTick = null, this.lastTick = null), e.each(this.chart.data.datasets, function (i, o) { var s = [], n = this.chart.isDatasetVisible(o); "object" == typeof i.data[0] ? e.each(i.data, function (t, e) { var i = this.parseTime(this.getRightValue(t)); i.isValid() && (this.options.time.round && i.startOf(this.options.time.round), s.push(i), n && (this.firstTick = null !== this.firstTick ? a.min(this.firstTick, i) : i, this.lastTick = null !== this.lastTick ? a.max(this.lastTick, i) : i)) }, this) : s = t, this.labelMoments.push(s) }, this), this.options.time.min && (this.firstTick = this.parseTime(this.options.time.min)), this.options.time.max && (this.lastTick = this.parseTime(this.options.time.max)), this.firstTick = (this.firstTick || a()).clone(), this.lastTick = (this.lastTick || a()).clone() }, buildTicks: function (a) {
                    this.ctx.save(); var o = e.getValueOrDefault(this.options.ticks.fontSize, t.defaults.global.defaultFontSize), s = e.getValueOrDefault(this.options.ticks.fontStyle, t.defaults.global.defaultFontStyle), n = e.getValueOrDefault(this.options.ticks.fontFamily, t.defaults.global.defaultFontFamily), r = e.fontString(o, s, n); if (this.ctx.font = r, this.ticks = [], this.unitScale = 1, this.scaleSizeInUnits = 0, this.options.time.unit) this.tickUnit = this.options.time.unit || "day", this.displayFormat = this.options.time.displayFormats[this.tickUnit], this.scaleSizeInUnits = this.lastTick.diff(this.firstTick, this.tickUnit, !0), this.unitScale = e.getValueOrDefault(this.options.time.unitStepSize, 1); else {
                        var h = this.isHorizontal() ? this.width - (this.paddingLeft + this.paddingRight) : this.height - (this.paddingTop + this.paddingBottom), l = this.tickFormatFunction(this.firstTick, 0, []), c = this.ctx.measureText(l).width, d = Math.cos(e.toRadians(this.options.ticks.maxRotation)), u = Math.sin(e.toRadians(this.options.ticks.maxRotation));
                        c = c * d + o * u; var g = h / c; this.tickUnit = "millisecond", this.scaleSizeInUnits = this.lastTick.diff(this.firstTick, this.tickUnit, !0), this.displayFormat = this.options.time.displayFormats[this.tickUnit]; for (var f = 0, p = i.units[f]; f < i.units.length;) { if (this.unitScale = 1, e.isArray(p.steps) && Math.ceil(this.scaleSizeInUnits / g) < e.max(p.steps)) { for (var m = 0; m < p.steps.length; ++m)if (p.steps[m] >= Math.ceil(this.scaleSizeInUnits / g)) { this.unitScale = e.getValueOrDefault(this.options.time.unitStepSize, p.steps[m]); break } break } if (p.maxStep === !1 || Math.ceil(this.scaleSizeInUnits / g) < p.maxStep) { this.unitScale = e.getValueOrDefault(this.options.time.unitStepSize, Math.ceil(this.scaleSizeInUnits / g)); break } ++f, p = i.units[f], this.tickUnit = p.name; var b = this.firstTick.diff(this.getMomentStartOf(this.firstTick), this.tickUnit, !0), x = this.getMomentStartOf(this.lastTick.clone().add(1, this.tickUnit)).diff(this.lastTick, this.tickUnit, !0); this.scaleSizeInUnits = this.lastTick.diff(this.firstTick, this.tickUnit, !0) + b + x, this.displayFormat = this.options.time.displayFormats[p.name] }
                    } var v; if (this.options.time.min ? v = this.getMomentStartOf(this.firstTick) : (this.firstTick = this.getMomentStartOf(this.firstTick), v = this.firstTick), !this.options.time.max) { var y = this.getMomentStartOf(this.lastTick); 0 !== y.diff(this.lastTick, this.tickUnit, !0) && (this.lastTick = this.getMomentStartOf(this.lastTick.add(1, this.tickUnit))) } this.smallestLabelSeparation = this.width, e.each(this.chart.data.datasets, function (t, e) { for (var i = 1; i < this.labelMoments[e].length; i++)this.smallestLabelSeparation = Math.min(this.smallestLabelSeparation, this.labelMoments[e][i].diff(this.labelMoments[e][i - 1], this.tickUnit, !0)) }, this), this.options.time.displayFormat && (this.displayFormat = this.options.time.displayFormat), this.ticks.push(this.firstTick.clone()); for (var k = 1; k <= this.scaleSizeInUnits; ++k) { var S = v.clone().add(k, this.tickUnit); if (this.options.time.max && S.diff(this.lastTick, this.tickUnit, !0) >= 0) break; k % this.unitScale === 0 && this.ticks.push(S) } var C = this.ticks[this.ticks.length - 1].diff(this.lastTick, this.tickUnit); (0 !== C || 0 === this.scaleSizeInUnits) && (this.options.time.max ? (this.ticks.push(this.lastTick.clone()), this.scaleSizeInUnits = this.lastTick.diff(this.ticks[0], this.tickUnit, !0)) : (this.ticks.push(this.lastTick.clone()), this.scaleSizeInUnits = this.lastTick.diff(this.firstTick, this.tickUnit, !0))), this.ctx.restore()
                }, getLabelForIndex: function (t, e) { var i = this.chart.data.labels && t < this.chart.data.labels.length ? this.chart.data.labels[t] : ""; return "object" == typeof this.chart.data.datasets[e].data[0] && (i = this.getRightValue(this.chart.data.datasets[e].data[t])), this.options.time.tooltipFormat && (i = this.parseTime(i).format(this.options.time.tooltipFormat)), i }, tickFormatFunction: function (t, i, a) { var o = t.format(this.displayFormat), s = this.options.ticks, n = e.getValueOrDefault(s.callback, s.userCallback); return n ? n(o, i, a) : o }, convertTicksToLabels: function () { this.tickMoments = this.ticks, this.ticks = this.ticks.map(this.tickFormatFunction, this) }, getPixelForValue: function (t, e, i, a) { var o = t && t.isValid && t.isValid() ? t : this.getLabelMoment(i, e); if (o) { var s = o.diff(this.firstTick, this.tickUnit, !0), n = s / this.scaleSizeInUnits; if (this.isHorizontal()) { var r = this.width - (this.paddingLeft + this.paddingRight), h = (r / Math.max(this.ticks.length - 1, 1), r * n + this.paddingLeft); return this.left + Math.round(h) } var l = this.height - (this.paddingTop + this.paddingBottom), c = (l / Math.max(this.ticks.length - 1, 1), l * n + this.paddingTop); return this.top + Math.round(c) } }, getPixelForTick: function (t, e) { return this.getPixelForValue(this.tickMoments[t], null, null, e) }, getValueForPixel: function (t) { var e = this.isHorizontal() ? this.width - (this.paddingLeft + this.paddingRight) : this.height - (this.paddingTop + this.paddingBottom), i = (t - (this.isHorizontal() ? this.left + this.paddingLeft : this.top + this.paddingTop)) / e; return i *= this.scaleSizeInUnits, this.firstTick.clone().add(a.duration(i, this.tickUnit).asSeconds(), "seconds") }, parseTime: function (t) { return "string" == typeof this.options.time.parser ? a(t, this.options.time.parser) : "function" == typeof this.options.time.parser ? this.options.time.parser(t) : "function" == typeof t.getMonth || "number" == typeof t ? a(t) : t.isValid && t.isValid() ? t : "string" != typeof this.options.time.format && this.options.time.format.call ? (console.warn("options.time.format is deprecated and replaced by options.time.parser. See http://nnnick.github.io/Chart.js/docs-v2/#scales-time-scale"), this.options.time.format(t)) : a(t, this.options.time.format) }
            }); t.scaleService.registerScaleType("time", s, o)
        }
    }, { moment: 1 }]
}, {}, [7]);
/*!
 * Chart.Zoom.js
 * http://chartjs.org/
 * Version: 0.3.0
 *
 * Copyright 2016 Evert Timberg
 * Released under the MIT license
 * https://github.com/chartjs/Chart.Zoom.js/blob/master/LICENSE.md
 */
!function t(e, n, a) { function o(r, l) { if (!n[r]) { if (!e[r]) { var u = "function" == typeof require && require; if (!l && u) return u(r, !0); if (i) return i(r, !0); var m = new Error("Cannot find module '" + r + "'"); throw m.code = "MODULE_NOT_FOUND", m } var s = n[r] = { exports: {} }; e[r][0].call(s.exports, function (t) { var n = e[r][1][t]; return o(n ? n : t) }, s, s.exports, t, e, n, a) } return n[r].exports } for (var i = "function" == typeof require && require, r = 0; r < a.length; r++)o(a[r]); return o }({ 1: [function (t, e, n) { }, {}], 2: [function (t, e, n) { function a(t, e) { return void 0 === t || "string" == typeof t && t.indexOf(e) !== -1 } function o(t, e, n, a) { var o = t.chart.data.labels, i = t.minIndex, r = o.length - 1, l = t.maxIndex, u = a.sensitivity, m = t.isHorizontal() ? t.left + t.width / 2 : t.top + t.height / 2, s = t.isHorizontal() ? n.x : n.y; x.zoomCumulativeDelta = e > 1 ? x.zoomCumulativeDelta + 1 : x.zoomCumulativeDelta - 1, Math.abs(x.zoomCumulativeDelta) > u && (x.zoomCumulativeDelta < 0 ? (s <= m ? i <= 0 ? l = Math.min(r, l + 1) : i = Math.max(0, i - 1) : s > m && (l >= r ? i = Math.max(0, i - 1) : l = Math.min(r, l + 1)), x.zoomCumulativeDelta = 0) : x.zoomCumulativeDelta > 0 && (s <= m ? i = i < l ? i = Math.min(l, i + 1) : i : s > m && (l = l > i ? l = Math.max(i, l - 1) : l), x.zoomCumulativeDelta = 0), t.options.ticks.min = o[i], t.options.ticks.max = o[l]) } function i(t, e, n) { var a, o, i = t.options; t.isHorizontal() ? (a = t.right - t.left, o = (n.x - t.left) / a) : (a = t.bottom - t.top, o = (n.y - t.top) / a); var r = 1 - o, l = a * (e - 1), u = l * o, m = l * r; i.time.min = t.getValueForPixel(t.getPixelForValue(t.firstTick) + u), i.time.max = t.getValueForPixel(t.getPixelForValue(t.lastTick) - m) } function r(t, e, n) { var a = t.max - t.min, o = a * (e - 1), i = t.isHorizontal() ? n.x : n.y, r = (t.getValueForPixel(i) - t.min) / a, l = 1 - r, u = o * r, m = o * l; t.options.ticks.min = t.min + u, t.options.ticks.max = t.max - m } function l(t, e, n, a) { var o = z[t.options.type]; o && o(t, e, n, a) } function u(t, e, n) { var o = t.chartArea; n || (n = { x: (o.left + o.right) / 2, y: (o.top + o.bottom) / 2 }); var i = t.options.zoom; if (i && g.getValueOrDefault(i.enabled, F.zoom.enabled)) { var r = g.getValueOrDefault(t.options.zoom.mode, F.zoom.mode); i.sensitivity = g.getValueOrDefault(t.options.zoom.sensitivity, F.zoom.sensitivity), g.each(t.scales, function (t, o) { t.isHorizontal() && a(r, "x") ? l(t, e, n, i) : !t.isHorizontal() && a(r, "y") && l(t, e, n, i) }), t.update(0) } } function m(t, e, n) { var a, o = t.chart.data.labels, i = o.length - 1, r = Math.max(t.ticks.length - (t.options.gridLines.offsetGridLines ? 0 : 1), 1), l = n.speed, u = t.minIndex, m = Math.round(t.width / (r * l)); x.panCumulativeDelta += e, u = x.panCumulativeDelta > m ? Math.max(0, u - 1) : x.panCumulativeDelta < -m ? Math.min(i - r + 1, u + 1) : u, x.panCumulativeDelta = u !== t.minIndex ? 0 : x.panCumulativeDelta, a = Math.min(i, u + r - 1), t.options.ticks.min = o[u], t.options.ticks.max = o[a] } function s(t, e) { var n = t.options; n.time.min = t.getValueForPixel(t.getPixelForValue(t.firstTick) - e), n.time.max = t.getValueForPixel(t.getPixelForValue(t.lastTick) - e) } function c(t, e) { var n = t.options.ticks, a = t.start, o = t.end; n.reverse ? (n.max = t.getValueForPixel(t.getPixelForValue(a) - e), n.min = t.getValueForPixel(t.getPixelForValue(o) - e)) : (n.min = t.getValueForPixel(t.getPixelForValue(a) - e), n.max = t.getValueForPixel(t.getPixelForValue(o) - e)) } function d(t, e, n) { var a = D[t.options.type]; a && a(t, e, n) } function p(t, e, n) { var o = t.options.pan; if (o && g.getValueOrDefault(o.enabled, F.pan.enabled)) { var i = g.getValueOrDefault(t.options.pan.mode, F.pan.mode); o.speed = g.getValueOrDefault(t.options.pan.speed, F.pan.speed), g.each(t.scales, function (t, r) { t.isHorizontal() && a(i, "x") && 0 !== e ? d(t, e, o) : !t.isHorizontal() && a(i, "y") && 0 !== n && d(t, n, o) }), t.update(0) } } function f(t) { var e = t.scales; for (var n in e) { var a = e[n]; if (!a.isHorizontal()) return a } } var v = t("hammerjs"); v = "function" == typeof v ? v : window.Hammer; var h = t("chart.js"); h = "function" == typeof h ? h : window.Chart; var g = h.helpers, x = h.Zoom = h.Zoom || {}, z = x.zoomFunctions = x.zoomFunctions || {}, D = x.panFunctions = x.panFunctions || {}, F = x.defaults = { pan: { enabled: !0, mode: "xy", speed: 20, threshold: 10 }, zoom: { enabled: !0, mode: "xy", sensitivity: 3 } }; x.zoomFunctions.category = o, x.zoomFunctions.time = i, x.zoomFunctions.linear = r, x.zoomFunctions.logarithmic = r, x.panFunctions.category = m, x.panFunctions.time = s, x.panFunctions.linear = c, x.panFunctions.logarithmic = c, x.panCumulativeDelta = 0, x.zoomCumulativeDelta = 0; var y = { afterInit: function (t) { g.each(t.scales, function (t) { t.originalOptions = JSON.parse(JSON.stringify(t.options)) }), t.resetZoom = function () { g.each(t.scales, function (t, e) { var n = t.options.time, a = t.options.ticks; n && (delete n.min, delete n.max), a && (delete a.min, delete a.max), t.options = g.configMerge(t.options, t.originalOptions) }), g.each(t.data.datasets, function (t, e) { t._meta = null }), t.update() } }, beforeInit: function (t) { var e = t.chart.ctx.canvas, n = t.options, a = g.getValueOrDefault(n.pan ? n.pan.threshold : void 0, x.defaults.pan.threshold); if (n.zoom && n.zoom.drag) n.zoom.mode = "x", e.addEventListener("mousedown", function (e) { t._dragZoomStart = e }), e.addEventListener("mousemove", function (e) { t._dragZoomStart && (t._dragZoomEnd = e, t.update(0)), t.update(0) }), e.addEventListener("mouseup", function (e) { if (t._dragZoomStart) { var n = t.chartArea, a = f(t), o = t._dragZoomStart, i = o.target.getBoundingClientRect().left, r = Math.min(o.x, e.x) - i, l = Math.max(o.x, e.x) - i, m = l - r, s = n.right - n.left, c = 1 + (s - m) / s; m > 0 && u(t, c, { x: m / 2 + r, y: (a.bottom - a.top) / 2 }), t._dragZoomStart = null, t._dragZoomEnd = null } }); else { var o = function (e) { var n = e.target.getBoundingClientRect(), a = e.clientX - n.left, o = e.clientY - n.top, i = { x: a, y: o }; e.deltaY < 0 ? u(t, 1.1, i) : u(t, .909, i), e.preventDefault() }; t._wheelHandler = o, e.addEventListener("wheel", o) } if (v) { var i = new v.Manager(e); i.add(new v.Pinch), i.add(new v.Pan({ threshold: a })); var r, l = function (e) { var n = 1 / r * e.scale; u(t, n, e.center), r = e.scale }; i.on("pinchstart", function (t) { r = 1 }), i.on("pinch", l), i.on("pinchend", function (t) { l(t), r = null, x.zoomCumulativeDelta = 0 }); var m = null, s = null, c = function (e) { if (null !== m && null !== s) { var n = e.deltaX - m, a = e.deltaY - s; m = e.deltaX, s = e.deltaY, p(t, n, a) } }; i.on("panstart", function (t) { m = 0, s = 0, c(t) }), i.on("panmove", c), i.on("panend", function (t) { m = null, s = null, x.panCumulativeDelta = 0 }), t._mc = i } }, beforeDatasetsDraw: function (t) { var e = t.chart.ctx, n = t.chartArea; if (e.save(), e.beginPath(), t._dragZoomEnd) { var a = f(t), o = t._dragZoomStart, i = t._dragZoomEnd, r = o.target.getBoundingClientRect().left, l = Math.min(o.x, i.x) - r, u = Math.max(o.x, i.x) - r, m = u - l; e.fillStyle = "rgba(225,225,225,0.3)", e.lineWidth = 5, e.fillRect(l, a.top, m, a.bottom - a.top) } e.rect(n.left, n.top, n.right - n.left, n.bottom - n.top), e.clip() }, afterDatasetsDraw: function (t) { t.chart.ctx.restore() }, destroy: function (t) { var e = t.chart.ctx.canvas; e.removeEventListener("wheel", t._wheelHandler); var n = t._mc; n && (n.remove("pinchstart"), n.remove("pinch"), n.remove("pinchend"), n.remove("panstart"), n.remove("pan"), n.remove("panend")) } }; h.pluginService.register(y) }, { "chart.js": 1, hammerjs: 1 }] }, {}, [2]);
!function (r, e) { if ("object" == typeof exports) { var n = e(); "object" == typeof module && module && module.exports && (exports = module.exports = n), exports.randomColor = n } else "function" == typeof define && define.amd ? define([], e) : r.randomColor = e() }(this, function () { function r(r) { var e = o(r.hue), n = i(e); return n < 0 && (n = 360 + n), n } function e(r, e) { if ("monochrome" === e.hue) return 0; if ("random" === e.luminosity) return i([0, 100]); var n = u(r), t = n[0], a = n[1]; switch (e.luminosity) { case "bright": t = 55; break; case "dark": t = a - 10; break; case "light": a = 55 }return i([t, a]) } function n(r, e, n) { var t = a(r, e), o = 100; switch (n.luminosity) { case "dark": o = t + 20; break; case "light": t = (o + t) / 2; break; case "random": t = 0, o = 100 }return i([t, o]) } function t(r, e) { switch (e.format) { case "hsvArray": return r; case "hslArray": return d(r); case "hsl": var n = d(r); return "hsl(" + n[0] + ", " + n[1] + "%, " + n[2] + "%)"; case "hsla": var t = d(r), a = e.alpha || Math.random(); return "hsla(" + t[0] + ", " + t[1] + "%, " + t[2] + "%, " + a + ")"; case "rgbArray": return f(r); case "rgb": return "rgb(" + f(r).join(", ") + ")"; case "rgba": var o = f(r), a = e.alpha || Math.random(); return "rgba(" + o.join(", ") + ", " + a + ")"; default: return c(r) } } function a(r, e) { for (var n = s(r).lowerBounds, t = 0; t < n.length - 1; t++) { var a = n[t][0], o = n[t][1], u = n[t + 1][0], i = n[t + 1][1]; if (e >= a && e <= u) { var c = (i - o) / (u - a); return c * e + (o - c * a) } } return 0 } function o(r) { if ("number" == typeof parseInt(r)) { var e = parseInt(r); if (e < 360 && e > 0) return [e, e] } if ("string" == typeof r) if (m[r]) { var n = m[r]; if (n.hueRange) return n.hueRange } else if (r.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)) { const t = h(r)[0]; return [t, t] } return [0, 360] } function u(r) { return s(r).saturationRange } function s(r) { r >= 334 && r <= 360 && (r -= 360); for (var e in m) { var n = m[e]; if (n.hueRange && r >= n.hueRange[0] && r <= n.hueRange[1]) return m[e] } return "Color not found" } function i(r) { if (null === v) return Math.floor(r[0] + Math.random() * (r[1] + 1 - r[0])); var e = r[1] || 1, n = r[0] || 0; v = (9301 * v + 49297) % 233280; var t = v / 233280; return Math.floor(n + t * (e - n)) } function c(r) { function e(r) { var e = r.toString(16); return 1 == e.length ? "0" + e : e } var n = f(r); return "#" + e(n[0]) + e(n[1]) + e(n[2]) } function l(r, e, n) { var t = n[0][0], a = n[n.length - 1][0], o = n[n.length - 1][1], u = n[0][1]; m[r] = { hueRange: e, lowerBounds: n, saturationRange: [t, a], brightnessRange: [o, u] } } function f(r) { var e = r[0]; 0 === e && (e = 1), 360 === e && (e = 359), e /= 360; var n = r[1] / 100, t = r[2] / 100, a = Math.floor(6 * e), o = 6 * e - a, u = t * (1 - n), s = t * (1 - o * n), i = t * (1 - (1 - o) * n), c = 256, l = 256, f = 256; switch (a) { case 0: c = t, l = i, f = u; break; case 1: c = s, l = t, f = u; break; case 2: c = u, l = t, f = i; break; case 3: c = u, l = s, f = t; break; case 4: c = i, l = u, f = t; break; case 5: c = t, l = u, f = s }return [Math.floor(255 * c), Math.floor(255 * l), Math.floor(255 * f)] } function h(r) { r = r.replace(/^#/, ""), r = 3 === r.length ? r.replace(/(.)/g, "$1$1") : r; const e = parseInt(r.substr(0, 2), 16) / 255, n = parseInt(r.substr(2, 2), 16) / 255, t = parseInt(r.substr(4, 2), 16) / 255, a = Math.max(e, n, t), o = a - Math.min(e, n, t), u = a ? o / a : 0; switch (a) { case e: return [(n - t) / o % 6 * 60 || 0, u, a]; case n: return [60 * ((t - e) / o + 2) || 0, u, a]; case t: return [60 * ((e - n) / o + 4) || 0, u, a] } } function d(r) { var e = r[0], n = r[1] / 100, t = r[2] / 100, a = (2 - n) * t; return [e, Math.round(n * t / (a < 1 ? a : 2 - a) * 1e4) / 100, a / 2 * 100] } function g(r) { for (var e = 0, n = 0; n !== r.length && !(e >= Number.MAX_SAFE_INTEGER); n++)e += r.charCodeAt(n); return e } var v = null, m = {}; !function () { l("monochrome", null, [[0, 0], [100, 0]]), l("red", [-26, 18], [[20, 100], [30, 92], [40, 89], [50, 85], [60, 78], [70, 70], [80, 60], [90, 55], [100, 50]]), l("orange", [19, 46], [[20, 100], [30, 93], [40, 88], [50, 86], [60, 85], [70, 70], [100, 70]]), l("yellow", [47, 62], [[25, 100], [40, 94], [50, 89], [60, 86], [70, 84], [80, 82], [90, 80], [100, 75]]), l("green", [63, 178], [[30, 100], [40, 90], [50, 85], [60, 81], [70, 74], [80, 64], [90, 50], [100, 40]]), l("blue", [179, 257], [[20, 100], [30, 86], [40, 80], [50, 74], [60, 60], [70, 52], [80, 44], [90, 39], [100, 35]]), l("purple", [258, 282], [[20, 100], [30, 87], [40, 79], [50, 70], [60, 65], [70, 59], [80, 52], [90, 45], [100, 42]]), l("pink", [283, 334], [[20, 100], [30, 90], [40, 86], [60, 84], [80, 80], [90, 75], [100, 73]]) }(); var p = function (a) { if (a = a || {}, void 0 !== a.seed && null !== a.seed && a.seed === parseInt(a.seed, 10)) v = a.seed; else if ("string" == typeof a.seed) v = g(a.seed); else { if (void 0 !== a.seed && null !== a.seed) throw new TypeError("The seed value must be an integer or string"); v = null } var o, u, s; if (null !== a.count && void 0 !== a.count) { var i = a.count, c = []; for (a.count = null; i > c.length;)v && a.seed && (a.seed += 1), c.push(p(a)); return a.count = i, c } return o = r(a), u = e(o, a), s = n(o, u, a), t([o, u, s], a) }; return p });
//# sourceMappingURL=randomColor.min.js.map
var grid;
var icon = { 16: "fa-table", 21: "fa-map-marker", 17: "fa-bar-chart", 14: "fa-tags" }
var DashBoardWrapper = function (options) {

    //let AllMetas = AllMetasRoot["EbDashBoardWraper"];// newly added line to declare a local variable named "AllMetas"  which contains contextaul metas

    this.RefId = options.RefId;
    this.Version = options.Version;
    this.ObjType = options.ObjType;
    this.EbObject = options.dvObj;
    this.Statu = options.Statu;
    this.TabNum = options.TabNum;
    this.ServiceUrl = options.ServiceUrl;
    this.Wc = options.Wc;
    this.Cid = options.Cid;
    this.TileCollection = {};
    this.CurrentTile;
    this.CurrentRefid;
    this.googlekey = options.googlekey || null;
    this.NewTileCount = (options.dvObj !== null) ? options.dvObj.TileCount : 2;
    this.ebObjList = options.EbObjList;
    this.ObjTypeName = { 16: "TableVisualization", 17: "ChartVisualization", 14: "UserControl", 21: "GoogleMap" };
    this.ObjIcons = { 16: "fa fa-table", 17: "fa fa-bar-chart", 14: "fa fa-puzzle-piece", 21: "fa fa-map-marker" };
    this.rowData = options.rowData ? JSON.parse(decodeURIComponent(escape(window.atob(options.rowData)))) : null;
    this.filtervalues = options.filterValues ? JSON.parse(decodeURIComponent(escape(window.atob(options.filterValues)))) : [];
    this.toolboxhtml = options.Toolhtml;
    this.Procs = {};
    this.Rowdata = {};
    this.currentGaugeSrc;
    this.loader = $(".dash-loader");
    this.EbParams = {
        Icons: {
            "Numeric": "fa-sort-numeric-asc",
            "String": "fa-font",
            "DateTime": "fa-calendar",
            "Bool": ""
        },
        EbType: {
            "Numeric": "ParamNumeric",
            "String": "ParamText",
            "DateTime": "ParamDateTime",
            "Bool": "ParamBoolean"
        }
    };

    if (this.EbObject !== null) {
        this.filterDialogRefid = this.EbObject.Filter_Dialogue ? this.EbObject.Filter_Dialogue : "";
    }

    this.GridStackInit = function () {
        //this.objGrid1 = $('.grid-stack').gridstack({ resizable: { handles: 'e, se, s, sw, w' }, column: 40 });
        //this.grid = $('.grid-stack').data("gridstack");
        //this.grid.cellHeight(20);
        ////this.grid.cellWidth(20);
        //grid = this.grid;
        //$('.grid-stack').on('gsresizestop', this.Redrawfn.bind(this));
        //$('.grid-stack').on('dragstart', this.DragStartFn.bind(this));
        //$('.grid-stack').on('dragstop', this.DragStopFn.bind(this));
        //$('.grid-stack').gridstack();
        grid = GridStack.init({ resizable: { handles: 'e, se, s, sw, w' }, column: 40, float: true });
        grid.on('gsresizestop', this.Redrawfn.bind(this));
        grid.on('dragstart', this.DragStartFn.bind(this));
        grid.on('dragstop', this.DragStopFn.bind(this));
        grid.cellHeight(20);
    }
    this.DragStartFn = function (event, ui) {
        let id = event.target.getAttribute("id");
        $(`#${id} .transparent-back`).css("background", "white");
        $(`#${id} .grid-stack-item-content .tile_dt_cont`).hide();
    };

    this.DragStopFn = function (event, ui) {
        let id = event.target.getAttribute("id");
        $(`#${id} .transparent-back`).css("background", "transparent");
        $(`#${id} .grid-stack-item-content .tile_dt_cont`).show();
    };

    //$('.grid-stack').on('gsresizestop', function (event, elem) {
    //    var newHeight = $(elem).attr('data-gs-height');
    //    var id = $(elem).context.children[0].id;
    //    this.Redrawfn();
    //});

    this.Redrawfn = function (items, element) {
        var newHeight = $(element).attr('data-gs-height');
        var id = $(`#${element.id} .grid-stack-item-content`).attr("id");
        this.RedrwFnHelper(id);
    };
    this.RedrwFnHelper = function (id) {
        let currentobj = this.TileCollection[id];
        var height = $(`[data-id=${id}`).height();
        $.each(currentobj.ControlsColl.$values, function (i, obj) {
            $(`[data-id=${id}] #${obj.EbSid}`).css("max-height", `${height} !important`);
            var eb_type = obj.$type.split('.').join(",").split(',')[2].split("Eb")[1];
            //this.labelstyleApply(this.CurrentTile);
            if (eb_type === "Gauge") {
                if (obj.DataObjCtrlName === "" || obj.DataObjColName === "") {
                    let xx = EbGaugeWrapper(obj, { isEdit: false });
                }
                this.GaugeDrop(obj.DataObjCtrlName, obj.DataObjColName, obj.EbSid, "Gauge");
            }
            else if (eb_type === "SpeedoMeter") {
                if (obj.DataObjCtrlName === "" || obj.DataObjColName === "") {
                    let xx = SpeedoMeterWrapper(obj, { isEdit: false });
                }
                this.GaugeDrop(obj.DataObjCtrlName, obj.DataObjColName, obj.EbSid, "speedometer");
            }
            else if (eb_type === "ProgressGauge") {
                if (obj.DataObjCtrlName === "" || obj.DataObjColName === "") {
                    let xx = ProgressGaugeWrapper(obj, { isEdit: false });
                }
                $(`#${obj.EbSid}`).css("max-width", $(`#${obj.EbSid}`).height() + 10 + "px");
                this.GaugeDrop(obj.DataObjCtrlName, obj.DataObjColName, obj.EbSid, "ProgressGauge");
            }
        }.bind(this));
        $('.gaugeChart').bind("contextmenu", this.setCurrentObj.bind(this));
    };

    this.GridStackInit();

    this.getColumns = function () {
        this.loader.show();
        $.post("../DashBoard/GetFilterBody", { dvobj: JSON.stringify(this.EbObject), contextId: "paramdiv" }, this.AppendFD.bind(this));
    };

    this.AppendFD = function (result) {
        $(".form-group #filter-dg").remove();
        $(".form-group").prepend(`<button class="btn filter_menu" id="filter-dg">
                                    <i class="fa fa-filter" aria-expanded="false"></i>
                                </button>`);
        this.FilterBtn = $("#filter-dg");
        this.FilterBtn.off("click").on("click", this.FilterToggle.bind(this));
        $('.param-div-cont').remove();
        this.loader.hide();
        $("#dashbord-view").prepend(`
                <div id='paramdiv-Cont${this.TabNum}' class='param-div-cont'>
                <div id='paramdiv${this.TabNum}' class='param-div fd'>
                    <div class='pgHead'>
                        <h6 class='smallfont' style='font-size: 12px;display:inline'>Filter Dialogue</h6>
                        <div class="icon-cont  pull-right" id='close_paramdiv${this.TabNum}'><i class="fa fa-times" aria-hidden="true"></i></div>
                    </div>
                    </div>
                    </div>
                `);

        $('#paramdiv' + this.TabNum).append(result);
        $('#close_paramdiv' + this.TabNum).off('click').on('click', this.FilterToggle.bind(this));
        $("#btnGo").off("click").on("click", this.GetFilterValues.bind(this));
        this.FilterDiv = $(".param-div-cont");
        if (typeof FilterDialog !== "undefined") {
            $(".param-div-cont").show();
            //this.stickBtn = new EbStickButton({
            //    $wraper: $(".param-div-cont"),
            //    $extCont: $(".param-div-cont"),
            //    icon: "fa-filter",
            //    dir: "left",
            //    label: "Parameters",
            //    style: { top: "230px" }
            //});
            this.filterDialog = FilterDialog;
            $("#btnGo").trigger("click");
        }
        else {
            this.FilterDiv.hide();
            this.filterDialog = null;
        }
        this.propGrid.setObject(this.EbObject, AllMetas["EbDashBoard"]);

    };

    this.FilterToggle = function () {
        this.FilterDiv.toggle('drop', { direction: 'right' }, 150);
    };
    //this.CloseParamDiv = function () {
    //    this.stickBtn.minimise();
    //};

    //Toolbox
    this.AppendToolBox = function () {
        $('.ToolBox-div').remove();
        $("#toolbox-dashboard").prepend(`
                <div id='ToolBox-div${this.TabNum}' class='ToolBox-div'>
                <div id='ToolBoxdiv${this.TabNum}' class='ToolBoxdiv fd'>
                    <div class='pgHead'>
                        <h6 class='smallfont' style='font-size: 12px;display:inline'>ToolBox</h6>
                        <div class="icon-cont  pull-right" id='close_ToolBoxdiv${this.TabNum}'><i class="fa fa-times" aria-hidden="true"></i></div>
                    </div>
                    <div id="mySidenav" class="sidenav">
                    <div class="search-div"> <input type="search" id="DashB-Search" placeholder="search.." /> </div>
                    <div id="DashB-Searched-Obj" hidden> </div>
                    <div id="Eb-obj-sidebar-cont">   </div>
                    </div>
                    </div>
                    </div>
                `);
        $("#Eb-obj-sidebar-cont").append(this.toolboxhtml);
        this.DrawObjectOnMenu();
        $('#close_ToolBoxdiv' + this.TabNum).off('click').on('click', this.CloseToolBoxDiv.bind(this));
        $(".ToolBox-div").hide();
        this.stickBtn4ToolBox = new EbStickButton({
            $wraper: $(".ToolBox-div"),
            $extCont: $(".ToolBox-div"),
            icon: "fa-wrench",
            dir: "left",
            label: "ToolBox",
            style: { top: "105px" }
        });
        this.stickBtn4ToolBox.minimise();
    };

    this.CloseToolBoxDiv = function () {
        this.stickBtn4ToolBox.minimise();
    };

    this.DrawObjectOnMenu = function () {
        let myarr4EbType = [];

        let containers = [];
        $("#Eb-obj-sidebar-cont").append(`<div class="tool_item_head" data-toggle="collapse" data-target="#toolbox_view_${this.TabNum}"> <i class="fa fa-caret-down"></i>  Views</div>
            <div id="toolbox_view_${this.TabNum}" ebclass="tool-sec-cont" class="tool-sec-cont collapse in"> </div>`);
        $.each(this.ebObjList, function (key, Val) {
            $.each(Val, function (i, Obj) {
                if (myarr4EbType.indexOf(Obj.EbObjectType) === -1) {
                    $(`#toolbox_view_${this.TabNum}`).append(`
                        <div class="tool_item_inner_head" data-toggle="collapse"  aria-expanded="false" aria-controls="${this.ObjTypeName[Obj.EbObjectType]}_${this.TabNum}" data-target="#${this.ObjTypeName[Obj.EbObjectType]}_${this.TabNum}" style="padding-left:30px"><i class="fa fa-caret-down"></i> ${this.ObjTypeName[Obj.EbObjectType]} </div>
                        <div id="${this.ObjTypeName[Obj.EbObjectType]}_${this.TabNum}")" ebclass="tool-sec-cont" class="tool-sec-cont collapse in views_cont" style="" >
                            <div refid="${Obj.RefId}" class="db-draggable-obj" data-toggle="tooltip" title="${Obj.DisplayName}"> <i class="obj-icon fa ${icon[Obj.EbObjectType]}"> </i>${Obj.DisplayName}</div></div>
                        </div>`);
                    myarr4EbType.push(Obj.EbObjectType);
                    containers.push(document.getElementById(`${this.ObjTypeName[Obj.EbObjectType]}_${this.TabNum}`));

                }
                else {
                    $(`#${this.ObjTypeName[Obj.EbObjectType]}_${this.TabNum}`).append(` <div refid="${Obj.RefId}" class="db-draggable-obj" data-toggle="tooltip" title="${Obj.DisplayName}"> <i class="obj-icon fa ${icon[Obj.EbObjectType]}"> </i>${Obj.DisplayName}</div>`);

                }
            }.bind(this));


        }.bind(this));

        //containers.push(document.getElementById("grid-cont"));
        containers.push(document.getElementById("toolb_basic_ctrls"));
        containers.push(document.getElementById("toolb_ph_cont_ctrls"));
        containers.push(document.getElementById("component_cont"));
        //containers.push(document.getElementById('grid-cont'));

        this.drake = dragula(containers, {
            copy: true,
            accepts: this.acceptfn,
        });
        this.drake.off("drag").on("drag", this.columnsdrag.bind(this));
        this.drake.off("shadow").on("shadow", this.columnsshadow.bind(this));
        this.drake.off("drop").on("drop", this.columnsdrop.bind(this));
    };

    this.acceptfn = function (el, target, source, sibling) {
        if (source === target) {
            return false;
        }
        else {
            if (($(source).hasClass("views_cont") || $(source).attr("id") === "toolb_basic_ctrls") && $(target).attr("id") === "component_cont")
                return false;
            else if ($(source).attr("id") === "toolb_ph_cont_ctrls" && $(target).attr("id") === "grid-cont")
                return false;
            else if (($(source).hasClass("views_cont") || $(source).attr("id") === "toolb_ph_cont_ctrls") && $(target).hasClass("tile_dt_cont"))
                return false;
            else
                return true;
        }// elements can be dropped in any of the `containers` by default
    };

    this.columnsdrag = function (el, source) {
        this.currentGaugeSrc = el;
        //this.drake.containers.push(document.getElementById("component_cont"));
        if ($(source) === $("#grid-cont")) {
            return false;
        }
        //else if ($(source).hasClass("data-reader-popup")) {
        //    this.drake.containers = this.drake.containers.filter(function (value)
        //    {
        //        return value != document.getElementById("component_cont");
        //    });      
        //}
        else {
            if (this.drake.containers.indexOf($("#grid-cont") === -1)) {

                this.drake.containers.push(document.getElementById('grid-cont'));
                return true;
            }
        }
    };

    this.columnsshadow = function (el, container, source) {
        if (source === $("#grid-cont")) {
            return false;
        }
    };

    this.columnsdrop = function (el, target, source, sibling) {
        this.eb_type = $(this.currentGaugeSrc).attr("eb-type");
        this.drake.containers = this.drake.containers.filter(function (value) {
            return value != document.getElementById('grid-cont');
        });
        this.VisRefid = el.getAttribute("refid");
        el.remove();
        if (target && source !== null) {
            if ($(target).attr("id") === "grid-cont" && $(source).hasClass("views_cont")) {
                let a = this.AddNewTile();
                this.TileCollection[this.CurrentTile].RefId = this.VisRefid;
                this.loader.show();
                $.ajax(
                    {
                        url: '../DashBoard/DashBoardGetObj',
                        type: 'POST',
                        data: { refid: this.VisRefid },
                        error: function (request, error) {
                            $(".dash-loader").hide();
                            EbPopBox("show", {
                                Message: "Failed to get data from DataSourse",
                                ButtonStyle: {
                                    Text: "Ok",
                                    Color: "white",
                                    Background: "#508bf9",
                                    Callback: function () {
                                        //$(".dash-loader").hide();
                                    }
                                }
                            });
                        },
                        success: this.TileRefidChangesuccess.bind(this, this.CurrentTile)
                    });
            }
            //add links
            else if ($(target).attr("id") === "grid-cont" && $(source).attr("id") === "toolb_basic_ctrls" && this.eb_type === "Links") {
                let drop_id = this.AddNewTile(6, 3);
                let tileId = drop_id.split("_")[1];
                this.makeElement(el);
                let obj = this.Procs[this.currentId];
                $(`#${drop_id}`).append(this.MakeLinks(obj));
                this.labelstyleApply(tileId);
                LinkStyle(obj, this.CurrentTile, this.TabNum);
                this.TileCollection[tileId].LinksColl.$values.push(this.Procs[this.currentId]);
            }
            //Add new Gauge
            else if ($(target).attr("id") === "grid-cont" && $(source).attr("id") === "toolb_basic_ctrls" && this.eb_type !== "Links") {
                let eb_type = $(this.currentGaugeSrc).attr("eb-type");
                let drop_id = this.AddNewTile(10, 5);
                this.makeElement(el);
                let obj = this.Procs[this.currentId];
                $(`#${drop_id}`).append(obj.$Control[0]);
                this.drake.containers.push(document.getElementById(drop_id));
                this.drake.containers.push(document.getElementById(obj.EbSid));
                this.TileCollection[this.CurrentTile].ControlsColl.$values.push(obj);
                if (eb_type === "Gauge") {
                    let xx = EbGaugeWrapper(obj, { isEdit: false });
                }
                if (eb_type === "ProgressGauge") {
                    let xx = ProgressGaugeWrapper(obj, { isEdit: false });
                }
                if (eb_type === "SpeedoMeter") {
                    let xx = SpeedoMeterWrapper(obj, { isEdit: false });
                }
            }
            //Add new Gauge to existing tile
            else if ($(target).hasClass("tile_dt_cont") && $(source).attr("id") === "toolb_basic_ctrls") {
                this.makeElement(el);
                let obj = this.Procs[this.currentId];
                $(target).append(obj.$Control[0]);
                var eb_type = obj.$type.split('.').join(",").split(',')[2].split("Eb")[1];
                this.drake.containers.push(document.getElementById(obj.EbSid));
                this.TileCollection[$(target).attr("data-id")].ControlsColl.$values.push(obj);
                if (eb_type === "Gauge") {
                    let xx = EbGaugeWrapper(obj, { isEdit: false });
                }
                if (eb_type === "ProgressGauge") {
                    let xx = ProgressGaugeWrapper(obj, { isEdit: false });
                }
                if (eb_type === "SpeedoMeter") {
                    let xx = SpeedoMeterWrapper(obj, { isEdit: false });
                }
            }
            //Connect Gauge Value from component Container
            else if ($(target).hasClass("gaugeChart") && $(source).hasClass("inner_tree_structure")) {
                let component = $(el).attr("data-ctrl");
                let column = $(el).attr("data-column");
                let controlname = $(target).attr("id");
                let tileId = $(target).parent().attr("data-id");
                let obj = getObjByval(this.TileCollection[tileId].ControlsColl.$values, "EbSid", controlname);
                obj.DataObjCtrlName = component;
                obj.DataObjColName = column;
                this.TileCollection[tileId].ComponentsColl.$values.push(this.Procs[component]);
                this.GaugeDrop(component, column, controlname, "Gauge");
            }
            //Add new Component
            else if ($(target).attr("id") === "component_cont" && $(source).attr("id") === "toolb_ph_cont_ctrls") {
                this.makeElement(el);
                let o = this.Procs[this.currentId];
                this.ComponentDrop(target, o);
            }
            //Add Labels 
            else if ($(target).hasClass("grid-stack") && $(source).hasClass("inner_tree_structure")) {
                let drop_id = this.AddNewTile(8, 4);
                this.makeElement(el);
                let o = this.Procs[this.currentId];
                let component = $(el).attr("data-ctrl");
                let column = $(el).attr("data-column");
                let controlname = o.EbSid;
                let tileId = drop_id.split("_")[1];
                this.LabelDrop(component, column, controlname, drop_id.split("_")[1]);
                $(`#${drop_id}`).append(this.MakeDashboardLabel(o));
                Eb_Tiles_StyleFn(this.TileCollection[this.CurrentTile], tileId, this.TabNum);
                this.labelstyleApply(tileId);
                EbDataLabelFn(this.Procs[controlname]);
                this.TileCollection[tileId].ComponentsColl.$values.push(this.Procs[component]);
                this.drake.containers.push(document.getElementById(drop_id));
                this.drake.containers.push(document.getElementById(o.EbSid));
                this.TileCollection[this.CurrentTile].LabelColl.$values.push(o);
            }
            //Add Label tp existing tile
            else if ($(target).hasClass("tile_dt_cont") && $(source).hasClass("inner_tree_structure")) {
                this.makeElement(el);
                let o = this.Procs[this.currentId];
                let component = $(el).attr("data-ctrl");
                let column = $(el).attr("data-column");
                let controlname = o.EbSid;
                let tileId = $(target).parent().attr("id");
                let drop_id = $(target)[0].getAttribute("id");
                this.LabelDrop(component, column, controlname, tileId);
                $(target).append(this.MakeDashboardLabel(o));
                EbDataLabelFn(this.Procs[controlname]);
                this.drake.containers.push(document.getElementById(drop_id));
                this.drake.containers.push(document.getElementById(o.EbSid));
                this.TileCollection[this.CurrentTile].LabelColl.$values.push(o);
            }

            //Connect progressGauge to exisitng gauge
            else if ($(target).hasClass("progressGauge") && $(source).hasClass("inner_tree_structure")) {
                let component = $(el).attr("data-ctrl");
                let column = $(el).attr("data-column");
                let controlname = $(target).attr("id");
                let tileId = $(target).parent().attr("data-id");
                let obj = getObjByval(this.TileCollection[tileId].ControlsColl.$values, "EbSid", controlname);
                obj.DataObjCtrlName = component;
                obj.DataObjColName = column;
                this.TileCollection[tileId].ComponentsColl.$values.push(this.Procs[component]);
                this.GaugeDrop(component, column, controlname, "ProgressGauge");
            }
            //Connect speedometer to exisitng gauge
            else if ($(target).hasClass("speedometer") && $(source).hasClass("inner_tree_structure")) {
                let component = $(el).attr("data-ctrl");
                let column = $(el).attr("data-column");
                let controlname = $(target).attr("id");
                let tileId = $(target).parent().attr("data-id");
                let obj = getObjByval(this.TileCollection[tileId].ControlsColl.$values, "EbSid", controlname);
                obj.DataObjCtrlName = component;
                obj.DataObjColName = column;
                this.TileCollection[tileId].ComponentsColl.$values.push(this.Procs[component]);
                this.GaugeDrop(component, column, controlname, "speedometer");
            }
            $("#component_cont .Eb-ctrlContainer").off("click").on("click", this.FocusOnControlObject.bind(this));
        }
        $(".grid-stack , .Eb-ctrlContainer").off("click").on("click", this.TileSelectorJs.bind(this));
    };

    this.labelstyleApply = function (tileId) {
        //$(`[data-id="${tileId}"]`).parent().css("background", "transparent");
        $(`[data-id="${tileId}"]`).parent().css("border", "0px solid");
        $(`[data-id="${tileId}"]`).parent().css("border", "0px solid");
        $(`#${tileId}`).css("background", "transparent");
        $(`#${tileId} .db-title`).empty();
        $(`#${tileId}`).addClass("user-control-tile-opt");
        $(`#${tileId} .i-opt-obj`).hide();
        $(`#${tileId} .i-opt-restart`).hide();
        $(`#${tileId} .tile-header`).removeClass("tile-header");
        $(`#${tileId}`).addClass("transparent-back");
    }

    this.GaugeDrop = function (component, column, controlname, type) {
        if (component !== "" && column !== "" && this.Rowdata[component + "Row"] !== null) {
            let index = getObjByval(this.Procs[component].Columns.$values, "name", column).data;
            let _data = this.Rowdata[component + "Row"][index];

            if (type === "ProgressGauge") {
                this.Procs[controlname].GaugeValue = _data;
                this.Procs[controlname].GaugeContainer = controlname;
                ProgressGaugeWrapper(this.Procs[controlname], { isEdit: false });
            }
            else if (type === "Gauge") {
                this.Procs[controlname].GaugeConfig.GaugeValue = _data;
                this.Procs[controlname].GaugeConfig.GaugeContainer = controlname;
                let xx = EbGaugeWrapper(this.Procs[controlname], { isEdit: true });
            }
            else if (type === "speedometer") {
                this.Procs[controlname].GaugeValue = _data;
                this.Procs[controlname].GaugeContainer = controlname;
                SpeedoMeterWrapper(this.Procs[controlname], { isEdit: false });
            }
        }
    };
    this.LabelDrop = function (component, column, controlname, tileid) {
        if (component !== "" && column !== "" && this.Rowdata[component + "Row"] !== null && this.Rowdata[component + "Row"] !== undefined) {
            let val = getObjByval(this.Procs[component].Columns.$values, "name", column);
            if (val !== undefined) {
                let index = val.data;
                let _data = this.Rowdata[component + "Row"][index];
                this.Procs[controlname].DynamicLabel = _data;
                if (this.Procs[controlname].StaticLabel == "") {
                    this.Procs[controlname].StaticLabel = column;
                }
                this.Procs[controlname].DataObjCtrlName = component;
                this.Procs[controlname].DataObjColName = column;
            }
        }
    };

    this.makeElement = function (el, obj) {
        let ebtype = $(el).attr("eb-type");
        if (ebtype === undefined) {
            ebtype = el;
        }
        this.currentId = "tb" + this.TabNum + ebtype + CtrlCounters[ebtype + "Counter"]++;
        if (obj) { obj.EbSid = this.currentId; }
        this.Procs[this.currentId] = obj ? $.extend(new EbObjects["Eb" + ebtype](this.currentId), obj) : new EbObjects["Eb" + ebtype](this.currentId);
        this.dropedCtrlInit(this.Procs[this.currentId].$Control, ebtype, this.currentId);
    };
    this.MakeDashboardLabel = function (obj) {
        let a;
        if (obj.LabelStyle == 0) {
            a = `<div class="display-block label-cont" id="${obj.EbSid}" eb-type="DataLabel"> 
        <div class="card-icon" id="${obj.EbSid}_icon"><i class=""></i></div>
        <div id="${obj.EbSid}_Data_pane" class="Label_Data_pane" >
        <div class="lbl db-static-label" id="${obj.EbSid}_static"> ${obj.StaticLabel}</div>  
        <div class=" lbl db-label-desc"  id="${obj.EbSid}_description"></div>
        <div class="lbl db-dynamic-label" id="${obj.EbSid}_dynamic"> ${obj.DynamicLabel}</div>
        <div class="label-footer" id="${obj.EbSid}_footer"><div class="footer-inner"><i class="fa fa-address-book" aria-hidden="true"></i><label></label></div></div>
        </div></div>`;
        }
        else if (obj.LabelStyle == 1) {
            a = `<div class="display-block label2-cont" id="${obj.EbSid}" eb-type="DataLabel"> 
        <div id="${obj.EbSid}_Data_pane" class="Label_Data_pane" >
        <div class="card-icon" id="${obj.EbSid}_icon"><i class=""></i></div><div class='lb2-data'>
        <div class="lbl db-static-label" id="${obj.EbSid}_static"> ${obj.StaticLabel}</div>  
        <div class=" lbl db-label-desc"  id="${obj.EbSid}_description"></div>
        <div class="lbl db-dynamic-label" id="${obj.EbSid}_dynamic"> ${obj.DynamicLabel}</div>
        <div class="label-footer" id="${obj.EbSid}_footer"><div class="footer-inner"><i class="fa fa-address-book" aria-hidden="true"></i><label></label></div></div>
        </div></div></div>`;
        }
        else if (obj.LabelStyle == 2) {
            a = `<div class="display-block label3-cont" id="${obj.EbSid}" eb-type="DataLabel"> 
        <div id="${obj.EbSid}_Data_pane" class="Label_Data_pane" >
        <div class='lb3-data'>
        <div class="lbl db-static-label" id="${obj.EbSid}_static"> ${obj.StaticLabel}</div>  
        <div class=" lbl db-label-desc"  id="${obj.EbSid}_description"></div>
        <div class="lbl db-dynamic-label" id="${obj.EbSid}_dynamic"> ${obj.DynamicLabel}</div>
        <div class="label-footer" id="${obj.EbSid}_footer"><div class="footer-inner"><i class="fa fa-address-book" aria-hidden="true"></i><label></label></div></div>
        </div><div class="card-icon" id="${obj.EbSid}_icon"><i class=""></i></div>
        </div></div>`;
        }
        else if (obj.LabelStyle == 3) {
            a = `<div class="row display-block datalabel4 eb-full-width" id="${obj.EbSid}" eb-type="DataLabel">
            <div class="col-lg-4 col-sm-4 col-md-4 eb-full-height eb-nopadding icon-pane">
            <div class="icon4 eb-full-height" id="${obj.EbSid}_icon"><i></i></div></div>
            <div class="col-lg-8 col-sm-8 col-md-8 eb-full-height body-pane">
                <div class="card" id="${obj.EbSid}_Data_pane" style="width: 100%;">
                    <h5 class="card-header lbl" id="${obj.EbSid}_static"> ${obj.StaticLabel} </h5>
                    <div class="card-body">
<p class="card-text" id="${obj.EbSid}_description lbl"></p>
<p class="card-text" id="${obj.EbSid}_dynamic lbl">${obj.DynamicLabel}</p>
                    </div>
                <div class="card-footer text-muted" id="${obj.EbSid}_footer">
                <div class="row">
<div class="col-sm-3"><i class="fa fa-address-book" aria-hidden="true"></i></div>
<div class="col-sm-9 eb-nopadding"> <label></label></div>
                </div>
             </div>
            </div>
            </div> `;
        }
        else if (obj.LabelStyle == 4) {
            a = `<div class="row display-block datalabel5 eb-full-width" id="${obj.EbSid}" eb-type="DataLabel">
    <div class="col-lg-8 col-sm-8 col-md-8 eb-full-height body-pane">
        <div class="card eb-full-width" id="${obj.EbSid}_Data_pane" style="width: 100%;">
            <h5 class="card-header lbl" id="${obj.EbSid}_static"> ${obj.StaticLabel} </h5>
            <div class="card-body">
                <p class="card-text lbl" id="${obj.EbSid}_description">  </p>
                <p class="card-text" id="${obj.EbSid}_dynamic"> ${obj.DynamicLabel}</p>
            </div>
            <div class="card-footer text-muted" id="${obj.EbSid}_footer">
                <div class="row">
                    <div class="col-sm-3">
                        <i class="fa fa-address-book" aria-hidden="true"></i>
                    </div>
                    <div class="col-sm-9 eb-nopadding"> <label></label></div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-4 col-sm-4 col-md-4 eb-full-height eb-nopadding icon-pane">
        <div class="icon4 eb-full-height" id="${obj.EbSid}_icon"><i></i></div>
    </div>
</div>`;
        }
        return a;
    };
    this.MakeLinks = function (obj) {
        let a = `<div id="${obj.EbSid}" class="link-dashboard-pane"  eb-type="Links"> 
            <div id="${obj.EbSid}_icon" class="link-icon" >  <i class="fa fa-external-link-square"> </i> </div>
            <div id="${obj.EbSid}_text" class="link-text">  <div class="link-target" id="${obj.EbSid}_link" href="#" target="_blanc"></div> </div>
        </div>`;
        return a;
    };

    this.ComponentDrop = function (target, o) {
        $(target).append(o.$Control[0]);
        $(`#${o.$Control[0].id} .Dt-Rdr-col-cont`).empty().append(`<div  id="Inner_Btn_${o.EbSid}" class="inner_col_up" target-id="${o.EbSid}" rel="popover" data-content="" data-original-title="A Title">
                  <i class="fa fa-angle-up" aria-hidden="true"></i> </div>`);
        //$("#component_columns_cont").append(`<div id="Inner_Cont_${o.EbSid}" style="display:none" class="component_col_div"> 
        //    <ul id="Inner_tree_${o.EbSid}" class="inner_com_col_cont"> </ul> 
        //    </div></div>`);
        $("#component_columns_cont").empty().append(`<div id="Inner_Cont_${o.EbSid}" style="display:none" class="component_colomn_div">
              <div class="inner_component_colomn_div"><ul id="Inner_tree_${o.EbSid}" class="inner_tree_structure"> </ul></div>
              <div id="tailShadow"></div>
              <div id="tail1"></div>
              <div id="tail2"></div>
            </div>`);
        this.propGrid.setObject(o, AllMetas["EbDataObject"]);
        this.drake.containers.push(document.getElementById(`Inner_tree_${o.EbSid}`));
        $(`#Inner_Btn_${o.EbSid}`).off("click").on("click", this.ComponentColumContainerShow.bind(this));
        //$(`#Inner_Btn_${o.EbSid}`).off("click").on("click", this.PopOverTest.bind(this));

    };
    //this.PopOverTest = function (e) {
    //    var TargetId = e.target.getAttribute("target-id");
    //    if (TargetId == null) { TargetId = $(e.target).parent()[0].getAttribute("target-id"); }      
    //    $('[rel=popover]').popover({
    //        html: true,
    //        title: 'Schedule an appointment',
    //        content: function() {
    //            this.drake.containers.push(document.getElementById(`Inner_tree_${TargetId}`));
    //            return $(`#Inner_Cont_${TargetId}`).html();              
    //        }.bind(this),           
    //    }); 

    //};

    //Component Division
    this.ComponentColumContainerShow = function (e) {
        let TargetId = e.target.getAttribute("target-id");
        if (TargetId == null) { TargetId = $(e.target).parent()[0].getAttribute("target-id"); }
        var p = $(e.target).last();
        var offset = p.offset();
        var percentLeft = offset.left / $(window).width() * 100;
        var percentTop = offset.top / $(window).height() * 100;
        $(`#Inner_Cont_${TargetId}`).css({ "top": percentTop - 22 + "%", "left": percentLeft - 11 + "%" })
        $(`#Inner_Cont_${TargetId}`).toggle();
    };

    this.FocusOnControlObject = function (e) {
        let elem = $(e.target).closest("Eb-ctrlContainer");
        let id = elem.attr("id");
        if (id === undefined) {
            elem = $($(e.target).parents(".Eb-ctrlContainer")[0]);
            id = elem.attr("id");
        }
        let eb_type = elem.attr("eb-type");
        if (eb_type == "DataObject") {
            this.propGrid.setObject(this.Procs[id], AllMetas["EbDataObject"]);
        }
    };



    this.dropedCtrlInit = function ($ctrl, type, id) {
        $ctrl.attr("tabindex", "1");
        $ctrl.attr("id", id).attr("ebsid", id);
        $ctrl.attr("eb-type", type);
    };


    this.GenerateButtons = function () {

    };

    this.sideBarHeadToggle = function (e) {
        let abc = e.target.getAttribute("hs-id");
        $(`#${abc}`).toggle(100);

    };
    this.togglePG = function () {
        this.PropertyDiv.toggle('drop', { direction: 'right' }, 150);
    };
    this.init = function () {
        $(".dash-loader").show();
        this.AppendToolBox();
        if (this.EbObject === null) {
            this.edit = false;
            this.EbObject = new EbObjects.EbDashBoard(`EbDashBoar${Date.now()}`);
            this.filterDialogRefid = "";
        }
        else
            this.edit = true;

        $(".form-group #ppt-grid").remove();
        $(".form-group").prepend(`<button class="btn filter_menu" id="ppt-grid">
                                    <i class="fa fa-cog" aria-expanded="false"></i>
                                </button>`);
        this.propGrid = new Eb_PropertyGrid({
            id: "propGrid",
            wc: this.Wc,
            cid: this.Cid,
            $extCont: $("#ppt-dash"),
            isDraggable: true
        });
        this.propGrid.setObject(this.EbObject, AllMetas["EbDashBoard"]);
        this.propGrid.PropertyChanged = this.popChanged.bind(this);
        this.propGrid.stickBtn.hide();
        this.PropertyDiv = $("#ppt-dash");
        $("#ppt-grid").off("click").on("click", this.togglePG.bind(this));
        $("#ppt-dash .pull-right.pgpin").remove();
        $("#ppt-dash .pgHead").append(`<div class="icon-cont  pull-right" id="prop-close"><i class="fa fa-times" aria-hidden="true"></i></div>`);
        $("#prop-close").off("click").on("click", this.togglePG.bind(this));

        commonO.Current_obj = this.EbObject;
        this.PropertyDiv.hide();
        if (this.EbObject.Filter_Dialogue === null || this.EbObject.Filter_Dialogue === undefined || this.EbObject.Filter_Dialogue === "" && this.EbObject.Tiles.$values.length !== 0) {
            $('.db-user-filter').remove();
            if (this.FilterBtn) this.FilterBtn.remove();
            grid.removeAll();
            this.DrawTiles();
        }
        else if (this.EbObject.Filter_Dialogue !== "") {
            this.getColumns();
            if (this.EbObject.Tiles.$values.length == 0)
                $(".dash-loader").hide();
        }
        else {
            $(".dash-loader").hide();
        }


        $("#dashbord-view").on("click", ".tile-opt", this.TileOptions.bind(this));
        $("#mySidenav").on("click", ".sidebar-head", this.sideBarHeadToggle.bind(this));
        $("#DashB-Search").on("keyup", this.DashBoardSearch.bind(this));
        $('#myDropdown').on('hide.bs.dropdown', this.DropDownClose.bind(this));
        $('#myDropdown').on('click.bs.dropdown.data-api', '.dropdown.keep-inside-clicks-open', this.DropDownClose2.bind(this));
        $(".grid-stack , .Eb-ctrlContainer").off("click").on("click", this.TileSelectorJs.bind(this));
    }

    this.DropDownClose = function (e) {
        if (e.clickEvent) {
            e.preventDefault();
        }
    };

    this.DropDownClose2 = function (e) {
        if (e.clickEvent) {
            e.stopPropagation();
        }
    };

    this.TileOptions = function (e) {
        var tileid = e.target.parentElement.getAttribute("u-id");
        var id = e.target.getAttribute("link");
        if (id === "ext-link") {
            let TileRefid = this.TileCollection[tileid].RefId;
            //window.open(location.origin + "/DV/dv?refid=" + TileRefid, '_blank');
            let url = "../DV/dv?refid=" + TileRefid;

            let _form = document.createElement("form");
            _form.setAttribute("method", "post");
            _form.setAttribute("action", url);
            _form.setAttribute("target", "_blank");

            let input1 = document.createElement('input');
            input1.type = 'hidden';
            input1.name = "filterValues";
            input1.value = btoa(unescape(encodeURIComponent(JSON.stringify(this.filtervalues))));
            _form.appendChild(input1);

            document.body.appendChild(_form);

            _form.submit();
            document.body.removeChild(_form);
        }
        else if (id === "close") {
            var abc = $(`#${tileid}`).closest(".grid-stack-item");
            grid.removeWidget(abc);
        }
        else if (id === "restart-tile") {
            $(`[data-id="${this.CurrentTile}"]`).empty();
            let Refid = this.TileCollection[tileid].RefId;
            this.Ajax4fetchVisualization(Refid);
        }
    }

    this.Ajax4fetchVisualization = function (refid) {
        this.loader.show();
        if (refid !== "") {
            $.ajax(
                {
                    url: '../DashBoard/DashBoardGetObj',
                    type: 'POST',
                    data: { refid: refid },
                    error: function (request, error) {
                        this.loader.hide();
                        EbPopBox("show", {
                            Message: "Failed to get data from DataSourse",
                            ButtonStyle: {
                                Text: "Ok",
                                Color: "white",
                                Background: "#508bf9",
                                Callback: function () {
                                    //$(".dash-loader").hide();
                                }
                            }
                        });
                    },
                    success: this.TileRefidChangesuccess.bind(this, this.CurrentTile)
                });
        }
    }

    this.DrawTiles = function () {
        grid.removeAll();
        //$("#layout_div").css("background-color", "").css("background-color", this.EbObject.BackgroundColor);
        //$(".component_cont .nav").css("background-color", "").css("background-color", this.EbObject.BackgroundColor);
        Eb_Dashboard_Bg(this.EbObject);
        if (this.EbObject.Tiles.$values.length > 0) {

            for (let i = 0; i < this.EbObject.Tiles.$values.length; i++) {
                let currentobj = this.EbObject.Tiles.$values[i];
                let tile_id = "t" + i;
                let t_id = "tile" + i;
                let x = this.EbObject.Tiles.$values[i].TileDiv.Data_x;
                let y = this.EbObject.Tiles.$values[i].TileDiv.Data_y;
                let dh = this.EbObject.Tiles.$values[i].TileDiv.Data_height;
                let dw = this.EbObject.Tiles.$values[i].TileDiv.Data_width;
                this.drop_id = "drop_" + t_id;
                grid.addWidget(`<div id="${tile_id}" eb-id="${t_id}" data-gs-min-width="7" data-gs-min-height="2"> 
                    <div class="grid-stack-item-content" id=${t_id}>
                    <div style="display:flex" class="db-title-parent tile-header">
                    <div class="db-title" data-toggle="move" title="move tile"  data-placement="bottom"  name-id="${t_id}" style="display:float"></div>
                    <div style="float:right;display:flex" u-id="${t_id}">
                    <i class="fa fa-retweet tile-opt i-opt-restart" aria-hidden="true" link="restart-tile" id="${this.TabNum}_restart_${t_id}"></i>
                    <i class="fa fa-external-link tile-opt i-opt-obj" aria-hidden="true" link="ext-link" id="${this.TabNum}_link_${t_id}"></i>
                    <i class="fa fa-times tile-opt i-opt-close" aria-hidden="true" link="close" id="${this.TabNum}_close_${t_id}"></i>
                    </div></div>
                    <div id="${this.TabNum}_Label_${t_id}"></div>
                    <div data-id="${t_id}" class="db-tbl-wraper tile_dt_cont" id="${this.drop_id}">
                    </div></div></div>`, x, y, dw, dh, false);
                this.CurrentTile = t_id;
                this.TileCollection[t_id] = this.EbObject.Tiles.$values[i];
                let refid = this.EbObject.Tiles.$values[i].RefId;
                Eb_Tiles_StyleFn(this.TileCollection[this.CurrentTile], this.CurrentTile, this.TabNum);
                if (refid !== "") {
                    this.loader.show();
                    $(`[data-id = ${this.CurrentTile}]`).css("display", "block");
                    $.ajax(
                        {
                            url: '../DashBoard/DashBoardGetObj',
                            type: 'POST',
                            data: { refid: refid },
                            error: function (request, error) {
                                $(".dash-loader").hide();
                                EbPopBox("show", {
                                    Message: "Failed to get data from DataSourse",
                                    ButtonStyle: {
                                        Text: "Ok",
                                        Color: "white",
                                        Background: "#508bf9",
                                        Callback: function () {
                                            //$(".dash-loader").hide();
                                        }
                                    }
                                });
                            },
                            success: this.TileRefidChangesuccess.bind(this, this.CurrentTile)
                        });

                }
                else {
                    this.loader.show();
                    $(`#${this.TabNum}_restart_${t_id}`).remove();
                    $(`#${this.TabNum}_link_${t_id}`).remove();
                    $(`#${t_id}`).attr("eb-type", "gauge");
                    $(`#${t_id} .tile-header`).removeClass("tile-header");

                    $.each(currentobj.ComponentsColl.$values, function (i, Cobj) {
                        if (!this.Procs.hasOwnProperty(Cobj.EbSid)) {
                            var eb_type = Cobj.$type.split('.').join(",").split(',')[2].split("Eb")[1];
                            this.makeElement(eb_type, Cobj);
                            let Cobject = this.Procs[this.currentId];
                            this.TileCollection[t_id].ComponentsColl.$values[i] = Cobject;
                            //$.extend(Cobject, Cobj);
                            this.ComponentDrop("#component_cont", Cobject);
                            this.GetComponentColumns(Cobject);
                        }
                    }.bind(this));

                    this.drake.containers.push(document.getElementById(this.drop_id));

                    $.each(currentobj.ControlsColl.$values, function (i, obj) {
                        var eb_type = obj.$type.split('.').join(",").split(',')[2].split("Eb")[1];
                        this.makeElement(eb_type, obj);
                        let object = this.Procs[this.currentId];
                        this.TileCollection[t_id].ControlsColl.$values[i] = object;
                        $(`[data-id="${this.CurrentTile}"]`).append(object.$Control[0]);
                        //this.labelstyleApply(this.CurrentTile);
                        if (eb_type === "Gauge") {
                            if (object.DataObjCtrlName === "" || object.DataObjColName === "") {
                                let xx = EbGaugeWrapper(obj, { isEdit: false });
                            }
                            this.GaugeDrop(object.DataObjCtrlName, object.DataObjColName, object.EbSid, "Gauge");
                        }
                        else if (eb_type === "SpeedoMeter") {
                            if (object.DataObjCtrlName === "" || object.DataObjColName === "") {
                                let xx = SpeedoMeterWrapper(obj, { isEdit: false });
                            }
                            this.GaugeDrop(object.DataObjCtrlName, object.DataObjColName, object.EbSid, "speedometer");
                        }
                        else if (eb_type === "ProgressGauge") {
                            if (object.DataObjCtrlName === "" || object.DataObjColName === "") {
                                let xx = ProgressGaugeWrapper(obj, { isEdit: false });
                            }
                            $(`#${object.EbSid}`).css("max-width", $(`#${object.EbSid}`).height() + 10 + "px");
                            this.GaugeDrop(object.DataObjCtrlName, object.DataObjColName, object.EbSid, "ProgressGauge");
                        }
                        this.drake.containers.push(document.getElementById(this.currentId));
                        //this.drake.containers.push(document.getElementById(this.drop_id));
                        this.propGrid.setObject(object, AllMetas["Eb" + eb_type]);
                    }.bind(this));
                    Eb_Tiles_StyleFn(this.TileCollection[this.CurrentTile], this.CurrentTile, this.TabNum);
                    $.each(currentobj.LabelColl.$values, function (i, obj) {
                        var eb_type = obj.$type.split('.').join(",").split(',')[2].split("Eb")[1];
                        this.makeElement(eb_type, obj);
                        this.LabelDrop(obj.DataObjCtrlName, obj.DataObjColName, obj.EbSid);
                        let object = this.Procs[this.currentId];
                        let designHtml = this.MakeDashboardLabel(object);
                        $(`[data-id="${this.CurrentTile}"]`).append(designHtml);
                        this.labelstyleApply(this.CurrentTile);
                        EbDataLabelFn(obj);
                        this.TileCollection[t_id].LabelColl.$values[i] = object;
                        //this.drake.containers.push(document.getElementById(this.drop_id));
                        this.propGrid.setObject(object, AllMetas["Eb" + eb_type]);
                    }.bind(this));
                    if (currentobj.LinksColl) {
                        $.each(currentobj.LinksColl.$values, function (i, obj) {
                            var eb_type = obj.$type.split('.').join(",").split(',')[2].split("Eb")[1];
                            this.makeElement(eb_type, obj);
                            let object = this.Procs[this.currentId];
                            let designHtml = this.MakeLinks(object);
                            $(`[data-id="${this.CurrentTile}"]`).append(designHtml);
                            this.labelstyleApply(this.CurrentTile);
                            LinkStyle(obj, this.CurrentTile, this.TabNum, this.GetFilterValuesForDataSource());
                            this.TileCollection[t_id].LinksColl.$values[i] = object;
                        }.bind(this));
                    }
                    if (currentobj.Transparent) {
                        $(`[data-id="${this.CurrentTile}"]`).parent().css("background", "transparent");
                        $(`[data-id="${this.CurrentTile}"]`).parent().css("border", "0px solid");
                        $(`[data-id="${this.CurrentTile}"]`).parent().css("border", "0px solid");
                        $(`#${this.CurrentTile} .db-title`).empty();
                        $(`#${this.CurrentTile}`).addClass("user-control-tile-opt");
                        $(`#${this.CurrentTile} .i-opt-obj`).hide();
                        $(`#${this.CurrentTile} .i-opt-restart`).css({ "border": "solid 0px #dcdcdc" });
                    }
                    this.RedrwFnHelper(this.CurrentTile);
                    this.loader.hide();
                    this.DataLabelContext();
                }

            }
            //this.addTilecontext()
            this.Tilecontext();
            this.DuplicateGaugeContext();
            //this.DuplicateTileContext();
        }
        else {
            this.GridStackInit();
        }
        $(".grid-stack , .Eb-ctrlContainer").on("click", this.TileSelectorJs.bind(this));
        //this.addTilecontext()
        this.Tilecontext();

    }

    this.AddNewTile = function (data_width, data_height, data_min_height, data_min_width) {
        this.data_width = data_width ? data_width : 12;
        this.data_min_width = data_min_width ? data_width : 7;
        this.data_min_height = data_min_height ? data_height : 3;
        this.data_height = data_height ? data_height : 5;
        //$('.grid-stack').gridstack();
        this.NewTileCount++;
        let j = this.NewTileCount;
        let tile_id = "t" + j;
        let t_id = "tile" + j;
        let drop_id = "drop_" + t_id;
        //grid.addWidget(`<div id="${tile_id}" eb-id="${t_id}" data-gs-min-width="${data_min_width}" data-gs-min-height="${data_min_height}" >
        //            <div class="grid-stack-item-content" id="${t_id}">
        //            <div style="display:flex;" class="db-title-parent tile-header">
        //            <div class="db-title" data-toggle="move" title="move tile" name-id="${t_id}" style="display:float"></div>
        //            <div style="float:right;display:flex" u-id="${t_id}">
        //            <i class="fa fa-retweet tile-opt i-opt-restart" aria-hidden="true" link="restart-tile" id="${this.TabNum}_restart_${t_id}"></i>
        //            <i class="fa fa-external-link tile-opt i-opt-obj" aria-hidden="true" link="ext-link" id="${this.TabNum}_link_${t_id}"></i>
        //            <i class="fa fa-times tile-opt i-opt-close" aria-hidden="true" link="close" id="${this.TabNum}_close_${t_id}"></i>
        //            </div></div>
        //         <div id="${this.TabNum}_Label_${t_id}" class=""></div>
        //         <div data-id="${t_id}" class="db-tbl-wraper tile_dt_cont" id="${drop_id}" ></div></div>
        //             <div class="tile-footer"></div>
        //        </div>`, 0 , 0, this.data_width, this.data_height, true);

        grid.addWidget(`<div id="${tile_id}" eb-id="${t_id}" >                      
                        <div class="grid-stack-item-content" id="${t_id}">
                    <div style="display:flex;" class="db-title-parent tile-header">
                    <div class="db-title" data-toggle="move" title="move tile" name-id="${t_id}" style="display:float"></div>
                    <div style="float:right;display:flex" u-id="${t_id}">
                    <i class="fa fa-retweet tile-opt i-opt-restart" aria-hidden="true" link="restart-tile" id="${this.TabNum}_restart_${t_id}"></i>
                    <i class="fa fa-external-link tile-opt i-opt-obj" aria-hidden="true" link="ext-link" id="${this.TabNum}_link_${t_id}"></i>
                    <i class="fa fa-times tile-opt i-opt-close" aria-hidden="true" link="close" id="${this.TabNum}_close_${t_id}"></i>
                    </div></div>
                 <div id="${this.TabNum}_Label_${t_id}" class=""></div>
                 <div data-id="${t_id}" class="db-tbl-wraper tile_dt_cont" id="${drop_id}" ></div></div>
                     <div class="tile-footer"></div>
                        </div></div>`, 0, 0, this.data_width, this.data_height, true);
        this.TileCollection[t_id] = new EbObjects.Tiles("Tile" + Date.now());
        this.CurrentTile = t_id;
        Eb_Tiles_StyleFn(this.TileCollection[this.CurrentTile], this.CurrentTile, this.TabNum);
        return drop_id;
    };


    //focus Ebobjects
    this.TileSelectorJs = function (e) {
        let procId;
        this.CurrentTile = $(event.target).closest(".tile_dt_cont").attr("data-id");
        if ($(event.target).closest(".guage").attr("id")) {
            this.JqObj = $(event.target).closest(".guage");
            procId = this.JqObj.attr("id");
            metaId = this.JqObj.attr("eb-type");
            if (metaId && procId) { this.propGrid.setObject(this.Procs[procId], AllMetas["Eb" + metaId]); }
        }
        else if ($(event.target).closest(".link-dashboard-pane").attr("id")) {
            this.JqObj = $(event.target).closest(".link-dashboard-pane");
            procId = this.JqObj.attr("id");
            metaId = this.JqObj.attr("eb-type");
            if (metaId && procId) { this.propGrid.setObject(this.Procs[procId], AllMetas["Eb" + metaId]); }
        }
        else if ($(event.target).closest(".display-block").attr("id")) {
            procId = $(event.target).closest(".display-block").attr("id")
            metaId = $(event.target).closest(".display-block").attr("eb-type");
            if (metaId && procId) { this.propGrid.setObject(this.Procs[procId], AllMetas["Eb" + metaId]); }
        }
        else if ($(event.target).closest(".grid-stack-item-content").attr("id")) {
            this.CurrentTile = $(event.target).closest(".grid-stack-item-content").attr("id");
            this.propGrid.setObject(this.TileCollection[`${this.CurrentTile}`], AllMetas["Tiles"]);
        }
        else {
            this.propGrid.setObject(this.EbObject, AllMetas["EbDashBoard"]);
        }
        //metaId = $(event.target).closest(".gaugeChart").attr("eb-type");
        //let a = $(event.target).closest(".grid-stack-item-content").attr("id");
        //if (procId != null) {
        //    this.propGrid.setObject(this.Procs[procId], AllMetas["Eb" + metaId]);
        //}
        //else if (a != null) {
        //    this.CurrentTile = a;
        //    this.propGrid.setObject(this.TileCollection[`${this.CurrentTile}`], AllMetas["Tiles"]);
        //}  
    }.bind(this);

    this.popChanged = function (obj, pname, newval, oldval) {
        if (pname === "TileRefId") {
            this.loader.show();
            $(`[name-id="${this.CurrentTile}"]`).empty();
            $(`[data-id="${this.CurrentTile}"]`).empty();
            $(`.eb-loader-prcbar`).remove();
            this.VisRefid = newval;
            $.ajax(
                {
                    url: '../DashBoard/DashBoardGetObj',
                    type: 'POST',
                    data: { refid: this.VisRefid },
                    success: this.TileRefidChangesuccess.bind(this, this.CurrentTile)
                });
        }
        if (pname === "Filter_Dialogue") {
            if (newval !== "") {
                this.getColumns();
            }
            else {
                $('.param-div-cont').remove();
                if (this.FilterBtn) this.FilterBtn.remove();
            }
        }
        if (obj.$type.indexOf("EbDataObject") > -1 && pname === "DataSource") {
            this.GetComponentColumns(obj);
        }
        if (obj.$type.indexOf("EbGauge") > 0) {
            let xx = EbGaugeWrapper(this.Procs[obj.EbSid], { isEdit: true });
        }
        if (obj.$type.split(".")[2].split(",")[0] === "EbDataLabel") {
            let designHtml = this.MakeDashboardLabel(obj);
            $(`[data-id="${this.CurrentTile}"]`).empty().append(designHtml);
            EbDataLabelFn(obj);
        }
        if (obj.$type.split(".")[2].split(",")[0] === "Tiles") {
            Eb_Tiles_StyleFn(obj, this.CurrentTile, this.TabNum);
        }
        if (obj.$type.split(".")[2].split(",")[0] === "EbDashBoard") {
            Eb_Dashboard_Bg(this.EbObject);
        }
        if (obj.$type.split(".")[2].split(",")[0] === "EbLinks") {
            LinkStyle(obj, this.CurrentTile, this.TabNum);
        }
        if (obj.$type.indexOf("ProgressGauge") > 0) {
            let xx = ProgressGaugeWrapper(this.Procs[obj.EbSid], { isEdit: true });
        }
    };

    this.GetComponentColumns = function (obj) {
        this.loader.show();
        let Refid = obj["DataSource"];
        this.GetFilterValuesForDataSource();
        this.Rowdata[obj.EbSid + "Row"] = null;
        //this.GetFilterValuesForDataSource();
        $.ajax({
            type: "POST",
            url: "../DS/GetData4DashboardControl",
            data: { DataSourceRefId: Refid, param: this.filtervalues },
            async: false,
            error: function (request, error) {
                this.loader.hide();
                EbPopBox("show", {
                    Message: "Failed to get data from DataSourse",
                    ButtonStyle: {
                        Text: "Ok",
                        Color: "white",
                        Background: "#508bf9",
                        Callback: function () {
                            //$(".dash-loader").hide();
                        }
                    }
                });
            },
            success: function (resp) {
                obj["Columns"] = JSON.parse(resp.columns);
                this.propGrid.setObject(obj, AllMetas["EbDataObject"]);
                this.DisplayColumns(obj);
                this.Rowdata[obj.EbSid + "Row"] = resp.row;
                this.loader.hide();
            }.bind(this)
        });
    };

    this.DisplayColumns = function (obj) {
        var DataObj = obj;
        $(`#${obj.EbSid} .eb-ctrl-label`).empty().append(obj.Name);
        $.each(obj.Columns.$values, function (j, obj) {
            icon = this.getIcon(obj.RenderType);
            $(`#Inner_tree_${DataObj.EbSid}`).append(`<li data-ctrl='${DataObj.EbSid}' data-column='${obj.name}' type=${obj.Type} class='col-div-blk' eb-type="DataLabel"><span ><i class='fa ${icon}'></i> ${obj.name}</span></li>`);
        }.bind(this));
        $(`#Inner_Cont_${obj.EbSid}`).killTree();
        $(`#Inner_Cont_${obj.EbSid}`).treed();
        //for (let i = 0; i < obj['Columns'].$values.length; i++) {
        //    let column = obj['Columns'].$values[i];
        //    let name = column.name;
        //    $(`#Inner_Cont_${obj.EbSid}`).append(`<div data-ctrl='${obj.EbSid}' data-column='${name}' type=${column.Type} class='col-div-blk' eb-type="DataLabel"> ${name}</div>`);
        //}
    };
    this.getIcon = function (type) {
        if (type === 16) {
            return this.EbParams.Icons["String"];
        }
        else if (type === 7 || type === 8 || type === 10 || type === 11 || type === 12 || type === 21) {
            return this.EbParams.Icons["Numeric"];
        }
        else if (type === 3) {
            return this.EbParams.Icons["Bool"];
        }
        else if (type === 5 || type === 6 || type === 17 || type === 26) {
            return this.EbParams.Icons["DateTime"];
        }
    };


    this.Tilecontext = function () {
    };

    this.TileRefidChangesuccess = function (id, data) {
        $(`#${id}`).attr("eb-type", "view");
        if (this.filtervalues.length === 0) {
            this.GetFilterValuesForDataSource();
        }
        let obj = JSON.parse(data);
        $(`[name-id="${id}"]`).empty().append(obj.DisplayName);
        //this.TileCollection[id].TileObject = obj;
        if (obj.$type.indexOf("EbTableVisualization") >= 0) {

            $(`[data-id="${id}"]`).append(`<div id="content_tb1${id}" class="wrapper-cont"><table id="tb1${id}" class="table display table-bordered compact"></table></div>`);
            var o = {};
            o.dsid = obj.DataSourceRefId;
            o.tableId = "tb1" + id;
            o.containerId = id;
            o.columns = obj.Columns.$values;
            o.dvObject = obj;
            o.IsPaging = false;
            o.showFilterRow = false;
            o.showCheckboxColumn = false;
            o.Source = "DashBoard";
            o.DisplayName = this.EbObject.DisplayName;
            o.drawCallBack = this.drawCallBack.bind(this, id);
            o.filterValues = btoa(unescape(encodeURIComponent(JSON.stringify(this.filtervalues))));
            var dt = new EbCommonDataTable(o);

            //$(`[data-id="${id}"]`).parent().removeAttr("style");
            //let a = $(`#${id} .dataTables_scrollHeadInner`).height() - 3;
            //$(`#${id} .dataTables_scrollBody`).css("height", `calc(100% - ${a}px)`);
            $("#objname").empty().text(this.EbObject.DisplayName);
            $(`#${id}`).addClass("box-shadow-style");
        }
        else if (obj.$type.indexOf("EbChartVisualization") >= 0) {
            $(`[data-id="${id}"]`).append(`<div id="canvasDivtb1${id}" class="CanvasDiv"></div>`);
            $(`#${id}`).addClass("chart-tile-opt");
            var o = {};
            o.tableId = "tb1" + id;
            o.dvObject = obj;
            o.filtervalues = this.filtervalues;
            o.DisplayName = this.EbObject.DisplayName;
            var dt = new EbBasicChart(o);
            $(`[data-id="${id}"]`).parent().removeAttr("style");
            $(`#${id}`).addClass("box-shadow-style");
        }
        else if (obj.$type.indexOf("EbUserControl") >= 0) {
            //$(`[data-id="${id}"]`).append(`<div id="${id}_UserCtrl" class="Db-user-ctrl"></div>`);
            //let height = $(`#${id}`).height();
            //let opts = {
            //    parentDiv: '#' + id + '_UserCtrl',
            //    refId: obj.RefId,
            //    params: this.filtervalues,
            //    height: height
            //}
            ////new EbUserCtrlHelper(opts);
            //$(`[data-id="${id}"]`).parent().css("background", "transparent");
            //$(`[data-id="${id}"]`).parent().css("border", "0px solid");
            //$(`[data-id="${id}"]`).parent().css("border", "0px solid");
            //$(`#${id} .db-title`).empty();
            //$(`#${id}`).addClass("user-control-tile-opt");
            //$(`#${id} .i-opt-obj`).hide();
            //$(`#${id} .i-opt-restart`).css({ "border": "solid 0px #dcdcdc" });
        }
        else if (obj.$type.indexOf("EbGoogleMap") >= 0) {
            $(`[data-id="${id}"]`).append(`<div id="canvasDivtb1${id}" class="CanvasDiv"></div>`);
            var o = {};
            o.tableId = "tb1" + id;
            o.dsobj = obj;
            o.Source = "Dashboard";
            o.filtervalues = this.filtervalues;
            o.googlekey = this.googlekey;
            o.DisplayName = this.EbObject.DisplayName;
            var dt = new mapView(o);
            $(`[data-id="${id}"]`).parent().removeAttr("style");
            $(`#${id}`).addClass("box-shadow-style");
        }
        $(".dash-loader").hide();
    }

    this.drawCallBack = function (id) {
        $(`[data-id="${id}"]`).parent().removeAttr("style");
        let a = $(`#${id} .dataTables_scrollHeadInner`).height();
        $(`#${id} .dataTables_scrollBody`).css("max-height", `calc(100% - ${a}px)`);
        Eb_Tiles_StyleFn(this.TileCollection[id], id, this.TabNum);
    }.bind(this);

    this.BeforeSave = function () {
        var obj = {};
        this.EbObject.Tiles.$values = [];
        this.EbObject.TileCount = 0;
        if (this.EbObject.EbSid === null || this.EbObject.EbSid === "")
            this.EbObject.EbSid = "ctrl_" + Date.now().toString(36);
        $(".grid-stack-item-content").each(function (j, val) {
            var id = $(val).parent().attr("id");
            var id2 = $(val).attr("id");
            //var id2 = $(`#${id}`).children().attr("id");
            this.TileCollection[id2].TileDiv.Data_x = ($(`#${id}`).attr("data-gs-x"));
            this.TileCollection[id2].TileDiv.Data_y = ($(`#${id}`).attr("data-gs-y"));
            this.TileCollection[id2].TileDiv.Data_width = ($(`#${id}`).attr("data-gs-width"));
            this.TileCollection[id2].TileDiv.Data_height = ($(`#${id}`).attr("data-gs-height"));
            this.EbObject.Tiles.$values.push(this.TileCollection[id2]);
            this.EbObject.TileCount = this.EbObject.TileCount + 1;
        }.bind(this));
        //this.RemoveColumnRef();
        return true;
    };

    //this.DashBoardSearch = function (e) {
    //    $(`#DashB-Searched-Obj`).empty();
    //    let val = $("#DashB-Search").val().trim();
    //    if (val === "" || val === null) {
    //        $(`#DashB-Searched-Obj`).hide().empty();
    //        $("#Eb-obj-sidebar-cont").show();
    //    }
    //    else {
    //        $(`#DashB-Searched-Obj`).show();
    //        $("#Eb-obj-sidebar-cont").hide();
    //        val = val.toLowerCase();
    //        let myarr = [];
    //        let count = 0;
    //        let containers = [];
    //        $.each(this.ebObjList, function (key, Val) {
    //            $.each(Val, function (i, Obj) {
    //                if (Obj.DisplayName.toLowerCase().indexOf(val) != -1) {
    //                    if (myarr.indexOf(Obj.EbObjectType) === -1) {
    //                        $("#DashB-Searched-Obj").append(`<div> 
    //                    <div class="sidebar-head" hs-id="${Obj.EbObjectType}" style="display:flex;"> <div class="${this.ObjIcons[Obj.EbObjectType]} db-sidebar-icon"></div>
    //                   ${this.ObjTypeName[Obj.EbObjectType]}</div>
    //                   <div id="${Obj.EbObjectType}" class="sidebar-content"><div refid="${Obj.RefId}" class="db-draggable-obj">${Obj.DisplayName}</div></div> 
    //                    </div>`);
    //                        myarr.push(Obj.EbObjectType);
    //                        containers.push(document.getElementById(`${Obj.EbObjectType}`));
    //                    }
    //                    else {
    //                        $(`#${Obj.EbObjectType}`).append(`<div refid="${Obj.RefId}" class="db-draggable-obj">${Obj.DisplayName}</div>`);
    //                    }
    //                }
    //            }.bind(this));


    //        }.bind(this));
    //        //containers.push(document.getElementById('grid-cont'));
    //        this.drake = dragula(containers, {
    //            copy: true,
    //            accepts: function (el, target, source, sibling) {
    //                if (source == target) {
    //                    return false;
    //                }
    //                else
    //                    return true; // elements can be dropped in any of the `containers` by default
    //            },
    //        });
    //        this.drake.off("drag").on("drag", this.columnsdrag.bind(this));
    //        this.drake.off("shadow").on("shadow", this.columnsshadow.bind(this));
    //        this.drake.off("drop").on("drop", this.columnsdrop.bind(this));
    //    }
    //};
    this.DashBoardSearch = function (e) {
        $("#DashB-Search").keyup(function () {

            // Retrieve the input field text and reset the count to zero
            var filter = $(this).val(), count = 0;

            // Loop through the comment list
            $(".db-draggable-obj").each(function () {

                // If the list item does not contain the text phrase fade it out
                if ($(this).text().search(new RegExp(filter, "i")) < 0) {
                    $(this).fadeOut();

                    // Show the list item if the phrase matches and increase the count by 1
                } else {
                    $(this).show();
                    count++;
                }
            });

            // Update the count
        });
    };
    //{
    //    let filter_id = store.get("Eb_Loc-" + ebcontext.sid + ebcontext.user.UserId);
    //    this.filtervalues.push(new fltr_obj(11, "eb_loc_id", filter_id ? filter_id : 1));
    //}

    this.GetFilterValuesForDataSource = function () {
        this.filtervalues = [];
        if (this.filterDialog)
            this.filtervalues = getValsForViz(this.filterDialog.FormObj);

        let temp = $.grep(this.filtervalues, function (obj) { return obj.Name === "eb_loc_id"; });
        if (temp.length === 0) {
            let abc = store.get("Eb_Loc-" + ebcontext.sid + ebcontext.user.UserId);
            this.filtervalues.push(new fltr_obj(11, "eb_loc_id", abc ? abc : 1));
        }
        temp = $.grep(this.filtervalues, function (obj) { return obj.Name === "eb_currentuser_id"; });
        if (temp.length === 0)
            this.filtervalues.push(new fltr_obj(11, "eb_currentuser_id", ebcontext.user.UserId));

        if (ebcontext.languages !== undefined) {
            temp = $.grep(this.filtervalues, function (obj) { return obj.Name === "eb_current_language_id"; });
            if (temp.length === 0)
                this.filtervalues.push(new fltr_obj(11, "eb_current_language_id", ebcontext.languages.getCurrentLanguage()));

            temp = $.grep(this.filtervalues, function (obj) { return obj.Name === "eb_current_locale"; });
            if (temp.length === 0)
                this.filtervalues.push(new fltr_obj(16, "eb_current_locale", ebcontext.languages.getCurrentLocale()));
        }

        if (this.FilterDiv) { this.FilterDiv.hide(); }
    };


    this.GetFilterValues = function () {
        this.loader.show();
        this.filtervalues = [];
        if (this.FilterDiv) { this.FilterDiv.hide(); }

        if (this.filterDialog)
            this.filtervalues = getValsForViz(this.filterDialog.FormObj);

        let temp = $.grep(this.filtervalues, function (obj) { return obj.Name === "eb_loc_id"; });
        if (temp.length === 0)
            this.filtervalues.push(new fltr_obj(11, "eb_loc_id", store.get("Eb_Loc-" + ebcontext.sid + ebcontext.user.UserId)));

        temp = $.grep(this.filtervalues, function (obj) { return obj.Name === "eb_currentuser_id"; });
        if (temp.length === 0)
            this.filtervalues.push(new fltr_obj(11, "eb_currentuser_id", ebcontext.user.UserId));

        if (ebcontext.languages !== undefined) {
            temp = $.grep(this.filtervalues, function (obj) { return obj.Name === "eb_current_language_id"; });
            if (temp.length === 0)
                this.filtervalues.push(new fltr_obj(11, "eb_current_language_id", ebcontext.languages.getCurrentLanguage()));

            temp = $.grep(this.filtervalues, function (obj) { return obj.Name === "eb_current_locale"; });
            if (temp.length === 0)
                this.filtervalues.push(new fltr_obj(16, "eb_current_locale", ebcontext.languages.getCurrentLocale()));
        }

        if (this.EbObject.Filter_Dialogue !== "") {
            this.Procs = {};
            CtrlCounters.DataLabelCounter = 0;
            CtrlCounters.DataObjectCounter = 0;
            //this.DrawTiles();
            if (this.EbObject.Tiles.$values.length !== 0) {
                setTimeout(this.DrawTiles.bind(this), 500);
                setTimeout(this.loader.hide, 1);
            }
            else {
                this.loader.hide();
            }
        }

    };

    //this.RemoveColumnRef = function () {
    //    this.__OSElist = [];
    //    this.__oldValues = [];
    //    $.each(this.EbObject.Columns.$values, function (i, obj) {
    //        obj.ColumnsRef = null;
    //        this.__OSElist.push($.extend({}, obj.__OSElist));
    //        obj.__OSElist = null;
    //        this.__oldValues.push($.extend({}, obj.__oldValues));
    //        obj.__oldValues = null;
    //    }.bind(this));
    //}

    this.DuplicateGaugeContext = function () {
        $.contextMenu({
            selector: '.gaugeChart',
            trigger: 'right',
            items: {
                "Duplicate Gauge": {
                    name: "Duplicate Gauge", icon: "copy", callback: this.DuplicateGauge.bind(this)
                },
                "Delete Gauge": {
                    name: "Delete Gauge", icon: "delete", callback: this.DeleteGauge.bind(this)
                },
                "Duplicate Tile": {
                    name: "Duplicate Tile", icon: "copy", callback: this.DuplicateTile.bind(this)
                },
            }
        });
        $('.gaugeChart').bind("contextmenu", this.setCurrentObj.bind(this));
        //$(document).bind("contextmenu", function (e) {
        //    // code to get the id of current li
        //});
    };

    //this.DuplicateTileContext = function () {
    //    $.contextMenu({
    //        selector: '.db-title-parent',
    //        trigger: 'right',
    //        items: {
    //            "Duplicate Tile": {
    //                name: "Duplicate Tile", icon: "edit", callback: this.DuplicateTile.bind(this)
    //            },
    //        }
    //    });
    //};

    this.setCurrentObj = function (e) {
        this.CurrentGaugeId = e.target.id.split("_")[0] == "" ? e.target.closest(".gaugeChart").id : e.target.id.split("_")[0];
        this.currentgauge = this.Procs[this.CurrentGaugeId];
        this.CurrentTile = $(`#${this.CurrentGaugeId}`).closest(".grid-stack-item-content").attr("id");

    };

    this.DuplicateTile = function (tile) {
        var tiles = this.TileCollection[this.CurrentTile];
        this.AddNewTile(this.TileCollection[this.CurrentTile].TileDiv.Data_width, this.TileCollection[this.CurrentTile].TileDiv.Data_height);
        this.TileCollection[this.CurrentTile].ComponentsColl.$values = tiles.ComponentsColl.$values;
        for (let i = 0; i < tiles.ControlsColl.$values.length; i++) {
            this.CurrentGaugeId = tiles.ControlsColl.$values[i].EbSid;
            this.currentgauge = this.Procs[this.CurrentGaugeId];
            this.DuplicateGauge();
        }
    };

    this.DuplicateGauge = function () {
        this.makeElement("Gauge");
        let obj = this.Procs[this.currentId];
        let EbSid = obj.EbSid;
        $(`#drop_${this.CurrentTile}`).append(obj.$Control[0]);
        var eb_type = obj.$type.split('.').join(",").split(',')[2].split("Eb")[1];
        this.drake.containers.push(document.getElementById(obj.EbSid));
        obj = $.extend(obj, this.currentgauge);
        obj.EbSid = EbSid;
        obj.EbSid_CtxId = EbSid;
        obj.Name = EbSid;
        this.TileCollection[this.CurrentTile].ControlsColl.$values.push(obj);

        if (eb_type === "Gauge") {
            let xx = EbGaugeWrapper(obj, { isEdit: true });
        }
        if (eb_type === "ProgressGauge") {
            let xx = ProgressGaugeWrapper(obj, { isEdit: true });
        }
        this.RedrwFnHelper(this.CurrentTile);
    };
    this.DataLabelContext = function () {
        $.contextMenu({
            selector: '.Label_Data_pane',
            trigger: 'right',
            items: {
                copy: { name: "Copy", callback: this.copyDataLabelStyle.bind(this) },
                Paste: { name: "Paste", callback: this.pasteDataLabelStyle.bind(this) }
            }
        });
    }
    this.copyDataLabelStyle = function (key, opt, e) {
        this.Copied_DL_Style = this.Procs[opt.$trigger[0].parentNode.id];
        this.Copied_DL_id = opt.$trigger[0].parentNode.id;
    };
    this.pasteDataLabelStyle = function (key, opt, e) {
        this.CurrentTile = opt.$trigger.closest(".grid-stack-item-content")[0].id;
        this.CurrentDataLabelId = opt.$trigger.closest(".display-block")[0].id;
        this.Current_DL = this.Procs[this.CurrentDataLabelId];
        this.Current_DL_id = opt.$trigger[0].parentNode.id;
        this.Current_DL.ChangeTextPositon = this.Copied_DL_Style.ChangeTextPositon;
        this.Current_DL.StaticLabelPosition = this.Copied_DL_Style.StaticLabelPosition;
        this.Current_DL.DynamicLabelPositon = this.Copied_DL_Style.DynamicLabelPositon;
        this.Current_DL.DescriptionPosition = this.Copied_DL_Style.DescriptionPosition;

        this.Current_DL.DescriptionFont = this.Copied_DL_Style.DescriptionFont;
        this.Current_DL.DynamicLabelFont = this.Copied_DL_Style.DynamicLabelFont;

        this.Current_DL.LabelBackColor = this.Copied_DL_Style.LabelBackColor;
        this.Current_DL.LabelBorderColor = this.Copied_DL_Style.LabelBorderColor;
        this.Current_DL.LabelBorderRadius = this.Copied_DL_Style.LabelBorderRadius;
        this.Current_DL.LabelStyle = this.Copied_DL_Style.LabelStyle;
        this.Current_DL.TextPosition = this.Copied_DL_Style.TextPosition;
        this.Current_DL.IsGradient = this.Copied_DL_Style.IsGradient;
        this.Current_DL.GradientColor1 = this.Copied_DL_Style.GradientColor1;
        this.Current_DL.GradientColor2 = this.Copied_DL_Style.GradientColor2;
        this.Current_DL.HideFooter = this.Copied_DL_Style.HideFooter;
        this.Current_DL.FooterIconColor = this.Copied_DL_Style.FooterIconColor;
        this.Current_DL.FooterTextColor = this.Copied_DL_Style.FooterTextColor;

        this.Current_DL.IconColor = this.Copied_DL_Style.IconColor;
        this.Current_DL.IconGradientColor1 = this.Copied_DL_Style.IconGradientColor1;
        this.Current_DL.IconGradientColor2 = this.Copied_DL_Style.IconGradientColor2;

        this.Current_DL.RenderIcon = this.Copied_DL_Style.RenderIcon;
        this.Current_DL.Shadow = this.Copied_DL_Style.Shadow;
        this.Current_DL.StaticLabelFont = this.Copied_DL_Style.StaticLabelFont;
        this.Current_DL.TextPosition = this.Copied_DL_Style.TextPosition;
        this.Current_DL.Top = this.Copied_DL_Style.Top;
        this.Current_DL.Left = this.Copied_DL_Style.Left;

        for (i = 0; i < this.EbObject.Tiles.$values.length; i++) {
            let temp = this.EbObject.Tiles.$values[i];
            if (this.EbObject.Tiles.$values[i].LabelColl.$values.length == 1) {
                if (this.EbObject.Tiles.$values[i].LabelColl.$values[0].EbSid == this.Current_DL_id) {
                    this.EbObject.Tiles.$values[i].LabelColl.$values[0] = this.Current_DL;
                }
            }
        }
        this.Procs[this.CurrentDataLabelId] = this.Current_DL;
        let htm = this.MakeDashboardLabel(this.Current_DL);
        $(`[data-id="${this.CurrentTile}"]`).empty().append(htm);
        EbDataLabelFn(this.Current_DL, this.CurrentTile)

    };
    this.DeleteGauge = function () {
        var obj = this.Procs[this.currentgauge.EbSid];
        this.drake.containers;
        var arr = this.TileCollection[this.CurrentTile].ControlsColl.$values;
        for (var i = arr.length - 1; i >= 0; i--) {
            if (arr[i] === obj) { arr.splice(i, 1); }
        }
        this.TileCollection[this.CurrentTile].ControlsColl.$values = [];
        this.TileCollection[this.CurrentTile].ControlsColl.$values = arr;
        arr = this.drake.containers;
        for (var i = arr.length - 1; i >= 0; i--) {
            if (arr[i] === $(`#${obj.EbSid}`)[0]) { arr.splice(i, 1); }
        }
        this.drake.containers = [] = arr;
        //this.TileCollection[this.CurrentTile].ControlsColl.$values = $.each(arr, function (index, item) {
        //    return item.EbSid != obj.EbSid;
        //});
        delete this.Procs[`${obj.EbSid}`];
        $(`#${obj.EbSid}`).remove();
        this.RedrwFnHelper(this.CurrentTile);
    };

    this.init();
    $('.component_cont').on('hide.bs.collapse', function (e) {
        $("#dashbord-view").css("height", 85 + "vh");
    })
    $('.component_cont').on('show.bs.collapse', function (e) {
        ;
        $("#dashbord-view").css("height", 72.2 + "vh");
    })
}

$(document).ready(function () {
    $('[data-toggle="move"]').tooltip();
});

var EbCommonDataTable = function (Option) {

    //let AllMetas = AllMetasRoot["EbDataVisualizationObject"];// newly added line to declare a local variable named "AllMetas"  which contains contextaul metas

    //if (typeof (AllMetas) === 'undefined') var AllMetas = AllMetas_w;
    //if (typeof (EbEnums) === 'undefined') var EbEnums = EbEnums_w;
    //if (typeof (EbObjects) === 'undefined') var EbObjects = EbObjects_w;

    this.propGrid = Option.PGobj;
    this.Api = null;
    this.order_info = new Object();
    this.order_info.col = '';
    this.order_info.dir = 0;
    this.MainData = Option.data || null;
    this.isPipped = false;
    this.isContextual = false;
    this.chartJs = null;
    this.url = Option.url;
    this.EbObject = Option.dvObject;
    this.showFilterRow = typeof Option.showFilterRow !== 'undefined' ? Option.showFilterRow : true;
    this.showSerialColumn = typeof Option.showSerialColumn !== 'undefined' ? Option.showSerialColumn : true;
    this.showCheckboxColumn = typeof Option.showCheckboxColumn !== 'undefined' ? Option.showCheckboxColumn : true;
    this.hiddenFieldName = Option.hiddenFieldName || "id";
    this.tabNum = Option.tabNum;
    this.Refid = Option.refid;
    this.tableId = Option.tableId || null;
    this.ssurl = Option.ssurl;
    this.login = Option.login;
    this.counter = Option.counter;
    this.datePattern = Option.datePattern || "dd-MM-yyyy";
    this.mmtDateFormat = ebcontext.user.Preference.ShortDatePattern || 'DD-MM-YYYY';//
    this.TenantId = Option.TenantId;
    this.UserId = Option.UserId;
    this.relatedObjects = null;
    this.FD = false;
    this.table_jQO = null;
    this.filterBox = null;
    this.filterbtn = null;
    this.clearfilterbtn = null;
    this.totalpagebtn = null;
    this.copybtn = null;
    this.printbtn = null;
    this.settingsbtn = null;
    this.OuterModalDiv = null;
    this.settings_tbl = null;
    this.ajaxCallCounter = 0;

    this.eb_filter_controls_4fc = [];
    this.eb_filter_controls_4sb = [];
    this.zindex = 0;
    this.rowId = -1;
    this.dropdown_colname = null;
    this.deleted_colname = null;
    this.tempcolext = [];
    this.linkDV = null;
    this.filterFlag = false;
    this.rowData = Option.rowData ? JSON.parse(decodeURIComponent(escape(window.atob(Option.rowData)))) : null;
    this.filterValues = Option.filterValues ? JSON.parse(decodeURIComponent(escape(window.atob(Option.filterValues)))) : [];
    this.FlagPresentId = false;
    this.flagAppendColumns = false;
    this.drake = null;
    this.draggedPos = null;
    this.droppedPos = null;
    this.dragNdrop = false;
    this.flagColumnVisible = false;
    this.pg = null;
    this.ppgridChildren = null;
    this.columnDefDuplicate = null;
    this.extraCol = [];
    this.PcFlag = false;
    this.modifyDVFlag = false;
    this.initCompleteflag = false;
    this.isTagged = false;
    this.isRun = false;
    this.cellData = Option.cellData;
    this.columnSearch = [];
    this.isSecondTime = false;
    this.tempColumns = [];
    this.filterHtml = "";
    this.orderColl = [];
    this.RGIndex = [];
    this.NumericIndex = [];
    this.inline = false;
    this.rowgroupCols = [];
    this.treeCols = [];
    this.rowgroupFilter = [];
    this.CurrentRowGroup = null;
    this.permission = [];
    this.isCustomColumnExist = false;
    this.dvformMode = -1;
    this.IsTree = false;
    this.GroupFormLink = null;
    this.ItemFormLink = null;
    this.treeColumn = null;
    this.treeData = [];
    this.tableName = null;
    this.moveToPid = null;
    this.movefromId = null;
    this.columnCount = null;
    this.Source = Option.Source || "EbDataTable";
    this.columns = Option.columns || ((this.EbObject) ? this.EbObject.Columns.$values : null);
    this.contId = Option.containerId;
    this.scrollHeight = Option.scrollHeight || "inherit";
    this.IsPaging = typeof Option.IsPaging !== 'undefined' ? Option.IsPaging : true;
    this.LeftFixedColumn = Option.LeftFixedColumn || 0;
    this.RightFixedColumn = Option.RightFixedColumn || 0;
    this.RowHeight = Option.RowHeight || "15";
    this.ObjectLinks = Option.ObjectLinks || [];
    this.AllowSelect = typeof Option.AllowSelect !== 'undefined' ? Option.AllowSelect : true;
    this.AllowSorting = typeof Option.AllowSorting !== 'undefined' ? Option.AllowSorting : true;


    if (this.Source === "EbDataTable") {
        if (this.EbObject && this.EbObject.ApiRefId !== null && this.EbObject.ApiRefId !== "")
            this.Source = "PivotTable";
        this.split = new splitWindow("parent-div0", "contBox");

        this.split.windowOnFocus = function (ev) {
            $("#Relateddiv").hide();
            if ($(ev.target).attr("class") !== undefined) {
                if ($(ev.target).attr("class").indexOf("sub-windows") !== -1) {
                    var id = $(ev.target).attr("id");
                    focusedId = id;
                }
            }
        }.bind(this);

        this.init = function () {
            this.tableId = "dv" + this.EbObject.EbSid + "_" + this.tabNum + "_" + this.counter;
            this.ContextId = "filterWindow_" + this.tableId;
            this.FDCont = $(`<div id='${this.ContextId}' class='filterCont fd'></div>`);
            $("#parent-div0").before(this.FDCont);
            $(".filterCont").hide();
        };
    }


    this.call2FD = function (value) {
        if (this.Source === "EbDataTable") {
            this.submitId = "btnGo" + this.tableId;
            var isCustom = (typeof (value) !== "undefined") ? ((value === "Yes") ? true : false) : true;
            this.relatedObjects = this.EbObject.DataSourceRefId;
            $("#eb_common_loader").EbLoader("show", { maskItem: { Id: "#parent", Style: { "top": "39px", "margin-left": "unset", "margin-right": "unset" } }, maskLoader: false });
            $.ajax({
                type: "POST",
                url: "../DV/dvCommon",
                data: { dvobj: JSON.stringify(this.EbObject), dvRefId: this.Refid, _flag: this.PcFlag, login: this.login, contextId: this.ContextId, customcolumn: isCustom, _curloc: ebcontext.locations.CurrentLoc, submitId: this.submitId },
                success: this.ajaxSucc
            });
        }
        else {
            if (this.columns === null) {
                $.ajax({
                    type: "POST",
                    url: "../boti/dvView1",
                    data: { dvobj: JSON.stringify(this.EbObject) },
                    success: this.ajaxSucc.bind(this)
                });
            }
        }
    };

    this.ajaxSucc = function (text) {
        if (this.Source === "EbDataTable" || this.Source === "PivotTable") {
            var flag = false;
            if (this.MainData !== null) {
                this.isPipped = true;
                $("#Pipped").show();
                $("#Pipped").text("Pipped From: " + this.EbObject.Pippedfrom);
                this.filterValues = dvcontainerObj.dvcol[prevfocusedId].filterValues;
            }
            else if (this.filterValues !== null && this.filterValues.length > 0) {
                this.isContextual = true;
            }
            else
                this.isTagged = true;
            var subDivId = "#sub_window_dv" + this.EbObject.EbSid + "_" + this.tabNum + "_" + this.counter;
            $("#content_dv" + this.EbObject.EbSid + "_" + this.tabNum + "_" + this.counter).empty();
            this.filterHtml = text;
            let search = $('#obj_icons .toolb-srchbx-wrpr').detach();
            $('#obj_icons').empty().append(search);
            this.$submit = $("<button id='" + this.submitId + "' class='btn commonControl'><i class='fa fa-play' aria-hidden='true'></i></button>");
            $("#obj_icons").append(this.$submit);
            this.$submit.click(this.getColumnsSuccess.bind(this));

            this.FDCont = $("#filterWindow_" + this.tableId);
            $("#filterWindow_" + this.tableId).empty();
            $("#filterWindow_" + this.tableId).append("<div class='pgHead'> Param window <div class='icon-cont  pull-right' id='close_paramdiv_" + this.tableId + "'><i class='fa fa-thumb-tack' style='transform: rotate(90deg);'></i></div></div>");//

            $("#filterWindow_" + this.tableId).children().find("#close_paramdiv_" + this.tableId).off('click').on('click', this.CloseParamDiv.bind(this));

            $("#filterWindow_" + this.tableId).append(text);
            $("#filterWindow_" + this.tableId).children().find("#btnGo").click(this.getColumnsSuccess.bind(this));

            this.FilterDialog = (typeof (FilterDialog) !== "undefined") ? FilterDialog : {};

            if (text !== "") {
                if (typeof commonO !== "undefined")
                    this.EbObject = commonO.Current_obj;
                else
                    this.EbObject = dvcontainerObj.currentObj;
            }
            //this.InitializeColumns();
            this.SetColumnRef();
            //this.propGrid.setObject(this.EbObject, AllMetas["EbTableVisualization"]);
            if (this.PcFlag === true)
                this.compareAndModifyRowGroup();

            if (jQuery.isEmptyObject(this.FilterDialog)) {
                this.FD = false;
                $(".filterCont").hide();
                $("#eb_common_loader").EbLoader("hide");
                this.$submit.trigger("click");
            }
            else {
                $(".ppcont").hide();
                this.filterid = "filter" + this.tableId;
                this.$filter = $("<button id='" + this.filterid + "' class='btn commonControl'><i class='fa fa-filter' aria-hidden='true'></i></button>");
                $("#obj_icons").append(this.$filter);
                this.$filter.click(this.CloseParamDiv.bind(this));
                this.FD = true;
                if (this.isPipped || this.isContextual) {
                    this.placefiltervalues();
                    if (this.isContextual) {
                        this.filterValues = this.getFilterValues();
                    }
                    if (!this.FilterDialog.FormObj.AutoRun) {
                        this.$submit.trigger("click");
                    }
                }
                else {
                    this.FDCont.show();
                }
                $("#eb_common_loader").EbLoader("hide");
            }
            $(subDivId).focus();

            this.PcFlag = false;

            if (this.propGrid !== null) {
                //this.propGrid.PropertyChanged = this.tmpPropertyChanged;
                //this.CreatePgButton();
            }
        }
        else {
            if (this.MainData !== null)
                this.isPipped = true;
            $("#" + this.contId).append(text);////////////////        
            this.EbObject = dvGlobal.Current_obj;
            this.getColumnsSuccess();
        }
        this.FDCont.css("right", "0");
    }.bind(this);

    this.GetFD = function () {
        $("#eb_common_loader").EbLoader("show");
        this.RemoveColumnRef();
        this.FilterDialogRefId = this.EbObject.FilterDialogRefId;
        if (this.FilterDialogRefId !== "" && this.FilterDialogRefId)
            $.post("../dv/GetFilterBody", { dvobj: JSON.stringify(this.EbObject), contextId: "paramdiv" + this.tabNum }, this.ajaxSucc.bind(this));
    };

    this.GetFD4Pivot = function () {
        $("#eb_common_loader").EbLoader("show");
        this.RemoveColumnRef();
        this.ApiRefId = this.EbObject.ApiRefId;
        if (this.ApiRefId !== "" && this.ApiRefId)
            $.post("../dv/GetFD4Pivot", { dvobj: JSON.stringify(this.EbObject), contextId: "paramdiv" + this.tabNum }, this.ajaxSucc.bind(this));
    };

    this.SetColumnRef = function () {
        $.each(this.EbObject.Columns.$values, function (i, obj) {
            obj.ColumnsRef = this.EbObject.Columns;
        }.bind(this));
    };

    this.RemoveColumnRef = function () {
        $.each(this.EbObject.Columns.$values, function (i, obj) {
            obj.ColumnsRef = null;
        }.bind(this));
    };

    this.CloseParamDiv = function () {
        this.FDCont.toggle('drop', { direction: 'right' }, 150);
        if (this.FDCont.is(":visible"))
            $(".ppcont").hide();
    };

    this.tmpPropertyChanged = function (obj, Pname, newval, oldval) {
        //this.isSecondTime = true;
        if (Pname === "Name") {
            $("#objname").text(obj.DisplayName);
            console.log(obj);
        }
        else if (Pname === "Columns") {
            console.log(obj);
        }
        else if (Pname === "Formula") {
            this.ValidateCalcExpression(obj);
        }
        else if (Pname === "RowGroupCollection") {
            this.CurrentRowGroup = null;
            this.rowgroupCols = [];
        }
    }.bind(this);

    this.dialogboxAction = function (value) {
        this.call2FD(value);
    };

    this.compareAndModifyRowGroup = function () {
        var temparr = [];
        $.each(this.EbObject.RowGroupCollection.$values, function (i, obj) {
            $.each(obj.RowGrouping.$values, function (j, col) {
                var tempcol = $.grep(this.EbObject.Columns.$values, function (column) { return column.name === col.name && column.Type === col.Type });
                if (tempcol.length !== 1) {
                    temparr.push(i);
                    return false;
                }
            }.bind(this));
        }.bind(this));
        $.each(temparr, function (i, index) {
            this.EbObject.RowGroupCollection.$values.splice(index, 1);
        }.bind(this));
        this.CurrentRowGroup = null;
    };

    //Initialisation
    this.start4EbDataTable = function () {
        if (this.EbObject === null) {
            this.EbObject = new EbObjects["EbTableVisualization"]("Container_" + Date.now());
            this.split.createContentWindow(this.EbObject.EbSid + "_" + this.tabNum + "_" + this.counter, "EbTableVisualization");
        }
        else {
            if (this.MainData !== null)
                this.split.createContentWindow(this.EbObject.EbSid + "_" + this.tabNum + "_" + this.counter, "EbTableVisualization", prevfocusedId);
            else
                this.split.createContentWindow(this.EbObject.EbSid + "_" + this.tabNum + "_" + this.counter, "EbTableVisualization");
        }

        $("#objname").text(this.EbObject.DisplayName);
        //this.propGrid.setObject(this.EbObject, AllMetas["EbTableVisualization"]);
        this.init();
        $("title").text(this.EbObject.DisplayName);
        if (this.EbObject.DataSourceRefId) {
            this.call2FD();
            this.EbObject.IsPaging = this.IsPaging;
        }
        else {
            this.EbObject.IsPaging = this.IsPaging = false;
            if (this.EbObject.IsDataFromApi && this.EbObject.FilterDialogRefId)
                this.GetFD();
            else if (this.EbObject.ApiRefId)
                this.GetFD4Pivot();
            else
                this.getColumnsSuccess();
        }
    };

    this.start4Other = function () {
        if (!this.EbObject)
            this.EbObject = new EbObjects["EbTableVisualization"]("Container_" + Date.now());
        if (this.columns === null)
            this.call2FD();
        else {
            this.EbObject.Columns.$values = this.columns;
        }
        if (this.MainData !== null)
            this.isPipped = true;
        this.EbObject.IsPaging = this.IsPaging;
        this.getColumnsSuccess();
    };

    this.getColumnsSuccess = function (e) {
        this.showEbLoader();
        if (this.Source === "EbDataTable") {
            this.Do4EbdataTable();
            this.Done4All();
        }
        else if (this.Source === "Calendar") {
            $("#" + this.contId).empty();
            $("#" + this.contId).append(`<table id="${this.tableId}" class="table display table-bordered compact"></table>`);
            this.EbObject.LeftFixedColumn = this.LeftFixedColumn;
            this.EbObject.RightFixedColumn = 0;
            this.EbObject.RowHeight = this.RowHeight;
            //this.EbObject.DataSourceRefId = Option.dsid;
            //this.MainData = null;
            this.Done4All();
        }
        else if (this.Source === "datagrid") {
            this.EbObject.LeftFixedColumn = this.LeftFixedColumn;
            this.EbObject.RightFixedColumn = this.RightFixedColumn;
            this.Done4All();
        }
        else if (this.Source === "WebForm") {
            this.MainData = null;
            this.totalcount = 0;
            this.Done4All();
        }
        else if (this.Source === "PivotTable") {
            this.GetData4Pivot();
        }
        else {
            this.Done4All();
        }
    };

    this.Done4All = function () {
        this.getNotvisibleColumns();
        this.initCompleteflag = false;
        this.extraCol = [];
        this.check4Customcolumn();
        this.CheckforTree();
        this.addSerialAndCheckboxColumns();
        this.ModifyColumnObject();
        this.treeCols = [];
        this.getColumnCount();
        //hard coding
        this.orderColl = [];
        let rowG_coll = this.EbObject.RowGroupCollection.$values;
        let CurR_RowG = this.CurrentRowGroup;
        if (rowG_coll.length > 0 && !this.EbObject.DisableRowGrouping) {
            if (CurR_RowG === null) {
                CurR_RowG = rowG_coll.find(obj => obj.RowGrouping.$values.length > 0);
                this.CurrentRowGroup = CurR_RowG;
            }
            this.visibilityCheck();
        }
        else {
            if (this.CurrentRowGroup !== null) {
                $.each(this.EbObject.Columns.$values, function (i, colobj) {
                    $.each(CurR_RowG.RowGrouping.$values, function (i, rgobj) {
                        if (colobj.name === rgobj.name) {
                            colobj.bVisible = true;
                        }
                    }.bind(this));
                }.bind(this));
            }
            this.CurrentRowGroup = null;
            this.RGIndex = [];
            this.rowgroupCols = [];

        }


        //----------
        if (this.EbObject.$type.indexOf("EbTableVisualization") !== -1) {
            $("#content_" + this.tableId).empty();
            $("#content_" + this.tableId).append("<div id='" + this.tableId + "divcont' class='wrapper-cont_inner'><table id='" + this.tableId + "' class='table display table-bordered compact'></table></div>");

        }
        this.Init();
    };

    this.GetData4Pivot = function () {
        $(".ppcont").hide();
        $(".filterCont").hide();
        if (this.FilterDialog) {
            this.validateFD = this.FilterDialog.IsFDValidationOK;
            if (this.isContextual) {
                if (this.isSecondTime) {
                    if (this.validateFD && !this.validateFD())
                        return;
                    this.filterValues = this.getFilterValues("filter");
                }
            }
            else {
                if (this.validateFD && !this.validateFD())
                    return;
                this.filterValues = this.getFilterValues("filter");
            }
        }
        $("#eb_common_loader").EbLoader("show");
        this.filtervalues = this.getFilterValues();
        this.RemoveColumnRef();
        $.ajax({
            url: "../dv/getData",
            type: 'POST',
            data: { RefId: null, DataVizObjString: JSON.stringify(this.EbObject), ModifyDv: true, Params: this.filtervalues, LocId: store.get("Eb_Loc-" + ebcontext.sid + ebcontext.user.UserId) },
            success: this.GetData4PivotSuccess.bind(this),
        });
    };

    this.GetData4PivotSuccess = function (result) {
        if (result.responseStatus) {
            if (result.responseStatus.message !== null) {
                console.log("Table View PreProcessing Error " + result.responseStatus.message);
                if (this.Source === "WebForm" || this.Source === "Bot" || this.Source === "DashBoard")
                    $("#" + this.tableId + "_processing").text("Something went wrong..");
                else
                    EbPopBox("show", { Message: "Table View PreProcessing Error Occured...", Title: "Error" });
            }
        }
        this.MainData = result;
        this.EbObject = JSON.parse(result.returnObjString);
        this.isPipped = true;
        this.Done4All();
    };

    this.getNotvisibleColumns = function () {
        if (this.EbObject.NotVisibleColumns.$values.length === 0)
            this.EbObject.NotVisibleColumns.$values = this.EbObject.Columns.$values.filter((obj) => !obj.bVisible);
    };

    this.Do4EbdataTable = function () {
        $("#objname").text(this.EbObject.DisplayName);
        if (this.isSecondTime)
            this.MainData = null;
        $(".ppcont").hide();
        $(".filterCont").hide();
        if (this.FilterDialog) {
            this.validateFD = this.FilterDialog.IsFDValidationOK;
            if (this.isContextual) {
                if (this.isSecondTime) {
                    if (this.validateFD && !this.validateFD())
                        return;
                    this.filterValues = this.getFilterValues("filter");
                }
            }
            else {
                if (this.validateFD && !this.validateFD())
                    return;
                this.filterValues = this.getFilterValues("filter");
            }
        }
        this.isSecondTime = false;
        this.totalcount = 0;
        //if (this.login === "uc")
        //    $(".dv-body1").show();
        $.extend(this.tempColumns, this.EbObject.Columns.$values);
        //this.tempColumns.sort(this.ColumnsComparer);
        this.dsid = this.EbObject.DataSourceRefId;//not sure..
        this.dvName = this.EbObject.Name;
    };

    this.check4Customcolumn = function () {
        var temp = $.grep(this.EbObject.Columns.$values, function (obj) { return obj.IsCustomColumn; });
        if (temp.length === 0)
            this.isCustomColumnExist = false;
        else {
            this.isCustomColumnExist = true;
            temp.forEach(function (x) {
                if (x.$type.indexOf("DVPhoneColumn") !== -1)
                    x.orderable = true;
                else
                    x.orderable = false;
            });
        }
    };

    this.CheckforTree = function () {
        var temp = $.grep(this.EbObject.Columns.$values, function (obj) { return obj.IsTree; });
        if (temp.length === 0) {
            //this.EbObject.DisableRowGrouping = false;
            this.IsTree = false;
        }
        else {
            this.EbObject.DisableRowGrouping = true;
            this.IsTree = true;
            this.GroupFormLink = temp[0].GroupFormLink;
            this.ItemFormLink = temp[0].ItemFormLink;
            this.treeColumn = temp[0];
            this.treeColumnIndex = (this.Source === "locationTree") ? 0 : this.EbObject.Columns.$values.findIndex(x => x.data === this.treeColumn.data);
        }
        if (this.IsTree)
            this.EbObject.IsPaging = false;
    };

    this.ModifyColumnObject = function () {
        if (this.IsTree) {
            this.EbObject.Columns.$values.map(function (x) {
                x.orderable = false;
                return x;
            });
        }
    };

    this.getColumnCount = function () {
        this.columnCount = this.rowgroupCols.length + this.extraCol.length;
        var temp = $.grep(this.EbObject.Columns.$values, function (obj) { return obj.bVisible; });
        this.columnCount += temp.length;
    };

    this.InitializeColumns = function () {
        $.each(this.EbObject.Columns.$values, function (i, col) {
            if (col.HideDataIfRowMoreThan === null)
                col.HideDataIfRowMoreThan = { "$type": "ExpressBase.Objects.Objects.DVRelated.HideColumnData, ExpressBase.Objects", "Enable": false, "UnRestrictedRowCount": 0, "ReplaceByCharacter": "", "ReplaceByText": "" };
        }.bind(this));
    };

    this.validateFD = function () { }

    this.Init = function () {
        //this.MainData = null;
        //$.event.props.push('dataTransfer');
        //this.Eb_DataTable_StyleFn();
        this.updateRenderFunc();
        this.table_jQO = $('#' + this.tableId);
        this.copybtn = $("#btnCopy" + this.tableId);
        this.printbtn = $("#btnPrint" + this.tableId);
        this.printSelectedbtn = $("#btnprintSelected" + this.tableId);
        this.excelbtn = $("#btnExcel" + this.tableId);
        this.csvbtn = $("#btnCsv" + this.tableId);
        this.pdfbtn = $("#btnPdf" + this.tableId);

        this.eb_agginfo = this.getAgginfo();

        this.table_jQO.append($(this.getFooterFromSettingsTbl()));

        //this.table_jQO.children("tfoot").hide();
        this.table_jQO.children().find("tr").addClass("addedbyeb");

        //this.table_jQO.on('pre-row-reorder.dt', function (e, node, index) {
        //    console.log('Row reorder started: ', node, index);
        //});

        this.table_jQO.on('processing.dt', function (e, settings, processing) {
            if (processing == true) {
                if (this.Source != 'WebForm') {
                    $("#obj_icons .btn").prop("disabled", true);
                    $("#eb_common_loader").EbLoader("show");
                }
            }
            else {
                if (this.Source != 'WebForm') {
                    $("#obj_icons .btn").prop("disabled", false);
                    $("#eb_common_loader").EbLoader("hide");
                }
                $("[data-coltyp=date]").datepicker("hide");
            }
        }.bind(this));

        jQuery.fn.dataTable.ext.errMode = 'throw';

        this.table_jQO.on('error.dt', function (settings, techNote, message) {
            console.log('An error has been reported by DataTables: ', message);
        });

        $.fn.dataTable.ext.errMode = function (settings, helpPage, message) {
            console.log("Table View Error......" + message);
            if (this.Source === "WebForm" || this.Source === "Bot" || this.Source === "DashBoard")
                $("#" + settings.sTableId + "_processing").text("Something went wrong..");
            else
                EbPopBox("show", { Message: "Table View Error Occured....", Title: "Error" });
            this.hideEbLoader();
        }.bind(this);

        if (this.Source === "datagrid")
            this.table_jQO.off('draw.dt').on('draw.dt', this.doSerial.bind(this));

        this.Api = this.table_jQO.DataTable(this.createTblObject());

        this.Api.off('select').on('select', this.selectCallbackFunc.bind(this));

        this.Api.off('key-focus').on('key-focus', this.DTKeyFocusCallback.bind(this));

        $('#' + this.tableId + ' tbody').off('dblclick').on('dblclick', 'tr', this.dblclickCallbackFunc.bind(this));
        //$('#' + this.tableId + ' tbody').off('click').on('click', 'td', this.DTclickTDCallbackFunc.bind(this));

        jQuery.fn.dataTable.Api.register('sum()', function () {
            return this.flatten().reduce(function (a, b) {
                if (typeof a === 'string') {
                    a = a.replace(/[^\d.-]/g, '') * 1;
                    if (isNaN(a))
                        a = 0;
                }
                if (typeof b === 'string') {
                    b = b.replace(/[^\d.-]/g, '') * 1;
                    if (isNaN(b))
                        b = 0;
                }

                return a + b;
            }, 0);
        });

        jQuery.fn.dataTable.Api.register('average()', function () {
            var data = this.flatten();
            var sum = data.reduce(function (a, b) {
                if (typeof a === 'string') {
                    a = a.replace(/[^\d.-]/g, '') * 1;
                    if (isNaN(a))
                        a = 0;
                }
                if (typeof b === 'string') {
                    b = b.replace(/[^\d.-]/g, '') * 1;
                    if (isNaN(b))
                        b = 0;
                }

                return (a * 1) + (b * 1); // cast values in-case they are strings
            }, 0);

            return sum / data.length;
        });

        //$('#' + this.tableId + ' tbody').off('click').on('click', 'tr', this.rowclick.bind(this));
        //$('#' + this.tableId + ' tbody').off('mouseenter').on('mouseenter mouseleave', 'tr', this.mouseenter.bind(this));

        //this.Api.on('row-reorder', function (e, diff, edit) {
        //});
    };

    this.addSerialAndCheckboxColumns = function () {
        this.CheckforColumnID();//, 
        var serialObj = new Object();
        serialObj.data = (this.Source === "datagrid") ? null : this.EbObject.Columns.$values.length;
        serialObj.searchable = false;
        serialObj.orderable = false;
        serialObj.bVisible = this.showSerialColumn;
        serialObj.name = "serial";
        serialObj.title = "#";
        serialObj.Type = 11;
        serialObj.sWidth = "10px";
        if (this.IsTree) {
            serialObj.bVisible = false;
        }
        this.extraCol.push(serialObj);
        this.addcheckbox();
    }

    this.CheckforColumnID = function () {
        this.FlagPresentId = false;
        $.each(this.EbObject.Columns.$values, function (i, col) {
            if (col.name === this.hiddenFieldName.toLocaleLowerCase()) {
                this.FlagPresentId = true;
                col.bVisible = false;
                return false;
            }
        }.bind(this));
    };

    this.addcheckbox = function () {
        var chkObj = new Object();
        //chkObj.data = this.EbObject.Columns.$values.length;
        chkObj.title = "<input id='{0}_select-all' class='eb_selall" + this.tableId + "' type='checkbox' data-table='{0}'/>".replace("{0}", this.tableId);
        chkObj.sWidth = "10px";
        chkObj.orderable = false;
        chkObj.bVisible = (this.showCheckboxColumn) ? true : false;
        chkObj.name = "checkbox";
        chkObj.Type = 3;
        chkObj.render = this.renderCheckBoxCol.bind(this);
        chkObj.pos = "-1";

        this.extraCol.push(chkObj);
        var _array = $.grep(this.EbObject.Columns.$values, function (obj) { return obj.name.toLocaleLowerCase() === this.hiddenFieldName.toLocaleLowerCase(); }.bind(this));
        if (_array.length > 0)
            this.hiddenIndex = _array[0].data;
    }

    this.createTblObject = function () {
        var o = new Object();
        o.scrollY = this.scrollHeight;
        o.scrollX = true;
        //o.scrollXInner = "110%";
        o.scrollCollapse = true;
        if (this.Source === "EbDataTable" || this.Source === "Draft") {
            if (this.EbObject.PageLength !== 0) {
                o.lengthMenu = this.generateLengthMenu();
            }
        }
        if (this.EbObject.LeftFixedColumn > 0 || this.EbObject.RightFixedColumn > 0)
            o.fixedColumns = { leftColumns: this.fixedColumnCount(), rightColumns: this.EbObject.RightFixedColumn };
        o.pagingType = "full";
        o.buttons = ['copy', 'csv', 'excel', 'pdf', 'print', { extend: 'print', exportOptions: { modifier: { selected: true } } }];
        o.bAutoWidth = false;
        o.autowidth = false;
        o.serverSide = (this.MainData === null) ? true : false;
        o.processing = true;
        o.pageResize = true;
        //o.deferRender = true;
        //o.scroller = true;
        o.language = {
            //processing: "<div class='fa fa-spinner fa-pulse fa-3x fa-fw'></div>",
            info: "_START_ - _END_ / _TOTAL_",
            paginate: {
                "previous": "Prev"
            },
            lengthMenu: "_MENU_ / Page",
        };
        o.columns = this.rowgroupCols.concat(this.extraCol, this.EbObject.Columns.$values);
        if (this.AllowSorting)
            o.order = [];
        else
            o.ordering = false;
        o.deferRender = true;
        //o.filter = true;
        //o.select = this.AllowSelect;
        //o.retrieve = true;
        o.keys = true;
        //this.filterValues = this.getFilterValues();
        //filterChanged = false;
        //if (!this.isTagged)
        //    this.compareFilterValues();
        //else
        //    filterChanged = true;
        //o.rowReorder = this.IsTree;
        if (this.MainData !== null && this.isPipped) {
            if (this.Source === "EbDataTable") {
                o.dom = "<'col-md-10 noPadding'><'col-md-2 noPadding'f>rt";
                dvcontainerObj.currentObj.data = this.MainData;
                o.ajax = function (data, callback, settings) {
                    setTimeout(function () {
                        callback({
                            draw: dvcontainerObj.currentObj.data.draw,
                            data: dvcontainerObj.currentObj.data.data,
                            recordsTotal: dvcontainerObj.currentObj.data.recordsTotal,
                            recordsFiltered: dvcontainerObj.currentObj.data.recordsFiltered,
                        });
                    }, 50);
                }
                o.data = this.receiveAjaxData(this.MainData);
            }
            else {
                if (this.Source === "Calendar" || this.Source === "PivotTable") {
                    o.dom = "<'col-md-12 noPadding display-none'><'col-md-12 info-search-cont'i>rt";
                    o.language.info = "_START_ - _END_ / _TOTAL_ Entries";
                }
                else {
                    o.dom = "<'col-md-12 noPadding display_none'>rt";
                }
                o.paging = false;
                o.data = this.receiveAjaxData(this.MainData);
            }
        }
        else {
            if (this.Source === "EbDataTable")
                o.dom = "<'pagination-wrapper'lip>rt";
            else
                o.dom = "<'pagination-wrapper'lip>rt";
            o.paging = this.EbObject.IsPaging;
            o.lengthChange = true;
            if (!this.EbObject.IsPaging) {
                if (this.IsTree || this.EbObject.IsDataFromApi || this.Source === "AppsToObjectTable") {
                    o.dom = "<'col-md-12 noPadding display-none'><'col-md-12 info-search-cont'i>rt";
                    o.language.info = "_START_ - _END_ / _TOTAL_ Entries";
                }
                else {
                    o.dom = "<'col-md-12 noPadding display-none'>rt";
                }
                o.paging = false;
                o.lengthChange = false;
            }
            if (this.login === "uc") {
                if (dvcontainerObj)
                    dvcontainerObj.currentObj.Pippedfrom = "";
                $("#Pipped").text("");
                this.isPipped = false;
            }

            try {
                let url = "../dv/getData";
                if (this.Source === "Bot") {
                    url = "../boti/getData";
                }
                o.ajax = {
                    //url: this.ssurl + '/ds/data/' + this.dsid,
                    url: url,
                    type: 'POST',
                    timeout: 180000,
                    data: this.ajaxData.bind(this),
                    dataSrc: this.receiveAjaxData.bind(this),
                    beforeSend: function () {
                    },
                    error: function () {
                        if (this.Source === "WebForm" || this.Source === "Bot" || this.Source === "DashBoard")
                            $("#" + this.tableId + "_processing").text("Timeout Expired..");
                        else
                            EbPopBox("show", { Message: "Timeout Expired..", Title: "Error" });
                        this.hideEbLoader();
                    }.bind(this)
                };
            }
            catch (Error) {
                alert(Error);
            }
        }
        o.fnRowCallback = this.rowCallBackFunc.bind(this);
        o.drawCallback = this.drawCallBackFunc.bind(this);
        o.initComplete = this.initCompleteFunc.bind(this);
        o.headerCallback = this.headerCallback.bind(this);
        //o.fnDblclickCallbackFunc = this.dblclickCallbackFunc.bind(this);
        return o;
    };

    this.generateLengthMenu = function () {
        var ia = [];
        for (var i = 0; i < 5; i++)
            ia[i] = (this.EbObject.PageLength * (i + 1));
        return JSON.parse("[ [{0},-1], [{0},\"All\"] ]".replace(/\{0\}/g, ia.join(',')));
    };

    this.ajaxData = function (dq) {
        if (!this.isSecondTime) {
            $("#" + this.tableId + "_wrapper .dataTables_scrollFoot").hide();
            $("#" + this.tableId + "_wrapper .DTFC_LeftFootWrapper").hide();
            $("#" + this.tableId + "_wrapper .DTFC_RightFootWrapper").hide();
        }

        this.matchColumnSearchAndVisible();
        delete dq.columns; delete dq.order; delete dq.search;
        dq.RefId = this.EbObject.DataSourceRefId;
        dq.TFilters = this.columnSearch;
        if (this.filterValues.length === 0)
            this.filterValues = this.getFilterValues();
        if (this.EbObject.IsDataFromApi)
            this.ModifyRequestParams();
        else
            dq.Params = this.filterValues;

        dq.OrderBy = this.getOrderByInfo();
        if (this.columnSearch.length > 0) {
            this.filterFlag = true;
        }
        dq.Ispaging = this.EbObject.IsPaging;
        if (dq.length === -1)
            dq.length = this.totalcount;
        this.RemoveColumnRef();
        if (!this.Refid)
            dq.DataVizObjString = JSON.stringify(this.EbObject);
        if (this.CurrentRowGroup !== null)
            dq.CurrentRowGroup = JSON.stringify(this.CurrentRowGroup);
        dq.dvRefId = this.Refid;
        dq.TableId = this.tableId;
        dq.showCheckboxColumn = this.showCheckboxColumn;
        dq.counter = ++this.ajaxCallCounter;
        return dq;
    };

    this.ModifyRequestParams = function () {
        let xx = this.EbObject.Parameters.$values.map(function (row) {
            return { Name: row.Name, Value: row.Value, Type: row.Type };
        });

        this.EbObject.ParamsList.$values = this.filterValues.concat(xx);
    };

    this.getOrderByInfo = function () {
        var tempArray = [];
        if (this.CurrentRowGroup !== null) {
            if (this.CurrentRowGroup.RowGrouping.$values.length > 0) {
                for (let i = 0; i < this.CurrentRowGroup.RowGrouping.$values.length; i++)
                    tempArray.push(new order_obj(this.CurrentRowGroup.RowGrouping.$values[i].name, this.CurrentRowGroup.RowGrouping.$values[i].Direction));
            }
            if (this.orderColl.length > 0) {
                $.each(this.orderColl, function (i, obj) {
                    tempArray.push(obj);
                });
            }
            else {
                if (this.CurrentRowGroup.OrderBy.$values.length > 0) {
                    for (let i = 0; i < this.CurrentRowGroup.OrderBy.$values.length; i++)
                        tempArray.push(new order_obj(this.CurrentRowGroup.OrderBy.$values[i].name, this.CurrentRowGroup.OrderBy.$values[i].Direction));
                }
            }
        }

        if (tempArray.length === 0) {
            $.each(this.orderColl, function (i, obj) {
                tempArray.push(obj);
            });
            if (tempArray.length === 0) {
                $.each(this.EbObject.OrderBy.$values, function (i, obj) {
                    if (tempArray.filter(e => e.Column === obj.name).length === 0)
                        tempArray.push(new order_obj(obj.name, obj.Direction));
                });
            }
        }

        return tempArray;
    };

    this.getFilterValues = function (from) {
        //this.filterChanged = false;
        var fltr_collection = [];

        if (this.FD)
            fltr_collection = getValsForViz(this.FilterDialog.FormObj);
        if (this.Source === "Calendar")
            fltr_collection = getValsForViz(FilterDialog.FormObj);
        let temp = $.grep(fltr_collection, function (obj) { return obj.Name === "eb_loc_id"; });
        if (temp.length === 0) {
            if (this.Source === "Bot")
                fltr_collection.push(new fltr_obj(11, "eb_loc_id", 1)); // hard coding temp for bot
            else
                fltr_collection.push(new fltr_obj(11, "eb_loc_id", ebcontext.locations.CurrentLoc || 1));
        }
        temp = $.grep(fltr_collection, function (obj) { return obj.Name === "eb_currentuser_id"; });
        if (temp.length === 0)
            fltr_collection.push(new fltr_obj(11, "eb_currentuser_id", ebcontext.user.UserId));
        if (ebcontext.languages != undefined) {
            temp = $.grep(fltr_collection, function (obj) { return obj.Name === "eb_current_language_id"; });
            if (temp.length === 0)
                fltr_collection.push(new fltr_obj(11, "eb_current_language_id", ebcontext.languages.getCurrentLanguage()));

            temp = $.grep(fltr_collection, function (obj) { return obj.Name === "eb_current_locale"; });
            if (temp.length === 0)
                fltr_collection.push(new fltr_obj(16, "eb_current_locale", ebcontext.languages.getCurrentLocale()));
        }
        //if (this.isContextual && from !== "compare") {
        //    if (from === "filter" && prevfocusedId !== undefined) {
        //        $.each(dvcontainerObj.dvcol[prevfocusedId].filterValues, function (i, obj) {
        //            var f = false;
        //            $.each(fltr_collection, function (j, fObj) {
        //                if (fObj.Name === obj.Name)
        //                    f = true;
        //            });
        //            if (!f)
        //                fltr_collection.push(obj);
        //        });
        //    }
        //    else {
        //        if (this.rowData !== null && this.rowData !== "") {
        //            if (this.Api !== null) {
        //                if (prevfocusedId === undefined)
        //                    from = "link";
        //                $.each(this.rowData, this.rowObj2filter.bind(this, fltr_collection, from));
        //            }
        //        }
        //    }
        //}

        return fltr_collection;
    };

    this.rowObj2filter = function (fltr_collection, from, i, data) {
        if (i < this.EbObject.Columns.$values.length) {
            if (from === "link") {
                let type = this.EbObject.Columns.$values[i].Type;
                //if (type === 5 || type === 6)
                //    data = this.renderDateformat(data, "-");
                if (data !== "")
                    fltr_collection.push(new fltr_obj(type, this.EbObject.Columns.$values[i].name, data));
            }
            else {
                if (dvcontainerObj.dvcol[prevfocusedId].Api !== null) {
                    let type = dvcontainerObj.dvcol[prevfocusedId].EbObject.Columns.$values[i].Type;
                    fltr_collection.push(new fltr_obj(type, dvcontainerObj.dvcol[prevfocusedId].EbObject.Columns.$values[i].name, data));
                }
            }
        }
    };

    this.getFilterForLinkfromColumn = function () {
        this.linkfromcolumn = false;
        this.dvformMode = 1;
        let filters = [];
        var temp = this.EbObject.Columns.$values.filter(obj => obj.name === this.linkDVColumn)[0];
        filters.push(new fltr_obj(temp.IdColumn.Type, temp.IdColumn.name, this.rowData[temp.IdColumn.data]));
        if (this.Source === "Draft" || temp.IsFormDraftMode)
            this.dvformMode = 8;
        return filters;
    };

    this.getfilterFromRowdata = function () {
        var filters = [];
        if (parseInt(this.linkDV.split("-")[2]) !== EbObjectTypes.WebForm) {
            filters = this.FilterfromRow();
        }
        else {
            var temp = $.grep(this.EbObject.Columns.$values, function (obj) { return obj.LinkRefId === this.linkDV && obj.name === this.linkDVColumn; }.bind(this));
            this.dvformMode = temp[0].FormMode;
            if (temp[0].FormMode === 1) {
                var col = temp[0].FormId.$values;
                $.each(col, function (i, col) {
                    filters.push(new fltr_obj(col.Type, col.name, this.rowData[col.data]));
                }.bind(this));
            }
            else if (temp[0].FormMode === 2) {
                var cols = temp[0].FormParameters.$values;
                $.each(cols, function (i, col) {
                    if (this.rowData[col.data] !== "")
                        filters.push(new fltr_obj(col.Type, col.FormControl.Name, this.rowData[col.data]));
                }.bind(this));
            }
        }
        return filters;
    };

    this.FilterfromRow = function () {
        var filters = [];
        $.each(this.EbObject.Columns.$values, function (i, col) {
            if (this.rowData[col.data] !== "")
                filters.push(new fltr_obj(col.Type, col.name, this.rowData[col.data]));
        }.bind(this));
        return filters;
    };

    this.placefiltervalues = function () {
        //if (this.filterValues.length > 0) {
        //    $.each(this.filterValues, function (i, param) {
        //        $("#" + this.ContextId + ' #' + param.Name).val(param.Value);
        //    });
        //}
        $.each(getFlatCtrlObjs(this.FilterDialog.FormObj), function (i, obj) {
            var mapobj = getObjByval(this.filterValues, "Name", obj.Name);
            if (typeof mapobj !== "undefined") {
                let val = mapobj.Value;
                obj.setValue(val);
            }
        }.bind(this));
    }

    this.filterDisplay = function () {
        var $controls = $("#" + this.ContextId + " #filterBox").children().not("[type=hidden],button");
        var filter = "";
        var filterdialog = [], columnFilter = [];
        if ($controls.length > 0) {
            $.each($controls, function (i, ctrl) {
                var o = new displayFilter();
                var ctype = $(ctrl).attr("ctype");
                o.name = $($(ctrl).children()[0]).text();
                o.title = $($(ctrl).children()[0]).text();
                o.operator = "=";
                if (ctype === "PowerSelect")
                    o.value = $(ctrl).find("input").attr("display-members");
                else if (ctype === "Date")
                    o.value = $(ctrl).find("input").val();
                else if (ctype === "RadioGroup")
                    o.value = $(ctrl).children().find("[type=radio]:checked").val();
                else if (ctype === "SimpleSelect")
                    o.value = $(ctrl).children().find("option:selected").text();
                else if (ctype === "UserLocation") {
                    let $sel = $(ctrl).find('select');
                    let allsld = $sel.next('div').find('[value=multiselect-all').prop('checked');
                    if (allsld && $sel.attr('isglobal') === 'y')
                        o.value = "Global";
                    else if (allsld)
                        o.value = "Selected all";
                    else
                        o.value = $(ctrl).find('ul').find(".active:not(.multiselect-all)").text().trim().split(" ").join(",");
                }
                else
                    o.value = $($(ctrl).children()[1]).val();

                if (typeof $controls[i + 1] !== "undefined")
                    o.logicOp = "AND";
                else
                    o.logicOp = "";
                if (o.value !== undefined && o.value !== null && o.value !== "")
                    filterdialog.push(o);
            });
        }

        if (this.columnSearch.length > 0) {
            for (i = 0; i < this.columnSearch.length; i++) {
                //$.each(this.columnSearch, function (i, search) {
                search = this.columnSearch[i];
                var o = new displayFilter();
                let colObj = getObjByval(this.EbObject.Columns.$values, "name", search.Column);
                o.title = colObj.sTitle;
                o.name = colObj.name;
                o.operator = search.Operator;
                var searchobj = $.grep(this.columnSearch, function (ob) { return ob.Column === search.Column; });
                if (searchobj.length === 1) {
                    if (search.Value.toString().includes("|")) {
                        $.each(search.Value.split("|"), function (j, val) {
                            if (val.trim() !== "") {
                                var o = new displayFilter();
                                o.title = colObj.sTitle;
                                o.name = colObj.name;
                                o.operator = search.Operator;
                                if (search.Type == 5 || search.Type == 6)
                                    o.value = moment(val, 'YYYY-MM-DD').format(this.mmtDateFormat);
                                else
                                    o.value = val;
                                if (typeof search.Value.split("|")[j + 1] !== "undefined" && search.Value.split("|")[j + 1].trim() !== "")
                                    o.logicOp = "OR";
                                else if (typeof this.columnSearch[i + 1] !== "undefined")
                                    o.logicOp = "AND";
                                else
                                    o.logicOp = "";
                                columnFilter.push(o);
                            }
                        }.bind(this));
                    }
                    else {
                        if (search.Type == 5 || search.Type == 6)
                            o.value = moment(search.Value, 'YYYY-MM-DD').format(this.mmtDateFormat);
                        else
                            o.value = search.Value;

                        if (typeof this.columnSearch[i + 1] !== "undefined")
                            o.logicOp = "AND";
                        else
                            o.logicOp = "";
                        columnFilter.push(o);
                    }
                }
                else {
                    i++;
                    let val1 = searchobj[0].Value;
                    let val2 = searchobj[1].Value;
                    if (searchobj[0].Type == 5 || searchobj[0].Type == 6)
                        val1 = moment(val1, 'YYYY-MM-DD').format(this.mmtDateFormat);
                    if (searchobj[1].Type == 5 || searchobj[1].Type == 6)
                        val2 = moment(val2, 'YYYY-MM-DD').format(this.mmtDateFormat);

                    o.value = val1 + " AND " + val2;
                    o.operator = "BETWEEN";
                    if (typeof this.columnSearch[i + 1] !== "undefined")
                        o.logicOp = "AND";
                    else
                        o.logicOp = "";
                    columnFilter.push(o);
                }
            }
        }
        this.Tags = new EbTags({ "displayFilterDialogArr": filterdialog, "displayColumnSearchArr": columnFilter, "id": "#filterdisplayrowtd_" + this.tableId + "", "remove": this.closeTag });
        //this.Tags = new EbTags({ "displayFilterDialogArr": $controls, "displayColumnSearchArr": this.columnSearch, "id": "#filter_Display", "remove": this.closeTag });
    };

    this.closeTag = function (e, obj) {
        var searchObj = $.grep(this.columnSearch, function (ob) { return ob.Column.toLowerCase() === obj.name.toLowerCase(); });
        var index = this.columnSearch.findIndex(x => x.Column.toLowerCase() === obj.name.toLowerCase());
        if (searchObj.length === 1) {
            if (searchObj[0].Value.includes("|")) {
                var val = "";
                if (this.columnSearch[index].Value.includes(obj.value + "|"))
                    val = this.columnSearch[index].Value.replace(obj.value + "|", "");
                else
                    val = this.columnSearch[index].Value.replace("|" + obj.value, "");
                if (val.trim() !== "")
                    this.columnSearch[index].Value = val;
                else
                    this.columnSearch.splice(index, 1);
            }
            else
                this.columnSearch.splice(index, 1);
        }
        else
            this.columnSearch.splice(index, 2);
        this.Api.ajax.reload();
    }.bind(this);

    this.matchColumnSearchAndVisible = function () {

    }

    this.getfilter = function (fltr_collection, i, data) {
        fltr_collection.push(new fltr_obj(data.Type, data.name, this.rowData[i]));
    };

    this.receiveAjaxData = function (dd) {
        if (dd.responseStatus) {
            if (dd.responseStatus.message !== null) {
                console.log("Table View PreProcessing Error " + dd.responseStatus.message);
                if (this.Source === "WebForm" || this.Source === "Bot" || this.Source === "DashBoard")
                    $("#" + this.tableId + "_processing").text("Something went wrong..");
                else
                    EbPopBox("show", { Message: "Table View PreProcessing Error Occured...", Title: "Error" });
            }
        }
        if (dd.counter && this.ajaxCallCounter != dd.counter && this.MainData) {
            console.warn(`Mismatch in counter value: ${this.ajaxCallCounter}, ${dd.counter}`);
            dd = this.MainData;
        }
        if (!this.isSecondTime)
            this.totalcount = dd.recordsFiltered;
        this.isRun = true;
        if (this.login === "uc" && this.Source === "EbDataTable") {
            dvcontainerObj.currentObj.data = dd;
        }
        this.MainData = dd;
        this.RowCount = dd.recordsFiltered;
        //return dd.data;
        this.unformatedData = dd.data;
        this.Levels = dd.levels;
        this.permission = dd.permission;
        this.summary = dd.summary;
        this.tableName = dd.tableName;
        this.treeData = dd.tree;
        this.SetColumnRef();
        this.ImageArray = dd.imageList ? JSON.parse(dd.imageList) : [];
        return dd.formattedData || this.unformatedData;
    };

    this.fixedColumnCount = function () {
        var count = this.EbObject.LeftFixedColumn;
        var visCount = 0;
        if (count > 1) {
            $.each(this.EbObject.Columns.$values, function (i, col) {
                if (!col.bVisible) {
                    if (this.EbObject.LeftFixedColumn > visCount)
                        count++;
                    else
                        return false;
                }
                else
                    visCount++;
            }.bind(this));
        }
        if (this.extraCol.length === 2)
            return count + 1;
        else
            return count;
    };

    this.ColumnsComparer = function (a, b) {
        if (a.data < b.data) return -1;
        if (a.data > b.data) return 1;
        if (a.data === b.data) return 0;
    };

    this.getAgginfo = function () {
        var _ls = [];
        $.each(this.EbObject.Columns.$values, this.getAgginfo_inner.bind(this, _ls));
        return _ls;
    };

    this.getAgginfo_inner = function (_ls, i, col) {
        if (col.bVisible && (col.RenderType == parseInt(gettypefromString("Int32")) || col.RenderType == parseInt(gettypefromString("Decimal")) || col.RenderType == parseInt(gettypefromString("Int64"))
            || col.RenderType == parseInt(gettypefromString("Double")) || col.RenderType == parseInt(gettypefromString("Numeric"))) && col.name !== "serial") {
            _ls.push(new Agginfo(col.name, this.EbObject.Columns.$values[i].DecimalPlaces, col.data));
            this.NumericIndex.push(col.data);
        }
    };

    this.getFooterFromSettingsTbl = function () {
        var ftr_part = "";
        $.each(this.rowgroupCols, function (i, col) {
            if (col.bVisible)
                ftr_part += "<th></th>";
            else
                ftr_part += "<th style=\"display:none;\"></th>";
        });
        $.each(this.extraCol, function (i, col) {
            if (col.bVisible)
                ftr_part += "<th></th>";
            else
                ftr_part += "<th style=\"display:none;\"></th>";
        });
        $.each(this.EbObject.Columns.$values, function (i, col) {
            if (col.bVisible)
                ftr_part += "<th data-col='" + col.name + "'></th>";
            else
                ftr_part += "<th style=\"display:none;\"></th>";
        });
        return "<tfoot>" + ftr_part + "</tfoot>";
    };

    this.repopulate_filter_arr = function () {
        var table = this.tableId;
        var filter_obj_arr = [];
        var api = this.Api;
        if (api !== null) {
            this.Api.columns().every(function (i) {
                let colobj = api.settings().init().aoColumns[i];
                let paracolum = colobj.name;
                if (colobj.$type && colobj.$type.indexOf("DVPhoneColumn") !== -1)
                    paracolum = colobj.MappingColumn.name;

                if (paracolum !== 'checkbox' && paracolum !== 'serial' && colobj.bVisible) {
                    var oper;
                    var val1, val2;
                    var textid = '#' + table + '_' + colobj.name + '_hdr_txt1';
                    //var type = $(textid).attr('data-coltyp');
                    var type = colobj.Type;
                    var Rtype = colobj.RenderType;
                    if (Rtype === 3) {
                        var obj = this.EbObject.Columns.$values.find(x => x.name === paracolum);
                        val1 = ($(textid).is(':checked')) ? obj.TrueValue : obj.FalseValue;
                        if (!($(textid).is(':indeterminate')))
                            filter_obj_arr.push(new filter_obj(paracolum, "=", val1, type));
                    }
                    else {
                        oper = $('#' + table + '_' + colobj.name + '_hdr_sel').text().trim();
                        if (api.columns(i).visible()[0]) {
                            if (oper !== '' && $(textid).val() !== '') {
                                val1 = $(textid).val();
                                if (oper === 'B')
                                    val2 = $(textid).siblings('input').val();
                                if (Rtype === 5 || Rtype === 6) {
                                    if (val1 && moment(val1, this.mmtDateFormat, true).isValid())
                                        val1 = moment(val1, this.mmtDateFormat).format('YYYY-MM-DD');
                                    else
                                        return;

                                    if (oper === 'B') {
                                        if (val2 && moment(val2, this.mmtDateFormat, true).isValid())
                                            val2 = moment(val2, this.mmtDateFormat).format('YYYY-MM-DD');
                                        else
                                            return;
                                    }
                                }

                                if (oper === 'B') {
                                    if (oper === 'B' && val1 !== '' && val2 !== '') {
                                        if (Rtype === 8 || Rtype === 7 || Rtype === 11 || Rtype === 12) {
                                            filter_obj_arr.push(new filter_obj(paracolum, ">=", Math.min(val1, val2)));
                                            filter_obj_arr.push(new filter_obj(paracolum, "<=", Math.max(val1, val2), type));
                                        }
                                        else if (Rtype === 5 || Rtype === 6) {
                                            let d1 = Date.parse(val1);
                                            let d2 = Date.parse(val2);
                                            if (d2 > d1) {
                                                filter_obj_arr.push(new filter_obj(paracolum, ">=", val1, type));
                                                filter_obj_arr.push(new filter_obj(paracolum, "<=", val2, type));
                                            }
                                            else {
                                                filter_obj_arr.push(new filter_obj(paracolum, ">=", val2, type));
                                                filter_obj_arr.push(new filter_obj(paracolum, "<=", val1, type));
                                            }
                                        }
                                    }
                                }
                                else {
                                    filter_obj_arr.push(new filter_obj(paracolum, oper, val1, type));
                                }
                            }
                        }
                    }
                }
            }.bind(this));
        }
        return filter_obj_arr;
    };

    this.rowCallBackFunc = function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {
        this.colorRow(nRow, aData, iDisplayIndex, iDisplayIndexFull);
        if (this.treeColumn) {
            let elem = aData[this.treeColumn.data].split("&nbsp;").join("").split("&emsp;").join("");
            let treeElem = $(elem);
            $(nRow).attr("data-lvl", treeElem.attr("data-level"));
            if (treeElem.hasClass("groupform")) {
                $(nRow).children(`td:eq(${this.treeColumnIndex})`).addClass("groupform");
                $(nRow).children(`td:eq(${this.treeColumnIndex})`).children().removeClass("groupform");
            }
            else {
                $(nRow).children(`td:eq(${this.treeColumnIndex})`).addClass("itemform");
                $(nRow).children(`td:eq(${this.treeColumnIndex})`).children().removeClass("itemform");
            }
        }
    };

    this.initCompleteFunc = function (settings, json) {
        this.Run = false;
        if (this.Source === "EbDataTable" || this.Source === "locationTree" || this.Source === "WebForm" || this.Source === "popup" || this.Source === "PivotTable")
            this.GenerateButtons();

        else if (this.Source === "Calendar") {
            this.CreateContextmenu4ObjectSelector();
        }
        if (this.login === "uc") {
            this.initCompleteflag = true;
            //if (this.isSecondTime) { }
            //this.ModifyingDVs(dvcontainerObj.currentObj.Name, "initComplete");            
        }
        setTimeout(function () {
            $("#" + this.tableId + "_wrapper .dataTables_scrollFoot").show();
            $("#" + this.tableId + "_wrapper .DTFC_LeftFootWrapper").show();
            $("#" + this.tableId + "_wrapper .DTFC_RightFootWrapper").show();
            $("#" + this.tableId + "_wrapper .dataTables_scrollFoot").style("padding-top", "100px", "important");
            $("#" + this.tableId + "_wrapper .dataTables_scrollFoot").style("margin-top", "-100px", "important");
            if (!this.IsTree && this.showFilterRow && !this.EbObject.IsDataFromApi) {

                this.createFilterRowHeader();
            }
            else if (this.IsTree || this.Source === "Calendar" || this.EbObject.IsDataFromApi || this.Source === "AppsToObjectTable")
                this.createFilterforTree();
            //if (this.EbObject.AllowLocalSearch)
            //    this.createFilterforTree();
            this.filterDisplay();
            this.createFooter();
            if (this.Source === "EbDataTable" || this.Source === "PivotTable")
                this.arrangeWindowHeight();

            this.CreateHeaderTooltip();
            this.addFilterEventListeners();
            this.arrangeFooterWidth();
            if (this.Source !== "Calendar" || this.EbObject.IsDataFromApi)
                this.placeFilterInText();

            this.hideEbLoader();
            if (this.login === "uc") {
                if (!this.EbObject.DisableCopy)
                    $("#" + focusedId + " .wrapper-cont").removeClass("userselect").addClass("userselect");
                else
                    $("#" + focusedId + " .wrapper-cont").removeClass("userselect");
            }
            else {
                if (!this.EbObject.DisableCopy)
                    $(".wrapper-cont").removeClass("userselect").addClass("userselect");
                else
                    $(" .wrapper-cont").removeClass("userselect");
            }
            this.isSecondTime = true;

            if (this.Source !== "EbDataTable" && this.Source !== "datagrid" && this.Source !== "WebForm" && this.Source !== "AppsToObjectTable" && this.Source !== "Calendar") {
                $('#' + this.tableId + '_wrapper .dataTables_scrollFoot').hide();
                $('#' + this.tableId + '_wrapper .DTFC_LeftFootWrapper').hide();
                $('#' + this.tableId + '_wrapper .DTFC_RightFootWrapper').hide();
                if ($("#" + this.tableId + " tr").length > 7) {
                    $(".containerrow #" + this.tableId + "_wrapper .dataTables_scroll").style("height", "210px", "important");
                    $(".containerrow #" + this.tableId + "_wrapper .dataTables_scrollBody").style("height", "173px", "important");
                }
                $("#" + this.tableId + "_wrapper .DTFC_ScrollWrapper .DTFC_RightBodyWrapper tr").css("height", this.EbObject.RowHeight + "px");
                $("#" + this.tableId + "_wrapper .DTFC_ScrollWrapper .DTFC_LeftBodyWrapper tr").css("height", this.EbObject.RowHeight + "px");
                $("#" + this.tableId + "_wrapper .dataTables_scroll .dataTables_scrollBody tr").css("height", this.EbObject.RowHeight + "px");
            }
            if (Option.initCompleteCallback)
                Option.initCompleteCallback();
            this.Api.columns.adjust();
        }.bind(this), 0);
    };

    this.contextMenu = function () {
        $.contextMenu({
            selector: ".tablelink",
            items: {
                "OpenNewTab": { name: "Open in New Tab", icon: "fa-external-link-square", callback: this.OpeninNewTab.bind(this) }
            }
        });
    };

    this.contextMenu4Label = function () {
        $.contextMenu({
            selector: ".labeldata",
            items: {
                "Copy": { name: "Copy", icon: "fa-external-link-square", callback: this.copyLabelData.bind(this) }
            }
        });
    };

    this.contextMenu4Cell = function () {
        var isDisable = this.EbObject.DisableCopy;
        $.contextMenu('destroy', ".tdheight");
        $.contextMenu({
            selector: ".tdheight",
            items: {
                "Copy": {
                    name: "Copy", icon: "fa-external-link-square", callback: this.copyCellData.bind(this),
                    disabled: function (key, opt) {
                        return isDisable;
                    }
                }
            }
        });

        $('.tdheight').on('contextmenu', function (e) {
            alert(1);
            e.preventDefault();
            return false;
        });
    };

    this.copyCellData = function (key, opt, event) {

    };

    this.OpeninNewTab = function (key, opt, event) {
        var cData = opt;
        this.isContextual = true;
        var idx;
        if (event !== undefined) {
            idx = this.Api.row(opt.$trigger.parent().parent()).index();
            cData = opt.$trigger.text();
        }
        else
            idx = key;

        var splitarray = this.linkDV.split("-");
        if (splitarray[2] === "3") {
            var url = "../ReportRender/BeforeRender?refid=" + this.linkDV;
            var copycelldata = cData.replace(/[^a-zA-Z ]/g, "").replace(/ /g, "_");
            if ($(`#RptModal${copycelldata}`).length !== 0)
                $(`#RptModal${copycelldata}`).remove();
            $("body").append(`<div class="modal fade RptModal" id="RptModal${copycelldata}" role="dialog">
                <div class="modal-dialog modal-sm">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>                              
                        </div>
                        <div class="modal-body"> <iframe id="reportIframe${copycelldata}" class="reportIframe" src='../ReportRender/Renderlink?refid=${this.linkDV}&_params=${btoa(unescape(encodeURIComponent(JSON.stringify(this.filterValues))))}'></iframe>
            </div>
                    </div>
                </div>
            </div>
            `);
            $(`#RptModal${copycelldata}`).modal();
            $(`#reportIframe${copycelldata}`).css("height", "80vh");
            //else {
            //    $(`#RptModal${copycelldata}`).modal();
            //    $.LoadingOverlay("hide");
            //}
        }
        else if (splitarray[2] === "0") {
            this.WebFormlink(this.linkDV, btoa(unescape(encodeURIComponent(JSON.stringify(this.filterValuesforForm)))), this.dvformMode);
        }
        else if (splitarray[2] === "22") {
            this.tabNum++;
            let url = "../DashBoard/DashBoardView?refid=" + this.linkDV;

            let _form = document.createElement("form");
            _form.setAttribute("method", "post");
            _form.setAttribute("action", url);
            _form.setAttribute("target", "_blank");

            let input = document.createElement('input');
            input.type = 'hidden';
            input.name = "rowData";

            input.value = btoa(unescape(encodeURIComponent(JSON.stringify(this.rowData))));
            _form.appendChild(input);

            let input1 = document.createElement('input');
            input1.type = 'hidden';
            input1.name = "filterValues";
            input1.value = btoa(unescape(encodeURIComponent(JSON.stringify(this.filterValues))));
            _form.appendChild(input1);

            let input2 = document.createElement('input');
            input2.type = 'hidden';
            input2.name = "tabNum";
            input2.value = this.tabNum;
            _form.appendChild(input2);

            document.body.appendChild(_form);

            //note I am using a post.htm page since I did not want to make double request to the page 
            //it might have some Page_Load call which might screw things up.
            //window.open("post.htm", name, windowoption);       
            _form.submit();
            document.body.removeChild(_form);


        }
        else {
            this.tabNum++;
            let url = "../DV/dv?refid=" + this.linkDV;

            let _form = document.createElement("form");
            _form.setAttribute("method", "post");
            _form.setAttribute("action", url);
            _form.setAttribute("target", "_blank");

            let input = document.createElement('input');
            input.type = 'hidden';
            input.name = "rowData";

            input.value = btoa(unescape(encodeURIComponent(JSON.stringify(this.rowData))));
            _form.appendChild(input);

            let input1 = document.createElement('input');
            input1.type = 'hidden';
            input1.name = "filterValues";
            input1.value = btoa(unescape(encodeURIComponent(JSON.stringify(this.filterValues))));
            _form.appendChild(input1);

            let input2 = document.createElement('input');
            input2.type = 'hidden';
            input2.name = "tabNum";
            input2.value = this.tabNum;
            _form.appendChild(input2);

            document.body.appendChild(_form);

            //note I am using a post.htm page since I did not want to make double request to the page 
            //it might have some Page_Load call which might screw things up.
            //window.open("post.htm", name, windowoption);       
            _form.submit();
            document.body.removeChild(_form);
        }
    };

    this.WebFormlink = function (_refid, _filter, _mode) {
        let _l = ebcontext.languages.getCurrentLanguageCode();
        let url = `../WebForm/Index?_r=${_refid}&_p=${_filter}&_m=${_mode}&_l=${ebcontext.locations.CurrentLoc}&_lg=${_l}`;
        window.open(url, '_blank');

        //var _form = document.createElement("form");
        //_form.setAttribute("method", "get");
        //_form.setAttribute("action", url);
        //_form.setAttribute("target", "_blank");

        //var input = document.createElement('input');
        //input.type = 'hidden';
        //input.name = "_r";
        //input.value = _refid;
        //_form.appendChild(input);

        //input = document.createElement('input');
        //input.type = 'hidden';
        //input.name = "_p";
        //input.value = _filter;
        //_form.appendChild(input);

        //input = document.createElement('input');
        //input.type = 'hidden';
        //input.name = "_m";
        //input.value = _mode;
        //_form.appendChild(input);

        //input = document.createElement('input');
        //input.type = 'hidden';
        //input.name = "_l";
        //input.value = ebcontext.locations.CurrentLoc;
        //_form.appendChild(input);

        //document.body.appendChild(_form);
        //_form.submit();
        //document.body.removeChild(_form);
    };

    this.arrangeFooterWidth = function () {
        var lfoot = $('#' + this.tableId + '_wrapper .DTFC_LeftFootWrapper table');
        var rfoot = $('#' + this.tableId + '_wrapper .DTFC_RightFootWrapper table');
        var scrollfoot = $('#' + this.tableId + '_wrapper .dataTables_scrollFootInner table');

        if (this.EbObject.LeftFixedColumn > 0 || this.EbObject.RightFixedColumn > 0) {
            if (this.EbObject.LeftFixedColumn > 0) {
                for (let j = 0; j < this.EbObject.LeftFixedColumn; j++) {
                    $(lfoot).children().find("tr").eq(0).children("th").eq(j).css("width", scrollfoot.find("tfoot").children("tr").eq(0).children("th").eq(j).css("width"));
                }
            }

            if (this.EbObject.RightFixedColumn > 0) {
                var start = scrollfoot.find("tr").eq(0).children().length - this.EbObject.RightFixedColumn;
                for (let j = 0; (j + start) < scrollfoot.find("tr").eq(0).children().length; j++) {
                    $(rfoot).children().find("tr").eq(0).children("th").eq(j).css("width", scrollfoot.find("tfoot").children("tr").eq(0).children("th").eq(j + start).css("width"));
                }
            }
        }

        $("#" + this.tableId + " thead tr:eq(1) .eb_finput").parent().remove();
    };

    this.arrangefixedHedaerWidth = function () {
        var lhead = $('#' + this.tableId + '_wrapper .DTFC_LeftHeadWrapper table');
        var rhead = $('#' + this.tableId + '_wrapper .DTFC_RightHeadWrapper table');
        var lbody = $('#' + this.tableId + '_wrapper .DTFC_LeftBodyLiner table');

        if (this.EbObject.LeftFixedColumn > 0 || this.EbObject.RightFixedColumn.length > 0) {
            if (this.EbObject.LeftFixedColumn > 0) {
                for (let j = 0; j < this.EbObject.LeftFixedColumn; j++) {
                    $(lhead).children().find("tr").eq(0).children("th").eq(j).css("width", lbody.find("tbody").children("tr").eq(0).children("td").eq(j).css("width"));
                }
            }

            if (this.EbObject.RightFixedColumn > 0) {
                var start = lbody.find("tr").eq(0).children().length - this.EbObject.RightFixedColumn;
                for (var j = 0; (j + start) < lbody.find("tr").eq(0).children().length; j++) {
                    $(rhead).children().find("tr").eq(0).children("th").eq(j).css("width", lbody.find("tbody").children("tr").eq(0).children("td").eq(j + start).css("width"));
                }
            }
        }


        $("#" + this.tableId + " thead tr:eq(1) .eb_finput").parent().remove();
    };

    this.placeFilterInText = function () {
        if (this.columnSearch.length > 0) {
            if ($('#clearfilterbtn_' + this.tableId).children("i").hasClass("fa-filter"))
                $('#clearfilterbtn_' + this.tableId).children("i").removeClass("fa-filter").addClass("fa-times");
        }
        else {
            if ($('#clearfilterbtn_' + this.tableId).children("i").hasClass("fa-times"))
                $('#clearfilterbtn_' + this.tableId).children("i").removeClass("fa-times").addClass("fa-filter");
        }
        $('.' + this.tableId + '_htext').val("");
        for (let i = 0; i < this.columnSearch.length; i++) {
            let param1 = this.columnSearch[i];
            let param2 = this.columnSearch[i + 1];
            var colum = param1.Column;
            let phonecolumns = this.EbObject.Columns.$values.filter(obj => obj.$type.indexOf("DVPhoneColumn") !== -1);
            phonecolumns.forEach(function (obj) {
                if (obj.MappingColumn.name === colum) {
                    colum = obj.name;
                    return false;
                }
            });
            let textid = '#' + this.tableId + '_' + colum + '_hdr_txt1';
            let type = $(textid).attr('data-coltyp');
            if (type === 'boolean') {
                if (param1.Value === "true")
                    $(textid).attr("checked", true);
                else if (param1.Value === "false")
                    $(textid).attr("checked", false);
                else
                    $(textid).attr("indeterminate", true);
            }
            else {
                if (param1.Operator !== '' && param1.Value !== '') {
                    if (param2 && param2.Column === param1.Column) {
                        let val1 = type == 'date' ? moment(param1.Value, 'YYYY-MM-DD').format(this.mmtDateFormat) : param1.Value;
                        let val2 = type == 'date' ? moment(param2.Value, 'YYYY-MM-DD').format(this.mmtDateFormat) : param2.Value;
                        $(textid).val(val1);
                        //$(".eb_fsel" + this.tableId + "[data-colum=" + colum + "]").trigger("click");//doubtful code commented 2023-02-28
                        $(textid).siblings('input').val(val2);
                        i++;
                    }
                    else {
                        let val1 = type == 'date' ? moment(param1.Value, 'YYYY-MM-DD').format(this.mmtDateFormat) : param1.Value;
                        $(textid).val(val1);
                        $('#' + this.tableId + '_' + colum + '_hdr_sel').text(param1.Operator);
                    }
                }
            }
        }
    };

    this.CreateHeaderTooltip = function () {
        this.visColumn = this.EbObject.Columns.$values.filter(col => col.bVisible);
        $.each($('#' + this.tableId + '_wrapper .dataTables_scrollHead th.tdheight'), this.AddHeaderTooltip.bind(this));
        this.DrawTooltipForHeader();
    };

    this.AddHeaderTooltip = function (i, _th) {
        let hCol = this.visColumn[i];
        $(_th).attr("title", hCol.HeaderTooltipText || "");
    };

    this.DrawTooltipForHeader = function () {
        $('th.tdheight').tooltip({
            placement: 'bottom',
            container: 'body',
            html: true
        });
    };


    this.check4Scroll = function () {
        var scrollBody = $('#' + this.tableId + '_wrapper .dataTables_scrollBody');
        if (scrollBody[0].scrollHeight > scrollBody.height()) {
            scrollBody.children().css("width", "110%");
            scrollBody.siblings(".dataTables_scrollFoot").style("width", "98.65%", "important");
        }
        else {
            scrollBody.children().css("width", "100%");
            scrollBody.siblings(".dataTables_scrollFoot").style("width", "100%", "important");
        }

    };

    this.arrangeWindowHeight = function () {
        var filterId = "#filterdisplayrowtd_" + this.tableId;
        if (this.login === "uc") {
            if (this.IsTree || this.Source === "Calendar" || this.EbObject.IsDataFromApi) {
                $("#" + focusedId + " .dataTables_scroll").style("height", "calc(100vh - 52px)", "important");
            }
            else if ($(filterId).children().length === 0 && !this.EbObject.IsPaging && !this.EbObject.AllowMultilineHeader)
                $("#" + focusedId + " .dataTables_scroll").style("height", "calc(100vh - 25px)", "important");
            else {
                if ($(filterId).children().length === 0 && !this.EbObject.IsPaging && this.EbObject.AllowMultilineHeader) {//multilineonly
                    $("#" + focusedId + " .dataTables_scroll").style("height", "calc(100vh - 59px)", "important");
                }
                else if ($(filterId).children().length === 0 && this.EbObject.IsPaging && !this.EbObject.AllowMultilineHeader) {//pagingonly
                    $("#" + focusedId + " .dataTables_scroll").style("height", "calc(100vh - 68px)", "important");
                }
                else if ($(filterId).children().length !== 0 && !this.EbObject.IsPaging && !this.EbObject.AllowMultilineHeader) {//filteronly
                    $("#" + focusedId + " .dataTables_scroll").style("height", "calc(100vh - 66px)", "important");
                }
                else if ($(filterId).children().length === 0 && this.EbObject.IsPaging && this.EbObject.AllowMultilineHeader) {//paging & multiline
                    $("#" + focusedId + " .dataTables_scroll").style("height", "calc(100vh - 84px)", "important");
                }
                else if ($(filterId).children().length !== 0 && !this.EbObject.IsPaging && this.EbObject.AllowMultilineHeader) {//filter & multiline
                    $("#" + focusedId + " .dataTables_scroll").style("height", "calc(100vh - 82px)", "important");
                }
                else if ($(filterId).children().length !== 0 && this.EbObject.IsPaging && !this.EbObject.AllowMultilineHeader) {//filetr & paging
                    $("#" + focusedId + " .dataTables_scroll").style("height", "calc(100vh - 92px)", "important");
                }
                else {
                    $("#" + focusedId + " .dataTables_scroll").style("height", "calc(100vh - 107px)", "important");//filter && paging & multiline
                }
            }
            //this.stickBtn.$stickBtn.css("top", "46px");
        }
        else {
            $(".dv-body2").style("height", "calc( 100vh - 38px )", "important");
            if (this.tabNum !== 0) {
                $("#sub_window_" + this.tableId).style("height", "calc(100vh - 40px)", "important");
                if ($(filterId).children().length === 0 && !this.EbObject.IsPaging)
                    $("#sub_window_" + this.tableId + " .dataTables_scroll").style("height", "calc(100vh - 40px)", "important");
                else {
                    if ($(filterId).children().length === 0)
                        $("#sub_window_" + this.tableId + " .dataTables_scroll").style("height", "calc(100vh - 55px)", "important");
                    else if (!this.EbObject.IsPaging)
                        $("#sub_window_" + this.tableId + " .dataTables_scroll").style("height", "calc(100vh - 58px)", "important");
                    else
                        $("#sub_window_" + this.tableId + " .dataTables_scroll").style("height", "calc(100vh - 90px)", "important");
                }
            }
            else {
                if (this.IsTree || this.Source === "Calendar" || this.EbObject.IsDataFromApi)
                    $("#sub_window_" + this.tableId + " .dataTables_scroll").style("height", "calc(100vh - 32px)", "important");
                else if ($(filterId).children().length === 0 && !this.EbObject.IsPaging)
                    $("#sub_window_" + this.tableId + " .dataTables_scroll").style("height", "calc(100vh - 42px)", "important");
                else {
                    if ($(filterId).children().length === 0)
                        $("#sub_window_" + this.tableId + " .dataTables_scroll").style("height", "calc(100vh - 68px)", "important");
                    else if (!this.EbObject.IsPaging)
                        $("#sub_window_" + this.tableId + " .dataTables_scroll").style("height", "calc(100vh - 65px)", "important");
                    else
                        $("#sub_window_" + this.tableId + " .dataTables_scroll").style("height", "calc(100vh - 93px)", "important");
                }
            }
        }
    }

    this.copyLabelData = function (key, opt, event) {

    }

    this.ModifyingDVs = function (parentName, source) {
        $.each(dvcontainerObj.dvcol, function (key, obj) {
            if (parentName === obj.EbObject.Pippedfrom) {
                if (obj.EbObject.$type.indexOf("EbChartVisualization") !== -1 || obj.EbObject.$type.indexOf("EbGoogleMap") !== -1) {
                    dvcontainerObj.dvcol[key].EbObject.data = dvcontainerObj.currentObj.data;
                    dvcontainerObj.dvcol[key].drawGraphHelper(this.Api.data());
                    this.ModifyingDVs(dvcontainerObj.dvcol[key].EbObject.Name, "draw");
                }
                else {
                    if (source === "draw") {
                        dvcontainerObj.dvcol[key].modifyDVFlag = true;
                        dvcontainerObj.dvcol[key].Api.clear().rows.add(this.Api.data());
                        dvcontainerObj.dvcol[key].EbObject.data = dvcontainerObj.currentObj.data;
                        dvcontainerObj.dvcol[key].Api.columns.adjust().draw();
                        this.ModifyingDVs(dvcontainerObj.dvcol[key].EbObject.Name, "draw");
                    }
                }
            }
        }.bind(this));
    }

    this.drawCallBackFunc = function (settings) {
        if (this.Source === "EbDataTable") {
            //this.propGrid.setObject(this.EbObject, AllMetas["EbTableVisualization"]);
            if (this.ImageArray.length > 0) {
                $("#test12").remove();
                $("body").append("<div id='test12'></div>");
                this.FileViewer = $("#test12").ebFileViewer(this.ImageArray);
            }
        }
        $('tbody [data-toggle=toggle]').bootstrapToggle();
        if (this.EbObject.RowGroupCollection.$values.length > 0)
            this.doRowgrouping();
        if (this.login === "uc" && !this.modifyDVFlag && this.initCompleteflag) {
            //this.ModifyingDVs(dvcontainerObj.currentObj.Name, "draw");
        }
        if (this.isSecondTime) {
            //if (this.columnSearch.length > 0)
            this.filterDisplay();
            this.addFilterEventListeners();
            if (this.Source !== "Calendar" || this.EbObject.IsDataFromApi)
                this.placeFilterInText();
            //this.arrangefixedHedaerWidth();
            this.summarize2();
            if (this.Source === "EbDataTable" || this.Source === "PivotTable")
                this.arrangeWindowHeight();
        }
        $("#" + this.tableId + " .tdheight").css("height", this.EbObject.RowHeight + "px");
        if (Option.drawCallBack)
            Option.drawCallBack();
        if (this.Api === null)
            this.Api = $("#" + this.tableId).DataTable();
        this.Api.columns.adjust();
    };

    this.headerCallback = function (thead, data, start, end, display) {
        //$(thead).find('th').eq(0).html('Displaying ' + (end - start) + ' records');
    };

    this.selectCallbackFunc = function (e, dt, type, indexes) {
    };

    this.DTKeyFocusCallback = function (e, datatable, cell, originalEvent) {
        datatable.rows().deselect();
        let trindex = cell.index().row;
        datatable.row(trindex).select();
        if (Option.keyFocusCallbackFn)
            Option.keyFocusCallbackFn(e, datatable, cell, originalEvent);
    };

    this.clickCallbackFunc = function (e) {
    };

    this.dblclickCallbackFunc = function (e) {
        if (Option.fnDblclickCallback)
            Option.fnDblclickCallback(e);
    };

    this.DTclickTDCallbackFunc = function (e) {
        if (Option.fnClickTdCallback)
            Option.fnClickTdCallback(e);
    };

    this.rowclick = function (e, dt, type, indexes) {
        if (Option.rowclick)
            Option.rowclick(e, dt, type, indexes);
    };

    this.mouseenter = function (e, dt, type, indexes) {
        let trindex = $(e.target).closest("tr").index();
        let bgcolor = $(e.target).closest("tr").css("background-color");
        $(".DTFC_LeftBodyLiner tbody tr").eq(trindex).style("background-color", bgcolor, "important");
        $(".DTFC_RightBodyLiner tbody tr").eq(trindex).style("background-color", bgcolor, "important");
    };

    this.rowGroupHandler = function (e) {
        this.MainData = null;
        this.orderColl = [];
        let name = $(e.target).val().trim();
        if (!(name === "None")) {
            this.EbObject.DisableRowGrouping = false;
            $.each(this.EbObject.RowGroupCollection.$values, function (i, obj) {
                if (obj.Name === name) {
                    this.CurrentRowGroup = jQuery.extend({}, obj);
                    this.getColumnsSuccess(e);
                }
            }.bind(this));
        }
        else {
            this.EbObject.DisableRowGrouping = true;
            this.getColumnsSuccess();
        }
    };

    this.visibilityCheck = function () {
        this.RGIndex = [];
        this.EbObject.LeftFixedColumn = 0;
        this.EbObject.RightFixedColumn = 0;
        this.rowgroupCols = [];
        let visibleChanges = false;
        $.each(this.CurrentRowGroup.RowGrouping.$values, function (i, rgobj) {
            this.RGIndex.push(rgobj.data);
            this.rowgroupCols.unshift(JSON.parse('{ "sWidth":"10px","searchable": false, "orderable": false, "bVisible":true, "data":null, "defaultContent": ""}'));
        }.bind(this));

        if (this.rowgroupCols.length > 0 && this.CurrentRowGroup.$type.indexOf("MultipleLevelRowGroup") !== -1)
            this.rowgroupCols.unshift(JSON.parse('{ "sWidth":"10px", "searchable": false, "orderable": false, "bVisible":true, "name":"AllGroup", "data":null, "defaultContent": ""}'));

        $.each(this.EbObject.Columns.$values, function (i, colobj) {
            visibleChanges = false;
            $.each(this.CurrentRowGroup.RowGrouping.$values, function (i, rgobj) {
                if (colobj.name === rgobj.name) {
                    colobj.bVisible = false;
                    visibleChanges = true;
                }
            }.bind(this));

            $.each(this.EbObject.NotVisibleColumns.$values, function (i, nonvis) {
                if (colobj.name === nonvis.name) {
                    colobj.bVisible = false;
                    visibleChanges = true;
                }
            }.bind(this));

            if (!visibleChanges)
                colobj.bVisible = true;
            if (colobj.name === "id")
                colobj.bVisible = false;
        }.bind(this));

    };

    this.doRowgrouping = function () {
        if (this.Api === null)
            this.Api = $("#" + this.tableId).DataTable();
        var rows = this.Api.rows().nodes();
        var count = this.Api.columns()[0].length;
        if (this.Source === "EbDataTable") {
            $(rows).eq(0).before(`<tr class='group-All' id='group-All_${this.tableId}'></tr>`);
            $(`#group-All_${this.tableId}`).append(`<td  colspan="${count}"><select id="rowgroupDD_${this.tableId}" class="rowgroupselect"></select></td>`);
            $.each(this.EbObject.RowGroupCollection.$values, function (i, obj) {
                if (obj.RowGrouping.$values.length > 0) {
                    $(`#rowgroupDD_${this.tableId}`).append(`<option value="${obj.Name.trim()}">${obj.DisplayName}</option>`);
                }
            }.bind(this));
            $(`#rowgroupDD_${this.tableId}`).append(`<option value="None">None</option>`);
            $(`#rowgroupDD_${this.tableId}`).off("change").on("change", this.rowGroupHandler.bind(this));
        }
        if (this.CurrentRowGroup !== null) {
            $(`#group-All_${this.tableId}`).prepend(`<td><i class='fa fa-minus-square-o' style='cursor:pointer;'></i></td>`);
            $(`#rowgroupDD_${this.tableId} [value=${this.CurrentRowGroup.Name.trim()}]`).attr("selected", "selected");

            rows = this.Api.rows().nodes();
            $.each(this.Levels, function (i, obj) {
                if (obj.insertionType !== "After")
                    $(rows).eq(obj.rowIndex).before(obj.html);
                else
                    $(rows).eq(obj.rowIndex).after(obj.html);
            });
            var ct = $("#" + this.tableId + " .group[group=1]").length;
            $(`#group-All_${this.tableId} td[colspan=${count}]`).prepend(` Groups (${ct}) - `);
        }
        else {
            $(`#rowgroupDD_${this.tableId} [value=None`).attr("selected", "selected");
            $(`#group-All_${this.tableId} td[colspan=${count}]`).prepend(` Groups `);
        }
        $("#" + this.tableId + " tbody").off("click", "tr.group td:not('.rowgroupheadercheckboxtd')").on("click", "tr.group td:not('.rowgroupheadercheckboxtd')", this.collapseGroup);
        $("#" + this.tableId + " tbody").off("click", "tr.group-All").on("click", "tr.group-All", this.collapseAllGroup);
        $("." + this.tableId + "_rowgroupheadercheckbox").off("change").on("change", this.ModifyRowgroupCheckbox.bind(this));
    };

    this.singlelevelRowgrouping = function () {
        var rows = this.Api.rows().nodes();
        var rowsdata = this.Api.rows().data();
        var index = this.RGIndex;
        var count = this.Api.columns()[0].length;
        var lastrow = -1;
        var last = null;
        var colobj = {};
        var groupString = "";
        var groupArray = [];
        this.rowgroupFilter = [];
        $.each(this.NumericIndex, function (k, num) {
            if (!(num in colobj)) {
                colobj[num] = new Array();
            }
        });

        $.each(this.unformatedData, function (i, _dataArray) {
            groupString = "";
            groupArray = []
            $.each(index, function (j, dt) {
                groupArray.push((_dataArray[dt].trim() === "") ? "(Blank)" : _dataArray[dt].trim());
                groupString += (_dataArray[dt].trim() === "") ? "(Blank)" : _dataArray[dt].trim();
                if (typeof index[j + 1] !== "undefined")
                    groupString += ",";
            }.bind(this));

            if (last !== groupString) {
                if (last === null || Object.keys(colobj).length === 0)
                    $(rows).eq(i).before(this.getGroupRowSingle(count, groupArray));
                else {
                    var rowstring = this.getSubRow(colobj, groupString, count);
                    $(rows).eq(i).before(rowstring);
                    $(rows).eq(i).before(this.getGroupRowSingle(count, groupArray));
                }
                last = groupString;
                $.each(colobj, function (key, val) {
                    colobj[key] = [];
                    colobj[key].push(_dataArray[key]);
                });
            }
            else {
                $.each(colobj, function (key, val) {
                    colobj[key].push(_dataArray[key]);
                });
            }
            lastrow = i;
        }.bind(this));

        if (Object.keys(colobj).length !== 0 && ($(rows).eq(lastrow).hasClass("odd") || $(rows).eq(lastrow).hasClass("even"))) {
            var rowstring = this.getSubRow(colobj, groupString, count);
            $(rows).eq(lastrow).after(rowstring);
        }

        var ct = $(".group[group=0]").length;
        $(`#group-All_${this.tableId} td[colspan=${count}]`).prepend(` All Groups (${ct}) - `);
        this.getRowsCount(count, "single");
    }

    this.getGroupRowSingle = function (count, groupArray) {
        var str = "<tr class='group' group='0'><td> &nbsp;</td>";
        var tempstr = "";
        $.each(this.RGIndex, function (j, dt) {
            var tempobj = $.grep(this.EbObject.CurrentRowGroup.RowGrouping.$values, function (obj) { return dt === obj.data });
            var type = tempobj[0].Type;
            //if (type === 5 || type === 6) {
            //    groupArray[j] = this.renderDateformat(groupArray[j], "/");
            //}
            if (tempobj[0].LinkRefId !== null)
                tempstr += tempobj[0].sTitle + `: <b data-rowgroup="true" data-colname='${tempobj[0].name}' data-coltype='${tempobj[0].Type}' data-data='${groupArray[j]}'><a href="#" oncontextmenu="return false" class="tablelink" data-colindex="${tempobj[0].data}" data-link="${tempobj[0].LinkRefId}" tabindex="0">${groupArray[j]}</a></b>`;
            else
                tempstr += tempobj[0].sTitle + `: <b data-rowgroup="true" data-colname='${tempobj[0].name}' data-coltype='${tempobj[0].Type}' data-data='${groupArray[j]}'>${groupArray[j]}</b>`;

            if (typeof this.RGIndex[j + 1] !== "undefined")
                tempstr += ",";
        }.bind(this));

        //$.each(this.EbObject.CurrentRowGroup.RowGrouping.$values, function (k, obj) {
        str += "<td><i class='fa fa-minus-square-o' style='cursor:pointer;'></i></td><td colspan=" + count + ">" + tempstr + "</td></tr>";
        //});
        return str;
    }.bind(this);

    this.getGroupRow = function (count, groupString, rowgroup, dt) {
        var str = "<tr class='group' group='" + rowgroup + "'>";
        for (var i = 0; i <= rowgroup; i++)
            str += "<td> &nbsp;</td>";

        var tempobj = $.grep(this.EbObject.CurrentRowGroup.RowGrouping.$values, function (obj) { return dt === obj.data });
        var type = tempobj[0].Type;
        //if (type === 5 || type === 6) {
        //    groupArray[j] = this.renderDateformat(groupArray[j], "/");
        //}
        let tempstr = "";
        if (tempobj[0].LinkRefId !== null)
            tempstr = tempobj[0].sTitle + `: <b data-rowgroup="true" data-colname='${tempobj[0].name}' data-coltype='${tempobj[0].Type}' data-data='${groupString}'><a href="#" oncontextmenu="return false" class="tablelink" data-colindex="${tempobj[0].data}" data-link="${tempobj[0].LinkRefId}" tabindex="0">${groupString}</a></b>`;
        else
            tempstr = tempobj[0].sTitle + `: <b data-rowgroup="true" data-colname='${tempobj[0].name}' data-coltype='${tempobj[0].Type}' data-data='${groupString}'>${groupString}</b>`;
        str += "<td><i class='fa fa-minus-square-o' style='cursor:pointer;'></i></td><td colspan=" + count + ">" + tempstr + "</td></tr>";
        return str;
    }.bind(this);

    this.getSubRow = function (colobj, groupString, count, rowgroup) {
        var i = 0;
        rowgroup = (typeof rowgroup === "undefined") ? 0 : rowgroup;
        var str = "<tr class='group-sum' group='" + rowgroup + "'>";
        $.each(this.rowgroupCols, function (k, obj) {
            str += "<td>&nbsp;</td>";
        });
        $.each(this.extraCol, function (k, obj) {
            if (obj.bVisible)
                str += "<td>&nbsp;</td>";
        });
        $.each(this.EbObject.Columns.$values, function (k, obj) {
            if (obj.bVisible) {
                if (Object.keys(colobj).contains(k.toString()) && obj.Aggregate) {
                    var val = colobj[k];
                    if (val.length === 1)
                        val.push("0");
                    str += "<td class='dt-body-right'>" + getSum(val).toFixed(obj.DecimalPlaces) + "</td>";// + "," + getAverage(val).toFixed(2)+
                }
                else
                    str += "<td>&nbsp;</td>";
            }
        });
        return str + "</tr>";
    };

    this.collapseAllGroup = function (e) {
        if (!$(e.target).is("select")) {
            var $elems = $(e.target).parents().closest(".group-All").nextAll("[role=row]");
            var $Groups = $(e.target).parents().closest(".group-All").nextAll(".group");
            var $target = $(e.target).closest("tr").find("i");

            if ($target.hasClass("fa-plus-square-o")) {
                $elems.show();
                $(".group").show();
                $(".group-sum").show();
                this.collapseRelated($target, "show");
                $Groups.children().find("I").removeAttr("class").attr("class", "fa fa-minus-square-o");
            }
            else {
                $elems.hide();
                this.collapseRelated($target, "hide");
                $Groups.children().find("I").removeAttr("class").attr("class", "fa fa-plus-square-o");
            }
            this.Api.columns.adjust();
        }
        if ($(e.target).parents(".containerrow").length === 0) {
            $(".containerrow").hide();
            $(".containerrow").prev().children().find("I").removeClass("fa-caret-up").addClass("fa-caret-down");
        }
    }.bind(this);

    this.collapseGroup = function (e) {
        var $group = $(e.target).parents().closest(".group");
        var groupnum = $group.attr("group");
        var $elems = $group.nextUntil("[group=" + groupnum + "]");

        if ($elems.css("display") === "none") {
            $elems.show();
            this.collapseRelated($group.find("i"), "show");
            $elems.filter(".group").children().find("I").removeAttr("class").attr("class", "fa fa-minus-square-o");
        }
        else {
            $elems.hide();
            this.collapseRelated($group.find("i"), "hide");
            $elems.filter(".group").children().find("I").removeAttr("class").attr("class", "fa fa-plus-square-o");
        }
        this.checkHeaderCollapse($group, groupnum);

        if ($(e.target).parents(".containerrow").length === 0) {
            $(".containerrow").hide();
            $(".containerrow").prev().children().find("I").removeClass("fa-caret-up").addClass("fa-caret-down");
        }
        this.Api.columns.adjust();
    }.bind(this);

    this.collapseRelated = function ($elem, type) {

        if (type === "show") {
            $elem.removeClass("fa-plus-square-o");
            $elem.addClass("fa-minus-square-o");
        }
        else {
            $elem.removeClass("fa-minus-square-o");
            $elem.addClass("fa-plus-square-o");
        }

    };

    this.checkHeaderCollapse = function ($group, groupnum) {
        var headergroup = parseInt(groupnum) - 1;
        var nextSiblings = $group.nextUntil("[group=" + headergroup + "]").filter(".group[group=" + groupnum + "]").next();
        var prevSiblings = $group.prevUntil("[group=" + headergroup + "]").filter(".group[group=" + groupnum + "]").next();
        var $ElemtoChange = $group.prevAll(".group[group=" + headergroup + "]").first().children().find("I");
        var nextproperty = nextSiblings.map(function () { return $(this).css("display"); }).get();
        var prevproperty = prevSiblings.map(function () { return $(this).css("display"); }).get();
        var property = nextproperty.concat(prevproperty);
        if (property.contains("none")) {
            var flag = property.every(function (value) {
                return value === property[0];
            });
            if (flag)
                $ElemtoChange.removeAttr("class").attr("class", "fa fa-plus-square-o");
            else
                $ElemtoChange.removeAttr("class").attr("class", "fa fa-minus-square-o");
        }
        else if (property.length === 0) {
            if ($group.nextUntil("[group=" + headergroup + "]").css("display") === "none")
                $ElemtoChange.removeAttr("class").attr("class", "fa fa-plus-square-o");
            else
                $ElemtoChange.removeAttr("class").attr("class", "fa fa-minus-square-o");
        }
        else
            $ElemtoChange.removeAttr("class").attr("class", "fa fa-minus-square-o");
    };

    this.ModifyRowgroupCheckbox = function (e) {
        var $group = $(e.target).parents().closest(".group");
        var groupnum = $group.attr("group");
        var $elems = $group.nextUntil("[group=" + groupnum + "]");
        let checkbox = $(e.target).closest("." + this.tableId + "_rowgroupheadercheckbox");
        if (checkbox[0].checked) {
            $elems.find("." + this.tableId + "_select").prop('checked', true);
            $elems.filter(".group").find("." + this.tableId + "_rowgroupheadercheckbox").prop('checked', true);
            //$group.find(".rowgrouprowcount").html("&nbsp;" + $elems.filter(".odd,.even").length + " rows selected");
        }
        else {
            $elems.find("." + this.tableId + "_select").prop('checked', false);
            $elems.filter(".group").find("." + this.tableId + "_rowgroupheadercheckbox").prop('checked', false);
            $group.find(".rowgrouprowcount").empty();
        }
        $elems.find("." + this.tableId + "_select").trigger("change");
        $elems.filter(".group").find("." + this.tableId + "_rowgroupheadercheckbox").trigger("change");
    };

    this.multiplelevelRowgrouping = function () {
        var rows = this.Api.rows().nodes();
        var rowsdata = this.Api.rows().data();
        var index = this.RGIndex;
        var count = this.Api.columns()[0].length;
        var lastrow = -1;
        var last = null;
        var colobj = {};
        var groupString = "";
        var groupcount = 0;
        this.rowgroupFilter = [];
        $.each(this.NumericIndex, function (k, num) {
            if (!(num in colobj)) {
                colobj[num] = new Array();
            }
        });

        $.each(index, function (j, dt) {
            var last = null;
            var $parent = null;
            var $count = 0;
            //var tempobj = $.grep(this.EbObject.CurrentRowGroup.RowGrouping.$values, function (obj) { return dt === obj.data });//tempobj[0].sTitle + " : " +
            $.each(this.unformatedData, function (i, _dataArray) {

                var te = (_dataArray[dt] === null || _dataArray[dt].trim() === "") ? "(Blank)" : _dataArray[dt].trim();
                groupString = te;

                if (last !== groupString) {
                    if (last === null || Object.keys(colobj).length === 0) {
                        var groupstr = this.getGroupRow(count, groupString, j, dt);
                        $(rows).eq(i).before(groupstr);
                        $count++;
                        $parent = $(groupstr);
                    }
                    else {
                        $parent
                        var rowstring = this.getSubRow(colobj, groupString, count, j);
                        $(rows).eq(i - 1).after(rowstring);
                        $(rows).eq(i).before(this.getGroupRow(count, groupString, j, dt));
                    }
                    last = groupString;
                    $.each(colobj, function (key, val) {
                        colobj[key] = [];
                        colobj[key].push(_dataArray[key]);
                    });
                }
                else {
                    $.each(colobj, function (key, val) {
                        colobj[key].push(_dataArray[key]);
                    });
                    $count++;
                }
                lastrow = i;
            }.bind(this));

            if (Object.keys(colobj).length !== 0 && ($(rows).eq(lastrow).hasClass("odd") || $(rows).eq(lastrow).hasClass("even"))) {
                var rowstring = this.getSubRow(colobj, groupString, count, j);
                $(rows).eq(lastrow).after(rowstring);
            }

        }.bind(this));

        var ct = $(".group[group=0]").length;
        $(`#group-All_${this.tableId} td[colspan=${count}]`).prepend(`All Groups (${ct}) - `);
        this.getRowsCount(count, "multiple");
    }

    this.getRowsCount = function (count, type) {
        let rows = $("#" + this.tableId + " tbody tr.group[group=0]");
        var j = 0;
        this.recursiveRowCount(rows, j, count, type);
    }

    this.recursiveRowCount = function (rows, j, count, type) {
        $.each(rows, function (i, elem) {
            if (typeof (this.RGIndex[j + 1]) === "undefined")
                $(elem).children("td[colspan=" + count + "]").children("b").last().append(" (" + $(elem).nextUntil("[group=" + j + "]").length + ")");
            else {
                if (type === "single")
                    $(elem).children("td[colspan=" + count + "]").children("b").last().append(" (" + $(elem).nextUntil("[group=" + j + "]").length + ")");
                else
                    $(elem).children("td[colspan=" + count + "]").children("b").last().append(" (" + $(elem).nextUntil(".group[group=" + (j) + "]").filter(".group").length + ")");

            }
        }.bind(this));
        if (typeof (this.RGIndex[j + 1]) !== "undefined" && type !== "single") {
            var rowsarray = $("#" + this.tableId + " tbody tr.group[group=" + (j + 1) + "]");
            this.recursiveRowCount(rowsarray, (j + 1), count, type);
        }
    }

    this.doSerial = function () {
        var tempobj = $.grep(this.extraCol, function (obj) { return obj.name === "serial" });
        var index = this.Api.columns(tempobj[0].name + ':name').indexes()[0]
        this.Api.column(index).nodes().each(function (cell, i) { cell.innerHTML = i + 1; });
        this.Api.columns.adjust();
    };

    this.createFooter = function () {
        var ps = 0;
        var tid = this.tableId;
        var aggFlag = false;
        var lfoot = $('#' + this.tableId + '_wrapper .DTFC_LeftFootWrapper table');
        var rfoot = $('#' + this.tableId + '_wrapper .DTFC_RightFootWrapper table');
        var scrollfoot = $('#' + this.tableId + '_wrapper .dataTables_scrollFootInner table');

        if (scrollfoot.length !== 0)
            var eb_footer_controls_scrollfoot = this.GetAggregateControls(ps, 1);

        if (this.EbObject.LeftFixedColumn + this.EbObject.RightFixedColumn > 0) {
            for (var j = 0; j < eb_footer_controls_scrollfoot.length; j++) {
                if (j < this.EbObject.LeftFixedColumn) {
                    scrollfoot.find("tfoot").children("tr").eq(ps).children("th").eq(j).html(eb_footer_controls_scrollfoot[j]);
                    scrollfoot.find("tfoot").children("tr").eq(ps).children("th").eq(j).children().remove();
                }
                else {
                    if (j < eb_footer_controls_scrollfoot.length - this.EbObject.RightFixedColumn)
                        scrollfoot.find("tfoot").children("tr").eq(ps).children("th").eq(j).html(eb_footer_controls_scrollfoot[j]);
                    else {
                        scrollfoot.find("tfoot").children("tr").eq(ps).children("th").eq(j).html(eb_footer_controls_scrollfoot[j]);
                        scrollfoot.find("tfoot").children("tr").eq(ps).children("th").eq(j).children().remove();
                    }
                }
            }
        }
        else {
            for (let j = 0; j < eb_footer_controls_scrollfoot.length; j++)
                scrollfoot.find("tfoot").children("tr").eq(ps).children("th").eq(j).append(eb_footer_controls_scrollfoot[j]); //append or html[solves tv ctrl double footer] fn
        }
        if (lfoot.length !== 0 || rfoot.length !== 0) {
            var eb_footer_controls_lfoot = this.GetAggregateControls(ps, 50);
            if (lfoot.length !== 0) {
                for (let j = 0; j < this.EbObject.LeftFixedColumn; j++) {
                    $(lfoot).children().find("tr").eq(ps).children("th").eq(j).html(eb_footer_controls_lfoot[j]);
                    if (j === 0)
                        $(lfoot).children().find("tr").eq(ps).children("th").eq(j).html("");
                    $(lfoot).children().find("tr").eq(ps).children("th").eq(j).css("width", scrollfoot.find("tfoot").children("tr").eq(ps).children("th").eq(j).css("width"));
                    $(lfoot).children().find("tr").eq(ps).children("th").eq(j).css("height", scrollfoot.find("tfoot").children("tr").eq(ps).children("th").eq(j).css("height"));
                }
            }

            if (rfoot.length !== 0) {
                var start = eb_footer_controls_lfoot.length - this.EbObject.RightFixedColumn;
                for (let j = 0; (j + start) < eb_footer_controls_lfoot.length; j++) {
                    $(rfoot).children().find("tr").eq(ps).children("th").eq(j).html(eb_footer_controls_lfoot[j + start]);
                    $(rfoot).children().find("tr").eq(ps).children("th").eq(j).css("width", scrollfoot.find("tfoot").children("tr").eq(ps).children("th").eq(j + start).css("width"));
                    $(rfoot).children().find("tr").eq(ps).children("th").eq(j).css("height", scrollfoot.find("tfoot").children("tr").eq(ps).children("th").eq(j + start).css("height"));
                }
            }

            $(lfoot).children().find("tr").css("height", scrollfoot.find("tfoot").children("tr").css("height"));
            $(rfoot).children().find("tr").css("height", scrollfoot.find("tfoot").children("tr").css("height"));
        }
        if (this.eb_agginfo.length > 0) {
            var footer_select_id = this.tableId + "_ftr_sel" + ps;
            let _ls = "<div class='input-group-btn dropup'>" +
                "<button type='button' class='btn btn-default dropdown-toggle footerDD' data-toggle='dropdown' id='" + footer_select_id + "'>&sum;</button>" +
                " <ul class='dropdown-menu'>" +
                "  <li class='footerli'><a href ='#' class='eb_ftsel" + this.tableId + "'> &sum; </a><span class='footertext eb_ftsel" + this.tableId + "'>Sum</span></li>" +
                "  <li class='footerli'><a href ='#' class='eb_ftsel" + this.tableId + "'> x&#772; </a><span class='footertext eb_ftsel" + this.tableId + "'>Average</span></li>" +
                " </ul>" +
                " </div>";
            scrollfoot.find(".addedbyeb th").eq(0).html(_ls);
        }
        this.summarize2();
    };

    this.GetAggregateControls = function (footer_id, zidx) {
        var ScrollY = this.EbObject.scrollY;
        var ResArray = [];
        var tableId = this.tableId;
        //$.each(this.EbObject.Columns.$values, this.GetAggregateControls_inner.bind(this, ResArray, footer_id, zidx));
        $.each(this.Api.settings().init().aoColumns, this.GetAggregateControls_inner.bind(this, ResArray, footer_id, zidx));
        return ResArray;
    };

    this.GetAggregateControls_inner = function (ResArray, footer_id, zidx, i, col) {
        var _ls;
        if (col.bVisible) {
            var temp = $.grep(this.eb_agginfo, function (agg) { return agg.colname === col.name });
            //(col.Type ==parseInt( gettypefromString("Int32")) || col.Type ==parseInt( gettypefromString("Decimal")) || col.Type ==parseInt( gettypefromString("Int64")) || col.Type ==parseInt( gettypefromString("Double"))) && col.name !== "serial"
            if (col.Aggregate || col.AggregateFun === 0 || col.AggregateFun === 1) {
                var footer_txt = this.tableId + "_" + col.name + "_ftr_txt" + footer_id;
                var style = "";
                if (col.Align.toString() === EbEnums.Align.Left)
                    style = "text-align: left;";
                else if (col.Align.toString() === EbEnums.Align.Right || col.Align.toString() === EbEnums.Align.Auto)
                    style = "text-align: right;";
                else
                    style = "text-align: center;";

                //_ls = `<input type='text' class='' id='${footer_txt}' disabled style='z-index:${zidx.toString()};${style}'/>`;
                _ls = `<div style='z-index:${zidx.toString()};text-align: center;'><p id='${footer_txt}' disabled style='${style} margin: 10px 0;'></p><div>`;
            }
            else
                _ls = "&nbsp;";

            ResArray.push(_ls);
        }
    };

    this.summarize2 = function () {
        let isUpdatable = true;
        if (Option.fnCanUpdateFooter)
            isUpdatable = Option.fnCanUpdateFooter();
        if (isUpdatable) {
            var api = this.Api;
            var tableId = this.tableId;
            let opScroll = $('.dataTables_scrollFootInner #' + tableId + '_ftr_sel0').text().trim();
            let opLF = $('.DTFC_LeftFootWrapper #' + tableId + '_ftr_sel0').text().trim();
            let opRF = $('.DTFC_RightFootWrapper #' + tableId + '_ftr_sel0').text().trim();
            $.each(this.eb_agginfo, function (index, agginfo) {
                if (agginfo.colname) {
                    let ftrtxtScroll = '.dataTables_scrollFootInner #' + tableId + '_' + agginfo.colname + '_ftr_txt0';
                    let ftrtxtLF = '.DTFC_LeftFootWrapper #' + tableId + '_' + agginfo.colname + '_ftr_txt0';
                    let ftrtxtRF = '.DTFC_RightFootWrapper #' + tableId + '_' + agginfo.colname + '_ftr_txt0';

                    var col = api.column(agginfo.colname + ':name');
                    var summary_val = 0;
                    if (opScroll === '∑' || opLF === '∑' || opRF === '∑') {
                        if (this.Source === "datagrid")
                            summary_val = col.data().sum().toFixed(agginfo.deci_val);
                        else
                            summary_val = (typeof this.summary[agginfo.data] !== "undefined") ? this.summary[agginfo.data][0] : 0;
                    }
                    if (opScroll === 'x̄' || opLF === 'x̄' || opRF === 'x̄') {
                        if (this.Source === "datagrid")
                            summary_val = col.data().average().toFixed(agginfo.deci_val);
                        else
                            summary_val = (typeof this.summary[agginfo.data] !== "undefined") ? this.summary[agginfo.data][1] : 0;
                    }
                    if (opScroll !== "")
                        $(ftrtxtScroll).text(summary_val);
                    if (opLF !== "")
                        $(ftrtxtLF).text(summary_val);
                    if (opRF !== "")
                        $(ftrtxtRF).text(summary_val);
                }
            }.bind(this));
        }
    };

    this.createFilterRowHeader = function () {
        var tableid = this.tableId;
        var order_info_ref = this.order_info;

        var fc_lh_tbl = $('#' + tableid + '_wrapper .DTFC_LeftHeadWrapper table');
        var fc_rh_tbl = $('#' + tableid + '_wrapper .DTFC_RightHeadWrapper table');

        if (fc_lh_tbl.length !== 0 || fc_rh_tbl.length !== 0) {
            this.GetFiltersFromSettingsTbl(50);
            if (fc_lh_tbl.length !== 0) {
                fc_lh_tbl.find("thead").append($("<tr role='row' class='addedbyeb'/>"));
                for (let j = 0; j < this.EbObject.LeftFixedColumn; j++)
                    $(fc_lh_tbl.find("tr[class=addedbyeb]")).append($(this.eb_filter_controls_4fc[j]));
            }
            if (fc_rh_tbl.length !== 0) {
                fc_rh_tbl.find("thead").append($("<tr role='row' class='addedbyeb'/>"));
                for (let j = this.eb_filter_controls_4fc.length - this.EbObject.RightFixedColumn; j < this.eb_filter_controls_4fc.length; j++)
                    $(fc_rh_tbl.find("tr[class=addedbyeb]")).append($(this.eb_filter_controls_4fc[j]));
            }
        }

        var sc_h_tbl = $('#' + tableid + '_wrapper .dataTables_scrollHeadInner table');
        if (sc_h_tbl !== null) {
            this.GetFiltersFromSettingsTbl(1);
            sc_h_tbl.find("thead").append($("<tr role='row' class='addedbyeb'/>"));
            if (this.EbObject.LeftFixedColumn + this.EbObject.RightFixedColumn > 0) {
                for (let j = 0; j < this.eb_filter_controls_4sb.length; j++) {
                    if (j < this.EbObject.LeftFixedColumn) {
                        $(sc_h_tbl.find("tr[class=addedbyeb]")).append($(this.eb_filter_controls_4sb[j]));
                        $(sc_h_tbl.find("tr[class=addedbyeb] th:eq(" + j + ")")).children().not("span").remove();
                    }
                    else {
                        if (j < this.eb_filter_controls_4sb.length - this.EbObject.RightFixedColumn)
                            $(sc_h_tbl.find("tr[class=addedbyeb]")).append($(this.eb_filter_controls_4sb[j]));
                        else {
                            $(sc_h_tbl.find("tr[class=addedbyeb]")).append($(this.eb_filter_controls_4sb[j]));
                            $(sc_h_tbl.find("tr[class=addedbyeb] th:eq(" + j + ")")).children().not("span").remove();
                        }
                    }
                }
            }
            else {
                for (let j = 0; j < this.eb_filter_controls_4sb.length; j++)
                    $(sc_h_tbl.find("tr[class=addedbyeb]")).append($(this.eb_filter_controls_4sb[j]));
            }
            sc_h_tbl.find("thead .addedbyeb").before($("<tr role='row' id='filterdisplayrow_" + this.tableId + "' class='filterdisplayrow'><td id='filterdisplayrowtd_" + this.tableId + "' colspan=" + this.columnCount + " style='padding: 2px!important;'></td></tr>"));
        }

        // $('#' + tableid + '_wrapper table thead tr[class=addedbyeb]').hide();

        //$('thead:eq(0) tr:eq(1) [type=checkbox]').prop('indeterminate', true);
        $(".addedbyeb [type=checkbox]").prop('indeterminate', true);
        $(".DTFC_Blocker").remove();
    };

    this.createColspanHeader = function () {

    };

    this.createFilterforTree = function () {
        var TRange = null;
        $(".dataTables_info").after(`<div id="${this.tableId}_filter" class="col-md-4 dataTables_filters">
        <div class="input-group">
            <input type="text" class="form-control" placeholder="Search">
            <div class="input-group-btn">
              <button class="btn btn-default" type="submit">
                <i class="glyphicon glyphicon-search"></i>
              </button>
            </div>
          </div>
       
        </div>`);
        $(`#${this.tableId}_filter input`).off("keyup").on("keyup", this.LocalSearch.bind(this));
        //<button class="btn previous_h"><i class="fa fa-angle-up" aria-hidden="true"></i></button>
        //<button class="btn next_h"><i class="fa fa-angle-down" aria-hidden="true"></i></button>
    };

    this.LocalSearch = function (e) {
        var text = $(e.target).val();
        //if (e.keyCode === 13 && text.length > 2) {
        //$(".match").each(function (i, span) {
        //    $(span).parent().text($(span).parent().text());
        //    $(span).remove();
        //});
        if (text !== "")
            this.searchAndHighlight(text, ".dataTables_scrollBody");
        else
            $(".dataTables_scrollBody").find("tr").show();
        this.Api.columns.adjust();

        //}
    };

    this.findString = function (str) {
        if (parseInt(navigator.appVersion) < 4) return;
        var strFound;
        if (window.find) {

            // CODE FOR BROWSERS THAT SUPPORT window.find

            strFound = self.find(str);
            if (!strFound) {
                strFound = self.find(str, 0, 1);
                while (self.find(str, 0, 1)) continue;
            }
        }
        else if (navigator.appName.indexOf("Microsoft") !== -1) {

            // EXPLORER-SPECIFIC CODE

            if (TRange !== null) {
                TRange.collapse(false);
                strFound = TRange.findText(str);
                if (strFound) TRange.select();
            }
            if (TRange === null || strFound === 0) {
                TRange = self.document.body.createTextRange();
                strFound = TRange.findText(str);
                if (strFound) TRange.select();
            }
        }
        else if (navigator.appName === "Opera") {
            alert("Opera browsers not supported, sorry...");
            return;
        }
        if (!strFound) alert("String '" + str + "' not found!");
        return;
    };

    this.searchAndHighlight = function (searchTerm, selector) {
        if (searchTerm) {
            var searchTermRegEx = new RegExp(searchTerm, "ig");
            var matches = $(selector).text().match(searchTermRegEx);
            if (matches !== null && matches.length > 0) {
                $('.highlighted').removeClass('highlighted'); //Remove old search highlights  

                //Remove the previous matches
                $span = $(selector).children('span');
                $span.replaceWith($span.html());

                if (searchTerm === "&") {
                    searchTerm = "&amp;";
                    searchTermRegEx = new RegExp(searchTerm, "ig");
                }
                var arr = $(selector).find("td").toArray().filter(obj => $(obj).text().toLowerCase().includes(searchTerm.toLowerCase()));
                //arr.forEach(function (obj, i) {
                //    let $target = $(obj);
                //    let $next = $target.children();
                //    while ($next.length) {
                //        $target = $next;
                //        $next = $next.children();
                //    }
                //    let x = $($target).text().match(searchTermRegEx);
                //    $($target).html($($target).html().replace(searchTermRegEx, "<span class='match'>" + x[0] + "</span>"));
                //}); 
                //$(selector).html($(selector).html().replace(searchTermRegEx, "<span class='match'>" + matches[0] + "</span>"));
                //$('.match:first').addClass('highlighted');

                //var i = 0;

                //$('.next_h').off('click').on('click', function () {

                //    i++;

                //    if (i >= $('.match').length) i = 0;

                //    $('.match').removeClass('highlighted');
                //    $('.match').eq(i).addClass('highlighted');
                //    if ($('.match').length) {
                //        $(selector).animate({
                //            scrollTop: $('.match').eq(i).position().top
                //        }, 300);
                //    }
                //});

                //$('.previous_h').off('click').on('click', function () {

                //    i--;

                //    if (i < 0) i = $('.match').length - 1;

                //    $('.match').removeClass('highlighted');
                //    $('.match').eq(i).addClass('highlighted');
                //    if ($('.match').length) {
                //        $(selector).animate({
                //            scrollTop: $('.match').eq(i).position().top
                //        }, 300);
                //    }
                //});

                //if ($('.highlighted:first').length) { //if match found, scroll to where the first one appears
                //    $(selector).scrollTop($('.highlighted:first').position().top);
                //}
                $(selector).find("tr").hide();
                arr.forEach(function (obj, i) {
                    $(obj).closest("tr").show();
                });
                return true;
            }
        }
        return false;
    };

    this.addFilterEventListeners = function () {
        $(".columnimage").lazy();
        $('#' + this.tableId + '_wrapper thead tr:eq(0)').off('click').on('click', 'th', this.orderingEvent.bind(this));
        $(".eb_fsel" + this.tableId).off("click").on("click", this.setLiValue.bind(this));
        $(".eb_ftsel" + this.tableId).off("click").on("click", this.fselect_func.bind(this));
        $.each($(this.Api.columns().header()).parent().siblings().children().toArray(), this.setFilterboxValue.bind(this));
        $("." + this.tableId + "_htext").off("keyup").on("keyup", this.call_filter);
        $(".eb_fbool" + this.tableId).off("change").on("change", this.toggleInFilter.bind(this));
        $(".eb_selall" + this.tableId).off("click").on("click", this.clickAlSlct.bind(this));
        $("." + this.tableId + "_select").off("change").on("change", this.updateAlSlct.bind(this));
        $(".eb_canvas" + this.tableId).off("click").on("click", this.renderMainGraph);
        $(".tablelink" + this.tableId).off("click").on("click", this.link2NewTable.bind(this));
        $(".tablelinkfromcolumn" + this.tableId).off("click").on("click", this.link2NewTable.bind(this));
        $("#" + this.tableId).off("click", ".tablelink4calendar").on("click", ".tablelink4calendar", this.linkFromCalendar.bind(this));
        //$(`tablelinkInline_${this.tableId}`).off("click").on("click", this.link2NewTableInline.bind(this));
        //$(".tablelink_" + this.tableId).off("mousedown").on("mousedown", this.link2NewTableInNewTab.bind(this));
        $(".closeTab").off("click").on("click", this.deleteTab.bind(this));


        //this.Api.off('key-focus').on('key-focus', function (e, datatable, cell) {
        //    datatable.rows().deselect();
        //    let trindex = cell.index().row;
        //    datatable.row(trindex).select();
        //    //$(".DTFC_LeftBodyLiner tbody tr").eq(trindex).addClass("selected");
        //    //$(".DTFC_RightBodyLiner tbody tr").eq(trindex).addClass("selected");
        //});

        //this.filterbtn.off("click").on("click", this.showOrHideFilter.bind(this));
        $("#clearfilterbtn_" + this.tableId).off("click").on("click", this.clearFilter.bind(this));
        //$("#" + this.tableId + "_btntotalpage").off("click").on("click", this.showOrHideAggrControl.bind(this));
        this.copybtn.off("click").on("click", this.CopyToClipboard.bind(this));
        this.printbtn.off("click").on("click", this.ExportToPrint.bind(this));
        //this.printAllbtn.off("click").on("click", this.printAll.bind(this));
        this.printSelectedbtn.off("click").on("click", this.printSelected.bind(this));
        $("#btnExcel" + this.tableId).off("click").on("click", this.ExportToExcel.bind(this));
        this.csvbtn.off("click").on("click", this.ExportToCsv.bind(this));
        this.pdfbtn.off("click").on("click", this.ExportToPdf.bind(this));
        //$("#btnToggleFD" + this.tableId).off("click").on("click", this.toggleFilterdialog.bind(this));
        $(".columnMarker" + this.tableId).off("click").on("click", this.link2NewTable.bind(this));
        $(".columnimage").one("load", function () {
            $(".columnimage").off("click").on("click", this.ViewImage.bind(this));
            $(".columnimage").on("error", this.OnErrorImage);
        }.bind(this));
        $('[data-toggle="tooltip"],[data-toggle-second="tooltip"]').tooltip({
            placement: 'bottom'
        });
        $('.status-time').tooltip({
            placement: 'left'
        });

        $('.columntooltip').popover({
            container: 'body',
            trigger: 'hover',
            placement: this.PopoverPlacement,
            html: true,
            content: function (e, i) {
                $(".popover").remove();
                //return atob($(this).attr("data-contents"));
                return decodeURIComponent(atob($(this).attr("data-contents")).split('').map(function (c) {
                    return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
                }).join(''));
            },
        });

        $('.btn-approval_popover').popover({
            container: 'body',
            trigger: 'click',
            placement: this.ApprovalPopoverPlacement,
            html: true,
            template: '<div class="popover approval-popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>',
            content: function (e, i) {
                return atob($(this).attr("data-contents"));
            },
        });

        $('.btn-approval_popover').on('click', function (e) {
            //$('.btn-approval_popover').not(this).popover("hide");
        });

        $('.btn-approval_popover').off('shown.bs.popover').on('shown.bs.popover', function (e) {
            $(".stage_actions").selectpicker();
            let $td = $(e.target).closest("td.tdheight");
            $(".btn-action_execute").off("click").on("click", this.ExecuteApproval.bind(this, $td, 'execute'));
            $(".btn-action_reset").off("click").on("click", this.ExecuteApproval.bind(this, $td, 'reset'));
        }.bind(this));

        $('.btn-approval_popover').on('hidden.bs.popover', function (e) {
            $(e.target).data("bs.popover").inState.click = false;
        }.bind(this));

        $('body').on('click', function (e) {
            $('[data-toggle=popover]').each(function () {
                // hide any open popovers when the anywhere else in the body is clicked
                if (!$(this).is(e.target) && $(this).has(e.target).length === 0 && $('.popover').has(e.target).length === 0) {
                    $(this).popover('hide');
                }
            });
        });

        if (this.Source !== "loginActivity") {
            $(".rating").rateYo({
                readOnly: true,
                starWidth: "24px"
            });
        }

        $("[data-coltyp=date]").datepicker({
            dateFormat: this.datePattern.replace(new RegExp("M", 'g'), "m").replace(new RegExp("yy", 'g'), "y"),
            beforeShow: function (elem, obj) {
                $(".ui-datepicker").addClass("datecolumn-picker");
            },
            onSelect: function (d, i) {
                if (d !== i.lastVal)
                    this.call_filter({ keyCode: 10 });
            }.bind(this)
        });
        $("[data-coltyp=date]").on("click", function () {
            $(this).datepicker("show");
        });
        //$("#switch" + this.tableId).off("click").on("click", this.SwitchToChart.bind(this));
        //this.Api.columns.adjust();
    };

    this.ViewImage = function (e) {
        let data = $(e.target).attr("src").replace("/images/", "").replace("small/", "").replace("medium/", "").replace(".jpg", "");
        this.FileViewer.showimage(data);
    };

    this.OnErrorImage = function () {
        $(this).attr('src', '/images/image.png').off("click");
    };

    this.PopoverPlacement = function (context, source) {
        var position = $(source).offset();

        if (position.left > 1000)
            return "left";
        else {
            return "right";
        }
    };

    this.ApprovalPopoverPlacement = function (context, source) {
        var position = $(source).offset();
        let w = $(window).width();
        if (position.left + 600 > w)
            return "left";
        else
            return "right";
    };

    this.GenerateButtons = function () {
        if (this.Source === "PivotTable") {
            let $print = $("<button id='print" + this.tableId + "' class='btn commonControl print' onclick='window.print();'><i class='fa fa-print' aria-hidden='true'></i></button>");
            $('print' + this.tableId).remove();
            $("#obj_icons").append($print);
        }
        else {
            this.submitId = "btnGo" + this.tableId;
            this.$submit = $("<button id='" + this.submitId + "' class='btn commonControl'><i class='fa fa-play' aria-hidden='true'></i></button>");
            if (this.Source === "WebForm") {
                $("#buttondiv_" + this.tableId).empty();
                this.$submit = $("<div id='" + this.submitId + "' class='btn commonControl'><i class='fa fa-refresh' aria-hidden='true'></i></div>");
                $("#buttondiv_" + this.tableId).append(this.$submit);
            }
            else {
                $(".toolicons").show();
                let search = $('#obj_icons .toolb-srchbx-wrpr').detach();
                $('#obj_icons').empty().append(search);
                $("#obj_icons").append(this.$submit);
            }
            this.$submit.click(this.getColumnsSuccess.bind(this));

            if (window.location.href.indexOf("hairocraft") !== -1 && this.login === "uc" && this.dvName.indexOf("leaddetails") !== -1)
                $("#obj_icons").prepend(`<button class='btn' data-toggle='tooltip' title='NewCustomer' onclick='window.open("/leadmanagement","_blank");' ><i class="fa fa-user-plus"></i></button>`);

            if (this.Source === "EbDataTable") {
                if (this.EbObject.FormLinks.$values.length > 0) {
                    this.EbObject.FormLinks.$values = this.EbObject.FormLinks.$values.filter((thing, index, self) =>
                        index === self.findIndex((t) => (
                            t.DisplayName === thing.DisplayName && t.Refid === thing.Refid
                        ))
                    );
                    this.CreateNewFormLinks();
                }
                this.CreatePrintDocsLinks();
                $("#objname").text(this.EbObject.DisplayName);
                if ($("#" + this.tableId).children().length > 0) {
                    if (this.FD) {
                        this.filterid = "filter" + this.tableId;
                        this.$filter = $("<button id='" + this.filterid + "' class='btn commonControl'><i class='fa fa-filter' aria-hidden='true'></i></button>");
                        $("#obj_icons").append(this.$filter);
                        this.$filter.click(this.CloseParamDiv.bind(this));
                    }
                    if (this.login === "uc") {
                        $("#obj_icons").append(`<div id='${this.tableId}_fileBtns' style='display: inline-block;'><div class='btn-group'></div></div>`);
                        $.each(this.permission, function (i, obj) {
                            if (obj === "Excel")
                                $("#" + this.tableId + "_fileBtns .btn-group").append("<button id ='btnExcel" + this.tableId + "' class='btn'  name = 'filebtn' data-toggle='tooltip' title = 'Excel' > <i class='fa fa-file-excel-o' aria-hidden='true'></i></button >");
                        }.bind(this));
                        dvcontainerObj.modifyNavigation();
                    }
                }
                //this.CreatePgButton();
                this.excelbtn = $("#btnExcel" + this.tableId);
            }
            else {
                $(".display-none").remove();
            }

            if (this.IsTree) {
                this.CreateContexmenu4Tree();
            }
            if (this.isSecondTime) {
                this.addFilterEventListeners();
            }
            $("#" + this.tableId + " tbody").off("click", ".groupform").on("click", ".groupform", this.collapseTreeGroup);
            this.Contexmenu4SmsColumn();
        }
    };

    this.CreatePgButton = function () {
        $("#obj_icons").append(`<button class="btn filter_menu" id="ppt-grid">
                                    <i class="fa fa-cog" aria-expanded="false"></i>
                                </button>`);
        $(".stickBtn").hide();
        this.PropertyDiv = $("#pp_inner");
        $("#ppt-grid").off("click").on("click", this.togglePG.bind(this));
        $("#pp_inner").find(".pgpin").remove();
        $("#pp_inner .pgHead").append(`<div class="icon-cont  pull-right pgpin" id="${this.tabNum}_pg-close">
                <i class="fa fa-thumb-tack" style="transform: rotate(90deg);"></i></div>`);
        $(`#${this.tabNum}_pg-close`).off("click").on("click", this.togglePG.bind(this));
    };

    this.Contexmenu4SmsColumn = function () {
        $.contextMenu({
            selector: ".smsbutton",
            trigger: 'left',
            build: function ($trigger, e) {
                $("body").find("td").removeClass("focus");
                $("body").find("[role=row]").removeClass("selected");
                $trigger.closest("[role=row]").addClass("selected");
                return {
                    items: {
                        "SENDSMS": { name: "Send SMS", icon: "fa-mobile", callback: this.OpenSMSModal.bind(this) }
                    }
                };
            }.bind(this)
        });
    };

    this.OpenSMSModal = function (key, opt, event) {
        let colname = $(opt.$trigger).attr("data-colname");
        this.phonecolumn = this.EbObject.Columns.$values.filter(obj => obj.name === colname)[0];
        this.AppendSMSModal($(opt.$trigger));
        this.AppendSMSTemplates($(opt.$trigger));
        $("#smsmodal").modal("show");
    };

    this.AppendSMSModal = function ($elem) {
        $("#smsmodal").remove();
        let modal1 = `<div class="modal fade" tabindex="-1" role="dialog" id='smsmodal'>
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">SMS Template</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" id='sms-modal-body'>
        <table class='table'>
            <tbody>
                <tr><td><div class='smslabel'>Template :</div></td><td class='smstemplate-select-cont'></td>
                    <td><div class='smslabel'>To :</div></td>
                    <td class='sms-number-cont'>
                        <input class="form-control" type='text' id='sms-number' placeholder='phone number here..'>
                    </td>
                </tr>
                <tr><td colspan='4' class='sms-textarea-cont'><textarea id='sms-textarea' class="form-control" placeholder='SMS text here..'></textarea></td></tr>
            </tbody>
        </table>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary" id='sendbtn'><i class="fa fa-paper-plane" aria-hidden="true"></i><span id='sendbtn-text'>Send</span></button>
      </div>
    </div>
  </div>
</div>`;

        $("body").prepend(modal1);
        $("#sendbtn").prop("disabled", true);
        $("#sendbtn").off("click").on("click", this.SendSMS.bind(this, $elem));
    };

    this.AppendSMSTemplates = function ($elem) {
        let template = `<select class="selectpicker smstemplate-select">`;
        //template += `<option value=''>--- Select SMS Template ---</option>`;
        $.each(this.phonecolumn.Templates.$values, function (i, obj) {
            template += `<option value='${obj.ObjRefId}'>${obj.ObjDisplayName}</option>`;
        });
        template += `<option value=''>Custom Template</option>`;
        template += `</select>`;
        $(".smstemplate-select-cont").append(template);
        $(".smstemplate-select").selectpicker();
        $('#sms-modal-body .selectpicker').on('changed.bs.select', this.ClickOnTemplate.bind(this, $elem));
        $('#sms-modal-body .selectpicker').val(this.phonecolumn.Templates.$values[0].ObjRefId).change();
    };

    this.ClickOnTemplate = function ($elem, e, clickedIndex, isSelected, previousValue) {
        let refid = $(".smstemplate-select option:selected").val();
        var idx = this.Api.row($elem.parents().closest("td")).index();
        this.rowData = this.unformatedData[idx];
        let filters = this.getFilterValues().concat(this.FilterfromRow());
        $("#sendbtn").prop("disabled", false);
        if (refid) {
            $.ajax({
                type: "POST",
                url: "../DV/GetSMSPreview",
                data: { RefId: refid, Params: filters },
                success: this.AppendSMSPreview.bind(this)
            });
        }
        else
            this.AppendSMSPreview();
    };
    this.AppendSMSPreview = function (result) {
        if (result) {
            result = JSON.parse(result);
            $("#sms-number").val(result.FilledSmsTemplate.SmsTo).prop("disabled", true);
            $("#sms-textarea").val(atob(result.FilledSmsTemplate.SmsTemplate.Body)).prop("disabled", true);
        }
        else {
            $("#sms-number").val("").prop("disabled", false);
            $("#sms-textarea").val("").prop("disabled", false);
        }
    };

    this.SendSMS = function ($elem) {
        if (this.MakeSMSValidation()) {
            $("#smsmodal").modal("hide");
            $("#eb_common_loader").EbLoader("show");
            $.ajax({
                type: "POST",
                url: "../DV/SendSMS",
                data: { To: $("#sms-number").val(), Body: $("#sms-textarea").val() },
                success: this.SendSMSSuccess.bind(this)
            });
        }
    };

    this.MakeSMSValidation = function () {
        if ($("#sms-number").val() && $("#sms-textarea").val())
            return true;
        else {
            EbMessage("show", { Message: "Phone number or text is Empty", Background: "#e40707" });
            return false;
        }
    };

    this.SendSMSSuccess = function () {
        $("#eb_common_loader").EbLoader("hide");
        EbPopBox("show", { Message: "Message sent", Title: "Success" });
    };

    this.CreateContexmenu4Tree = function () {
        $.contextMenu({
            selector: ".groupform", className: 'treeview',
            build: function ($trigger, e) {
                $("body").find("td").removeClass("focus");
                $("body").find("[role=row]").removeClass("selected");
                $trigger.closest("[role=row]").addClass("selected");
                if (this.GroupFormLink !== null) {
                    if ($(e.currentTarget).children().hasClass("levelzero")) {
                        return {
                            items: {
                                "NewGroup": { name: "New Group", icon: "fa-plus-square", callback: this.FormNewGroup.bind(this) },
                                "NewItem": { name: "New Item", icon: "fa-plus-square", callback: this.FormNewItem.bind(this) },
                                "EditGroup": { name: "View Group", icon: "fa-pencil-square-o", callback: this.FormEditGroup.bind(this) }
                            }
                        };
                    }
                    else {
                        return {
                            items: {
                                "NewGroup": { name: "New Group", icon: "fa-plus-square", callback: this.FormNewGroup.bind(this) },
                                "NewItem": { name: "New Item", icon: "fa-plus-square", callback: this.FormNewItem.bind(this) },
                                "EditGroup": { name: "View Group", icon: "fa-pencil-square-o", callback: this.FormEditGroup.bind(this) },
                                "Move": { name: "Move Group", icon: "fa-arrows", callback: this.MoveGroupOrItem.bind(this) }
                            }
                        };
                    }
                }
                else if (this.Source === "locationTree") {
                    return {
                        items: {
                            "NewGroup": { name: "New", icon: "fa-plus-square", callback: this.OpenLocationModal.bind(this) },
                            "EditGroup": { name: "Edit", icon: "fa-pencil-square-o", callback: this.OpenLocationModal.bind(this) },
                            "Move": { name: "Move", icon: "fa-arrows", callback: this.MoveGroupOrItem.bind(this) }
                        }
                    };
                }
                else {
                    if ($(e.currentTarget).hasClass("levelzero")) {
                        return {};
                    }
                    else {
                        return {
                            items: {
                                "Move": { name: "Move Group", icon: "fa-arrows", callback: this.MoveGroupOrItem.bind(this) }
                            }
                        };
                    }
                }
            }.bind(this)

        });

        $.contextMenu({
            selector: ".itemform",
            build: function ($trigger, e) {
                $("body").find("td").removeClass("focus");
                $("body").find("[role=row]").removeClass("selected");
                $trigger.closest("[role=row]").addClass("selected");
                if (this.ItemFormLink !== null) {
                    return {
                        items: {
                            "EditItem": { name: "View Item", icon: "fa-pencil-square-o", callback: this.FormEditItem.bind(this) },
                            "Move": { name: "Move Item", icon: "fa-arrows", callback: this.MoveGroupOrItem.bind(this) }
                        }
                    };
                }
                else if (this.Source === "locationTree") {
                    return {
                        items: {
                            "EditItem": { name: "Edit", icon: "fa-pencil-square-o", callback: this.OpenLocationModal.bind(this) },
                            "Move": { name: "Move", icon: "fa-arrows", callback: this.MoveGroupOrItem.bind(this) }
                        }
                    };
                }
                else {
                    return {
                        items: {
                            "Move": { name: "Move Item", icon: "fa-arrows", callback: this.MoveGroupOrItem.bind(this) }
                        }
                    };
                }
            }.bind(this)

        });
    };

    this.OpenLocationModal = function (key, opt, event) {
        let id_index = this.EbObject.Columns.$values.filter(obj => obj.name === "id")[0].data;

        let index = opt.$trigger.parent().closest("tr").index();
        let rowData = this.unformatedData[index];

        $('#add_location_modal').modal("show");
        if (key === "EditGroup" || key === "EditItem") {
            let longname_index = this.EbObject.Columns.$values.filter(obj => obj.name === "longname")[0].data;
            let shortname_index = this.EbObject.Columns.$values.filter(obj => obj.name === "shortname")[0].data;
            let parent_id_index = this.EbObject.Columns.$values.filter(obj => obj.name === "parent_id")[0].data;
            let image_index = this.EbObject.Columns.$values.filter(obj => obj.name === "image")[0].data;
            let types_index = this.EbObject.Columns.$values.filter(obj => obj.name === "eb_location_types_id")[0].data;
            let meta_index = this.EbObject.Columns.$values.filter(obj => obj.name === "meta_json")[0].data;

            $("#add_location_modal").find("input[type='text']").val("");
            $("#add_location").text("Update");
            $("input[name='_LocId']").val(rowData[id_index]);
            $("input[name='_longname']").val(rowData[longname_index]);
            $("input[name='_shortname']").val(rowData[shortname_index]);
            $("#_parentId").val(rowData[parent_id_index]);
            $(`input[name='_Logo']`).val(rowData[image_index]);
            $("#loc_type").val(rowData[types_index]);
            let meta = JSON.parse(rowData[meta_index]);
            for (var item in meta) {
                $(`#add_location_modal input[name=n${item}]`).val(meta[item]);
            }
        }
        else if (key === "NewGroup") {
            $("#add_location").text("Add");
            $("#_parentId").val(rowData[id_index]);
            $("input[name='_LocId']").val("");
            $(`input[name='_Logo']`).val("");
            $("#loc_type").val("");
            $("#add_location_modal").find("input[type='text']").val("");
        }
    };

    this.CreateContextmenu4ObjectSelector = function () {
        $.contextMenu('destroy', ".dataclass");
        if (this.ObjectLinks.length > 1) {
            let _items = {};
            $.each(this.ObjectLinks, function (i, obj) {
                _items[obj.ObjName] = { name: obj.ObjDisplayName, callback: this.CalendarLinkClick.bind(this) };
            }.bind(this));
            $.contextMenu({
                selector: ".dataclass",
                build: function ($trigger, e) {
                    $("body").find("td").removeClass("focus");
                    $("body").find("[role=row]").removeClass("selected");
                    $trigger.closest("[role=row]").addClass("selected");
                    return {
                        items: _items
                    };
                }.bind(this)
            });
        }
    };

    this.CalendarLinkClick = function (key, idx, event) {
        let MapObj = this.ObjectLinks.filter(obj => obj.ObjName === key)[0];
        let rowdata;
        if (event !== undefined) {
            // var idx = this.Api.row(opt.$trigger.parent().parent()).index();
            rowdata = window.atob(idx.$trigger.children("span").attr("hidden-row")).split(",");
        }
        else {
            rowdata = this.unformatedData[idx];
        }
        if (MapObj.ObjRefId.split("-")[2] === "0") {
            var filter = this.GetFilterforCalendarToForm(MapObj, rowdata);
            if (MapObj.FormMode === 1) {
                if (filter[0].Value === "") {
                    MapObj.FormMode = 2;
                    filter = [];
                }
            }
            if (parseInt(EbEnums.LinkTypeEnum.Popout) === MapObj.LinkType) {
                this.WebFormlink(MapObj.ObjRefId, btoa(unescape(encodeURIComponent(JSON.stringify(filter)))), MapObj.FormMode);
            }
            else {
                CallWebFormCollectionRender({
                    _source: 'tv',
                    _refId: MapObj.ObjRefId,
                    _params: btoa(unescape(encodeURIComponent(JSON.stringify(filter)))),
                    _mode: MapObj.FormMode,
                    _locId: ebcontext.locations.CurrentLoc
                });
                //$("#iFrameFormPopupModal").modal("show");
                //let url = `../WebForm/Index?_r=${MapObj.ObjRefId}&_p=${btoa(unescape(encodeURIComponent(JSON.stringify(filter))))}&_m=1${MapObj.FormMode}&_l=${ebcontext.locations.CurrentLoc}`;
                //$("#iFrameFormPopup").attr("src", url);
            }
        }
    };

    this.GetFilterforCalendarToForm = function (MapObj, rowdata) {
        let filters = [];
        if (MapObj.FormMode === 1) {
            var col = MapObj.FormId.$values;
            $.each(col, function (i, col) {
                filters.push(new fltr_obj(col.Type, col.name, rowdata[col.OIndex]));
            }.bind(this));
        }
        else if (MapObj.FormMode === 2) {
            var cols = MapObj.FormParameters.$values;
            $.each(cols, function (i, col) {
                if (rowdata[col.data] !== "")
                    filters.push(new fltr_obj(col.Type, col.FormControl.Name, rowdata[col.OIndex]));
            }.bind(this));
        }
        return filters;
    };

    this.CreateNewFormLinks = function () {
        $("#obj_icons").append(`<div class="dropdown" style="display:inline-block;" id="NewFormdd${this.tableId}">
                    <button class="btn" type="button" id="NewFormButton${this.tableId}" data-toggle="dropdown" title='Newform'>
                        <i class="fa fa-plus" aria-hidden="true"></i>
                    </button>
                    <div class="dropdown-menu newform-menu">
                        <ul class="drp_ul"></ul>
                    </div>
                    </div>`);
        let _l = (ebcontext.languages != undefined) ? ebcontext.languages.getCurrentLanguageCode() : 'en';
        $.each(this.EbObject.FormLinks.$values, function (i, obj) {
            let url = `../Webform/Index?_r=${obj.Refid}&_m=2&_l=${ebcontext.locations.CurrentLoc}&_lg=${_l}`;
            $(`#NewFormdd${this.tableId} .drp_ul`).append(`<li class="drp_item"><a class="dropdown-item" href="${url}" target="_blank">${obj.DisplayName}</a></li>`);
        }.bind(this));
    };

    this.CreatePrintDocsLinks = function () {
        if (this.EbObject.PrintDocs && this.EbObject.PrintDocs.$values.length > 0) {
            $("#obj_icons").append(`<div class="dropdown" style="display:inline-block;" id="PrintDocsdd${this.tableId}">
                    <button class="btn" type="button" id="PrintDocsButton${this.tableId}" data-toggle="dropdown" title='Print'>
                        <i class="fa fa-print" aria-hidden="true"></i>
                    </button>
                    <div class="dropdown-menu newform-menu">
                        <ul class="drp_ul"></ul>
                    </div>
                    </div>`);

            $.each(this.EbObject.PrintDocs.$values, function (i, obj) {
                let tle = obj.Title || obj.ObjDisplayName;
                $(`#PrintDocsdd${this.tableId} .drp_ul`).append(`<li class="drp_item" data-token="${obj.ObjRefId}" data-params="${obj.UseParams}" style="padding: 5px 15px; font-size: 14px;">${tle}</li>`);
            }.bind(this));

            $(`#PrintDocsdd${this.tableId}`).off(".drp_ul li").on("click", ".drp_ul li", this.printDocument.bind(this));
        }
    };

    this.printDocument = function (e) {
        if (!ebcontext.webform) {
            ebcontext.webform = { showLoader: this.showEbLoader, hideLoader: this.hideEbLoader };
        }

        let rptRefid = $(e.currentTarget).attr('data-token');
        let useParams = $(e.currentTarget).attr('data-params');

        if (useParams == 'true') {
            let params = btoa(JSON.stringify(this.filterValues));
            let url = "/ReportRender/Renderlink?refid=" + rptRefid + "&_params=" + params;
            ebcontext.webform.showLoader();
            $("#iFramePdf4dv").attr("src", url);
            return;
        }

        let rowIds = [];
        let chkdInps = $(`input[name=${this.tableId}_id]:checked`);

        if (chkdInps && chkdInps.length > 0) {
            for (let i = 0; i < chkdInps.length; i++) {
                rowIds.push($(chkdInps[i]).val());
            }
            if (rowIds.length == 1) {
                let url = "/WebForm/GetPdfReport?refId=" + rptRefid + "&rowId=" + rowIds[0];
                ebcontext.webform.showLoader();
                $("#iFramePdf4dv").attr("src", url);
                return;
            }

            $(`#PrintDocsButton${this.tableId}`).prop("disabled", true);
            EbMessage("show", { Message: 'Generating PDF... Please wait in this tab or visit Downloads page after a while..', AutoHide: true, Background: '#00aa55', Delay: 15000 });
            ebcontext.webform.showLoader();

            let SubscriptionId = window.ebcontext.subscription_id;
            this.ss = new EbServerEvents({ ServerEventUrl: window.ebcontext.se_url, Channels: ["PdfDownload"] });
            this.ss.onPdfDownloadSuccess = function (url) {
                $("#iFramePdf4dv").attr("src", url);
                $(`#PrintDocsButton${this.tableId}`).prop("disabled", false);
                event.stopPropagation();
            }.bind(this);


            $.ajax({
                type: "GET",
                url: "/WebForm/GetPdfReportMulti?refId=" + rptRefid + "&rowId=" + rowIds.join(',') + "&_sub=" + SubscriptionId
            });

        }
        else {
            alert('Nothing selected');
        }
    };

    this.FormNewGroup = function (key, opt, event) {
        let index = opt.$trigger.parent().closest("tr").index();
        this.rowData = this.unformatedData[index];
        let filterparams = btoa(JSON.stringify(this.formatToMutipleParameters(this.treeColumn.GroupFormParameters.$values)));

        if (parseInt(EbEnums.LinkTypeEnum.Popup) === this.treeColumn.LinkType) {
            CallWebFormCollectionRender({ _source: 'tv', _refId: this.GroupFormLink, _params: filterparams, _mode: 2, _locId: ebcontext.locations.CurrentLoc });
            //$("#iFrameFormPopupModal").modal("show");
            //let url = `../WebForm/Index?_r=${this.GroupFormLink}&_p=${filterparams}&_m=12&_l=${ebcontext.locations.CurrentLoc}`;
            //$("#iFrameFormPopup").attr("src", url);
        }
        else {
            this.WebFormlink(this.GroupFormLink, filterparams, "2");
        }
    };

    this.FormNewItem = function (key, opt, event) {
        let index = opt.$trigger.parent().closest("tr").index();
        this.rowData = this.unformatedData[index];
        let filterparams = btoa(JSON.stringify(this.formatToMutipleParameters(this.treeColumn.ItemFormParameters.$values)));
        if (parseInt(EbEnums.LinkTypeEnum.Popup) === this.treeColumn.LinkType) {
            CallWebFormCollectionRender({ _source: 'tv', _refId: this.ItemFormLink, _params: filterparams, _mode: 2, _locId: ebcontext.locations.CurrentLoc });
            //$("#iFrameFormPopupModal").modal("show");
            //let url = `../WebForm/Index?_r=${this.ItemFormLink}&_p=${filterparams}&_m=12&_l=${ebcontext.locations.CurrentLoc}`;
            //$("#iFrameFormPopup").attr("src", url);
        }
        else {
            this.WebFormlink(this.ItemFormLink, filterparams, "2");
        }
    };

    this.FormEditGroup = function (key, opt, event) {
        let index = opt.$trigger.parent().closest("tr").index();
        this.rowData = this.unformatedData[index];
        let filterparams = btoa(JSON.stringify(this.formatToParameters(this.treeColumn.GroupFormId.$values)));
        if (parseInt(EbEnums.LinkTypeEnum.Popup) === this.treeColumn.LinkType) {
            CallWebFormCollectionRender({ _source: 'tv', _refId: this.GroupFormLink, _params: filterparams, _mode: 1, _locId: ebcontext.locations.CurrentLoc });
            //$("#iFrameFormPopupModal").modal("show");
            //let url = `../WebForm/Index?_r=${this.GroupFormLink}&_p=${filterparams}&_m=11&_l=${ebcontext.locations.CurrentLoc}`;
            //$("#iFrameFormPopup").attr("src", url);
        }
        else {
            this.WebFormlink(this.GroupFormLink, filterparams, "1");
        }
    };

    this.FormEditItem = function (key, opt, event) {
        let index = opt.$trigger.parent().closest("tr").index();
        this.rowData = this.unformatedData[index];
        let filterparams = btoa(JSON.stringify(this.formatToParameters(this.treeColumn.ItemFormId.$values)));
        if (parseInt(EbEnums.LinkTypeEnum.Popup) === this.treeColumn.LinkType) {
            CallWebFormCollectionRender({ _source: 'tv', _refId: this.ItemFormLink, _params: filterparams, _mode: 1, _locId: ebcontext.locations.CurrentLoc });
            //$("#iFrameFormPopupModal").modal("show");
            //let url = `../WebForm/Index?_r=${this.ItemFormLink}&_p=${filterparams}&_m=11&_l=${ebcontext.locations.CurrentLoc}`;
            //$("#iFrameFormPopup").attr("src", url);
        }
        else {
            this.WebFormlink(this.ItemFormLink, filterparams, "1");
        }
    };

    this.formatToParameters = function (cols) {
        var filters = [];
        $.each(cols, function (i, col) {
            if (this.rowData[col.data] !== "")
                filters.push(new fltr_obj(col.Type, col.name, this.rowData[col.data]));
        }.bind(this));
        return filters;
    };

    this.formatToMutipleParameters = function (cols) {
        var filters = [];
        $.each(cols, function (i, col) {
            if (this.rowData[col.data] !== "")
                filters.push(new fltr_obj(col.Type, col.FormControl.Name, this.rowData[col.data]));
        }.bind(this));
        return filters;
    };

    this.collapseTreeGroup = function (e) {
        let el = (e.target).closest("td");
        let curRow = $(el).parents().closest("[role=row]");
        var level = parseInt($(curRow).attr("data-lvl"));
        var isShow = ($(el).children("i").hasClass("fa-minus-square-o")) ? false : true;
        let count = this.RowCount;
        let rows = {};
        for (var i = level; i >= 0; i--) {
            let temp = curRow.nextUntil("[data-lvl=" + i + "]");
            if (temp.length < count) {
                count = temp.length;
                rows = temp;
            }
        }
        if (isShow) {
            rows.show();
            $(el).children("i").removeClass("fa-plus-square-o").addClass("fa-minus-square-o");
            rows.children().find("i.fa-plus-square-o").removeClass("fa-plus-square-o").addClass("fa-minus-square-o");
        }
        else {
            rows.hide();
            $(el).children("i").removeClass("fa-minus-square-o").addClass("fa-plus-square-o");
        }
    }.bind(this);

    this.AppendTreeModal = function () {
        $("#treemodal").remove();
        let modal1 = `<div class="modal fade" id="treemodal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
    <div class="modal-dialog">
        <div class="treemodal-container">
            <h4 class="treemodal-header">Move <span id="itemorgroup"></span></h4>
            <div class="tree_item_cont">
                <label>From </label>
                <span id="movefrom"></span>
            </div>
            <div class="tree_item_cont">
                <label>To</label>
                <button class="btn treemodalul">Select Group
                <span class="caret"></span></button>
            </div>
            <div class="pull-right">
                <button class="btn" id="treemodal_submit">Move</button>
                <button class="btn" id="treemodal_cancel">Cancel</button>
            </div>
        </div>
    </div>
</div>`;

        $("body").prepend(modal1);
    };

    this.MoveGroupOrItem = function (key, opt, event) {
        this.AppendTreeModal();
        let rowindex = this.Api.row(opt.$trigger.parent().closest("[role=row]")).index();
        this.movefromtext = this.unformatedData[rowindex][this.treeColumn.data];
        if (opt.selector === ".itemform")
            $("#itemorgroup").text("Item : " + this.movefromtext);
        else
            $("#itemorgroup").text("Group : " + this.movefromtext);
        this.IdColumnIndex = this.EbObject.Columns.$values.filter(function (obj) { return obj.name === "id"; })[0].data;
        this.movefromId = this.unformatedData[rowindex][this.IdColumnIndex];
        this.Items = {};
        this.createTreeItems___(this.treeData, this.Items);
        this.Items = this.Items.items;
        this.InitTreemodalContextmenu();
        $("#treemodal").modal("show");
        $("#treemodal_submit").off("click").on("click", this.MoveOKClick.bind(this));
        $("#treemodal_cancel").off("click").on("click", this.MoveCancelClick.bind(this));
    };

    this.createTreeItems___ = function (initems, outitems) {
        $.each(initems, function (_in, _out, i, item) {
            let Exist = item.item.filter(function (obj) { return obj === this.movefromtext; }.bind(this));
            if (Exist.length === 0) {
                if (item.isGroup) {
                    this.ulid = item.item[this.treeColumn.data];
                    if (!_out.hasOwnProperty("items"))
                        _out.items = {};
                    _out.items[this.ulid] = { "name": this.ulid, "data-pid": item.item[this.IdColumnIndex] };
                    this.createTreeItems___(item.children, _out.items[this.ulid]);
                }
            }
            else {
                $("#movefrom").text(outitems.name);
            }
        }.bind(this, initems, outitems));
    };

    this.InitTreemodalContextmenu = function () {
        $.contextMenu('destroy', '.treemodalul');
        $.contextMenu({
            selector: '.treemodalul',
            callback: this.MoveDDClick.bind(this),
            className: 'contextmenu-custom__highlight',
            items: this.Items,
            trigger: "left",
            autoHide: true,
            events: {
                show: function (options) {
                    this.clickCounter = 0;
                    return true;
                }.bind(this)
            }
        });
        this.clickCounter = 0;
        $(".contextmenu-custom__highlight .context-menu-submenu").off("click").on("click", this.MoveDDClick.bind(this));
    };

    this.getClickedItem = function (key) {
        $.each(this.Items, function (i, objOuter) {
            if (objOuter.name === key) {
                this.moveToPid = objOuter["data-pid"];
                return false;
            }
            else {
                if (objOuter.hasOwnProperty("items"))
                    this.getRecursivelyGetClickedItem(key, objOuter);
            }
        }.bind(this));
    };

    this.getRecursivelyGetClickedItem = function (key, objOuter) {
        $.each(objOuter.items, function (i, objInner) {
            if (objInner.name === key) {
                this.moveToPid = objInner["data-pid"];
                return false;
            }
            else {
                if (objInner.hasOwnProperty("items"))
                    this.getRecursivelyGetClickedItem(key, objInner);
            }
        }.bind(this));
    };

    this.MoveDDClick = function (key, options) {
        if (this.clickCounter === 0) {
            if (options === undefined)
                key = $(key.currentTarget).children("span").text();
            let path = $(".contextmenu-custom__highlight .context-menu-visible").children().closest("span").map(function () {
                return $(this).text();
            }).get().join(' > ');
            $("#treemodal .treemodalul").text(path).append('<span class="caret"></span></button>');
            this.getClickedItem(key);
            $(".contextmenu-custom__highlight").hide();
            $(".treemodalul").removeClass("context-menu-active");
            $("#context-menu-layer").remove();
            this.clickCounter++;
        }
    };

    this.MoveOKClick = function () {
        if (this.tableName !== null && this.moveToPid !== null && this.movefromId !== null) {
            let sql = `UPDATE ${this.tableName} SET ${this.treeColumn.ParentColumn.$values[0].name}= ${this.moveToPid}
                        WHERE id=${this.movefromId} `;
            $.ajax({
                type: "POST",
                url: "../DV/ExecuteTreeUpdate",
                data: { sql: sql },
                success: this.UpdateSuccess.bind(this)
            });
        }
        else {
            alert("Select One Group.....");
        }
    };

    this.MoveCancelClick = function () {
        this.clickCounter = 0;
        $("#treemodal").modal("hide");
    };

    this.UpdateSuccess = function () {
        this.$submit.trigger("click");
        $("#treemodal").modal("hide");
        this.clickCounter = 0;
    };

    this.setFilterboxValue = function (i, obj) {
        $(obj).children('div').children('.eb_finput').on("keydown", function (event) {
            if (event.keyCode === $.ui.keyCode.TAB &&
                $(this).autocomplete("instance").menu.active) {
                event.preventDefault();
            }
        });
        var name = $(obj).children('span').text();
        var tempobj = $.grep(this.EbObject.Columns.$values, function (col) { return col.name === name; });
        if (tempobj.length > 0) {
            var idx = tempobj[0].data;
            if (tempobj[0].$type && tempobj[0].$type.indexOf("DVPhoneColumn") !== -1)
                idx = tempobj[0].MappingColumn.data;
        }
        var data = arrayColumn(this.unformatedData, idx);
        data = data.filter(val => val !== null && val !== undefined);
        data = data.filter(function (elem, pos) {
            return data.indexOf(elem) === pos;
        });
        if ($(obj).children('div').children('.eb_finput').attr("data-coltyp") === "string") {
            this.setFilterboxValueInner(obj, data);
        }
        else {
            if ($(obj).children('div').length === 0) {
                var $lctrl = $("#" + this.tableId + "_wrapper .DTFC_LeftHeadWrapper table tr[class=addedbyeb] th:eq(" + i + ")").find(".eb_finput");
                var $rctrl = $("#" + this.tableId + "_wrapper .DTFC_RightHeadWrapper table tr[class=addedbyeb] th:eq(" + i + ")").find(".eb_finput");
                if ($lctrl.length > 0) {
                    this.setfiletrvalueFixedcolumns($lctrl, data);
                }
                if ($rctrl.length > 0) {
                    this.setfiletrvalueFixedcolumns($rctrl, data);
                }
            }

        }
    };

    this.setFilterboxValueInner = function (obj, data) {
        $(obj).children('div').children('.eb_finput').autocomplete({
            source: function (request, response) {
                response($.ui.autocomplete.filter(
                    $.unique(data), extractLast(request.term)));
            }.bind(this),
            focus: function () {
                return false;
            },
            select: function (event, ui) {
                let inp = event.target;
                var terms = splitval($(inp).val());
                terms.pop();
                terms.push(ui.item.value);
                terms.push("");
                $(inp).val(terms.join(" | "));
                if (!this.EbObject.DisableAutoSearch) {
                    var e = $.Event("keyup", { which: 13, keyCode: 13, target: inp });
                    $(inp).trigger(e);
                }
                return false;
            }.bind(this),
            search: function (event, ui) {
            }
        });
    }

    this.setfiletrvalueFixedcolumns = function ($ctrl, data) {
        if ($ctrl.attr("data-coltyp") === "string") {
            $ctrl.autocomplete({
                source: function (request, response) {
                    response($.ui.autocomplete.filter(
                        $.unique(data), extractLast(request.term)));
                }.bind(this),
                focus: function () {
                    return false;
                },
                select: function (event, ui) {
                    var terms = splitval(this.value);
                    terms.pop();
                    terms.push(ui.item.value);
                    terms.push("");
                    this.value = terms.join(" | ");
                    return false;
                },
                search: function (event, ui) {
                }
            });
        }
    };

    this.orderingEvent = function (e) {
        //var col = $(e.target).children('span').text();
        var col = $(e.target).text();
        var tempobj = $.grep(this.Api.settings().init().aoColumns, function (obj) { return obj.sTitle === col; });
        var cls = $(e.target).attr('class');
        if (col !== '' && col !== "#") {
            if (tempobj[0].$type.indexOf("DVPhoneColumn") !== -1)
                this.order_info.col = tempobj[0].MappingColumn.name;
            else
                this.order_info.col = tempobj[0].name;
            this.order_info.dir = (cls.indexOf('sorting_asc') > -1) ? 1 : 0;
            //this.orderColl = $.grep(this.orderColl, function (obj) { return obj.Column !== this.order_info.col }.bind(this));
            //if (this.EbObject.rowGrouping.$values.length === 0)
            //    this.orderColl = [];
            this.orderColl = [];
            this.orderColl.push(new order_obj(this.order_info.col, this.order_info.dir));
        }
    };

    this.GetFiltersFromSettingsTbl = function (zidx) {
        this.zindex = zidx;
        if (this.zindex === 50)
            this.eb_filter_controls_4fc = [];
        else if (this.zindex === 1)
            this.eb_filter_controls_4sb = [];

        //$.each(this.EbObject.Columns.$values, this.GetFiltersFromSettingsTbl_inner.bind(this));
        $.each(this.Api.settings().init().aoColumns, this.GetFiltersFromSettingsTbl_inner.bind(this));
    };

    this.GetFiltersFromSettingsTbl_inner = function (i, col) {
        var _ls = "";

        if (col.bVisible === true) {
            var span = "<span hidden>" + col.name + "</span>";
            //var span = "";

            var htext_class = this.tableId + "_htext";

            var data_colum = "data-colum='" + col.name + "'";
            var data_table = "data-table='" + this.tableId + "'";

            var header_select = this.tableId + "_" + col.name + "_hdr_sel";
            var header_text1 = this.tableId + "_" + col.name + "_hdr_txt1";
            var header_text2 = this.tableId + "_" + col.name + "_hdr_txt2";

            _ls += "<th>";
            if (col.name === "serial") {
                _ls += (span + "<a class='btn btn-sm center-block'  id='clearfilterbtn_" + this.tableId + "' data-table='@tableId' data-toggle='tooltip' title='Clear Filter' style='height:100%'><i class='fa fa-filter' aria-hidden='true' style='color:black'></i></a>");
            }
            else if (col.$type && col.$type.indexOf("DVPhoneColumn") !== -1) {
                data_colum = "data-colum='" + col.MappingColumn.name + "'";
                _ls += (span + this.getFilterForString(header_text1, header_select, data_table, htext_class, data_colum, header_text2, this.zindex, col.DefaultOperator));
            }
            else if (col.IsCustomColumn) {
                _ls += span;
            }
            else {
                if (col.RenderType === parseInt(gettypefromString("Int32")) || col.RenderType === parseInt(gettypefromString("Decimal")) || col.RenderType === parseInt(gettypefromString("Int64")) || col.RenderType == parseInt(gettypefromString("Double")) || col.RenderType == parseInt(gettypefromString("Numeric"))) {
                    if (parseInt(EbEnums.ControlType.Text) === col.filterControl)
                        _ls += (span + this.getFilterForString(header_text1, header_select, data_table, htext_class, data_colum, header_text2, this.zindex, col.DefaultOperator));
                    else if (parseInt(EbEnums.ControlType.Date) === col.filterControl)
                        _ls += (span + this.getFilterForDateTime(header_text1, header_select, data_table, htext_class, data_colum, header_text2, this.zindex, col.DefaultOperator));
                    else
                        _ls += (span + this.getFilterForNumeric(header_text1, header_select, data_table, htext_class, data_colum, header_text2, this.zindex, col.DefaultOperator));
                }
                else if (col.RenderType === parseInt(gettypefromString("String"))) {
                    //if (this.dtsettings.filterParams === null || this.dtsettings.filterParams === undefined)
                    if (parseInt(EbEnums.ControlType.Numeric) === col.filterControl)
                        _ls += (span + this.getFilterForNumeric(header_text1, header_select, data_table, htext_class, data_colum, header_text2, this.zindex, col.DefaultOperator));
                    else if (parseInt(EbEnums.ControlType.Date) === col.filterControl)
                        _ls += (span + this.getFilterForDateTime(header_text1, header_select, data_table, htext_class, data_colum, header_text2, this.zindex, col.DefaultOperator));
                    else
                        _ls += (span + this.getFilterForString(header_text1, header_select, data_table, htext_class, data_colum, header_text2, this.zindex, col.DefaultOperator));
                    //else
                    //   _ls += (span + this.getFilterForString(header_text1, header_select, data_table, htext_class, data_colum, header_text2, this.zindex, this.dtsettings.filterParams));
                }
                else if (col.RenderType === parseInt(gettypefromString("DateTime")) || col.RenderType === parseInt(gettypefromString("Date"))) {
                    if (parseInt(EbEnums.ControlType.Numeric) === col.filterControl)
                        _ls += (span + this.getFilterForNumeric(header_text1, header_select, data_table, htext_class, data_colum, header_text2, this.zindex, col.DefaultOperator));
                    else if (parseInt(EbEnums.ControlType.Text) === col.filterControl)
                        _ls += (span + this.getFilterForString(header_text1, header_select, data_table, htext_class, data_colum, header_text2, this.zindex, col.DefaultOperator));
                    else
                        _ls += (span + this.getFilterForDateTime(header_text1, header_select, data_table, htext_class, data_colum, header_text2, this.zindex, col.DefaultOperator));
                }
                else if (col.RenderType === parseInt(gettypefromString("Boolean")) && col.name !== "checkbox")
                    _ls += (span + this.getFilterForBoolean(col.name, this.tableId, this.zindex));
                else
                    _ls += (span);
            }

            _ls += ("</th>");

            ((this.zindex === 50) ? this.eb_filter_controls_4fc : this.eb_filter_controls_4sb).push(_ls);
        }
    };

    this.getFilterForNumeric = function (header_text1, header_select, data_table, htext_class, data_colum, header_text2, zidx, DefOp) {
        var coltype = "data-coltyp='number'";
        var drptext = "";
        var op = String.empty;
        switch (DefOp.toString()) {
            case EbEnums.NumericOperators.Equals: op = '='; break;
            case EbEnums.NumericOperators.LessThan: op = '<'; break;
            case EbEnums.NumericOperators.GreaterThan: op = '>'; break;
            case EbEnums.NumericOperators.LessThanOrEqual: op = '<='; break;
            case EbEnums.NumericOperators.GreaterThanOrEqual: op = '>='; break;
            case EbEnums.NumericOperators.Between: op = 'B'; break;
            default: op = '=';
        }
        drptext = "<div class='input-group input-group-sm'>" +
            "<div class='input-group-btn'>" +
            " <button type='button' class='btn btn-default dropdown-toggle' data-toggle='dropdown' id='" + header_select + "'> " + op + " </button>" +
            " <ul class='dropdown-menu'>" +//  style='z-index:" + zidx.toString() + "'
            " <li class='filterli'><a href ='#' class='eb_fsel" + this.tableId + "' " + data_table + data_colum + "> = </a><span class='filtertext eb_fsel" + this.tableId + "' style='margin-left: 6px;'> Equal to</span></li>" +
            " <li class='filterli'><a href ='#' class='eb_fsel" + this.tableId + "' " + data_table + data_colum + "> < </a><span class='filtertext eb_fsel" + this.tableId + "' style='margin-left: 6px;'> Less than</span></li>" +
            " <li class='filterli'><a href='#' class='eb_fsel" + this.tableId + "' " + data_table + data_colum + "> > </a><span class='filtertext eb_fsel" + this.tableId + "' style='margin-left: 6px;'> Greater than</span></li>" +
            " <li class='filterli'><a href='#' class='eb_fsel" + this.tableId + "' " + data_table + data_colum + "> <= </a><span class='filtertext eb_fsel" + this.tableId + "'> Less than or Equal</span></li>" +
            " <li class='filterli'><a href='#' class='eb_fsel" + this.tableId + "' " + data_table + data_colum + "> >= </a><span class='filtertext eb_fsel" + this.tableId + "'> Greater than or Equal</span></li>" +
            "<li class='filterli'><a href='#' class='eb_fsel" + this.tableId + "' " + data_table + data_colum + "> B </a><span class='filtertext eb_fsel" + this.tableId + "' style='margin-left: 6px;'> Between</span></li>" +
            " </ul>" +
            " </div>" +
            " <input type='number' data-toggle='tooltip' class='form-control eb_finput " + htext_class + "' id='" + header_text1 + "' " + data_table + data_colum + coltype + ">" +
            //" <span class='input-group-btn'></span>" +
            //" <input type='number' class='form-control eb_finput " + htext_class + "' id='" + header_text2 + "' style='visibility: hidden' " + data_table + data_colum + coltype + ">" +
            " </div> ";
        return drptext;
    };

    this.getFilterForDateTime = function (header_text1, header_select, data_table, htext_class, data_colum, header_text2, zidx, DefOp) {
        var op = String.empty;
        switch (DefOp.toString()) {
            case EbEnums.NumericOperators.Equals: op = '='; break;
            case EbEnums.NumericOperators.LessThan: op = '<'; break;
            case EbEnums.NumericOperators.GreaterThan: op = '>'; break;
            case EbEnums.NumericOperators.LessThanOrEqual: op = '<='; break;
            case EbEnums.NumericOperators.GreaterThanOrEqual: op = '>='; break;
            case EbEnums.NumericOperators.Between: op = 'B'; break;
            default: op = '=';
        }
        var coltype = "data-coltyp='date'";
        var filter = "<div class='input-group input-group-sm'>" +
            "<div class='input-group-btn'>" +
            " <button type='button' class='btn btn-default dropdown-toggle' data-toggle='dropdown' id='" + header_select + "'> " + op + " </button>" +
            "<ul class='dropdown-menu'>" +//  style='z-index:" + zidx.toString() + "'
            " <li class='filterli'><a href ='#' class='eb_fsel" + this.tableId + "' " + data_table + data_colum + "> = </a><span class='filtertext eb_fsel" + this.tableId + "' style='margin-left: 6px;'> Equal to</span></li>" +
            " <li class='filterli'><a href ='#' class='eb_fsel" + this.tableId + "' " + data_table + data_colum + "> < </a><span class='filtertext eb_fsel" + this.tableId + "' style='margin-left: 6px;'> Less than</span></li>" +
            " <li class='filterli'><a href='#' class='eb_fsel" + this.tableId + "' " + data_table + data_colum + "> > </a><span class='filtertext eb_fsel" + this.tableId + "' style='margin-left: 6px;'> Greater than</span></li>" +
            " <li class='filterli'><a href='#' class='eb_fsel" + this.tableId + "' " + data_table + data_colum + "> <= </a><span class='filtertext eb_fsel" + this.tableId + "'> Less than or Equal</span></li>" +
            " <li class='filterli'><a href='#' class='eb_fsel" + this.tableId + "' " + data_table + data_colum + "> >= </a><span class='filtertext eb_fsel" + this.tableId + "'> Greater than or Equal</span></li>" +
            " <li class='filterli'><a href='#' class='eb_fsel" + this.tableId + "' " + data_table + data_colum + "> B </a><span class='filtertext eb_fsel" + this.tableId + "' style='margin-left: 6px;'> Between</span></li>" +
            " </ul>" +
            " </div>" +
            " <input type='text' placeholder='&#xf073;' data-toggle='tooltip' class='no-spin form-control eb_finput " + htext_class + "' id='" + header_text1 + "' " + data_table + data_colum + coltype + ">" +
            //" <span class='input-group-btn'></span>" +
            //" <input type='date' class='form-control eb_finput " + htext_class + "' id='" + header_text2 + "' style='visibility: hidden' " + data_table + data_colum + coltype + ">" +
            " </div> ";

        return filter;

    };

    this.getFilterForString = function (header_text1, header_select, data_table, htext_class, data_colum, header_text2, zidx, DefOp) {
        var op = String.empty;
        switch (DefOp.toString()) {
            case EbEnums.StringOperators.Equals: op = '='; break;
            case EbEnums.StringOperators.Startwith: op = 'x*'; break;
            case EbEnums.StringOperators.EndsWith: op = '*x'; break;
            case EbEnums.StringOperators.Between: op = '*x*'; break;
            case EbEnums.StringOperators.Contains: op = '*x*'; break;
            default: op = '=';
        }
        var coltype = " data-coltyp='string'";
        var drptext = "";
        drptext = "<div class='input-group input-group-sm'>" +
            "<div class='input-group-btn'>" +// style='z-index:" + zidx.toString() + "'
            " <button type='button' class='btn btn-default dropdown-toggle' data-toggle='dropdown' id='" + header_select + "'>" + op + "</button>" +
            " <ul class='dropdown-menu'>" +

            "   <li class='filterli'><a href ='#' class='eb_fsel" + this.tableId + "' " + data_table + data_colum + "> x* </a><span class='filtertext eb_fsel" + this.tableId + "' style='margin-left: 5px;'> Starts with</span></li>" +
            "  <li class='filterli'><a href ='#' class='eb_fsel" + this.tableId + "' " + data_table + data_colum + "> *x </a><span class='filtertext eb_fsel" + this.tableId + "' style='margin-left: 5px;'> Ends with</span></li>" +
            "  <li class='filterli'><a href='#' class='eb_fsel" + this.tableId + "' " + data_table + data_colum + "> *x* </a><span class='filtertext eb_fsel" + this.tableId + "' > Contains</span></li>" +
            " <li class='filterli'><a href='#' class='eb_fsel" + this.tableId + "' " + data_table + data_colum + "> = </a><span class='filtertext eb_fsel" + this.tableId + "' style='margin-left: 9px;'> Exact match</span></li>" +
            " </ul>" +
            " </div>" +
            " <input type='text' data-toggle='tooltip'  class='form-control eb_finput " + htext_class + "' id='" + header_text1 + "' " + data_table + data_colum + coltype + ">" +
            " </div> ";
        return drptext;
    };

    this.getFilterForBoolean = function (colum, tableId, zidx) {
        var filter = "";
        var id = tableId + "_" + colum + "_hdr_txt1";
        var cls = tableId + "_hchk";
        filter = "<input type='checkbox' id='" + id + "' data-toggle='tooltip' title='' data-colum='" + colum + "' data-coltyp='boolean' data-table='" + tableId + "' class='" + cls + " " + tableId + "_htext eb_fbool" + this.tableId + "' style='margin-left: 50%;'></center>";
        return filter;
    };

    this.clearFilter = function () {
        var flag = false;
        var tableid = this.tableId;
        $('.' + this.tableId + '_htext').each(function (i) {

            if ($(this).hasClass(tableid + '_hchk')) {
                if (!($(this).is(':indeterminate'))) {
                    flag = true;
                    $(this).prop("indeterminate", true);
                }
            }
            else {
                if ($(this).val() !== '') {
                    flag = true;
                    $(this).val('');
                }
            }
        });
        if (flag || this.filterFlag) {
            this.columnSearch = [];
            this.Api.ajax.reload();
            this.filterFlag = false;
            $('#clearfilterbtn_' + this.tableId).children("i").removeClass("fa-times").addClass("fa-filter");
            $(".tooltip").remove();
        }
    };

    this.setLiValue = function (e) {
        let elemnt = ($(e.target).is("a")) ? $(e.target) : $(e.target).siblings("a");
        var selText = $(elemnt).text();
        var table = $(elemnt).attr('data-table');
        var flag = false;
        var colum = $(elemnt).attr('data-colum');
        var ctype = $(elemnt).parents('.input-group').find("input").attr('data-coltyp');
        var dateclas = (ctype === "date") ? "no-spin" : "";
        $(elemnt).parents('.input-group-btn').find('.dropdown-toggle').html(selText);
        if (selText.trim() === 'B') {
            if ($(elemnt).parents('.input-group').find("input").length == 1) {
                if (ctype === "date") {
                    $(elemnt).parents('.input-group').append("<input type='text' placeholder='&#xf073;' class='" + dateclas + " between-inp form-control eb_finput " + this.tableId + "_htext' id='" + this.tableId + "_" + colum + "_hdr_txt2' data-coltyp='" + ctype + "'>");
                    $("#" + this.tableId + "_" + colum + "_hdr_txt2").datepicker({
                        dateFormat: this.datePattern.replace(new RegExp("M", 'g'), "m").replace(new RegExp("yy", 'g'), "y"),
                        beforeShow: function (elem, obj) {
                            $(".ui-datepicker").addClass("datecolumn-picker");
                        },
                        onSelect: function (d, i) {
                            if (d !== i.lastVal)
                                this.call_filter({ keyCode: 10 });
                        }.bind(this)
                    });
                    $("#" + this.tableId + "_" + colum + "_hdr_txt2").on("click", function () {
                        $(this).datepicker("show");
                    });
                }
                else {
                    $(e.target).parents('.input-group').append("<input type='number' class='" + dateclas + " between-inp form-control eb_finput " + this.tableId + "_htext' id='" + this.tableId + "_" + colum + "_hdr_txt2' data-coltyp='" + ctype + "'>");
                }
                $("#" + this.tableId + "_" + colum + "_hdr_txt1").addClass("between-inp");
                $("#" + this.tableId + "_" + colum + "_hdr_txt2").on("keyup", this.call_filter);

            }
        }
        else if (selText.trim() !== 'B') {
            if ($(elemnt).parents('.input-group').find("input").length == 2) {
                $(elemnt).parents('.input-group').find("input").eq(1).remove();
                $("#" + this.tableId + "_" + colum + "_hdr_txt1").removeClass("between-inp");
            }
        }

        this.Api.columns.adjust();
        e.preventDefault();
    };

    this.call_filter = function (e) {
        if (e.keyCode === 13) {
            var flag = true;
            if ($(e.target).siblings(".eb_finput").length === 1) {
                if ($(e.target).val() === "") {
                    $(e.target).css("border-color", "red");
                    flag = false;
                }
                else
                    $(e.target).css("border-color", "#ccc");
                if ($(e.target).siblings(".eb_finput").val() === "") {
                    $(e.target).siblings(".eb_finput").css("border-color", "red");
                    flag = false;
                }
                else
                    $(e.target).siblings(".eb_finput").css("border-color", "#ccc");
            }
            else {
                if ($(e.target).val().trim() == "") {
                    flag = false;
                    $(e.target).css("border-color", "red");
                }
                else
                    $(e.target).css("border-color", "#ccc");
            }
            if ($(e.target).data('ui-autocomplete') != undefined)
                $(e.target).autocomplete('close');

            if (flag) {
                this.reloadDataTable();
            }
        }
        else if (!this.EbObject.DisableAutoSearch) {
            $("[data-coltyp=date]").datepicker("hide");
            if (typeof (e.key) === "undefined") {
                this.reloadDataTable();
            }
            else {
                let nam = $(e.target).attr('data-colum');
                let obj = this.columnSearch.find(e => e.Column === nam);
                if ((obj && obj.Value != $(e.target).val().trim()) || !obj) {
                    clearTimeout(this.realoadDtTimer);
                    this.realoadDtTimer = setTimeout(function (e) {
                        let ac = $(e.target).data('ui-autocomplete');
                        if ((ac && $(ac.menu.activeMenu[0]).is(':visible')) || !ac)
                            return;
                        this.reloadDataTable(e);
                    }.bind(this, e), 1500);
                }
            }
        }

    }.bind(this);

    this.reloadDataTable = function (e) {
        let filter = this.repopulate_filter_arr();
        if (JSON.stringify(filter) != JSON.stringify(this.columnSearch)) {
            this.columnSearch = filter;
            $('#' + this.tableId).DataTable().ajax.reload();
            if ($('#clearfilterbtn_' + this.tableId).children("i").hasClass("fa-filter"))
                $('#clearfilterbtn_' + this.tableId).children("i").removeClass("fa-filter").addClass("fa-times");
        }
    };

    this.dblclickDateColumn = function () {
        this.type = "text";
        this.select();
    };

    this.pasteDateColumn = function (e) {
        var data = e.originalEvent.clipboardData.getData('Text');
        var dt = data.split("/");
        this.value = [dt[2].trim(), dt[1].trim(), dt[0].trim()].join("-");
        e.preventDefault();
    };

    this.focusoutDateColumn = function () {
        var data = $(event.target)[0].value;
        var dt = data.split("/");
        if (dt.length === 1)
            dt = data.split("-");
        if (dt[0].length <= 2)
            data = [dt[2].trim(), dt[1].trim(), dt[0].trim()].join("-");
        else
            data = [dt[0].trim(), dt[1].trim(), dt[2].trim()].join("-");
        $(event.target)[0].value = formatDate(data);
        $(event.target)[0].type = "date";
        if (this.Api)
            this.Api.columns.adjust();
    };

    this.changeDateOrder = function (data) {
        var dt = data.split("/");
        var dtp = this.datePattern.split("/");
        if (dt.length === 1)
            dt = data.split("-");
        if (dtp.length === 1)
            dtp = this.datePattern.split("-");

        if (dt[0].length <= 2)
            return [dt[2].trim(), dt[1].trim(), dt[0].trim()].join("-");
        else
            return [dt[0].trim(), dt[1].trim(), dt[2].trim()].join("-");
    };

    this.retainDateOrder = function (data) {
        var dt = data.split("-");
        return [dt[2].trim(), dt[1].trim(), dt[0].trim()].join("/");
    };

    this.toggleInFilter = function (e) {
        var table = $(e.target).attr('data-table');
        this.call_filter({ keyCode: 10 });
        //this.Api.ajax.reload();
    };

    this.togglePG = function (e) {
        $(".ppcont").toggle('drop', { direction: 'right' }, 150);
        if ($(".ppcont").is(":visible"))
            $(".filterCont").hide();
        e.stopPropagation();
    };

    this.fselect_func = function (e) {
        let element = ($(e.target).is("a")) ? $(e.target) : $(e.target).siblings("a");
        var opScroll = $(element).text().trim();
        $(element).parents('.input-group-btn').find('.dropdown-toggle').html(opScroll);
        $.each(this.eb_agginfo, function (index, agginfo) {
            if (agginfo.colname) {
                ftrtxtScroll = '.dataTables_scrollFootInner #' + this.tableId + '_' + agginfo.colname + '_ftr_txt0';
                ftrtxtLF = '.DTFC_LeftFootWrapper #' + this.tableId + '_' + agginfo.colname + '_ftr_txt0';
                ftrtxtRF = '.DTFC_RightFootWrapper #' + this.tableId + '_' + agginfo.colname + '_ftr_txt0';

                var col = this.Api.column(agginfo.colname + ':name');
                var summary_val = 0;
                if (opScroll === '∑') {
                    if (this.Source === "datagrid")
                        summary_val = col.data().sum().toFixed(agginfo.deci_val);
                    else
                        summary_val = (typeof this.summary[agginfo.data] !== "undefined") ? this.summary[agginfo.data][0] : 0;
                }
                if (opScroll === 'x̄') {
                    if (this.Source === "datagrid")
                        summary_val = col.data().average().toFixed(agginfo.deci_val);
                    else
                        summary_val = (typeof this.summary[agginfo.data] !== "undefined") ? this.summary[agginfo.data][1] : 0;
                }
                if (opScroll !== "")
                    $(ftrtxtScroll).text(summary_val);
            }
        }.bind(this));
        e.preventDefault();
    };

    this.clickAlSlct = function (e) {
        //var tableid = $(e.target).attr('data-table');
        if (e.target.checked)
            $('#' + this.tableId + '_wrapper tbody [type=checkbox]:not(:checked)').trigger('click');
        else
            $('#' + this.tableId + '_wrapper tbody [type=checkbox]:checked').trigger('click');

        e.stopPropagation();
    };

    this.renderCheckBoxCol = function (data2, type, row, meta) {
        if (this.FlagPresentId) {
            this.hiddenIndex = $.grep(this.EbObject.Columns.$values, function (obj) { return obj.name.toLocaleLowerCase() === this.hiddenFieldName.toLocaleLowerCase(); }.bind(this))[0].data;
            this.rowId = meta.row; //do not remove - for updateAlSlct
            if (row[this.hiddenIndex])
                return "<input type='checkbox' class='" + this.tableId + "_select' name='" + this.tableId + "_id' value='" + row[this.hiddenIndex].toString() + "'/>";
            else
                return "<input type='checkbox' class='" + this.tableId + "_select'/>";
        }
        else
            return "<input type='checkbox' class='" + this.tableId + "_select'/>";
    };

    this.updateAlSlct = function (e) {
        var idx = this.Api.row($(e.target).parent().parent()).index();
        let $group = $(e.target).closest("tr").prevAll(".group").eq(0);
        if (e.target.checked) {
            this.Api.rows(idx).select();
            $('#' + this.tableId + '_wrapper table:eq(0) thead tr:eq(0) [type=checkbox]').prop("indeterminate", true);
        }
        else {
            this.Api.rows(idx).deselect();
            $('#' + this.tableId + '_wrapper table:eq(0) thead tr:eq(0) [type=checkbox]').prop("indeterminate", true);
        }
        $group.find('.' + this.tableId + '_rowgroupheadercheckbox').prop("indeterminate", true);

        var CheckedCount = $('.' + this.tableId + '_select:checked').length;
        var UncheckedCount = this.Api.rows().count() - CheckedCount;
        if (CheckedCount === this.Api.rows().count()) {
            $('#' + this.tableId + '_wrapper table:eq(0) thead tr:eq(0) [type=checkbox]').prop("indeterminate", false);
            $('#' + this.tableId + '_wrapper table:eq(0) thead tr:eq(0) [type=checkbox]').prop('checked', true);
        }
        else if (UncheckedCount === this.Api.rows().count()) {
            $('#' + this.tableId + '_wrapper table:eq(0) thead tr:eq(0) [type=checkbox]').prop("indeterminate", false);
            $('#' + this.tableId + '_wrapper table:eq(0) thead tr:eq(0) [type=checkbox]').prop('checked', false);
        }
        if ($group.length === 1) {
            let groupnum = $group.attr("group");
            for (let i = parseInt(groupnum); i >= 1; i--) {
                let $elems = $group.nextUntil("[group=" + i + "]").filter(".odd,.even");
                let checkCount = $elems.find('.' + this.tableId + '_select:checked').length;
                $group.find(".rowgrouprowcount").empty();
                if (checkCount > 0)
                    $group.find(".rowgrouprowcount").html("&nbsp;" + checkCount + " rows selected");
                if ($elems.length === checkCount) {
                    $group.find('.' + this.tableId + '_rowgroupheadercheckbox').prop("indeterminate", false);
                    $group.find('.' + this.tableId + '_rowgroupheadercheckbox').prop("checked", true);
                }
                else {
                    $group.find('.' + this.tableId + '_rowgroupheadercheckbox').prop("indeterminate", false);
                    $group.find('.' + this.tableId + '_rowgroupheadercheckbox').prop("checked", false);
                }
                $group = $group.prevAll(".group[group=" + (i - 1) + "]").eq(0);
            }
        }
        let rowdata = this.unformatedData[idx];
        if (Option.CheckboxClickCallback)
            Option.CheckboxClickCallback(e, rowdata);
    };

    this.showOrHideAggrControl = function (e) {
        $('#' + this.tableId + '_wrapper .dataTables_scrollFootInner tfoot tr:eq(0)').toggle();
        $("#" + this.tableId + "_wrapper .DTFC_LeftFootWrapper tfoot tr:eq(0)").toggle();
        $("#" + this.tableId + "_wrapper .DTFC_RightFootWrapper tfoot tr:eq(0)").toggle();
        this.Api.columns.adjust();
    };

    this.linkFromCalendar = function (e) {
        this.popup = true;
        var rows = this.Api.rows(idx).nodes();
        this.linkDV = this.ObjectLinks[0].ObjRefId; //$(e.target).closest("a").attr("data-link");
        colindex = parseInt($(e.target).closest("a").attr("idx"));
        var idx = this.Api.row($(e.target).parents().closest("td")).index();
        let col = this.columns[colindex];

        if (parseInt(this.linkDV.split("-")[2]) !== EbObjectTypes.WebForm) {
            $(".tableviewpopupmodal").remove();
            $("body").append(`
            <div class="modal fade tableviewpopupmodal" id="popupmodalContainer${this.tableId}" role="dialog" >
                <div class="modal-dialog" style="width: 95%; height: 95%;">
                    <div class="modal-content" style="height: 100%; overflow-y: auto;">
                        <div class="modal-header">
                                <div id ="popupheader${this.tableId}">
                                     <button type="button" class="close" data-dismiss="modal">&times;</button> 
                                </div>                           
                        </div>
                            <div id="tblpopup"></div>
                        <div class="modal-body"> <div id='content_popupmodal${this.tableId}'><table class='table display table-bordered compact' id="popupmodal${this.tableId}"></table></div></div>
                    </div>
                </div>
            </div>
            `);

            $(`#popupmodalContainer${this.tableId}`).modal('show');
            $(`#tblpopup`).EbLoader("show", { maskItem: { Id: "body" } });
            if (typeof (idx) !== "undefined")
                this.rowData = this.unformatedData[idx];
            else {//incomplete...
                this.rowData = [];
            }
            this.filterValues = this.getFilterValues();
            let rowfilter = this.getfilterFromRowdata().find(ele => ele.Name === "id");
            this.filterValues[this.filterValues.findIndex(ele => ele.Name === "id")].Value = rowfilter.Value;
            this.filterValues[0].Value = col.StartDT;
            this.filterValues[1].Value = col.EndDT;
            let source = "Calendar";

            this.call2newDv(rows, idx, colindex, source);
        }
        else {
            this.filterValuesforForm = this.getfilterFromRowdata();
            CallWebFormCollectionRender({
                _source: 'tv',
                _refId: this.linkDV,
                _params: btoa(unescape(encodeURIComponent(JSON.stringify(this.filterValuesforForm)))),
                _mode: 1,
                _locId: ebcontext.locations.CurrentLoc
            });
        }
    };

    this.link2NewTable = function (e) {
        this.rowgroupFilter = [];
        var rows = this.Api.rows(idx).nodes();
        var cData;
        var colindex = -1;
        this.isContextual = true;
        if ($(e.target).closest("a").attr("data-latlong") !== undefined)
            cData = $(e.target).closest("a").attr("data-latlong");
        else if ($(e.target).closest("a").attr("data-inline") !== undefined) {
            cData = $(e.target).closest("a").attr("data-data");
            this.inline = true;
            colindex = parseInt($(e.target).closest("a").attr("data-colindex"));
        }
        else if ($(e.target).closest("a").attr("data-popup") !== undefined) {
            cData = $(e.target).closest("a").attr("data-data");
            this.popup = true;
            colindex = parseInt($(e.target).closest("a").attr("data-colindex"));
        }
        else if ($(e.target).closest("a").attr("data-linkfromcolumn") !== undefined) {
            cData = $(e.target).text();
            this.linkfromcolumn = true;
            colindex = parseInt($(e.target).closest("a").attr("data-colindex"));
        }
        else {
            cData = $(e.target).text();
            colindex = parseInt($(e.target).closest("a").attr("data-colindex"));
        }
        this.linkDV = $(e.target).closest("a").attr("data-link");
        this.linkDVColumn = $(e.target).closest("a").attr("data-column");
        var idx = this.Api.row($(e.target).closest("tr")).index();
        if (typeof (idx) !== "undefined")
            this.rowData = this.unformatedData[idx];
        else {//incomplete...
            this.rowData = [];
        }
        var x = this.getStaticParameter(colindex);
        this.filterValuesforForm = [];
        if (parseInt(this.linkDV.split("-")[2]) !== EbObjectTypes.WebForm)
            this.filterValues = this.getfilterFromRowdata().concat(this.getFilterValues()).concat(x);
        else if (this.linkfromcolumn)
            this.filterValuesforForm = this.getFilterForLinkfromColumn();
        else
            this.filterValuesforForm = this.getfilterFromRowdata();

        if ($(e.target).parent("b").attr("data-rowgroup") !== undefined) {

            this.getRowGroupFilter($(e.target).parent("b"));
            if (this.CurrentRowGroup.$type.indexOf("SingleLevelRowGroup") !== -1) {
                $.each($(e.target).parent("b").siblings("b"), function (i, elem) {
                    this.getRowGroupFilter($(elem));
                }.bind(this));
            }
            else {
                var $elem = $(e.target).parents().closest(".group");
                let count = $elem.attr("group");
                for (var i = count - 1; i >= 0; i--) {
                    $elem = $(e.target).parents().closest(".group").prevAll().closest(".group[group=" + i + "]").last();
                    this.getRowGroupFilter($elem.children().find("b"));
                }
            }

            this.filterValues = this.filterValues.concat(this.rowgroupFilter);
        }

        if (this.inline) {
            this.inline = false;
            if ($(rows).eq(idx).next().attr("id") !== "containerrow" + colindex) {
                this.drawInlinedv(rows, e, idx, colindex);
            }
            else {
                this.OpenInlineDv(rows, e, idx, colindex);
            }
        }
        else if (this.popup) {
            this.popup = false;
            CallWebFormCollectionRender({
                _source: 'tv',
                _refId: this.linkDV,
                _params: btoa(unescape(encodeURIComponent(JSON.stringify(this.filterValuesforForm)))),
                _mode: this.dvformMode,
                _locId: ebcontext.locations.CurrentLoc
            });
            //$("#iFrameFormPopupModal").modal("show");
            //let url = `../WebForm/Index?_r=${this.linkDV}&_p=${btoa(unescape(encodeURIComponent(JSON.stringify(this.filterValuesforForm))))}&_m=1${this.dvformMode}&_l=${ebcontext.locations.CurrentLoc}`;
            //$("#iFrameFormPopup").attr("src", url);
        }
        else {
            //if (this.login === "uc")
            //  dvcontainerObj.drawdvFromTable(btoa(unescape(encodeURIComponent(JSON.stringify(this.rowData)))), btoa(unescape(encodeURIComponent(JSON.stringify(this.filterValues)))), btoa(unescape(encodeURIComponent(JSON.stringify(this.filterValuesforForm)))), cData.toString(), this.dvformMode);//, JSON.stringify(this.filterValues)
            //else
            this.OpeninNewTab(idx, cData);
        }
        //this.filterValues = [];
    };

    this.link2NewTableFromColumn = function (e) {
        this.linkDV = $(e.target).closest("a").attr("data-link");
        let Paramvalue = $(e.target).closest("a").attr("data-id");
        this.filterValuesforForm = [];
        this.filterValuesforForm.push(new fltr_obj(11, "id", Paramvalue));
        this.dvformMode = 1;
        if (this.login === "uc")
            dvcontainerObj.drawdvFromTable(btoa(unescape(encodeURIComponent(JSON.stringify(this.filterValuesforForm)))), cData.toString(), this.dvformMode);//, JSON.stringify(this.filterValues)
        else
            this.OpeninNewTab(this.Api.row($(e.target).parents().closest("td")).index(), $(e.target).text());
    };

    this.drawInlinedv = function (rows, e, idx, colindex) {
        this.showEbLoader();
        $(e.target).parents().closest("td").siblings().children(".tablelink").children("i").removeClass("fa-caret-up").addClass("fa-caret-down");
        this.call2newDv(rows, idx, colindex);
        $(e.target).closest("I").removeClass("fa-caret-down").addClass("fa-caret-up");
    };

    this.OpenInlineDv = function (rows, e, idx, colindex) {
        if ($(e.target).closest("I").hasClass("fa-caret-up")) {
            $(e.target).closest("I").removeClass("fa-caret-up").addClass("fa-caret-down");
            $(rows).eq(idx).next().hide();
        }
        else {
            $(e.target).closest("I").removeClass("fa-caret-down").addClass("fa-caret-up");
            $(rows).eq(idx).next().show();
        }
        this.Api.columns.adjust();
    };

    this.ExecuteApproval = function ($td, action, e) {
        //$("#eb_common_loader").EbLoader("show");
        if ($(e.target).attr('action-clicked') == 'true') {// to avoid multi click
            console.warn('multi click blocked');
            return;
        }
        $(e.target).attr('action-clicked', 'true');
        let val, comments;
        if (action === 'reset') {
            comments = $(e.target).closest("#resetstage").find(".comment-text").val();
            if (!comments.trim()) {
                EbMessage("show", { Message: "Comments required to complete the review", Background: "#e40707", AutoHide: true, Delay: 3000 });
                $(e.target).attr('action-clicked', 'false');
                return;
            }
            val = $(e.target).attr("data-json");
            val = JSON.parse(atob(val));
        }
        else {
            comments = $(e.target).closest("#action").find(".comment-text").val();
            let req = $(e.target).closest("#action").find(".selectpicker :selected").attr('req');
            if (!comments.trim() && req === 'y') {
                EbMessage("show", { Message: "Comments required to complete the review", Background: "#e40707", AutoHide: true, Delay: 3000 });
                $(e.target).attr('action-clicked', 'false');
                return;
            }
            val = $(e.target).closest("#action").find(".selectpicker").val();
            val = JSON.parse(atob(val));
        }
        if ($td.find('.btn-approval_popover:visible').length === 0)
            return;
        $td.find('.btn-approval_popover').popover('hide');
        $td.find('.btn-approval_popover').popover('destroy');
        $td.find('.btn-approval_popover i').removeClass('fa-history').removeClass('fa-pencil').addClass('fa-spinner fa-pulse');

        let Columns = [];
        Columns.push(new fltr_obj(16, "stage_unique_id", val.Stage_unique_id.toString()));
        Columns.push(new fltr_obj(16, "action_unique_id", val.Action_unique_id.toString()));
        Columns.push(new fltr_obj(7, "eb_my_actions_id", val.My_action_id.toString()));
        Columns.push(new fltr_obj(16, "comments", comments));
        $.ajax({
            type: "POST",
            url: "../dv/PostWebformData",
            data: { Params: Columns, RefId: val.Form_ref_id, RowId: val.Form_data_id, CurrentLoc: ebcontext.locations.CurrentLoc },
            success: this.cccccc.bind(this, $td),
            error: function ($td, xhr, error) {
                console.log(xhr); console.log(error);
                console.debug(xhr); console.debug(error);
                this.cccccc.bind(this, $td, { messaage: 'Something went wrong ### error' })();
            }.bind(this, $td),
        });
    };

    this.cccccc = function ($td, resp) {
        if (!(resp._data)) {
            let msg = resp.messaage;
            console.error(msg);
            $td.find('.btn-approval_popover').attr('title', msg.includes(' ### ') ? msg.split(' ### ')[0] : msg);
            $td.find('.btn-approval_popover i').removeClass('fa-spinner fa-pulse').addClass('fa-exclamation-circle').attr('style', 'color: red !important;');
            //return;
        }
        else {
            $td.html(resp._data);
            //if ($td.find(".status-label").text() === "Review Completed")
            //    EbMessage("show", { Message: "Review Completed", Background: "#00AD6E" });
            var cell = this.Api.cell($td);
            cell.data($td.html());
        }

        let $popoverBtn = $td.find('.btn-approval_popover');

        $popoverBtn.popover({
            container: 'body',
            trigger: 'click',
            placement: this.ApprovalPopoverPlacement,
            html: true,
            template: '<div class="popover approval-popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>',
            content: function (e, i) {
                return atob($(this).attr("data-contents"));
            },
        });

        $popoverBtn.off('shown.bs.popover').on('shown.bs.popover', function (e) {
            $(".stage_actions").selectpicker();
            let $td = $(e.target).closest("td.tdheight");
            $(".btn-action_execute").off("click").on("click", this.ExecuteApproval.bind(this, $td, 'execute'));
            $(".btn-action_reset").off("click").on("click", this.ExecuteApproval.bind(this, $td, 'reset'));
        }.bind(this));

        $popoverBtn.off('hidden.bs.popover').on('hidden.bs.popover', function (e) {
            $(e.target).data("bs.popover").inState.click = false;
        }.bind(this));

        //$("#eb_common_loader").EbLoader("hide");
    };

    this.getRowGroupFilter = function ($elem) {
        let name = $elem.attr("data-colname");
        let type = parseInt($elem.attr("data-coltype"));
        let val = $elem.attr("data-data");
        if (type === 5 || type === 6)
            val = val.split("/").join('-');
        this.rowgroupFilter.push(new fltr_obj(type, name, val));
    };

    this.call2newDv = function (rows, idx, colindex, source) {
        $.ajax({
            type: "POST",
            url: "../DV/getdv",
            data: { refid: this.linkDV },
            success: this.GetData4InlineDv.bind(this, rows, idx, colindex, source),
            error: function (req, status, xhr) {
            }
        });
    };

    this.GetData4InlineDv = function (rows, idx, colindex, source, result) {
        var Dvobj = JSON.parse(result).DsObj;
        var param = this.Params4InlineTable(Dvobj, idx, source);
        $.ajax({
            type: "POST",
            url: "../DV/getData",
            data: param,
            success: this.LoadInlineDv.bind(this, rows, idx, Dvobj, colindex, source),
            error: function (req, status, xhr) {
            }
        });
    };

    this.LoadInlineDv = function (rows, idx, Dvobj, colindex, source, result) {
        if (this.popup) {
            $("#popupheader" + this.tableId).append(`
               <div class="popup-header-name">
                    ${Dvobj.DisplayName}
               </div>
               <div>
                   Range :  ${moment(new Date(this.filterValues[0].Value)).format('DD-MMM-YYYY') + " - " + moment(new Date(this.filterValues[1].Value)).format('DD-MMM-YYYY')}
               </div>
            `);

            this.RenderTableviewAsPopup(Dvobj, result);
        }
        else {
            let colspan = Dvobj.Columns.$values.length;
            let str = "";
            $.each(this.rowgroupCols, function (k, obj) {
                str += "<td>&nbsp;</td>";
            });
            $.each(this.extraCol, function (k, obj) {
                if (obj.bVisible)
                    str += "<td>&nbsp;</td>";
            });

            $(rows).eq(idx).next(".containerrow").remove();
            if (Dvobj.$type.indexOf("EbTableVisualization") !== -1) {
                $(rows).eq(idx).after("<tr class='containerrow' id='containerrow" + colindex + "'>" + str + "<td colspan='" + colspan + "'><div class='inlinetable '><div class='close' type='button' title='Close'>x</div><div class='Obj_title' id='objName" + idx + "'>" + Dvobj.DisplayName + "</div><div id='content_tbl" + idx + "'><table id='tbl" + idx + "' class='table display table-bordered compact'></table></div></td></tr></div>");

                var o = new Object();
                o.tableId = "tbl" + idx;
                o.showFilterRow = false;
                o.showSerialColumn = true;
                o.showCheckboxColumn = false;
                o.Source = "inline";
                o.scrollHeight = "200px";
                o.dvObject = Dvobj;
                o.data = result;
                o.keys = false;
                o.IsPaging = false;
                o.filterValues = btoa(unescape(encodeURIComponent(JSON.stringify(this.filterValues))));
                this.datatable = new EbCommonDataTable(o);
                if (this.EbObject.DisableRowGrouping || this.EbObject.RowGroupCollection.$values.length === 0)
                    $(".inlinetable").css("width", $(window).width() - 115);
                else
                    $(".inlinetable").css("width", $(window).width() - 175);
                this.datatable.Api.columns.adjust();
            }
            else {
                $(rows).eq(idx).after("<tr class='containerrow' id='containerrow" + colindex + "'>" + str + "<td colspan='" + colspan + "'><div class='inlinetable'><div class='close' type='button' title='Close'>x</div><div class='Obj_title' id='objName" + idx + "'>" + Dvobj.DisplayName + "</div><div id='canvasDivchart" + idx + "' ></div></td></tr></div>");
                o = new Object();
                o.tableId = "chart" + idx;
                o.dvObject = Dvobj;
                o.data = result.data;
                this.chartApi = new EbBasicChart(o);
                $(".inlinetable").css("height", "380px");
                $("#canvasDivchart" + idx).css("width", $(window).width() - 100);
                $("#canvasDivchart" + idx).css("height", "inherit");
            }
            $(".containerrow .close").off("click").on("click", function (e) {
                $(e.target).parents().closest(".containerrow").prev().children().find("I").removeClass("fa-caret-up").addClass("fa-caret-down");
                $(e.target).parents().closest(".containerrow").remove();
                this.Api.columns.adjust();
            }.bind(this));
        }
        if (source === "Calendar")
            $("#tblpopup").EbLoader("hide");
        else
            this.hideEbLoader();

        this.Api.columns.adjust();
    };

    this.RenderTableviewAsPopup = function (Dvobj, result) {
        var o = new Object();
        o.tableId = `popupmodal${this.tableId}`;
        o.showFilterRow = false;
        o.showSerialColumn = true;
        o.showCheckboxColumn = false;
        o.Source = "popup";
        //o.scrollHeight = "200px";
        o.dvObject = Dvobj;
        o.data = result;
        o.keys = false;
        o.IsPaging = false;
        o.filterValues = btoa(unescape(encodeURIComponent(JSON.stringify(this.filterValues))));
        this.datatable = new EbCommonDataTable(o);
        this.popup = false;
        this.datatable.Api.columns.adjust();
    };

    this.Params4InlineTable = function (Dvobj, idx, source) {
        var dq = new Object();
        dq.RefId = Dvobj.DataSourceRefId;
        dq.TFilters = [];
        dq.Params = this.filterValues;
        dq.Start = 0;
        dq.Length = 500;
        dq.DataVizObjString = JSON.stringify(Dvobj);
        if (source === "Calendar")
            dq.TableId = `popupmodal${this.tableId}`;
        else
            dq.TableId = "tbl" + idx;
        if (Dvobj.RowGroupCollection.$values.length > 0)
            dq.CurrentRowGroup = JSON.stringify(Dvobj.RowGroupCollection.$values[0]);
        dq.OrderBy = this.getOrderByInfoforInline(Dvobj);
        dq.Source = source;
        return dq;
    };

    this.getOrderByInfoforInline = function (Dvobj) {
        var tempArray = [];
        if (Dvobj.RowGroupCollection.$values.length > 0) {
            let rwog = Dvobj.RowGroupCollection.$values[0];
            if (rwog.RowGrouping.$values.length > 0) {
                for (let i = 0; i < rwog.RowGrouping.$values.length; i++)
                    tempArray.push(new order_obj(rwog.RowGrouping.$values[i].name, rwog.RowGrouping.$values[i].Direction));
            }
            if (rwog.OrderBy.$values.length > 0) {
                for (let i = 0; i < rwog.OrderBy.$values.length; i++)
                    tempArray.push(new order_obj(rwog.OrderBy.$values[i].name, rwog.OrderBy.$values[i].Direction));
            }
        }

        if (tempArray.length === 0) {
            $.each(Dvobj.OrderBy.$values, function (i, obj) {
                if (tempArray.filter(e => e.Column === obj.name).length === 0)
                    tempArray.push(new order_obj(obj.name, obj.Direction));
            });
        }

        return tempArray;

    };

    this.getStaticParameter = function (index) {
        var temp = $.grep(this.EbObject.Columns.$values, function (obj) { return obj.data == index });
        var array = [];
        if (temp[0].StaticParameters.$values.length > 0) {
            $.each(temp[0].StaticParameters.$values, function (i, obj) {
                array.push(new fltr_obj(obj.Type, obj.Name, obj.Value));
            });
        }
        return array;
    };

    this.deleteTab = function (e) {
        var tabContentId = $(e.target).parent().attr("href");
        $(e.target).parent().parent().remove(); //remove li of tab
        $('#table_tabs a:last').tab('show'); // Select first tab
        $(tabContentId).remove();
    };

    this.CopyToClipboard = function (e) {
        $('#' + this.tableId + '_wrapper').find('.buttons-copy').click();
    };

    this.ExportToPrint = function (e) {
        $('#' + this.tableId + '_wrapper').find('.buttons-print')[0].click();
    };


    this.ExportToExcel = function (e) {
        //$('#' + this.tableId + '_wrapper').find('.buttons-excel').click();
        EbMessage("show", { Message: 'Generating Excel... Please wait in this tab or visit <b><a href="/Downloads" target="_blank" style="color: white; text-decoration: underline;">Downloads</a></b> page after a while..', AutoHide: true, Background: '#00aa55', Delay: 15000 });
        this.excelbtn.prop("disabled", true);
        this.RemoveColumnRef();

        var ob = new Object();
        ob.DataVizObjString = JSON.stringify(this.EbObject);
        ob.Params = this.filterValues;
        ob.TFilters = this.columnSearch;
        ob.SubscriptionId = window.ebcontext.subscription_id;

        this.ss = new EbServerEvents({ ServerEventUrl: window.ebcontext.se_url, Channels: ["ExportToExcel"] });
        this.ss.onExcelExportSuccess = function (url) {
            window.location.href = url;
            this.excelbtn.prop("disabled", false);
            event.stopPropagation();
        }.bind(this);
        $.ajax({
            type: "POST",
            url: "../DV/exportToexcel",
            data: { req: ob }
        });
    };

    this.ExportToCsv = function (e) {
        $('#' + this.tableId + '_wrapper').find('.buttons-csv').click();
    };

    this.ExportToPdf = function (e) {
        $('#' + this.tableId + '_wrapper').find('.buttons-pdf').click();
    };

    this.printSelected = function (e) {
        $('#' + this.tableId + '_wrapper').find('.buttons-print')[1].click();
    };

    this.printAll = function (e) {
        $('#' + this.tableId + '_wrapper').find('.buttons-print')[0].click();
    };

    this.SwitchToChart = function () {
        $('#' + this.tableId).parents().find(".sub-windows").hide();
        this.stickBtn.hide();
        let chartobj = new EbObjects["EbChartVisualization"]("Container_" + Date.now());
        chartobj.Columns = JSON.parse(JSON.stringify(this.EbObject.Columns));
        chartobj.DSColumns = JSON.parse(JSON.stringify(this.EbObject.DSColumns));
        chartobj.DataSourceRefId = this.EbObject.DataSourceRefId;
        chartobj.Pippedfrom = this.EbObject.Name;
        let chartapi = eb_chart(chartobj.DataSourceRefId, null, null, chartobj, null, this.tabNum, this.ssurl, this.login, this.counter, this.MainData, btoa(JSON.stringify(this.rowData)), btoa(JSON.stringify(this.filterValues)), this.cellData, this.propGrid);
    };

    this.collapseFilter = function () {
        this.filterBox.toggle();
        if (this.filterBox.css("display") == "none") {
            $("#btnCollapse" + this.tableId).children().remove();
            $("#btnCollapse" + this.tableId).append("<i class='fa fa-chevron-down' aria-hidden='true'></i>");
        }
        else {
            $("#btnCollapse" + this.tableId).children().remove();
            $("#btnCollapse" + this.tableId).append("<i class='fa fa-chevron-up' aria-hidden='true'></i>");
        }
    };


    this.updateRenderFunc = function () {
        $.each(this.EbObject.Columns.$values, this.updateRenderFunc_Inner.bind(this));
    };

    this.updateRenderFunc_Inner = function (i, col) {
        //this.EbObject.Columns.$values[i].sClass = "";
        //this.EbObject.Columns.$values[i].className = "";
        if (col.$type.indexOf("DVButtonColumn") === -1 && col.$type.indexOf("DVApprovalColumn") === -1 && col.$type.indexOf("DVActionColumn") === -1) {
            if (col.RenderType === parseInt(gettypefromString("Int32")) || col.RenderType === parseInt(gettypefromString("Decimal")) || col.RenderType === parseInt(gettypefromString("Int64")) || col.RenderType === parseInt(gettypefromString("Numeric"))) {

                if (this.EbObject.Columns.$values[i].Align.toString() === EbEnums.Align.Auto)
                    this.EbObject.Columns.$values[i].className += " tdheight dt-right";
            }
            else if (col.RenderType === parseInt(gettypefromString("Boolean"))) {
                if (this.EbObject.Columns.$values[i].name === "eb_void" || this.EbObject.Columns.$values[i].name === "eb_lock") {
                    this.EbObject.Columns.$values[i].render = (this.EbObject.Columns.$values[i].name === "eb_lock") ? this.renderLockCol.bind(this) : this.renderEbVoidCol.bind(this);
                    this.EbObject.Columns.$values[i].mRender = (this.EbObject.Columns.$values[i].name === "eb_lock") ? this.renderLockCol.bind(this) : this.renderEbVoidCol.bind(this);
                }
                else {
                    if (this.EbObject.Columns.$values[i].RenderAs.toString() === EbEnums.BooleanRenderType.IsEditable) {
                        this.EbObject.Columns.$values[i].render = this.renderEditableCol.bind(this);
                        this.EbObject.Columns.$values[i].mRender = this.renderEditableCol.bind(this);
                    }
                    else if (this.EbObject.Columns.$values[i].RenderAs.toString() === EbEnums.BooleanRenderType.Icon) {
                        this.EbObject.Columns.$values[i].render = this.renderIconCol.bind(this);
                        this.EbObject.Columns.$values[i].mRender = this.renderIconCol.bind(this);
                    }
                    else {
                        this.EbObject.Columns.$values[i].render = function (data, type, row, meta) { return data; };
                        this.EbObject.Columns.$values[i].mRender = function (data, type, row, meta) { return data; };
                    }
                }
                if (this.EbObject.Columns.$values[i].Align.toString() === EbEnums.Align.Auto)
                    this.EbObject.Columns.$values[i].className += " tdheight text-center";
            }
            else if (col.RenderType === parseInt(gettypefromString("String")) || col.RenderType == parseInt(gettypefromString("Double"))) {
                if (this.EbObject.Columns.$values[i].RenderAs.toString() === EbEnums.StringRenderType.Chart) {
                    this.EbObject.Columns.$values[i].render = this.lineGraphDiv.bind(this);
                    this.EbObject.Columns.$values[i].mRender = this.lineGraphDiv.bind(this);
                }
                //else if (this.EbObject.Columns.$values[i].RenderAs.toString() === EbEnums.StringRenderType.Image) {
                //    this.EbObject.Columns.$values[i].render = this.renderFBImage.bind(this, this.EbObject.Columns.$values[i]);
                //    this.EbObject.Columns.$values[i].mRender = this.renderFBImage.bind(this, this.EbObject.Columns.$values[i]);
                //}
                else if (this.EbObject.Columns.$values[i].RenderAs.toString() === EbEnums.StringRenderType.Icon) {
                    this.EbObject.Columns.$values[i].render = this.renderIconCol.bind(this);
                    this.EbObject.Columns.$values[i].mRender = this.renderIconCol.bind(this);
                }

                if (this.EbObject.Columns.$values[i].Align.toString() === EbEnums.Align.Auto)
                    this.EbObject.Columns.$values[i].className += " tdheight dt-left";
            }
            else if (col.RenderType === parseInt(gettypefromString("Date")) || col.RenderType == parseInt(gettypefromString("DateTime"))) {
                if (this.EbObject.Columns.$values[i].Align.toString() === EbEnums.Align.Auto)
                    this.EbObject.Columns.$values[i].className += " tdheight dt-left";
            }
        }

        if (col.name === "eb_created_by" || col.name === "eb_lastmodified_by")
            col.className += " dt-left";
        if (col.Font !== null && col.Font !== undefined) {
            var style = document.createElement('style');
            style.type = 'text/css';
            var array = [this.tableId, col.name, col.Font.FontName, col.Font.Size, col.Font.color.replace("#", "")];
            if ($("." + array.join("_")).length === 0) {
                style.innerHTML = "." + array.join("_") + "{font-family: " + col.Font.FontName + "!important; font-size: " + col.Font.Size + "px!important; color: " + col.Font.color + "!important; }";
                document.getElementsByTagName('body')[0].appendChild(style);
            }
            this.EbObject.Columns.$values[i].className = array.join("_");
            this.EbObject.Columns.$values[i].sClass = array.join("_");
        }

        if (this.EbObject.Columns.$values[i].Align.toString() === EbEnums.Align.Left)
            this.EbObject.Columns.$values[i].className += " tdheight dt-left";
        else if (this.EbObject.Columns.$values[i].Align.toString() === EbEnums.Align.Right)
            this.EbObject.Columns.$values[i].className += " tdheight dt-right";
        else if (this.EbObject.Columns.$values[i].Align.toString() === EbEnums.Align.Center)
            this.EbObject.Columns.$values[i].className += " tdheight text-center";

        this.EbObject.Columns.$values[i].sClass = this.EbObject.Columns.$values[i].className;
    };

    this.renderProgressCol = function (deci, data, type, row, meta) {
        return "<div class='progress'><div class='progress-bar' role='progressbar' aria-valuenow='" + parseFloat(data.toString()).toFixed(deci) + "' aria-valuemin='0' aria-valuemax='100' style='width:" + data.toString() + "%'>" + parseFloat(data.toString()).toFixed(deci) + "</div></div>";
    };

    this.renderToDecimalPlace = function (data, type, row, meta) {
        return parseFloat(data).toFixed();
    };

    this.renderEditableCol = function (data) {
        return (data === true) ? "<input type='checkbox' data-toggle='toggle' data-size='mini' checked>" : "<input type='checkbox' data-toggle='toggle' data-size='mini'>";
    };

    this.renderIconCol = function (data, type, row, meta) {
        if (meta.settings.aoColumns[meta.col].TrueValue.toLowerCase() === data.toLowerCase())
            return "<i class='fa fa-check' aria-hidden='true'  style='color:green'></i>";
        else if (meta.settings.aoColumns[meta.col].FalseValue.toLowerCase() === data.toLowerCase())
            return "<i class='fa fa-times' aria-hidden='true' style='color:red'></i>";
        else
            return data;
    };

    this.renderEbVoidCol = function (data) {
        return (data === 'true' || data === true || data === 'T') ? "<i class='fa fa-ban' aria-hidden='true'></i>" : "";
    };

    this.renderLockCol = function (data) {
        return (data === 'true' || data === true || data === 'T') ? "<i class='fa fa-lock' aria-hidden='true'></i>" : "";
    };

    this.renderlink4NewTable = function (data, type, row, meta) {
        if (meta.settings.aoColumns[meta.col].LinkType.toString() === EbEnums.LinkTypeEnum.Popout)
            return "<a href='#' oncontextmenu='return false' class ='tablelink' data-link='" + meta.settings.aoColumns[meta.col].LinkRefId + "'>" + data + "</a>";
        else if (meta.settings.aoColumns[meta.col].LinkType.toString() === EbEnums.LinkTypeEnum.Inline)
            return data + `<a href='#' oncontextmenu='return false' class ='tablelink' data-link='${meta.settings.aoColumns[meta.col].LinkRefId}' data-inline="true" data-data='${data}'> <i class="fa fa-plus"></i></a>`;
        else
            return "<a href='#' oncontextmenu='return false' class ='tablelink' data-link='" + meta.settings.aoColumns[meta.col].LinkRefId + "'>" + data + "</a>" + ` &nbsp; <a href='#' oncontextmenu='return false' class ='tablelink' data-link='${meta.settings.aoColumns[meta.col].LinkRefId}' data-inline="true" data-data='${data}'> <i class="fa fa-plus"></i></a>`;
    };

    this.renderlinkandDecimal = function (deci, data) {
        return "<a href='#' oncontextmenu='return false' class ='tablelink' data-link='" + this.linkDV + "'>" + parseFloat(data).toFixed(deci) + "</a>";
    };

    this.colorRow = function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {
        $.each(this.EbObject.Columns.$values, function (i, value) {
            if (value.name === 'sys_row_color') {
                HEX = Number(aData[value.data]).toString(16);
                var t = (HEX.toString().length < 6) ? ("0" + HEX.toString()) : HEX;
                $(nRow).css('background-color', '#' + t);
            }

            if (value.name === 'eb_void') {
                var tr = aData[value.data];
                if (tr === 'true' || tr === true || tr === 'T') {
                    $(nRow).css('color', '#ab0000');
                    $(nRow).attr('eb-void', 'T');
                }
            }
        });
    };

    this.lineGraphDiv = function (data, type, row, meta) {
        if (!data)
            return "";
        else
            return "<canvas id='eb_cvs" + meta.row + "' class='eb_canvas" + this.tableId + "' style='width:120px; height:40px; cursor:pointer;' data-graph='" + data + "' data-toggle='modal'></canvas><script>renderLineGraphs(" + meta.row + "); $('#eb_cvs" + meta.row + "').mousemove(function(e){ GPointPopup(e); });</script>";
    };

    this.RenderGraphModal = function () {
        $(document.body).append("<div class='modal fade' id='graphmodal' role='dialog'>"
            + "<div class='modal-dialog modal-lg'>"
            + " <div class='modal-content'>"
            + "<div class='modal-header'>"
            + "<button type = 'button' class='close' data-dismiss='modal'>&times;</button>"
            + "<h4 class='modal-title'><center>Graph</center></h4>"
            + "</div>"
            + "<div class='modal-body'>"
            + "<div class='dygraph-Wrapper'>"
            + "<div id='graphdiv' style='width:100%;height:500px;'></div>"
            + "</div>  "
            + "</div>"
            + "</div>"
            + "</div>"
            + "</div>");
        $(document).on('show.bs.modal', '.modal', function (event) {
            var zIndex = 1040 + (10 * $('.modal:visible').length);
            $(this).css('z-index', zIndex);
            setTimeout(function () {
                $('.modal-backdrop').not('.modal-stack').css('z-index', zIndex - 1).addClass('modal-stack');
            }, 0);
        });
    };

    this.renderMainGraph = function (e) {
        $("#graphmodal").modal('show');

        setTimeout(function () {
            var gcsv = csv($(e.target).attr("data-graph").toString());
            new Dygraph(
                document.getElementById('graphdiv'),
                gcsv,
                {
                    showRangeSelector: true,
                    interactionModel: Dygraph.defaultInteractionModel,
                    includeZero: true,
                    stackedGraph: true,
                    axes: {
                        y: {
                            valueFormatter: function (y) {
                                return y;
                            },
                            axisLabelFormatter: function (y) {
                                y = y.toString();
                                if (y.slice(-3) === '000')
                                    return y.slice(0, -3) + 'K';
                                else
                                    return y;
                            },
                        },
                        logscale: true
                    }
                }
            );
        }, 500);
    };

    this.ModifyDvname = function () {
        this.EbObject.Name = $("#dvnametxt").val();
        $("label.dvname").text(this.EbObject.Name);
    };

    this.ModifyTableHeight = function () {
        this.EbObject.scrollY = $("#TableHeighttxt").val();
        this.EbObject.scrollY = (this.EbObject.scrollY < 100) ? "300" : this.EbObject.scrollY;
    };

    this.renderMarker = function (data) {
        if (data !== ",")
            return `<a href='#' class ='columnMarker_${this.tableId}' data-latlong='${data}'><i class='fa fa-map-marker fa-2x' style='color:red;'></i></a>`;
        else
            return null;
    };

    this.renderFBImage = function (col, data) {
        //if (typeof (data) === "string")
        //    return `<img class='img-thumbnail' src='http://graph.facebook.com/${data}/picture?type=square' style="height: 20px;width: 25px;"/>`;
        //else
        //    return `<img class='img-thumbnail' src='http://graph.facebook.com/12345678/picture?type=square' style="height: 20px;width: 25px;"/>`;
        let _height = col.ImageHeight === 0 ? "auto" : col.ImageHeight + "px";
        let _width = col.ImageWidth === 0 ? "auto" : col.ImageWidth + "px";
        let _quality = getKeyByVal(EbEnums.ImageQuality, col.ImageQuality.toString()).toLowerCase();
        if (data !== "")
            return `<img class='img-thumbnail columnimage' src='/images/${_quality}/${data}.jpg' style="height: ${_height};width: ${_width};"/>`;
        else
            return `<img class='img-thumbnail' src='/images/image.png' style="height: ${_height};width: ${_width};"/>`;
    };

    this.renderDataAsLabel = function (data) {
        return `<label class='labeldata'>${data}</label>`;
    };

    this.renderDateformat = function (data, sym) {
        if (typeof data !== "object" && typeof data !== "undefined") {
            var date = new Date(parseInt(data.substr(6)));
            var month = date.getMonth() + 1;
            var dt = date.getDate();
            if (sym === "-")
                return (dt.toString().length > 1 ? dt : "0" + dt) + "-" + (month.toString().length > 1 ? month : "0" + month) + "-" + date.getFullYear();
            else
                return (dt.toString().length > 1 ? dt : "0" + dt) + "/" + (month.toString().length > 1 ? month : "0" + month) + "/" + date.getFullYear();
        }
        else
            return "";
    };

    this.CreateRelationString = function () { };

    this.ValidateCalcExpression = function (obj) {
        $.ajax({
            url: "../RB/ValidateCalcExpression",
            type: "POST",
            cache: false,
            data: {
                refid: this.EbObject.DataSourceRefId,
                expression: atob(obj.ValueExpression)
            },
            success: function (result) {

            }.bind(this)
        });
    };

    this.Eb_DataTable_StyleFn = function () {
        let Tile = this.EbObject;
        let TileId = "content_" + this.tableId;
        if (Tile.IsGradient) {
            let direction = this.GradientDirection(Tile.Direction);
            let bg = "linear-gradient(" + direction + "," + Tile.GradientColor1 + "," + Tile.GradientColor2 + ")";
            $(`#${TileId}`).css("background-image", bg);
        }
        else {
            $(`#${TileId}`).css("background", Tile.BackColor);
        }

        //Tile border
        $(`#${TileId}`).css("border-radius", Tile.BorderRadius == 0 ? 4 + "px" : Tile.BorderRadius + "px");
        $(`#${TileId}`).css("border", `solid 1px ${Tile.BorderColor}`);

        //Tile Text Font 
        $(`#${TileId} tr`).css("color", `${Tile.FontColor}`);
        $(`#${TileId} th`).css({ "color": `${Tile.FontColor} !important;` });
        $(`#${TileId} td`).css({ "color": `${Tile.FontColor} !important;` });
        $(`#${TileId} a`).css("color", `${Tile.LinkColor} !important;`).css("font-size: 14px;");

        $(`#${TileId} td`).css("border-bottom", "1px solid #2b2b2b;!important");
    };

    this.GradientDirection = function (val) {
        gradient = [];
        gradient[0] = "to right";
        gradient[1] = "to left";
        gradient[2] = "to bottom";
        gradient[3] = "to bottom right";
        gradient[4] = "to bottom left";
        gradient[5] = "to top right";
        gradient[6] = "to top left";

        return gradient[val];
    };

    this.showEbLoader = function () {
        if (this.Source != "WebForm")
            $("#eb_common_loader").EbLoader("show");
    };

    this.hideEbLoader = function () {
        if (this.Source != "WebForm")
            $("#eb_common_loader").EbLoader("hide");
    };

    if (this.Source === "EbDataTable" || this.Source === "PivotTable")
        this.start4EbDataTable();
    else
        this.start4Other();
};

const arrayColumn = (arr, n) => arr.map(x => x[n]);

function splitval(val) {
    return val.split(/\|\s*/);
}

function extractLast(term) {
    return splitval(term).pop();
}

if (!String.prototype.splice) {
    String.prototype.splice = function (start, delCount, newSubStr) {
        return this.slice(0, start) + newSubStr + this.slice(start + Math.abs(delCount));
    };
};

Array.prototype.max = function () {
    return Math.max.apply(null, this);
};

Array.prototype.min = function () {
    return Math.min.apply(null, this);
};

var displayFilter = function (col, title, oper, val, Loper) {
    this.name = col;
    this.title = title;
    this.operator = oper;
    this.value = val;
    this.logicOp = Loper;
};

function returnOperator(op) {
    if (op === "x*")
        return "startwith";
    else if (op === "*x")
        return "endswith";
    else if (op === "*x*")
        return "contains";
    else if (op === "=")
        return "=";
    else
        return op;
}

function imgError(image) {
    image.onerror = "";
    image.src = "/images/proimg.jpg";
    return true;
}

(function ($) {
    if ($.fn.style) {
        return;
    }

    // Escape regex chars with \
    var escape = function (text) {
        return text.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&");
    };

    // For those who need them (< IE 9), add support for CSS functions
    var isStyleFuncSupported = !!CSSStyleDeclaration.prototype.getPropertyValue;
    if (!isStyleFuncSupported) {
        CSSStyleDeclaration.prototype.getPropertyValue = function (a) {
            return this.getAttribute(a);
        };
        CSSStyleDeclaration.prototype.setProperty = function (styleName, value, _priority) {
            this.setAttribute(styleName, value);
            let priority = typeof _priority != 'undefined' ? _priority : '';
            if (priority != '') {
                // Add priority manually
                var rule = new RegExp(escape(styleName) + '\\s*:\\s*' + escape(value) +
                    '(\\s*;)?', 'gmi');
                this.cssText =
                    this.cssText.replace(rule, styleName + ': ' + value + ' !' + priority + ';');
            }
        };
        CSSStyleDeclaration.prototype.removeProperty = function (a) {
            return this.removeAttribute(a);
        };
        CSSStyleDeclaration.prototype.getPropertyPriority = function (styleName) {
            var rule = new RegExp(escape(styleName) + '\\s*:\\s*[^\\s]*\\s*!important(\\s*;)?',
                'gmi');
            return rule.test(this.cssText) ? 'important' : '';
        }
    }

    // The style function
    $.fn.style = function (styleName, value, priority) {
        // DOM node
        var node = this.get(0);
        // Ensure we have a DOM node
        if (typeof node === 'undefined') {
            return this;
        }
        // CSSStyleDeclaration
        var style = this.get(0).style;
        // Getter/Setter
        if (typeof styleName !== 'undefined') {
            if (typeof value !== 'undefined') {
                // Set style property
                priority = typeof priority !== 'undefined' ? priority : '';
                style.setProperty(styleName, value, priority);
                return this;
            } else {
                // Get style property
                return style.getPropertyValue(styleName);
            }
        } else {
            // Get CSSStyleDeclaration
            return style;
        }
    };
})(jQuery);

var informaion = function (nam, val) {
    this.name = nam;
    this.value = val;
};

var BuilderMode = {
    NEW: "new",
    EDIT: "edit"
};
var EbGoogleMap = function (option) {
    this.propGrid = option.PGobj || null;
    this.data =  null;
    this.ssurl = option.ssurl;
    this.EbObject = option.dsobj || null;
    this.Refid = option.refid || null;
    this.tabNum = option.tabNum || 0;
    this.tableId = option.tableId || null;
    this.drake = null;
    this.PcFlag = false;
    this.login = option.login || "dc";
    this.relatedObjects = null;
    this.FD = false;
    this.MainData = option.data || null;
    this.isPipped = false;
    this.isContextual = false;
    this.filterValues = (option.filterValues !== "" && option.filterValues !== undefined && option.filterValues !== null) ? JSON.parse(decodeURIComponent(escape(window.atob(option.filterValues)))) : [];
    this.rowData = (option.rowData !== undefined && option.rowData !== null && option.rowData !== "") ? JSON.parse(decodeURIComponent(escape(window.atob(option.rowData)))) : null;
    this.isTagged = false;
    this.bot = false;
    this.cellData = option.cellData;
    this.filterHtml = "";
    this.isSecondTime = false;
    this.Mode = null;
    this.counter = option.counter || 0;
    this.TenantId = option.TenantId;
    this.UserId = option.UserId;
    this.googlekey = option.googlekey;
    this.Source = option.Source || "Visualization";

    if (this.Source === "Visualization") {
        let split_window = new splitWindow("parent-div0", "contBox");

        split_window.windowOnFocus = function (ev) {
            $("#Relateddiv").hide();
            if ($(ev.target).attr("class") !== undefined) {
                if ($(ev.target).attr("class").indexOf("sub-windows") !== -1) {
                    var id = $(ev.target).attr("id");
                    focusedId = id;
                }
            }
        }.bind(this);

        this.init = function () {
            if (this.EbObject === null) {
                this.EbObject = new EbObjects["EbGoogleMap"]("Container_" + Date.now());
                this.Mode = BuilderMode.NEW;
            }
            else
                this.Mode = BuilderMode.EDIT;
            if (this.MainData !== null)
                split_window.createContentWindow(this.EbObject.EbSid + "_" + this.tabNum + "_" + this.counter, "EbGoogleMap", prevfocusedId);
            else
                split_window.createContentWindow(this.EbObject.EbSid + "_" + this.tabNum + "_" + this.counter, "EbGoogleMap");
            if (this.propGrid === null) {
                this.CreatePg();
            }
            this.InitParamWindow();
            if (this.Mode === BuilderMode.EDIT)
                this.call2FD();
        };

        this.CreatePg = function () {
            this.propGrid = new Eb_PropertyGrid({
                id: "pp_inner",
                wc: "dc",
                cid: this.cid,
                $extCont: $(".ppcont")
            });
            this.propGrid.PropertyChanged = this.tmpPropertyChanged;
            this.propGrid.setObject(this.EbObject, AllMetas["EbGoogleMap"]);
        };

        this.InitParamWindow = function () {
            this.tableId = "dv" + this.EbObject.EbSid + "_" + this.tabNum + "_" + this.counter;
            this.ContextId = "filterWindow_" + this.tableId;
            this.FDCont = $(`<div id='${this.ContextId}' class='filterCont fd'></div>`);
            $("#parent-div0").before(this.FDCont);
            this.FDCont.hide();

            if (this.login === "dc") {
                this.stickBtn = new EbStickButton({
                    $wraper: this.FDCont,
                    $extCont: this.FDCont,
                    //$scope: $(subDivId),
                    icon: "fa-filter",
                    dir: "left",
                    label: "Parameters",
                    //btnTop: 42,
                    style: { top: "112px" }
                });
            }
        };

        this.tmpPropertyChanged = function (obj, Pname) {
            if (Pname === "DataSourceRefId") {
                if (obj[Pname] !== null) {
                    this.PcFlag = true;
                    this.EbObject.Columns.$values = [];
                    this.EbObject.DSColumns.$values = [];
                    this.EbObject.LatLong = null;
                    this.call2FD();
                }
            }
            else if (Pname === "Name") {
                $("#objname").text(obj.DisplayName);
            }
        }.bind(this);
    }

    this.init4Other = function () {
        this.Mode === BuilderMode.EDIT;
        this.getDataCall();
    }

    this.call2FD = function () {
        this.relatedObjects = this.EbObject.DataSourceRefId;
        $("#eb_common_loader").EbLoader("show");
        $.ajax({
            type: "POST",
            url: "../DV/dvCommon",
            data: { dvobj: JSON.stringify(this.EbObject), dvRefId: this.Refid, _flag: this.PcFlag, login: this.login, contextId: this.ContextId, _curloc: store.get("Eb_Loc-" + this.TenantId + this.UserId) },
            success: this.ajaxSucc
        });

    };

    this.ajaxSucc = function (text) {
        if (this.login === "uc")
            $("#ppcont").hide();
        if (this.MainData !== null) {
            $("#Pipped").show();
            $("#Pipped").text("Pipped From: " + this.EbObject.Pippedfrom);
            this.isPipped = true;
            //this.filterValues = dvcontainerObj.dvcol[prevfocusedId].filterValues;
        }
        else if (this.rowData !== null && this.rowData !== "") {
            this.isContextual = true;
        }
        else
            this.isTagged = true;

        $("#obj_icons").empty();
        $("#obj_icons").append("<button id='btnGo" + this.tabNum + "' class='btn commonControl'><i class='fa fa-play' aria-hidden='true'></i></button>");
        $("#btnGo" + this.tabNum).click(this.Getdata.bind(this));
        var subDivId = "#sub_window_dv" + this.EbObject.EbSid + "_" + this.tabNum + "_" + this.counter;
        $("#content_dv" + this.EbObject.EbSid + "_" + this.tabNum + "_" + this.counter).empty();
        this.filterHtml = text;

        this.FDCont = $("#filterWindow_" + this.tableId);
        $("#filterWindow_" + this.tableId).empty();
        $("#filterWindow_" + this.tableId).append("<div class='pgHead'> Param window <div class='icon-cont  pull-right' id='close_paramdiv_" + this.tableId + "'><i class='fa fa-thumb-tack' style='transform: rotate(90deg);'></i></div></div>");//
        $("#filterWindow_" + this.tableId).children().find('#close_paramdiv_' + this.tableId).off('click').on('click', this.CloseParamDiv.bind(this));
        $("#filterWindow_" + this.tableId).append(text);
        $("#filterWindow_" + this.tableId).children().find("#btnGo").click(this.Getdata.bind(this));

        this.FilterDialog = (typeof (FilterDialog) !== "undefined") ? FilterDialog : {};
        if (this.login === "uc") {
            this.stickBtn = new EbStickButton({
                $wraper: $(".dv-body"),
                $extCont: this.FDCont,
                $scope: $("#" + focusedId),
                icon: "fa-filter",
                dir: "left",
                label: "Parameters",
                //btnTop: 42,
                style: { position: "absolute", top: "41px" }
            });
        }

        if (typeof commonO !== "undefined")
            this.EbObject = commonO.Current_obj;
        else
            this.EbObject = dvcontainerObj.currentObj;

        if ($("#" + this.ContextId).children("#filterBox").length === 0) {
            this.FD = false;
            this.FDCont.hide();
            if (this.login === "dc") {
                this.stickBtn.hide();
            }
            else {
                dvcontainerObj.dvcol[focusedId].stickBtn.hide();
            }
            $("#btnGo" + this.tabNum).trigger("click");
            $("#eb_common_loader").EbLoader("hide");
        }
        else {
            this.FD = true;
            if (this.isPipped || this.isContextual) {
                this.placefiltervalues();
                $("#btnGo" + this.tabNum).trigger("click");
            }
            else {
                this.FDCont.show();
                this.FDCont.css("visibility", "visible");
            }
            $("#eb_common_loader").EbLoader("hide");
        }
        $(subDivId).focus();
        this.PcFlag = false;
    }.bind(this);

    this.CloseParamDiv = function () {
        this.stickBtn.minimise();
    };

    this.Getdata = function () {
        this.EbObject = this.EbObject;
        $.event.props.push('dataTransfer');
        this.CreateGoggleDiv();
        this.appendColumns();
        this.appendLatLong();
        if (this.login === "uc") {
            this.collapseGraph();
        }
        this.propGrid.ClosePG();
        if (this.FD)
            this.stickBtn.minimise();
        else
            this.stickBtn.hide();

        filterChanged = false;
        if (this.MainData !== null && !this.isSecondTime) {
            this.drawMapHelper(this.MainData.data);
        }
        else {
            if (this.login === "uc") {
                dvcontainerObj.currentObj.Pippedfrom = "";
                $("#Pipped").text("");
                this.isPipped = false;
            }
            if (this.isContextual) {
                if (this.isSecondTime) {
                    if (this.FilterDialog.IsFDValidationOK && !this.FilterDialog.IsFDValidationOK())
                        return;
                    this.filterValues = this.getFilterValues();
                }
            }
            else {
                if (this.FilterDialog.IsFDValidationOK && !this.FilterDialog.IsFDValidationOK())
                    return;
                this.filterValues = this.getFilterValues();
            }
            $("#eb_common_loader").EbLoader("show");
            this.getDataCall();
            this.isSecondTime = true;
        }
        this.GenerateButtons();

    };

    this.getDataCall = function () {
        $.ajax({
            type: 'POST',
            url: "../DV/getdata",
            data: { DataVizObjString: JSON.stringify(this.EbObject), draw: 1, RefId: this.EbObject.DataSourceRefId, Start: 0, Length: 50, TFilters: [], Params: this.filterValues, dvRefId: this.Refid },
            //beforeSend: function (xhr) {
            //    xhr.setRequestHeader("Authorization", "Bearer " + getToken());
            //},
            success: this.getDataSuccess.bind(this),
            error: function () { }
        });
    };

    this.getFilterValues = function () {
        var fltr_collection = [];

        if (this.FD)
            fltr_collection = getValsForViz(this.FilterDialog.FormObj);

        return fltr_collection;
    };

    this.CreateGoggleDiv = function () {
        $("#content_" + this.tableId).empty();
        $("#content_" + this.tableId).append(
            `<div id='graphcontainer_tab${this.tableId}' style='height:inherit;' class='chartCont'>
                <div class='col-md-2 no-padd' id='columnsDisplay${this.tableId}' style='height:inherit;'>
                <div class='tag-cont'>
                  <div class='tag-wraper'><div class='pgHead'>Data</div><div class='tag-scroll'><div id='ColumnCont${this.tableId}'></div>
                    <ul id="data-table-list_${this.tableId}" class="tool-box-items">
                        <li>
                            <a>Columns</a>
                            <ul id="Columns${this.tableId}"></ul>
                        </li>
                    </ul>
                </div></div>
                </div>
                </div>
                <div class='col-md-10 canvasParentDiv' id='canvasParentDiv${this.tableId}'>
                    <div id='xy${this.tableId}' style='vertical-align: top;'> 
                        <div class='input-group' >
                            <span class='input-group-addon' id='basic-addon3'> LatLong</span> 
                            <div class='form-control' style='padding: 4px;height:33px' id='LatLong${this.tableId}' ></div> 
                        </div>                
                    </div> 
                <div id='canvasDiv${this.tableId}' class="canvasstyle" ><canvas id='myChart${this.tableId}'></canvas></div> 
                </div> 
                </div>`);
    };

    this.getDataSuccess = function (result) {
        if (this.Source === "Visualization") {
            $("#eb_common_loader").EbLoader("hide");
            if (this.login === "uc")
                dvcontainerObj.currentObj.data = result;
        }
        this.MainData = result;
        this.data = result.data;
        this.formatedData = result.formattedData;
        this.drawMapHelper();
    };

    this.GenerateButtons = function () {
        $("#objname").text(this.EbObject.DisplayName);
        $("#obj_icons").empty();
        $("#obj_icons").append("<button id='btnGo" + this.tableId + "' class='btn commonControl'><i class='fa fa-play' aria-hidden='true'></i></button>");
        $("#btnGo" + this.tableId).click(this.Getdata.bind(this));
        $("#obj_icons").append(`           
            <button id='btnColumnCollapse${ this.tableId}' class='btn' style='display: inline-block;'>
            <i class="fa fa-cogs" aria-hidden="true"></i>
            </button>`);

        if (this.login === "uc") {
            dvcontainerObj.modifyNavigation();
            $(`#btnColumnCollapse${this.tableId}`).hide();
        }
        this.bindEvents();

        if (this.bot) {
            $("#columnsDisplay" + this.tableId).empty();
            $("#columnsDisplay" + this.tableId).append(`<div class="pgHead">User:<label></label></div>`);
            $("#xy" + this.tableId).hide();
            $(".toolicons").hide();
            $("#canvasParentDiv" + this.tableId).removeClass("col-md-10").addClass("col-md-9");
            $("#columnsDisplay" + this.tableId).removeClass("col-md-2").addClass("col-md-3").addClass("botdata_cont").show();

        }
    };

    this.bindEvents = function () {
        $("#btnColumnCollapse" + this.tableId).off("click").on("click", this.collapseGraph.bind(this));
    };

    this.appendColumns = function () {
        this.appendColumns4Google();
        $('#data-table-list_' + this.tableId).killTree();
        $('#data-table-list_' + this.tableId).treed();
        $('#data-table-list_' + this.tableId + ' .branch a').trigger("click");
        this.updateDragula();
    };

    this.appendColumns4Google = function () {
        let temparray = [];
        if (this.EbObject.LatLong)
            temparray = this.EbObject.Columns.$values.filter((obj) => obj.name !== this.EbObject.LatLong.name);
        else
            temparray = this.EbObject.Columns.$values;
        $.each(temparray, function (i, obj) {
            this.AppendColumnInsideFn(obj);
        }.bind(this));
    };

    this.AppendColumnInsideFn = function (obj) {
        if (obj.Type === 16)
            _classname = "fa-font";
        else if (obj.Type === 5 || obj.Type === 6)
            _classname = "fa-calendar";
        else if (obj.Type === 8 || obj.Type === 7 || obj.Type === 11 || obj.Type === 12)
            _classname = "fa-sort-numeric-asc";

        $("#Columns" + this.tableId).append(`<li class='colTiles' style='display: list-item;' id='li${obj.name}' data-id='${obj.data}' data-type=${obj.Type}><span><i class='fa ${_classname}'></i></span>${obj.name}</li>`);
    };

    this.appendLatLong = function () {
        if (this.EbObject.LatLong !== null) {
            let obj = this.EbObject.LatLong;
            $("#LatLong" + this.tableId).empty();
            $("#LatLong" + this.tableId).append("<li class='colTiles columnDrag' id='li" + obj.name + "' data-id='" + obj.data + "' data-type='" + obj.Type + "'>" + obj.name + "<button class='close' type='button'>x</button></li>");

        }
        $("#LatLong" + this.tableId + " button[class=close]").off("click").on("click", this.RemoveAndAddToColumns.bind(this));
    };

    this.updateDragula = function (status) {
        if (this.drake)
            this.drake.destroy();
        this.drake = new dragula([document.getElementById("Columns" + this.tableId), document.getElementById("LatLong" + this.tableId)], {
            accepts: this.acceptDrop1.bind(this)
        });
        this.drake.off("drop").on("drop", this.colDrop.bind(this));
        this.propGrid.setObject(this.EbObject, AllMetas["EbGoogleMap"]);
    };

    this.acceptDrop1 = function (el, target, source, sibling) {
        if ($(source).attr("id") === "Columns" + this.tableId && $(target).attr("id") === "LatLong" + this.tableId) {
            if ($(target).children().length > 0) {
                return false;
            }
            else
                return true;
        }
        return false;
    };

    this.colDrop = function (el, target, source, sibling) {
        $(el).addClass("columnDrag");
        $(el).children("span").remove();
        $(el).children(".close").remove();
        var temp;
        $(el).css("display", "inline-block");
        var name = $(el).text();
        $(el).append("<button class='close' type='button'>x</button>");

        
        if ($(target).attr("id") === "LatLong" + this.tableId) {
            let temp = $.grep(this.EbObject.Columns.$values, function (obj) { return obj.name === name; });
            this.EbObject.LatLong = temp[0];
            this.drawMapHelper(this.data);
        }
        $("#LatLong" + this.tableId + " button[class=close]").off("click").on("click", this.RemoveAndAddToColumns.bind(this));
    };

    this.RemoveAndAddToColumns = function (e) {
        var str = $(e.target).parent().text();
        let tempObj = new Object();
        tempObj.Type = parseInt($(e.target).parent().attr("data-type"));
        tempObj.name = str.substr(0, str.length - 1).trim();
        tempObj.data = $(e.target).parent().attr("data-id");

        this.AppendColumnInsideFn(tempObj);
        $(e.target).parent().remove();

        this.EbObject.LatLong = null;
        $("#map" + this.tableId).remove();
        $("#myChart" + this.tableId).remove();
        $("#canvasDiv" + this.tableId).append("<canvas id='myChart" + this.tableId + "' width='auto' height='auto'></canvas>");
    };

    this.drawMapHelper = function (datain) {
        if (datain)
            this.data = datain;
        if (this.EbObject.LatLong !== null)
            this.drawMap();
    };

    this.drawMap = function () {
        this.getData4GoogleMap();
        $("#canvasDiv" + this.tableId).children("iframe").remove();
        $("#myChart" + this.tableId).remove();
        if ($("#map" + this.tableId).children().length === 0)
            $("#canvasDiv" + this.tableId).append("<div id='map" + this.tableId + "' style='height:100%;width:100%;'></div>");
        Xlabel = this.XLabel;
        Ylabel = this.YLabel;
        showRoute = this.EbObject.ShowRoute;
        if (!this.isMyScriptLoaded("https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js")) {
            $("#layout_div").prepend(`
            <script data-hai="aa" src= 'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js' ></script>
            <script data-hai="aa" async defer
                src='https://maps.googleapis.com/maps/api/js?key=${this.googlekey}&callback=initMap2'>
            </script>`);
        }
        else {
            $("#map" + this.tableId).empty();
            initMap2();
        }
        if (this.login === "uc")
            $(".canvasParentDiv").css("padding", " 10px 0px");
        $("#eb_common_loader").EbLoader("hide");
    };

    this.getData4GoogleMap = function () {
        if (this.EbObject.LatLong !== null) {
            this.getData4LatLong();
            this.getData4MarkerLabel();
            this.getData4InfoWindow();

            if (this.EbObject.Zoomlevel)
                this.zoomlevel = this.EbObject.Zoomlevel;
            this.showRoute = this.EbObject.ShowRoute;
            this.AutoZoom = this.EbObject.AutoZoom;
            this.MarkerLink = this.EbObject.MarkerLink;

            if (this.EbObject.FormParameter.$values.length > 0) {
                let obj = this.EbObject.FormParameter.$values[0];
                $.each(this.data, function (k, value) {
                    this.markerParams.push(new fltr_obj(obj.Type, obj.name, value[obj.data]));
                }.bind(this));
                Te_id = TenantId;
                Usr_id = UserId;
            }
        }
    };

    this.getData4LatLong = function () {
        this.Lat = [], this.Long = [];

        $.each(this.data, function (k, value) {
            if (value[this.EbObject.LatLong.data] && value[this.EbObject.LatLong.data] !== "0,0") {
                let _data = value[this.EbObject.LatLong.data].split(",");
                this.Lat.push(_data[0]);
                this.Long.push(_data[1]);
            }
        }.bind(this));
    };

    this.getData4MarkerLabel = function () {
        let ml = [];
        if (this.EbObject.MarkerLabel) {
            $.each(this.EbObject.MarkerLabel.$values, function (i, obj) {
                if (i === 0)
                    ml.push(obj.data);
            });

            if (ml.length > 0) {
                $.each(this.data, function (i, value) {
                    this.markLabel.push(value[ml[0]].charAt(0));
                }.bind(this));
            }
        }
    };

    this.getData4InfoWindow = function () {
        this.Inform = [];
        if (this.EbObject.InfoWindow) {
            $.each(this.EbObject.InfoWindow.$values, function (i, obj) {
                let info = [];
                $.each(this.formatedData, function (k, value) {
                    info.push(value[obj.data]);
                });
                this.Inform.push(new informaion(obj.name, info));
            }.bind(this));
        }
    };

    window.initMap2 = function () {
        let google = window.google;
        if (this.Lat.length > 0) {
            var infowindow = new google.maps.InfoWindow();
            var directionsService = new google.maps.DirectionsService();
            var directionsDisplay = new google.maps.DirectionsRenderer();
            var bounds = new google.maps.LatLngBounds();
            var mid = Math.floor(this.Lat.length / 2);
            var map = new google.maps.Map(document.getElementById('map' + this.tableId), {
                center: new google.maps.LatLng(this.Lat[mid], this.Long[mid]),
                gestureHandling: 'greedy'
                // mapTypeId: google.maps.MapTypeId.ROADMAP
            });
            if (!this.AutoZoom)
                map.setZoom(this.zoomlevel);
            directionsDisplay.setMap(map);
            var request = {
                travelMode: google.maps.TravelMode.DRIVING
            };
            var marker, i;
            for (i = 0; i < this.Lat.length; i++) {
                var latlng = new google.maps.LatLng(this.Lat[i], this.Long[i]);

                marker = new google.maps.Marker({
                    position: latlng,
                    map: map,
                    //label: markLabel[i]
                });

                if (i === 0) request.origin = marker.getPosition();
                else if (i === this.Lat.length - 1) request.destination = marker.getPosition();
                else {
                    if (!request.waypoints) request.waypoints = [];
                    request.waypoints.push({
                        location: marker.getPosition(),
                        stopover: true
                    });
                }

                var content = "", url = "";
                $.each(this.Inform, function (k, obj) {
                    content += obj.value[i] + "</br>";
                });
                if (this.MarkerLink) {
                    let _lang = ebcontext.languages.getCurrentLanguageCode();
                    url = `../webform/index?_r=${MarkerLink}&_p=${btoa(JSON.stringify([this.markerParams[i]]))}&_m=1&_l=${store.get("Eb_Loc-" + Te_id + Usr_id)}&_lg=${_lang}`;
                    content += `<a href="#" onclick='window.open("${url}","_blank");'>Details</a>`;
                }
                if (content === "")
                    content = "no details";
                infowindow.setContent(content);
                infowindow.setOptions({ maxWidth: 200 });

                google.maps.event.addListener(marker, 'mouseover', (function (marker, content, infowindow) {
                    return function () {
                        infowindow.setContent(content);
                        infowindow.open(map, marker);
                    };
                })(marker, content, infowindow));

                marker.addListener('click', function () {
                    if (url !== "")
                        window.open(url, "_blank");
                });
                map.addListener('click', function () {
                    infowindow.close(map, marker);
                });
                if (this.AutoZoom)
                    bounds.extend(latlng);
            }
            if (this.showRoute) {
                directionsService.route(request, function (result, status) {
                    if (status === google.maps.DirectionsStatus.OK) {
                        directionsDisplay.setDirections(result);
                    }
                });
            }
            if (this.AutoZoom)
                map.fitBounds(bounds);
        }
        else {
            $(`#map${this.tableId}`).append("<div class='map_inner'>No Data Available</div>");
        }

    }.bind(this);

    this.isMyScriptLoaded = function (url) {
        var scripts = document.getElementsByTagName('script');
        for (var i = scripts.length; i--;) {
            if (scripts[i].src === url) return true;
        }
        return false;
    };

    this.collapseGraph = function () {
        $("#columnsDisplay" + this.tableId).toggle();
        $("#xy" + this.tableId).toggle();
        if ($("#columnsDisplay" + this.tableId).css("display") === "none") {
            $("#canvasParentDiv" + this.tableId).removeClass("col-md-10").addClass("col-md-12");
            $("#canvasDiv" + this.tableId).css("height", "100%");
        }
        else {
            $("#canvasParentDiv" + this.tableId).removeClass("col-md-12").addClass("col-md-10");
            $("#canvasDiv" + this.tableId).css("height", "calc(100% - 67px)");
        }
    };
    if (this.Source === "Visualization")
        this.init();
    else
        this.init4Other();

};

$.fn.extend({
    treed: function (o) {
        var openedClass = 'fa-minus-square-o';
        var closedClass = 'fa-plus-square-o';
        var ic = o || 'fa-plus-square-o';

        if (typeof o !== 'undefined') {
            if (typeof o.openedClass !== 'undefined') {
                //openedClass = o.openedClass;
            }
            if (typeof o.closedClass !== 'undefined') {
                //closedClass = o.closedClass;
            }
        }
        var tree = $(this);
        tree.addClass("tree");
        tree.find('li').has("ul").each(function () {
            var branch = $(this);
            branch.prepend("<i class='indicator fa " + ic + "'></i>");
            branch.addClass('branch');
            branch.off("click").on('click', function (e) {
                if (this === e.target) {
                    var icon = $(this).children('i:first');
                    icon.toggleClass(openedClass + " " + closedClass);
                    $(this).children().children().toggle();
                }
            });
            branch.children().children().toggle();
        });
        tree.find('.branch .indicator').each(function () {
            $(this).off("click").on('click', function (e) {
                $(this).closest('li').click();
            });
        });
        tree.find('.branch>a').each(function () {
            $(this).off("click").on('click', function (e) {
                $(this).closest('li').click();
                e.preventDefault();
            });
        });
        tree.find('.branch>button').each(function () {
            $(this).off("off").on('click', function (e) {
                $(this).closest('li').click();
                e.preventDefault();
            });
        });
    }
});

$.fn.extend({
    killTree: function (o) {
        var tree = $(this);
        tree.removeClass("tree");
        tree.find('li').has("ul").each(function () {
            var branch = $(this);
            branch.children().children().show();
            branch.children("i").remove();
            branch.removeClass('branch');
            branch.off("click");
        });
    }
});
let DashBoardViewWrapper = function (options) {
    this.Version = options.Version;
    this.ObjType = options.ObjType;
    this.EbObject = options.dvObj || null;
    this.Statu = options.Statu;
    this.TileCollection = {};
    this.CurrentTile;
    this.Wc = options.Wc;
    this.Cid = options.Cid;
    this.objGrid;
    this.googlekey = options.googlekey || null;
    this.DashBoardList = options.AllDashBoards || null;
    this.stickBtn;
    this.filtervalues = [];
    this.TabNum = options.tabNum ? options.tabNum : 0;
    this.rowData = options.rowData ? JSON.parse(decodeURIComponent(escape(window.atob(options.rowData)))) : null;
    this.FilterVal = options.filterValues ? JSON.parse(decodeURIComponent(escape(window.atob(options.filterValues)))) : [];
    this.filterDialogRefid = this.EbObject.Filter_Dialogue ? this.EbObject.Filter_Dialogue : "";
    this.Procs = {};
    this.Rowdata = {};
    this.loader = $("#eb_common_loader");
    this.IsRendered = false;
    this.GridStackInit = function () {
        grid = GridStack.init({ resizable: { handles: 'e, se, s, sw, w' }, column: 40, float: true });
        grid.on('gsresizestop', this.Redrawfn.bind(this));
        //grid.on('dragstart', this.DragStartFn.bind(this));
        //grid.on('dragstop', this.DragStopFn.bind(this));
        grid.cellHeight(20);
    };



    this.Redrawfn = function (items, element) {
        var newHeight = $(element).attr('data-gs-height');
        var id = $(element).context.children[0].id;
        this.RedrwFnHelper(id);
    };

    this.RedrwFnHelper = function (id) {
        let currentobj = this.TileCollection[id];
        var height = $(`[data-id=${id}`).height();
        $.each(currentobj.ControlsColl.$values, function (i, obj) {
            $(`[data-id=${id}] #${obj.EbSid}`).css("max-height", `${height} !important`);
            var eb_type = obj.$type.split('.').join(",").split(',')[2].split("Eb")[1];
            //this.labelstyleApplylabelstyleApply(this.CurrentTile);
            if (eb_type === "Gauge") {
                if (obj.DataObjCtrlName === "" || obj.DataObjColName === "") {
                    let xx = EbGaugeWrapper(obj, { isEdit: false });
                }
                this.GaugeDrop(obj.DataObjCtrlName, obj.DataObjColName, obj.EbSid, "Gauge");
            }
            else if (eb_type === "SpeedoMeter") {
                if (obj.DataObjCtrlName === "" || obj.DataObjColName === "") {
                    let xx = SpeedoMeterWrapper(obj, { isEdit: false });
                }
                this.GaugeDrop(obj.DataObjCtrlName, obj.DataObjColName, obj.EbSid, "speedometer");
            }
            else if (eb_type === "ProgressGauge") {
                if (obj.DataObjCtrlName === "" || obj.DataObjColName === "") {
                    let xx = ProgressGaugeWrapper(obj, { isEdit: false });
                }
                $(`#${obj.EbSid}`).css("max-width", $(`#${obj.EbSid}`).height() + 10 + "px");
                this.GaugeDrop(obj.DataObjCtrlName, obj.DataObjColName, obj.EbSid, "ProgressGauge");
            }
        }.bind(this));

    };

    this.GridStackInit();


    //Filter Dialogue
    this.getColumns = function () {
        this.loader.EbLoader("show");
        $.post("../DashBoard/GetFilterBody", { dvobj: JSON.stringify(this.EbObject), contextId: "paramdiv" }, this.AppendFD.bind(this));
    };

    this.AppendFD = function (result) {
        $(".form-group #filter-dg").remove();
        $(".form-group").prepend(`<button class="btn filter_menu" id="filter-dg">
                                    <i class="fa fa-filter" aria-expanded="false"></i>
                                </button>`);
        this.loader.EbLoader("hide");
        $('.db-user-filter').remove();
        $("#dashbord-user-view").prepend(`
                <div id='paramdiv-Cont${this.TabNum}' class='db-user-filter'>
                <div id='paramdiv${this.TabNum}' class='param-div fd'>
                    <div class='pgHead'>
                        <h6 class='smallfont' style='font-size: 12px;display:inline'>Filter</h6>
                        <div class="icon-cont  pull-right" id='close_paramdiv${this.TabNum}'><i class="fa fa-times" aria-hidden="true"></i></div>
                    </div>
                    </div>
                    </div>
                `);
        $('#paramdiv' + this.TabNum).append(result);
        this.FilterObj = (typeof (FilterDialog) !== "undefined") ? FilterDialog : {};
        if (this.FilterVal.length > 0) {
            //this.filterValues = this.FilterVal;
            //this.placefiltervalues();
            $.each(getFlatCtrlObjs(this.FilterObj.FormObj), function (i, obj) {
                var mapobj = getObjByval(this.FilterVal, "Name", obj.Name);
                if (typeof mapobj !== "undefined") {
                    let val = mapobj.Value;
                    obj.setValue(val);
                }
            }.bind(this));
        }
        $('#close_paramdiv' + this.TabNum).off('click').on('click', this.CloseParamDiv.bind(this));
        $("#btnGo").off("click").on("click", this.GetFilterValues.bind(this));
        $("#btnGo").empty().append("Apply");
        if (typeof FilterDialog !== "undefined") {
            $(".param-div-cont").show();
            //this.stickBtn = new EbStickButton({
            //    $wraper: $(".db-user-filter"),
            //    $extCont: $(".db-user-filter"),
            //    icon: "fa-filter",
            //    dir: "left",
            //    label: "Parameters",
            //    style: { top: "85px" },
            //    delay:1
            //});
            this.filterDialog = FilterDialog;
            //this.placefiltervalues();
            //if (this.FilterObj.FormObj.AutoRun) {
            //    if (!this.IsRendered) $("#btnGo").trigger("click");
            //    this.CloseParamDiv();
            //}
            $("#filter-dg").off("click").on("click", this.toggleFilter.bind(this));
        }
        else {
            $(".param-div-cont").hide();
            this.filterDialog = null;
        }
    };

    this.toggleFilter = function () {
        $(".db-user-filter").toggle('drop', { direction: 'right' }, 150);
    };

    this.CloseParamDiv = function () {
        $(".db-user-filter").hide(300);
    };

    this.placefiltervalues = function () {
        $.each(getFlatCtrlObjs(this.FilterObj.FormObj), function (i, obj) {
            var mapobj = getObjByval(this.FilterVal, "Name", obj.Name);
            if (typeof mapobj !== "undefined") {
                let val = mapobj.Value;
                obj.setValue(val);
            }
        }.bind(this));
    };


    this.DashboardDropdown = function () {
        let k = Object.keys(this.DashBoardList);
        let html = [`<div id="UserDashBoardSwitchList" class="DropMenuUserDash"  hide>`];
        ebcontext.header.setNameAsHtml(`<button class="DropDown4DB" id="UserDashBoardSwitchBtn"> ${this.EbObject.DisplayName} <span class="caret"></span> </button> `);
        for (let i = 0; i < k.length; i++) {
            if (this.DashBoardList[k[i]].RefId) {
                html.push(`<div style="padding:3px;"> <button class="Btn4SwitchDB btn btn-default" type="button" value="${this.DashBoardList[k[i]].RefId}">${this.DashBoardList[k[i]].DisplayName} </button></div>`);
            }
        }
        html.push("</div>");
        $("body").append(html.join(""));
        $('#objname #DashBoardObjectSelection').val(this.EbObject.RefId);
        $('.Btn4SwitchDB').off("click").on("click", this.DashBoardSwitch.bind(this));
        $('#objname #UserDashBoardSwitchBtn').off("click").on("click", this.DashBoardSwitchMenuShow.bind(this));
        $('#objname #UserDashBoardSwitchBtn').off("focusout").on("focusout", this.DashBoardSwitchMenuHide.bind(this));
    };

    this.DashBoardSwitchMenuShow = function () {
        var p = $("#UserDashBoardSwitchBtn").last();
        var offset = p.offset();
        $("#UserDashBoardSwitchList").css({ "top": (offset.top + 18), "left": offset.left });
        $("#UserDashBoardSwitchList").toggle();

    }
    this.DashBoardSwitchMenuHide = function () {
        // $("#UserDashBoardSwitchList").hide();

    }

    this.DashBoardSwitch = function (e) {
        $('.Btn4SwitchDB').removeAttr("disabled");
        let refid = e.target.getAttribute("value");
        $(`[Value=${refid}]`).attr("disabled", true);
        grid.removeAll();
        this.Version = this.DashBoardList[refid].VersionNumber;
        this.EbObject = this.DashBoardList[refid];
        this.Statu = this.DashBoardList[refid].Status;
        this.TileCollection = {};
        this.CurrentTile;
        this.filterDialogRefid = this.EbObject.Filter_Dialogue ? this.EbObject.Filter_Dialogue : "";
        this.init();
    }

    this.init = function () {
        this.loader.EbLoader("show");
        $(".grid-stack").removeAttr("style");
        if (this.DashBoardList) {
            this.DashboardDropdown();
        }
        else if (this.EbObject !== null) {
            //ebcontext.header.setName(this.EbObject.DisplayName);
            $("#objname").empty().append(this.EbObject.DisplayName);
        }
        else {
            this.loader.EbLoader("hide");
        }
        if (this.EbObject.RefId != "") $(`[Value=${this.EbObject.RefId}]`).attr("disabled", true);
        $("title").empty().append(this.EbObject.DisplayName);
        //
        if (this.EbObject.Filter_Dialogue === null || this.EbObject.Filter_Dialogue === undefined || this.EbObject.Filter_Dialogue === "" && this.EbObject.Tiles.$values.length !== 0) {
            this.EbObject.Filter_Dialogue = "";
            $('.db-user-filter').remove();
            $(".form-group #filter-dg").remove();
            grid.removeAll();
            this.GetFilterValuesForDataSource();
            this.DrawTiles();
        }
        else if (this.EbObject.Tiles.$values.length !== 0) {
            this.getColumns();
        }
        else {
            this.loader.EbLoader("hide");
        }
        let header = new EbHeader();
        header.clearHeader();
        header.addRootObjectHelp(this.EbObject);
        header.insertButton(`<button id="dashboard-refresh-btn" class='btn' title='Refresh'><i class="fa fa-refresh" aria-hidden="true"></i></button>`);
        $("#dashbord-user-view").off("click").on("click", ".tile-opt", this.TileOptions.bind(this));
        $("#dashboard-refresh-btn").off("click").on("click", this.DashBoardRefresh.bind(this));
        $(".link-dashboard-pane").off("click").on("click", this.TileslinkRedirectFn.bind(this));
        //$(".ext-linktoform").off("click").on("click", this.TileslinkRedirectFn.bind(this));
    }
    this.DashBoardRefresh = function () {
        this.IsRendered = false;
        grid.removeAll();
        this.init();
    };

    this.TileslinkRedirectFn = function (e) {
        let id = e.target.id;
        let href;
        if (id != "") {
            href = $(`#${id} .link-target`).attr('href');
        }
        //let href = e.target.attr('href');
        if (href === undefined) {
            id = e.target.parentElement.getAttribute("id");
            href = $(`#${id} .link-target`).attr('href');
        }
        if (href === undefined) {
            id = e.target.parentElement.parentElement.id;
            href = $(`#${id} .link-target`).attr('href');
        }
        if (href != undefined) {
            window.open(href, '_blank');
        }
    };
    this.DrawTiles = function () {
        grid.removeAll();
        this.Procs = {};
        //$("#layout_div").css("background-color", "").css("background-color", this.EbObject.BackgroundColor);
        Eb_Dashboard_Bg(this.EbObject);
        if (this.EbObject.Tiles.$values.length > 0) {
            for (let i = 0; i < this.EbObject.Tiles.$values.length; i++) {
                let currentobj = this.EbObject.Tiles.$values[i];
                let tile_id = "t" + i;
                let t_id = "tile" + i;
                let x = this.EbObject.Tiles.$values[i].TileDiv.Data_x;
                let y = this.EbObject.Tiles.$values[i].TileDiv.Data_y;
                let dh = this.EbObject.Tiles.$values[i].TileDiv.Data_height;
                let dw = this.EbObject.Tiles.$values[i].TileDiv.Data_width;
                grid.addWidget(`<div id="${tile_id}"> 
                    <div class="grid-stack-item-content usr" id=${t_id}>
                    <div style="display:flex" class="db-title-parent tile-header">
                    <div class="db-title" name-id="${t_id}" style="display:flex"></div>
                    <div style="float:right;display:flex" u-id="${t_id}">
                    <i class="fa fa-retweet tile-opt i-opt-restart" aria-hidden="true" link="restart-tile" id="${this.TabNum}_restart_${t_id}"></i>
                    <i class="fa fa-external-link tile-opt i-opt-obj" aria-hidden="true" link="ext-link" id="${this.TabNum}_link_${t_id}"></i>
                    </div></div>
                    <div data-id="${t_id}" class="db-tbl-wraper tile_dt_cont_view">
                    </div></div></div>`, x, y, dw, dh, false);
                this.CurrentTile = t_id;
                this.TileCollection[t_id] = this.EbObject.Tiles.$values[i];
                let refid = this.EbObject.Tiles.$values[i].RefId;
                Eb_Tiles_StyleFn(this.TileCollection[this.CurrentTile], this.CurrentTile, this.TabNum);
                if (refid !== "") {
                    this.loader.EbLoader("show");
                    $(`[data-id = ${this.CurrentTile}]`).css("display", "block");
                    $.ajax(
                        {
                            url: '../DashBoard/DashBoardGetObj',
                            type: 'POST',
                            data: { refid: refid },
                            error: function (request, error) {
                                this.loader.EbLoader("hide");
                                EbPopBox("show", {
                                    Message: "Failed to get data from DataSourse",
                                    ButtonStyle: {
                                        Text: "Ok",
                                        Color: "white",
                                        Background: "#508bf9",
                                        Callback: function () {
                                            //$(".dash-loader").hide();
                                        }
                                    }
                                });
                            }.bind(this),
                            success: this.TileRefidChangesuccess.bind(this, this.CurrentTile)
                        });
                }
                else {
                    this.loader.EbLoader("show");
                    $(`#${this.TabNum}_restart_${t_id}`).remove();
                    $(`#${this.TabNum}_link_${t_id}`).remove();
                    $(`#${t_id}`).attr("eb-type", "gauge");
                    $(`#${t_id} .tile-header`).removeClass("tile-header");

                    this.waitDrawTiles = false;
                    this.EbObject.__continueDrawTiles = this.continueDrawTiles.bind(this, currentobj, t_id, tile_id);
                    $.each(currentobj.ComponentsColl.$values, function (i, Cobj) {
                        if (!this.Procs.hasOwnProperty(Cobj.EbSid)) {
                            this.Procs[Cobj.EbSid] = Cobj;
                            var Cobject = new EbObjects["EbDataObject"](Cobj.EbSid);
                            $.extend(Cobject, Cobj);
                            this.ComponentDrop("#component_cont", Cobject);
                            this.GetComponentColumns(Cobject);
                        }
                    }.bind(this));

                    if (!this.waitDrawTiles)
                        this.EbObject.__continueDrawTiles();
                }

            }
            //this.addTilecontext()
            //this.Tilecontext();
            grid.movable('.grid-stack-item', false);
            grid.resizable('.grid-stack-item', false);
        }
        else {
            //this.GridStackInit
            grid.movable('.grid-stack-item', false);
            grid.resizable('.grid-stack-item', false);
            this.loader.EbLoader("hide");
        }
    };

    this.continueDrawTiles = function (currentobj, t_id, tile_id) {
        this.EbObject.__continueDrawTiles = null;
        $.each(currentobj.ControlsColl.$values, function (i, obj) {
            var eb_type = obj.$type.split('.').join(",").split(',')[2].split("Eb")[1];
            this.makeElement(eb_type, obj);
            let object = this.Procs[this.currentId];
            this.TileCollection[t_id].ControlsColl.$values[i] = object;
            $(`[data-id="${this.CurrentTile}"]`).append(object.$Control[0]);
            //this.labelstyleApply(this.CurrentTile);
            if (eb_type === "Gauge") {
                if (object.DataObjCtrlName === "" || object.DataObjColName === "") {
                    let xx = EbGaugeWrapper(obj, { isEdit: false });
                }
                this.GaugeDrop(object.DataObjCtrlName, object.DataObjColName, object.EbSid, "Gauge");
            }
            else if (eb_type === "SpeedoMeter") {
                if (object.DataObjCtrlName === "" || object.DataObjColName === "") {
                    let xx = SpeedoMeterWrapper(obj, { isEdit: false });
                    this.loader.EbLoader("hide");
                }
                this.GaugeDrop(object.DataObjCtrlName, object.DataObjColName, object.EbSid, "speedometer");
            }
            else if (eb_type === "ProgressGauge") {
                if (object.DataObjCtrlName === "" || object.DataObjColName === "") {
                    let xx = ProgressGaugeWrapper(obj, { isEdit: false });
                }
                $(`#${object.EbSid}`).css("max-width", $(`#${object.EbSid}`).height() + 10 + "px");
                this.GaugeDrop(object.DataObjCtrlName, object.DataObjColName, object.EbSid, "ProgressGauge");
            }
        }.bind(this));
        Eb_Tiles_StyleFn(this.TileCollection[this.CurrentTile], this.CurrentTile, this.TabNum);
        $.each(currentobj.LabelColl.$values, function (i, obj) {

            if (currentobj.HiddenExpr && currentobj.HiddenExpr.Code && currentobj.HiddenExpr.Lang == 0) {
                try {
                    let valRes = new Function('Rowdata', `event`, atob(currentobj.HiddenExpr.Code)).bind(currentobj, this.Rowdata)();
                    if (valRes) {
                        $(`#${this.CurrentTile}`).hide();
                        return;
                    }
                }
                catch (e) {
                    console.error(e);
                }
            }

            var eb_type = obj.$type.split('.').join(",").split(',')[2].split("Eb")[1];
            this.makeElement(eb_type, obj);
            this.LabelDrop(obj.DataObjCtrlName, obj.DataObjColName, obj.EbSid);
            let object = this.Procs[this.currentId];
            let designHtml = this.MakeDashboardLabel(object);
            $(`[data-id="${this.CurrentTile}"]`).append(designHtml);
            this.labelstyleApply(this.CurrentTile);
            EbDataLabelFn(obj, this.CurrentTile);
            if (obj.Object_Selector)
                $(`[data-id="${this.CurrentTile}"] .label-cont`).off("click").on("click", this.DisplayBlockLink.bind(this))
            this.TileCollection[t_id].LabelColl.$values[i] = object;
        }.bind(this));
        if (currentobj.LinksColl) {
            $.each(currentobj.LinksColl.$values, function (i, obj) {

                if (currentobj.HiddenExpr && currentobj.HiddenExpr.Code && currentobj.HiddenExpr.Lang == 0) {
                    try {
                        let valRes = new Function('Rowdata', `event`, atob(currentobj.HiddenExpr.Code)).bind(currentobj, this.Rowdata)();
                        if (valRes) {
                            $(`#${this.CurrentTile}`).hide();
                            return;
                        }
                    }
                    catch (e) {
                        console.error(e);
                    }
                }

                this.loader.EbLoader("show");
                var eb_type = obj.$type.split('.').join(",").split(',')[2].split("Eb")[1];
                this.makeElement(eb_type, obj);
                let object = this.Procs[this.currentId];
                let designHtml = this.MakeLinks(object);
                $(`[data-id="${this.CurrentTile}"]`).append(designHtml);
                $(`#${this.CurrentTile}`).addClass("eb-tile-link");
                //$(`#${this.CurrentTile} .db-title-parent`).addClass("eb-tile-link");//
                $(`#${this.CurrentTile} .db-title-parent`).css("display", "none");
                $(`#${this.CurrentTile} .db-title`).addClass("eb-tile-link");
                $(`#${tile_id}`).removeClass('ext-linktoform').addClass('ext-linktoform');
                this.labelstyleApply(this.CurrentTile);
                LinkStyle(obj, this.CurrentTile, this.TabNum, this.GetFilterValuesForDataSource());
                this.TileCollection[t_id].LinksColl.$values[i] = object;
                this.loader.EbLoader("hide");
                $(".link-dashboard-pane").off("click").on("click", this.TileslinkRedirectFn.bind(this));
                //$(".ext-linktoform").off("click").on("click", this.TileslinkRedirectFn.bind(this));
            }.bind(this));
        }
        if (currentobj.Transparent) {
            this.labelstyleApply(this.CurrentTile);
        }
        this.RedrwFnHelper(this.CurrentTile);
        this.loader.EbLoader("hide");
    };


    this.labelstyleApply = function (tileId) {
        $(`[data-id="${tileId}"]`).parent().css("background", "transparent");
        $(`[data-id="${tileId}"]`).parent().css("border", "0px solid");
        $(`[data-id="${tileId}"]`).parent().css("border", "0px solid");
        $(`#${tileId} .db-title`).empty();
        $(`#${tileId}`).addClass("user-control-tile-opt");
        $(`#${tileId} .i-opt-obj`).hide(); $(`#${tileId} .i-opt-restart`).hide();
        $(`#${tileId} .tile-header`).removeClass("tile-header");
    }

    this.GaugeDrop = function (component, column, controlname, type) {

        if (component !== "" && column !== "" && this.Rowdata[component + "Row"] !== null) {
            let abc = getObjByval(this.Procs[component].Columns.$values, "name", column);
            if (abc !== undefined) {
                let index = abc.data;
                let _data = this.Rowdata[component + "Row"][index];

                if (type === "ProgressGauge") {
                    this.Procs[controlname].GaugeValue = _data;
                    this.Procs[controlname].GaugeContainer = controlname;
                    ProgressGaugeWrapper(this.Procs[controlname], { isEdit: false });
                }
                else if (type === "Gauge") {
                    this.Procs[controlname].GaugeConfig.GaugeValue = _data;
                    this.Procs[controlname].GaugeConfig.GaugeContainer = controlname;
                    let xx = EbGaugeWrapper(this.Procs[controlname], { isEdit: true });
                }
                else if (type === "speedometer") {
                    this.Procs[controlname].GaugeValue = _data;
                    this.Procs[controlname].GaugeContainer = controlname;
                    SpeedoMeterWrapper(this.Procs[controlname], { isEdit: false });
                }
            }
        }
    };

    this.LabelDrop = function (component, column, controlname, tileid) {
        let val = getObjByval(this.Procs[component].Columns.$values, "name", column);
        if (component !== "" && column !== "" && val !== undefined && this.Rowdata[component + "Row"] !== null && this.Rowdata[component + "Row"] !== undefined) {
            let index = val.data;
            let _data = this.Rowdata[component + "Row"][index];
            this.Procs[controlname].DynamicLabel = _data;
            if (this.Procs[controlname].StaticLabel == "") {
                this.Procs[controlname].StaticLabel = column;
            }
            this.Procs[controlname].DataObjCtrlName = component;
            this.Procs[controlname].DataObjColName = column;
        }
    };

    this.makeElement = function (el, obj) {
        let ebtype = $(el).attr("eb-type");
        if (ebtype === undefined) {
            ebtype = el;
        }
        this.currentId = "tb" + this.TabNum + ebtype + CtrlCounters[ebtype + "Counter"]++;
        if (obj) { obj.EbSid = this.currentId; }
        this.Procs[this.currentId] = obj ? $.extend(new EbObjects["Eb" + ebtype](this.currentId), obj) : new EbObjects["Eb" + ebtype](this.currentId);
        this.dropedCtrlInit(this.Procs[this.currentId].$Control, ebtype, this.currentId);
    };
    this.MakeDashboardLabel = function (obj) {
        let a;
        if (obj.LabelStyle == 0) {
            a = `<div class="display-block label-cont" id="${obj.EbSid}" eb-type="DataLabel"> 
        <div class="card-icon" id="${obj.EbSid}_icon"><i class=""></i></div>
        <div id="${obj.EbSid}_Data_pane" class="Label_Data_pane" >
        <div class="lbl db-static-label" id="${obj.EbSid}_static"> ${obj.StaticLabel}</div>  
        <div class=" lbl db-label-desc"  id="${obj.EbSid}_description"></div>
        <div class="lbl db-dynamic-label" id="${obj.EbSid}_dynamic"> ${obj.DynamicLabel}</div>
        <div class="label-footer" id="${obj.EbSid}_footer"><div class="footer-inner"><i class="fa fa-address-book" aria-hidden="true"></i><label></label></div></div>
        </div></div>`;
        }
        else if (obj.LabelStyle == 1) {
            a = `<div class="display-block label2-cont" id="${obj.EbSid}" eb-type="DataLabel"> 
        <div id="${obj.EbSid}_Data_pane" class="Label_Data_pane" >
        <div class="card-icon" id="${obj.EbSid}_icon"><i class=""></i></div><div class='lb2-data'>
        <div class="lbl db-static-label" id="${obj.EbSid}_static"> ${obj.StaticLabel}</div>  
        <div class=" lbl db-label-desc"  id="${obj.EbSid}_description"></div>
        <div class="lbl db-dynamic-label" id="${obj.EbSid}_dynamic"> ${obj.DynamicLabel}</div>
        <div class="label-footer" id="${obj.EbSid}_footer"><div class="footer-inner"><i class="fa fa-address-book" aria-hidden="true"></i><label></label></div></div>
        </div></div></div>`;
        }
        else if (obj.LabelStyle == 2) {
            a = `<div class="display-block label3-cont" id="${obj.EbSid}" eb-type="DataLabel"> 
        <div id="${obj.EbSid}_Data_pane" class="Label_Data_pane" >
        <div class='lb3-data'>
        <div class="lbl db-static-label" id="${obj.EbSid}_static"> ${obj.StaticLabel}</div>  
        <div class=" lbl db-label-desc"  id="${obj.EbSid}_description"></div>
        <div class="lbl db-dynamic-label" id="${obj.EbSid}_dynamic"> ${obj.DynamicLabel}</div>
        <div class="label-footer" id="${obj.EbSid}_footer"><div class="footer-inner"><i class="fa fa-address-book" aria-hidden="true"></i><label></label></div></div>
        </div><div class="card-icon" id="${obj.EbSid}_icon"><i class=""></i></div>
        </div></div>`;
        }
        else if (obj.LabelStyle == 3) {
            a = `<div class="row display-block datalabel4 eb-full-width" id="${obj.EbSid}" eb-type="DataLabel">
            <div class="col-lg-4 col-sm-4 col-md-4 eb-full-height eb-nopadding icon-pane">
            <div class="icon4 eb-full-height" id="${obj.EbSid}_icon"><i></i></div></div>
            <div class="col-lg-8 col-sm-8 col-md-8 eb-full-height body-pane">
                <div class="card" id="${obj.EbSid}_Data_pane" style="width: 100%;">
                    <h5 class="card-header lbl" id="${obj.EbSid}_static"> ${obj.StaticLabel} </h5>
                    <div class="card-body">
<p class="card-text" id="${obj.EbSid}_description lbl"></p>
<p class="card-text" id="${obj.EbSid}_dynamic lbl">${obj.DynamicLabel}</p>
                    </div>
                <div class="card-footer text-muted" id="${obj.EbSid}_footer">
                <div class="row">
<div class="col-sm-3"><i class="fa fa-address-book" aria-hidden="true"></i></div>
<div class="col-sm-9 eb-nopadding"> <label></label></div>
                </div>
             </div>
            </div>
            </div> `;
        }
        else if (obj.LabelStyle == 4) {
            a = `<div class="row display-block datalabel5 eb-full-width" id="${obj.EbSid}" eb-type="DataLabel">
    <div class="col-lg-8 col-sm-8 col-md-8 eb-full-height body-pane">
        <div class="card eb-full-width" id="${obj.EbSid}_Data_pane" style="width: 100%;">
            <h5 class="card-header lbl" id="${obj.EbSid}_static"> ${obj.StaticLabel} </h5>
            <div class="card-body">
                <p class="card-text lbl" id="${obj.EbSid}_description">  </p>
                <p class="card-text" id="${obj.EbSid}_dynamic"> ${obj.DynamicLabel}</p>
            </div>
            <div class="card-footer text-muted" id="${obj.EbSid}_footer">
                <div class="row">
                    <div class="col-sm-3">
                        <i class="fa fa-address-book" aria-hidden="true"></i>
                    </div>
                    <div class="col-sm-9 eb-nopadding"> <label></label></div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-4 col-sm-4 col-md-4 eb-full-height eb-nopadding icon-pane">
        <div class="icon4 eb-full-height" id="${obj.EbSid}_icon"><i></i></div>
    </div>
</div>`;
        }
        return a;
    };

    this.MakeLinks = function (obj) {
        let a = `<div id="${obj.EbSid}" class="link-dashboard-pane"  eb-type="Links"> 
            <div id="${obj.EbSid}_icon" class="link-icon" >  <i class="fa fa-external-link-square"> </i> </div>
            <div id="${obj.EbSid}_text" class="link-text">  <div class="link-target" id="${obj.EbSid}_link" href="#" target="_blanc"></div> </div>
        </div>`;
        return a;
    };


    this.dropedCtrlInit = function ($ctrl, type, id) {
        $ctrl.attr("tabindex", "1");
        $ctrl.attr("id", id).attr("ebsid", id);
        $ctrl.attr("eb-type", type);
    };

    this.ComponentDrop = function (target, o) {

    };

    this.GetComponentColumns = function (obj) {
        let Refid = obj["DataSource"];
        this.Rowdata[obj.EbSid + "Row"] = null;
        //this.GetFilterValuesForDataSource();
        this.loader.EbLoader("show");
        this.waitDrawTiles = true;
        if (!obj.__syncObj) {
            obj.__syncObj = { sendReqts: 0, receiveReqts: 0 };
        }
        obj.__syncObj.sendReqts++;

        $.ajax({
            type: "POST",
            url: "../DS/GetData4DashboardControl",
            data: { DataSourceRefId: Refid, param: this.filtervalues },
            async: false,
            error: function (request, error) {
                this.loader.EbLoader("hide");
                EbPopBox("show", {
                    Message: "Failed to get data from DataSourse",
                    ButtonStyle: {
                        Text: "Ok",
                        Color: "white",
                        Background: "#508bf9",
                        Callback: function () {
                            //$(".dash-loader").hide();
                        }
                    }
                });
                obj.__syncObj.receiveReqts++;
                if (obj.__syncObj.sendReqts == obj.__syncObj.receiveReqts && this.EbObject.__continueDrawTiles) {
                    this.EbObject.__continueDrawTiles();
                }
            }.bind(this),
            success: function (resp) {
                obj["Columns"] = JSON.parse(resp.columns);
                //this.propGrid.setObject(obj, AllMetas["EbDataObject"]);
                this.DisplayColumns(obj);
                this.Rowdata[obj.EbSid + "Row"] = resp.row;
                this.loader.EbLoader("hide");

                obj.__syncObj.receiveReqts++;
                if (obj.__syncObj.sendReqts == obj.__syncObj.receiveReqts && this.EbObject.__continueDrawTiles) {
                    this.EbObject.__continueDrawTiles();
                }

            }.bind(this)
        });
    };

    this.DisplayColumns = function (obj) {
        $(`#${obj.EbSid} .eb-ctrl-label`).empty().append(obj.Name);
        $(`#Inner_Cont_${obj.EbSid}`).empty();
        for (let i = 0; i < obj['Columns'].$values.length; i++) {
            let column = obj['Columns'].$values[i];
            let name = column.name;
            $(`#Inner_Cont_${obj.EbSid}`).append(`<div data-ctrl='${obj.EbSid}' data-column='${name}' type=${column.Type} class='col-div-blk' eb-type="DataLabel"> ${name}</div>`);
        }
    };


    this.Ajax4fetchVisualization = function (refid) {
        this.loader.EbLoader("show");
        if (refid !== "") {
            $.ajax(
                {
                    url: '../DashBoard/DashBoardGetObj',
                    type: 'POST',
                    data: { refid: refid },
                    error: function (request, error) {
                        this.loader.EbLoader("hide");
                        EbPopBox("show", {
                            Message: "Failed to get data from DataSourse",
                            ButtonStyle: {
                                Text: "Ok",
                                Color: "white",
                                Background: "#508bf9",
                                Callback: function () {
                                    //$(".dash-loader").hide();
                                }
                            }
                        });
                    }.bind(this),
                    success: this.TileRefidChangesuccess.bind(this, this.CurrentTile)
                });
        }
    };


    this.TileOptions = function (e) {
        var tileid = e.target.parentElement.getAttribute("u-id");
        this.CurrentTile = tileid;
        var id = e.target.getAttribute("link");
        if (id === "ext-link") {
            //let TileRefid = this.TileCollection[tileid].RefId;
            this.linkDV = this.TileCollection[tileid].RefId;
            let url = "../DV/dv?refid=" + this.linkDV;
            this.DvExternalLinkTrigger();
            //let _form = document.createElement("form");
            //_form.setAttribute("method", "post");
            //_form.setAttribute("action", url);
            //_form.setAttribute("target", "_blank");

            //let input1 = document.createElement('input');
            //input1.type = 'hidden';
            //input1.name = "filterValues";
            //input1.value = btoa(unescape(encodeURIComponent(JSON.stringify(this.filtervalues))));
            //_form.appendChild(input1);

            //document.body.appendChild(_form);

            //_form.submit();
            //document.body.removeChild(_form);
        }
        if (id === "restart-tile") {
            $(`[data-id="${this.CurrentTile}"]`).empty();
            let Refid = this.TileCollection[tileid].RefId;
            this.Ajax4fetchVisualization(Refid);
        }
    };


    this.Tilecontext = function () {
        //$.contextMenu({
        //    selector: '.grid-stack-item-content',
        //    trigger: 'right',
        //    items: {
        //        "FullScreenView": {
        //            name: "Open in NewTab ", icon: "fa-external-link", callback: this.FullScreenViewTrigger.bind(this),
        //        },
        //    }
        //});
    };

    this.TileRefidChangesuccess = function (id, data) {
        if (this.FilterVal.length > 0) {
            this.filterValues = this.FilterVal;
            //this.placefiltervalues();
        }
        else if (this.filtervalues.length === 0 || this.filtervalues === undefined) {
            this.GetFilterValuesForDataSource();
        }
        let obj = JSON.parse(data);
        $(`[name-id="${id}"]`).empty().append(obj.DisplayName);
        if (obj.$type.indexOf("EbTableVisualization") >= 0) {

            $(`[data-id="${id}"]`).append(`<div id="content_tb1${id}" class="wrapper-cont"><table id="tb1${id}" class="table display table-bordered compact"></table></div>`);
            var o = {};
            o.dsid = obj.DataSourceRefId;
            o.tableId = "tb1" + id;
            o.containerId = id;
            o.columns = obj.Columns.$values;
            o.dvObject = obj;
            o.IsPaging = false;
            o.showFilterRow = false;
            o.showCheckboxColumn = false;
            o.Source = "DashBoard";
            o.drawCallBack = this.drawCallBack.bind(this, id);
            o.filterValues = btoa(unescape(encodeURIComponent(JSON.stringify(this.filtervalues))));
            var dt = new EbCommonDataTable(o);
            $(`#${id}`).addClass("box-shadow-style");
        }
        else if (obj.$type.indexOf("EbChartVisualization") >= 0) {
            $(`[data-id="${id}"]`).append(`<div id="canvasDivtb1${id}" class="CanvasDiv"></div>`);
            var o = {};
            o.tableId = "tb1" + id;
            o.dvObject = obj;
            o.filtervalues = this.filtervalues;
            o.zoomDisabled = obj.DisableZoom;
            var dt = new EbBasicChart(o);
            $(`[data-id="${id}"]`).parent().removeAttr("style");
            $(`#${id}`).addClass("box-shadow-style");
        }
        else if (obj.$type.indexOf("EbUserControl") >= 0) {
            //$(`[data-id="${id}"]`).append(`<div id="${id}_UserCtrl" class="Db-user-ctrl"></div>`);
            //let opts = {
            //    parentDiv: '#' + id + '_UserCtrl',
            //    refId: obj.RefId
            //}
            ////new EbUserCtrlHelper(opts);
            //$(`[data-id="${id}"]`).parent().css("background", "transparent");
            //$(`[data-id="${id}"]`).parent().css("border", "0px solid");
            //$(`[data-id="${id}"]`).parent().css("border", "0px solid");
            //$(`#${id} .db-title`).empty();
            //$(`#${id}`).addClass("user-control-tile-opt");
            //$(`#${id} .i-opt-obj`).hide();
            //$(`#${id} .i-opt-restart`).css({ "border": "solid 0px #dcdcdc" });
        }
        else if (obj.$type.indexOf("EbGoogleMap") >= 0) {
            $(`[data-id="${id}"]`).append(`<div id="canvasDivtb1${id}" class="CanvasDiv"></div>`);
            var o = {};
            o.tableId = "tb1" + id;
            o.dsobj = obj;
            o.Source = "Dashboard";
            o.filtervalues = this.filtervalues;
            o.googlekey = this.googlekey;
            var dt = new EbGoogleMap(o);
            $(`[data-id="${id}"]`).parent().removeAttr("style");
            $(`#${id}`).addClass("box-shadow-style");
        }
        this.loader.EbLoader("hide");
    };

    this.drawCallBack = function (id) {
        $(`[data-id="${id}"]`).parent().removeAttr("style");
        let a = $(`#${id} .dataTables_scrollHeadInner`).height() - 3;
        $(`#${id} .dataTables_scrollBody`).css("max-height", `calc(100% - ${a}px)`);
        Eb_Tiles_StyleFn(this.TileCollection[id], id, this.TabNum);
    }.bind(this);


    this.GetFilterValuesForDataSource = function () {
        this.filtervalues = [];
        if (this.filterDialog && this.EbObject.Filter_Dialogue != "")
            this.filtervalues = getValsForViz(this.filterDialog.FormObj);

        let temp = $.grep(this.filtervalues, function (obj) { return obj.Name === "eb_loc_id"; });
        if (temp.length === 0) {
            let abc = store.get("Eb_Loc-" + ebcontext.sid + ebcontext.user.UserId);
            this.filtervalues.push(new fltr_obj(11, "eb_loc_id", abc ? abc : 1));
        }
        temp = $.grep(this.filtervalues, function (obj) { return obj.Name === "eb_currentuser_id"; });
        if (temp.length === 0)
            this.filtervalues.push(new fltr_obj(11, "eb_currentuser_id", ebcontext.user.UserId));
        if (ebcontext.languages != undefined) {
            temp = $.grep(this.filtervalues, function (obj) { return obj.Name === "eb_current_language_id"; });
            if (temp.length === 0)
                this.filtervalues.push(new fltr_obj(11, "eb_current_language_id", ebcontext.languages.getCurrentLanguage()));

            temp = $.grep(this.filtervalues, function (obj) { return obj.Name === "eb_current_locale"; });
            if (temp.length === 0)
                this.filtervalues.push(new fltr_obj(16, "eb_current_locale", ebcontext.languages.getCurrentLocale()));
        }
        //if (this.stickBtn) { this.stickBtn.minimise(); }
        return this.filtervalues;
    };


    this.GetFilterValues = function () {
        this.IsRendered = true;
        this.loader.EbLoader("show");
        this.filtervalues = [];
        //if (this.stickBtn) { this.stickBtn.minimise(); }
        if (this.FilterVal.length > 0)
            this.filtervalues = this.FilterVal;
        else if (this.filterDialog)
            this.filtervalues = getValsForViz(this.filterDialog.FormObj);

        let temp = $.grep(this.filtervalues, function (obj) { return obj.Name === "eb_loc_id"; });
        if (temp.length === 0)
            this.filtervalues.push(new fltr_obj(11, "eb_loc_id", store.get("Eb_Loc-" + ebcontext.sid + ebcontext.user.UserId)));

        temp = $.grep(this.filtervalues, function (obj) { return obj.Name === "eb_currentuser_id"; });
        if (temp.length === 0)
            this.filtervalues.push(new fltr_obj(11, "eb_currentuser_id", ebcontext.user.UserId));

        if (ebcontext.languages !== undefined) {
            temp = $.grep(this.filtervalues, function (obj) { return obj.Name === "eb_current_language_id"; });
            if (temp.length === 0)
                this.filtervalues.push(new fltr_obj(11, "eb_current_language_id", ebcontext.languages.getCurrentLanguage()));

            temp = $.grep(this.filtervalues, function (obj) { return obj.Name === "eb_current_locale"; });
            if (temp.length === 0)
                this.filtervalues.push(new fltr_obj(16, "eb_current_locale", ebcontext.languages.getCurrentLocale()));
        }

        if (this.EbObject.Filter_Dialogue !== "") {
            this.Procs = {};
            CtrlCounters.DataLabelCounter = 0;
            CtrlCounters.DataObjectCounter = 0;
            //this.DrawTiles();
            grid.removeAll();
            setTimeout(this.DrawTiles.bind(this), 500);
            setTimeout(this.loader.EbLoader("show"), 1);
        }
        this.CloseParamDiv();
    };

    this.DisplayBlockLink = function (e) {
        this.linkDV = $(e.target.closest(".label-cont")).attr("ref-id");
        if (this.FilterVal.length > 0) {
            this.filtervalues = this.FilterVal;
        }
        else
            this.filtervalues = this.GetFilterValuesForDataSource();
        var splitarray = this.linkDV.split("-");
        if (splitarray[2] === "3") {
            var url = "../ReportRender/BeforeRender?refid=" + this.linkDV;
            var copycelldata = cData.replace(/[^a-zA-Z ]/g, "").replace(/ /g, "_");
            if ($(`#RptModal${copycelldata}`).length !== 0)
                $(`#RptModal${copycelldata}`).remove();
            $("body").append(`<div class="modal fade RptModal" id="RptModal${copycelldata}" role="dialog">
                <div class="modal-dialog modal-sm">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>                              
                        </div>
                        <div class="modal-body"> <iframe id="reportIframe${copycelldata}" class="reportIframe" src='../ReportRender/Renderlink?refid=${this.linkDV}&_params=${btoa(unescape(encodeURIComponent(JSON.stringify(this.filterValues))))}'></iframe>
            </div>
                    </div>
                </div>
            </div>
            `);
            $(`#RptModal${copycelldata}`).modal();
            $(`#reportIframe${copycelldata}`).css("height", "80vh");
            //else {
            //    $(`#RptModal${copycelldata}`).modal();
            //    $.LoadingOverlay("hide");
            //}
        }
        else if (splitarray[2] === "0") {
            let _locale = ebcontext.languages.getCurrentLocale();
            let url = "../webform/index?_r=" + this.linkDV + "_lo=" + _locale;
            var _form = document.createElement("form");
            _form.setAttribute("method", "post");
            _form.setAttribute("action", url);
            _form.setAttribute("target", "_blank");

            var input = document.createElement('input');
            input.type = 'hidden';
            input.name = "_params";
            input.value = btoa(unescape(encodeURIComponent(JSON.stringify(this.filtervalues))));
            _form.appendChild(input);

            //input = document.createElement('input');
            //input.type = 'hidden';
            //input.name = "_mode";
            //input.value = this.dvformMode;
            //_form.appendChild(input);

            //input = document.createElement('input');
            //input.type = 'hidden';
            //input.name = "_locId";
            //input.value = store.get("Eb_Loc-" + this.TenantId + this.UserId);
            //_form.appendChild(input);

            document.body.appendChild(_form);
            _form.submit();
            document.body.removeChild(_form);
        }
        else if (splitarray[2] === "22") {
            this.tabNum++;
            let url = "../DashBoard/DashBoardView?refid=" + this.linkDV;

            let _form = document.createElement("form");
            _form.setAttribute("method", "post");
            _form.setAttribute("action", url);
            _form.setAttribute("target", "_blank");

            let input1 = document.createElement('input');
            input1.type = 'hidden';
            input1.name = "filterValues";
            input1.value = btoa(unescape(encodeURIComponent(JSON.stringify(this.filtervalues))));
            _form.appendChild(input1);

            let input2 = document.createElement('input');
            input2.type = 'hidden';
            input2.name = "tabNum";
            input2.value = this.tabNum;
            _form.appendChild(input2);

            document.body.appendChild(_form);

            //note I am using a post.htm page since I did not want to make double request to the page 
            //it might have some Page_Load call which might screw things up.
            //window.open("post.htm", name, windowoption);       
            _form.submit();
            document.body.removeChild(_form);
        }

        else {
            this.DvExternalLinkTrigger();
        }
    }

    this.placefiltervalues = function () {
        $.each(getFlatCtrlObjs(this.FilterObj.FormObj), function (i, obj) {
            let getobjval = getObjByval(this.filtervalues, "Name", obj.Name)
            if (getobjval !== undefined) {
                let val = getobjval.Value;
                obj.setValue(val);
            }
        }.bind(this));
    }

    this.DvExternalLinkTrigger = function () {
        var splitarray = this.linkDV.split("-");
        //this.filtervalues = this.GetFilterValuesForDataSource();
        this.TabNum++;
        let url = "../DV/dv?refid=" + this.linkDV;

        let _form = document.createElement("form");
        _form.setAttribute("method", "post");
        _form.setAttribute("action", url);
        _form.setAttribute("target", "_blank");

        let input = document.createElement('input');
        input.type = 'hidden';
        input.name = "rowData";

        //input.value = btoa(unescape(encodeURIComponent(JSON.stringify(this.rowData))));
        //_form.appendChild(input);

        let input1 = document.createElement('input');
        input1.type = 'hidden';
        input1.name = "filterValues";
        input1.value = btoa(unescape(encodeURIComponent(JSON.stringify(this.filtervalues))));
        _form.appendChild(input1);

        let input2 = document.createElement('input');
        input2.type = 'hidden';
        input2.name = "tabNum";
        input2.value = this.TabNum;
        _form.appendChild(input2);

        document.body.appendChild(_form);

        //note I am using a post.htm page since I did not want to make double request to the page 
        //it might have some Page_Load call which might screw things up.
        //window.open("post.htm", name, windowoption);       
        _form.submit();
        document.body.removeChild(_form);
    }

    this.init();
}


function LinkStyle(Obj, tile, TabNum) {
    $(`#${Obj.EbSid}_link`).text(Obj.LinkName);
}
(function () {
    function n(n, t) { return n.set(t[0], t[1]), n } function t(n, t) { return n.add(t), n } function r(n, t, r) { switch (r.length) { case 0: return n.call(t); case 1: return n.call(t, r[0]); case 2: return n.call(t, r[0], r[1]); case 3: return n.call(t, r[0], r[1], r[2]) }return n.apply(t, r) } function e(n, t, r, e) { for (var u = -1, i = null == n ? 0 : n.length; ++u < i;) { var o = n[u]; t(e, o, r(o), n) } return e } function u(n, t) { for (var r = -1, e = null == n ? 0 : n.length; ++r < e && t(n[r], r, n) !== !1;); return n } function i(n, t) { for (var r = null == n ? 0 : n.length; r-- && t(n[r], r, n) !== !1;); return n } function o(n, t) { for (var r = -1, e = null == n ? 0 : n.length; ++r < e;)if (!t(n[r], r, n)) return !1; return !0 } function f(n, t) { for (var r = -1, e = null == n ? 0 : n.length, u = 0, i = []; ++r < e;) { var o = n[r]; t(o, r, n) && (i[u++] = o) } return i } function a(n, t) { var r = null == n ? 0 : n.length; return !!r && b(n, t, 0) > -1 } function c(n, t, r) { for (var e = -1, u = null == n ? 0 : n.length; ++e < u;)if (r(t, n[e])) return !0; return !1 } function l(n, t) { for (var r = -1, e = null == n ? 0 : n.length, u = Array(e); ++r < e;)u[r] = t(n[r], r, n); return u } function s(n, t) { for (var r = -1, e = t.length, u = n.length; ++r < e;)n[u + r] = t[r]; return n } function h(n, t, r, e) { var u = -1, i = null == n ? 0 : n.length; for (e && i && (r = n[++u]); ++u < i;)r = t(r, n[u], u, n); return r } function p(n, t, r, e) { var u = null == n ? 0 : n.length; for (e && u && (r = n[--u]); u--;)r = t(r, n[u], u, n); return r } function v(n, t) { for (var r = -1, e = null == n ? 0 : n.length; ++r < e;)if (t(n[r], r, n)) return !0; return !1 } function _(n) { return n.split("") } function g(n) { return n.match(Dt) || [] } function y(n, t, r) { var e; return r(n, function (n, r, u) { if (t(n, r, u)) return e = r, !1 }), e } function d(n, t, r, e) { for (var u = n.length, i = r + (e ? 1 : -1); e ? i-- : ++i < u;)if (t(n[i], i, n)) return i; return -1 } function b(n, t, r) { return t === t ? K(n, t, r) : d(n, m, r) } function w(n, t, r, e) { for (var u = r - 1, i = n.length; ++u < i;)if (e(n[u], t)) return u; return -1 } function m(n) { return n !== n } function x(n, t) { var r = null == n ? 0 : n.length; return r ? I(n, t) / r : Ln } function j(n) { return function (t) { return null == t ? X : t[n] } } function A(n) { return function (t) { return null == n ? X : n[t] } } function k(n, t, r, e, u) { return u(n, function (n, u, i) { r = e ? (e = !1, n) : t(r, n, u, i) }), r } function O(n, t) { var r = n.length; for (n.sort(t); r--;)n[r] = n[r].value; return n } function I(n, t) { for (var r, e = -1, u = n.length; ++e < u;) { var i = t(n[e]); i !== X && (r = r === X ? i : r + i) } return r } function R(n, t) { for (var r = -1, e = Array(n); ++r < n;)e[r] = t(r); return e } function z(n, t) { return l(t, function (t) { return [t, n[t]] }) } function E(n) { return function (t) { return n(t) } } function S(n, t) { return l(t, function (t) { return n[t] }) } function W(n, t) { return n.has(t) } function L(n, t) { for (var r = -1, e = n.length; ++r < e && b(t, n[r], 0) > -1;); return r } function C(n, t) { for (var r = n.length; r-- && b(t, n[r], 0) > -1;); return r } function U(n, t) { for (var r = n.length, e = 0; r--;)n[r] === t && ++e; return e } function B(n) { return "\\" + Yr[n] } function T(n, t) { return null == n ? X : n[t] } function $(n) { return Nr.test(n) } function D(n) { return Pr.test(n) } function M(n) { for (var t, r = []; !(t = n.next()).done;)r.push(t.value); return r } function F(n) { var t = -1, r = Array(n.size); return n.forEach(function (n, e) { r[++t] = [e, n] }), r } function N(n, t) { return function (r) { return n(t(r)) } } function P(n, t) { for (var r = -1, e = n.length, u = 0, i = []; ++r < e;) { var o = n[r]; o !== t && o !== fn || (n[r] = fn, i[u++] = r) } return i } function q(n) { var t = -1, r = Array(n.size); return n.forEach(function (n) { r[++t] = n }), r } function Z(n) { var t = -1, r = Array(n.size); return n.forEach(function (n) { r[++t] = [n, n] }), r } function K(n, t, r) { for (var e = r - 1, u = n.length; ++e < u;)if (n[e] === t) return e; return -1 } function V(n, t, r) { for (var e = r + 1; e--;)if (n[e] === t) return e; return e } function G(n) { return $(n) ? J(n) : ve(n) } function H(n) { return $(n) ? Y(n) : _(n) } function J(n) { for (var t = Mr.lastIndex = 0; Mr.test(n);)++t; return t } function Y(n) { return n.match(Mr) || [] } function Q(n) { return n.match(Fr) || [] } var X, nn = "4.17.0", tn = 200, rn = "Unsupported core-js use. Try https://npms.io/search?q=ponyfill.", en = "Expected a function", un = "__lodash_hash_undefined__", on = 500, fn = "__lodash_placeholder__", an = 1, cn = 2, ln = 4, sn = 1, hn = 2, pn = 1, vn = 2, _n = 4, gn = 8, yn = 16, dn = 32, bn = 64, wn = 128, mn = 256, xn = 512, jn = 30, An = "...", kn = 800, On = 16, In = 1, Rn = 2, zn = 3, En = 1 / 0, Sn = 9007199254740991, Wn = 1.7976931348623157e308, Ln = NaN, Cn = 4294967295, Un = Cn - 1, Bn = Cn >>> 1, Tn = [["ary", wn], ["bind", pn], ["bindKey", vn], ["curry", gn], ["curryRight", yn], ["flip", xn], ["partial", dn], ["partialRight", bn], ["rearg", mn]], $n = "[object Arguments]", Dn = "[object Array]", Mn = "[object AsyncFunction]", Fn = "[object Boolean]", Nn = "[object Date]", Pn = "[object DOMException]", qn = "[object Error]", Zn = "[object Function]", Kn = "[object GeneratorFunction]", Vn = "[object Map]", Gn = "[object Number]", Hn = "[object Null]", Jn = "[object Object]", Yn = "[object Promise]", Qn = "[object Proxy]", Xn = "[object RegExp]", nt = "[object Set]", tt = "[object String]", rt = "[object Symbol]", et = "[object Undefined]", ut = "[object WeakMap]", it = "[object WeakSet]", ot = "[object ArrayBuffer]", ft = "[object DataView]", at = "[object Float32Array]", ct = "[object Float64Array]", lt = "[object Int8Array]", st = "[object Int16Array]", ht = "[object Int32Array]", pt = "[object Uint8Array]", vt = "[object Uint8ClampedArray]", _t = "[object Uint16Array]", gt = "[object Uint32Array]", yt = /\b__p \+= '';/g, dt = /\b(__p \+=) '' \+/g, bt = /(__e\(.*?\)|\b__t\)) \+\n'';/g, wt = /&(?:amp|lt|gt|quot|#39);/g, mt = /[&<>"']/g, xt = RegExp(wt.source), jt = RegExp(mt.source), At = /<%-([\s\S]+?)%>/g, kt = /<%([\s\S]+?)%>/g, Ot = /<%=([\s\S]+?)%>/g, It = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/, Rt = /^\w*$/, zt = /^\./, Et = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g, St = /[\\^$.*+?()[\]{}|]/g, Wt = RegExp(St.source), Lt = /^\s+|\s+$/g, Ct = /^\s+/, Ut = /\s+$/, Bt = /\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/, Tt = /\{\n\/\* \[wrapped with (.+)\] \*/, $t = /,? & /, Dt = /[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g, Mt = /\\(\\)?/g, Ft = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g, Nt = /\w*$/, Pt = /^[-+]0x[0-9a-f]+$/i, qt = /^0b[01]+$/i, Zt = /^\[object .+?Constructor\]$/, Kt = /^0o[0-7]+$/i, Vt = /^(?:0|[1-9]\d*)$/, Gt = /[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g, Ht = /($^)/, Jt = /['\n\r\u2028\u2029\\]/g, Yt = "\\ud800-\\udfff", Qt = "\\u0300-\\u036f", Xt = "\\ufe20-\\ufe2f", nr = "\\u20d0-\\u20ff", tr = Qt + Xt + nr, rr = "\\u2700-\\u27bf", er = "a-z\\xdf-\\xf6\\xf8-\\xff", ur = "\\xac\\xb1\\xd7\\xf7", ir = "\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf", or = "\\u2000-\\u206f", fr = " \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000", ar = "A-Z\\xc0-\\xd6\\xd8-\\xde", cr = "\\ufe0e\\ufe0f", lr = ur + ir + or + fr, sr = "['’]", hr = "[" + Yt + "]", pr = "[" + lr + "]", vr = "[" + tr + "]", _r = "\\d+", gr = "[" + rr + "]", yr = "[" + er + "]", dr = "[^" + Yt + lr + _r + rr + er + ar + "]", br = "\\ud83c[\\udffb-\\udfff]", wr = "(?:" + vr + "|" + br + ")", mr = "[^" + Yt + "]", xr = "(?:\\ud83c[\\udde6-\\uddff]){2}", jr = "[\\ud800-\\udbff][\\udc00-\\udfff]", Ar = "[" + ar + "]", kr = "\\u200d", Or = "(?:" + yr + "|" + dr + ")", Ir = "(?:" + Ar + "|" + dr + ")", Rr = "(?:" + sr + "(?:d|ll|m|re|s|t|ve))?", zr = "(?:" + sr + "(?:D|LL|M|RE|S|T|VE))?", Er = wr + "?", Sr = "[" + cr + "]?", Wr = "(?:" + kr + "(?:" + [mr, xr, jr].join("|") + ")" + Sr + Er + ")*", Lr = "\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)", Cr = "\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)", Ur = Sr + Er + Wr, Br = "(?:" + [gr, xr, jr].join("|") + ")" + Ur, Tr = "(?:" + [mr + vr + "?", vr, xr, jr, hr].join("|") + ")", $r = RegExp(sr, "g"), Dr = RegExp(vr, "g"), Mr = RegExp(br + "(?=" + br + ")|" + Tr + Ur, "g"), Fr = RegExp([Ar + "?" + yr + "+" + Rr + "(?=" + [pr, Ar, "$"].join("|") + ")", Ir + "+" + zr + "(?=" + [pr, Ar + Or, "$"].join("|") + ")", Ar + "?" + Or + "+" + Rr, Ar + "+" + zr, Cr, Lr, _r, Br].join("|"), "g"), Nr = RegExp("[" + kr + Yt + tr + cr + "]"), Pr = /[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/, qr = ["Array", "Buffer", "DataView", "Date", "Error", "Float32Array", "Float64Array", "Function", "Int8Array", "Int16Array", "Int32Array", "Map", "Math", "Object", "Promise", "RegExp", "Set", "String", "Symbol", "TypeError", "Uint8Array", "Uint8ClampedArray", "Uint16Array", "Uint32Array", "WeakMap", "_", "clearTimeout", "isFinite", "parseInt", "setTimeout"], Zr = -1, Kr = {}; Kr[at] = Kr[ct] = Kr[lt] = Kr[st] = Kr[ht] = Kr[pt] = Kr[vt] = Kr[_t] = Kr[gt] = !0, Kr[$n] = Kr[Dn] = Kr[ot] = Kr[Fn] = Kr[ft] = Kr[Nn] = Kr[qn] = Kr[Zn] = Kr[Vn] = Kr[Gn] = Kr[Jn] = Kr[Xn] = Kr[nt] = Kr[tt] = Kr[ut] = !1; var Vr = {}; Vr[$n] = Vr[Dn] = Vr[ot] = Vr[ft] = Vr[Fn] = Vr[Nn] = Vr[at] = Vr[ct] = Vr[lt] = Vr[st] = Vr[ht] = Vr[Vn] = Vr[Gn] = Vr[Jn] = Vr[Xn] = Vr[nt] = Vr[tt] = Vr[rt] = Vr[pt] = Vr[vt] = Vr[_t] = Vr[gt] = !0, Vr[qn] = Vr[Zn] = Vr[ut] = !1; var Gr = { "À": "A", "Á": "A", "Â": "A", "Ã": "A", "Ä": "A", "Å": "A", "à": "a", "á": "a", "â": "a", "ã": "a", "ä": "a", "å": "a", "Ç": "C", "ç": "c", "Ð": "D", "ð": "d", "È": "E", "É": "E", "Ê": "E", "Ë": "E", "è": "e", "é": "e", "ê": "e", "ë": "e", "Ì": "I", "Í": "I", "Î": "I", "Ï": "I", "ì": "i", "í": "i", "î": "i", "ï": "i", "Ñ": "N", "ñ": "n", "Ò": "O", "Ó": "O", "Ô": "O", "Õ": "O", "Ö": "O", "Ø": "O", "ò": "o", "ó": "o", "ô": "o", "õ": "o", "ö": "o", "ø": "o", "Ù": "U", "Ú": "U", "Û": "U", "Ü": "U", "ù": "u", "ú": "u", "û": "u", "ü": "u", "Ý": "Y", "ý": "y", "ÿ": "y", "Æ": "Ae", "æ": "ae", "Þ": "Th", "þ": "th", "ß": "ss", "Ā": "A", "Ă": "A", "Ą": "A", "ā": "a", "ă": "a", "ą": "a", "Ć": "C", "Ĉ": "C", "Ċ": "C", "Č": "C", "ć": "c", "ĉ": "c", "ċ": "c", "č": "c", "Ď": "D", "Đ": "D", "ď": "d", "đ": "d", "Ē": "E", "Ĕ": "E", "Ė": "E", "Ę": "E", "Ě": "E", "ē": "e", "ĕ": "e", "ė": "e", "ę": "e", "ě": "e", "Ĝ": "G", "Ğ": "G", "Ġ": "G", "Ģ": "G", "ĝ": "g", "ğ": "g", "ġ": "g", "ģ": "g", "Ĥ": "H", "Ħ": "H", "ĥ": "h", "ħ": "h", "Ĩ": "I", "Ī": "I", "Ĭ": "I", "Į": "I", "İ": "I", "ĩ": "i", "ī": "i", "ĭ": "i", "į": "i", "ı": "i", "Ĵ": "J", "ĵ": "j", "Ķ": "K", "ķ": "k", "ĸ": "k", "Ĺ": "L", "Ļ": "L", "Ľ": "L", "Ŀ": "L", "Ł": "L", "ĺ": "l", "ļ": "l", "ľ": "l", "ŀ": "l", "ł": "l", "Ń": "N", "Ņ": "N", "Ň": "N", "Ŋ": "N", "ń": "n", "ņ": "n", "ň": "n", "ŋ": "n", "Ō": "O", "Ŏ": "O", "Ő": "O", "ō": "o", "ŏ": "o", "ő": "o", "Ŕ": "R", "Ŗ": "R", "Ř": "R", "ŕ": "r", "ŗ": "r", "ř": "r", "Ś": "S", "Ŝ": "S", "Ş": "S", "Š": "S", "ś": "s", "ŝ": "s", "ş": "s", "š": "s", "Ţ": "T", "Ť": "T", "Ŧ": "T", "ţ": "t", "ť": "t", "ŧ": "t", "Ũ": "U", "Ū": "U", "Ŭ": "U", "Ů": "U", "Ű": "U", "Ų": "U", "ũ": "u", "ū": "u", "ŭ": "u", "ů": "u", "ű": "u", "ų": "u", "Ŵ": "W", "ŵ": "w", "Ŷ": "Y", "ŷ": "y", "Ÿ": "Y", "Ź": "Z", "Ż": "Z", "Ž": "Z", "ź": "z", "ż": "z", "ž": "z", "Ĳ": "IJ", "ĳ": "ij", "Œ": "Oe", "œ": "oe", "ŉ": "'n", "ſ": "s" }, Hr = { "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;" }, Jr = { "&amp;": "&", "&lt;": "<", "&gt;": ">", "&quot;": '"', "&#39;": "'" }, Yr = { "\\": "\\", "'": "'", "\n": "n", "\r": "r", "\u2028": "u2028", "\u2029": "u2029" }, Qr = parseFloat, Xr = parseInt, ne = "object" == typeof global && global && global.Object === Object && global, te = "object" == typeof self && self && self.Object === Object && self, re = ne || te || Function("return this")(), ee = "object" == typeof exports && exports && !exports.nodeType && exports, ue = ee && "object" == typeof module && module && !module.nodeType && module, ie = ue && ue.exports === ee, oe = ie && ne.process, fe = function () { try { return oe && oe.binding && oe.binding("util") } catch (n) { } }(), ae = fe && fe.isArrayBuffer, ce = fe && fe.isDate, le = fe && fe.isMap, se = fe && fe.isRegExp, he = fe && fe.isSet, pe = fe && fe.isTypedArray, ve = j("length"), _e = A(Gr), ge = A(Hr), ye = A(Jr), de = function _(A) {
        function K(n) { if (ca(n) && !wh(n) && !(n instanceof Dt)) { if (n instanceof Y) return n; if (wl.call(n, "__wrapped__")) return uo(n) } return new Y(n) } function J() { } function Y(n, t) { this.__wrapped__ = n, this.__actions__ = [], this.__chain__ = !!t, this.__index__ = 0, this.__values__ = X } function Dt(n) { this.__wrapped__ = n, this.__actions__ = [], this.__dir__ = 1, this.__filtered__ = !1, this.__iteratees__ = [], this.__takeCount__ = Cn, this.__views__ = [] } function Yt() { var n = new Dt(this.__wrapped__); return n.__actions__ = Fu(this.__actions__), n.__dir__ = this.__dir__, n.__filtered__ = this.__filtered__, n.__iteratees__ = Fu(this.__iteratees__), n.__takeCount__ = this.__takeCount__, n.__views__ = Fu(this.__views__), n } function Qt() { if (this.__filtered__) { var n = new Dt(this); n.__dir__ = -1, n.__filtered__ = !0 } else n = this.clone(), n.__dir__ *= -1; return n } function Xt() { var n = this.__wrapped__.value(), t = this.__dir__, r = wh(n), e = t < 0, u = r ? n.length : 0, i = Ii(0, u, this.__views__), o = i.start, f = i.end, a = f - o, c = e ? f : o - 1, l = this.__iteratees__, s = l.length, h = 0, p = Jl(a, this.__takeCount__); if (!r || u < tn || u == a && p == a) return xu(n, this.__actions__); var v = []; n: for (; a-- && h < p;) { c += t; for (var _ = -1, g = n[c]; ++_ < s;) { var y = l[_], d = y.iteratee, b = y.type, w = d(g); if (b == Rn) g = w; else if (!w) { if (b == In) continue n; break n } } v[h++] = g } return v } function nr(n) { var t = -1, r = null == n ? 0 : n.length; for (this.clear(); ++t < r;) { var e = n[t]; this.set(e[0], e[1]) } } function tr() { this.__data__ = os ? os(null) : {}, this.size = 0 } function rr(n) { var t = this.has(n) && delete this.__data__[n]; return this.size -= t ? 1 : 0, t } function er(n) { var t = this.__data__; if (os) { var r = t[n]; return r === un ? X : r } return wl.call(t, n) ? t[n] : X } function ur(n) { var t = this.__data__; return os ? t[n] !== X : wl.call(t, n) } function ir(n, t) { var r = this.__data__; return this.size += this.has(n) ? 0 : 1, r[n] = os && t === X ? un : t, this } function or(n) { var t = -1, r = null == n ? 0 : n.length; for (this.clear(); ++t < r;) { var e = n[t]; this.set(e[0], e[1]) } } function fr() { this.__data__ = [], this.size = 0 } function ar(n) { var t = this.__data__, r = Cr(t, n); if (r < 0) return !1; var e = t.length - 1; return r == e ? t.pop() : Cl.call(t, r, 1), --this.size, !0 } function cr(n) { var t = this.__data__, r = Cr(t, n); return r < 0 ? X : t[r][1] } function lr(n) { return Cr(this.__data__, n) > -1 } function sr(n, t) { var r = this.__data__, e = Cr(r, n); return e < 0 ? (++this.size, r.push([n, t])) : r[e][1] = t, this } function hr(n) { var t = -1, r = null == n ? 0 : n.length; for (this.clear(); ++t < r;) { var e = n[t]; this.set(e[0], e[1]) } } function pr() { this.size = 0, this.__data__ = { hash: new nr, map: new (rs || or), string: new nr } } function vr(n) { var t = ji(this, n).delete(n); return this.size -= t ? 1 : 0, t } function _r(n) { return ji(this, n).get(n) } function gr(n) { return ji(this, n).has(n) } function yr(n, t) { var r = ji(this, n), e = r.size; return r.set(n, t), this.size += r.size == e ? 0 : 1, this } function dr(n) { var t = -1, r = null == n ? 0 : n.length; for (this.__data__ = new hr; ++t < r;)this.add(n[t]) } function br(n) { return this.__data__.set(n, un), this } function wr(n) { return this.__data__.has(n) } function mr(n) { var t = this.__data__ = new or(n); this.size = t.size } function xr() { this.__data__ = new or, this.size = 0 } function jr(n) { var t = this.__data__, r = t.delete(n); return this.size = t.size, r } function Ar(n) { return this.__data__.get(n) } function kr(n) { return this.__data__.has(n) } function Or(n, t) { var r = this.__data__; if (r instanceof or) { var e = r.__data__; if (!rs || e.length < tn - 1) return e.push([n, t]), this.size = ++r.size, this; r = this.__data__ = new hr(e) } return r.set(n, t), this.size = r.size, this } function Ir(n, t) { var r = wh(n), e = !r && bh(n), u = !r && !e && xh(n), i = !r && !e && !u && Ih(n), o = r || e || u || i, f = o ? R(n.length, pl) : [], a = f.length; for (var c in n) !t && !wl.call(n, c) || o && ("length" == c || u && ("offset" == c || "parent" == c) || i && ("buffer" == c || "byteLength" == c || "byteOffset" == c) || Ui(c, a)) || f.push(c); return f } function Rr(n) { var t = n.length; return t ? n[eu(0, t - 1)] : X } function zr(n, t) { return no(Fu(n), Nr(t, 0, n.length)) } function Er(n) { return no(Fu(n)) } function Sr(n, t, r, e) { return n === X || Hf(n, yl[r]) && !wl.call(e, r) ? t : n } function Wr(n, t, r) { (r === X || Hf(n[t], r)) && (r !== X || t in n) || Mr(n, t, r) } function Lr(n, t, r) { var e = n[t]; wl.call(n, t) && Hf(e, r) && (r !== X || t in n) || Mr(n, t, r) } function Cr(n, t) { for (var r = n.length; r--;)if (Hf(n[r][0], t)) return r; return -1 } function Ur(n, t, r, e) { return ds(n, function (n, u, i) { t(e, n, r(n), i) }), e } function Br(n, t) { return n && Nu(t, qa(t), n) } function Tr(n, t) { return n && Nu(t, Za(t), n) } function Mr(n, t, r) { "__proto__" == t && $l ? $l(n, t, { configurable: !0, enumerable: !0, value: r, writable: !0 }) : n[t] = r } function Fr(n, t) { for (var r = -1, e = t.length, u = ol(e), i = null == n; ++r < e;)u[r] = i ? X : Fa(n, t[r]); return u } function Nr(n, t, r) { return n === n && (r !== X && (n = n <= r ? n : r), t !== X && (n = n >= t ? n : t)), n } function Pr(n, t, r, e, i, o) { var f, a = t & an, c = t & cn, l = t & ln; if (r && (f = i ? r(n, e, i, o) : r(n)), f !== X) return f; if (!aa(n)) return n; var s = wh(n); if (s) { if (f = Ei(n), !a) return Fu(n, f) } else { var h = Es(n), p = h == Zn || h == Kn; if (xh(n)) return zu(n, a); if (h == Jn || h == $n || p && !i) { if (f = c || p ? {} : Si(n), !a) return c ? qu(n, Tr(f, n)) : Pu(n, Br(f, n)) } else { if (!Vr[h]) return i ? n : {}; f = Wi(n, h, Pr, a) } } o || (o = new mr); var v = o.get(n); if (v) return v; o.set(n, f); var _ = l ? c ? bi : di : c ? Za : qa, g = s ? X : _(n); return u(g || n, function (e, u) { g && (u = e, e = n[u]), Lr(f, u, Pr(e, t, r, u, n, o)) }), f } function Gr(n) { var t = qa(n); return function (r) { return Hr(r, n, t) } } function Hr(n, t, r) { var e = r.length; if (null == n) return !e; for (n = sl(n); e--;) { var u = r[e], i = t[u], o = n[u]; if (o === X && !(u in n) || !i(o)) return !1 } return !0 } function Jr(n, t, r) { if ("function" != typeof n) throw new vl(en); return Ls(function () { n.apply(X, r) }, t) } function Yr(n, t, r, e) { var u = -1, i = a, o = !0, f = n.length, s = [], h = t.length; if (!f) return s; r && (t = l(t, E(r))), e ? (i = c, o = !1) : t.length >= tn && (i = W, o = !1, t = new dr(t)); n: for (; ++u < f;) { var p = n[u], v = null == r ? p : r(p); if (p = e || 0 !== p ? p : 0, o && v === v) { for (var _ = h; _--;)if (t[_] === v) continue n; s.push(p) } else i(t, v, e) || s.push(p) } return s } function ne(n, t) { var r = !0; return ds(n, function (n, e, u) { return r = !!t(n, e, u) }), r } function te(n, t, r) { for (var e = -1, u = n.length; ++e < u;) { var i = n[e], o = t(i); if (null != o && (f === X ? o === o && !wa(o) : r(o, f))) var f = o, a = i } return a } function ee(n, t, r, e) { var u = n.length; for (r = Oa(r), r < 0 && (r = -r > u ? 0 : u + r), e = e === X || e > u ? u : Oa(e), e < 0 && (e += u), e = r > e ? 0 : Ia(e); r < e;)n[r++] = t; return n } function ue(n, t) { var r = []; return ds(n, function (n, e, u) { t(n, e, u) && r.push(n) }), r } function oe(n, t, r, e, u) { var i = -1, o = n.length; for (r || (r = Ci), u || (u = []); ++i < o;) { var f = n[i]; t > 0 && r(f) ? t > 1 ? oe(f, t - 1, r, e, u) : s(u, f) : e || (u[u.length] = f) } return u } function fe(n, t) { return n && ws(n, t, qa) } function ve(n, t) { return n && ms(n, t, qa) } function de(n, t) { return f(t, function (t) { return ia(n[t]) }) } function we(n, t) { t = Ti(t, n) ? [t] : Iu(t); for (var r = 0, e = t.length; null != n && r < e;)n = n[to(t[r++])]; return r && r == e ? n : X } function me(n, t, r) { var e = t(n); return wh(n) ? e : s(e, r(n)) } function xe(n) { return null == n ? n === X ? et : Hn : (n = sl(n), Tl && Tl in n ? Oi(n) : Gi(n)) } function je(n, t) { return n > t } function Ae(n, t) { return null != n && wl.call(n, t) } function ke(n, t) { return null != n && t in sl(n) } function Oe(n, t, r) { return n >= Jl(t, r) && n < Hl(t, r) } function Ie(n, t, r) { for (var e = r ? c : a, u = n[0].length, i = n.length, o = i, f = ol(i), s = 1 / 0, h = []; o--;) { var p = n[o]; o && t && (p = l(p, E(t))), s = Jl(p.length, s), f[o] = !r && (t || u >= 120 && p.length >= 120) ? new dr(o && p) : X } p = n[0]; var v = -1, _ = f[0]; n: for (; ++v < u && h.length < s;) { var g = p[v], y = t ? t(g) : g; if (g = r || 0 !== g ? g : 0, !(_ ? W(_, y) : e(h, y, r))) { for (o = i; --o;) { var d = f[o]; if (!(d ? W(d, y) : e(n[o], y, r))) continue n } _ && _.push(y), h.push(g) } } return h } function Re(n, t, r, e) { return fe(n, function (n, u, i) { t(e, r(n), u, i) }), e } function ze(n, t, e) { Ti(t, n) || (t = Iu(t), n = Ji(n, t), t = Ao(t)); var u = null == n ? n : n[to(t)]; return null == u ? X : r(u, n, e) } function Ee(n) { return ca(n) && xe(n) == $n } function Se(n) { return ca(n) && xe(n) == ot } function We(n) { return ca(n) && xe(n) == Nn } function Le(n, t, r, e, u) { return n === t || (null == n || null == t || !aa(n) && !ca(t) ? n !== n && t !== t : Ce(n, t, r, e, Le, u)) } function Ce(n, t, r, e, u, i) { var o = wh(n), f = wh(t), a = Dn, c = Dn; o || (a = Es(n), a = a == $n ? Jn : a), f || (c = Es(t), c = c == $n ? Jn : c); var l = a == Jn, s = c == Jn, h = a == c; if (h && xh(n)) { if (!xh(t)) return !1; o = !0, l = !1 } if (h && !l) return i || (i = new mr), o || Ih(n) ? vi(n, t, r, e, u, i) : _i(n, t, a, r, e, u, i); if (!(r & sn)) { var p = l && wl.call(n, "__wrapped__"), v = s && wl.call(t, "__wrapped__"); if (p || v) { var _ = p ? n.value() : n, g = v ? t.value() : t; return i || (i = new mr), u(_, g, r, e, i) } } return !!h && (i || (i = new mr), gi(n, t, r, e, u, i)) } function Ue(n) { return ca(n) && Es(n) == Vn } function Be(n, t, r, e) { var u = r.length, i = u, o = !e; if (null == n) return !i; for (n = sl(n); u--;) { var f = r[u]; if (o && f[2] ? f[1] !== n[f[0]] : !(f[0] in n)) return !1 } for (; ++u < i;) { f = r[u]; var a = f[0], c = n[a], l = f[1]; if (o && f[2]) { if (c === X && !(a in n)) return !1 } else { var s = new mr; if (e) var h = e(c, l, a, n, t, s); if (!(h === X ? Le(l, c, sn | hn, e, s) : h)) return !1 } } return !0 } function Te(n) { if (!aa(n) || Mi(n)) return !1; var t = ia(n) ? Ol : Zt; return t.test(ro(n)) } function $e(n) { return ca(n) && xe(n) == Xn } function De(n) { return ca(n) && Es(n) == nt } function Me(n) { return ca(n) && fa(n.length) && !!Kr[xe(n)] } function Fe(n) { return "function" == typeof n ? n : null == n ? Cc : "object" == typeof n ? wh(n) ? Ve(n[0], n[1]) : Ke(n) : Nc(n) } function Ne(n) { if (!Fi(n)) return Gl(n); var t = []; for (var r in sl(n)) wl.call(n, r) && "constructor" != r && t.push(r); return t } function Pe(n) { if (!aa(n)) return Vi(n); var t = Fi(n), r = []; for (var e in n) ("constructor" != e || !t && wl.call(n, e)) && r.push(e); return r } function qe(n, t) { return n < t } function Ze(n, t) { var r = -1, e = Jf(n) ? ol(n.length) : []; return ds(n, function (n, u, i) { e[++r] = t(n, u, i) }), e } function Ke(n) { var t = Ai(n); return 1 == t.length && t[0][2] ? Pi(t[0][0], t[0][1]) : function (r) { return r === n || Be(r, n, t) } } function Ve(n, t) { return Ti(n) && Ni(t) ? Pi(to(n), t) : function (r) { var e = Fa(r, n); return e === X && e === t ? Pa(r, n) : Le(t, e, sn | hn) } } function Ge(n, t, r, e, u) { n !== t && ws(t, function (i, o) { if (aa(i)) u || (u = new mr), He(n, t, o, r, Ge, e, u); else { var f = e ? e(n[o], i, o + "", n, t, u) : X; f === X && (f = i), Wr(n, o, f) } }, Za) } function He(n, t, r, e, u, i, o) { var f = n[r], a = t[r], c = o.get(a); if (c) return void Wr(n, r, c); var l = i ? i(f, a, r + "", n, t, o) : X, s = l === X; if (s) { var h = wh(a), p = !h && xh(a), v = !h && !p && Ih(a); l = a, h || p || v ? wh(f) ? l = f : Yf(f) ? l = Fu(f) : p ? (s = !1, l = zu(a, !0)) : v ? (s = !1, l = Bu(a, !0)) : l = [] : ya(a) || bh(a) ? (l = f, bh(f) ? l = za(f) : (!aa(f) || e && ia(f)) && (l = Si(a))) : s = !1 } s && (o.set(a, l), u(l, a, e, i, o), o.delete(a)), Wr(n, r, l) } function Je(n, t) { var r = n.length; if (r) return t += t < 0 ? r : 0, Ui(t, r) ? n[t] : X } function Ye(n, t, r) { var e = -1; t = l(t.length ? t : [Cc], E(xi())); var u = Ze(n, function (n, r, u) { var i = l(t, function (t) { return t(n) }); return { criteria: i, index: ++e, value: n } }); return O(u, function (n, t) { return $u(n, t, r) }) } function Qe(n, t) { return n = sl(n), Xe(n, t, function (t, r) { return Pa(n, r) }) } function Xe(n, t, r) { for (var e = -1, u = t.length, i = {}; ++e < u;) { var o = t[e], f = we(n, o); r(f, o) && cu(i, o, f) } return i } function nu(n) { return function (t) { return we(t, n) } } function tu(n, t, r, e) { var u = e ? w : b, i = -1, o = t.length, f = n; for (n === t && (t = Fu(t)), r && (f = l(n, E(r))); ++i < o;)for (var a = 0, c = t[i], s = r ? r(c) : c; (a = u(f, s, a, e)) > -1;)f !== n && Cl.call(f, a, 1), Cl.call(n, a, 1); return n } function ru(n, t) { for (var r = n ? t.length : 0, e = r - 1; r--;) { var u = t[r]; if (r == e || u !== i) { var i = u; if (Ui(u)) Cl.call(n, u, 1); else if (Ti(u, n)) delete n[to(u)]; else { var o = Iu(u), f = Ji(n, o); null != f && delete f[to(Ao(o))] } } } return n } function eu(n, t) { return n + Pl(Xl() * (t - n + 1)) } function uu(n, t, r, e) { for (var u = -1, i = Hl(Nl((t - n) / (r || 1)), 0), o = ol(i); i--;)o[e ? i : ++u] = n, n += r; return o } function iu(n, t) { var r = ""; if (!n || t < 1 || t > Sn) return r; do t % 2 && (r += n), t = Pl(t / 2), t && (n += n); while (t); return r } function ou(n, t) { return Cs(Hi(n, t, Cc), n + "") } function fu(n) { return Rr(ec(n)) } function au(n, t) { var r = ec(n); return no(r, Nr(t, 0, r.length)) } function cu(n, t, r, e) { if (!aa(n)) return n; t = Ti(t, n) ? [t] : Iu(t); for (var u = -1, i = t.length, o = i - 1, f = n; null != f && ++u < i;) { var a = to(t[u]), c = r; if (u != o) { var l = f[a]; c = e ? e(l, a, f) : X, c === X && (c = aa(l) ? l : Ui(t[u + 1]) ? [] : {}) } Lr(f, a, c), f = f[a] } return n } function lu(n) { return no(ec(n)) } function su(n, t, r) { var e = -1, u = n.length; t < 0 && (t = -t > u ? 0 : u + t), r = r > u ? u : r, r < 0 && (r += u), u = t > r ? 0 : r - t >>> 0, t >>>= 0; for (var i = ol(u); ++e < u;)i[e] = n[e + t]; return i } function hu(n, t) { var r; return ds(n, function (n, e, u) { return r = t(n, e, u), !r }), !!r } function pu(n, t, r) { var e = 0, u = null == n ? e : n.length; if ("number" == typeof t && t === t && u <= Bn) { for (; e < u;) { var i = e + u >>> 1, o = n[i]; null !== o && !wa(o) && (r ? o <= t : o < t) ? e = i + 1 : u = i } return u } return vu(n, t, Cc, r) } function vu(n, t, r, e) { t = r(t); for (var u = 0, i = null == n ? 0 : n.length, o = t !== t, f = null === t, a = wa(t), c = t === X; u < i;) { var l = Pl((u + i) / 2), s = r(n[l]), h = s !== X, p = null === s, v = s === s, _ = wa(s); if (o) var g = e || v; else g = c ? v && (e || h) : f ? v && h && (e || !p) : a ? v && h && !p && (e || !_) : !p && !_ && (e ? s <= t : s < t); g ? u = l + 1 : i = l } return Jl(i, Un) } function _u(n, t) { for (var r = -1, e = n.length, u = 0, i = []; ++r < e;) { var o = n[r], f = t ? t(o) : o; if (!r || !Hf(f, a)) { var a = f; i[u++] = 0 === o ? 0 : o } } return i } function gu(n) { return "number" == typeof n ? n : wa(n) ? Ln : +n } function yu(n) { if ("string" == typeof n) return n; if (wh(n)) return l(n, yu) + ""; if (wa(n)) return gs ? gs.call(n) : ""; var t = n + ""; return "0" == t && 1 / n == -En ? "-0" : t } function du(n, t, r) { var e = -1, u = a, i = n.length, o = !0, f = [], l = f; if (r) o = !1, u = c; else if (i >= tn) { var s = t ? null : Os(n); if (s) return q(s); o = !1, u = W, l = new dr } else l = t ? [] : f; n: for (; ++e < i;) { var h = n[e], p = t ? t(h) : h; if (h = r || 0 !== h ? h : 0, o && p === p) { for (var v = l.length; v--;)if (l[v] === p) continue n; t && l.push(p), f.push(h) } else u(l, p, r) || (l !== f && l.push(p), f.push(h)) } return f } function bu(n, t) { t = Ti(t, n) ? [t] : Iu(t), n = Ji(n, t); var r = to(Ao(t)); return !(null != n && wl.call(n, r)) || delete n[r] } function wu(n, t, r, e) { return cu(n, t, r(we(n, t)), e) } function mu(n, t, r, e) { for (var u = n.length, i = e ? u : -1; (e ? i-- : ++i < u) && t(n[i], i, n);); return r ? su(n, e ? 0 : i, e ? i + 1 : u) : su(n, e ? i + 1 : 0, e ? u : i) } function xu(n, t) { var r = n; return r instanceof Dt && (r = r.value()), h(t, function (n, t) { return t.func.apply(t.thisArg, s([n], t.args)) }, r) } function ju(n, t, r) { var e = n.length; if (e < 2) return e ? du(n[0]) : []; for (var u = -1, i = ol(e); ++u < e;)for (var o = n[u], f = -1; ++f < e;)f != u && (i[u] = Yr(i[u] || o, n[f], t, r)); return du(oe(i, 1), t, r) } function Au(n, t, r) { for (var e = -1, u = n.length, i = t.length, o = {}; ++e < u;) { var f = e < i ? t[e] : X; r(o, n[e], f) } return o } function ku(n) { return Yf(n) ? n : [] } function Ou(n) { return "function" == typeof n ? n : Cc } function Iu(n) { return wh(n) ? n : Us(n) } function Ru(n, t, r) { var e = n.length; return r = r === X ? e : r, !t && r >= e ? n : su(n, t, r) } function zu(n, t) { if (t) return n.slice(); var r = n.length, e = El ? El(r) : new n.constructor(r); return n.copy(e), e } function Eu(n) { var t = new n.constructor(n.byteLength); return new zl(t).set(new zl(n)), t } function Su(n, t) { var r = t ? Eu(n.buffer) : n.buffer; return new n.constructor(r, n.byteOffset, n.byteLength) } function Wu(t, r, e) { var u = r ? e(F(t), an) : F(t); return h(u, n, new t.constructor) } function Lu(n) { var t = new n.constructor(n.source, Nt.exec(n)); return t.lastIndex = n.lastIndex, t } function Cu(n, r, e) { var u = r ? e(q(n), an) : q(n); return h(u, t, new n.constructor) } function Uu(n) { return _s ? sl(_s.call(n)) : {} } function Bu(n, t) { var r = t ? Eu(n.buffer) : n.buffer; return new n.constructor(r, n.byteOffset, n.length) } function Tu(n, t) { if (n !== t) { var r = n !== X, e = null === n, u = n === n, i = wa(n), o = t !== X, f = null === t, a = t === t, c = wa(t); if (!f && !c && !i && n > t || i && o && a && !f && !c || e && o && a || !r && a || !u) return 1; if (!e && !i && !c && n < t || c && r && u && !e && !i || f && r && u || !o && u || !a) return -1 } return 0 } function $u(n, t, r) { for (var e = -1, u = n.criteria, i = t.criteria, o = u.length, f = r.length; ++e < o;) { var a = Tu(u[e], i[e]); if (a) { if (e >= f) return a; var c = r[e]; return a * ("desc" == c ? -1 : 1) } } return n.index - t.index } function Du(n, t, r, e) { for (var u = -1, i = n.length, o = r.length, f = -1, a = t.length, c = Hl(i - o, 0), l = ol(a + c), s = !e; ++f < a;)l[f] = t[f]; for (; ++u < o;)(s || u < i) && (l[r[u]] = n[u]); for (; c--;)l[f++] = n[u++]; return l } function Mu(n, t, r, e) { for (var u = -1, i = n.length, o = -1, f = r.length, a = -1, c = t.length, l = Hl(i - f, 0), s = ol(l + c), h = !e; ++u < l;)s[u] = n[u]; for (var p = u; ++a < c;)s[p + a] = t[a]; for (; ++o < f;)(h || u < i) && (s[p + r[o]] = n[u++]); return s } function Fu(n, t) { var r = -1, e = n.length; for (t || (t = ol(e)); ++r < e;)t[r] = n[r]; return t } function Nu(n, t, r, e) { var u = !r; r || (r = {}); for (var i = -1, o = t.length; ++i < o;) { var f = t[i], a = e ? e(r[f], n[f], f, r, n) : X; a === X && (a = n[f]), u ? Mr(r, f, a) : Lr(r, f, a) } return r } function Pu(n, t) { return Nu(n, Rs(n), t) } function qu(n, t) { return Nu(n, zs(n), t) } function Zu(n, t) { return function (r, u) { var i = wh(r) ? e : Ur, o = t ? t() : {}; return i(r, n, xi(u, 2), o) } } function Ku(n) { return ou(function (t, r) { var e = -1, u = r.length, i = u > 1 ? r[u - 1] : X, o = u > 2 ? r[2] : X; for (i = n.length > 3 && "function" == typeof i ? (u-- , i) : X, o && Bi(r[0], r[1], o) && (i = u < 3 ? X : i, u = 1), t = sl(t); ++e < u;) { var f = r[e]; f && n(t, f, e, i) } return t }) } function Vu(n, t) { return function (r, e) { if (null == r) return r; if (!Jf(r)) return n(r, e); for (var u = r.length, i = t ? u : -1, o = sl(r); (t ? i-- : ++i < u) && e(o[i], i, o) !== !1;); return r } } function Gu(n) { return function (t, r, e) { for (var u = -1, i = sl(t), o = e(t), f = o.length; f--;) { var a = o[n ? f : ++u]; if (r(i[a], a, i) === !1) break } return t } } function Hu(n, t, r) { function e() { var t = this && this !== re && this instanceof e ? i : n; return t.apply(u ? r : this, arguments) } var u = t & pn, i = Qu(n); return e } function Ju(n) { return function (t) { t = Sa(t); var r = $(t) ? H(t) : X, e = r ? r[0] : t.charAt(0), u = r ? Ru(r, 1).join("") : t.slice(1); return e[n]() + u } } function Yu(n) { return function (t) { return h(zc(cc(t).replace($r, "")), n, "") } } function Qu(n) { return function () { var t = arguments; switch (t.length) { case 0: return new n; case 1: return new n(t[0]); case 2: return new n(t[0], t[1]); case 3: return new n(t[0], t[1], t[2]); case 4: return new n(t[0], t[1], t[2], t[3]); case 5: return new n(t[0], t[1], t[2], t[3], t[4]); case 6: return new n(t[0], t[1], t[2], t[3], t[4], t[5]); case 7: return new n(t[0], t[1], t[2], t[3], t[4], t[5], t[6]) }var r = ys(n.prototype), e = n.apply(r, t); return aa(e) ? e : r } } function Xu(n, t, e) { function u() { for (var o = arguments.length, f = ol(o), a = o, c = mi(u); a--;)f[a] = arguments[a]; var l = o < 3 && f[0] !== c && f[o - 1] !== c ? [] : P(f, c); if (o -= l.length, o < e) return li(n, t, ri, u.placeholder, X, f, l, X, X, e - o); var s = this && this !== re && this instanceof u ? i : n; return r(s, this, f) } var i = Qu(n); return u } function ni(n) { return function (t, r, e) { var u = sl(t); if (!Jf(t)) { var i = xi(r, 3); t = qa(t), r = function (n) { return i(u[n], n, u) } } var o = n(t, r, e); return o > -1 ? u[i ? t[o] : o] : X } } function ti(n) { return yi(function (t) { var r = t.length, e = r, u = Y.prototype.thru; for (n && t.reverse(); e--;) { var i = t[e]; if ("function" != typeof i) throw new vl(en); if (u && !o && "wrapper" == wi(i)) var o = new Y([], !0) } for (e = o ? e : r; ++e < r;) { i = t[e]; var f = wi(i), a = "wrapper" == f ? Is(i) : X; o = a && Di(a[0]) && a[1] == (wn | gn | dn | mn) && !a[4].length && 1 == a[9] ? o[wi(a[0])].apply(o, a[3]) : 1 == i.length && Di(i) ? o[f]() : o.thru(i) } return function () { var n = arguments, e = n[0]; if (o && 1 == n.length && wh(e) && e.length >= tn) return o.plant(e).value(); for (var u = 0, i = r ? t[u].apply(this, n) : e; ++u < r;)i = t[u].call(this, i); return i } }) } function ri(n, t, r, e, u, i, o, f, a, c) { function l() { for (var y = arguments.length, d = ol(y), b = y; b--;)d[b] = arguments[b]; if (v) var w = mi(l), m = U(d, w); if (e && (d = Du(d, e, u, v)), i && (d = Mu(d, i, o, v)), y -= m, v && y < c) { var x = P(d, w); return li(n, t, ri, l.placeholder, r, d, x, f, a, c - y) } var j = h ? r : this, A = p ? j[n] : n; return y = d.length, f ? d = Yi(d, f) : _ && y > 1 && d.reverse(), s && a < y && (d.length = a), this && this !== re && this instanceof l && (A = g || Qu(A)), A.apply(j, d) } var s = t & wn, h = t & pn, p = t & vn, v = t & (gn | yn), _ = t & xn, g = p ? X : Qu(n); return l } function ei(n, t) { return function (r, e) { return Re(r, n, t(e), {}) } } function ui(n, t) { return function (r, e) { var u; if (r === X && e === X) return t; if (r !== X && (u = r), e !== X) { if (u === X) return e; "string" == typeof r || "string" == typeof e ? (r = yu(r), e = yu(e)) : (r = gu(r), e = gu(e)), u = n(r, e) } return u } } function ii(n) { return yi(function (t) { return t = l(t, E(xi())), ou(function (e) { var u = this; return n(t, function (n) { return r(n, u, e) }) }) }) } function oi(n, t) { t = t === X ? " " : yu(t); var r = t.length; if (r < 2) return r ? iu(t, n) : t; var e = iu(t, Nl(n / G(t))); return $(t) ? Ru(H(e), 0, n).join("") : e.slice(0, n) } function fi(n, t, e, u) { function i() { for (var t = -1, a = arguments.length, c = -1, l = u.length, s = ol(l + a), h = this && this !== re && this instanceof i ? f : n; ++c < l;)s[c] = u[c]; for (; a--;)s[c++] = arguments[++t]; return r(h, o ? e : this, s) } var o = t & pn, f = Qu(n); return i } function ai(n) { return function (t, r, e) { return e && "number" != typeof e && Bi(t, r, e) && (r = e = X), t = ka(t), r === X ? (r = t, t = 0) : r = ka(r), e = e === X ? t < r ? 1 : -1 : ka(e), uu(t, r, e, n) } } function ci(n) { return function (t, r) { return "string" == typeof t && "string" == typeof r || (t = Ra(t), r = Ra(r)), n(t, r) } } function li(n, t, r, e, u, i, o, f, a, c) { var l = t & gn, s = l ? o : X, h = l ? X : o, p = l ? i : X, v = l ? X : i; t |= l ? dn : bn, t &= ~(l ? bn : dn), t & _n || (t &= ~(pn | vn)); var _ = [n, t, u, p, s, v, h, f, a, c], g = r.apply(X, _); return Di(n) && Ws(g, _), g.placeholder = e, Qi(g, n, t) } function si(n) { var t = ll[n]; return function (n, r) { if (n = Ra(n), r = Jl(Oa(r), 292)) { var e = (Sa(n) + "e").split("e"), u = t(e[0] + "e" + (+e[1] + r)); return e = (Sa(u) + "e").split("e"), +(e[0] + "e" + (+e[1] - r)) } return t(n) } } function hi(n) { return function (t) { var r = Es(t); return r == Vn ? F(t) : r == nt ? Z(t) : z(t, n(t)) } } function pi(n, t, r, e, u, i, o, f) { var a = t & vn; if (!a && "function" != typeof n) throw new vl(en); var c = e ? e.length : 0; if (c || (t &= ~(dn | bn), e = u = X), o = o === X ? o : Hl(Oa(o), 0), f = f === X ? f : Oa(f), c -= u ? u.length : 0, t & bn) { var l = e, s = u; e = u = X } var h = a ? X : Is(n), p = [n, t, r, e, u, l, s, i, o, f]; if (h && Zi(p, h), n = p[0], t = p[1], r = p[2], e = p[3], u = p[4], f = p[9] = null == p[9] ? a ? 0 : n.length : Hl(p[9] - c, 0), !f && t & (gn | yn) && (t &= ~(gn | yn)), t && t != pn) v = t == gn || t == yn ? Xu(n, t, f) : t != dn && t != (pn | dn) || u.length ? ri.apply(X, p) : fi(n, t, r, e); else var v = Hu(n, t, r); var _ = h ? xs : Ws; return Qi(_(v, p), n, t) } function vi(n, t, r, e, u, i) { var o = r & sn, f = n.length, a = t.length; if (f != a && !(o && a > f)) return !1; var c = i.get(n); if (c && i.get(t)) return c == t; var l = -1, s = !0, h = r & hn ? new dr : X; for (i.set(n, t), i.set(t, n); ++l < f;) { var p = n[l], _ = t[l]; if (e) var g = o ? e(_, p, l, t, n, i) : e(p, _, l, n, t, i); if (g !== X) { if (g) continue; s = !1; break } if (h) { if (!v(t, function (n, t) { if (!W(h, t) && (p === n || u(p, n, r, e, i))) return h.push(t) })) { s = !1; break } } else if (p !== _ && !u(p, _, r, e, i)) { s = !1; break } } return i.delete(n), i.delete(t), s } function _i(n, t, r, e, u, i, o) { switch (r) { case ft: if (n.byteLength != t.byteLength || n.byteOffset != t.byteOffset) return !1; n = n.buffer, t = t.buffer; case ot: return !(n.byteLength != t.byteLength || !i(new zl(n), new zl(t))); case Fn: case Nn: case Gn: return Hf(+n, +t); case qn: return n.name == t.name && n.message == t.message; case Xn: case tt: return n == t + ""; case Vn: var f = F; case nt: var a = e & sn; if (f || (f = q), n.size != t.size && !a) return !1; var c = o.get(n); if (c) return c == t; e |= hn, o.set(n, t); var l = vi(f(n), f(t), e, u, i, o); return o.delete(n), l; case rt: if (_s) return _s.call(n) == _s.call(t) }return !1 } function gi(n, t, r, e, u, i) {
            var o = r & sn, f = qa(n), a = f.length, c = qa(t), l = c.length; if (a != l && !o) return !1; for (var s = a; s--;) { var h = f[s]; if (!(o ? h in t : wl.call(t, h))) return !1 } var p = i.get(n); if (p && i.get(t)) return p == t; var v = !0; i.set(n, t), i.set(t, n); for (var _ = o; ++s < a;) { h = f[s]; var g = n[h], y = t[h]; if (e) var d = o ? e(y, g, h, t, n, i) : e(g, y, h, n, t, i); if (!(d === X ? g === y || u(g, y, r, e, i) : d)) { v = !1; break } _ || (_ = "constructor" == h) } if (v && !_) {
                var b = n.constructor, w = t.constructor; b != w && "constructor" in n && "constructor" in t && !("function" == typeof b && b instanceof b && "function" == typeof w && w instanceof w) && (v = !1)
            } return i.delete(n), i.delete(t), v
        } function yi(n) { return Cs(Hi(n, X, _o), n + "") } function di(n) { return me(n, qa, Rs) } function bi(n) { return me(n, Za, zs) } function wi(n) { for (var t = n.name + "", r = as[t], e = wl.call(as, t) ? r.length : 0; e--;) { var u = r[e], i = u.func; if (null == i || i == n) return u.name } return t } function mi(n) { var t = wl.call(K, "placeholder") ? K : n; return t.placeholder } function xi() { var n = K.iteratee || Uc; return n = n === Uc ? Fe : n, arguments.length ? n(arguments[0], arguments[1]) : n } function ji(n, t) { var r = n.__data__; return $i(t) ? r["string" == typeof t ? "string" : "hash"] : r.map } function Ai(n) { for (var t = qa(n), r = t.length; r--;) { var e = t[r], u = n[e]; t[r] = [e, u, Ni(u)] } return t } function ki(n, t) { var r = T(n, t); return Te(r) ? r : X } function Oi(n) { var t = wl.call(n, Tl), r = n[Tl]; try { n[Tl] = X; var e = !0 } catch (n) { } var u = jl.call(n); return e && (t ? n[Tl] = r : delete n[Tl]), u } function Ii(n, t, r) { for (var e = -1, u = r.length; ++e < u;) { var i = r[e], o = i.size; switch (i.type) { case "drop": n += o; break; case "dropRight": t -= o; break; case "take": t = Jl(t, n + o); break; case "takeRight": n = Hl(n, t - o) } } return { start: n, end: t } } function Ri(n) { var t = n.match(Tt); return t ? t[1].split($t) : [] } function zi(n, t, r) { t = Ti(t, n) ? [t] : Iu(t); for (var e = -1, u = t.length, i = !1; ++e < u;) { var o = to(t[e]); if (!(i = null != n && r(n, o))) break; n = n[o] } return i || ++e != u ? i : (u = null == n ? 0 : n.length, !!u && fa(u) && Ui(o, u) && (wh(n) || bh(n))) } function Ei(n) { var t = n.length, r = n.constructor(t); return t && "string" == typeof n[0] && wl.call(n, "index") && (r.index = n.index, r.input = n.input), r } function Si(n) { return "function" != typeof n.constructor || Fi(n) ? {} : ys(Sl(n)) } function Wi(n, t, r, e) { var u = n.constructor; switch (t) { case ot: return Eu(n); case Fn: case Nn: return new u(+n); case ft: return Su(n, e); case at: case ct: case lt: case st: case ht: case pt: case vt: case _t: case gt: return Bu(n, e); case Vn: return Wu(n, e, r); case Gn: case tt: return new u(n); case Xn: return Lu(n); case nt: return Cu(n, e, r); case rt: return Uu(n) } } function Li(n, t) { var r = t.length; if (!r) return n; var e = r - 1; return t[e] = (r > 1 ? "& " : "") + t[e], t = t.join(r > 2 ? ", " : " "), n.replace(Bt, "{\n/* [wrapped with " + t + "] */\n") } function Ci(n) { return wh(n) || bh(n) || !!(Ul && n && n[Ul]) } function Ui(n, t) { return t = null == t ? Sn : t, !!t && ("number" == typeof n || Vt.test(n)) && n > -1 && n % 1 == 0 && n < t } function Bi(n, t, r) { if (!aa(r)) return !1; var e = typeof t; return !!("number" == e ? Jf(r) && Ui(t, r.length) : "string" == e && t in r) && Hf(r[t], n) } function Ti(n, t) { if (wh(n)) return !1; var r = typeof n; return !("number" != r && "symbol" != r && "boolean" != r && null != n && !wa(n)) || (Rt.test(n) || !It.test(n) || null != t && n in sl(t)) } function $i(n) { var t = typeof n; return "string" == t || "number" == t || "symbol" == t || "boolean" == t ? "__proto__" !== n : null === n } function Di(n) { var t = wi(n), r = K[t]; if ("function" != typeof r || !(t in Dt.prototype)) return !1; if (n === r) return !0; var e = Is(r); return !!e && n === e[0] } function Mi(n) { return !!xl && xl in n } function Fi(n) { var t = n && n.constructor, r = "function" == typeof t && t.prototype || yl; return n === r } function Ni(n) { return n === n && !aa(n) } function Pi(n, t) { return function (r) { return null != r && (r[n] === t && (t !== X || n in sl(r))) } } function qi(n) { var t = Uf(n, function (n) { return r.size === on && r.clear(), n }), r = t.cache; return t } function Zi(n, t) { var r = n[1], e = t[1], u = r | e, i = u < (pn | vn | wn), o = e == wn && r == gn || e == wn && r == mn && n[7].length <= t[8] || e == (wn | mn) && t[7].length <= t[8] && r == gn; if (!i && !o) return n; e & pn && (n[2] = t[2], u |= r & pn ? 0 : _n); var f = t[3]; if (f) { var a = n[3]; n[3] = a ? Du(a, f, t[4]) : f, n[4] = a ? P(n[3], fn) : t[4] } return f = t[5], f && (a = n[5], n[5] = a ? Mu(a, f, t[6]) : f, n[6] = a ? P(n[5], fn) : t[6]), f = t[7], f && (n[7] = f), e & wn && (n[8] = null == n[8] ? t[8] : Jl(n[8], t[8])), null == n[9] && (n[9] = t[9]), n[0] = t[0], n[1] = u, n } function Ki(n, t, r, e, u, i) { return aa(n) && aa(t) && (i.set(t, n), Ge(n, t, X, Ki, i), i.delete(t)), n } function Vi(n) { var t = []; if (null != n) for (var r in sl(n)) t.push(r); return t } function Gi(n) { return jl.call(n) } function Hi(n, t, e) { return t = Hl(t === X ? n.length - 1 : t, 0), function () { for (var u = arguments, i = -1, o = Hl(u.length - t, 0), f = ol(o); ++i < o;)f[i] = u[t + i]; i = -1; for (var a = ol(t + 1); ++i < t;)a[i] = u[i]; return a[t] = e(f), r(n, this, a) } } function Ji(n, t) { return 1 == t.length ? n : we(n, su(t, 0, -1)) } function Yi(n, t) { for (var r = n.length, e = Jl(t.length, r), u = Fu(n); e--;) { var i = t[e]; n[e] = Ui(i, r) ? u[i] : X } return n } function Qi(n, t, r) { var e = t + ""; return Cs(n, Li(e, eo(Ri(e), r))) } function Xi(n) { var t = 0, r = 0; return function () { var e = Yl(), u = On - (e - r); if (r = e, u > 0) { if (++t >= kn) return arguments[0] } else t = 0; return n.apply(X, arguments) } } function no(n, t) { var r = -1, e = n.length, u = e - 1; for (t = t === X ? e : t; ++r < t;) { var i = eu(r, u), o = n[i]; n[i] = n[r], n[r] = o } return n.length = t, n } function to(n) { if ("string" == typeof n || wa(n)) return n; var t = n + ""; return "0" == t && 1 / n == -En ? "-0" : t } function ro(n) { if (null != n) { try { return bl.call(n) } catch (n) { } try { return n + "" } catch (n) { } } return "" } function eo(n, t) { return u(Tn, function (r) { var e = "_." + r[0]; t & r[1] && !a(n, e) && n.push(e) }), n.sort() } function uo(n) { if (n instanceof Dt) return n.clone(); var t = new Y(n.__wrapped__, n.__chain__); return t.__actions__ = Fu(n.__actions__), t.__index__ = n.__index__, t.__values__ = n.__values__, t } function io(n, t, r) { t = (r ? Bi(n, t, r) : t === X) ? 1 : Hl(Oa(t), 0); var e = null == n ? 0 : n.length; if (!e || t < 1) return []; for (var u = 0, i = 0, o = ol(Nl(e / t)); u < e;)o[i++] = su(n, u, u += t); return o } function oo(n) { for (var t = -1, r = null == n ? 0 : n.length, e = 0, u = []; ++t < r;) { var i = n[t]; i && (u[e++] = i) } return u } function fo() { var n = arguments.length; if (!n) return []; for (var t = ol(n - 1), r = arguments[0], e = n; e--;)t[e - 1] = arguments[e]; return s(wh(r) ? Fu(r) : [r], oe(t, 1)) } function ao(n, t, r) { var e = null == n ? 0 : n.length; return e ? (t = r || t === X ? 1 : Oa(t), su(n, t < 0 ? 0 : t, e)) : [] } function co(n, t, r) { var e = null == n ? 0 : n.length; return e ? (t = r || t === X ? 1 : Oa(t), t = e - t, su(n, 0, t < 0 ? 0 : t)) : [] } function lo(n, t) { return n && n.length ? mu(n, xi(t, 3), !0, !0) : [] } function so(n, t) { return n && n.length ? mu(n, xi(t, 3), !0) : [] } function ho(n, t, r, e) { var u = null == n ? 0 : n.length; return u ? (r && "number" != typeof r && Bi(n, t, r) && (r = 0, e = u), ee(n, t, r, e)) : [] } function po(n, t, r) { var e = null == n ? 0 : n.length; if (!e) return -1; var u = null == r ? 0 : Oa(r); return u < 0 && (u = Hl(e + u, 0)), d(n, xi(t, 3), u) } function vo(n, t, r) { var e = null == n ? 0 : n.length; if (!e) return -1; var u = e - 1; return r !== X && (u = Oa(r), u = r < 0 ? Hl(e + u, 0) : Jl(u, e - 1)), d(n, xi(t, 3), u, !0) } function _o(n) { var t = null == n ? 0 : n.length; return t ? oe(n, 1) : [] } function go(n) { var t = null == n ? 0 : n.length; return t ? oe(n, En) : [] } function yo(n, t) { var r = null == n ? 0 : n.length; return r ? (t = t === X ? 1 : Oa(t), oe(n, t)) : [] } function bo(n) { for (var t = -1, r = null == n ? 0 : n.length, e = {}; ++t < r;) { var u = n[t]; e[u[0]] = u[1] } return e } function wo(n) { return n && n.length ? n[0] : X } function mo(n, t, r) { var e = null == n ? 0 : n.length; if (!e) return -1; var u = null == r ? 0 : Oa(r); return u < 0 && (u = Hl(e + u, 0)), b(n, t, u) } function xo(n) { var t = null == n ? 0 : n.length; return t ? su(n, 0, -1) : [] } function jo(n, t) { return null == n ? "" : Vl.call(n, t) } function Ao(n) { var t = null == n ? 0 : n.length; return t ? n[t - 1] : X } function ko(n, t, r) { var e = null == n ? 0 : n.length; if (!e) return -1; var u = e; return r !== X && (u = Oa(r), u = u < 0 ? Hl(e + u, 0) : Jl(u, e - 1)), t === t ? V(n, t, u) : d(n, m, u, !0) } function Oo(n, t) { return n && n.length ? Je(n, Oa(t)) : X } function Io(n, t) { return n && n.length && t && t.length ? tu(n, t) : n } function Ro(n, t, r) { return n && n.length && t && t.length ? tu(n, t, xi(r, 2)) : n } function zo(n, t, r) { return n && n.length && t && t.length ? tu(n, t, X, r) : n } function Eo(n, t) { var r = []; if (!n || !n.length) return r; var e = -1, u = [], i = n.length; for (t = xi(t, 3); ++e < i;) { var o = n[e]; t(o, e, n) && (r.push(o), u.push(e)) } return ru(n, u), r } function So(n) { return null == n ? n : ns.call(n) } function Wo(n, t, r) { var e = null == n ? 0 : n.length; return e ? (r && "number" != typeof r && Bi(n, t, r) ? (t = 0, r = e) : (t = null == t ? 0 : Oa(t), r = r === X ? e : Oa(r)), su(n, t, r)) : [] } function Lo(n, t) { return pu(n, t) } function Co(n, t, r) { return vu(n, t, xi(r, 2)) } function Uo(n, t) { var r = null == n ? 0 : n.length; if (r) { var e = pu(n, t); if (e < r && Hf(n[e], t)) return e } return -1 } function Bo(n, t) { return pu(n, t, !0) } function To(n, t, r) { return vu(n, t, xi(r, 2), !0) } function $o(n, t) { var r = null == n ? 0 : n.length; if (r) { var e = pu(n, t, !0) - 1; if (Hf(n[e], t)) return e } return -1 } function Do(n) { return n && n.length ? _u(n) : [] } function Mo(n, t) { return n && n.length ? _u(n, xi(t, 2)) : [] } function Fo(n) { var t = null == n ? 0 : n.length; return t ? su(n, 1, t) : [] } function No(n, t, r) { return n && n.length ? (t = r || t === X ? 1 : Oa(t), su(n, 0, t < 0 ? 0 : t)) : [] } function Po(n, t, r) { var e = null == n ? 0 : n.length; return e ? (t = r || t === X ? 1 : Oa(t), t = e - t, su(n, t < 0 ? 0 : t, e)) : [] } function qo(n, t) { return n && n.length ? mu(n, xi(t, 3), !1, !0) : [] } function Zo(n, t) { return n && n.length ? mu(n, xi(t, 3)) : [] } function Ko(n) { return n && n.length ? du(n) : [] } function Vo(n, t) { return n && n.length ? du(n, xi(t, 2)) : [] } function Go(n, t) { return t = "function" == typeof t ? t : X, n && n.length ? du(n, X, t) : [] } function Ho(n) { if (!n || !n.length) return []; var t = 0; return n = f(n, function (n) { if (Yf(n)) return t = Hl(n.length, t), !0 }), R(t, function (t) { return l(n, j(t)) }) } function Jo(n, t) { if (!n || !n.length) return []; var e = Ho(n); return null == t ? e : l(e, function (n) { return r(t, X, n) }) } function Yo(n, t) { return Au(n || [], t || [], Lr) } function Qo(n, t) { return Au(n || [], t || [], cu) } function Xo(n) { var t = K(n); return t.__chain__ = !0, t } function nf(n, t) { return t(n), n } function tf(n, t) { return t(n) } function rf() { return Xo(this) } function ef() { return new Y(this.value(), this.__chain__) } function uf() { this.__values__ === X && (this.__values__ = Aa(this.value())); var n = this.__index__ >= this.__values__.length, t = n ? X : this.__values__[this.__index__++]; return { done: n, value: t } } function of() { return this } function ff(n) { for (var t, r = this; r instanceof J;) { var e = uo(r); e.__index__ = 0, e.__values__ = X, t ? u.__wrapped__ = e : t = e; var u = e; r = r.__wrapped__ } return u.__wrapped__ = n, t } function af() { var n = this.__wrapped__; if (n instanceof Dt) { var t = n; return this.__actions__.length && (t = new Dt(this)), t = t.reverse(), t.__actions__.push({ func: tf, args: [So], thisArg: X }), new Y(t, this.__chain__) } return this.thru(So) } function cf() { return xu(this.__wrapped__, this.__actions__) } function lf(n, t, r) { var e = wh(n) ? o : ne; return r && Bi(n, t, r) && (t = X), e(n, xi(t, 3)) } function sf(n, t) { var r = wh(n) ? f : ue; return r(n, xi(t, 3)) } function hf(n, t) { return oe(df(n, t), 1) } function pf(n, t) { return oe(df(n, t), En) } function vf(n, t, r) { return r = r === X ? 1 : Oa(r), oe(df(n, t), r) } function _f(n, t) { var r = wh(n) ? u : ds; return r(n, xi(t, 3)) } function gf(n, t) { var r = wh(n) ? i : bs; return r(n, xi(t, 3)) } function yf(n, t, r, e) { n = Jf(n) ? n : ec(n), r = r && !e ? Oa(r) : 0; var u = n.length; return r < 0 && (r = Hl(u + r, 0)), ba(n) ? r <= u && n.indexOf(t, r) > -1 : !!u && b(n, t, r) > -1 } function df(n, t) { var r = wh(n) ? l : Ze; return r(n, xi(t, 3)) } function bf(n, t, r, e) { return null == n ? [] : (wh(t) || (t = null == t ? [] : [t]), r = e ? X : r, wh(r) || (r = null == r ? [] : [r]), Ye(n, t, r)) } function wf(n, t, r) { var e = wh(n) ? h : k, u = arguments.length < 3; return e(n, xi(t, 4), r, u, ds) } function mf(n, t, r) { var e = wh(n) ? p : k, u = arguments.length < 3; return e(n, xi(t, 4), r, u, bs) } function xf(n, t) { var r = wh(n) ? f : ue; return r(n, Bf(xi(t, 3))) } function jf(n) { var t = wh(n) ? Rr : fu; return t(n) } function Af(n, t, r) { t = (r ? Bi(n, t, r) : t === X) ? 1 : Oa(t); var e = wh(n) ? zr : au; return e(n, t) } function kf(n) { var t = wh(n) ? Er : lu; return t(n) } function Of(n) { if (null == n) return 0; if (Jf(n)) return ba(n) ? G(n) : n.length; var t = Es(n); return t == Vn || t == nt ? n.size : Ne(n).length } function If(n, t, r) { var e = wh(n) ? v : hu; return r && Bi(n, t, r) && (t = X), e(n, xi(t, 3)) } function Rf(n, t) { if ("function" != typeof t) throw new vl(en); return n = Oa(n), function () { if (--n < 1) return t.apply(this, arguments) } } function zf(n, t, r) { return t = r ? X : t, t = n && null == t ? n.length : t, pi(n, wn, X, X, X, X, t) } function Ef(n, t) { var r; if ("function" != typeof t) throw new vl(en); return n = Oa(n), function () { return --n > 0 && (r = t.apply(this, arguments)), n <= 1 && (t = X), r } } function Sf(n, t, r) { t = r ? X : t; var e = pi(n, gn, X, X, X, X, X, t); return e.placeholder = Sf.placeholder, e } function Wf(n, t, r) { t = r ? X : t; var e = pi(n, yn, X, X, X, X, X, t); return e.placeholder = Wf.placeholder, e } function Lf(n, t, r) { function e(t) { var r = h, e = p; return h = p = X, d = t, _ = n.apply(e, r) } function u(n) { return d = n, g = Ls(f, t), b ? e(n) : _ } function i(n) { var r = n - y, e = n - d, u = t - r; return w ? Jl(u, v - e) : u } function o(n) { var r = n - y, e = n - d; return y === X || r >= t || r < 0 || w && e >= v } function f() { var n = ah(); return o(n) ? a(n) : void (g = Ls(f, i(n))) } function a(n) { return g = X, m && h ? e(n) : (h = p = X, _) } function c() { g !== X && ks(g), d = 0, h = y = p = g = X } function l() { return g === X ? _ : a(ah()) } function s() { var n = ah(), r = o(n); if (h = arguments, p = this, y = n, r) { if (g === X) return u(y); if (w) return g = Ls(f, t), e(y) } return g === X && (g = Ls(f, t)), _ } var h, p, v, _, g, y, d = 0, b = !1, w = !1, m = !0; if ("function" != typeof n) throw new vl(en); return t = Ra(t) || 0, aa(r) && (b = !!r.leading, w = "maxWait" in r, v = w ? Hl(Ra(r.maxWait) || 0, t) : v, m = "trailing" in r ? !!r.trailing : m), s.cancel = c, s.flush = l, s } function Cf(n) { return pi(n, xn) } function Uf(n, t) { if ("function" != typeof n || null != t && "function" != typeof t) throw new vl(en); var r = function () { var e = arguments, u = t ? t.apply(this, e) : e[0], i = r.cache; if (i.has(u)) return i.get(u); var o = n.apply(this, e); return r.cache = i.set(u, o) || i, o }; return r.cache = new (Uf.Cache || hr), r } function Bf(n) { if ("function" != typeof n) throw new vl(en); return function () { var t = arguments; switch (t.length) { case 0: return !n.call(this); case 1: return !n.call(this, t[0]); case 2: return !n.call(this, t[0], t[1]); case 3: return !n.call(this, t[0], t[1], t[2]) }return !n.apply(this, t) } } function Tf(n) { return Ef(2, n) } function $f(n, t) { if ("function" != typeof n) throw new vl(en); return t = t === X ? t : Oa(t), ou(n, t) } function Df(n, t) { if ("function" != typeof n) throw new vl(en); return t = t === X ? 0 : Hl(Oa(t), 0), ou(function (e) { var u = e[t], i = e.length - 1, o = Ru(e, 0, t); return u && s(o, u), t != i && s(o, Ru(e, t + 1)), r(n, this, o) }) } function Mf(n, t, r) { var e = !0, u = !0; if ("function" != typeof n) throw new vl(en); return aa(r) && (e = "leading" in r ? !!r.leading : e, u = "trailing" in r ? !!r.trailing : u), Lf(n, t, { leading: e, maxWait: t, trailing: u }) } function Ff(n) { return zf(n, 1) } function Nf(n, t) { return vh(Ou(t), n) } function Pf() { if (!arguments.length) return []; var n = arguments[0]; return wh(n) ? n : [n] } function qf(n) { return Pr(n, ln) } function Zf(n, t) { return t = "function" == typeof t ? t : X, Pr(n, ln, t) } function Kf(n) { return Pr(n, an | ln) } function Vf(n, t) { return t = "function" == typeof t ? t : X, Pr(n, an | ln, t) } function Gf(n, t) { return null == t || Hr(n, t, qa(t)) } function Hf(n, t) { return n === t || n !== n && t !== t } function Jf(n) { return null != n && fa(n.length) && !ia(n) } function Yf(n) { return ca(n) && Jf(n) } function Qf(n) { return n === !0 || n === !1 || ca(n) && xe(n) == Fn } function Xf(n) { return ca(n) && 1 === n.nodeType && !ya(n) } function na(n) { if (null == n) return !0; if (Jf(n) && (wh(n) || "string" == typeof n || "function" == typeof n.splice || xh(n) || Ih(n) || bh(n))) return !n.length; var t = Es(n); if (t == Vn || t == nt) return !n.size; if (Fi(n)) return !Ne(n).length; for (var r in n) if (wl.call(n, r)) return !1; return !0 } function ta(n, t) { return Le(n, t) } function ra(n, t, r) { r = "function" == typeof r ? r : X; var e = r ? r(n, t) : X; return e === X ? Le(n, t, X, r) : !!e } function ea(n) { if (!ca(n)) return !1; var t = xe(n); return t == qn || t == Pn || "string" == typeof n.message && "string" == typeof n.name && !ya(n) } function ua(n) { return "number" == typeof n && Kl(n) } function ia(n) { if (!aa(n)) return !1; var t = xe(n); return t == Zn || t == Kn || t == Mn || t == Qn } function oa(n) { return "number" == typeof n && n == Oa(n) } function fa(n) { return "number" == typeof n && n > -1 && n % 1 == 0 && n <= Sn } function aa(n) { var t = typeof n; return null != n && ("object" == t || "function" == t) } function ca(n) { return null != n && "object" == typeof n } function la(n, t) { return n === t || Be(n, t, Ai(t)) } function sa(n, t, r) { return r = "function" == typeof r ? r : X, Be(n, t, Ai(t), r) } function ha(n) { return ga(n) && n != +n } function pa(n) { if (Ss(n)) throw new al(rn); return Te(n) } function va(n) { return null === n } function _a(n) { return null == n } function ga(n) { return "number" == typeof n || ca(n) && xe(n) == Gn } function ya(n) { if (!ca(n) || xe(n) != Jn) return !1; var t = Sl(n); if (null === t) return !0; var r = wl.call(t, "constructor") && t.constructor; return "function" == typeof r && r instanceof r && bl.call(r) == Al } function da(n) { return oa(n) && n >= -Sn && n <= Sn } function ba(n) { return "string" == typeof n || !wh(n) && ca(n) && xe(n) == tt } function wa(n) { return "symbol" == typeof n || ca(n) && xe(n) == rt } function ma(n) { return n === X } function xa(n) { return ca(n) && Es(n) == ut } function ja(n) { return ca(n) && xe(n) == it } function Aa(n) { if (!n) return []; if (Jf(n)) return ba(n) ? H(n) : Fu(n); if (Bl && n[Bl]) return M(n[Bl]()); var t = Es(n), r = t == Vn ? F : t == nt ? q : ec; return r(n) } function ka(n) { if (!n) return 0 === n ? n : 0; if (n = Ra(n), n === En || n === -En) { var t = n < 0 ? -1 : 1; return t * Wn } return n === n ? n : 0 } function Oa(n) { var t = ka(n), r = t % 1; return t === t ? r ? t - r : t : 0 } function Ia(n) { return n ? Nr(Oa(n), 0, Cn) : 0 } function Ra(n) { if ("number" == typeof n) return n; if (wa(n)) return Ln; if (aa(n)) { var t = "function" == typeof n.valueOf ? n.valueOf() : n; n = aa(t) ? t + "" : t } if ("string" != typeof n) return 0 === n ? n : +n; n = n.replace(Lt, ""); var r = qt.test(n); return r || Kt.test(n) ? Xr(n.slice(2), r ? 2 : 8) : Pt.test(n) ? Ln : +n } function za(n) { return Nu(n, Za(n)) } function Ea(n) { return Nr(Oa(n), -Sn, Sn) } function Sa(n) { return null == n ? "" : yu(n) } function Wa(n, t) { var r = ys(n); return null == t ? r : Br(r, t) } function La(n, t) { return y(n, xi(t, 3), fe) } function Ca(n, t) { return y(n, xi(t, 3), ve) } function Ua(n, t) { return null == n ? n : ws(n, xi(t, 3), Za) } function Ba(n, t) { return null == n ? n : ms(n, xi(t, 3), Za) } function Ta(n, t) { return n && fe(n, xi(t, 3)) } function $a(n, t) { return n && ve(n, xi(t, 3)) } function Da(n) { return null == n ? [] : de(n, qa(n)) } function Ma(n) { return null == n ? [] : de(n, Za(n)) } function Fa(n, t, r) { var e = null == n ? X : we(n, t); return e === X ? r : e } function Na(n, t) { return null != n && zi(n, t, Ae) } function Pa(n, t) { return null != n && zi(n, t, ke) } function qa(n) { return Jf(n) ? Ir(n) : Ne(n) } function Za(n) { return Jf(n) ? Ir(n, !0) : Pe(n) } function Ka(n, t) { var r = {}; return t = xi(t, 3), fe(n, function (n, e, u) { Mr(r, t(n, e, u), n) }), r } function Va(n, t) { var r = {}; return t = xi(t, 3), fe(n, function (n, e, u) { Mr(r, e, t(n, e, u)) }), r } function Ga(n, t) { return Ha(n, Bf(xi(t))) } function Ha(n, t) { return null == n ? {} : Xe(n, bi(n), xi(t)) } function Ja(n, t, r) { t = Ti(t, n) ? [t] : Iu(t); var e = -1, u = t.length; for (u || (n = X, u = 1); ++e < u;) { var i = null == n ? X : n[to(t[e])]; i === X && (e = u, i = r), n = ia(i) ? i.call(n) : i } return n } function Ya(n, t, r) { return null == n ? n : cu(n, t, r) } function Qa(n, t, r, e) { return e = "function" == typeof e ? e : X, null == n ? n : cu(n, t, r, e) } function Xa(n, t, r) { var e = wh(n), i = e || xh(n) || Ih(n); if (t = xi(t, 4), null == r) { var o = n && n.constructor; r = i ? e ? new o : [] : aa(n) && ia(o) ? ys(Sl(n)) : {} } return (i ? u : fe)(n, function (n, e, u) { return t(r, n, e, u) }), r } function nc(n, t) { return null == n || bu(n, t) } function tc(n, t, r) { return null == n ? n : wu(n, t, Ou(r)) } function rc(n, t, r, e) { return e = "function" == typeof e ? e : X, null == n ? n : wu(n, t, Ou(r), e) } function ec(n) { return null == n ? [] : S(n, qa(n)) } function uc(n) { return null == n ? [] : S(n, Za(n)) } function ic(n, t, r) { return r === X && (r = t, t = X), r !== X && (r = Ra(r), r = r === r ? r : 0), t !== X && (t = Ra(t), t = t === t ? t : 0), Nr(Ra(n), t, r) } function oc(n, t, r) { return t = ka(t), r === X ? (r = t, t = 0) : r = ka(r), n = Ra(n), Oe(n, t, r) } function fc(n, t, r) { if (r && "boolean" != typeof r && Bi(n, t, r) && (t = r = X), r === X && ("boolean" == typeof t ? (r = t, t = X) : "boolean" == typeof n && (r = n, n = X)), n === X && t === X ? (n = 0, t = 1) : (n = ka(n), t === X ? (t = n, n = 0) : t = ka(t)), n > t) { var e = n; n = t, t = e } if (r || n % 1 || t % 1) { var u = Xl(); return Jl(n + u * (t - n + Qr("1e-" + ((u + "").length - 1))), t) } return eu(n, t) } function ac(n) { return Xh(Sa(n).toLowerCase()) } function cc(n) { return n = Sa(n), n && n.replace(Gt, _e).replace(Dr, "") } function lc(n, t, r) { n = Sa(n), t = yu(t); var e = n.length; r = r === X ? e : Nr(Oa(r), 0, e); var u = r; return r -= t.length, r >= 0 && n.slice(r, u) == t } function sc(n) { return n = Sa(n), n && jt.test(n) ? n.replace(mt, ge) : n } function hc(n) { return n = Sa(n), n && Wt.test(n) ? n.replace(St, "\\$&") : n } function pc(n, t, r) { n = Sa(n), t = Oa(t); var e = t ? G(n) : 0; if (!t || e >= t) return n; var u = (t - e) / 2; return oi(Pl(u), r) + n + oi(Nl(u), r) } function vc(n, t, r) { n = Sa(n), t = Oa(t); var e = t ? G(n) : 0; return t && e < t ? n + oi(t - e, r) : n } function _c(n, t, r) { n = Sa(n), t = Oa(t); var e = t ? G(n) : 0; return t && e < t ? oi(t - e, r) + n : n } function gc(n, t, r) { return r || null == t ? t = 0 : t && (t = +t), Ql(Sa(n).replace(Ct, ""), t || 0) } function yc(n, t, r) { return t = (r ? Bi(n, t, r) : t === X) ? 1 : Oa(t), iu(Sa(n), t) } function dc() { var n = arguments, t = Sa(n[0]); return n.length < 3 ? t : t.replace(n[1], n[2]) } function bc(n, t, r) { return r && "number" != typeof r && Bi(n, t, r) && (t = r = X), (r = r === X ? Cn : r >>> 0) ? (n = Sa(n), n && ("string" == typeof t || null != t && !kh(t)) && (t = yu(t), !t && $(n)) ? Ru(H(n), 0, r) : n.split(t, r)) : [] } function wc(n, t, r) { return n = Sa(n), r = Nr(Oa(r), 0, n.length), t = yu(t), n.slice(r, r + t.length) == t } function mc(n, t, r) { var e = K.templateSettings; r && Bi(n, t, r) && (t = X), n = Sa(n), t = Wh({}, t, e, Sr); var u, i, o = Wh({}, t.imports, e.imports, Sr), f = qa(o), a = S(o, f), c = 0, l = t.interpolate || Ht, s = "__p += '", h = hl((t.escape || Ht).source + "|" + l.source + "|" + (l === Ot ? Ft : Ht).source + "|" + (t.evaluate || Ht).source + "|$", "g"), p = "//# sourceURL=" + ("sourceURL" in t ? t.sourceURL : "lodash.templateSources[" + ++Zr + "]") + "\n"; n.replace(h, function (t, r, e, o, f, a) { return e || (e = o), s += n.slice(c, a).replace(Jt, B), r && (u = !0, s += "' +\n__e(" + r + ") +\n'"), f && (i = !0, s += "';\n" + f + ";\n__p += '"), e && (s += "' +\n((__t = (" + e + ")) == null ? '' : __t) +\n'"), c = a + t.length, t }), s += "';\n"; var v = t.variable; v || (s = "with (obj) {\n" + s + "\n}\n"), s = (i ? s.replace(yt, "") : s).replace(dt, "$1").replace(bt, "$1;"), s = "function(" + (v || "obj") + ") {\n" + (v ? "" : "obj || (obj = {});\n") + "var __t, __p = ''" + (u ? ", __e = _.escape" : "") + (i ? ", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n" : ";\n") + s + "return __p\n}"; var _ = np(function () { return cl(f, p + "return " + s).apply(X, a) }); if (_.source = s, ea(_)) throw _; return _ } function xc(n) { return Sa(n).toLowerCase() } function jc(n) { return Sa(n).toUpperCase() } function Ac(n, t, r) { if (n = Sa(n), n && (r || t === X)) return n.replace(Lt, ""); if (!n || !(t = yu(t))) return n; var e = H(n), u = H(t), i = L(e, u), o = C(e, u) + 1; return Ru(e, i, o).join("") } function kc(n, t, r) { if (n = Sa(n), n && (r || t === X)) return n.replace(Ut, ""); if (!n || !(t = yu(t))) return n; var e = H(n), u = C(e, H(t)) + 1; return Ru(e, 0, u).join("") } function Oc(n, t, r) { if (n = Sa(n), n && (r || t === X)) return n.replace(Ct, ""); if (!n || !(t = yu(t))) return n; var e = H(n), u = L(e, H(t)); return Ru(e, u).join("") } function Ic(n, t) { var r = jn, e = An; if (aa(t)) { var u = "separator" in t ? t.separator : u; r = "length" in t ? Oa(t.length) : r, e = "omission" in t ? yu(t.omission) : e } n = Sa(n); var i = n.length; if ($(n)) { var o = H(n); i = o.length } if (r >= i) return n; var f = r - G(e); if (f < 1) return e; var a = o ? Ru(o, 0, f).join("") : n.slice(0, f); if (u === X) return a + e; if (o && (f += a.length - f), kh(u)) { if (n.slice(f).search(u)) { var c, l = a; for (u.global || (u = hl(u.source, Sa(Nt.exec(u)) + "g")), u.lastIndex = 0; c = u.exec(l);)var s = c.index; a = a.slice(0, s === X ? f : s) } } else if (n.indexOf(yu(u), f) != f) { var h = a.lastIndexOf(u); h > -1 && (a = a.slice(0, h)) } return a + e } function Rc(n) { return n = Sa(n), n && xt.test(n) ? n.replace(wt, ye) : n } function zc(n, t, r) { return n = Sa(n), t = r ? X : t, t === X ? D(n) ? Q(n) : g(n) : n.match(t) || [] } function Ec(n) { var t = null == n ? 0 : n.length, e = xi(); return n = t ? l(n, function (n) { if ("function" != typeof n[1]) throw new vl(en); return [e(n[0]), n[1]] }) : [], ou(function (e) { for (var u = -1; ++u < t;) { var i = n[u]; if (r(i[0], this, e)) return r(i[1], this, e) } }) } function Sc(n) { return Gr(Pr(n, an)) } function Wc(n) { return function () { return n } } function Lc(n, t) { return null == n || n !== n ? t : n } function Cc(n) { return n } function Uc(n) { return Fe("function" == typeof n ? n : Pr(n, an)) } function Bc(n) { return Ke(Pr(n, an)) } function Tc(n, t) { return Ve(n, Pr(t, an)) } function $c(n, t, r) { var e = qa(t), i = de(t, e); null != r || aa(t) && (i.length || !e.length) || (r = t, t = n, n = this, i = de(t, qa(t))); var o = !(aa(r) && "chain" in r && !r.chain), f = ia(n); return u(i, function (r) { var e = t[r]; n[r] = e, f && (n.prototype[r] = function () { var t = this.__chain__; if (o || t) { var r = n(this.__wrapped__), u = r.__actions__ = Fu(this.__actions__); return u.push({ func: e, args: arguments, thisArg: n }), r.__chain__ = t, r } return e.apply(n, s([this.value()], arguments)) }) }), n } function Dc() { return re._ === this && (re._ = kl), this } function Mc() { } function Fc(n) { return n = Oa(n), ou(function (t) { return Je(t, n) }) } function Nc(n) { return Ti(n) ? j(to(n)) : nu(n) } function Pc(n) { return function (t) { return null == n ? X : we(n, t) } } function qc() { return [] } function Zc() { return !1 } function Kc() { return {} } function Vc() { return "" } function Gc() { return !0 } function Hc(n, t) { if (n = Oa(n), n < 1 || n > Sn) return []; var r = Cn, e = Jl(n, Cn); t = xi(t), n -= Cn; for (var u = R(e, t); ++r < n;)t(r); return u } function Jc(n) { return wh(n) ? l(n, to) : wa(n) ? [n] : Fu(Us(n)) } function Yc(n) { var t = ++ml; return Sa(n) + t } function Qc(n) { return n && n.length ? te(n, Cc, je) : X } function Xc(n, t) { return n && n.length ? te(n, xi(t, 2), je) : X } function nl(n) { return x(n, Cc) } function tl(n, t) { return x(n, xi(t, 2)) } function rl(n) { return n && n.length ? te(n, Cc, qe) : X } function el(n, t) { return n && n.length ? te(n, xi(t, 2), qe) : X } function ul(n) { return n && n.length ? I(n, Cc) : 0 } function il(n, t) { return n && n.length ? I(n, xi(t, 2)) : 0 } A = null == A ? re : be.defaults(re.Object(), A, be.pick(re, qr)); var ol = A.Array, fl = A.Date, al = A.Error, cl = A.Function, ll = A.Math, sl = A.Object, hl = A.RegExp, pl = A.String, vl = A.TypeError, _l = ol.prototype, gl = cl.prototype, yl = sl.prototype, dl = A["__core-js_shared__"], bl = gl.toString, wl = yl.hasOwnProperty, ml = 0, xl = function () { var n = /[^.]+$/.exec(dl && dl.keys && dl.keys.IE_PROTO || ""); return n ? "Symbol(src)_1." + n : "" }(), jl = yl.toString, Al = bl.call(sl), kl = re._, Ol = hl("^" + bl.call(wl).replace(St, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"), Il = ie ? A.Buffer : X, Rl = A.Symbol, zl = A.Uint8Array, El = Il ? Il.allocUnsafe : X, Sl = N(sl.getPrototypeOf, sl), Wl = sl.create, Ll = yl.propertyIsEnumerable, Cl = _l.splice, Ul = Rl ? Rl.isConcatSpreadable : X, Bl = Rl ? Rl.iterator : X, Tl = Rl ? Rl.toStringTag : X, $l = function () { try { var n = ki(sl, "defineProperty"); return n({}, "", {}), n } catch (n) { } }(), Dl = A.clearTimeout !== re.clearTimeout && A.clearTimeout, Ml = fl && fl.now !== re.Date.now && fl.now, Fl = A.setTimeout !== re.setTimeout && A.setTimeout, Nl = ll.ceil, Pl = ll.floor, ql = sl.getOwnPropertySymbols, Zl = Il ? Il.isBuffer : X, Kl = A.isFinite, Vl = _l.join, Gl = N(sl.keys, sl), Hl = ll.max, Jl = ll.min, Yl = fl.now, Ql = A.parseInt, Xl = ll.random, ns = _l.reverse, ts = ki(A, "DataView"), rs = ki(A, "Map"), es = ki(A, "Promise"), us = ki(A, "Set"), is = ki(A, "WeakMap"), os = ki(sl, "create"), fs = is && new is, as = {}, cs = ro(ts), ls = ro(rs), ss = ro(es), hs = ro(us), ps = ro(is), vs = Rl ? Rl.prototype : X, _s = vs ? vs.valueOf : X, gs = vs ? vs.toString : X, ys = function () { function n() { } return function (t) { if (!aa(t)) return {}; if (Wl) return Wl(t); n.prototype = t; var r = new n; return n.prototype = X, r } }(); K.templateSettings = { escape: At, evaluate: kt, interpolate: Ot, variable: "", imports: { _: K } }, K.prototype = J.prototype, K.prototype.constructor = K, Y.prototype = ys(J.prototype), Y.prototype.constructor = Y, Dt.prototype = ys(J.prototype), Dt.prototype.constructor = Dt, nr.prototype.clear = tr, nr.prototype.delete = rr, nr.prototype.get = er, nr.prototype.has = ur, nr.prototype.set = ir, or.prototype.clear = fr, or.prototype.delete = ar, or.prototype.get = cr, or.prototype.has = lr, or.prototype.set = sr, hr.prototype.clear = pr, hr.prototype.delete = vr, hr.prototype.get = _r, hr.prototype.has = gr, hr.prototype.set = yr, dr.prototype.add = dr.prototype.push = br, dr.prototype.has = wr, mr.prototype.clear = xr, mr.prototype.delete = jr, mr.prototype.get = Ar, mr.prototype.has = kr, mr.prototype.set = Or; var ds = Vu(fe), bs = Vu(ve, !0), ws = Gu(), ms = Gu(!0), xs = fs ? function (n, t) { return fs.set(n, t), n } : Cc, js = $l ? function (n, t) { return $l(n, "toString", { configurable: !0, enumerable: !1, value: Wc(t), writable: !0 }) } : Cc, As = ou, ks = Dl || function (n) { return re.clearTimeout(n) }, Os = us && 1 / q(new us([, -0]))[1] == En ? function (n) { return new us(n) } : Mc, Is = fs ? function (n) { return fs.get(n) } : Mc, Rs = ql ? N(ql, sl) : qc, zs = ql ? function (n) { for (var t = []; n;)s(t, Rs(n)), n = Sl(n); return t } : qc, Es = xe; (ts && Es(new ts(new ArrayBuffer(1))) != ft || rs && Es(new rs) != Vn || es && Es(es.resolve()) != Yn || us && Es(new us) != nt || is && Es(new is) != ut) && (Es = function (n) { var t = xe(n), r = t == Jn ? n.constructor : X, e = r ? ro(r) : ""; if (e) switch (e) { case cs: return ft; case ls: return Vn; case ss: return Yn; case hs: return nt; case ps: return ut }return t }); var Ss = dl ? ia : Zc, Ws = Xi(xs), Ls = Fl || function (n, t) { return re.setTimeout(n, t) }, Cs = Xi(js), Us = qi(function (n) { n = Sa(n); var t = []; return zt.test(n) && t.push(""), n.replace(Et, function (n, r, e, u) { t.push(e ? u.replace(Mt, "$1") : r || n) }), t }), Bs = ou(function (n, t) { return Yf(n) ? Yr(n, oe(t, 1, Yf, !0)) : [] }), Ts = ou(function (n, t) { var r = Ao(t); return Yf(r) && (r = X), Yf(n) ? Yr(n, oe(t, 1, Yf, !0), xi(r, 2)) : [] }), $s = ou(function (n, t) { var r = Ao(t); return Yf(r) && (r = X), Yf(n) ? Yr(n, oe(t, 1, Yf, !0), X, r) : [] }), Ds = ou(function (n) { var t = l(n, ku); return t.length && t[0] === n[0] ? Ie(t) : [] }), Ms = ou(function (n) { var t = Ao(n), r = l(n, ku); return t === Ao(r) ? t = X : r.pop(), r.length && r[0] === n[0] ? Ie(r, xi(t, 2)) : [] }), Fs = ou(function (n) { var t = Ao(n), r = l(n, ku); return t = "function" == typeof t ? t : X, t && r.pop(), r.length && r[0] === n[0] ? Ie(r, X, t) : [] }), Ns = ou(Io), Ps = yi(function (n, t) { var r = null == n ? 0 : n.length, e = Fr(n, t); return ru(n, l(t, function (n) { return Ui(n, r) ? +n : n }).sort(Tu)), e }), qs = ou(function (n) { return du(oe(n, 1, Yf, !0)) }), Zs = ou(function (n) { var t = Ao(n); return Yf(t) && (t = X), du(oe(n, 1, Yf, !0), xi(t, 2)) }), Ks = ou(function (n) { var t = Ao(n); return t = "function" == typeof t ? t : X, du(oe(n, 1, Yf, !0), X, t) }), Vs = ou(function (n, t) { return Yf(n) ? Yr(n, t) : [] }), Gs = ou(function (n) { return ju(f(n, Yf)) }), Hs = ou(function (n) { var t = Ao(n); return Yf(t) && (t = X), ju(f(n, Yf), xi(t, 2)) }), Js = ou(function (n) { var t = Ao(n); return t = "function" == typeof t ? t : X, ju(f(n, Yf), X, t) }), Ys = ou(Ho), Qs = ou(function (n) { var t = n.length, r = t > 1 ? n[t - 1] : X; return r = "function" == typeof r ? (n.pop(), r) : X, Jo(n, r) }), Xs = yi(function (n) { var t = n.length, r = t ? n[0] : 0, e = this.__wrapped__, u = function (t) { return Fr(t, n) }; return !(t > 1 || this.__actions__.length) && e instanceof Dt && Ui(r) ? (e = e.slice(r, +r + (t ? 1 : 0)), e.__actions__.push({ func: tf, args: [u], thisArg: X }), new Y(e, this.__chain__).thru(function (n) { return t && !n.length && n.push(X), n })) : this.thru(u) }), nh = Zu(function (n, t, r) { wl.call(n, r) ? ++n[r] : Mr(n, r, 1) }), th = ni(po), rh = ni(vo), eh = Zu(function (n, t, r) { wl.call(n, r) ? n[r].push(t) : Mr(n, r, [t]) }), uh = ou(function (n, t, e) { var u = -1, i = "function" == typeof t, o = Ti(t), f = Jf(n) ? ol(n.length) : []; return ds(n, function (n) { var a = i ? t : o && null != n ? n[t] : X; f[++u] = a ? r(a, n, e) : ze(n, t, e) }), f }), ih = Zu(function (n, t, r) { Mr(n, r, t) }), oh = Zu(function (n, t, r) { n[r ? 0 : 1].push(t) }, function () { return [[], []] }), fh = ou(function (n, t) { if (null == n) return []; var r = t.length; return r > 1 && Bi(n, t[0], t[1]) ? t = [] : r > 2 && Bi(t[0], t[1], t[2]) && (t = [t[0]]), Ye(n, oe(t, 1), []) }), ah = Ml || function () { return re.Date.now() }, ch = ou(function (n, t, r) { var e = pn; if (r.length) { var u = P(r, mi(ch)); e |= dn } return pi(n, e, t, r, u) }), lh = ou(function (n, t, r) { var e = pn | vn; if (r.length) { var u = P(r, mi(lh)); e |= dn } return pi(t, e, n, r, u) }), sh = ou(function (n, t) { return Jr(n, 1, t) }), hh = ou(function (n, t, r) { return Jr(n, Ra(t) || 0, r) }); Uf.Cache = hr; var ph = As(function (n, t) { t = 1 == t.length && wh(t[0]) ? l(t[0], E(xi())) : l(oe(t, 1), E(xi())); var e = t.length; return ou(function (u) { for (var i = -1, o = Jl(u.length, e); ++i < o;)u[i] = t[i].call(this, u[i]); return r(n, this, u) }) }), vh = ou(function (n, t) { var r = P(t, mi(vh)); return pi(n, dn, X, t, r) }), _h = ou(function (n, t) { var r = P(t, mi(_h)); return pi(n, bn, X, t, r) }), gh = yi(function (n, t) { return pi(n, mn, X, X, X, t) }), yh = ci(je), dh = ci(function (n, t) { return n >= t }), bh = Ee(function () { return arguments }()) ? Ee : function (n) { return ca(n) && wl.call(n, "callee") && !Ll.call(n, "callee") }, wh = ol.isArray, mh = ae ? E(ae) : Se, xh = Zl || Zc, jh = ce ? E(ce) : We, Ah = le ? E(le) : Ue, kh = se ? E(se) : $e, Oh = he ? E(he) : De, Ih = pe ? E(pe) : Me, Rh = ci(qe), zh = ci(function (n, t) { return n <= t }), Eh = Ku(function (n, t) { if (Fi(t) || Jf(t)) return void Nu(t, qa(t), n); for (var r in t) wl.call(t, r) && Lr(n, r, t[r]) }), Sh = Ku(function (n, t) { Nu(t, Za(t), n) }), Wh = Ku(function (n, t, r, e) { Nu(t, Za(t), n, e) }), Lh = Ku(function (n, t, r, e) { Nu(t, qa(t), n, e) }), Ch = yi(Fr), Uh = ou(function (n) { return n.push(X, Sr), r(Wh, X, n) }), Bh = ou(function (n) { return n.push(X, Ki), r(Fh, X, n) }), Th = ei(function (n, t, r) { n[t] = r }, Wc(Cc)), $h = ei(function (n, t, r) { wl.call(n, t) ? n[t].push(r) : n[t] = [r] }, xi), Dh = ou(ze), Mh = Ku(function (n, t, r) { Ge(n, t, r) }), Fh = Ku(function (n, t, r, e) { Ge(n, t, r, e) }), Nh = yi(function (n, t) { var r = {}; if (null == n) return r; Nu(n, bi(n), r), r = Pr(r, an | cn | ln); for (var e = t.length; e--;)bu(r, t[e]); return r }), Ph = yi(function (n, t) { return null == n ? {} : Qe(n, l(t, to)) }), qh = hi(qa), Zh = hi(Za), Kh = Yu(function (n, t, r) { return t = t.toLowerCase(), n + (r ? ac(t) : t) }), Vh = Yu(function (n, t, r) { return n + (r ? "-" : "") + t.toLowerCase() }), Gh = Yu(function (n, t, r) { return n + (r ? " " : "") + t.toLowerCase() }), Hh = Ju("toLowerCase"), Jh = Yu(function (n, t, r) { return n + (r ? "_" : "") + t.toLowerCase() }), Yh = Yu(function (n, t, r) { return n + (r ? " " : "") + Xh(t) }), Qh = Yu(function (n, t, r) { return n + (r ? " " : "") + t.toUpperCase() }), Xh = Ju("toUpperCase"), np = ou(function (n, t) { try { return r(n, X, t) } catch (n) { return ea(n) ? n : new al(n) } }), tp = yi(function (n, t) { return u(t, function (t) { t = to(t), Mr(n, t, ch(n[t], n)) }), n }), rp = ti(), ep = ti(!0), up = ou(function (n, t) { return function (r) { return ze(r, n, t) } }), ip = ou(function (n, t) { return function (r) { return ze(n, r, t) } }), op = ii(l), fp = ii(o), ap = ii(v), cp = ai(), lp = ai(!0), sp = ui(function (n, t) { return n + t }, 0), hp = si("ceil"), pp = ui(function (n, t) { return n / t }, 1), vp = si("floor"), _p = ui(function (n, t) { return n * t }, 1), gp = si("round"), yp = ui(function (n, t) { return n - t }, 0); return K.after = Rf, K.ary = zf, K.assign = Eh, K.assignIn = Sh, K.assignInWith = Wh, K.assignWith = Lh, K.at = Ch, K.before = Ef, K.bind = ch, K.bindAll = tp, K.bindKey = lh, K.castArray = Pf, K.chain = Xo, K.chunk = io, K.compact = oo, K.concat = fo, K.cond = Ec, K.conforms = Sc, K.constant = Wc, K.countBy = nh, K.create = Wa, K.curry = Sf, K.curryRight = Wf, K.debounce = Lf, K.defaults = Uh,
            K.defaultsDeep = Bh, K.defer = sh, K.delay = hh, K.difference = Bs, K.differenceBy = Ts, K.differenceWith = $s, K.drop = ao, K.dropRight = co, K.dropRightWhile = lo, K.dropWhile = so, K.fill = ho, K.filter = sf, K.flatMap = hf, K.flatMapDeep = pf, K.flatMapDepth = vf, K.flatten = _o, K.flattenDeep = go, K.flattenDepth = yo, K.flip = Cf, K.flow = rp, K.flowRight = ep, K.fromPairs = bo, K.functions = Da, K.functionsIn = Ma, K.groupBy = eh, K.initial = xo, K.intersection = Ds, K.intersectionBy = Ms, K.intersectionWith = Fs, K.invert = Th, K.invertBy = $h, K.invokeMap = uh, K.iteratee = Uc, K.keyBy = ih, K.keys = qa, K.keysIn = Za, K.map = df, K.mapKeys = Ka, K.mapValues = Va, K.matches = Bc, K.matchesProperty = Tc, K.memoize = Uf, K.merge = Mh, K.mergeWith = Fh, K.method = up, K.methodOf = ip, K.mixin = $c, K.negate = Bf, K.nthArg = Fc, K.omit = Nh, K.omitBy = Ga, K.once = Tf, K.orderBy = bf, K.over = op, K.overArgs = ph, K.overEvery = fp, K.overSome = ap, K.partial = vh, K.partialRight = _h, K.partition = oh, K.pick = Ph, K.pickBy = Ha, K.property = Nc, K.propertyOf = Pc, K.pull = Ns, K.pullAll = Io, K.pullAllBy = Ro, K.pullAllWith = zo, K.pullAt = Ps, K.range = cp, K.rangeRight = lp, K.rearg = gh, K.reject = xf, K.remove = Eo, K.rest = $f, K.reverse = So, K.sampleSize = Af, K.set = Ya, K.setWith = Qa, K.shuffle = kf, K.slice = Wo, K.sortBy = fh, K.sortedUniq = Do, K.sortedUniqBy = Mo, K.split = bc, K.spread = Df, K.tail = Fo, K.take = No, K.takeRight = Po, K.takeRightWhile = qo, K.takeWhile = Zo, K.tap = nf, K.throttle = Mf, K.thru = tf, K.toArray = Aa, K.toPairs = qh, K.toPairsIn = Zh, K.toPath = Jc, K.toPlainObject = za, K.transform = Xa, K.unary = Ff, K.union = qs, K.unionBy = Zs, K.unionWith = Ks, K.uniq = Ko, K.uniqBy = Vo, K.uniqWith = Go, K.unset = nc, K.unzip = Ho, K.unzipWith = Jo, K.update = tc, K.updateWith = rc, K.values = ec, K.valuesIn = uc, K.without = Vs, K.words = zc, K.wrap = Nf, K.xor = Gs, K.xorBy = Hs, K.xorWith = Js, K.zip = Ys, K.zipObject = Yo, K.zipObjectDeep = Qo, K.zipWith = Qs, K.entries = qh, K.entriesIn = Zh, K.extend = Sh, K.extendWith = Wh, $c(K, K), K.add = sp, K.attempt = np, K.camelCase = Kh, K.capitalize = ac, K.ceil = hp, K.clamp = ic, K.clone = qf, K.cloneDeep = Kf, K.cloneDeepWith = Vf, K.cloneWith = Zf, K.conformsTo = Gf, K.deburr = cc, K.defaultTo = Lc, K.divide = pp, K.endsWith = lc, K.eq = Hf, K.escape = sc, K.escapeRegExp = hc, K.every = lf, K.find = th, K.findIndex = po, K.findKey = La, K.findLast = rh, K.findLastIndex = vo, K.findLastKey = Ca, K.floor = vp, K.forEach = _f, K.forEachRight = gf, K.forIn = Ua, K.forInRight = Ba, K.forOwn = Ta, K.forOwnRight = $a, K.get = Fa, K.gt = yh, K.gte = dh, K.has = Na, K.hasIn = Pa, K.head = wo, K.identity = Cc, K.includes = yf, K.indexOf = mo, K.inRange = oc, K.invoke = Dh, K.isArguments = bh, K.isArray = wh, K.isArrayBuffer = mh, K.isArrayLike = Jf, K.isArrayLikeObject = Yf, K.isBoolean = Qf, K.isBuffer = xh, K.isDate = jh, K.isElement = Xf, K.isEmpty = na, K.isEqual = ta, K.isEqualWith = ra, K.isError = ea, K.isFinite = ua, K.isFunction = ia, K.isInteger = oa, K.isLength = fa, K.isMap = Ah, K.isMatch = la, K.isMatchWith = sa, K.isNaN = ha, K.isNative = pa, K.isNil = _a, K.isNull = va, K.isNumber = ga, K.isObject = aa, K.isObjectLike = ca, K.isPlainObject = ya, K.isRegExp = kh, K.isSafeInteger = da, K.isSet = Oh, K.isString = ba, K.isSymbol = wa, K.isTypedArray = Ih, K.isUndefined = ma, K.isWeakMap = xa, K.isWeakSet = ja, K.join = jo, K.kebabCase = Vh, K.last = Ao, K.lastIndexOf = ko, K.lowerCase = Gh, K.lowerFirst = Hh, K.lt = Rh, K.lte = zh, K.max = Qc, K.maxBy = Xc, K.mean = nl, K.meanBy = tl, K.min = rl, K.minBy = el, K.stubArray = qc, K.stubFalse = Zc, K.stubObject = Kc, K.stubString = Vc, K.stubTrue = Gc, K.multiply = _p, K.nth = Oo, K.noConflict = Dc, K.noop = Mc, K.now = ah, K.pad = pc, K.padEnd = vc, K.padStart = _c, K.parseInt = gc, K.random = fc, K.reduce = wf, K.reduceRight = mf, K.repeat = yc, K.replace = dc, K.result = Ja, K.round = gp, K.runInContext = _, K.sample = jf, K.size = Of, K.snakeCase = Jh, K.some = If, K.sortedIndex = Lo, K.sortedIndexBy = Co, K.sortedIndexOf = Uo, K.sortedLastIndex = Bo, K.sortedLastIndexBy = To, K.sortedLastIndexOf = $o, K.startCase = Yh, K.startsWith = wc, K.subtract = yp, K.sum = ul, K.sumBy = il, K.template = mc, K.times = Hc, K.toFinite = ka, K.toInteger = Oa, K.toLength = Ia, K.toLower = xc, K.toNumber = Ra, K.toSafeInteger = Ea, K.toString = Sa, K.toUpper = jc, K.trim = Ac, K.trimEnd = kc, K.trimStart = Oc, K.truncate = Ic, K.unescape = Rc, K.uniqueId = Yc, K.upperCase = Qh, K.upperFirst = Xh, K.each = _f, K.eachRight = gf, K.first = wo, $c(K, function () { var n = {}; return fe(K, function (t, r) { wl.call(K.prototype, r) || (n[r] = t) }), n }(), { chain: !1 }), K.VERSION = nn, u(["bind", "bindKey", "curry", "curryRight", "partial", "partialRight"], function (n) { K[n].placeholder = K }), u(["drop", "take"], function (n, t) { Dt.prototype[n] = function (r) { var e = this.__filtered__; if (e && !t) return new Dt(this); r = r === X ? 1 : Hl(Oa(r), 0); var u = this.clone(); return e ? u.__takeCount__ = Jl(r, u.__takeCount__) : u.__views__.push({ size: Jl(r, Cn), type: n + (u.__dir__ < 0 ? "Right" : "") }), u }, Dt.prototype[n + "Right"] = function (t) { return this.reverse()[n](t).reverse() } }), u(["filter", "map", "takeWhile"], function (n, t) { var r = t + 1, e = r == In || r == zn; Dt.prototype[n] = function (n) { var t = this.clone(); return t.__iteratees__.push({ iteratee: xi(n, 3), type: r }), t.__filtered__ = t.__filtered__ || e, t } }), u(["head", "last"], function (n, t) { var r = "take" + (t ? "Right" : ""); Dt.prototype[n] = function () { return this[r](1).value()[0] } }), u(["initial", "tail"], function (n, t) { var r = "drop" + (t ? "" : "Right"); Dt.prototype[n] = function () { return this.__filtered__ ? new Dt(this) : this[r](1) } }), Dt.prototype.compact = function () { return this.filter(Cc) }, Dt.prototype.find = function (n) { return this.filter(n).head() }, Dt.prototype.findLast = function (n) { return this.reverse().find(n) }, Dt.prototype.invokeMap = ou(function (n, t) { return "function" == typeof n ? new Dt(this) : this.map(function (r) { return ze(r, n, t) }) }), Dt.prototype.reject = function (n) { return this.filter(Bf(xi(n))) }, Dt.prototype.slice = function (n, t) { n = Oa(n); var r = this; return r.__filtered__ && (n > 0 || t < 0) ? new Dt(r) : (n < 0 ? r = r.takeRight(-n) : n && (r = r.drop(n)), t !== X && (t = Oa(t), r = t < 0 ? r.dropRight(-t) : r.take(t - n)), r) }, Dt.prototype.takeRightWhile = function (n) { return this.reverse().takeWhile(n).reverse() }, Dt.prototype.toArray = function () { return this.take(Cn) }, fe(Dt.prototype, function (n, t) { var r = /^(?:filter|find|map|reject)|While$/.test(t), e = /^(?:head|last)$/.test(t), u = K[e ? "take" + ("last" == t ? "Right" : "") : t], i = e || /^find/.test(t); u && (K.prototype[t] = function () { var t = this.__wrapped__, o = e ? [1] : arguments, f = t instanceof Dt, a = o[0], c = f || wh(t), l = function (n) { var t = u.apply(K, s([n], o)); return e && h ? t[0] : t }; c && r && "function" == typeof a && 1 != a.length && (f = c = !1); var h = this.__chain__, p = !!this.__actions__.length, v = i && !h, _ = f && !p; if (!i && c) { t = _ ? t : new Dt(this); var g = n.apply(t, o); return g.__actions__.push({ func: tf, args: [l], thisArg: X }), new Y(g, h) } return v && _ ? n.apply(this, o) : (g = this.thru(l), v ? e ? g.value()[0] : g.value() : g) }) }), u(["pop", "push", "shift", "sort", "splice", "unshift"], function (n) { var t = _l[n], r = /^(?:push|sort|unshift)$/.test(n) ? "tap" : "thru", e = /^(?:pop|shift)$/.test(n); K.prototype[n] = function () { var n = arguments; if (e && !this.__chain__) { var u = this.value(); return t.apply(wh(u) ? u : [], n) } return this[r](function (r) { return t.apply(wh(r) ? r : [], n) }) } }), fe(Dt.prototype, function (n, t) { var r = K[t]; if (r) { var e = r.name + "", u = as[e] || (as[e] = []); u.push({ name: t, func: r }) } }), as[ri(X, vn).name] = [{ name: "wrapper", func: X }], Dt.prototype.clone = Yt, Dt.prototype.reverse = Qt, Dt.prototype.value = Xt, K.prototype.at = Xs, K.prototype.chain = rf, K.prototype.commit = ef, K.prototype.next = uf, K.prototype.plant = ff, K.prototype.reverse = af, K.prototype.toJSON = K.prototype.valueOf = K.prototype.value = cf, K.prototype.first = K.prototype.head, Bl && (K.prototype[Bl] = of), K
    }, be = de(); "function" == typeof define && "object" == typeof define.amd && define.amd ? (re._ = be, define(function () { return be })) : ue ? ((ue.exports = be)._ = be, ee._ = be) : re._ = be
}).call(this);
//# sourceMappingURL=lodash.min.js.map
/**
 * @license
 * lodash 3.5.0 (Custom Build) lodash.com/license | Underscore.js 1.8.2 underscorejs.org/LICENSE
 * Build: `lodash modern -o ./lodash.js`
 */
; (function () {
    function n(n, t) { if (n !== t) { var r = n === n, e = t === t; if (n > t || !r || typeof n == "undefined" && e) return 1; if (n < t || !e || typeof t == "undefined" && r) return -1 } return 0 } function t(n, t, r) { if (t !== t) return s(n, r); r -= 1; for (var e = n.length; ++r < e;)if (n[r] === t) return r; return -1 } function r(n) { return typeof n == "function" || false } function e(n) { return typeof n == "string" ? n : null == n ? "" : n + "" } function u(n) { return n.charCodeAt(0) } function o(n, t) { for (var r = -1, e = n.length; ++r < e && -1 < t.indexOf(n.charAt(r));); return r } function i(n, t) {
        for (var r = n.length; r-- && -1 < t.indexOf(n.charAt(r));); return r
    } function f(t, r) { return n(t.a, r.a) || t.b - r.b } function a(n) { return Tt[n] } function c(n) { return St[n] } function l(n) { return "\\" + Ft[n] } function s(n, t, r) { var e = n.length; for (t += r ? 0 : -1; r ? t-- : ++t < e;) { var u = n[t]; if (u !== u) return t } return -1 } function p(n) { return n && typeof n == "object" || false } function h(n) { return 160 >= n && 9 <= n && 13 >= n || 32 == n || 160 == n || 5760 == n || 6158 == n || 8192 <= n && (8202 >= n || 8232 == n || 8233 == n || 8239 == n || 8287 == n || 12288 == n || 65279 == n) } function _(n, t) {
        for (var r = -1, e = n.length, u = -1, o = []; ++r < e;)n[r] === t && (n[r] = L, o[++u] = r);
        return o
    } function g(n) { for (var t = -1, r = n.length; ++t < r && h(n.charCodeAt(t));); return t } function v(n) { for (var t = n.length; t-- && h(n.charCodeAt(t));); return t } function y(n) { return Nt[n] } function d(h) {
        function Tt(n) { if (p(n) && !(Uo(n) || n instanceof Ut)) { if (n instanceof Nt) return n; if (Lu.call(n, "__chain__") && Lu.call(n, "__wrapped__")) return ve(n) } return new Nt(n) } function St() { } function Nt(n, t, r) { this.__wrapped__ = n, this.__actions__ = r || [], this.__chain__ = !!t } function Ut(n) {
        this.__wrapped__ = n, this.__actions__ = null, this.__dir__ = 1, this.__filtered__ = false, this.__iteratees__ = null, this.__takeCount__ = _o, this.__views__ = null
        } function Ft() { this.__data__ = {} } function $t(n) { var t = n ? n.length : 0; for (this.data = { hash: uo(null), set: new Xu }; t--;)this.push(n[t]) } function Lt(n, t) { var r = n.data; return (typeof t == "string" || Qe(t) ? r.set.has(t) : r.hash[t]) ? 0 : -1 } function Bt(n, t) { var r = -1, e = n.length; for (t || (t = xu(e)); ++r < e;)t[r] = n[r]; return t } function Mt(n, t) { for (var r = -1, e = n.length; ++r < e && false !== t(n[r], r, n);); return n } function qt(n, t) { for (var r = -1, e = n.length; ++r < e;)if (!t(n[r], r, n)) return false; return true } function Pt(n, t) {
            for (var r = -1, e = n.length, u = -1, o = []; ++r < e;) {
                var i = n[r];
                t(i, r, n) && (o[++u] = i)
            } return o
        } function Kt(n, t) { for (var r = -1, e = n.length, u = xu(e); ++r < e;)u[r] = t(n[r], r, n); return u } function Vt(n) { for (var t = -1, r = n.length, e = ho; ++t < r;) { var u = n[t]; u > e && (e = u) } return e } function Yt(n, t, r, e) { var u = -1, o = n.length; for (e && o && (r = n[++u]); ++u < o;)r = t(r, n[u], u, n); return r } function Zt(n, t, r, e) { var u = n.length; for (e && u && (r = n[--u]); u--;)r = t(r, n[u], u, n); return r } function Gt(n, t) { for (var r = -1, e = n.length; ++r < e;)if (t(n[r], r, n)) return true; return false } function Jt(n, t) {
            return typeof n == "undefined" ? t : n
        } function Xt(n, t, r, e) { return typeof n != "undefined" && Lu.call(e, r) ? n : t } function Ht(n, t, r) { var e = zo(t); if (!r) return nr(t, n, e); for (var u = -1, o = e.length; ++u < o;) { var i = e[u], f = n[i], a = r(f, t[i], i, n, t); (a === a ? a === f : f !== f) && (typeof f != "undefined" || i in n) || (n[i] = a) } return n } function Qt(n, t) { for (var r = -1, e = n.length, u = ae(e), o = t.length, i = xu(o); ++r < o;) { var f = t[r]; u ? (f = parseFloat(f), i[r] = ie(f, e) ? n[f] : m) : i[r] = n[f] } return i } function nr(n, t, r) {
            r || (r = t, t = {}); for (var e = -1, u = r.length; ++e < u;) { var o = r[e]; t[o] = n[o] } return t
        } function tr(n, t, r) { var e = typeof n; if ("function" == e) { if (e = typeof t != "undefined") { var e = Tt.support, u = !(e.funcNames ? n.name : e.funcDecomp); if (!u) { var o = Fu.call(n); e.funcNames || (u = !yt.test(o)), u || (u = jt.test(o) || nu(n), jo(n, u)) } e = u } n = e ? Fr(n, t, r) : n } else n = null == n ? du : "object" == e ? wr(n) : typeof t == "undefined" ? jr(n + "") : xr(n + "", t); return n } function rr(n, t, r, e, u, o, i) {
            var f; if (r && (f = u ? r(n, e, u) : r(n)), typeof f != "undefined") return f; if (!Qe(n)) return n; if (e = Uo(n)) { if (f = ee(n), !t) return Bt(n, f) } else {
                var a = zu.call(n), c = a == P;
                if (a != V && a != B && (!c || u)) return Ct[a] ? oe(n, a, t) : u ? n : {}; if (f = ue(c ? {} : n), !t) return nr(n, f, zo(n))
            } for (o || (o = []), i || (i = []), u = o.length; u--;)if (o[u] == n) return i[u]; return o.push(n), i.push(f), (e ? Mt : _r)(n, function (e, u) { f[u] = rr(e, t, r, u, n, o, i) }), f
        } function er(n, t, r, e) { if (typeof n != "function") throw new Wu($); return Hu(function () { n.apply(m, Rr(r, e)) }, t) } function ur(n, r) {
            var e = n ? n.length : 0, u = []; if (!e) return u; var o = -1, i = re(), f = i == t, a = f && 200 <= r.length ? ko(r) : null, c = r.length; a && (i = Lt, f = false, r = a); n: for (; ++o < e;)if (a = n[o], f && a === a) {
                for (var l = c; l--;)if (r[l] === a) continue n;
                u.push(a)
            } else 0 > i(r, a, 0) && u.push(a); return u
        } function or(n, t) { var r = n ? n.length : 0; if (!ae(r)) return _r(n, t); for (var e = -1, u = ge(n); ++e < r && false !== t(u[e], e, u);); return n } function ir(n, t) { var r = n ? n.length : 0; if (!ae(r)) return gr(n, t); for (var e = ge(n); r-- && false !== t(e[r], r, e);); return n } function fr(n, t) { var r = true; return or(n, function (n, e, u) { return r = !!t(n, e, u) }), r } function ar(n, t) { var r = []; return or(n, function (n, e, u) { t(n, e, u) && r.push(n) }), r } function cr(n, t, r, e) {
            var u; return r(n, function (n, r, o) {
                return t(n, r, o) ? (u = e ? r : n, false) : void 0
            }), u
        } function lr(n, t, r, e) { e -= 1; for (var u = n.length, o = -1, i = []; ++e < u;) { var f = n[e]; if (p(f) && ae(f.length) && (Uo(f) || Je(f))) { t && (f = lr(f, t, r, 0)); var a = -1, c = f.length; for (i.length += c; ++a < c;)i[++o] = f[a] } else r || (i[++o] = f) } return i } function sr(n, t, r) { var e = -1, u = ge(n); r = r(n); for (var o = r.length; ++e < o;) { var i = r[e]; if (false === t(u[i], i, u)) break } return n } function pr(n, t, r) { var e = ge(n); r = r(n); for (var u = r.length; u--;) { var o = r[u]; if (false === t(e[o], o, e)) break } return n } function hr(n, t) { sr(n, t, fu) } function _r(n, t) {
            return sr(n, t, zo)
        } function gr(n, t) { return pr(n, t, zo) } function vr(n, t) { for (var r = -1, e = t.length, u = -1, o = []; ++r < e;) { var i = t[r]; $o(n[i]) && (o[++u] = i) } return o } function yr(n, t, r) { var e = -1, u = typeof t == "function", o = n ? n.length : 0, i = ae(o) ? xu(o) : []; return or(n, function (n) { var o = u ? t : null != n && n[t]; i[++e] = o ? o.apply(n, r) : m }), i } function dr(n, t, r, e, u, o) {
            if (n === t) return 0 !== n || 1 / n == 1 / t; var i = typeof n, f = typeof t; if ("function" != i && "object" != i && "function" != f && "object" != f || null == n || null == t) n = n !== n && t !== t; else n: {
                var i = dr, f = Uo(n), a = Uo(t), c = z, l = z;
                f || (c = zu.call(n), c == B ? c = V : c != V && (f = uu(n))), a || (l = zu.call(t), l == B ? l = V : l != V && uu(t)); var s = c == V, a = l == V, l = c == l; if (!l || f || s) if (c = s && Lu.call(n, "__wrapped__"), a = a && Lu.call(t, "__wrapped__"), c || a) n = i(c ? n.value() : n, a ? t.value() : t, r, e, u, o); else if (l) { for (u || (u = []), o || (o = []), c = u.length; c--;)if (u[c] == n) { n = o[c] == t; break n } u.push(n), o.push(t), n = (f ? Xr : Qr)(n, t, i, r, e, u, o), u.pop(), o.pop() } else n = false; else n = Hr(n, t, c)
            } return n
        } function mr(n, t, r, e, u) {
            var o = t.length; if (null == n) return !o; for (var i = -1, f = !u; ++i < o;)if (f && e[i] ? r[i] !== n[t[i]] : !Lu.call(n, t[i])) return false;
            for (i = -1; ++i < o;) { var a = t[i]; if (f && e[i]) a = Lu.call(n, a); else { var c = n[a], l = r[i], a = u ? u(c, l, a) : m; typeof a == "undefined" && (a = dr(l, c, u, true)) } if (!a) return false } return true
        } function br(n, t) { var r = []; return or(n, function (n, e, u) { r.push(t(n, e, u)) }), r } function wr(n) { var t = zo(n), r = t.length; if (1 == r) { var e = t[0], u = n[e]; if (ce(u)) return function (n) { return null != n && n[e] === u && Lu.call(n, e) } } for (var o = xu(r), i = xu(r); r--;)u = n[t[r]], o[r] = u, i[r] = ce(u); return function (n) { return mr(n, t, o, i) } } function xr(n, t) {
            return ce(t) ? function (r) {
                return null != r && r[n] === t
            } : function (r) { return null != r && dr(t, r[n], null, true) }
        } function Ar(n, t, r, e, u) {
            if (!Qe(n)) return n; var o = ae(t.length) && (Uo(t) || uu(t)); return (o ? Mt : _r)(t, function (t, i, f) {
                if (p(t)) {
                e || (e = []), u || (u = []); n: {
                    t = e; for (var a = u, c = t.length, l = f[i]; c--;)if (t[c] == l) { n[i] = a[c], i = void 0; break n } c = n[i], f = r ? r(c, l, i, n, f) : m; var s = typeof f == "undefined"; s && (f = l, ae(l.length) && (Uo(l) || uu(l)) ? f = Uo(c) ? c : c ? Bt(c) : [] : Lo(l) || Je(l) ? f = Je(c) ? ou(c) : Lo(c) ? c : {} : s = false), t.push(l), a.push(f), s ? n[i] = Ar(f, l, r, t, a) : (f === f ? f !== c : c === c) && (n[i] = f), i = void 0
                } return i
                } a = n[i], f = r ? r(a, t, i, n, f) : m, (l = typeof f == "undefined") && (f = t), !o && typeof f == "undefined" || !l && (f === f ? f === a : a !== a) || (n[i] = f)
            }), n
        } function jr(n) { return function (t) { return null == t ? m : t[n] } } function kr(n, t) { return n + Yu(po() * (t - n + 1)) } function Er(n, t, r, e, u) { return u(n, function (n, u, o) { r = e ? (e = false, n) : t(r, n, u, o) }), r } function Rr(n, t, r) { var e = -1, u = n.length; for (t = null == t ? 0 : +t || 0, 0 > t && (t = -t > u ? 0 : u + t), r = typeof r == "undefined" || r > u ? u : +r || 0, 0 > r && (r += u), u = t > r ? 0 : r - t >>> 0, t >>>= 0, r = xu(u); ++e < u;)r[e] = n[e + t]; return r } function Ir(n, t) {
            var r;
            return or(n, function (n, e, u) { return r = t(n, e, u), !r }), !!r
        } function Or(n, t) { var r = n.length; for (n.sort(t); r--;)n[r] = n[r].c; return n } function Cr(t, r, e) { var u = -1, o = t.length, i = ae(o) ? xu(o) : []; return or(t, function (n) { for (var t = r.length, e = xu(t); t--;)e[t] = null == n ? m : n[r[t]]; i[++u] = { a: e, b: u, c: n } }), Or(i, function (t, r) { var u; n: { u = -1; for (var o = t.a, i = r.a, f = o.length, a = e.length; ++u < f;) { var c = n(o[u], i[u]); if (c) { u = u < a ? c * (e[u] ? 1 : -1) : c; break n } } u = t.b - r.b } return u }) } function Wr(n, r) {
            var e = -1, u = re(), o = n.length, i = u == t, f = i && 200 <= o, a = f ? ko() : null, c = [];
            a ? (u = Lt, i = false) : (f = false, a = r ? [] : c); n: for (; ++e < o;) { var l = n[e], s = r ? r(l, e, n) : l; if (i && l === l) { for (var p = a.length; p--;)if (a[p] === s) continue n; r && a.push(s), c.push(l) } else 0 > u(a, s, 0) && ((r || f) && a.push(s), c.push(l)) } return c
        } function Tr(n, t) { for (var r = -1, e = t.length, u = xu(e); ++r < e;)u[r] = n[t[r]]; return u } function Sr(n, t) { var r = n; r instanceof Ut && (r = r.value()); for (var e = -1, u = t.length; ++e < u;) { var r = [r], o = t[e]; Gu.apply(r, o.args), r = o.func.apply(o.thisArg, r) } return r } function Nr(n, t, r) {
            var e = 0, u = n ? n.length : e; if (typeof t == "number" && t === t && u <= yo) {
                for (; e < u;) {
                    var o = e + u >>> 1, i = n[o];
                    (r ? i <= t : i < t) ? e = o + 1 : u = o
                } return u
            } return Ur(n, t, du, r)
        } function Ur(n, t, r, e) { t = r(t); for (var u = 0, o = n ? n.length : 0, i = t !== t, f = typeof t == "undefined"; u < o;) { var a = Yu((u + o) / 2), c = r(n[a]), l = c === c; (i ? l || e : f ? l && (e || typeof c != "undefined") : e ? c <= t : c < t) ? u = a + 1 : o = a } return ao(o, vo) } function Fr(n, t, r) {
            if (typeof n != "function") return du; if (typeof t == "undefined") return n; switch (r) {
                case 1: return function (r) { return n.call(t, r) }; case 3: return function (r, e, u) { return n.call(t, r, e, u) }; case 4: return function (r, e, u, o) {
                    return n.call(t, r, e, u, o)
                }; case 5: return function (r, e, u, o, i) { return n.call(t, r, e, u, o, i) }
            }return function () { return n.apply(t, arguments) }
        } function $r(n) { return Pu.call(n, 0) } function Lr(n, t, r) { for (var e = r.length, u = -1, o = fo(n.length - e, 0), i = -1, f = t.length, a = xu(o + f); ++i < f;)a[i] = t[i]; for (; ++u < e;)a[r[u]] = n[u]; for (; o--;)a[i++] = n[u++]; return a } function Br(n, t, r) { for (var e = -1, u = r.length, o = -1, i = fo(n.length - u, 0), f = -1, a = t.length, c = xu(i + a); ++o < i;)c[o] = n[o]; for (i = o; ++f < a;)c[i + f] = t[f]; for (; ++e < u;)c[i + r[e]] = n[o++]; return c } function zr(n, t) {
            return function (r, e, u) {
                var o = t ? t() : {};
                if (e = te(e, u, 3), Uo(r)) { u = -1; for (var i = r.length; ++u < i;) { var f = r[u]; n(o, f, e(f, u, r), r) } } else or(r, function (t, r, u) { n(o, t, e(t, r, u), u) }); return o
            }
        } function Dr(n) { return function () { var t = arguments, r = t.length, e = t[0]; if (2 > r || null == e) return e; var u = t[r - 2], o = t[r - 1], i = t[3]; for (3 < r && typeof u == "function" ? (u = Fr(u, o, 5), r -= 2) : (u = 2 < r && typeof o == "function" ? o : null, r -= u ? 1 : 0), i && fe(t[1], t[2], i) && (u = 3 == r ? null : u, r = 2), o = 0; ++o < r;)(i = t[o]) && n(e, i, u); return e } } function Mr(n, t) {
            function r() {
                return (this && this !== zt && this instanceof r ? e : n).apply(t, arguments)
            } var e = Kr(n); return r
        } function qr(n) { return function () { var t = arguments.length, r = t, e = n ? t - 1 : 0; if (!t) return function (n) { return n }; for (var u = xu(t); r--;)if (u[r] = arguments[r], "function" != typeof u[r]) throw new Wu($); return function () { for (var r = e, o = u[r].apply(this, arguments); n ? r-- : ++r < t;)o = u[r].call(this, o); return o } } } function Pr(n) { return function (t) { var r = -1; t = _u(cu(t)); for (var e = t.length, u = ""; ++r < e;)u = n(u, t[r], r); return u } } function Kr(n) {
            return function () {
                var t = Ao(n.prototype), r = n.apply(t, arguments); return Qe(r) ? r : t
            }
        } function Vr(n, t) { return function (r, e, o) { o && fe(r, e, o) && (e = null); var i = te(), f = null == e; if (i === tr && f || (f = false, e = i(e, o, 3)), f) { if (e = Uo(r), e || !eu(r)) return n(e ? r : _e(r)); e = u } return ne(r, e, t) } } function Yr(n, t, r, e, u, o, i, f, a, c) {
            function l() {
                for (var A = arguments.length, j = A, k = xu(A); j--;)k[j] = arguments[j]; if (e && (k = Lr(k, e, u)), o && (k = Br(k, o, i)), g || y) {
                    var j = l.placeholder, I = _(k, j), A = A - I.length; if (A < c) {
                        var O = f ? Bt(f) : null, A = fo(c - A, 0), C = g ? I : null, I = g ? null : I, W = g ? k : null, k = g ? null : k; return t |= g ? E : R, t &= ~(g ? R : E), v || (t &= ~(w | x)), k = Yr(n, t, r, W, C, k, I, O, a, A), k.placeholder = j, k
                    }
                } if (j = p ? r : this, h && (n = j[b]), f) for (O = k.length, A = ao(f.length, O), C = Bt(k); A--;)I = f[A], k[A] = ie(I, O) ? C[I] : m; return s && a < k.length && (k.length = a), (this && this !== zt && this instanceof l ? d || Kr(n) : n).apply(j, k)
            } var s = t & O, p = t & w, h = t & x, g = t & j, v = t & A, y = t & k, d = !h && Kr(n), b = n; return l
        } function Zr(n, t, r) { return n = n.length, t = +t, n < t && oo(t) ? (t -= n, r = null == r ? " " : r + "", pu(r, Ku(t / r.length)).slice(0, t)) : "" } function Gr(n, t, r, e) {
            function u() {
                for (var t = -1, f = arguments.length, a = -1, c = e.length, l = xu(f + c); ++a < c;)l[a] = e[a]; for (; f--;)l[a++] = arguments[++t];
                return (this && this !== zt && this instanceof u ? i : n).apply(o ? r : this, l)
            } var o = t & w, i = Kr(n); return u
        } function Jr(n, t, r, e, u, o, i, f) {
            var a = t & x; if (!a && typeof n != "function") throw new Wu($); var c = e ? e.length : 0; if (c || (t &= ~(E | R), e = u = null), c -= u ? u.length : 0, t & R) { var l = e, s = u; e = u = null } var p = !a && Eo(n); if (r = [n, t, r, e, u, l, s, o, i, f], p && true !== p) {
            e = r[1], t = p[1], f = e | t, o = O | I, u = w | x, i = o | u | A | k; var l = e & O && !(t & O), s = e & I && !(t & I), h = (s ? r : p)[7], g = (l ? r : p)[8]; o = f >= o && f <= i && (e < I || (s || l) && h.length <= g), (!(e >= I && t > u || e > u && t >= I) || o) && (t & w && (r[2] = p[2], f |= e & w ? 0 : A), (e = p[3]) && (u = r[3], r[3] = u ? Lr(u, e, p[4]) : Bt(e), r[4] = u ? _(r[3], L) : Bt(p[4])), (e = p[5]) && (u = r[5], r[5] = u ? Br(u, e, p[6]) : Bt(e), r[6] = u ? _(r[5], L) : Bt(p[6])), (e = p[7]) && (r[7] = Bt(e)), t & O && (r[8] = null == r[8] ? p[8] : ao(r[8], p[8])), null == r[9] && (r[9] = p[9]), r[0] = p[0], r[1] = f), t = r[1], f = r[9]
            } return r[9] = null == f ? a ? 0 : n.length : fo(f - c, 0) || 0, (p ? jo : Ro)(t == w ? Mr(r[0], r[2]) : t != E && t != (w | E) || r[4].length ? Yr.apply(m, r) : Gr.apply(m, r), r)
        } function Xr(n, t, r, e, u, o, i) { var f = -1, a = n.length, c = t.length, l = true; if (a != c && (!u || c <= a)) return false; for (; l && ++f < a;) { var s = n[f], p = t[f], l = m; if (e && (l = u ? e(p, s, f) : e(s, p, f)), typeof l == "undefined") if (u) for (var h = c; h-- && (p = t[h], !(l = s && s === p || r(s, p, e, u, o, i)));); else l = s && s === p || r(s, p, e, u, o, i) } return !!l } function Hr(n, t, r) {
            switch (r) {
                case D: case M: return +n == +t; case q: return n.name == t.name && n.message == t.message;
                case K: return n != +n ? t != +t : 0 == n ? 1 / n == 1 / t : n == +t; case Y: case Z: return n == t + ""
            }return false
        } function Qr(n, t, r, e, u, o, i) {
            var f = zo(n), a = f.length, c = zo(t).length; if (a != c && !u) return false; for (var l, c = -1; ++c < a;) { var s = f[c], p = Lu.call(t, s); if (p) { var h = n[s], _ = t[s], p = m; e && (p = u ? e(_, h, s) : e(h, _, s)), typeof p == "undefined" && (p = h && h === _ || r(h, _, e, u, o, i)) } if (!p) return false; l || (l = "constructor" == s) } return l || (r = n.constructor, e = t.constructor, !(r != e && "constructor" in n && "constructor" in t) || typeof r == "function" && r instanceof r && typeof e == "function" && e instanceof e) ? true : false
        } function ne(n, t, r) { var e = r ? _o : ho, u = e, o = u; return or(n, function (n, i, f) { i = t(n, i, f), ((r ? i < u : i > u) || i === e && i === o) && (u = i, o = n) }), o } function te(n, t, r) { var e = Tt.callback || vu, e = e === vu ? tr : e; return r ? e(n, t, r) : e } function re(n, r, e) { var u = Tt.indexOf || we, u = u === we ? t : u; return n ? u(n, r, e) : u } function ee(n) { var t = n.length, r = new n.constructor(t); return t && "string" == typeof n[0] && Lu.call(n, "index") && (r.index = n.index, r.input = n.input), r } function ue(n) {
            return n = n.constructor, typeof n == "function" && n instanceof n || (n = Iu), new n
        } function oe(n, t, r) { var e = n.constructor; switch (t) { case G: return $r(n); case D: case M: return new e(+n); case J: case X: case H: case Q: case nt: case tt: case rt: case et: case ut: return t = n.buffer, new e(r ? $r(t) : t, n.byteOffset, n.length); case K: case Z: return new e(n); case Y: var u = new e(n.source, vt.exec(n)); u.lastIndex = n.lastIndex }return u } function ie(n, t) { return n = +n, t = null == t ? bo : t, -1 < n && 0 == n % 1 && n < t } function fe(n, t, r) {
            if (!Qe(r)) return false; var e = typeof t; return "number" == e ? (e = r.length, e = ae(e) && ie(t, e)) : e = "string" == e && t in r, e ? (t = r[t], n === n ? n === t : t !== t) : false
        } function ae(n) { return typeof n == "number" && -1 < n && 0 == n % 1 && n <= bo } function ce(n) { return n === n && (0 === n ? 0 < 1 / n : !Qe(n)) } function le(n, t) { n = ge(n); for (var r = -1, e = t.length, u = {}; ++r < e;) { var o = t[r]; o in n && (u[o] = n[o]) } return u } function se(n, t) { var r = {}; return hr(n, function (n, e, u) { t(n, e, u) && (r[e] = n) }), r } function pe(n) {
            var t; if (!p(n) || zu.call(n) != V || !(Lu.call(n, "constructor") || (t = n.constructor, typeof t != "function" || t instanceof t))) return false; var r; return hr(n, function (n, t) { r = t }), typeof r == "undefined" || Lu.call(n, r)
        } function he(n) { for (var t = fu(n), r = t.length, e = r && n.length, u = Tt.support, u = e && ae(e) && (Uo(n) || u.nonEnumArgs && Je(n)), o = -1, i = []; ++o < r;) { var f = t[o]; (u && ie(f, e) || Lu.call(n, f)) && i.push(f) } return i } function _e(n) { return null == n ? [] : ae(n.length) ? Qe(n) ? n : Iu(n) : au(n) } function ge(n) { return Qe(n) ? n : Iu(n) } function ve(n) { return n instanceof Ut ? n.clone() : new Nt(n.__wrapped__, n.__chain__, Bt(n.__actions__)) } function ye(n, t, r) { return n && n.length ? ((r ? fe(n, t, r) : null == t) && (t = 1), Rr(n, 0 > t ? 0 : t)) : [] } function de(n, t, r) {
            var e = n ? n.length : 0;
            return e ? ((r ? fe(n, t, r) : null == t) && (t = 1), t = e - (+t || 0), Rr(n, 0, 0 > t ? 0 : t)) : []
        } function me(n, t, r) { var e = -1, u = n ? n.length : 0; for (t = te(t, r, 3); ++e < u;)if (t(n[e], e, n)) return e; return -1 } function be(n) { return n ? n[0] : m } function we(n, r, e) { var u = n ? n.length : 0; if (!u) return -1; if (typeof e == "number") e = 0 > e ? fo(u + e, 0) : e; else if (e) return e = Nr(n, r), n = n[e], (r === r ? r === n : n !== n) ? e : -1; return t(n, r, e || 0) } function xe(n) { var t = n ? n.length : 0; return t ? n[t - 1] : m } function Ae(n) { return ye(n, 1) } function je(n, r, e, u) {
            if (!n || !n.length) return [];
            null != r && typeof r != "boolean" && (u = e, e = fe(n, r, u) ? null : r, r = false); var o = te(); if ((o !== tr || null != e) && (e = o(e, u, 3)), r && re() == t) { r = e; var i; e = -1, u = n.length; for (var o = -1, f = []; ++e < u;) { var a = n[e], c = r ? r(a, e, n) : a; e && i === c || (i = c, f[++o] = a) } n = f } else n = Wr(n, e); return n
        } function ke(n) { for (var t = -1, r = (n && n.length && Vt(Kt(n, $u))) >>> 0, e = xu(r); ++t < r;)e[t] = Kt(n, jr(t)); return e } function Ee(n, t) { var r = -1, e = n ? n.length : 0, u = {}; for (!e || t || Uo(n[0]) || (t = []); ++r < e;) { var o = n[r]; t ? u[o] = t[r] : o && (u[o[0]] = o[1]) } return u } function Re(n) {
            return n = Tt(n), n.__chain__ = true, n
        } function Ie(n, t, r) { return t.call(r, n) } function Oe(n, t, r) { var e = Uo(n) ? qt : fr; return (typeof t != "function" || typeof r != "undefined") && (t = te(t, r, 3)), e(n, t) } function Ce(n, t, r) { var e = Uo(n) ? Pt : ar; return t = te(t, r, 3), e(n, t) } function We(n, t, r) { return Uo(n) ? (t = me(n, t, r), -1 < t ? n[t] : m) : (t = te(t, r, 3), cr(n, t, or)) } function Te(n, t, r) { return typeof t == "function" && typeof r == "undefined" && Uo(n) ? Mt(n, t) : or(n, Fr(t, r, 3)) } function Se(n, t, r) {
            if (typeof t == "function" && typeof r == "undefined" && Uo(n)) for (r = n.length; r-- && false !== t(n[r], r, n);); else n = ir(n, Fr(t, r, 3));
            return n
        } function Ne(n, t, r) { var e = n ? n.length : 0; return ae(e) || (n = au(n), e = n.length), e ? (r = typeof r == "number" ? 0 > r ? fo(e + r, 0) : r || 0 : 0, typeof n == "string" || !Uo(n) && eu(n) ? r < e && -1 < n.indexOf(t, r) : -1 < re(n, t, r)) : false } function Ue(n, t, r) { var e = Uo(n) ? Kt : br; return t = te(t, r, 3), e(n, t) } function Fe(n, t, r, e) { return (Uo(n) ? Yt : Er)(n, te(t, e, 4), r, 3 > arguments.length, or) } function $e(n, t, r, e) { return (Uo(n) ? Zt : Er)(n, te(t, e, 4), r, 3 > arguments.length, ir) } function Le(n, t, r) {
            return (r ? fe(n, t, r) : null == t) ? (n = _e(n), t = n.length, 0 < t ? n[kr(0, t - 1)] : m) : (n = Be(n), n.length = ao(0 > t ? 0 : +t || 0, n.length), n)
        } function Be(n) { n = _e(n); for (var t = -1, r = n.length, e = xu(r); ++t < r;) { var u = kr(0, t); t != u && (e[t] = e[u]), e[u] = n[t] } return e } function ze(n, t, r) { var e = Uo(n) ? Gt : Ir; return (typeof t != "function" || typeof r != "undefined") && (t = te(t, r, 3)), e(n, t) } function De(n, t) { var r; if (typeof t != "function") { if (typeof n != "function") throw new Wu($); var e = n; n = t, t = e } return function () { return 0 < --n ? r = t.apply(this, arguments) : t = null, r } } function Me(n, t) {
            var r = w; if (2 < arguments.length) var e = Rr(arguments, 2), u = _(e, Me.placeholder), r = r | E; return Jr(n, r, t, e, u)
        } function qe(n, t) { var r = w | x; if (2 < arguments.length) var e = Rr(arguments, 2), u = _(e, qe.placeholder), r = r | E; return Jr(t, r, n, e, u) } function Pe(n, t, r) { return r && fe(n, t, r) && (t = null), n = Jr(n, j, null, null, null, null, null, t), n.placeholder = Pe.placeholder, n } function Ke(n, t, r) { return r && fe(n, t, r) && (t = null), n = Jr(n, k, null, null, null, null, null, t), n.placeholder = Ke.placeholder, n } function Ve(n, t, r) {
            function e() { var r = t - (To() - c); 0 >= r || r > t ? (f && Vu(f), r = p, f = s = p = m, r && (h = To(), a = n.apply(l, i), s || f || (i = l = null))) : s = Hu(e, r) } function u() {
            s && Vu(s), f = s = p = m, (g || _ !== t) && (h = To(), a = n.apply(l, i), s || f || (i = l = null))
            } function o() { if (i = arguments, c = To(), l = this, p = g && (s || !v), false === _) var r = v && !s; else { f || v || (h = c); var o = _ - (c - h), y = 0 >= o || o > _; y ? (f && (f = Vu(f)), h = c, a = n.apply(l, i)) : f || (f = Hu(u, o)) } return y && s ? s = Vu(s) : s || t === _ || (s = Hu(e, t)), r && (y = true, a = n.apply(l, i)), !y || s || f || (i = l = null), a } var i, f, a, c, l, s, p, h = 0, _ = false, g = true; if (typeof n != "function") throw new Wu($); if (t = 0 > t ? 0 : +t || 0, true === r) var v = true, g = false; else Qe(r) && (v = r.leading, _ = "maxWait" in r && fo(+r.maxWait || 0, t), g = "trailing" in r ? r.trailing : g); return o.cancel = function () {
            s && Vu(s), f && Vu(f), f = s = p = m
            }, o
        } function Ye(n, t) { function r() { var e = arguments, u = r.cache, o = t ? t.apply(this, e) : e[0]; return u.has(o) ? u.get(o) : (e = n.apply(this, e), u.set(o, e), e) } if (typeof n != "function" || t && typeof t != "function") throw new Wu($); return r.cache = new Ye.Cache, r } function Ze(n) { var t = Rr(arguments, 1), r = _(t, Ze.placeholder); return Jr(n, E, null, t, r) } function Ge(n) { var t = Rr(arguments, 1), r = _(t, Ge.placeholder); return Jr(n, R, null, t, r) } function Je(n) { return ae(p(n) ? n.length : m) && zu.call(n) == B || false } function Xe(n) {
            return n && 1 === n.nodeType && p(n) && -1 < zu.call(n).indexOf("Element") || false
        } function He(n) { return p(n) && typeof n.message == "string" && zu.call(n) == q || false } function Qe(n) { var t = typeof n; return "function" == t || n && "object" == t || false } function nu(n) { return null == n ? false : zu.call(n) == P ? Mu.test(Fu.call(n)) : p(n) && mt.test(n) || false } function tu(n) { return typeof n == "number" || p(n) && zu.call(n) == K || false } function ru(n) { return p(n) && zu.call(n) == Y || false } function eu(n) { return typeof n == "string" || p(n) && zu.call(n) == Z || false } function uu(n) { return p(n) && ae(n.length) && Ot[zu.call(n)] || false } function ou(n) {
            return nr(n, fu(n))
        } function iu(n) { return vr(n, fu(n)) } function fu(n) { if (null == n) return []; Qe(n) || (n = Iu(n)); for (var t = n.length, t = t && ae(t) && (Uo(n) || xo.nonEnumArgs && Je(n)) && t || 0, r = n.constructor, e = -1, r = typeof r == "function" && r.prototype === n, u = xu(t), o = 0 < t; ++e < t;)u[e] = e + ""; for (var i in n) o && ie(i, t) || "constructor" == i && (r || !Lu.call(n, i)) || u.push(i); return u } function au(n) { return Tr(n, zo(n)) } function cu(n) { return (n = e(n)) && n.replace(bt, a) } function lu(n) { return (n = e(n)) && At.test(n) ? n.replace(xt, "\\$&") : n } function su(n, t, r) {
            return r && fe(n, t, r) && (t = 0), so(n, t)
        } function pu(n, t) { var r = ""; if (n = e(n), t = +t, 1 > t || !n || !oo(t)) return r; do t % 2 && (r += n), t = Yu(t / 2), n += n; while (t); return r } function hu(n, t, r) { var u = n; return (n = e(n)) ? (r ? fe(u, t, r) : null == t) ? n.slice(g(n), v(n) + 1) : (t += "", n.slice(o(n, t), i(n, t) + 1)) : n } function _u(n, t, r) { return r && fe(n, t, r) && (t = null), n = e(n), n.match(t || Et) || [] } function gu() { for (var n = arguments[0], t = arguments.length, r = xu(t ? t - 1 : 0); 0 < --t;)r[t - 1] = arguments[t]; try { return n.apply(m, r) } catch (e) { return He(e) ? e : new ju(e) } } function vu(n, t, r) {
            return r && fe(n, t, r) && (t = null), p(n) ? mu(n) : tr(n, t)
        } function yu(n) { return function () { return n } } function du(n) { return n } function mu(n) { return wr(rr(n, true)) } function bu(n, t, r) {
            if (null == r) { var e = Qe(t), u = e && zo(t); ((u = u && u.length && vr(t, u)) ? u.length : e) || (u = false, r = t, t = n, n = this) } u || (u = vr(t, zo(t))); var o = true, e = -1, i = $o(n), f = u.length; false === r ? o = false : Qe(r) && "chain" in r && (o = r.chain); for (; ++e < f;) {
                r = u[e]; var a = t[r]; n[r] = a, i && (n.prototype[r] = function (t) {
                    return function () {
                        var r = this.__chain__; if (o || r) {
                            var e = n(this.__wrapped__); return (e.__actions__ = Bt(this.__actions__)).push({ func: t, args: arguments, thisArg: n }), e.__chain__ = r, e
                        } return r = [this.value()], Gu.apply(r, arguments), t.apply(n, r)
                    }
                }(a))
            } return n
        } function wu() { } h = h ? Dt.defaults(zt.Object(), h, Dt.pick(zt, It)) : zt; var xu = h.Array, Au = h.Date, ju = h.Error, ku = h.Function, Eu = h.Math, Ru = h.Number, Iu = h.Object, Ou = h.RegExp, Cu = h.String, Wu = h.TypeError, Tu = xu.prototype, Su = Iu.prototype, Nu = Cu.prototype, Uu = (Uu = h.window) && Uu.document, Fu = ku.prototype.toString, $u = jr("length"), Lu = Su.hasOwnProperty, Bu = 0, zu = Su.toString, Du = h._, Mu = Ou("^" + lu(zu).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"), qu = nu(qu = h.ArrayBuffer) && qu, Pu = nu(Pu = qu && new qu(0).slice) && Pu, Ku = Eu.ceil, Vu = h.clearTimeout, Yu = Eu.floor, Zu = nu(Zu = Iu.getPrototypeOf) && Zu, Gu = Tu.push, Ju = Su.propertyIsEnumerable, Xu = nu(Xu = h.Set) && Xu, Hu = h.setTimeout, Qu = Tu.splice, no = nu(no = h.Uint8Array) && no, to = nu(to = h.WeakMap) && to, ro = function () {
            try {
                var n = nu(n = h.Float64Array) && n, t = new n(new qu(10), 0, 1) && n
            } catch (r) { } return t
        }(), eo = nu(eo = xu.isArray) && eo, uo = nu(uo = Iu.create) && uo, oo = h.isFinite, io = nu(io = Iu.keys) && io, fo = Eu.max, ao = Eu.min, co = nu(co = Au.now) && co, lo = nu(lo = Ru.isFinite) && lo, so = h.parseInt, po = Eu.random, ho = Ru.NEGATIVE_INFINITY, _o = Ru.POSITIVE_INFINITY, go = Eu.pow(2, 32) - 1, vo = go - 1, yo = go >>> 1, mo = ro ? ro.BYTES_PER_ELEMENT : 0, bo = Eu.pow(2, 53) - 1, wo = to && new to, xo = Tt.support = {}; !function (n) {
        xo.funcDecomp = !nu(h.WinRTError) && jt.test(d), xo.funcNames = typeof ku.name == "string"; try {
        xo.dom = 11 === Uu.createDocumentFragment().nodeType
        } catch (t) { xo.dom = false } try { xo.nonEnumArgs = !Ju.call(arguments, 1) } catch (r) { xo.nonEnumArgs = true }
        }(0, 0), Tt.templateSettings = { escape: pt, evaluate: ht, interpolate: _t, variable: "", imports: { _: Tt } }; var Ao = function () { function n() { } return function (t) { if (Qe(t)) { n.prototype = t; var r = new n; n.prototype = null } return r || h.Object() } }(), jo = wo ? function (n, t) { return wo.set(n, t), n } : du; Pu || ($r = qu && no ? function (n) {
            var t = n.byteLength, r = ro ? Yu(t / mo) : 0, e = r * mo, u = new qu(t); if (r) { var o = new ro(u, 0, r); o.set(new ro(n, 0, r)) } return t != e && (o = new no(u, e), o.set(new no(n, e))), u
        } : yu(null)); var ko = uo && Xu ? function (n) { return new $t(n) } : yu(null), Eo = wo ? function (n) { return wo.get(n) } : wu, Ro = function () { var n = 0, t = 0; return function (r, e) { var u = To(), o = S - (u - t); if (t = u, 0 < o) { if (++n >= T) return r } else n = 0; return jo(r, e) } }(), Io = zr(function (n, t, r) { Lu.call(n, r) ? ++n[r] : n[r] = 1 }), Oo = zr(function (n, t, r) { Lu.call(n, r) ? n[r].push(t) : n[r] = [t] }), Co = zr(function (n, t, r) { n[r] = t }), Wo = zr(function (n, t, r) { n[r ? 0 : 1].push(t) }, function () { return [[], []] }), To = co || function () { return (new Au).getTime() }, So = qr(), No = qr(true), Uo = eo || function (n) {
            return p(n) && ae(n.length) && zu.call(n) == z || false
        }; xo.dom || (Xe = function (n) { return n && 1 === n.nodeType && p(n) && !Lo(n) || false }); var Fo = lo || function (n) { return typeof n == "number" && oo(n) }, $o = r(/x/) || no && !r(no) ? function (n) { return zu.call(n) == P } : r, Lo = Zu ? function (n) { if (!n || zu.call(n) != V) return false; var t = n.valueOf, r = nu(t) && (r = Zu(t)) && Zu(r); return r ? n == r || Zu(n) == r : pe(n) } : pe, Bo = Dr(Ht), zo = io ? function (n) { if (n) var t = n.constructor, r = n.length; return typeof t == "function" && t.prototype === n || typeof n != "function" && r && ae(r) ? he(n) : Qe(n) ? io(n) : [] } : he, Do = Dr(Ar), Mo = Pr(function (n, t, r) {
            return t = t.toLowerCase(), n + (r ? t.charAt(0).toUpperCase() + t.slice(1) : t)
        }), qo = Pr(function (n, t, r) { return n + (r ? "-" : "") + t.toLowerCase() }); 8 != so(Rt + "08") && (su = function (n, t, r) { return (r ? fe(n, t, r) : null == t) ? t = 0 : t && (t = +t), n = hu(n), so(n, t || (dt.test(n) ? 16 : 10)) }); var Po = Pr(function (n, t, r) { return n + (r ? "_" : "") + t.toLowerCase() }), Ko = Pr(function (n, t, r) { return n + (r ? " " : "") + (t.charAt(0).toUpperCase() + t.slice(1)) }), Vo = Vr(Vt), Yo = Vr(function (n) { for (var t = -1, r = n.length, e = _o; ++t < r;) { var u = n[t]; u < e && (e = u) } return e }, true); return Tt.prototype = St.prototype, Nt.prototype = Ao(St.prototype), Nt.prototype.constructor = Nt, Ut.prototype = Ao(St.prototype), Ut.prototype.constructor = Ut, Ft.prototype["delete"] = function (n) {
            return this.has(n) && delete this.__data__[n]
        }, Ft.prototype.get = function (n) { return "__proto__" == n ? m : this.__data__[n] }, Ft.prototype.has = function (n) { return "__proto__" != n && Lu.call(this.__data__, n) }, Ft.prototype.set = function (n, t) { return "__proto__" != n && (this.__data__[n] = t), this }, $t.prototype.push = function (n) { var t = this.data; typeof n == "string" || Qe(n) ? t.set.add(n) : t.hash[n] = true }, Ye.Cache = Ft, Tt.after = function (n, t) {
            if (typeof t != "function") { if (typeof n != "function") throw new Wu($); var r = n; n = t, t = r } return n = oo(n = +n) ? n : 0, function () {
                return 1 > --n ? t.apply(this, arguments) : void 0
            }
        }, Tt.ary = function (n, t, r) { return r && fe(n, t, r) && (t = null), t = n && null == t ? n.length : fo(+t || 0, 0), Jr(n, O, null, null, null, null, t) }, Tt.assign = Bo, Tt.at = function (n) { return ae(n ? n.length : 0) && (n = _e(n)), Qt(n, lr(arguments, false, false, 1)) }, Tt.before = De, Tt.bind = Me, Tt.bindAll = function (n) { for (var t = n, r = 1 < arguments.length ? lr(arguments, false, false, 1) : iu(n), e = -1, u = r.length; ++e < u;) { var o = r[e]; t[o] = Jr(t[o], w, t) } return t }, Tt.bindKey = qe, Tt.callback = vu, Tt.chain = Re, Tt.chunk = function (n, t, r) {
        t = (r ? fe(n, t, r) : null == t) ? 1 : fo(+t || 1, 1), r = 0; for (var e = n ? n.length : 0, u = -1, o = xu(Ku(e / t)); r < e;)o[++u] = Rr(n, r, r += t);
            return o
        }, Tt.compact = function (n) { for (var t = -1, r = n ? n.length : 0, e = -1, u = []; ++t < r;) { var o = n[t]; o && (u[++e] = o) } return u }, Tt.constant = yu, Tt.countBy = Io, Tt.create = function (n, t, r) { var e = Ao(n); return r && fe(n, t, r) && (t = null), t ? nr(t, e, zo(t)) : e }, Tt.curry = Pe, Tt.curryRight = Ke, Tt.debounce = Ve, Tt.defaults = function (n) { if (null == n) return n; var t = Bt(arguments); return t.push(Jt), Bo.apply(m, t) }, Tt.defer = function (n) { return er(n, 1, arguments, 1) }, Tt.delay = function (n, t) { return er(n, t, arguments, 2) }, Tt.difference = function () {
            for (var n = arguments, t = -1, r = n.length; ++t < r;) {
                var e = n[t];
                if (Uo(e) || Je(e)) break
            } return ur(e, lr(n, false, true, ++t))
        }, Tt.drop = ye, Tt.dropRight = de, Tt.dropRightWhile = function (n, t, r) { var e = n ? n.length : 0; if (!e) return []; for (t = te(t, r, 3); e-- && t(n[e], e, n);); return Rr(n, 0, e + 1) }, Tt.dropWhile = function (n, t, r) { var e = n ? n.length : 0; if (!e) return []; var u = -1; for (t = te(t, r, 3); ++u < e && t(n[u], u, n);); return Rr(n, u) }, Tt.fill = function (n, t, r, e) {
            var u = n ? n.length : 0; if (!u) return []; for (r && typeof r != "number" && fe(n, t, r) && (r = 0, e = u), u = n.length, r = null == r ? 0 : +r || 0, 0 > r && (r = -r > u ? 0 : u + r), e = typeof e == "undefined" || e > u ? u : +e || 0, 0 > e && (e += u), u = r > e ? 0 : e >>> 0, r >>>= 0; r < u;)n[r++] = t;
            return n
        }, Tt.filter = Ce, Tt.flatten = function (n, t, r) { var e = n ? n.length : 0; return r && fe(n, t, r) && (t = false), e ? lr(n, t, false, 0) : [] }, Tt.flattenDeep = function (n) { return n && n.length ? lr(n, true, false, 0) : [] }, Tt.flow = So, Tt.flowRight = No, Tt.forEach = Te, Tt.forEachRight = Se, Tt.forIn = function (n, t, r) { return (typeof t != "function" || typeof r != "undefined") && (t = Fr(t, r, 3)), sr(n, t, fu) }, Tt.forInRight = function (n, t, r) { return t = Fr(t, r, 3), pr(n, t, fu) }, Tt.forOwn = function (n, t, r) {
            return (typeof t != "function" || typeof r != "undefined") && (t = Fr(t, r, 3)), _r(n, t)
        }, Tt.forOwnRight = function (n, t, r) { return t = Fr(t, r, 3), pr(n, t, zo) }, Tt.functions = iu, Tt.groupBy = Oo, Tt.indexBy = Co, Tt.initial = function (n) { return de(n, 1) }, Tt.intersection = function () {
            for (var n = [], r = -1, e = arguments.length, u = [], o = re(), i = o == t; ++r < e;) { var f = arguments[r]; (Uo(f) || Je(f)) && (n.push(f), u.push(i && 120 <= f.length ? ko(r && f) : null)) } var e = n.length, i = n[0], a = -1, c = i ? i.length : 0, l = [], s = u[0]; n: for (; ++a < c;)if (f = i[a], 0 > (s ? Lt(s, f) : o(l, f, 0))) {
                for (r = e; --r;) { var p = u[r]; if (0 > (p ? Lt(p, f) : o(n[r], f, 0))) continue n } s && s.push(f), l.push(f)
            } return l
        }, Tt.invert = function (n, t, r) { r && fe(n, t, r) && (t = null), r = -1; for (var e = zo(n), u = e.length, o = {}; ++r < u;) { var i = e[r], f = n[i]; t ? Lu.call(o, f) ? o[f].push(i) : o[f] = [i] : o[f] = i } return o }, Tt.invoke = function (n, t) { return yr(n, t, Rr(arguments, 2)) }, Tt.keys = zo, Tt.keysIn = fu, Tt.map = Ue, Tt.mapValues = function (n, t, r) { var e = {}; return t = te(t, r, 3), _r(n, function (n, r, u) { e[r] = t(n, r, u) }), e }, Tt.matches = mu, Tt.matchesProperty = function (n, t) { return xr(n + "", rr(t, true)) }, Tt.memoize = Ye, Tt.merge = Do, Tt.mixin = bu, Tt.negate = function (n) {
            if (typeof n != "function") throw new Wu($);
            return function () { return !n.apply(this, arguments) }
        }, Tt.omit = function (n, t, r) { if (null == n) return {}; if (typeof t != "function") { var e = Kt(lr(arguments, false, false, 1), Cu); return le(n, ur(fu(n), e)) } return t = Fr(t, r, 3), se(n, function (n, r, e) { return !t(n, r, e) }) }, Tt.once = function (n) { return De(n, 2) }, Tt.pairs = function (n) { for (var t = -1, r = zo(n), e = r.length, u = xu(e); ++t < e;) { var o = r[t]; u[t] = [o, n[o]] } return u }, Tt.partial = Ze, Tt.partialRight = Ge, Tt.partition = Wo, Tt.pick = function (n, t, r) {
            return null == n ? {} : typeof t == "function" ? se(n, Fr(t, r, 3)) : le(n, lr(arguments, false, false, 1))
        }, Tt.pluck = function (n, t) { return Ue(n, jr(t)) }, Tt.property = function (n) { return jr(n + "") }, Tt.propertyOf = function (n) { return function (t) { return null == n ? m : n[t] } }, Tt.pull = function () { var n = arguments, t = n[0]; if (!t || !t.length) return t; for (var r = 0, e = re(), u = n.length; ++r < u;)for (var o = 0, i = n[r]; -1 < (o = e(t, i, o));)Qu.call(t, o, 1); return t }, Tt.pullAt = function (t) { var r = t || [], e = lr(arguments, false, false, 1), u = e.length, o = Qt(r, e); for (e.sort(n); u--;) { var i = parseFloat(e[u]); if (i != f && ie(i)) { var f = i; Qu.call(r, i, 1) } } return o }, Tt.range = function (n, t, r) {
        r && fe(n, t, r) && (t = r = null), n = +n || 0, r = null == r ? 1 : +r || 0, null == t ? (t = n, n = 0) : t = +t || 0;
            var e = -1; t = fo(Ku((t - n) / (r || 1)), 0); for (var u = xu(t); ++e < t;)u[e] = n, n += r; return u
        }, Tt.rearg = function (n) { var t = lr(arguments, false, false, 1); return Jr(n, I, null, null, null, t) }, Tt.reject = function (n, t, r) { var e = Uo(n) ? Pt : ar; return t = te(t, r, 3), e(n, function (n, r, e) { return !t(n, r, e) }) }, Tt.remove = function (n, t, r) { var e = -1, u = n ? n.length : 0, o = []; for (t = te(t, r, 3); ++e < u;)r = n[e], t(r, e, n) && (o.push(r), Qu.call(n, e--, 1), u--); return o }, Tt.rest = Ae, Tt.shuffle = Be, Tt.slice = function (n, t, r) {
            var e = n ? n.length : 0; return e ? (r && typeof r != "number" && fe(n, t, r) && (t = 0, r = e), Rr(n, t, r)) : []
        }, Tt.sortBy = function (n, t, r) { if (null == n) return []; var e = -1, u = n.length, o = ae(u) ? xu(u) : []; return r && fe(n, t, r) && (t = null), t = te(t, r, 3), or(n, function (n, r, u) { o[++e] = { a: t(n, r, u), b: e, c: n } }), Or(o, f) }, Tt.sortByAll = function (n) { if (null == n) return []; var t = arguments, r = t[3]; return r && fe(t[1], t[2], r) && (t = [n, t[1]]), Cr(n, lr(t, false, false, 1), []) }, Tt.sortByOrder = function (n, t, r, e) { return null == n ? [] : (e && fe(t, r, e) && (r = null), Uo(t) || (t = null == t ? [] : [t]), Uo(r) || (r = null == r ? [] : [r]), Cr(n, t, r)) }, Tt.spread = function (n) {
            if (typeof n != "function") throw new Wu($);
            return function (t) { return n.apply(this, t) }
        }, Tt.take = function (n, t, r) { return n && n.length ? ((r ? fe(n, t, r) : null == t) && (t = 1), Rr(n, 0, 0 > t ? 0 : t)) : [] }, Tt.takeRight = function (n, t, r) { var e = n ? n.length : 0; return e ? ((r ? fe(n, t, r) : null == t) && (t = 1), t = e - (+t || 0), Rr(n, 0 > t ? 0 : t)) : [] }, Tt.takeRightWhile = function (n, t, r) { var e = n ? n.length : 0; if (!e) return []; for (t = te(t, r, 3); e-- && t(n[e], e, n);); return Rr(n, e + 1) }, Tt.takeWhile = function (n, t, r) {
            var e = n ? n.length : 0; if (!e) return []; var u = -1; for (t = te(t, r, 3); ++u < e && t(n[u], u, n);); return Rr(n, 0, u)
        }, Tt.tap = function (n, t, r) { return t.call(r, n), n }, Tt.throttle = function (n, t, r) { var e = true, u = true; if (typeof n != "function") throw new Wu($); return false === r ? e = false : Qe(r) && (e = "leading" in r ? !!r.leading : e, u = "trailing" in r ? !!r.trailing : u), Wt.leading = e, Wt.maxWait = +t, Wt.trailing = u, Ve(n, t, Wt) }, Tt.thru = Ie, Tt.times = function (n, t, r) { if (n = +n, 1 > n || !oo(n)) return []; var e = -1, u = xu(ao(n, go)); for (t = Fr(t, r, 1); ++e < n;)e < go ? u[e] = t(e) : t(e); return u }, Tt.toArray = function (n) { var t = n ? n.length : 0; return ae(t) ? t ? Bt(n) : [] : au(n) }, Tt.toPlainObject = ou, Tt.transform = function (n, t, r, e) {
            var u = Uo(n) || uu(n);
            return t = te(t, e, 4), null == r && (u || Qe(n) ? (e = n.constructor, r = u ? Uo(n) ? new e : [] : Ao($o(e) && e.prototype)) : r = {}), (u ? Mt : _r)(n, function (n, e, u) { return t(r, n, e, u) }), r
        }, Tt.union = function () { return Wr(lr(arguments, false, true, 0)) }, Tt.uniq = je, Tt.unzip = ke, Tt.values = au, Tt.valuesIn = function (n) { return Tr(n, fu(n)) }, Tt.where = function (n, t) { return Ce(n, wr(t)) }, Tt.without = function (n) { return ur(n, Rr(arguments, 1)) }, Tt.wrap = function (n, t) { return t = null == t ? du : t, Jr(t, E, null, [n], []) }, Tt.xor = function () {
            for (var n = -1, t = arguments.length; ++n < t;) {
                var r = arguments[n];
                if (Uo(r) || Je(r)) var e = e ? ur(e, r).concat(ur(r, e)) : r
            } return e ? Wr(e) : []
        }, Tt.zip = function () { for (var n = arguments.length, t = xu(n); n--;)t[n] = arguments[n]; return ke(t) }, Tt.zipObject = Ee, Tt.backflow = No, Tt.collect = Ue, Tt.compose = No, Tt.each = Te, Tt.eachRight = Se, Tt.extend = Bo, Tt.iteratee = vu, Tt.methods = iu, Tt.object = Ee, Tt.select = Ce, Tt.tail = Ae, Tt.unique = je, bu(Tt, Tt), Tt.add = function (n, t) { return n + t }, Tt.attempt = gu, Tt.camelCase = Mo, Tt.capitalize = function (n) { return (n = e(n)) && n.charAt(0).toUpperCase() + n.slice(1) }, Tt.clone = function (n, t, r, e) {
            return t && typeof t != "boolean" && fe(n, t, r) ? t = false : typeof t == "function" && (e = r, r = t, t = false), r = typeof r == "function" && Fr(r, e, 1), rr(n, t, r)
        }, Tt.cloneDeep = function (n, t, r) { return t = typeof t == "function" && Fr(t, r, 1), rr(n, true, t) }, Tt.deburr = cu, Tt.endsWith = function (n, t, r) { n = e(n), t += ""; var u = n.length; return r = typeof r == "undefined" ? u : ao(0 > r ? 0 : +r || 0, u), r -= t.length, 0 <= r && n.indexOf(t, r) == r }, Tt.escape = function (n) { return (n = e(n)) && st.test(n) ? n.replace(ct, c) : n }, Tt.escapeRegExp = lu, Tt.every = Oe, Tt.find = We, Tt.findIndex = me, Tt.findKey = function (n, t, r) { return t = te(t, r, 3), cr(n, t, _r, true) }, Tt.findLast = function (n, t, r) { return t = te(t, r, 3), cr(n, t, ir) }, Tt.findLastIndex = function (n, t, r) {
            var e = n ? n.length : 0;
            for (t = te(t, r, 3); e--;)if (t(n[e], e, n)) return e; return -1
        }, Tt.findLastKey = function (n, t, r) { return t = te(t, r, 3), cr(n, t, gr, true) }, Tt.findWhere = function (n, t) { return We(n, wr(t)) }, Tt.first = be, Tt.has = function (n, t) { return n ? Lu.call(n, t) : false }, Tt.identity = du, Tt.includes = Ne, Tt.indexOf = we, Tt.inRange = function (n, t, r) { return t = +t || 0, "undefined" === typeof r ? (r = t, t = 0) : r = +r || 0, n >= t && n < r }, Tt.isArguments = Je, Tt.isArray = Uo, Tt.isBoolean = function (n) { return true === n || false === n || p(n) && zu.call(n) == D || false }, Tt.isDate = function (n) {
            return p(n) && zu.call(n) == M || false
        }, Tt.isElement = Xe, Tt.isEmpty = function (n) { if (null == n) return true; var t = n.length; return ae(t) && (Uo(n) || eu(n) || Je(n) || p(n) && $o(n.splice)) ? !t : !zo(n).length }, Tt.isEqual = function (n, t, r, e) { return r = typeof r == "function" && Fr(r, e, 3), !r && ce(n) && ce(t) ? n === t : (e = r ? r(n, t) : m, typeof e == "undefined" ? dr(n, t, r) : !!e) }, Tt.isError = He, Tt.isFinite = Fo, Tt.isFunction = $o, Tt.isMatch = function (n, t, r, e) {
            var u = zo(t), o = u.length; if (r = typeof r == "function" && Fr(r, e, 3), !r && 1 == o) {
                var i = u[0]; if (e = t[i], ce(e)) return null != n && e === n[i] && Lu.call(n, i)
            } for (var i = xu(o), f = xu(o); o--;)e = i[o] = t[u[o]], f[o] = ce(e); return mr(n, u, i, f, r)
        }, Tt.isNaN = function (n) { return tu(n) && n != +n }, Tt.isNative = nu, Tt.isNull = function (n) { return null === n }, Tt.isNumber = tu, Tt.isObject = Qe, Tt.isPlainObject = Lo, Tt.isRegExp = ru, Tt.isString = eu, Tt.isTypedArray = uu, Tt.isUndefined = function (n) { return typeof n == "undefined" }, Tt.kebabCase = qo, Tt.last = xe, Tt.lastIndexOf = function (n, t, r) {
            var e = n ? n.length : 0; if (!e) return -1; var u = e; if (typeof r == "number") u = (0 > r ? fo(e + r, 0) : ao(r || 0, e - 1)) + 1; else if (r) return u = Nr(n, t, true) - 1, n = n[u], (t === t ? t === n : n !== n) ? u : -1;
            if (t !== t) return s(n, u, true); for (; u--;)if (n[u] === t) return u; return -1
        }, Tt.max = Vo, Tt.min = Yo, Tt.noConflict = function () { return h._ = Du, this }, Tt.noop = wu, Tt.now = To, Tt.pad = function (n, t, r) { n = e(n), t = +t; var u = n.length; return u < t && oo(t) ? (u = (t - u) / 2, t = Yu(u), u = Ku(u), r = Zr("", u, r), r.slice(0, t) + n + r) : n }, Tt.padLeft = function (n, t, r) { return (n = e(n)) && Zr(n, t, r) + n }, Tt.padRight = function (n, t, r) { return (n = e(n)) && n + Zr(n, t, r) }, Tt.parseInt = su, Tt.random = function (n, t, r) {
        r && fe(n, t, r) && (t = r = null); var e = null == n, u = null == t; return null == r && (u && typeof n == "boolean" ? (r = n, n = 1) : typeof t == "boolean" && (r = t, u = true)), e && u && (t = 1, u = false), n = +n || 0, u ? (t = n, n = 0) : t = +t || 0, r || n % 1 || t % 1 ? (r = po(), ao(n + r * (t - n + parseFloat("1e-" + ((r + "").length - 1))), t)) : kr(n, t)
        }, Tt.reduce = Fe, Tt.reduceRight = $e, Tt.repeat = pu, Tt.result = function (n, t, r) { return t = null == n ? m : n[t], typeof t == "undefined" && (t = r), $o(t) ? t.call(n) : t }, Tt.runInContext = d, Tt.size = function (n) { var t = n ? n.length : 0; return ae(t) ? t : zo(n).length }, Tt.snakeCase = Po, Tt.some = ze, Tt.sortedIndex = function (n, t, r, e) { var u = te(r); return u === tr && null == r ? Nr(n, t) : Ur(n, t, u(r, e, 1)) }, Tt.sortedLastIndex = function (n, t, r, e) { var u = te(r); return u === tr && null == r ? Nr(n, t, true) : Ur(n, t, u(r, e, 1), true) }, Tt.startCase = Ko, Tt.startsWith = function (n, t, r) {
            return n = e(n), r = null == r ? 0 : ao(0 > r ? 0 : +r || 0, n.length), n.lastIndexOf(t, r) == r
        }, Tt.sum = function (n) { Uo(n) || (n = _e(n)); for (var t = n.length, r = 0; t--;)r += +n[t] || 0; return r }, Tt.template = function (n, t, r) {
            var u = Tt.templateSettings; r && fe(n, t, r) && (t = r = null), n = e(n), t = Ht(Ht({}, r || t), u, Xt), r = Ht(Ht({}, t.imports), u.imports, Xt); var o, i, f = zo(r), a = Tr(r, f), c = 0; r = t.interpolate || wt; var s = "__p+='"; r = Ou((t.escape || wt).source + "|" + r.source + "|" + (r === _t ? gt : wt).source + "|" + (t.evaluate || wt).source + "|$", "g"); var p = "sourceURL" in t ? "//# sourceURL=" + t.sourceURL + "\n" : ""; if (n.replace(r, function (t, r, e, u, f, a) {
                return e || (e = u), s += n.slice(c, a).replace(kt, l), r && (o = true, s += "'+__e(" + r + ")+'"), f && (i = true, s += "';" + f + ";\n__p+='"), e && (s += "'+((__t=(" + e + "))==null?'':__t)+'"), c = a + t.length, t
            }), s += "';", (t = t.variable) || (s = "with(obj){" + s + "}"), s = (i ? s.replace(ot, "") : s).replace(it, "$1").replace(ft, "$1;"), s = "function(" + (t || "obj") + "){" + (t ? "" : "obj||(obj={});") + "var __t,__p=''" + (o ? ",__e=_.escape" : "") + (i ? ",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}" : ";") + s + "return __p}", t = gu(function () { return ku(f, p + "return " + s).apply(m, a) }), t.source = s, He(t)) throw t; return t
        }, Tt.trim = hu, Tt.trimLeft = function (n, t, r) {
            var u = n; return (n = e(n)) ? n.slice((r ? fe(u, t, r) : null == t) ? g(n) : o(n, t + "")) : n
        }, Tt.trimRight = function (n, t, r) { var u = n; return (n = e(n)) ? (r ? fe(u, t, r) : null == t) ? n.slice(0, v(n) + 1) : n.slice(0, i(n, t + "") + 1) : n }, Tt.trunc = function (n, t, r) {
        r && fe(n, t, r) && (t = null); var u = C; if (r = W, null != t) if (Qe(t)) { var o = "separator" in t ? t.separator : o, u = "length" in t ? +t.length || 0 : u; r = "omission" in t ? e(t.omission) : r } else u = +t || 0; if (n = e(n), u >= n.length) return n; if (u -= r.length, 1 > u) return r; if (t = n.slice(0, u), null == o) return t + r; if (ru(o)) {
            if (n.slice(u).search(o)) {
                var i, f = n.slice(0, u); for (o.global || (o = Ou(o.source, (vt.exec(o) || "") + "g")), o.lastIndex = 0; n = o.exec(f);)i = n.index;
                t = t.slice(0, null == i ? u : i)
            }
        } else n.indexOf(o, u) != u && (o = t.lastIndexOf(o), -1 < o && (t = t.slice(0, o))); return t + r
        }, Tt.unescape = function (n) { return (n = e(n)) && lt.test(n) ? n.replace(at, y) : n }, Tt.uniqueId = function (n) { var t = ++Bu; return e(n) + t }, Tt.words = _u, Tt.all = Oe, Tt.any = ze, Tt.contains = Ne, Tt.detect = We, Tt.foldl = Fe, Tt.foldr = $e, Tt.head = be, Tt.include = Ne, Tt.inject = Fe, bu(Tt, function () { var n = {}; return _r(Tt, function (t, r) { Tt.prototype[r] || (n[r] = t) }), n }(), false), Tt.sample = Le, Tt.prototype.sample = function (n) {
            return this.__chain__ || null != n ? this.thru(function (t) {
                return Le(t, n)
            }) : Le(this.value())
        }, Tt.VERSION = b, Mt("bind bindKey curry curryRight partial partialRight".split(" "), function (n) { Tt[n].placeholder = Tt }), Mt(["dropWhile", "filter", "map", "takeWhile"], function (n, t) { var r = t != F, e = t == N; Ut.prototype[n] = function (n, u) { var o = this.__filtered__, i = o && e ? new Ut(this) : this.clone(); return (i.__iteratees__ || (i.__iteratees__ = [])).push({ done: false, count: 0, index: 0, iteratee: te(n, u, 1), limit: -1, type: t }), i.__filtered__ = o || r, i } }), Mt(["drop", "take"], function (n, t) {
            var r = n + "While"; Ut.prototype[n] = function (r) {
                var e = this.__filtered__, u = e && !t ? this.dropWhile() : this.clone();
                return r = null == r ? 1 : fo(Yu(r) || 0, 0), e ? t ? u.__takeCount__ = ao(u.__takeCount__, r) : xe(u.__iteratees__).limit = r : (u.__views__ || (u.__views__ = [])).push({ size: r, type: n + (0 > u.__dir__ ? "Right" : "") }), u
            }, Ut.prototype[n + "Right"] = function (t) { return this.reverse()[n](t).reverse() }, Ut.prototype[n + "RightWhile"] = function (n, t) { return this.reverse()[r](n, t).reverse() }
        }), Mt(["first", "last"], function (n, t) { var r = "take" + (t ? "Right" : ""); Ut.prototype[n] = function () { return this[r](1).value()[0] } }), Mt(["initial", "rest"], function (n, t) {
            var r = "drop" + (t ? "" : "Right");
            Ut.prototype[n] = function () { return this[r](1) }
        }), Mt(["pluck", "where"], function (n, t) { var r = t ? "filter" : "map", e = t ? wr : jr; Ut.prototype[n] = function (n) { return this[r](e(n)) } }), Ut.prototype.compact = function () { return this.filter(du) }, Ut.prototype.reject = function (n, t) { return n = te(n, t, 1), this.filter(function (t) { return !n(t) }) }, Ut.prototype.slice = function (n, t) { n = null == n ? 0 : +n || 0; var r = 0 > n ? this.takeRight(-n) : this.drop(n); return typeof t != "undefined" && (t = +t || 0, r = 0 > t ? r.dropRight(-t) : r.take(t - n)), r }, Ut.prototype.toArray = function () {
            return this.drop(0)
        }, _r(Ut.prototype, function (n, t) {
            var r = Tt[t], e = /^(?:filter|map|reject)|While$/.test(t), u = /^(?:first|last)$/.test(t); Tt.prototype[t] = function () {
                function t(n) { return n = [n], Gu.apply(n, o), r.apply(Tt, n) } var o = arguments, i = this.__chain__, f = this.__wrapped__, a = !!this.__actions__.length, c = f instanceof Ut, l = o[0], s = c || Uo(f); return s && e && typeof l == "function" && 1 != l.length && (c = s = false), c = c && !a, u && !i ? c ? n.call(f) : r.call(Tt, this.value()) : s ? (f = n.apply(c ? f : new Ut(this), o), u || !a && !f.__actions__ || (f.__actions__ || (f.__actions__ = [])).push({ func: Ie, args: [t], thisArg: Tt }), new Nt(f, i)) : this.thru(t)
            }
        }), Mt("concat join pop push replace shift sort splice split unshift".split(" "), function (n) { var t = (/^(?:replace|split)$/.test(n) ? Nu : Tu)[n], r = /^(?:push|sort|unshift)$/.test(n) ? "tap" : "thru", e = /^(?:join|pop|replace|shift)$/.test(n); Tt.prototype[n] = function () { var n = arguments; return e && !this.__chain__ ? t.apply(this.value(), n) : this[r](function (r) { return t.apply(r, n) }) } }), Ut.prototype.clone = function () {
            var n = this.__actions__, t = this.__iteratees__, r = this.__views__, e = new Ut(this.__wrapped__); return e.__actions__ = n ? Bt(n) : null, e.__dir__ = this.__dir__, e.__filtered__ = this.__filtered__, e.__iteratees__ = t ? Bt(t) : null, e.__takeCount__ = this.__takeCount__, e.__views__ = r ? Bt(r) : null, e
        }, Ut.prototype.reverse = function () { if (this.__filtered__) { var n = new Ut(this); n.__dir__ = -1, n.__filtered__ = true } else n = this.clone(), n.__dir__ *= -1; return n }, Ut.prototype.value = function () {
            var n = this.__wrapped__.value(); if (!Uo(n)) return Sr(n, this.__actions__); var t, r = this.__dir__, e = 0 > r; t = n.length; for (var u = this.__views__, o = 0, i = -1, f = u ? u.length : 0; ++i < f;) { var a = u[i], c = a.size; switch (a.type) { case "drop": o += c; break; case "dropRight": t -= c; break; case "take": t = ao(t, o + c); break; case "takeRight": o = fo(o, t - c) } } t = { start: o, end: t }, u = t.start, o = t.end, t = o - u, u = e ? o : u - 1, o = ao(t, this.__takeCount__), f = (i = this.__iteratees__) ? i.length : 0, a = 0, c = [];
            n: for (; t-- && a < o;) { for (var u = u + r, l = -1, s = n[u]; ++l < f;) { var p = i[l], h = p.iteratee, _ = p.type; if (_ == N) { if (p.done && (e ? u > p.index : u < p.index) && (p.count = 0, p.done = false), p.index = u, !(p.done || (_ = p.limit, p.done = -1 < _ ? p.count++ >= _ : !h(s)))) continue n } else if (p = h(s), _ == F) s = p; else if (!p) { if (_ == U) continue n; break n } } c[a++] = s } return c
        }, Tt.prototype.chain = function () { return Re(this) }, Tt.prototype.commit = function () { return new Nt(this.value(), this.__chain__) }, Tt.prototype.plant = function (n) {
            for (var t, r = this; r instanceof St;) {
                var e = ve(r);
                t ? u.__wrapped__ = e : t = e; var u = e, r = r.__wrapped__
            } return u.__wrapped__ = n, t
        }, Tt.prototype.reverse = function () { var n = this.__wrapped__; return n instanceof Ut ? (this.__actions__.length && (n = new Ut(this)), new Nt(n.reverse(), this.__chain__)) : this.thru(function (n) { return n.reverse() }) }, Tt.prototype.toString = function () { return this.value() + "" }, Tt.prototype.run = Tt.prototype.toJSON = Tt.prototype.valueOf = Tt.prototype.value = function () { return Sr(this.__wrapped__, this.__actions__) }, Tt.prototype.collect = Tt.prototype.map, Tt.prototype.head = Tt.prototype.first, Tt.prototype.select = Tt.prototype.filter, Tt.prototype.tail = Tt.prototype.rest, Tt
    } var m, b = "3.5.0", w = 1, x = 2, A = 4, j = 8, k = 16, E = 32, R = 64, I = 128, O = 256, C = 30, W = "...", T = 150, S = 16, N = 0, U = 1, F = 2, $ = "Expected a function", L = "__lodash_placeholder__", B = "[object Arguments]", z = "[object Array]", D = "[object Boolean]", M = "[object Date]", q = "[object Error]", P = "[object Function]", K = "[object Number]", V = "[object Object]", Y = "[object RegExp]", Z = "[object String]", G = "[object ArrayBuffer]", J = "[object Float32Array]", X = "[object Float64Array]", H = "[object Int8Array]", Q = "[object Int16Array]", nt = "[object Int32Array]", tt = "[object Uint8Array]", rt = "[object Uint8ClampedArray]", et = "[object Uint16Array]", ut = "[object Uint32Array]", ot = /\b__p\+='';/g, it = /\b(__p\+=)''\+/g, ft = /(__e\(.*?\)|\b__t\))\+'';/g, at = /&(?:amp|lt|gt|quot|#39|#96);/g, ct = /[&<>"'`]/g, lt = RegExp(at.source), st = RegExp(ct.source), pt = /<%-([\s\S]+?)%>/g, ht = /<%([\s\S]+?)%>/g, _t = /<%=([\s\S]+?)%>/g, gt = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g, vt = /\w*$/, yt = /^\s*function[ \n\r\t]+\w/, dt = /^0[xX]/, mt = /^\[object .+?Constructor\]$/, bt = /[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g, wt = /($^)/, xt = /[.*+?^${}()|[\]\/\\]/g, At = RegExp(xt.source), jt = /\bthis\b/, kt = /['\n\r\u2028\u2029\\]/g, Et = RegExp("[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?=[A-Z\\xc0-\\xd6\\xd8-\\xde][a-z\\xdf-\\xf6\\xf8-\\xff]+)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+|[A-Z\\xc0-\\xd6\\xd8-\\xde]+|[0-9]+", "g"), Rt = " \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000", It = "Array ArrayBuffer Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Math Number Object RegExp Set String _ clearTimeout document isFinite parseInt setTimeout TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap window WinRTError".split(" "), Ot = {};
    Ot[J] = Ot[X] = Ot[H] = Ot[Q] = Ot[nt] = Ot[tt] = Ot[rt] = Ot[et] = Ot[ut] = true, Ot[B] = Ot[z] = Ot[G] = Ot[D] = Ot[M] = Ot[q] = Ot[P] = Ot["[object Map]"] = Ot[K] = Ot[V] = Ot[Y] = Ot["[object Set]"] = Ot[Z] = Ot["[object WeakMap]"] = false; var Ct = {}; Ct[B] = Ct[z] = Ct[G] = Ct[D] = Ct[M] = Ct[J] = Ct[X] = Ct[H] = Ct[Q] = Ct[nt] = Ct[K] = Ct[V] = Ct[Y] = Ct[Z] = Ct[tt] = Ct[rt] = Ct[et] = Ct[ut] = true, Ct[q] = Ct[P] = Ct["[object Map]"] = Ct["[object Set]"] = Ct["[object WeakMap]"] = false; var Wt = { leading: false, maxWait: 0, trailing: false }, Tt = { "\xc0": "A", "\xc1": "A", "\xc2": "A", "\xc3": "A", "\xc4": "A", "\xc5": "A", "\xe0": "a", "\xe1": "a", "\xe2": "a", "\xe3": "a", "\xe4": "a", "\xe5": "a", "\xc7": "C", "\xe7": "c", "\xd0": "D", "\xf0": "d", "\xc8": "E", "\xc9": "E", "\xca": "E", "\xcb": "E", "\xe8": "e", "\xe9": "e", "\xea": "e", "\xeb": "e", "\xcc": "I", "\xcd": "I", "\xce": "I", "\xcf": "I", "\xec": "i", "\xed": "i", "\xee": "i", "\xef": "i", "\xd1": "N", "\xf1": "n", "\xd2": "O", "\xd3": "O", "\xd4": "O", "\xd5": "O", "\xd6": "O", "\xd8": "O", "\xf2": "o", "\xf3": "o", "\xf4": "o", "\xf5": "o", "\xf6": "o", "\xf8": "o", "\xd9": "U", "\xda": "U", "\xdb": "U", "\xdc": "U", "\xf9": "u", "\xfa": "u", "\xfb": "u", "\xfc": "u", "\xdd": "Y", "\xfd": "y", "\xff": "y", "\xc6": "Ae", "\xe6": "ae", "\xde": "Th", "\xfe": "th", "\xdf": "ss" }, St = { "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;", "`": "&#96;" }, Nt = { "&amp;": "&", "&lt;": "<", "&gt;": ">", "&quot;": '"', "&#39;": "'", "&#96;": "`" }, Ut = { "function": true, object: true }, Ft = { "\\": "\\", "'": "'", "\n": "n", "\r": "r", "\u2028": "u2028", "\u2029": "u2029" }, $t = Ut[typeof exports] && exports && !exports.nodeType && exports, Lt = Ut[typeof module] && module && !module.nodeType && module, Ut = Ut[typeof window] && window, Bt = Lt && Lt.exports === $t && $t, zt = $t && Lt && typeof global == "object" && global || Ut !== (this && this.window) && Ut || this, Dt = d();
    typeof define == "function" && typeof define.amd == "object" && define.amd ? (zt._ = Dt, define(function () { return Dt })) : $t && Lt ? Bt ? (Lt.exports = Dt)._ = Dt : $t._ = Dt : zt._ = Dt
}).call(this);
/*!
 * Knockout JavaScript library v3.2.0
 * (c) Steven Sanderson - http://knockoutjs.com/
 * License: MIT (http://www.opensource.org/licenses/mit-license.php)
 */

(function () {
    (function (p) {
        var s = this || (0, eval)("this"), v = s.document, L = s.navigator, w = s.jQuery, D = s.JSON; (function (p) { "function" === typeof require && "object" === typeof exports && "object" === typeof module ? p(module.exports || exports, require) : "function" === typeof define && define.amd ? define(["exports", "require"], p) : p(s.ko = {}) })(function (M, N) {
            function H(a, d) { return null === a || typeof a in R ? a === d : !1 } function S(a, d) { var c; return function () { c || (c = setTimeout(function () { c = p; a() }, d)) } } function T(a, d) {
                var c; return function () {
                    clearTimeout(c);
                    c = setTimeout(a, d)
                }
            } function I(b, d, c, e) { a.d[b] = { init: function (b, h, k, f, m) { var l, q; a.s(function () { var f = a.a.c(h()), k = !c !== !f, z = !q; if (z || d || k !== l) z && a.Y.la() && (q = a.a.ia(a.f.childNodes(b), !0)), k ? (z || a.f.T(b, a.a.ia(q)), a.Ca(e ? e(m, f) : m, b)) : a.f.ja(b), l = k }, null, { o: b }); return { controlsDescendantBindings: !0 } } }; a.h.ha[b] = !1; a.f.Q[b] = !0 } var a = "undefined" !== typeof M ? M : {}; a.b = function (b, d) { for (var c = b.split("."), e = a, g = 0; g < c.length - 1; g++)e = e[c[g]]; e[c[c.length - 1]] = d }; a.A = function (a, d, c) { a[d] = c }; a.version = "3.2.0";
            a.b("version", a.version); a.a = function () {
                function b(a, b) { for (var c in a) a.hasOwnProperty(c) && b(c, a[c]) } function d(a, b) { if (b) for (var c in b) b.hasOwnProperty(c) && (a[c] = b[c]); return a } function c(a, b) { a.__proto__ = b; return a } var e = { __proto__: [] } instanceof Array, g = {}, h = {}; g[L && /Firefox\/2/i.test(L.userAgent) ? "KeyboardEvent" : "UIEvents"] = ["keyup", "keydown", "keypress"]; g.MouseEvents = "click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "); b(g, function (a, b) {
                    if (b.length) for (var c =
                        0, d = b.length; c < d; c++)h[b[c]] = a
                }); var k = { propertychange: !0 }, f = v && function () { for (var a = 3, b = v.createElement("div"), c = b.getElementsByTagName("i"); b.innerHTML = "\x3c!--[if gt IE " + ++a + "]><i></i><![endif]--\x3e", c[0];); return 4 < a ? a : p }(); return {
                    vb: ["authenticity_token", /^__RequestVerificationToken(_.*)?$/], u: function (a, b) { for (var c = 0, d = a.length; c < d; c++)b(a[c], c) }, m: function (a, b) {
                        if ("function" == typeof Array.prototype.indexOf) return Array.prototype.indexOf.call(a, b); for (var c = 0, d = a.length; c < d; c++)if (a[c] ===
                            b) return c; return -1
                    }, qb: function (a, b, c) { for (var d = 0, f = a.length; d < f; d++)if (b.call(c, a[d], d)) return a[d]; return null }, ua: function (m, b) { var c = a.a.m(m, b); 0 < c ? m.splice(c, 1) : 0 === c && m.shift() }, rb: function (m) { m = m || []; for (var b = [], c = 0, d = m.length; c < d; c++)0 > a.a.m(b, m[c]) && b.push(m[c]); return b }, Da: function (a, b) { a = a || []; for (var c = [], d = 0, f = a.length; d < f; d++)c.push(b(a[d], d)); return c }, ta: function (a, b) { a = a || []; for (var c = [], d = 0, f = a.length; d < f; d++)b(a[d], d) && c.push(a[d]); return c }, ga: function (a, b) {
                        if (b instanceof
                            Array) a.push.apply(a, b); else for (var c = 0, d = b.length; c < d; c++)a.push(b[c]); return a
                    }, ea: function (b, c, d) { var f = a.a.m(a.a.Xa(b), c); 0 > f ? d && b.push(c) : d || b.splice(f, 1) }, xa: e, extend: d, za: c, Aa: e ? c : d, G: b, na: function (a, b) { if (!a) return a; var c = {}, d; for (d in a) a.hasOwnProperty(d) && (c[d] = b(a[d], d, a)); return c }, Ka: function (b) { for (; b.firstChild;)a.removeNode(b.firstChild) }, oc: function (b) { b = a.a.S(b); for (var c = v.createElement("div"), d = 0, f = b.length; d < f; d++)c.appendChild(a.R(b[d])); return c }, ia: function (b, c) {
                        for (var d =
                            0, f = b.length, e = []; d < f; d++) { var k = b[d].cloneNode(!0); e.push(c ? a.R(k) : k) } return e
                    }, T: function (b, c) { a.a.Ka(b); if (c) for (var d = 0, f = c.length; d < f; d++)b.appendChild(c[d]) }, Lb: function (b, c) { var d = b.nodeType ? [b] : b; if (0 < d.length) { for (var f = d[0], e = f.parentNode, k = 0, g = c.length; k < g; k++)e.insertBefore(c[k], f); k = 0; for (g = d.length; k < g; k++)a.removeNode(d[k]) } }, ka: function (a, b) {
                        if (a.length) {
                            for (b = 8 === b.nodeType && b.parentNode || b; a.length && a[0].parentNode !== b;)a.shift(); if (1 < a.length) {
                                var c = a[0], d = a[a.length - 1]; for (a.length =
                                    0; c !== d;)if (a.push(c), c = c.nextSibling, !c) return; a.push(d)
                            }
                        } return a
                    }, Nb: function (a, b) { 7 > f ? a.setAttribute("selected", b) : a.selected = b }, cb: function (a) { return null === a || a === p ? "" : a.trim ? a.trim() : a.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g, "") }, vc: function (a, b) { a = a || ""; return b.length > a.length ? !1 : a.substring(0, b.length) === b }, cc: function (a, b) {
                        if (a === b) return !0; if (11 === a.nodeType) return !1; if (b.contains) return b.contains(3 === a.nodeType ? a.parentNode : a); if (b.compareDocumentPosition) return 16 == (b.compareDocumentPosition(a) &
                            16); for (; a && a != b;)a = a.parentNode; return !!a
                    }, Ja: function (b) { return a.a.cc(b, b.ownerDocument.documentElement) }, ob: function (b) { return !!a.a.qb(b, a.a.Ja) }, t: function (a) { return a && a.tagName && a.tagName.toLowerCase() }, n: function (b, c, d) {
                        var e = f && k[c]; if (!e && w) w(b).bind(c, d); else if (e || "function" != typeof b.addEventListener) if ("undefined" != typeof b.attachEvent) { var g = function (a) { d.call(b, a) }, h = "on" + c; b.attachEvent(h, g); a.a.w.da(b, function () { b.detachEvent(h, g) }) } else throw Error("Browser doesn't support addEventListener or attachEvent");
                        else b.addEventListener(c, d, !1)
                    }, oa: function (b, c) {
                        if (!b || !b.nodeType) throw Error("element must be a DOM node when calling triggerEvent"); var d; "input" === a.a.t(b) && b.type && "click" == c.toLowerCase() ? (d = b.type, d = "checkbox" == d || "radio" == d) : d = !1; if (w && !d) w(b).trigger(c); else if ("function" == typeof v.createEvent) if ("function" == typeof b.dispatchEvent) d = v.createEvent(h[c] || "HTMLEvents"), d.initEvent(c, !0, !0, s, 0, 0, 0, 0, 0, !1, !1, !1, !1, 0, b), b.dispatchEvent(d); else throw Error("The supplied element doesn't support dispatchEvent");
                        else if (d && b.click) b.click(); else if ("undefined" != typeof b.fireEvent) b.fireEvent("on" + c); else throw Error("Browser doesn't support triggering events");
                    }, c: function (b) { return a.C(b) ? b() : b }, Xa: function (b) { return a.C(b) ? b.v() : b }, Ba: function (b, c, d) { if (c) { var f = /\S+/g, e = b.className.match(f) || []; a.a.u(c.match(f), function (b) { a.a.ea(e, b, d) }); b.className = e.join(" ") } }, bb: function (b, c) {
                        var d = a.a.c(c); if (null === d || d === p) d = ""; var f = a.f.firstChild(b); !f || 3 != f.nodeType || a.f.nextSibling(f) ? a.f.T(b, [b.ownerDocument.createTextNode(d)]) :
                            f.data = d; a.a.fc(b)
                    }, Mb: function (a, b) { a.name = b; if (7 >= f) try { a.mergeAttributes(v.createElement("<input name='" + a.name + "'/>"), !1) } catch (c) { } }, fc: function (a) { 9 <= f && (a = 1 == a.nodeType ? a : a.parentNode, a.style && (a.style.zoom = a.style.zoom)) }, dc: function (a) { if (f) { var b = a.style.width; a.style.width = 0; a.style.width = b } }, sc: function (b, c) { b = a.a.c(b); c = a.a.c(c); for (var d = [], f = b; f <= c; f++)d.push(f); return d }, S: function (a) { for (var b = [], c = 0, d = a.length; c < d; c++)b.push(a[c]); return b }, yc: 6 === f, zc: 7 === f, L: f, xb: function (b, c) {
                        for (var d =
                            a.a.S(b.getElementsByTagName("input")).concat(a.a.S(b.getElementsByTagName("textarea"))), f = "string" == typeof c ? function (a) { return a.name === c } : function (a) { return c.test(a.name) }, e = [], k = d.length - 1; 0 <= k; k--)f(d[k]) && e.push(d[k]); return e
                    }, pc: function (b) { return "string" == typeof b && (b = a.a.cb(b)) ? D && D.parse ? D.parse(b) : (new Function("return " + b))() : null }, eb: function (b, c, d) {
                        if (!D || !D.stringify) throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");
                        return D.stringify(a.a.c(b), c, d)
                    }, qc: function (c, d, f) {
                        f = f || {}; var e = f.params || {}, k = f.includeFields || this.vb, g = c; if ("object" == typeof c && "form" === a.a.t(c)) for (var g = c.action, h = k.length - 1; 0 <= h; h--)for (var r = a.a.xb(c, k[h]), E = r.length - 1; 0 <= E; E--)e[r[E].name] = r[E].value; d = a.a.c(d); var y = v.createElement("form"); y.style.display = "none"; y.action = g; y.method = "post"; for (var p in d) c = v.createElement("input"), c.type = "hidden", c.name = p, c.value = a.a.eb(a.a.c(d[p])), y.appendChild(c); b(e, function (a, b) {
                            var c = v.createElement("input");
                            c.type = "hidden"; c.name = a; c.value = b; y.appendChild(c)
                        }); v.body.appendChild(y); f.submitter ? f.submitter(y) : y.submit(); setTimeout(function () { y.parentNode.removeChild(y) }, 0)
                    }
                }
            }(); a.b("utils", a.a); a.b("utils.arrayForEach", a.a.u); a.b("utils.arrayFirst", a.a.qb); a.b("utils.arrayFilter", a.a.ta); a.b("utils.arrayGetDistinctValues", a.a.rb); a.b("utils.arrayIndexOf", a.a.m); a.b("utils.arrayMap", a.a.Da); a.b("utils.arrayPushAll", a.a.ga); a.b("utils.arrayRemoveItem", a.a.ua); a.b("utils.extend", a.a.extend); a.b("utils.fieldsIncludedWithJsonPost",
                a.a.vb); a.b("utils.getFormFields", a.a.xb); a.b("utils.peekObservable", a.a.Xa); a.b("utils.postJson", a.a.qc); a.b("utils.parseJson", a.a.pc); a.b("utils.registerEventHandler", a.a.n); a.b("utils.stringifyJson", a.a.eb); a.b("utils.range", a.a.sc); a.b("utils.toggleDomNodeCssClass", a.a.Ba); a.b("utils.triggerEvent", a.a.oa); a.b("utils.unwrapObservable", a.a.c); a.b("utils.objectForEach", a.a.G); a.b("utils.addOrRemoveItem", a.a.ea); a.b("unwrap", a.a.c); Function.prototype.bind || (Function.prototype.bind = function (a) {
                    var d =
                        this, c = Array.prototype.slice.call(arguments); a = c.shift(); return function () { return d.apply(a, c.concat(Array.prototype.slice.call(arguments))) }
                }); a.a.e = new function () {
                    function a(b, h) { var k = b[c]; if (!k || "null" === k || !e[k]) { if (!h) return p; k = b[c] = "ko" + d++; e[k] = {} } return e[k] } var d = 0, c = "__ko__" + (new Date).getTime(), e = {}; return {
                        get: function (c, d) { var e = a(c, !1); return e === p ? p : e[d] }, set: function (c, d, e) { if (e !== p || a(c, !1) !== p) a(c, !0)[d] = e }, clear: function (a) { var b = a[c]; return b ? (delete e[b], a[c] = null, !0) : !1 }, F: function () {
                            return d++ +
                                c
                        }
                    }
                }; a.b("utils.domData", a.a.e); a.b("utils.domData.clear", a.a.e.clear); a.a.w = new function () {
                    function b(b, d) { var f = a.a.e.get(b, c); f === p && d && (f = [], a.a.e.set(b, c, f)); return f } function d(c) { var e = b(c, !1); if (e) for (var e = e.slice(0), f = 0; f < e.length; f++)e[f](c); a.a.e.clear(c); a.a.w.cleanExternalData(c); if (g[c.nodeType]) for (e = c.firstChild; c = e;)e = c.nextSibling, 8 === c.nodeType && d(c) } var c = a.a.e.F(), e = { 1: !0, 8: !0, 9: !0 }, g = { 1: !0, 9: !0 }; return {
                        da: function (a, c) {
                            if ("function" != typeof c) throw Error("Callback must be a function");
                            b(a, !0).push(c)
                        }, Kb: function (d, e) { var f = b(d, !1); f && (a.a.ua(f, e), 0 == f.length && a.a.e.set(d, c, p)) }, R: function (b) { if (e[b.nodeType] && (d(b), g[b.nodeType])) { var c = []; a.a.ga(c, b.getElementsByTagName("*")); for (var f = 0, m = c.length; f < m; f++)d(c[f]) } return b }, removeNode: function (b) { a.R(b); b.parentNode && b.parentNode.removeChild(b) }, cleanExternalData: function (a) { w && "function" == typeof w.cleanData && w.cleanData([a]) }
                    }
                }; a.R = a.a.w.R; a.removeNode = a.a.w.removeNode; a.b("cleanNode", a.R); a.b("removeNode", a.removeNode); a.b("utils.domNodeDisposal",
                    a.a.w); a.b("utils.domNodeDisposal.addDisposeCallback", a.a.w.da); a.b("utils.domNodeDisposal.removeDisposeCallback", a.a.w.Kb); (function () {
                        a.a.ba = function (b) {
                            var d; if (w) if (w.parseHTML) d = w.parseHTML(b) || []; else { if ((d = w.clean([b])) && d[0]) { for (b = d[0]; b.parentNode && 11 !== b.parentNode.nodeType;)b = b.parentNode; b.parentNode && b.parentNode.removeChild(b) } } else {
                                var c = a.a.cb(b).toLowerCase(); d = v.createElement("div"); c = c.match(/^<(thead|tbody|tfoot)/) && [1, "<table>", "</table>"] || !c.indexOf("<tr") && [2, "<table><tbody>",
                                    "</tbody></table>"] || (!c.indexOf("<td") || !c.indexOf("<th")) && [3, "<table><tbody><tr>", "</tr></tbody></table>"] || [0, "", ""]; b = "ignored<div>" + c[1] + b + c[2] + "</div>"; for ("function" == typeof s.innerShiv ? d.appendChild(s.innerShiv(b)) : d.innerHTML = b; c[0]--;)d = d.lastChild; d = a.a.S(d.lastChild.childNodes)
                            } return d
                        }; a.a.$a = function (b, d) { a.a.Ka(b); d = a.a.c(d); if (null !== d && d !== p) if ("string" != typeof d && (d = d.toString()), w) w(b).html(d); else for (var c = a.a.ba(d), e = 0; e < c.length; e++)b.appendChild(c[e]) }
                    })(); a.b("utils.parseHtmlFragment",
                        a.a.ba); a.b("utils.setHtml", a.a.$a); a.D = function () {
                            function b(c, d) { if (c) if (8 == c.nodeType) { var g = a.D.Gb(c.nodeValue); null != g && d.push({ bc: c, mc: g }) } else if (1 == c.nodeType) for (var g = 0, h = c.childNodes, k = h.length; g < k; g++)b(h[g], d) } var d = {}; return {
                                Ua: function (a) {
                                    if ("function" != typeof a) throw Error("You can only pass a function to ko.memoization.memoize()"); var b = (4294967296 * (1 + Math.random()) | 0).toString(16).substring(1) + (4294967296 * (1 + Math.random()) | 0).toString(16).substring(1); d[b] = a; return "\x3c!--[ko_memo:" +
                                        b + "]--\x3e"
                                }, Rb: function (a, b) { var g = d[a]; if (g === p) throw Error("Couldn't find any memo with ID " + a + ". Perhaps it's already been unmemoized."); try { return g.apply(null, b || []), !0 } finally { delete d[a] } }, Sb: function (c, d) { var g = []; b(c, g); for (var h = 0, k = g.length; h < k; h++) { var f = g[h].bc, m = [f]; d && a.a.ga(m, d); a.D.Rb(g[h].mc, m); f.nodeValue = ""; f.parentNode && f.parentNode.removeChild(f) } }, Gb: function (a) { return (a = a.match(/^\[ko_memo\:(.*?)\]$/)) ? a[1] : null }
                            }
                        }(); a.b("memoization", a.D); a.b("memoization.memoize", a.D.Ua);
            a.b("memoization.unmemoize", a.D.Rb); a.b("memoization.parseMemoText", a.D.Gb); a.b("memoization.unmemoizeDomNodeAndDescendants", a.D.Sb); a.La = { throttle: function (b, d) { b.throttleEvaluation = d; var c = null; return a.j({ read: b, write: function (a) { clearTimeout(c); c = setTimeout(function () { b(a) }, d) } }) }, rateLimit: function (a, d) { var c, e, g; "number" == typeof d ? c = d : (c = d.timeout, e = d.method); g = "notifyWhenChangesStop" == e ? T : S; a.Ta(function (a) { return g(a, c) }) }, notify: function (a, d) { a.equalityComparer = "always" == d ? null : H } }; var R =
                { undefined: 1, "boolean": 1, number: 1, string: 1 }; a.b("extenders", a.La); a.Pb = function (b, d, c) { this.target = b; this.wa = d; this.ac = c; this.Cb = !1; a.A(this, "dispose", this.K) }; a.Pb.prototype.K = function () { this.Cb = !0; this.ac() }; a.P = function () { a.a.Aa(this, a.P.fn); this.M = {} }; var G = "change", A = {
                    U: function (b, d, c) { var e = this; c = c || G; var g = new a.Pb(e, d ? b.bind(d) : b, function () { a.a.ua(e.M[c], g); e.nb && e.nb() }); e.va && e.va(c); e.M[c] || (e.M[c] = []); e.M[c].push(g); return g }, notifySubscribers: function (b, d) {
                        d = d || G; if (this.Ab(d)) try {
                            a.k.Ea();
                            for (var c = this.M[d].slice(0), e = 0, g; g = c[e]; ++e)g.Cb || g.wa(b)
                        } finally { a.k.end() }
                    }, Ta: function (b) { var d = this, c = a.C(d), e, g, h; d.qa || (d.qa = d.notifySubscribers, d.notifySubscribers = function (a, b) { b && b !== G ? "beforeChange" === b ? d.kb(a) : d.qa(a, b) : d.lb(a) }); var k = b(function () { c && h === d && (h = d()); e = !1; d.Pa(g, h) && d.qa(g = h) }); d.lb = function (a) { e = !0; h = a; k() }; d.kb = function (a) { e || (g = a, d.qa(a, "beforeChange")) } }, Ab: function (a) { return this.M[a] && this.M[a].length }, yb: function () {
                        var b = 0; a.a.G(this.M, function (a, c) { b += c.length });
                        return b
                    }, Pa: function (a, d) { return !this.equalityComparer || !this.equalityComparer(a, d) }, extend: function (b) { var d = this; b && a.a.G(b, function (b, e) { var g = a.La[b]; "function" == typeof g && (d = g(d, e) || d) }); return d }
                }; a.A(A, "subscribe", A.U); a.A(A, "extend", A.extend); a.A(A, "getSubscriptionsCount", A.yb); a.a.xa && a.a.za(A, Function.prototype); a.P.fn = A; a.Db = function (a) { return null != a && "function" == typeof a.U && "function" == typeof a.notifySubscribers }; a.b("subscribable", a.P); a.b("isSubscribable", a.Db); a.Y = a.k = function () {
                    function b(a) {
                        c.push(e);
                        e = a
                    } function d() { e = c.pop() } var c = [], e, g = 0; return { Ea: b, end: d, Jb: function (b) { if (e) { if (!a.Db(b)) throw Error("Only subscribable things can act as dependencies"); e.wa(b, b.Vb || (b.Vb = ++g)) } }, B: function (a, c, f) { try { return b(), a.apply(c, f || []) } finally { d() } }, la: function () { if (e) return e.s.la() }, ma: function () { if (e) return e.ma } }
                }(); a.b("computedContext", a.Y); a.b("computedContext.getDependenciesCount", a.Y.la); a.b("computedContext.isInitial", a.Y.ma); a.b("computedContext.isSleeping", a.Y.Ac); a.p = function (b) {
                    function d() {
                        if (0 <
                            arguments.length) return d.Pa(c, arguments[0]) && (d.X(), c = arguments[0], d.W()), this; a.k.Jb(d); return c
                    } var c = b; a.P.call(d); a.a.Aa(d, a.p.fn); d.v = function () { return c }; d.W = function () { d.notifySubscribers(c) }; d.X = function () { d.notifySubscribers(c, "beforeChange") }; a.A(d, "peek", d.v); a.A(d, "valueHasMutated", d.W); a.A(d, "valueWillMutate", d.X); return d
                }; a.p.fn = { equalityComparer: H }; var F = a.p.rc = "__ko_proto__"; a.p.fn[F] = a.p; a.a.xa && a.a.za(a.p.fn, a.P.fn); a.Ma = function (b, d) {
                    return null === b || b === p || b[F] === p ? !1 : b[F] ===
                        d ? !0 : a.Ma(b[F], d)
                }; a.C = function (b) { return a.Ma(b, a.p) }; a.Ra = function (b) { return "function" == typeof b && b[F] === a.p || "function" == typeof b && b[F] === a.j && b.hc ? !0 : !1 }; a.b("observable", a.p); a.b("isObservable", a.C); a.b("isWriteableObservable", a.Ra); a.b("isWritableObservable", a.Ra); a.aa = function (b) { b = b || []; if ("object" != typeof b || !("length" in b)) throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined."); b = a.p(b); a.a.Aa(b, a.aa.fn); return b.extend({ trackArrayChanges: !0 }) };
            a.aa.fn = {
                remove: function (b) { for (var d = this.v(), c = [], e = "function" != typeof b || a.C(b) ? function (a) { return a === b } : b, g = 0; g < d.length; g++) { var h = d[g]; e(h) && (0 === c.length && this.X(), c.push(h), d.splice(g, 1), g--) } c.length && this.W(); return c }, removeAll: function (b) { if (b === p) { var d = this.v(), c = d.slice(0); this.X(); d.splice(0, d.length); this.W(); return c } return b ? this.remove(function (c) { return 0 <= a.a.m(b, c) }) : [] }, destroy: function (b) {
                    var d = this.v(), c = "function" != typeof b || a.C(b) ? function (a) { return a === b } : b; this.X();
                    for (var e = d.length - 1; 0 <= e; e--)c(d[e]) && (d[e]._destroy = !0); this.W()
                }, destroyAll: function (b) { return b === p ? this.destroy(function () { return !0 }) : b ? this.destroy(function (d) { return 0 <= a.a.m(b, d) }) : [] }, indexOf: function (b) { var d = this(); return a.a.m(d, b) }, replace: function (a, d) { var c = this.indexOf(a); 0 <= c && (this.X(), this.v()[c] = d, this.W()) }
            }; a.a.u("pop push reverse shift sort splice unshift".split(" "), function (b) {
                a.aa.fn[b] = function () {
                    var a = this.v(); this.X(); this.sb(a, b, arguments); a = a[b].apply(a, arguments); this.W();
                    return a
                }
            }); a.a.u(["slice"], function (b) { a.aa.fn[b] = function () { var a = this(); return a[b].apply(a, arguments) } }); a.a.xa && a.a.za(a.aa.fn, a.p.fn); a.b("observableArray", a.aa); var J = "arrayChange"; a.La.trackArrayChanges = function (b) {
                function d() {
                    if (!c) {
                        c = !0; var d = b.notifySubscribers; b.notifySubscribers = function (a, b) { b && b !== G || ++g; return d.apply(this, arguments) }; var f = [].concat(b.v() || []); e = null; b.U(function (c) {
                            c = [].concat(c || []); if (b.Ab(J)) {
                                var d; if (!e || 1 < g) e = a.a.Fa(f, c, { sparse: !0 }); d = e; d.length && b.notifySubscribers(d,
                                    J)
                            } f = c; e = null; g = 0
                        })
                    }
                } if (!b.sb) {
                    var c = !1, e = null, g = 0, h = b.U; b.U = b.subscribe = function (a, b, c) { c === J && d(); return h.apply(this, arguments) }; b.sb = function (b, d, m) {
                        function l(a, b, c) { return q[q.length] = { status: a, value: b, index: c } } if (c && !g) {
                            var q = [], h = b.length, t = m.length, z = 0; switch (d) {
                                case "push": z = h; case "unshift": for (d = 0; d < t; d++)l("added", m[d], z + d); break; case "pop": z = h - 1; case "shift": h && l("deleted", b[z], z); break; case "splice": d = Math.min(Math.max(0, 0 > m[0] ? h + m[0] : m[0]), h); for (var h = 1 === t ? h : Math.min(d + (m[1] || 0),
                                    h), t = d + t - 2, z = Math.max(h, t), u = [], r = [], E = 2; d < z; ++d, ++E)d < h && r.push(l("deleted", b[d], d)), d < t && u.push(l("added", m[E], d)); a.a.wb(r, u); break; default: return
                            }e = q
                        }
                    }
                }
            }; a.s = a.j = function (b, d, c) {
                function e() { a.a.G(v, function (a, b) { b.K() }); v = {} } function g() { e(); C = 0; u = !0; n = !1 } function h() { var a = f.throttleEvaluation; a && 0 <= a ? (clearTimeout(P), P = setTimeout(k, a)) : f.ib ? f.ib() : k() } function k(b) {
                    if (t) { if (E) throw Error("A 'pure' computed must not be called recursively"); } else if (!u) {
                        if (w && w()) { if (!z) { s(); return } } else z = !1;
                        t = !0; if (y) try { var c = {}; a.k.Ea({ wa: function (a, b) { c[b] || (c[b] = 1, ++C) }, s: f, ma: p }); C = 0; q = r.call(d) } finally { a.k.end(), t = !1 } else try { var e = v, m = C; a.k.Ea({ wa: function (a, b) { u || (m && e[b] ? (v[b] = e[b], ++C, delete e[b], --m) : v[b] || (v[b] = a.U(h), ++C)) }, s: f, ma: E ? p : !C }); v = {}; C = 0; try { var l = d ? r.call(d) : r() } finally { a.k.end(), m && a.a.G(e, function (a, b) { b.K() }), n = !1 } f.Pa(q, l) && (f.notifySubscribers(q, "beforeChange"), q = l, !0 !== b && f.notifySubscribers(q)) } finally { t = !1 } C || s()
                    }
                } function f() {
                    if (0 < arguments.length) {
                        if ("function" === typeof O) O.apply(d,
                            arguments); else throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters."); return this
                    } a.k.Jb(f); n && k(!0); return q
                } function m() { n && !C && k(!0); return q } function l() { return n || 0 < C } var q, n = !0, t = !1, z = !1, u = !1, r = b, E = !1, y = !1; r && "object" == typeof r ? (c = r, r = c.read) : (c = c || {}, r || (r = c.read)); if ("function" != typeof r) throw Error("Pass a function that returns the value of the ko.computed"); var O = c.write, x = c.disposeWhenNodeIsRemoved ||
                    c.o || null, B = c.disposeWhen || c.Ia, w = B, s = g, v = {}, C = 0, P = null; d || (d = c.owner); a.P.call(f); a.a.Aa(f, a.j.fn); f.v = m; f.la = function () { return C }; f.hc = "function" === typeof c.write; f.K = function () { s() }; f.Z = l; var A = f.Ta; f.Ta = function (a) { A.call(f, a); f.ib = function () { f.kb(q); n = !0; f.lb(f) } }; c.pure ? (y = E = !0, f.va = function () { y && (y = !1, k(!0)) }, f.nb = function () { f.yb() || (e(), y = n = !0) }) : c.deferEvaluation && (f.va = function () { m(); delete f.va }); a.A(f, "peek", f.v); a.A(f, "dispose", f.K); a.A(f, "isActive", f.Z); a.A(f, "getDependenciesCount",
                        f.la); x && (z = !0, x.nodeType && (w = function () { return !a.a.Ja(x) || B && B() })); y || c.deferEvaluation || k(); x && l() && x.nodeType && (s = function () { a.a.w.Kb(x, s); g() }, a.a.w.da(x, s)); return f
            }; a.jc = function (b) { return a.Ma(b, a.j) }; A = a.p.rc; a.j[A] = a.p; a.j.fn = { equalityComparer: H }; a.j.fn[A] = a.j; a.a.xa && a.a.za(a.j.fn, a.P.fn); a.b("dependentObservable", a.j); a.b("computed", a.j); a.b("isComputed", a.jc); a.Ib = function (b, d) { if ("function" === typeof b) return a.s(b, d, { pure: !0 }); b = a.a.extend({}, b); b.pure = !0; return a.s(b, d) }; a.b("pureComputed",
                a.Ib); (function () {
                    function b(a, g, h) { h = h || new c; a = g(a); if ("object" != typeof a || null === a || a === p || a instanceof Date || a instanceof String || a instanceof Number || a instanceof Boolean) return a; var k = a instanceof Array ? [] : {}; h.save(a, k); d(a, function (c) { var d = g(a[c]); switch (typeof d) { case "boolean": case "number": case "string": case "function": k[c] = d; break; case "object": case "undefined": var l = h.get(d); k[c] = l !== p ? l : b(d, g, h) } }); return k } function d(a, b) {
                        if (a instanceof Array) {
                            for (var c = 0; c < a.length; c++)b(c); "function" ==
                                typeof a.toJSON && b("toJSON")
                        } else for (c in a) b(c)
                    } function c() { this.keys = []; this.hb = [] } a.Qb = function (c) { if (0 == arguments.length) throw Error("When calling ko.toJS, pass the object you want to convert."); return b(c, function (b) { for (var c = 0; a.C(b) && 10 > c; c++)b = b(); return b }) }; a.toJSON = function (b, c, d) { b = a.Qb(b); return a.a.eb(b, c, d) }; c.prototype = { save: function (b, c) { var d = a.a.m(this.keys, b); 0 <= d ? this.hb[d] = c : (this.keys.push(b), this.hb.push(c)) }, get: function (b) { b = a.a.m(this.keys, b); return 0 <= b ? this.hb[b] : p } }
                })();
            a.b("toJS", a.Qb); a.b("toJSON", a.toJSON); (function () {
            a.i = {
                q: function (b) { switch (a.a.t(b)) { case "option": return !0 === b.__ko__hasDomDataOptionValue__ ? a.a.e.get(b, a.d.options.Va) : 7 >= a.a.L ? b.getAttributeNode("value") && b.getAttributeNode("value").specified ? b.value : b.text : b.value; case "select": return 0 <= b.selectedIndex ? a.i.q(b.options[b.selectedIndex]) : p; default: return b.value } }, ca: function (b, d, c) {
                    switch (a.a.t(b)) {
                        case "option": switch (typeof d) {
                            case "string": a.a.e.set(b, a.d.options.Va, p); "__ko__hasDomDataOptionValue__" in
                                b && delete b.__ko__hasDomDataOptionValue__; b.value = d; break; default: a.a.e.set(b, a.d.options.Va, d), b.__ko__hasDomDataOptionValue__ = !0, b.value = "number" === typeof d ? d : ""
                        }break; case "select": if ("" === d || null === d) d = p; for (var e = -1, g = 0, h = b.options.length, k; g < h; ++g)if (k = a.i.q(b.options[g]), k == d || "" == k && d === p) { e = g; break } if (c || 0 <= e || d === p && 1 < b.size) b.selectedIndex = e; break; default: if (null === d || d === p) d = ""; b.value = d
                    }
                }
            }
            })(); a.b("selectExtensions", a.i); a.b("selectExtensions.readValue", a.i.q); a.b("selectExtensions.writeValue",
                a.i.ca); a.h = function () {
                    function b(b) {
                        b = a.a.cb(b); 123 === b.charCodeAt(0) && (b = b.slice(1, -1)); var c = [], d = b.match(e), k, n, t = 0; if (d) {
                            d.push(","); for (var z = 0, u; u = d[z]; ++z) {
                                var r = u.charCodeAt(0); if (44 === r) { if (0 >= t) { k && c.push(n ? { key: k, value: n.join("") } : { unknown: k }); k = n = t = 0; continue } } else if (58 === r) { if (!n) continue } else if (47 === r && z && 1 < u.length) (r = d[z - 1].match(g)) && !h[r[0]] && (b = b.substr(b.indexOf(u) + 1), d = b.match(e), d.push(","), z = -1, u = "/"); else if (40 === r || 123 === r || 91 === r)++t; else if (41 === r || 125 === r || 93 === r)--t;
                                else if (!k && !n) { k = 34 === r || 39 === r ? u.slice(1, -1) : u; continue } n ? n.push(u) : n = [u]
                            }
                        } return c
                    } var d = ["true", "false", "null", "undefined"], c = /^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i, e = RegExp("\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|/(?:[^/\\\\]|\\\\.)*/w*|[^\\s:,/][^,\"'{}()/:[\\]]*[^\\s,\"'{}()/:[\\]]|[^\\s]", "g"), g = /[\])"'A-Za-z0-9_$]+$/, h = { "in": 1, "return": 1, "typeof": 1 }, k = {}; return {
                        ha: [], V: k, Wa: b, ya: function (f, m) {
                            function e(b, m) {
                                var f; if (!z) {
                                    var u = a.getBindingHandler(b); if (u && u.preprocess &&
                                        !(m = u.preprocess(m, b, e))) return; if (u = k[b]) f = m, 0 <= a.a.m(d, f) ? f = !1 : (u = f.match(c), f = null === u ? !1 : u[1] ? "Object(" + u[1] + ")" + u[2] : f), u = f; u && h.push("'" + b + "':function(_z){" + f + "=_z}")
                                } t && (m = "function(){return " + m + " }"); g.push("'" + b + "':" + m)
                            } m = m || {}; var g = [], h = [], t = m.valueAccessors, z = m.bindingParams, u = "string" === typeof f ? b(f) : f; a.a.u(u, function (a) { e(a.key || a.unknown, a.value) }); h.length && e("_ko_property_writers", "{" + h.join(",") + " }"); return g.join(",")
                        }, lc: function (a, b) {
                            for (var c = 0; c < a.length; c++)if (a[c].key ==
                                b) return !0; return !1
                        }, pa: function (b, c, d, e, k) { if (b && a.C(b)) !a.Ra(b) || k && b.v() === e || b(e); else if ((b = c.get("_ko_property_writers")) && b[d]) b[d](e) }
                    }
                }(); a.b("expressionRewriting", a.h); a.b("expressionRewriting.bindingRewriteValidators", a.h.ha); a.b("expressionRewriting.parseObjectLiteral", a.h.Wa); a.b("expressionRewriting.preProcessBindings", a.h.ya); a.b("expressionRewriting._twoWayBindings", a.h.V); a.b("jsonExpressionRewriting", a.h); a.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson", a.h.ya); (function () {
                    function b(a) {
                        return 8 ==
                            a.nodeType && h.test(g ? a.text : a.nodeValue)
                    } function d(a) { return 8 == a.nodeType && k.test(g ? a.text : a.nodeValue) } function c(a, c) { for (var f = a, e = 1, k = []; f = f.nextSibling;) { if (d(f) && (e-- , 0 === e)) return k; k.push(f); b(f) && e++ } if (!c) throw Error("Cannot find closing comment tag to match: " + a.nodeValue); return null } function e(a, b) { var d = c(a, b); return d ? 0 < d.length ? d[d.length - 1].nextSibling : a.nextSibling : null } var g = v && "\x3c!--test--\x3e" === v.createComment("test").text, h = g ? /^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/ : /^\s*ko(?:\s+([\s\S]+))?\s*$/,
                        k = g ? /^\x3c!--\s*\/ko\s*--\x3e$/ : /^\s*\/ko\s*$/, f = { ul: !0, ol: !0 }; a.f = {
                            Q: {}, childNodes: function (a) { return b(a) ? c(a) : a.childNodes }, ja: function (c) { if (b(c)) { c = a.f.childNodes(c); for (var d = 0, f = c.length; d < f; d++)a.removeNode(c[d]) } else a.a.Ka(c) }, T: function (c, d) { if (b(c)) { a.f.ja(c); for (var f = c.nextSibling, e = 0, k = d.length; e < k; e++)f.parentNode.insertBefore(d[e], f) } else a.a.T(c, d) }, Hb: function (a, c) { b(a) ? a.parentNode.insertBefore(c, a.nextSibling) : a.firstChild ? a.insertBefore(c, a.firstChild) : a.appendChild(c) }, Bb: function (c,
                                d, f) { f ? b(c) ? c.parentNode.insertBefore(d, f.nextSibling) : f.nextSibling ? c.insertBefore(d, f.nextSibling) : c.appendChild(d) : a.f.Hb(c, d) }, firstChild: function (a) { return b(a) ? !a.nextSibling || d(a.nextSibling) ? null : a.nextSibling : a.firstChild }, nextSibling: function (a) { b(a) && (a = e(a)); return a.nextSibling && d(a.nextSibling) ? null : a.nextSibling }, gc: b, xc: function (a) { return (a = (g ? a.text : a.nodeValue).match(h)) ? a[1] : null }, Fb: function (c) {
                                    if (f[a.a.t(c)]) {
                                        var k = c.firstChild; if (k) {
                                            do if (1 === k.nodeType) {
                                                var g; g = k.firstChild;
                                                var h = null; if (g) { do if (h) h.push(g); else if (b(g)) { var t = e(g, !0); t ? g = t : h = [g] } else d(g) && (h = [g]); while (g = g.nextSibling) } if (g = h) for (h = k.nextSibling, t = 0; t < g.length; t++)h ? c.insertBefore(g[t], h) : c.appendChild(g[t])
                                            } while (k = k.nextSibling)
                                        }
                                    }
                                }
                        }
                })(); a.b("virtualElements", a.f); a.b("virtualElements.allowedBindings", a.f.Q); a.b("virtualElements.emptyNode", a.f.ja); a.b("virtualElements.insertAfter", a.f.Bb); a.b("virtualElements.prepend", a.f.Hb); a.b("virtualElements.setDomNodeChildren", a.f.T); (function () {
                a.J = function () {
                this.Yb =
                    {}
                }; a.a.extend(a.J.prototype, {
                    nodeHasBindings: function (b) { switch (b.nodeType) { case 1: return null != b.getAttribute("data-bind") || a.g.getComponentNameForNode(b); case 8: return a.f.gc(b); default: return !1 } }, getBindings: function (b, d) { var c = this.getBindingsString(b, d), c = c ? this.parseBindingsString(c, d, b) : null; return a.g.mb(c, b, d, !1) }, getBindingAccessors: function (b, d) { var c = this.getBindingsString(b, d), c = c ? this.parseBindingsString(c, d, b, { valueAccessors: !0 }) : null; return a.g.mb(c, b, d, !0) }, getBindingsString: function (b) {
                        switch (b.nodeType) {
                            case 1: return b.getAttribute("data-bind");
                            case 8: return a.f.xc(b); default: return null
                        }
                    }, parseBindingsString: function (b, d, c, e) { try { var g = this.Yb, h = b + (e && e.valueAccessors || ""), k; if (!(k = g[h])) { var f, m = "with($context){with($data||{}){return{" + a.h.ya(b, e) + "}}}"; f = new Function("$context", "$element", m); k = g[h] = f } return k(d, c) } catch (l) { throw l.message = "Unable to parse bindings.\nBindings value: " + b + "\nMessage: " + l.message, l; } }
                }); a.J.instance = new a.J
                })(); a.b("bindingProvider", a.J); (function () {
                    function b(a) { return function () { return a } } function d(a) { return a() }
                    function c(b) { return a.a.na(a.k.B(b), function (a, c) { return function () { return b()[c] } }) } function e(a, b) { return c(this.getBindings.bind(this, a, b)) } function g(b, c, d) { var f, e = a.f.firstChild(c), k = a.J.instance, g = k.preprocessNode; if (g) { for (; f = e;)e = a.f.nextSibling(f), g.call(k, f); e = a.f.firstChild(c) } for (; f = e;)e = a.f.nextSibling(f), h(b, f, d) } function h(b, c, d) { var e = !0, k = 1 === c.nodeType; k && a.f.Fb(c); if (k && d || a.J.instance.nodeHasBindings(c)) e = f(c, null, b, d).shouldBindDescendants; e && !l[a.a.t(c)] && g(b, c, !k) } function k(b) {
                        var c =
                            [], d = {}, f = []; a.a.G(b, function y(e) { if (!d[e]) { var k = a.getBindingHandler(e); k && (k.after && (f.push(e), a.a.u(k.after, function (c) { if (b[c]) { if (-1 !== a.a.m(f, c)) throw Error("Cannot combine the following bindings, because they have a cyclic dependency: " + f.join(", ")); y(c) } }), f.length--), c.push({ key: e, zb: k })); d[e] = !0 } }); return c
                    } function f(b, c, f, g) {
                        var m = a.a.e.get(b, q); if (!c) { if (m) throw Error("You cannot apply bindings multiple times to the same element."); a.a.e.set(b, q, !0) } !m && g && a.Ob(b, f); var l; if (c && "function" !==
                            typeof c) l = c; else { var h = a.J.instance, n = h.getBindingAccessors || e, s = a.j(function () { (l = c ? c(f, b) : n.call(h, b, f)) && f.I && f.I(); return l }, null, { o: b }); l && s.Z() || (s = null) } var v; if (l) {
                                var w = s ? function (a) { return function () { return d(s()[a]) } } : function (a) { return l[a] }, A = function () { return a.a.na(s ? s() : l, d) }; A.get = function (a) { return l[a] && d(w(a)) }; A.has = function (a) { return a in l }; g = k(l); a.a.u(g, function (c) {
                                    var d = c.zb.init, e = c.zb.update, k = c.key; if (8 === b.nodeType && !a.f.Q[k]) throw Error("The binding '" + k + "' cannot be used with virtual elements");
                                    try { "function" == typeof d && a.k.B(function () { var a = d(b, w(k), A, f.$data, f); if (a && a.controlsDescendantBindings) { if (v !== p) throw Error("Multiple bindings (" + v + " and " + k + ") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element."); v = k } }), "function" == typeof e && a.j(function () { e(b, w(k), A, f.$data, f) }, null, { o: b }) } catch (g) { throw g.message = 'Unable to process binding "' + k + ": " + l[k] + '"\nMessage: ' + g.message, g; }
                                })
                            } return { shouldBindDescendants: v === p }
                    }
                    function m(b) { return b && b instanceof a.N ? b : new a.N(b) } a.d = {}; var l = { script: !0 }; a.getBindingHandler = function (b) { return a.d[b] }; a.N = function (b, c, d, f) {
                        var e = this, k = "function" == typeof b && !a.C(b), g, m = a.j(function () { var g = k ? b() : b, l = a.a.c(g); c ? (c.I && c.I(), a.a.extend(e, c), m && (e.I = m)) : (e.$parents = [], e.$root = l, e.ko = a); e.$rawData = g; e.$data = l; d && (e[d] = l); f && f(e, c, l); return e.$data }, null, { Ia: function () { return g && !a.a.ob(g) }, o: !0 }); m.Z() && (e.I = m, m.equalityComparer = null, g = [], m.Tb = function (b) {
                            g.push(b); a.a.w.da(b,
                                function (b) { a.a.ua(g, b); g.length || (m.K(), e.I = m = p) })
                        })
                    }; a.N.prototype.createChildContext = function (b, c, d) { return new a.N(b, this, c, function (a, b) { a.$parentContext = b; a.$parent = b.$data; a.$parents = (b.$parents || []).slice(0); a.$parents.unshift(a.$parent); d && d(a) }) }; a.N.prototype.extend = function (b) { return new a.N(this.I || this.$data, this, null, function (c, d) { c.$rawData = d.$rawData; a.a.extend(c, "function" == typeof b ? b() : b) }) }; var q = a.a.e.F(), n = a.a.e.F(); a.Ob = function (b, c) {
                        if (2 == arguments.length) a.a.e.set(b, n, c),
                            c.I && c.I.Tb(b); else return a.a.e.get(b, n)
                    }; a.ra = function (b, c, d) { 1 === b.nodeType && a.f.Fb(b); return f(b, c, m(d), !0) }; a.Wb = function (d, f, e) { e = m(e); return a.ra(d, "function" === typeof f ? c(f.bind(null, e, d)) : a.a.na(f, b), e) }; a.Ca = function (a, b) { 1 !== b.nodeType && 8 !== b.nodeType || g(m(a), b, !0) }; a.pb = function (a, b) {
                    !w && s.jQuery && (w = s.jQuery); if (b && 1 !== b.nodeType && 8 !== b.nodeType) throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node"); b = b || s.document.body; h(m(a),
                        b, !0)
                    }; a.Ha = function (b) { switch (b.nodeType) { case 1: case 8: var c = a.Ob(b); if (c) return c; if (b.parentNode) return a.Ha(b.parentNode) }return p }; a.$b = function (b) { return (b = a.Ha(b)) ? b.$data : p }; a.b("bindingHandlers", a.d); a.b("applyBindings", a.pb); a.b("applyBindingsToDescendants", a.Ca); a.b("applyBindingAccessorsToNode", a.ra); a.b("applyBindingsToNode", a.Wb); a.b("contextFor", a.Ha); a.b("dataFor", a.$b)
                })(); (function (b) {
                    function d(d, f) {
                        var e = g.hasOwnProperty(d) ? g[d] : b, l; e || (e = g[d] = new a.P, c(d, function (a) {
                        h[d] = a; delete g[d];
                            l ? e.notifySubscribers(a) : setTimeout(function () { e.notifySubscribers(a) }, 0)
                        }), l = !0); e.U(f)
                    } function c(a, b) { e("getConfig", [a], function (c) { c ? e("loadComponent", [a, c], function (a) { b(a) }) : b(null) }) } function e(c, d, g, l) {
                        l || (l = a.g.loaders.slice(0)); var h = l.shift(); if (h) {
                            var n = h[c]; if (n) {
                                var t = !1; if (n.apply(h, d.concat(function (a) { t ? g(null) : null !== a ? g(a) : e(c, d, g, l) })) !== b && (t = !0, !h.suppressLoaderExceptions)) throw Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.");
                            } else e(c, d, g, l)
                        } else g(null)
                    } var g = {}, h = {}; a.g = { get: function (a, c) { var e = h.hasOwnProperty(a) ? h[a] : b; e ? setTimeout(function () { c(e) }, 0) : d(a, c) }, tb: function (a) { delete h[a] }, jb: e }; a.g.loaders = []; a.b("components", a.g); a.b("components.get", a.g.get); a.b("components.clearCachedDefinition", a.g.tb)
                })(); (function () {
                    function b(b, c, d, e) {
                        function k() { 0 === --u && e(h) } var h = {}, u = 2, r = d.template; d = d.viewModel; r ? g(c, r, function (c) { a.g.jb("loadTemplate", [b, c], function (a) { h.template = a; k() }) }) : k(); d ? g(c, d, function (c) {
                            a.g.jb("loadViewModel",
                                [b, c], function (a) { h[f] = a; k() })
                        }) : k()
                    } function d(a, b, c) { if ("function" === typeof b) c(function (a) { return new b(a) }); else if ("function" === typeof b[f]) c(b[f]); else if ("instance" in b) { var e = b.instance; c(function () { return e }) } else "viewModel" in b ? d(a, b.viewModel, c) : a("Unknown viewModel value: " + b) } function c(b) { switch (a.a.t(b)) { case "script": return a.a.ba(b.text); case "textarea": return a.a.ba(b.value); case "template": if (e(b.content)) return a.a.ia(b.content.childNodes) }return a.a.ia(b.childNodes) } function e(a) {
                        return s.DocumentFragment ?
                            a instanceof DocumentFragment : a && 11 === a.nodeType
                    } function g(a, b, c) { "string" === typeof b.require ? N || s.require ? (N || s.require)([b.require], c) : a("Uses require, but no AMD loader is present") : c(b) } function h(a) { return function (b) { throw Error("Component '" + a + "': " + b); } } var k = {}; a.g.tc = function (b, c) { if (!c) throw Error("Invalid configuration for " + b); if (a.g.Qa(b)) throw Error("Component " + b + " is already registered"); k[b] = c }; a.g.Qa = function (a) { return a in k }; a.g.wc = function (b) { delete k[b]; a.g.tb(b) }; a.g.ub = {
                        getConfig: function (a,
                            b) { b(k.hasOwnProperty(a) ? k[a] : null) }, loadComponent: function (a, c, d) { var e = h(a); g(e, c, function (c) { b(a, e, c, d) }) }, loadTemplate: function (b, d, f) {
                                b = h(b); if ("string" === typeof d) f(a.a.ba(d)); else if (d instanceof Array) f(d); else if (e(d)) f(a.a.S(d.childNodes)); else if (d.element) if (d = d.element, s.HTMLElement ? d instanceof HTMLElement : d && d.tagName && 1 === d.nodeType) f(c(d)); else if ("string" === typeof d) { var k = v.getElementById(d); k ? f(c(k)) : b("Cannot find element with ID " + d) } else b("Unknown element type: " + d); else b("Unknown template value: " +
                                    d)
                            }, loadViewModel: function (a, b, c) { d(h(a), b, c) }
                    }; var f = "createViewModel"; a.b("components.register", a.g.tc); a.b("components.isRegistered", a.g.Qa); a.b("components.unregister", a.g.wc); a.b("components.defaultLoader", a.g.ub); a.g.loaders.push(a.g.ub); a.g.Ub = k
                })(); (function () {
                    function b(b, e) {
                        var g = b.getAttribute("params"); if (g) {
                            var g = d.parseBindingsString(g, e, b, { valueAccessors: !0, bindingParams: !0 }), g = a.a.na(g, function (d) { return a.s(d, null, { o: b }) }), h = a.a.na(g, function (d) {
                                return d.Z() ? a.s(function () { return a.a.c(d()) },
                                    null, { o: b }) : d.v()
                            }); h.hasOwnProperty("$raw") || (h.$raw = g); return h
                        } return { $raw: {} }
                    } a.g.getComponentNameForNode = function (b) { b = a.a.t(b); return a.g.Qa(b) && b }; a.g.mb = function (c, d, g, h) { if (1 === d.nodeType) { var k = a.g.getComponentNameForNode(d); if (k) { c = c || {}; if (c.component) throw Error('Cannot use the "component" binding on a custom element matching a component'); var f = { name: k, params: b(d, g) }; c.component = h ? function () { return f } : f } } return c }; var d = new a.J; 9 > a.a.L && (a.g.register = function (a) {
                        return function (b) {
                            v.createElement(b);
                            return a.apply(this, arguments)
                        }
                    }(a.g.register), v.createDocumentFragment = function (b) { return function () { var d = b(), g = a.g.Ub, h; for (h in g) g.hasOwnProperty(h) && d.createElement(h); return d } }(v.createDocumentFragment))
                })(); (function () {
                    var b = 0; a.d.component = {
                        init: function (d, c, e, g, h) {
                            function k() { var a = f && f.dispose; "function" === typeof a && a.call(f); m = null } var f, m; a.a.w.da(d, k); a.s(function () {
                                var e = a.a.c(c()), g, n; "string" === typeof e ? g = e : (g = a.a.c(e.name), n = a.a.c(e.params)); if (!g) throw Error("No component name specified");
                                var t = m = ++b; a.g.get(g, function (b) { if (m === t) { k(); if (!b) throw Error("Unknown component '" + g + "'"); var c = b.template; if (!c) throw Error("Component '" + g + "' has no template"); c = a.a.ia(c); a.f.T(d, c); var c = n, e = b.createViewModel; b = e ? e.call(b, c, { element: d }) : c; c = h.createChildContext(b); f = b; a.Ca(c, d) } })
                            }, null, { o: d }); return { controlsDescendantBindings: !0 }
                        }
                    }; a.f.Q.component = !0
                })(); var Q = { "class": "className", "for": "htmlFor" }; a.d.attr = {
                    update: function (b, d) {
                        var c = a.a.c(d()) || {}; a.a.G(c, function (c, d) {
                            d = a.a.c(d); var h =
                                !1 === d || null === d || d === p; h && b.removeAttribute(c); 8 >= a.a.L && c in Q ? (c = Q[c], h ? b.removeAttribute(c) : b[c] = d) : h || b.setAttribute(c, d.toString()); "name" === c && a.a.Mb(b, h ? "" : d.toString())
                        })
                    }
                }; (function () {
                    a.d.checked = {
                        after: ["value", "attr"], init: function (b, d, c) {
                            function e() { var e = b.checked, k = q ? h() : e; if (!a.Y.ma() && (!f || e)) { var g = a.k.B(d); m ? l !== k ? (e && (a.a.ea(g, k, !0), a.a.ea(g, l, !1)), l = k) : a.a.ea(g, k, e) : a.h.pa(g, c, "checked", k, !0) } } function g() { var c = a.a.c(d()); b.checked = m ? 0 <= a.a.m(c, h()) : k ? c : h() === c } var h = a.Ib(function () {
                                return c.has("checkedValue") ?
                                    a.a.c(c.get("checkedValue")) : c.has("value") ? a.a.c(c.get("value")) : b.value
                            }), k = "checkbox" == b.type, f = "radio" == b.type; if (k || f) { var m = k && a.a.c(d()) instanceof Array, l = m ? h() : p, q = f || m; f && !b.name && a.d.uniqueName.init(b, function () { return !0 }); a.s(e, null, { o: b }); a.a.n(b, "click", e); a.s(g, null, { o: b }) }
                        }
                    }; a.h.V.checked = !0; a.d.checkedValue = { update: function (b, d) { b.value = a.a.c(d()) } }
                })(); a.d.css = {
                    update: function (b, d) {
                        var c = a.a.c(d()); "object" == typeof c ? a.a.G(c, function (c, d) { d = a.a.c(d); a.a.Ba(b, c, d) }) : (c = String(c || ""),
                            a.a.Ba(b, b.__ko__cssValue, !1), b.__ko__cssValue = c, a.a.Ba(b, c, !0))
                    }
                }; a.d.enable = { update: function (b, d) { var c = a.a.c(d()); c && b.disabled ? b.removeAttribute("disabled") : c || b.disabled || (b.disabled = !0) } }; a.d.disable = { update: function (b, d) { a.d.enable.update(b, function () { return !a.a.c(d()) }) } }; a.d.event = {
                    init: function (b, d, c, e, g) {
                        var h = d() || {}; a.a.G(h, function (k) {
                        "string" == typeof k && a.a.n(b, k, function (b) {
                            var h, l = d()[k]; if (l) {
                                try { var q = a.a.S(arguments); e = g.$data; q.unshift(e); h = l.apply(e, q) } finally {
                                !0 !== h && (b.preventDefault ?
                                    b.preventDefault() : b.returnValue = !1)
                                } !1 === c.get(k + "Bubble") && (b.cancelBubble = !0, b.stopPropagation && b.stopPropagation())
                            }
                        })
                        })
                    }
                }; a.d.foreach = {
                    Eb: function (b) { return function () { var d = b(), c = a.a.Xa(d); if (!c || "number" == typeof c.length) return { foreach: d, templateEngine: a.O.Oa }; a.a.c(d); return { foreach: c.data, as: c.as, includeDestroyed: c.includeDestroyed, afterAdd: c.afterAdd, beforeRemove: c.beforeRemove, afterRender: c.afterRender, beforeMove: c.beforeMove, afterMove: c.afterMove, templateEngine: a.O.Oa } } }, init: function (b,
                        d) { return a.d.template.init(b, a.d.foreach.Eb(d)) }, update: function (b, d, c, e, g) { return a.d.template.update(b, a.d.foreach.Eb(d), c, e, g) }
                }; a.h.ha.foreach = !1; a.f.Q.foreach = !0; a.d.hasfocus = {
                    init: function (b, d, c) {
                        function e(e) { b.__ko_hasfocusUpdating = !0; var f = b.ownerDocument; if ("activeElement" in f) { var g; try { g = f.activeElement } catch (h) { g = f.body } e = g === b } f = d(); a.h.pa(f, c, "hasfocus", e, !0); b.__ko_hasfocusLastValue = e; b.__ko_hasfocusUpdating = !1 } var g = e.bind(null, !0), h = e.bind(null, !1); a.a.n(b, "focus", g); a.a.n(b, "focusin",
                            g); a.a.n(b, "blur", h); a.a.n(b, "focusout", h)
                    }, update: function (b, d) { var c = !!a.a.c(d()); b.__ko_hasfocusUpdating || b.__ko_hasfocusLastValue === c || (c ? b.focus() : b.blur(), a.k.B(a.a.oa, null, [b, c ? "focusin" : "focusout"])) }
                }; a.h.V.hasfocus = !0; a.d.hasFocus = a.d.hasfocus; a.h.V.hasFocus = !0; a.d.html = { init: function () { return { controlsDescendantBindings: !0 } }, update: function (b, d) { a.a.$a(b, d()) } }; I("if"); I("ifnot", !1, !0); I("with", !0, !1, function (a, d) { return a.createChildContext(d) }); var K = {}; a.d.options = {
                    init: function (b) {
                        if ("select" !==
                            a.a.t(b)) throw Error("options binding applies only to SELECT elements"); for (; 0 < b.length;)b.remove(0); return { controlsDescendantBindings: !0 }
                    }, update: function (b, d, c) {
                        function e() { return a.a.ta(b.options, function (a) { return a.selected }) } function g(a, b, c) { var d = typeof b; return "function" == d ? b(a) : "string" == d ? a[b] : c } function h(c, d) { if (q.length) { var e = 0 <= a.a.m(q, a.i.q(d[0])); a.a.Nb(d[0], e); n && !e && a.k.B(a.a.oa, null, [b, "change"]) } } var k = 0 != b.length && b.multiple ? b.scrollTop : null, f = a.a.c(d()), m = c.get("optionsIncludeDestroyed");
                        d = {}; var l, q; q = b.multiple ? a.a.Da(e(), a.i.q) : 0 <= b.selectedIndex ? [a.i.q(b.options[b.selectedIndex])] : []; f && ("undefined" == typeof f.length && (f = [f]), l = a.a.ta(f, function (b) { return m || b === p || null === b || !a.a.c(b._destroy) }), c.has("optionsCaption") && (f = a.a.c(c.get("optionsCaption")), null !== f && f !== p && l.unshift(K))); var n = !1; d.beforeRemove = function (a) { b.removeChild(a) }; f = h; c.has("optionsAfterRender") && (f = function (b, d) { h(0, d); a.k.B(c.get("optionsAfterRender"), null, [d[0], b !== K ? b : p]) }); a.a.Za(b, l, function (d, e, f) {
                        f.length &&
                            (q = f[0].selected ? [a.i.q(f[0])] : [], n = !0); e = b.ownerDocument.createElement("option"); d === K ? (a.a.bb(e, c.get("optionsCaption")), a.i.ca(e, p)) : (f = g(d, c.get("optionsValue"), d), a.i.ca(e, a.a.c(f)), d = g(d, c.get("optionsText"), f), a.a.bb(e, d)); return [e]
                        }, d, f); a.k.B(function () { c.get("valueAllowUnset") && c.has("value") ? a.i.ca(b, a.a.c(c.get("value")), !0) : (b.multiple ? q.length && e().length < q.length : q.length && 0 <= b.selectedIndex ? a.i.q(b.options[b.selectedIndex]) !== q[0] : q.length || 0 <= b.selectedIndex) && a.a.oa(b, "change") });
                        a.a.dc(b); k && 20 < Math.abs(k - b.scrollTop) && (b.scrollTop = k)
                    }
                }; a.d.options.Va = a.a.e.F(); a.d.selectedOptions = {
                    after: ["options", "foreach"], init: function (b, d, c) { a.a.n(b, "change", function () { var e = d(), g = []; a.a.u(b.getElementsByTagName("option"), function (b) { b.selected && g.push(a.i.q(b)) }); a.h.pa(e, c, "selectedOptions", g) }) }, update: function (b, d) {
                        if ("select" != a.a.t(b)) throw Error("values binding applies only to SELECT elements"); var c = a.a.c(d()); c && "number" == typeof c.length && a.a.u(b.getElementsByTagName("option"),
                            function (b) { var d = 0 <= a.a.m(c, a.i.q(b)); a.a.Nb(b, d) })
                    }
                }; a.h.V.selectedOptions = !0; a.d.style = { update: function (b, d) { var c = a.a.c(d() || {}); a.a.G(c, function (c, d) { d = a.a.c(d); if (null === d || d === p || !1 === d) d = ""; b.style[c] = d }) } }; a.d.submit = { init: function (b, d, c, e, g) { if ("function" != typeof d()) throw Error("The value for a submit binding must be a function"); a.a.n(b, "submit", function (a) { var c, e = d(); try { c = e.call(g.$data, b) } finally { !0 !== c && (a.preventDefault ? a.preventDefault() : a.returnValue = !1) } }) } }; a.d.text = {
                    init: function () { return { controlsDescendantBindings: !0 } },
                    update: function (b, d) { a.a.bb(b, d()) }
                }; a.f.Q.text = !0; (function () {
                    if (s && s.navigator) var b = function (a) { if (a) return parseFloat(a[1]) }, d = s.opera && s.opera.version && parseInt(s.opera.version()), c = s.navigator.userAgent, e = b(c.match(/^(?:(?!chrome).)*version\/([^ ]*) safari/i)), g = b(c.match(/Firefox\/([^ ]*)/)); if (10 > a.a.L) var h = a.a.e.F(), k = a.a.e.F(), f = function (b) { var c = this.activeElement; (c = c && a.a.e.get(c, k)) && c(b) }, m = function (b, c) {
                        var d = b.ownerDocument; a.a.e.get(d, h) || (a.a.e.set(d, h, !0), a.a.n(d, "selectionchange",
                            f)); a.a.e.set(b, k, c)
                    }; a.d.textInput = {
                        init: function (b, c, f) {
                            function k(c, d) { a.a.n(b, c, d) } function h() { var d = a.a.c(c()); if (null === d || d === p) d = ""; v !== p && d === v ? setTimeout(h, 4) : b.value !== d && (s = d, b.value = d) } function u() { y || (v = b.value, y = setTimeout(r, 4)) } function r() { clearTimeout(y); v = y = p; var d = b.value; s !== d && (s = d, a.h.pa(c(), f, "textInput", d)) } var s = b.value, y, v; 10 > a.a.L ? (k("propertychange", function (a) { "value" === a.propertyName && r() }), 8 == a.a.L && (k("keyup", r), k("keydown", r)), 8 <= a.a.L && (m(b, r), k("dragend", u))) :
                                (k("input", r), 5 > e && "textarea" === a.a.t(b) ? (k("keydown", u), k("paste", u), k("cut", u)) : 11 > d ? k("keydown", u) : 4 > g && (k("DOMAutoComplete", r), k("dragdrop", r), k("drop", r))); k("change", r); a.s(h, null, { o: b })
                        }
                    }; a.h.V.textInput = !0; a.d.textinput = { preprocess: function (a, b, c) { c("textInput", a) } }
                })(); a.d.uniqueName = { init: function (b, d) { if (d()) { var c = "ko_unique_" + ++a.d.uniqueName.Zb; a.a.Mb(b, c) } } }; a.d.uniqueName.Zb = 0; a.d.value = {
                    after: ["options", "foreach"], init: function (b, d, c) {
                        if ("input" != b.tagName.toLowerCase() || "checkbox" !=
                            b.type && "radio" != b.type) {
                                var e = ["change"], g = c.get("valueUpdate"), h = !1, k = null; g && ("string" == typeof g && (g = [g]), a.a.ga(e, g), e = a.a.rb(e)); var f = function () { k = null; h = !1; var e = d(), f = a.i.q(b); a.h.pa(e, c, "value", f) }; !a.a.L || "input" != b.tagName.toLowerCase() || "text" != b.type || "off" == b.autocomplete || b.form && "off" == b.form.autocomplete || -1 != a.a.m(e, "propertychange") || (a.a.n(b, "propertychange", function () { h = !0 }), a.a.n(b, "focus", function () { h = !1 }), a.a.n(b, "blur", function () { h && f() })); a.a.u(e, function (c) {
                                    var d = f; a.a.vc(c,
                                        "after") && (d = function () { k = a.i.q(b); setTimeout(f, 0) }, c = c.substring(5)); a.a.n(b, c, d)
                                }); var m = function () { var e = a.a.c(d()), f = a.i.q(b); if (null !== k && e === k) setTimeout(m, 0); else if (e !== f) if ("select" === a.a.t(b)) { var g = c.get("valueAllowUnset"), f = function () { a.i.ca(b, e, g) }; f(); g || e === a.i.q(b) ? setTimeout(f, 0) : a.k.B(a.a.oa, null, [b, "change"]) } else a.i.ca(b, e) }; a.s(m, null, { o: b })
                        } else a.ra(b, { checkedValue: d })
                    }, update: function () { }
                }; a.h.V.value = !0; a.d.visible = {
                    update: function (b, d) {
                        var c = a.a.c(d()), e = "none" != b.style.display;
                        c && !e ? b.style.display = "" : !c && e && (b.style.display = "none")
                    }
                }; (function (b) { a.d[b] = { init: function (d, c, e, g, h) { return a.d.event.init.call(this, d, function () { var a = {}; a[b] = c(); return a }, e, g, h) } } })("click"); a.H = function () { }; a.H.prototype.renderTemplateSource = function () { throw Error("Override renderTemplateSource"); }; a.H.prototype.createJavaScriptEvaluatorBlock = function () { throw Error("Override createJavaScriptEvaluatorBlock"); }; a.H.prototype.makeTemplateSource = function (b, d) {
                    if ("string" == typeof b) {
                        d = d || v; var c =
                            d.getElementById(b); if (!c) throw Error("Cannot find template with ID " + b); return new a.r.l(c)
                    } if (1 == b.nodeType || 8 == b.nodeType) return new a.r.fa(b); throw Error("Unknown template type: " + b);
                }; a.H.prototype.renderTemplate = function (a, d, c, e) { a = this.makeTemplateSource(a, e); return this.renderTemplateSource(a, d, c) }; a.H.prototype.isTemplateRewritten = function (a, d) { return !1 === this.allowTemplateRewriting ? !0 : this.makeTemplateSource(a, d).data("isRewritten") }; a.H.prototype.rewriteTemplate = function (a, d, c) {
                    a = this.makeTemplateSource(a,
                        c); d = d(a.text()); a.text(d); a.data("isRewritten", !0)
                }; a.b("templateEngine", a.H); a.fb = function () {
                    function b(b, c, d, k) {
                        b = a.h.Wa(b); for (var f = a.h.ha, m = 0; m < b.length; m++) { var l = b[m].key; if (f.hasOwnProperty(l)) { var q = f[l]; if ("function" === typeof q) { if (l = q(b[m].value)) throw Error(l); } else if (!q) throw Error("This template engine does not support the '" + l + "' binding within its templates"); } } d = "ko.__tr_ambtns(function($context,$element){return(function(){return{ " + a.h.ya(b, { valueAccessors: !0 }) + " } })()},'" + d.toLowerCase() +
                            "')"; return k.createJavaScriptEvaluatorBlock(d) + c
                    } var d = /(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi, c = /\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g; return {
                        ec: function (b, c, d) { c.isTemplateRewritten(b, d) || c.rewriteTemplate(b, function (b) { return a.fb.nc(b, c) }, d) }, nc: function (a, g) { return a.replace(d, function (a, c, d, e, l) { return b(l, c, d, g) }).replace(c, function (a, c) { return b(c, "\x3c!-- ko --\x3e", "#comment", g) }) }, Xb: function (b, c) {
                            return a.D.Ua(function (d,
                                k) { var f = d.nextSibling; f && f.nodeName.toLowerCase() === c && a.ra(f, b, k) })
                        }
                    }
                }(); a.b("__tr_ambtns", a.fb.Xb); (function () {
                a.r = {}; a.r.l = function (a) { this.l = a }; a.r.l.prototype.text = function () { var b = a.a.t(this.l), b = "script" === b ? "text" : "textarea" === b ? "value" : "innerHTML"; if (0 == arguments.length) return this.l[b]; var d = arguments[0]; "innerHTML" === b ? a.a.$a(this.l, d) : this.l[b] = d }; var b = a.a.e.F() + "_"; a.r.l.prototype.data = function (c) { if (1 === arguments.length) return a.a.e.get(this.l, b + c); a.a.e.set(this.l, b + c, arguments[1]) };
                    var d = a.a.e.F(); a.r.fa = function (a) { this.l = a }; a.r.fa.prototype = new a.r.l; a.r.fa.prototype.text = function () { if (0 == arguments.length) { var b = a.a.e.get(this.l, d) || {}; b.gb === p && b.Ga && (b.gb = b.Ga.innerHTML); return b.gb } a.a.e.set(this.l, d, { gb: arguments[0] }) }; a.r.l.prototype.nodes = function () { if (0 == arguments.length) return (a.a.e.get(this.l, d) || {}).Ga; a.a.e.set(this.l, d, { Ga: arguments[0] }) }; a.b("templateSources", a.r); a.b("templateSources.domElement", a.r.l); a.b("templateSources.anonymousTemplate", a.r.fa)
                })(); (function () {
                    function b(b,
                        c, d) { var e; for (c = a.f.nextSibling(c); b && (e = b) !== c;)b = a.f.nextSibling(e), d(e, b) } function d(c, d) {
                            if (c.length) {
                                var e = c[0], g = c[c.length - 1], h = e.parentNode, n = a.J.instance, t = n.preprocessNode; if (t) { b(e, g, function (a, b) { var c = a.previousSibling, d = t.call(n, a); d && (a === e && (e = d[0] || b), a === g && (g = d[d.length - 1] || c)) }); c.length = 0; if (!e) return; e === g ? c.push(e) : (c.push(e, g), a.a.ka(c, h)) } b(e, g, function (b) { 1 !== b.nodeType && 8 !== b.nodeType || a.pb(d, b) }); b(e, g, function (b) { 1 !== b.nodeType && 8 !== b.nodeType || a.D.Sb(b, [d]) }); a.a.ka(c,
                                    h)
                            }
                        } function c(a) { return a.nodeType ? a : 0 < a.length ? a[0] : null } function e(b, e, h, l, q) {
                            q = q || {}; var n = b && c(b), n = n && n.ownerDocument, t = q.templateEngine || g; a.fb.ec(h, t, n); h = t.renderTemplate(h, l, q, n); if ("number" != typeof h.length || 0 < h.length && "number" != typeof h[0].nodeType) throw Error("Template engine must return an array of DOM nodes"); n = !1; switch (e) {
                                case "replaceChildren": a.f.T(b, h); n = !0; break; case "replaceNode": a.a.Lb(b, h); n = !0; break; case "ignoreTargetNode": break; default: throw Error("Unknown renderMode: " +
                                    e);
                            }n && (d(h, l), q.afterRender && a.k.B(q.afterRender, null, [h, l.$data])); return h
                        } var g; a.ab = function (b) { if (b != p && !(b instanceof a.H)) throw Error("templateEngine must inherit from ko.templateEngine"); g = b }; a.Ya = function (b, d, h, l, q) {
                            h = h || {}; if ((h.templateEngine || g) == p) throw Error("Set a template engine before calling renderTemplate"); q = q || "replaceChildren"; if (l) {
                                var n = c(l); return a.j(function () {
                                    var g = d && d instanceof a.N ? d : new a.N(a.a.c(d)), p = a.C(b) ? b() : "function" === typeof b ? b(g.$data, g) : b, g = e(l, q, p, g, h);
                                    "replaceNode" == q && (l = g, n = c(l))
                                }, null, { Ia: function () { return !n || !a.a.Ja(n) }, o: n && "replaceNode" == q ? n.parentNode : n })
                            } return a.D.Ua(function (c) { a.Ya(b, d, h, c, "replaceNode") })
                        }; a.uc = function (b, c, g, h, q) {
                            function n(a, b) { d(b, s); g.afterRender && g.afterRender(b, a) } function t(c, d) { s = q.createChildContext(c, g.as, function (a) { a.$index = d }); var f = a.C(b) ? b() : "function" === typeof b ? b(c, s) : b; return e(null, "ignoreTargetNode", f, s, g) } var s; return a.j(function () {
                                var b = a.a.c(c) || []; "undefined" == typeof b.length && (b = [b]); b = a.a.ta(b,
                                    function (b) { return g.includeDestroyed || b === p || null === b || !a.a.c(b._destroy) }); a.k.B(a.a.Za, null, [h, b, t, g, n])
                            }, null, { o: h })
                        }; var h = a.a.e.F(); a.d.template = {
                            init: function (b, c) { var d = a.a.c(c()); "string" == typeof d || d.name ? a.f.ja(b) : (d = a.f.childNodes(b), d = a.a.oc(d), (new a.r.fa(b)).nodes(d)); return { controlsDescendantBindings: !0 } }, update: function (b, c, d, e, g) {
                                var n = c(), t; c = a.a.c(n); d = !0; e = null; "string" == typeof c ? c = {} : (n = c.name, "if" in c && (d = a.a.c(c["if"])), d && "ifnot" in c && (d = !a.a.c(c.ifnot)), t = a.a.c(c.data));
                                "foreach" in c ? e = a.uc(n || b, d && c.foreach || [], c, b, g) : d ? (g = "data" in c ? g.createChildContext(t, c.as) : g, e = a.Ya(n || b, g, c, b)) : a.f.ja(b); g = e; (t = a.a.e.get(b, h)) && "function" == typeof t.K && t.K(); a.a.e.set(b, h, g && g.Z() ? g : p)
                            }
                        }; a.h.ha.template = function (b) { b = a.h.Wa(b); return 1 == b.length && b[0].unknown || a.h.lc(b, "name") ? null : "This template engine does not support anonymous templates nested within its templates" }; a.f.Q.template = !0
                })(); a.b("setTemplateEngine", a.ab); a.b("renderTemplate", a.Ya); a.a.wb = function (a, d, c) {
                    if (a.length &&
                        d.length) { var e, g, h, k, f; for (e = g = 0; (!c || e < c) && (k = a[g]); ++g) { for (h = 0; f = d[h]; ++h)if (k.value === f.value) { k.moved = f.index; f.moved = k.index; d.splice(h, 1); e = h = 0; break } e += h } }
                }; a.a.Fa = function () {
                    function b(b, c, e, g, h) {
                        var k = Math.min, f = Math.max, m = [], l, q = b.length, n, p = c.length, s = p - q || 1, u = q + p + 1, r, v, w; for (l = 0; l <= q; l++)for (v = r, m.push(r = []), w = k(p, l + s), n = f(0, l - 1); n <= w; n++)r[n] = n ? l ? b[l - 1] === c[n - 1] ? v[n - 1] : k(v[n] || u, r[n - 1] || u) + 1 : n + 1 : l + 1; k = []; f = []; s = []; l = q; for (n = p; l || n;)p = m[l][n] - 1, n && p === m[l][n - 1] ? f.push(k[k.length] = {
                            status: e,
                            value: c[--n], index: n
                        }) : l && p === m[l - 1][n] ? s.push(k[k.length] = { status: g, value: b[--l], index: l }) : (--n, --l, h.sparse || k.push({ status: "retained", value: c[n] })); a.a.wb(f, s, 10 * q); return k.reverse()
                    } return function (a, c, e) { e = "boolean" === typeof e ? { dontLimitMoves: e } : e || {}; a = a || []; c = c || []; return a.length <= c.length ? b(a, c, "added", "deleted", e) : b(c, a, "deleted", "added", e) }
                }(); a.b("utils.compareArrays", a.a.Fa); (function () {
                    function b(b, d, g, h, k) {
                        var f = [], m = a.j(function () {
                            var l = d(g, k, a.a.ka(f, b)) || []; 0 < f.length && (a.a.Lb(f,
                                l), h && a.k.B(h, null, [g, l, k])); f.length = 0; a.a.ga(f, l)
                        }, null, { o: b, Ia: function () { return !a.a.ob(f) } }); return { $: f, j: m.Z() ? m : p }
                    } var d = a.a.e.F(); a.a.Za = function (c, e, g, h, k) {
                        function f(b, d) { x = q[d]; r !== d && (A[b] = x); x.Na(r++); a.a.ka(x.$, c); s.push(x); w.push(x) } function m(b, c) { if (b) for (var d = 0, e = c.length; d < e; d++)c[d] && a.a.u(c[d].$, function (a) { b(a, d, c[d].sa) }) } e = e || []; h = h || {}; var l = a.a.e.get(c, d) === p, q = a.a.e.get(c, d) || [], n = a.a.Da(q, function (a) { return a.sa }), t = a.a.Fa(n, e, h.dontLimitMoves), s = [], u = 0, r = 0, v = [], w = []; e =
                            []; for (var A = [], n = [], x, B = 0, D, F; D = t[B]; B++)switch (F = D.moved, D.status) { case "deleted": F === p && (x = q[u], x.j && x.j.K(), v.push.apply(v, a.a.ka(x.$, c)), h.beforeRemove && (e[B] = x, w.push(x))); u++; break; case "retained": f(B, u++); break; case "added": F !== p ? f(B, F) : (x = { sa: D.value, Na: a.p(r++) }, s.push(x), w.push(x), l || (n[B] = x)) }m(h.beforeMove, A); a.a.u(v, h.beforeRemove ? a.R : a.removeNode); for (var B = 0, l = a.f.firstChild(c), G; x = w[B]; B++) {
                            x.$ || a.a.extend(x, b(c, g, x.sa, k, x.Na)); for (u = 0; t = x.$[u]; l = t.nextSibling, G = t, u++)t !== l && a.f.Bb(c,
                                t, G); !x.ic && k && (k(x.sa, x.$, x.Na), x.ic = !0)
                            } m(h.beforeRemove, e); m(h.afterMove, A); m(h.afterAdd, n); a.a.e.set(c, d, s)
                    }
                })(); a.b("utils.setDomNodeChildrenFromArrayMapping", a.a.Za); a.O = function () { this.allowTemplateRewriting = !1 }; a.O.prototype = new a.H; a.O.prototype.renderTemplateSource = function (b) { var d = (9 > a.a.L ? 0 : b.nodes) ? b.nodes() : null; if (d) return a.a.S(d.cloneNode(!0).childNodes); b = b.text(); return a.a.ba(b) }; a.O.Oa = new a.O; a.ab(a.O.Oa); a.b("nativeTemplateEngine", a.O); (function () {
                a.Sa = function () {
                    var a = this.kc =
                        function () { if (!w || !w.tmpl) return 0; try { if (0 <= w.tmpl.tag.tmpl.open.toString().indexOf("__")) return 2 } catch (a) { } return 1 }(); this.renderTemplateSource = function (b, e, g) {
                            g = g || {}; if (2 > a) throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later."); var h = b.data("precompiled"); h || (h = b.text() || "", h = w.template(null, "{{ko_with $item.koBindingContext}}" + h + "{{/ko_with}}"), b.data("precompiled", h)); b = [e.$data]; e = w.extend({ koBindingContext: e }, g.templateOptions); e = w.tmpl(h,
                                b, e); e.appendTo(v.createElement("div")); w.fragments = {}; return e
                        }; this.createJavaScriptEvaluatorBlock = function (a) { return "{{ko_code ((function() { return " + a + " })()) }}" }; this.addTemplate = function (a, b) { v.write("<script type='text/html' id='" + a + "'>" + b + "\x3c/script>") }; 0 < a && (w.tmpl.tag.ko_code = { open: "__.push($1 || '');" }, w.tmpl.tag.ko_with = { open: "with($1) {", close: "} " })
                }; a.Sa.prototype = new a.H; var b = new a.Sa; 0 < b.kc && a.ab(b); a.b("jqueryTmplTemplateEngine", a.Sa)
                })()
        })
    })();
})();

var EbBasicChart = function (Option) {
    this.data = Option.data || null;
    this.XLabel = [];
    this.YLabel = [];
    this.dataset = [];
    this.chartApi = null;
    this.gdata = null;
    this.goptions = null;
    this.Xindx = []; this.Yindx = [];
    this.tableId = Option.tableId;
    this.sourceElement = null;
    this.flagAppendColumns = false;
    this.drake = null;
    this.EbObject = Option.dvObject || null;
    this.Refid = null;
    this.tabNum = null;
    this.type = null;
    this.PcFlag = false;
    this.login = null;
    this.relatedObjects = null;
    this.FD = false;
    this.piedataFlag = false;
    this.MainData = (Option.data === undefined) ? null : data;
    this.isPipped = false;
    this.isContextual = false;
    this.filterValues = [];
    this.rowData = null;
    this.isTagged = false;
    this.bot = false;
    this.cellData = null;
    this.filterHtml = "";
    var _icons = {
        "bar": "fa fa-bar-chart",
        "line": "fa fa-line-chart",
        "pie": "fa fa-pie-chart",
        "area": "fa fa-area-chart",
        "horizontalBar": "fa fa-bar-chart"
    };

    this.start = function () {
        if (this.EbObject === null)
            this.EbObject = new EbChartVisualization("Chart");
        this.type = this.EbObject.Type;
        if (this.data === null)
            this.call2FD();
        else
            this.drawGraphHelper(this.data);
    };

    this.call2FD = function () {
        if (this.EbObject.Columns === null) {
            $.ajax({
                type: "POST",
                url: "../boti/dvView1",
                data: { dvobj: JSON.stringify(this.EbObject) },
                success: this.ajaxSucc.bind(this)
            });
        }
        else {
            this.init();
        }
    };

    this.ajaxSucc = function (text) {
        $("#" + this.contId).append(text);////////////////        
        this.EbObject = dvGlobal.Current_obj;
        this.init();
    }.bind(this);

    this.init = function () {
        this.EbObject = this.EbObject;
        this.type = this.EbObject.Type;
        if (Option.filtervalues.length != 0)
            this.filterValues = Option.filtervalues;
        else
            this.filterValues = this.getFilterValues();
        
        $.ajax({
            type: 'POST',
            url: "../DV/getdata",
            data: { DataVizObjString: JSON.stringify(this.EbObject), draw: 1, RefId: this.EbObject.DataSourceRefId, Start: 0, Length: 50, TFilters: [], Params: this.filterValues },            
            success: this.getDataSuccess.bind(this),
            error: function () { }
        });
    };

    this.getFilterValues = function () {
        var fltr_collection = [];
        var FdCont = ".filterCont";
        var paramstxt = $(FdCont + " #all_control_names").val();//$('#hiddenparams').val().trim();datefrom,dateto
        if (paramstxt != undefined) {
            var params = paramstxt.split(',');
            $.each(params, function (i, id) {
                var v = null;
                var dtype = $(FdCont + ' #' + id).attr('data-ebtype');
                if (dtype === '6')
                    v = $(FdCont + ' #' + id).val().substring(0, 10);
                else if (dtype === '3')
                    v = $(FdCont).children().find("[name=" + id + "]:checked").val();
                else {
                    v = $(FdCont + ' #' + id).val();
                    if (dtype === '16' && !(isNaN(v))) {
                        v = parseInt(v);
                        dtype = 8;
                    }
                }

                if (v !== "")
                    fltr_collection.push(new fltr_obj(dtype, id, v));
            });
        }

        //if (this.rowData !== null) {
        //    $.each(this.rowData, this.rowObj2filter.bind(this, fltr_collection));
        //}

        return fltr_collection;
    };

    this.compareFilterValues = function () {
        var filter = this.getFilterValues();
        if (focusedId !== undefined) {
            $.each(filter, function (i, obj) {
                if (obj.value !== dvcontainerObj.dvcol[focusedId].filterValues[i].value) {
                    filterChanged = true;
                    return false;
                }

            }.bind(this));
            //if (f == null)
            //    return true;
            //else
            //    return false;
        }
        else
            filterChanged = true;
        //return false;
    }

    this.getDataSuccess = function (result) {
        //this.MainData = result.data; 
        if (this.login == "uc")
            dvcontainerObj.currentObj.data = result;
        this.drawGraphHelper(result.data);
    };

    this.drawGraphHelper = function (datain) {
        this.data = datain;
        this.drawGeneralGraph();
    };

    this.getBarData = function () {
        this.Xindx = [];
        this.Yindx = [];
        this.dataset = [];
        this.XLabel = [];
        this.YLabel = [];
        var xdx = [], ydx = [], ml = [], info = [];
        if (this.EbObject.Xaxis.$values.length > 0 && this.EbObject.Yaxis.$values.length > 0) {

            $.each(this.EbObject.Xaxis.$values, function (i, obj) {
                xdx.push(obj.data);
            });

            $.each(this.EbObject.Yaxis.$values, function (i, obj) {
                ydx.push(obj.data);
            });

            $.each(this.data, this.getBarDataLabel.bind(this, xdx));

            for (k = 0; k < ydx.length; k++) {
                this.YLabel = [];
                for (j = 0; j < this.data.length; j++)
                    this.YLabel.push(this.data[j][ydx[k]]);
                if (this.type !== "googlemap") {
                    if (this.type !== "pie") {
                        this.piedataFlag = false;
                        this.dataset.push(new datasetObj(this.EbObject.Yaxis.$values[k].name, this.YLabel, this.EbObject.LegendColor.$values[k].Color, this.EbObject.LegendColor.$values[k].Color, false));
                    }
                    else {
                        this.dataset.push(new datasetObj4Pie(this.EbObject.Yaxis.$values[k].name, this.YLabel, this.EbObject.LegendColor.$values[k].Color, this.EbObject.LegendColor.$values[k].Color, false));
                        this.piedataFlag = true;
                    }
                }
            }

            if (this.type === "googlemap") {
                $.each(this.EbObject.MarkerLabel.$values, function (i, obj) {
                    if (i === 0)
                        ml.push(obj.data);
                });

                if (ml.length > 0) {
                    $.each(this.data, function (i, value) {
                        markLabel.push(value[ml[0]].charAt(0));
                    });
                }
                Inform = [];
                $.each(this.EbObject.InfoWindow.$values, function (i, obj) {
                    info = [];
                    $.each(this.data, function (k, value) {
                        info.push(value[obj.data]);
                    });
                    Inform.push(new informaion(obj.name, info));
                }.bind(this));
            }

        }
    };

    this.getBarDataLabel = function (xdx, i, value) {
        for (k = 0; k < xdx.length; k++)
            this.XLabel.push(value[xdx[k]]);
    };

    this.drawGeneralGraph = function () {
        this.getBarData();
        if (this.type === "googlemap") {
            //this.getData4GoogleMap();
            TableId = this.tableId;
            $("#canvasDiv" + this.tableId).children("iframe").remove();
            $("#myChart" + this.tableId).remove();
            if ($("#map" + this.tableId).children().length === 0)
                $("#canvasDiv" + this.tableId).append("<div id='map" + this.tableId + "' style='height:inherit;width:100%;'></div>");
            Xlabel = this.XLabel;
            Ylabel = this.YLabel;
            showRoute = this.EbObject.ShowRoute;
            if (!this.isMyScriptLoaded("https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js")) {
                $("#layout_div").prepend(`
                <script src= "https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js" ></script>
                <script async defer
                    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAh12bqSKCYb6sJ9EVzNkEyXEDZ__UA-TE&callback=initMap">
                </script>`);
            }
            else {
                $("#map" + this.tableId).empty();
                initMap();
            }
            if (this.bot) {
                $("#map" + this.tableId).css("height", "inherit");
                $("#map" + this.tableId).css("margin-top", "10px");
            }
            return false;
        }
        else {
            this.gdata = {
                labels: this.XLabel,
                datasets: this.dataset,
            };
            //this.animateOPtions = (this.EbObject.ShowValue) ? new animateObj(0) : false;
            this.goptions = {
                scales: {
                    yAxes: [{
                        scaleLabel: {
                            display: (this.type !== "pie") ? true : false,
                            labelString: (this.EbObject.YaxisTitle !== "") ? this.EbObject.YaxisTitle : "YLabel",
                            fontColor: (this.EbObject.YaxisTitleColor !== null && this.EbObject.YaxisTitleColor !== "#ffffff") ? this.EbObject.YaxisTitleColor : "#000000"
                        },
                        stacked: false,
                        gridLines: {
                            display: (this.type !== "pie") ? true : false
                        },
                        ticks: {
                            fontSize: 10,
                            fontColor: (this.EbObject.YaxisLabelColor !== null && this.EbObject.YaxisTitleColor !== "#ffffff") ? this.EbObject.YaxisLabelColor : "#000000"
                        },
                        display: (this.type !== "pie") ? true : false
                    }],
                    xAxes: [{
                        scaleLabel: {
                            display: (this.type !== "pie") ? true : false,
                            labelString: (this.EbObject.XaxisTitle !== "") ? this.EbObject.XaxisTitle : "XLabel",
                            fontColor: (this.EbObject.XaxisTitleColor !== null && this.EbObject.YaxisTitleColor !== "#ffffff") ? this.EbObject.XaxisTitleColor : "#000000"
                        },
                        gridLines: {
                            display: (this.type !== "pie") ? true : false
                        },
                        ticks: {
                            fontSize: 10,
                            fontColor: (this.EbObject.XaxisLabelColor !== null && this.EbObject.YaxisTitleColor !== "#ffffff") ? this.EbObject.XaxisLabelColor : "#000000"
                        },
                        display: (this.type !== "pie") ? true : false
                    }]
                },
                zoom: {
                    // Boolean to enable zooming
                    enabled: !Option.zoomDisabled,

                    // Zooming directions. Remove the appropriate direction to disable 
                    // Eg. 'y' would only allow zooming in the y direction
                    mode: 'x',
                },
                pan: {
                    enabled: true,
                    mode: 'x',
                },
                legend: {
                    onClick: this.legendClick.bind(this),
                    //position: "left"
                },
                //legend:false,
                //legendTemplate: "<ul class=\"<%=name.toLowerCase()%>-legend\"><% for (var i=0; i<segments.length; i++){%><li><span style=\"background-color:<%=segments[i].fillColor%>\"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>",

                tooltips: {
                    enabled: this.EbObject.ShowTooltip,
                    callbacks: {
                        label: this.toolTipCallback
                    }
                },
                segmentShowStroke: this.EbObject.ShowValue && this.type === "pie",
                segmentStrokeWidth: 2,
                animation: {
                    animateRotate: true,
                    duration: 1,
                    //onProgress: (this.EbObject.ShowValue && this.type === "pie") ? this.animationOnProgress : null,
                    onComplete: (this.EbObject.ShowValue && this.type !== "pie") ? this.animationOnComplete : null
                },
            };
            if (this.EbObject.Xaxis.$values.length > 0 && this.EbObject.Xaxis.$values.length > 0)
                this.RemoveCanvasandCheckButton();
        }

    };

    this.RemoveCanvasandCheckButton = function () {
        if (this.type == null) {
            this.type = "bar";
            //$("#graphDropdown_tab" + this.tableId + " button:first-child").html("<i class='"+_icons["bar"]+"'></i>" + "&nbsp;<span class = 'caret'></span>")
        }
        else {
            this.type = this.type.toLowerCase();
            //$("#graphDropdown_tab" + this.tableId + " button:first-child").html("<i class='" + _icons["bar"] + "'></i>" + "&nbsp;<span class = 'caret'></span>")
        }

        if (this.type == "area" || this.type == "line") {
            if (this.gdata !== null) {
                $.each(this.gdata.datasets, this.GdataDSiterFn.bind(this));
                if (this.piedataFlag)
                    this.drawGeneralGraph();
                this.type = "line";
                if (this.gdata.datasets[0].fill === true)
                    $("#graphDropdown_tab" + this.tableId + " button:first-child").html(`<i class='${_icons["area"]}'></i>&nbsp;<span class = 'caret'></span>`);
                else
                    $("#graphDropdown_tab" + this.tableId + " button:first-child").html(`<i class='${_icons["line"]}'></i>&nbsp;<span class = 'caret'></span>`);
            }
            else
                this.drawGeneralGraph();
        }
        else if (this.type == "bar") {
            if (this.piedataFlag) {
                this.drawGeneralGraph();
            }
            $("#graphDropdown_tab" + this.tableId + " button:first-child").html(`<i class='${_icons["bar"]}'></i>&nbsp;<span class = 'caret'></span>`);
        }
        else if (this.type == "pie") {
            if (!this.piedataFlag)
                this.drawGeneralGraph();
            $("#graphDropdown_tab" + this.tableId + " button:first-child").html(`<i class='${_icons["pie"]}'></i>&nbsp;<span class = 'caret'></span>`);
            delete this.goptions.legend["onClick"];
        }
        else if (this.type == "horizontalbar") {
            if (this.piedataFlag) {
                this.drawGeneralGraph();
            }
            this.type = "horizontalBar"
            $("#graphDropdown_tab" + this.tableId + " button:first-child").html(`<i class='${_icons["horizontalBar"]}'></i>&nbsp;<span class = 'caret'></span>`);
        }


        $("#canvasDiv" + this.tableId).children("iframe").remove();
        $("#myChart" + this.tableId).remove();
        //$("#graphcontainer_tab" + this.tableId).append("<canvas id='myChart" + this.tableId + "'></canvas>");
        $("#canvasDiv" + this.tableId).append("<canvas id='myChart" + this.tableId + "' class='chart-div'></canvas>");

        if (this.EbObject.Xaxis.$values.length > 0 && this.EbObject.Yaxis.$values.length > 0)
            this.drawGraph();


    };

    this.GdataDSiterFn = function (j, obj) {
        var cls = $("#graphDropdown_tab" + this.tableId + " button:eq(0) i").attr("class");

        if (cls !== undefined && cls.indexOf("area") !== -1) {
            this.gdata.datasets[j].fill = true;
            this.type = "area";
        }
        else {
            this.gdata.datasets[j].fill = false;
            this.type = "line";
        }
    }

    this.drawGraph = function () {
        this.EbObject.Type = this.type;
        var canvas = document.getElementById("myChart" + this.tableId);

        this.chartApi = new Chart(canvas, {
            type: this.EbObject.Type.trim(),
            data: this.gdata,
            options: this.goptions,
        });
    };

    this.ResetZoom = function () {
        this.chartApi.resetZoom();
    };

    this.setGraphType = function (e) {
        var current = this;
        this.type = $(e.target).parent().parent().next().text().toLowerCase();
        $("#graphDropdown_tab" + this.tableId + " button:first-child").html(`<i class='${_icons[this.type]}'></i>&nbsp;<span class = 'caret'></span>`);
        if (this.type.trim() !== "googlemap") {
            if (this.EbObject.$type.indexOf("EbGoogleMap") !== -1) {
                $("#canvasDiv" + this.tableId).children("#map").remove();
                var refid = this.EbObject.DataSourceRefId;
                var columns = JSON.parse(JSON.stringify(this.EbObject.Columns));
                var pipe = this.EbObject.Pippedfrom;
                this.EbObject = new EbObjects["EbChartVisualization"](this.EbObject.EbSid);
                this.EbObject.DataSourceRefId = refid;
                this.EbObject.DSColumns = columns;
                this.EbObject.Columns = columns;
                this.EbObject.Pippedfrom = pipe;

                this.propGrid.setObject(this.EbObject, AllMetas["EbChartVisualization"]);
                this.EbObject = this.EbObject;
                this.gdata = null;
                this.updateDragula();
            }
            if (this.EbObject.Xaxis.$values.length > 0 && this.EbObject.Xaxis.$values.length > 0)
                this.RemoveCanvasandCheckButton();
            else
                return false;
        }
        else {
            var refid = this.EbObject.DataSourceRefId;
            var columns = JSON.parse(JSON.stringify(this.EbObject.Columns));
            $("#canvasDiv" + this.tableId).children("iframe").remove();
            $("#myChart" + this.tableId).remove();
            var pipe = this.EbObject.Pippedfrom;
            this.EbObject = new EbObjects["EbGoogleMap"](this.EbObject.EbSid);
            this.EbObject.DataSourceRefId = refid;
            this.EbObject.DSColumns = columns;
            this.EbObject.Columns = columns;
            this.EbObject.Pippedfrom = pipe;
            this.propGrid.setObject(this.EbObject, AllMetas["EbGoogleMap"]);
            this.EbObject = this.EbObject;

            this.updateDragula();
        }
        e.preventDefault();
    };

    this.colDrag = function (e) {
        //e.dataTransfer.setData("text", e.target.id);
        //this.sourceElement = e.target.parentNode.tagName;
        //this.sourceElementId = e.target.parentElement.id;
    };

    this.colDrop = function (el, target, source, sibling) {
        if ($(target).attr("id") === "X_col_name" + this.tableId || $(target).attr("id") === "Y_col_name" + this.tableId) {
            $(el).addClass("columnDrag");
            $(el).children("span").remove();
            var temp;
            $(el).css("display", "inline-block");
            var name = $(el).text();
            $(el).append("<button class='close' type='button'>x</button>");
            if ($(target).attr("id") == "X_col_name" + this.tableId) {
                //this.EbObject.Xaxis.$values.push(new axis($(el).attr("data-id"), name));
                temp = $.grep(this.EbObject.Columns.$values, function (obj) { return obj.name === name });
                this.EbObject.Xaxis.$values.push(temp[0]);
                //this.Xindx.push(temp[0].data);
            }
            if ($(target).attr("id") == "Y_col_name" + this.tableId) {
                //this.EbObject.Yaxis.$values.push(new axis($(el).attr("data-id"), name));
                temp = $.grep(this.EbObject.Columns.$values, function (obj) { return obj.name === name });
                this.EbObject.Yaxis.$values.push(temp[0]);
                //this.Yindx.push(temp[0].data);
                if (this.type !== "googlemap")
                    this.EbObject.LegendColor.$values.push(new ChartColor(name, randomColor()));
            }

            if ($("#X_col_name" + this.tableId + " li").length == 1 && $("#Y_col_name" + this.tableId + " li").length >= 1) {
                this.drawGeneralGraph();
            }
            else {
                $("#myChart" + this.tableId).remove();
                $("#canvasDiv" + this.tableId).append("<canvas id='myChart" + this.tableId + "' class='chart-div'></canvas>");
            }
            console.log(this.EbObject.Xaxis); console.log(this.EbObject.Yaxis);
            $("#X_col_name" + this.tableId + " button[class=close]").off("click").on("click", this.RemoveAndAddToColumns.bind(this));
            $("#Y_col_name" + this.tableId + " button[class=close]").off("click").on("click", this.RemoveAndAddToColumns.bind(this));
        }

    };

    this.colAllowDrop = function (e) {
        e.preventDefault();
    };

    this.NocolAllowDrop = function (e) {
        e.stopPropagation();
    };

    this.collapseGraph = function () {
        $("#columnsDisplay" + this.tableId).toggle();
        $("#xy" + this.tableId).toggle();
        if ($("#columnsDisplay" + this.tableId).css("display") === "none") {
            $("#canvasParentDiv" + this.tableId).removeClass("col-md-10").addClass("col-md-12");
            $("#canvasDiv" + this.tableId).css("height", "100%");
            //$("#myChart" + this.tableId).css("height", "inherit");
        }
        else {
            $("#canvasParentDiv" + this.tableId).removeClass("col-md-12").addClass("col-md-10");
            $("#canvasDiv" + this.tableId).css("height", "calc(100% - 67px)");
        }
    };

    this.toggleFilterdialog = function () {
        $(".filterCont").toggle();
    };

    this.togglePPGrid = function () {
        $("#Relateddiv").hide();
        $(".ppcont").toggle();
    };

    this.RemoveAndAddToColumns = function (e) {
        var str = $(e.target).parent().text();
        var index = parseInt($(e.target).parent().attr("data-id"));
        if ($(e.target).parent().parent().attr("id") === "X_col_name" + this.tableId) {
            if (gettypefromNumber($(e.target).parent().attr("data-type")) === "String")
                $("#diamension" + this.tableId).append(`<li class='colTiles' style='display: list-item;' id='li${str.substr(0, str.length - 1)}' data-id='${$(e.target).parent().attr("data-id")}' data-type='${$(e.target).parent().attr("data-type")}'><span><i class='fa fa-font'></i></span>${str.substr(0, str.length - 1)}</li>`);
            else if (gettypefromNumber($(e.target).parent().attr("data-type")) === "DateTime")
                $("#diamension" + this.tableId).append(`<li class='colTiles' style='display: list-item;' id='li${str.substr(0, str.length - 1)}' data-id='${$(e.target).parent().attr("data-id")}' data-type='${$(e.target).parent().attr("data-type")}'><span><i class='fa fa-calendar'></i></span>${str.substr(0, str.length - 1)}</li>`);
            //index = this.Xindx.indexOf($(e.target).parent().attr("data-id"));
            //this.Xindx.pop(index);
        }
        else if ($(e.target).parent().parent().attr("id") === "Y_col_name" + this.tableId) {
            $("#measure" + this.tableId).append(`<li class='colTiles' style='display: list-item;' id='li${str.substr(0, str.length - 1)}' data-id='${$(e.target).parent().attr("data-id")}' data-type='${$(e.target).parent().attr("data-type")}'><span><i class='fa fa-sort-numeric-asc'></i></span>${str.substr(0, str.length - 1)}</li>`);
            //index = this.Yindx.indexOf($(e.target).parent().attr("data-id"));
            //this.Yindx.pop(index);
        }
        //$("#columns4Drag" + this.tableId + " .list-group").append("<li class='alert alert-success columnDrag' id='" + $(e.target).parent().attr("id") + "' draggable='true' data-id='" + $(e.target).parent().attr("data-id") + "'>" + str.substring(0, str.length - 1).trim() + "</li>");
        $(e.target).parent().remove();
        //$("#columns4Drag" + this.tableId + " .columnDrag").off("dragstart").on("dragstart", this.colDrag.bind(this));
        this.EbObject.Xaxis.$values = $.grep(this.EbObject.Xaxis.$values, function (vobj) { return vobj.name !== str.substring(0, str.length - 1).trim() });
        this.EbObject.Yaxis.$values = $.grep(this.EbObject.Yaxis.$values, function (vobj) { return vobj.name !== str.substring(0, str.length - 1).trim() });
        if (this.type !== "googlemap")
            this.EbObject.LegendColor.$values = $.grep(this.EbObject.LegendColor.$values, function (vobj) { return vobj.name !== str.substring(0, str.length - 1).trim() });
        //this.EbObject.Xaxis = this.
        //this.Xindx = $.grep(this.Xindx, function (obj) { return obj.name !== str.substring(0, str.length - 1).trim() });
        //this.Yindx = $.grep(this.Yindx, function (obj) { return obj.name !== str.substring(0, str.length - 1).trim() });

        if ($("#X_col_name" + this.tableId + " li").length == 1 && $("#Y_col_name" + this.tableId + " li").length >= 1) {
            this.drawGeneralGraph();
        }
        else {
            $("#myChart" + this.tableId).remove();
            $("#canvasDiv" + this.tableId).append("<canvas id='myChart" + this.tableId + "' width='auto' height='auto' class='chart-div'></canvas>");
        }
    };

    this.searchDragNDropColumn = function (e) {
        var search_word = $("#searchColumn" + this.tableId).val();
        if (search_word !== "") {
            $("#columns4Drag" + this.tableId + " ul li").hide();
            $("#columns4Drag" + this.tableId + " ul li").each(function () {
                var current_keyword = $(this).text();
                if (current_keyword.indexOf(search_word) >= 0) {
                    $(this).show();
                };
            });
        }
        else {
            $("#columns4Drag" + this.tableId + " ul li").show();
        };

    };

    this.legendClick = function (event, legendItem) {
        if (this.chartApi !== null && this.type !== "pie") {
            $("#fontSel").click();
        }
        $("#fontSel").off("change").on("change", this.reloadChart.bind(this, legendItem));
    }

    this.reloadChart = function (legendItem) {
        $.each(this.EbObject.LegendColor.$values, function (i, obj) {
            if (legendItem.text === obj.name)
                this.EbObject.LegendColor.$values[i].color = $("#fontSel").val();
        }.bind(this));
        if (this.type !== "pie") {
            if (this.gdata.datasets[0].fill === true)
                this.type = "area";
            $.each(this.gdata.datasets, this.reloadChart_inner.bind(this, legendItem));
        }
        else
            $.each(this.gdata.datasets, this.reloadChart4pie.bind(this, legendItem));

        if (this.EbObject.Xaxis.$values.length > 0 && this.EbObject.Xaxis.$values.length > 0)
            this.RemoveCanvasandCheckButton();
    };

    this.reloadChart_inner = function (legendItem, i, obj) {
        if (i === legendItem.datasetIndex) {
            this.gdata.datasets[i].backgroundColor = $("#fontSel").val();
            this.gdata.datasets[i].borderColor = $("#fontSel").val();
        }
    };

    this.reloadChart4pie = function (legendItem, i, obj) {
        this.gdata.datasets[i].backgroundColor[legendItem.index] = $("#fontSel").val();
        this.gdata.datasets[i].borderColor[legendItem.index] = $("#fontSel").val();
    }

    this.animationOnComplete = function () {
        var chartInstance = this.chart,
            ctx = chartInstance.ctx;

        ctx.font = Chart.helpers.fontString(Chart.defaults.global.defaultFontSize, Chart.defaults.global.defaultFontStyle, Chart.defaults.global.defaultFontFamily);
        ctx.textAlign = 'center';
        ctx.textBaseline = 'bottom';

        this.data.datasets.forEach(function (dataset, i) {
            var meta = chartInstance.controller.getDatasetMeta(i);
            meta.data.forEach(function (bar, index) {
                var data = dataset.data[index];
                ctx.fillText(data, bar._model.x, bar._model.y - 5);
            });
        });
    };

    this.animationOnProgress = function (animation) {
        var canvas = document.getElementById("myChart" + this.tableId);
        var ctx = canvas.getContext("2d");
        var midX = canvas.width / 2;
        var midY = canvas.height / 2

        var radius = this.chartApi.outerRadius;
        for (var i = 0; i < this.chartApi.segments.length; i++) {
            ctx.fillStyle = "white";
            var textSize = canvas.width / 10;
            ctx.font = textSize + "px Verdana";
            // Get needed variables
            var value = this.chartApi.segments[i].value;
            var startAngle = this.chartApi.segments[i].startAngle;
            var endAngle = this.chartApi.segments[i].endAngle;
            var middleAngle = startAngle + ((endAngle - startAngle) / 2);

            // Compute text location
            var posX = (radius / 2) * Math.cos(middleAngle) + midX;
            var posY = (radius / 2) * Math.sin(middleAngle) + midY;

            // Text offside by middle
            var w_offset = ctx.measureText(value).width / 2;
            var h_offset = textSize / 4;

            ctx.fillText(value, posX - w_offset, posY + h_offset);
        }
    }.bind(this);

    this.updateDragula = function (status) {
        if (this.EbObject.$type.indexOf("EbChartVisualization") !== -1) {
            if (this.drake)
                this.drake.destroy();
            this.drake = new dragula([document.getElementById("diamension" + this.tableId), document.getElementById("measure" + this.tableId), document.getElementById("X_col_name" + this.tableId), document.getElementById("Y_col_name" + this.tableId)], {
                accepts: this.acceptDrop.bind(this)
            });
            this.drake.on("drop", this.colDrop.bind(this));
            if (this.type === "")
                this.type = "bar";
            this.propGrid.setObject(this.EbObject, AllMetas["EbChartVisualization"]);
        }
        else {
            this.type = "googlemap";
            if (this.drake)
                this.drake.destroy();
            this.drake = new dragula([document.getElementById("diamension" + this.tableId), document.getElementById("measure" + this.tableId), document.getElementById("X_col_name" + this.tableId), document.getElementById("Y_col_name" + this.tableId)], {
                accepts: this.acceptDrop1.bind(this)
            });
            this.drake.on("drop", this.colDrop.bind(this));
            this.propGrid.setObject(this.EbObject, AllMetas["EbGoogleMap"]);
        }

        if (this.type !== "googlemap") {
            $("#X_col_name" + this.tableId).siblings("span").text("X-Axis");
            $("#Y_col_name" + this.tableId).siblings("span").text("Y-Axis");
            $("#graphDropdown_tab" + this.tableId).show();
        }
        else {
            $("#X_col_name" + this.tableId).siblings("span").text("Longitude");
            $("#Y_col_name" + this.tableId).siblings("span").text("Lattitude");
            $("#graphDropdown_tab" + this.tableId).hide();
        }

        if (status !== undefined) {
            if (this.EbObject.Xaxis.$values.length > 0 && this.EbObject.Xaxis.$values.length > 0) {
                if (this.type !== "googlemap") {
                    $.each(this.EbObject.Yaxis.$values, function (i, obj) {
                        this.EbObject.LegendColor.$values.push(new ChartColor(obj.name, randomColor()));
                    }.bind(this));
                }
                this.drawGeneralGraph();
            }

        }
    };

    this.acceptDrop1 = function (el, target, source, sibling) {
        if ($(source).attr("id") === "X_col_name" + this.tableId && $(target).attr("id") === "Y_col_name" + this.tableId) {
            return false;
        }
        else if ($(source).attr("id") === "Y_col_name" + this.tableId && $(target).attr("id") === "X_col_name" + this.tableId) {
            return false;
        }
        else if ($(target).children().length == 1) {
            return false;
        }
        return true;
    };

    this.isMyScriptLoaded = function (url) {
        var scripts = document.getElementsByTagName('script');
        for (var i = scripts.length; i--;) {
            if (scripts[i].src == url) return true;
        }
        return false;
    };

    this.rearrangeObjects = function () {
        this.EbObject.DataSourceRefId = this.prevObj.DataSourceRefId;
        this.EbObject.DSColumns = this.prevObj.DSColumns;
        this.EbObject.Columns = this.prevObj.Columns;
        this.EbObject.Xaxis = this.prevObj.Xaxis;
        this.EbObject.Yaxis = this.prevObj.Yaxis;
        this.EbObject.Pippedfrom = this.prevObj.Pippedfrom;
    }

    this.toolTipCallback = function (item, data) {
        if (this.type === "pie")
            return data.datasets[item.datasetIndex].label + ": " + data.labels[item.index] + ": " + data.datasets[item.datasetIndex].data[item.index];
    }.bind(this);

    this.CreateRelationString = function () { };

    this.start();
};

//DataLabel Style Function

//const { functions } = require("stylus");

function EbDataLabelFn(Label, tileId) {
    if (Label.LabelStyle < 3) {
        if (Label.Object_Selector != "" && tileId != null)
            $(`[data-id="${tileId}"] .label-cont`).attr("ref-id", Label.Object_Selector);
        if (Label.ChangeTextPositon) {
            if (Label.StaticLabelPosition.Left !== 0 && Label.StaticLabelPosition.Top !== 0) {
                $(`#${Label.EbSid}_static`).css({ "left": `${Label.StaticLabelPosition.Left}%`, "top": `${Label.StaticLabelPosition.Top}%`, "position": "absolute" });
            }

            if (Label.DescriptionPosition.Left !== 0 && Label.DescriptionPosition.Top !== 0) {
                $(`#${Label.EbSid}_description`).css({ "left": `${Label.DescriptionPosition.Left}%`, "top": `${Label.DescriptionPosition.Top}%`, "position": "absolute" });
            }

            if (Label.DynamicLabelPositon.Left !== 0 && Label.DynamicLabelPositon.Top !== 0) {
                $(`#${Label.EbSid}_dynamic`).css({ "left": `${Label.DynamicLabelPositon.Left}%`, "top": `${Label.DynamicLabelPositon.Top}%`, "position": "absolute" });
            }
        }
        else {
            $(`#${Label.EbSid}_static`).css("position", "").css("left", "").css("top", "");
            $(`#${Label.EbSid}_description`).css("position", "").css("left", "").css("top", "");
            $(`#${Label.EbSid}_dynamic`).css("position", "").css("left", "").css("top", "");
        }
        if (Label.TextPosition == 0) { this.TextPosition = "left" }
        if (Label.TextPosition == 1) { this.TextPosition = "center" }
        if (Label.TextPosition == 2) { this.TextPosition = "right" }
        $(`#${Label.EbSid}_Data_pane .lbl`).css("text-align", this.TextPosition);
        //Static label style
        $(`#${Label.EbSid}_static`).empty().append(Label.StaticLabel);
        if (Label.StaticLabelFont !== null) {
            GetFontCss(Label.StaticLabelFont, $(`#${Label.EbSid}_static`));
        }

        //description style
        $(`#${Label.EbSid}_description`).empty().append(Label.Description);
        if (Label.DescriptionFont !== null) {
            GetFontCss(Label.DescriptionFont, $(`#${Label.EbSid}_description`));
        }

        //Dynamic label style
        if (Label.DynamicLabelFont !== null) {
            GetFontCss(Label.DynamicLabelFont, $(`#${Label.EbSid}_dynamic`));
        }
        if (Label.LabelStyle == 0) {
            $(`#${Label.EbSid}_Data_pane`).css("border-radius", Label.LabelBorderRadius);
            $(`#${Label.EbSid}_Data_pane`).css("border-color", Label.LabelBorderColor);
            $(`#${Label.EbSid}_footer`).css("border-color", Label.LabelBorderColor);
        }
        else if (Label.LabelStyle == 1) {
            $(`#${Label.EbSid}_Data_pane`).css("border-radius", `${Label.LabelBorderRadius}px`);
            $(`#${Label.EbSid}_icon`).css("border-radius", `${Label.LabelBorderRadius}px 0px 0px ${Label.LabelBorderRadius}px`);
            $(`#${Label.EbSid}_Data_pane`).css("border-color", Label.LabelBorderColor);
            $(`#${Label.EbSid}_footer`).css("border-color", Label.LabelBorderColor);
        }
        else if (Label.LabelStyle == 2) {
            $(`#${Label.EbSid}_Data_pane`).css("border-radius", `${Label.LabelBorderRadius}px`);
            $(`#${Label.EbSid}_icon`).css("border-radius", `0px ${Label.LabelBorderRadius}px  ${Label.LabelBorderRadius}px  0px`);
            $(`#${Label.EbSid}_Data_pane`).css("border-color", Label.LabelBorderColor);
            $(`#${Label.EbSid}_footer`).css("border-color", Label.LabelBorderColor);
        }
        else if (Label.LabelStyle == 3) {
            //$(`#${Label.EbSid}_Data_pane`).css("border-radius", `${Label.LabelBorderRadius}px`);
            //$(`#${Label.EbSid}_icon`).css("border-radius", `0px ${Label.LabelBorderRadius}px  ${Label.LabelBorderRadius}px  0px`);
            $(`#${Label.EbSid}_Data_pane`).css("border-color", Label.LabelBorderColor);
            $(`#${Label.EbSid}_footer`).css("border-color", Label.LabelBorderColor);
        }
        if (!Label.IsGradient) {
            $(`#${Label.EbSid}_Data_pane`).css("background", Label.LabelBackColor);
        }
        if (Label.IsGradient) {
            $(`#${Label.EbSid}_Data_pane`).css("background", "");
            let direction = GradientDirection(Label.Direction);
            let bg = "linear-gradient(" + direction + "," + Label.GradientColor1 + "," + Label.GradientColor2 + ")";
            $(`#${Label.EbSid}_Data_pane`).css('background-image', bg);
        }
        $(`#${Label.EbSid}_Data_pane`).css("border", `solid 1px ${Label.LabelBorderColor}`);

        //Label Icon
        if (Label.RenderIcon) {
            if (Label.LabelStyle == 0) {
                $(`#${Label.EbSid}_Data_pane`).css("padding-left", "14vh");
                $(`#${Label.EbSid}`).css("padding-top", "2vh");
            }
            $(`#${Label.EbSid}_icon`).css('display', 'block');
        }
        else {
            $(`#${Label.EbSid}_Data_pane`).css("padding-left", "2vh")
            $(`#${Label.EbSid}`).css("padding-top", "0vh");
            $(`#${Label.EbSid}_icon`).css('display', 'none');
        }

        if (Label.HideFooter) { $(`#${Label.EbSid}_footer`).css("display", "none"); }
        else { $(`#${Label.EbSid}_footer`).css("display", "block"); }

        let Icondirection = GradientDirection(Label.IconDirection);
        let bg = "linear-gradient(" + Icondirection + "," + Label.IconGradientColor1 + "," + Label.IconGradientColor2 + ")";
        if (Label.LabelStyle != 4)
            $(`#${Label.EbSid}_icon`).css('background-image', bg);
        $(`#${Label.EbSid}_icon i`).css("color", Label.IconColor);
        if (Label.IconText == "" || Label.IconText == null || Label.IconText == undefined) {
            $(`#${Label.EbSid}_icon i`).empty().removeAttr("class").addClass(`fa ${Label.Icon}`);
            $(`#${Label.EbSid}_icon`).css({ "display": "flex", "align-items": "center", "justify-content": "center" });
        }
        else {
            $(`#${Label.EbSid}_icon i`).empty().append(Label.IconText).removeAttr("class").addClass(`lbl-icon-text`);
            $(`#${Label.EbSid}_icon`).css({ "display": "flex", "align-items": "center", "justify-content": "center" });
        }

        $(`#${Label.EbSid}_footer label`).css("color", Label.FooterTextColor);
        $(`#${Label.EbSid}_footer i`).removeAttr("class").addClass(`fa ${Label.FooterIcon}`);
        $(`#${Label.EbSid}_footer i`).css("color", Label.FooterIconColor);
        $(`#${Label.EbSid}_footer label`).text(Label.FooterText);

        //shadow Editor 
        if (Label.Shadow) {
            $(`#${Label.EbSid}_Data_pane`).css("box-shadow", Label.Shadow);
        }
    }
    else {

        if (Label.Object_Selector != "" && tileId != null)
            $(`[data-id="${tileId}"] .label-cont`).attr("ref-id", Label.Object_Selector);
        if (Label.ChangeTextPositon) {
            if (Label.StaticLabelPosition.Left !== 0 && Label.StaticLabelPosition.Top !== 0) {
                $(`#${Label.EbSid}_static`).css({ "left": `${Label.StaticLabelPosition.Left}%`, "top": `${Label.StaticLabelPosition.Top}%`, "position": "absolute" });
            }

            if (Label.DescriptionPosition.Left !== 0 && Label.DescriptionPosition.Top !== 0) {
                $(`#${Label.EbSid}_description`).css({ "left": `${Label.DescriptionPosition.Left}%`, "top": `${Label.DescriptionPosition.Top}%`, "position": "absolute" });
            }

            if (Label.DynamicLabelPositon.Left !== 0 && Label.DynamicLabelPositon.Top !== 0) {
                $(`#${Label.EbSid}_dynamic`).css({ "left": `${Label.DynamicLabelPositon.Left}%`, "top": `${Label.DynamicLabelPositon.Top}%`, "position": "absolute" });
            }
        }
        else {
            $(`#${Label.EbSid}_static`).css("position", "").css("left", "").css("top", "");
            $(`#${Label.EbSid}_description`).css("position", "").css("left", "").css("top", "");
            $(`#${Label.EbSid}_dynamic`).css("position", "").css("left", "").css("top", "");
        }
        if (Label.TextPosition == 0) { this.TextPosition = "left" }
        if (Label.TextPosition == 1) { this.TextPosition = "center" }
        if (Label.TextPosition == 2) { this.TextPosition = "right" }
        $(`#${Label.EbSid}_Data_pane .lbl`).css("text-align", this.TextPosition);
        //Static label style
        $(`#${Label.EbSid}_static`).empty().append(Label.StaticLabel);
        if (Label.StaticLabelFont !== null) {
            GetFontCss(Label.StaticLabelFont, $(`#${Label.EbSid}_static`));
        }

        //description style
        $(`#${Label.EbSid}_description`).empty().append(Label.Description);
        if (Label.DescriptionFont !== null) {
            GetFontCss(Label.DescriptionFont, $(`#${Label.EbSid}_description`));
        }

        //Dynamic label style
        if (Label.DynamicLabelFont !== null) {
            GetFontCss(Label.DynamicLabelFont, $(`#${Label.EbSid}_dynamic`));
        }

        if (Label.LabelStyle == 3) {
            $(`#${Label.EbSid}`).css("border", `solid 1px ${Label.LabelBorderColor}`);
            $(`#${Label.EbSid}_footer`).css("border-color", Label.LabelBorderColor);
        }
        if (!Label.IsGradient) {
            $(`#${Label.EbSid}_Data_pane`).css("background", Label.LabelBackColor);
        }
        if (Label.IsGradient) {
            $(`#${Label.EbSid}_Data_pane`).css("background", "");
            let direction = GradientDirection(Label.Direction);
            let bg = "linear-gradient(" + direction + "," + Label.GradientColor1 + "," + Label.GradientColor2 + ")";
            $(`#${Label.EbSid}_Data_pane`).css('background-image', bg);
        }
        //$(`#${Label.EbSid}_Data_pane`).css("border", `solid 1px ${Label.LabelBorderColor}`);

        //render icon  or icon text
        if (Label.IconText == "") {
            $(`#${Label.EbSid}_icon i`).removeClass().addClass(`fa ${Label.Icon}`);
            let _fontsize = $(`#${Label.EbSid}_icon`).height() < $(`#${Label.EbSid}_icon`).width() ? $(`#${Label.EbSid}_icon`).height() : $(`#${Label.EbSid}_icon`).width();
            $(`#${Label.EbSid}_icon`).css("font-size", _fontsize - 40 + "px");
        }
        else {
            $(`#${Label.EbSid}_icon i`).removeClass().text(Label.IconText);
        }
        //Label Icon
        if (Label.RenderIcon) {
            $(`#${Label.EbSid} .body-pane`).removeClass("col-lg-12 col-sm-12 col-md-12").addClass("col-lg-8 col-sm-8 col-md-8");
            $(`#${Label.EbSid} .icon-pane`).show();
        }
        else {
            $(`#${Label.EbSid} .body-pane`).removeClass("col-lg-8 col-sm-8 col-md-8").addClass("col-lg-12 col-sm-12 col-md-12");
            //$(`#${Label.EbSid}_Data_pane`).css("padding-left", "2vh")
            //$(`#${Label.EbSid}`).css("padding-top", "0vh");
            //$(`#${Label.EbSid}_icon`).css('display', 'none');
            $(`#${Label.EbSid} .icon-pane`).hide();
        }

        if (Label.HideFooter) { $(`#${Label.EbSid}_footer`).css("display", "none"); }
        else { $(`#${Label.EbSid}_footer`).css("display", "block"); }

        let Icondirection = GradientDirection(Label.IconDirection);
        let bg = "linear-gradient(" + Icondirection + "," + Label.IconGradientColor1 + "," + Label.IconGradientColor2 + ")";
        $(`#${Label.EbSid}_icon`).css('background-image', bg);
        $(`#${Label.EbSid}_icon i`).css("color", Label.IconColor);

        $(`#${Label.EbSid}_footer label`).css("color", Label.FooterTextColor);
        $(`#${Label.EbSid}_footer i`).removeAttr("class").addClass(`fa ${Label.FooterIcon}`);
        $(`#${Label.EbSid}_footer i`).css("color", Label.FooterIconColor);
        $(`#${Label.EbSid}_footer label`).text(Label.FooterText);

        //shadow Editor 
        if (Label.Shadow) {
            $(`#${Label.EbSid}`).css("box-shadow", Label.Shadow);
        }

        /*$(".icon-pane").off*/
        $(`#${Label.EbSid}`).css("border-radius", `${Label.LabelBorderRadius}px`);
        if (Label.LabelStyle == 3)
            $(`#${Label.EbSid}_icon`).css("border-radius", `${Label.LabelBorderRadius}px 0px 0px ${Label.LabelBorderRadius}px`);
        else if (Label.LabelStyle == 4)
            $(`#${Label.EbSid}_icon`).css("border-radius", `0px ${Label.LabelBorderRadius}px ${Label.LabelBorderRadius}px 0px`);

    }
}

//Tile style function

function Eb_Tiles_StyleFn(Tile, TileId, TabNum) {
    if (Tile.LabelColl.$values == 0) {
        //Tile Back Color
        if (Tile.IsGradient) {
            let direction = GradientDirection(Tile.Direction);
            let bg = "linear-gradient(" + direction + "," + Tile.GradientColor1 + "," + Tile.GradientColor2 + ")";
            $(`#${TileId}`).css("background-image", bg);
        }
        else {
            $(`#${TileId}`).css("background", Tile.TileBackColor);
        }

        //Tile border
        $(`#${TileId}`).css("border-radius", Tile.BorderRadius == 0 ? 4 + "px" : Tile.BorderRadius + "px");
        $(`#${TileId}`).css("border", `solid 1px ${Tile.BorderColor}`);

        //Tile Label
        $(`#${TabNum}_Label_${TileId}`).empty().append(Tile.Label);
        $(`#${TabNum}_Label_${TileId}`).css("left", Tile.Left + "%").css("top", Tile.Top + "%").css("position", "absolute");
        if (Tile.LabelFont !== null) {
            GetFontCss(Tile.LabelFont, $(`#${TabNum}_Label_${TileId}`));
        }
        //Tile Text Font 
        $(`#${TileId} tr`).css("color", `${Tile.FontColor}`);
        $(`#${TileId} th`).css({ "color": `${Tile.FontColor} !important;` });
        $(`#${TileId} td`).css({ "color": `${Tile.FontColor} !important;` });
        $(`#${TileId} a`).css("color", `${Tile.LinkColor} !important;`).css("font-size: 14px;");

        $(`#${TileId} td`).css("border-bottom", "1px solid #2b2b2b;!important")
    }
}

function Eb_Dashboard_Bg(EbObject) {
    if (EbObject.IsGradient) {
        let direction = GradientDirection(EbObject.Direction);
        let bg = "linear-gradient(" + direction + "," + EbObject.GradientColor1 + "," + EbObject.GradientColor2 + ")";
        $("#layout_div").css("background-color", "").css("background-image", bg);
        $(".component_cont .nav").css("background-color", "").css("background-image", bg);
    }
    else {
        $("#layout_div").css("background", EbObject.BackgroundColor);
        $(".component_cont .nav").css("background-image", "").css("background", EbObject.BackgroundColor);
        if (EbObject.BackgroundImage) {

            function responsiveDbBgImg(maxWidth) {
                if (maxWidth.matches) {
                    $("#layout_div").css("background-image", `unset`);
                }
                else {
                    $("#layout_div").css("background-image", `url("/images/${EbObject.BackgroundImage}.jpg")`);
                }
            }

            $("#layout_div")
                .css("background-image", `url("/images/${EbObject.BackgroundImage}.jpg")`)
                .css("background-size", "cover")
                .css("background-repeat", "no-repeat")
                .css("background-position-x", "left")
                .css("background-position-y", "calc(0% + 38px)");

            var maxWidth = window.matchMedia("(max-width: 768px)");

            responsiveDbBgImg(maxWidth);
            maxWidth.addListener(responsiveDbBgImg);
        }
        else
            $("#layout_div").css("background-image", "");
    }
}

function GradientDirection(val) {
    gradient = [];
    gradient[0] = "to right";
    gradient[1] = "to left";
    gradient[2] = "to bottom";
    gradient[3] = "to bottom right";
    gradient[4] = "to bottom left";
    gradient[5] = "to top right";
    gradient[6] = "to top left";

    return gradient[val];
}

$(document).ready(function () {
    $('[data-toggle="tooltip"]').tooltip();
});


function LinkStyle(Obj, tile, TabNum, filtervalues) {
    $(`[eb-id=${tile}]`).addClass("eb-links")
    this.link = Obj.Object_Selector ? GetUrl4Link(Obj.Object_Selector, filtervalues) : "#";
    $(`#${Obj.EbSid}_link`).text(Obj.LinkName);
    if (Obj.Object_Selector) {
        $(`#${Obj.EbSid}_link`).attr("href", this.link);
        $(`#${Obj.EbSid}_link`).attr("target", Obj.LinkName);
    }
    if (Obj.HoverText) {
        $(`#${Obj.EbSid}_link`).attr("data-toggle", `Link-hover_${Obj.EbSid}`);
        $(`#${Obj.EbSid}_link`).attr("title", Obj.HoverText);
        $(`#${Obj.EbSid}_link`).attr("data-placement", "bottom");
        $(`[data-toggle="Link-hover_${Obj.EbSid}"]`).tooltip();
    }
    if (Obj.BackgroundColor) {
        $(`#${Obj.EbSid}`).css("background-image", Obj.BackgroundColor);
    }
    if (Obj.BackgroundColor) {
        $(`#${Obj.EbSid}_icon`).css("background-image", Obj.IconBackgroundColor);
    }
    if (Obj.FontStyle) {
        GetFontCss(Obj.FontStyle, $(`#${Obj.EbSid}_link`));
    }
    $(`#${Obj.EbSid} i`).removeAttr("class").addClass(`fa ${Obj.Icon}`);
}


function GetUrl4Link(refid, filtervalues) {
    this.filterValues = filtervalues;
    var objtype = parseInt(refid.split("-")[2]);
    let objTypeName = GetEnumType(objtype);
    let objid = parseInt(refid.split("-")[3]);
    this.login = ebcontext.user.wc;
    var _url = `../Eb_Object/Index?objid=${objid}&objtype=${objtype}`;
    if (this.login === "uc") {
        if (objTypeName === "TableVisualization" || objTypeName === "ChartVisualization" || objTypeName === "GoogleMap") {
            _url = "../DV/dv?refid=" + refid + "&filterValues=" + btoa(unescape(encodeURIComponent(JSON.stringify(this.filterValues))));
        }
        else if (objTypeName === "Report") {
            _url = "../ReportRender/Index?refid=" + refid;
        }
        else if (objTypeName === "WebForm") {
            let _l = (ebcontext.languages != undefined) ? ebcontext.languages.getCurrentLanguageCode() : 'en';
            _url = "../WebForm/Index?_r=" + refid + "&_p" + btoa(unescape(encodeURIComponent(JSON.stringify(this.filterValues)))) + "&_lg=" + _l;
        }
        else if (objTypeName === "DashBoard") {
            _url = "../DashBoard/DashBoardView?refid=" + refid + "&filterValues=" + btoa(unescape(encodeURIComponent(JSON.stringify(this.filterValues))));
        }
        else if (objTypeName === "CalendarView") {
            _url = "../Calendar/CalendarView?refid=" + refid;
        }
    }

    return _url;
};

function GetEnumType(id) {
    this.obj = {};
    this.obj[0] = "WebForm";
    this.obj[1] = "DisplayBlock";
    this.obj[2] = "DataReader";
    this.obj[3] = "Report";
    this.obj[4] = "DataWriter";
    this.obj[5] = "SqlFunctions";
    this.obj[11] = "DVBuilder";
    this.obj[12] = "FilterDialog";
    this.obj[13] = "MobilePage";
    this.obj[14] = "UserControl";
    this.obj[15] = "EmailBuilder";
    this.obj[16] = "TableVisualization";
    this.obj[17] = "ChartVisualization";
    this.obj[18] = "BotForm";
    this.obj[19] = "SmsBuilder";
    this.obj[20] = "ApiBuilder"
    this.obj[1] = "MapView";
    this.obj[22] = "DashBoard"
    this.obj[24] = "Calendar";
    this.obj[26] = "SqlJob";
    this.obj[100] = "All";
    return this.obj[id];
}

// Generated by CoffeeScript 1.11.1
(function() {
  var AnimatedText, AnimatedTextFactory, Bar, BaseDonut, BaseGauge, Donut, Gauge, GaugePointer, TextRenderer, ValueUpdater, addCommas, cutHex, formatNumber, mergeObjects, secondsToString,
    slice = [].slice,
    hasProp = {}.hasOwnProperty,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

  (function() {
    var browserRequestAnimationFrame, isCancelled, j, lastId, len, vendor, vendors;
    vendors = ['ms', 'moz', 'webkit', 'o'];
    for (j = 0, len = vendors.length; j < len; j++) {
      vendor = vendors[j];
      if (window.requestAnimationFrame) {
        break;
      }
      window.requestAnimationFrame = window[vendor + 'RequestAnimationFrame'];
      window.cancelAnimationFrame = window[vendor + 'CancelAnimationFrame'] || window[vendor + 'CancelRequestAnimationFrame'];
    }
    browserRequestAnimationFrame = null;
    lastId = 0;
    isCancelled = {};
    if (!requestAnimationFrame) {
      window.requestAnimationFrame = function(callback, element) {
        var currTime, id, lastTime, timeToCall;
        currTime = new Date().getTime();
        timeToCall = Math.max(0, 16 - (currTime - lastTime));
        id = window.setTimeout(function() {
          return callback(currTime + timeToCall);
        }, timeToCall);
        lastTime = currTime + timeToCall;
        return id;
      };
      return window.cancelAnimationFrame = function(id) {
        return clearTimeout(id);
      };
    } else if (!window.cancelAnimationFrame) {
      browserRequestAnimationFrame = window.requestAnimationFrame;
      window.requestAnimationFrame = function(callback, element) {
        var myId;
        myId = ++lastId;
        browserRequestAnimationFrame(function() {
          if (!isCancelled[myId]) {
            return callback();
          }
        }, element);
        return myId;
      };
      return window.cancelAnimationFrame = function(id) {
        return isCancelled[id] = true;
      };
    }
  })();

  secondsToString = function(sec) {
    var hr, min;
    hr = Math.floor(sec / 3600);
    min = Math.floor((sec - (hr * 3600)) / 60);
    sec -= (hr * 3600) + (min * 60);
    sec += '';
    min += '';
    while (min.length < 2) {
      min = '0' + min;
    }
    while (sec.length < 2) {
      sec = '0' + sec;
    }
    hr = hr ? hr + ':' : '';
    return hr + min + ':' + sec;
  };

  formatNumber = function() {
    var digits, num, value;
    num = 1 <= arguments.length ? slice.call(arguments, 0) : [];
    value = num[0];
    digits = 0 || num[1];
    return addCommas(value.toFixed(digits));
  };

  mergeObjects = function(obj1, obj2) {
    var key, out, val;
    out = {};
    for (key in obj1) {
      if (!hasProp.call(obj1, key)) continue;
      val = obj1[key];
      out[key] = val;
    }
    for (key in obj2) {
      if (!hasProp.call(obj2, key)) continue;
      val = obj2[key];
      out[key] = val;
    }
    return out;
  };

  addCommas = function(nStr) {
    var rgx, x, x1, x2;
    nStr += '';
    x = nStr.split('.');
    x1 = x[0];
    x2 = '';
    if (x.length > 1) {
      x2 = '.' + x[1];
    }
    rgx = /(\d+)(\d{3})/;
    while (rgx.test(x1)) {
      x1 = x1.replace(rgx, '$1' + ',' + '$2');
    }
    return x1 + x2;
  };

  cutHex = function(nStr) {
    if (nStr.charAt(0) === "#") {
      return nStr.substring(1, 7);
    }
    return nStr;
  };

  ValueUpdater = (function() {
    ValueUpdater.prototype.animationSpeed = 32;

    function ValueUpdater(addToAnimationQueue, clear) {
      if (addToAnimationQueue == null) {
        addToAnimationQueue = true;
      }
      this.clear = clear != null ? clear : true;
      if (addToAnimationQueue) {
        AnimationUpdater.add(this);
      }
    }

    ValueUpdater.prototype.update = function(force) {
      var diff;
      if (force == null) {
        force = false;
      }
      if (force || this.displayedValue !== this.value) {
        if (this.ctx && this.clear) {
          this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
        }
        diff = this.value - this.displayedValue;
        if (Math.abs(diff / this.animationSpeed) <= 0.001) {
          this.displayedValue = this.value;
        } else {
          this.displayedValue = this.displayedValue + diff / this.animationSpeed;
        }
        this.render();
        return true;
      }
      return false;
    };

    return ValueUpdater;

  })();

  BaseGauge = (function(superClass) {
    extend(BaseGauge, superClass);

    function BaseGauge() {
      return BaseGauge.__super__.constructor.apply(this, arguments);
    }

    BaseGauge.prototype.displayScale = 1;

    BaseGauge.prototype.forceUpdate = true;

    BaseGauge.prototype.setTextField = function(textField, fractionDigits) {
      return this.textField = textField instanceof TextRenderer ? textField : new TextRenderer(textField, fractionDigits);
    };

    BaseGauge.prototype.setMinValue = function(minValue, updateStartValue) {
      var gauge, j, len, ref, results;
      this.minValue = minValue;
      if (updateStartValue == null) {
        updateStartValue = true;
      }
      if (updateStartValue) {
        this.displayedValue = this.minValue;
        ref = this.gp || [];
        results = [];
        for (j = 0, len = ref.length; j < len; j++) {
          gauge = ref[j];
          results.push(gauge.displayedValue = this.minValue);
        }
        return results;
      }
    };

    BaseGauge.prototype.setOptions = function(options) {
      if (options == null) {
        options = null;
      }
      this.options = mergeObjects(this.options, options);
      if (this.textField) {
        this.textField.el.style.fontSize = options.fontSize + 'px';
      }
      if (this.options.angle > .5) {
        this.options.angle = .5;
      }
      this.configDisplayScale();
      return this;
    };

    BaseGauge.prototype.configDisplayScale = function() {
      var backingStorePixelRatio, devicePixelRatio, height, prevDisplayScale, width;
      prevDisplayScale = this.displayScale;
      if (this.options.highDpiSupport === false) {
        delete this.displayScale;
      } else {
        devicePixelRatio = window.devicePixelRatio || 1;
        backingStorePixelRatio = this.ctx.webkitBackingStorePixelRatio || this.ctx.mozBackingStorePixelRatio || this.ctx.msBackingStorePixelRatio || this.ctx.oBackingStorePixelRatio || this.ctx.backingStorePixelRatio || 1;
        this.displayScale = devicePixelRatio / backingStorePixelRatio;
      }
      if (this.displayScale !== prevDisplayScale) {
        width = this.canvas.G__width || this.canvas.width;
        height = this.canvas.G__height || this.canvas.height;
        this.canvas.width = width * this.displayScale;
        this.canvas.height = height * this.displayScale;
        this.canvas.style.width = width + "px";
        this.canvas.style.height = height + "px";
        this.canvas.G__width = width;
        this.canvas.G__height = height;
      }
      return this;
    };

    BaseGauge.prototype.parseValue = function(value) {
      value = parseFloat(value) || Number(value);
      if (isFinite(value)) {
        return value;
      } else {
        return 0;
      }
    };

    return BaseGauge;

  })(ValueUpdater);

  TextRenderer = (function() {
    function TextRenderer(el, fractionDigits1) {
      this.el = el;
      this.fractionDigits = fractionDigits1;
    }

    TextRenderer.prototype.render = function(gauge) {
      return this.el.innerHTML = formatNumber(gauge.displayedValue, this.fractionDigits);
    };

    return TextRenderer;

  })();

  AnimatedText = (function(superClass) {
    extend(AnimatedText, superClass);

    AnimatedText.prototype.displayedValue = 0;

    AnimatedText.prototype.value = 0;

    AnimatedText.prototype.setVal = function(value) {
      return this.value = 1 * value;
    };

    function AnimatedText(elem1, text) {
      this.elem = elem1;
      this.text = text != null ? text : false;
      AnimatedText.__super__.constructor.call(this);
      if (this.elem === void 0) {
        throw new Error('The element isn\'t defined.');
      }
      this.value = 1 * this.elem.innerHTML;
      if (this.text) {
        this.value = 0;
      }
    }

    AnimatedText.prototype.render = function() {
      var textVal;
      if (this.text) {
        textVal = secondsToString(this.displayedValue.toFixed(0));
      } else {
        textVal = addCommas(formatNumber(this.displayedValue));
      }
      return this.elem.innerHTML = textVal;
    };

    return AnimatedText;

  })(ValueUpdater);

  AnimatedTextFactory = {
    create: function(objList) {
      var elem, j, len, out;
      out = [];
      for (j = 0, len = objList.length; j < len; j++) {
        elem = objList[j];
        out.push(new AnimatedText(elem));
      }
      return out;
    }
  };

  GaugePointer = (function(superClass) {
    extend(GaugePointer, superClass);

    GaugePointer.prototype.displayedValue = 0;

    GaugePointer.prototype.value = 0;

    GaugePointer.prototype.options = {
      strokeWidth: 0.035,
      length: 0.1,
      color: "#000000",
      iconPath: null,
      iconScale: 1.0,
      iconAngle: 0
    };

    GaugePointer.prototype.img = null;

    function GaugePointer(gauge1) {
      this.gauge = gauge1;
      if (this.gauge === void 0) {
        throw new Error('The element isn\'t defined.');
      }
      this.ctx = this.gauge.ctx;
      this.canvas = this.gauge.canvas;
      GaugePointer.__super__.constructor.call(this, false, false);
      this.setOptions();
    }

    GaugePointer.prototype.setOptions = function(options) {
      if (options == null) {
        options = null;
      }
      this.options = mergeObjects(this.options, options);
      this.length = 2 * this.gauge.radius * this.gauge.options.radiusScale * this.options.length;
      this.strokeWidth = this.canvas.height * this.options.strokeWidth;
      this.maxValue = this.gauge.maxValue;
      this.minValue = this.gauge.minValue;
      this.animationSpeed = this.gauge.animationSpeed;
      this.options.angle = this.gauge.options.angle;
      if (this.options.iconPath) {
        this.img = new Image();
        return this.img.src = this.options.iconPath;
      }
    };

    GaugePointer.prototype.render = function() {
      var angle, endX, endY, imgX, imgY, startX, startY, x, y;
      angle = this.gauge.getAngle.call(this, this.displayedValue);
      x = Math.round(this.length * Math.cos(angle));
      y = Math.round(this.length * Math.sin(angle));
      startX = Math.round(this.strokeWidth * Math.cos(angle - Math.PI / 2));
      startY = Math.round(this.strokeWidth * Math.sin(angle - Math.PI / 2));
      endX = Math.round(this.strokeWidth * Math.cos(angle + Math.PI / 2));
      endY = Math.round(this.strokeWidth * Math.sin(angle + Math.PI / 2));
      this.ctx.beginPath();
      this.ctx.fillStyle = this.options.color;
      this.ctx.arc(0, 0, this.strokeWidth, 0, Math.PI * 2, false);
      this.ctx.fill();
      this.ctx.beginPath();
      this.ctx.moveTo(startX, startY);
      this.ctx.lineTo(x, y);
      this.ctx.lineTo(endX, endY);
      this.ctx.fill();
      if (this.img) {
        imgX = Math.round(this.img.width * this.options.iconScale);
        imgY = Math.round(this.img.height * this.options.iconScale);
        this.ctx.save();
        this.ctx.translate(x, y);
        this.ctx.rotate(angle + Math.PI / 180.0 * (90 + this.options.iconAngle));
        this.ctx.drawImage(this.img, -imgX / 2, -imgY / 2, imgX, imgY);
        return this.ctx.restore();
      }
    };

    return GaugePointer;

  })(ValueUpdater);

  Bar = (function() {
    function Bar(elem1) {
      this.elem = elem1;
    }

    Bar.prototype.updateValues = function(arrValues) {
      this.value = arrValues[0];
      this.maxValue = arrValues[1];
      this.avgValue = arrValues[2];
      return this.render();
    };

    Bar.prototype.render = function() {
      var avgPercent, valPercent;
      if (this.textField) {
        this.textField.text(formatNumber(this.value));
      }
      if (this.maxValue === 0) {
        this.maxValue = this.avgValue * 2;
      }
      valPercent = (this.value / this.maxValue) * 100;
      avgPercent = (this.avgValue / this.maxValue) * 100;
      $(".bar-value", this.elem).css({
        "width": valPercent + "%"
      });
      return $(".typical-value", this.elem).css({
        "width": avgPercent + "%"
      });
    };

    return Bar;

  })();

  Gauge = (function(superClass) {
    extend(Gauge, superClass);

    Gauge.prototype.elem = null;

    Gauge.prototype.value = [20];

    Gauge.prototype.maxValue = 80;

    Gauge.prototype.minValue = 0;

    Gauge.prototype.displayedAngle = 0;

    Gauge.prototype.displayedValue = 0;

    Gauge.prototype.lineWidth = 40;

    Gauge.prototype.paddingTop = 0.1;

    Gauge.prototype.paddingBottom = 0.1;

    Gauge.prototype.percentColors = null;

    Gauge.prototype.options = {
      colorStart: "#6fadcf",
      colorStop: void 0,
      gradientType: 0,
      strokeColor: "#e0e0e0",
      pointer: {
        length: 0.8,
        strokeWidth: 0.035,
        iconScale: 1.0
      },
      angle: 0.15,
      lineWidth: 0.44,
      radiusScale: 1.0,
      fontSize: 40,
      limitMax: false,
      limitMin: false
    };

    function Gauge(canvas) {
      var h, w;
      this.canvas = canvas;
      Gauge.__super__.constructor.call(this);
      this.percentColors = null;
      if (typeof G_vmlCanvasManager !== 'undefined') {
        this.canvas = window.G_vmlCanvasManager.initElement(this.canvas);
      }
      this.ctx = this.canvas.getContext('2d');
      h = this.canvas.clientHeight;
      w = this.canvas.clientWidth;
      this.canvas.height = h;
      this.canvas.width = w;
      this.gp = [new GaugePointer(this)];
      this.setOptions();
    }

    Gauge.prototype.setOptions = function(options) {
      var gauge, j, len, phi, ref;
      if (options == null) {
        options = null;
      }
      Gauge.__super__.setOptions.call(this, options);
      this.configPercentColors();
      this.extraPadding = 0;
      if (this.options.angle < 0) {
        phi = Math.PI * (1 + this.options.angle);
        this.extraPadding = Math.sin(phi);
      }
      this.availableHeight = this.canvas.height * (1 - this.paddingTop - this.paddingBottom);
      this.lineWidth = this.availableHeight * this.options.lineWidth;
      this.radius = (this.availableHeight - this.lineWidth / 2) / (1.0 + this.extraPadding);
      this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
      ref = this.gp;
      for (j = 0, len = ref.length; j < len; j++) {
        gauge = ref[j];
        gauge.setOptions(this.options.pointer);
        gauge.render();
      }
      this.render();
      return this;
    };

    Gauge.prototype.configPercentColors = function() {
      var bval, gval, i, j, ref, results, rval;
      this.percentColors = null;
      if (this.options.percentColors !== void 0) {
        this.percentColors = new Array();
        results = [];
        for (i = j = 0, ref = this.options.percentColors.length - 1; 0 <= ref ? j <= ref : j >= ref; i = 0 <= ref ? ++j : --j) {
          rval = parseInt((cutHex(this.options.percentColors[i][1])).substring(0, 2), 16);
          gval = parseInt((cutHex(this.options.percentColors[i][1])).substring(2, 4), 16);
          bval = parseInt((cutHex(this.options.percentColors[i][1])).substring(4, 6), 16);
          results.push(this.percentColors[i] = {
            pct: this.options.percentColors[i][0],
            color: {
              r: rval,
              g: gval,
              b: bval
            }
          });
        }
        return results;
      }
    };

    Gauge.prototype.set = function(value) {
      var gp, i, j, l, len, m, ref, ref1, val;
      if (!(value instanceof Array)) {
        value = [value];
      }
      for (i = j = 0, ref = value.length - 1; 0 <= ref ? j <= ref : j >= ref; i = 0 <= ref ? ++j : --j) {
        value[i] = this.parseValue(value[i]);
      }
      if (value.length > this.gp.length) {
        for (i = l = 0, ref1 = value.length - this.gp.length; 0 <= ref1 ? l < ref1 : l > ref1; i = 0 <= ref1 ? ++l : --l) {
          gp = new GaugePointer(this);
          gp.setOptions(this.options.pointer);
          this.gp.push(gp);
        }
      } else if (value.length < this.gp.length) {
        this.gp = this.gp.slice(this.gp.length - value.length);
      }
      i = 0;
      for (m = 0, len = value.length; m < len; m++) {
        val = value[m];
        if (val > this.maxValue) {
          if (this.options.limitMax) {
            val = this.maxValue;
          } else {
            this.maxValue = val + 1;
          }
        } else if (val < this.minValue) {
          if (this.options.limitMin) {
            val = this.minValue;
          } else {
            this.minValue = val - 1;
          }
        }
        this.gp[i].value = val;
        this.gp[i++].setOptions({
          minValue: this.minValue,
          maxValue: this.maxValue,
          angle: this.options.angle
        });
      }
      this.value = Math.max(Math.min(value[value.length - 1], this.maxValue), this.minValue);
      AnimationUpdater.add(this);
      AnimationUpdater.run(this.forceUpdate);
      return this.forceUpdate = false;
    };

    Gauge.prototype.getAngle = function(value) {
      return (1 + this.options.angle) * Math.PI + ((value - this.minValue) / (this.maxValue - this.minValue)) * (1 - this.options.angle * 2) * Math.PI;
    };

    Gauge.prototype.getColorForPercentage = function(pct, grad) {
      var color, endColor, i, j, rangePct, ref, startColor;
      if (pct === 0) {
        color = this.percentColors[0].color;
      } else {
        color = this.percentColors[this.percentColors.length - 1].color;
        for (i = j = 0, ref = this.percentColors.length - 1; 0 <= ref ? j <= ref : j >= ref; i = 0 <= ref ? ++j : --j) {
          if (pct <= this.percentColors[i].pct) {
            if (grad === true) {
              startColor = this.percentColors[i - 1] || this.percentColors[0];
              endColor = this.percentColors[i];
              rangePct = (pct - startColor.pct) / (endColor.pct - startColor.pct);
              color = {
                r: Math.floor(startColor.color.r * (1 - rangePct) + endColor.color.r * rangePct),
                g: Math.floor(startColor.color.g * (1 - rangePct) + endColor.color.g * rangePct),
                b: Math.floor(startColor.color.b * (1 - rangePct) + endColor.color.b * rangePct)
              };
            } else {
              color = this.percentColors[i].color;
            }
            break;
          }
        }
      }
      return 'rgb(' + [color.r, color.g, color.b].join(',') + ')';
    };

    Gauge.prototype.getColorForValue = function(val, grad) {
      var pct;
      pct = (val - this.minValue) / (this.maxValue - this.minValue);
      return this.getColorForPercentage(pct, grad);
    };

    Gauge.prototype.renderStaticLabels = function(staticLabels, w, h, radius) {
      var font, fontsize, j, len, match, re, ref, rest, rotationAngle, value;
      this.ctx.save();
      this.ctx.translate(w, h);
      font = staticLabels.font || "10px Times";
      re = /\d+\.?\d?/;
      match = font.match(re)[0];
      rest = font.slice(match.length);
      fontsize = parseFloat(match) * this.displayScale;
      this.ctx.font = fontsize + rest;
      this.ctx.fillStyle = staticLabels.color || "#000000";
      this.ctx.textBaseline = "bottom";
      this.ctx.textAlign = "center";
      ref = staticLabels.labels;
      for (j = 0, len = ref.length; j < len; j++) {
        value = ref[j];
        if (value.label !== void 0) {
          if ((!this.options.limitMin || value >= this.minValue) && (!this.options.limitMax || value <= this.maxValue)) {
            font = value.font || staticLabels.font;
            match = font.match(re)[0];
            rest = font.slice(match.length);
            fontsize = parseFloat(match) * this.displayScale;
            this.ctx.font = fontsize + rest;
            rotationAngle = this.getAngle(value.label) - 3 * Math.PI / 2;
            this.ctx.rotate(rotationAngle);
            this.ctx.fillText(formatNumber(value.label, staticLabels.fractionDigits), 0, -radius - this.lineWidth / 2);
            this.ctx.rotate(-rotationAngle);
          }
        } else {
          if ((!this.options.limitMin || value >= this.minValue) && (!this.options.limitMax || value <= this.maxValue)) {
            rotationAngle = this.getAngle(value) - 3 * Math.PI / 2;
            this.ctx.rotate(rotationAngle);
            this.ctx.fillText(formatNumber(value, staticLabels.fractionDigits), 0, -radius - this.lineWidth / 2);
            this.ctx.rotate(-rotationAngle);
          }
        }
      }
      return this.ctx.restore();
    };

    Gauge.prototype.renderTicks = function(ticksOptions, w, h, radius) {
      var currentDivision, currentSubDivision, divColor, divLength, divWidth, divisionCount, j, lineWidth, range, rangeDivisions, ref, results, scaleMutate, st, subColor, subDivisions, subLength, subWidth, subdivisionCount, t, tmpRadius;
      if (ticksOptions !== {}) {
        divisionCount = ticksOptions.divisions || 0;
        subdivisionCount = ticksOptions.subDivisions || 0;
        divColor = ticksOptions.divColor || '#fff';
        subColor = ticksOptions.subColor || '#fff';
        divLength = ticksOptions.divLength || 0.7;
        subLength = ticksOptions.subLength || 0.2;
        range = parseFloat(this.maxValue) - parseFloat(this.minValue);
        rangeDivisions = parseFloat(range) / parseFloat(ticksOptions.divisions);
        subDivisions = parseFloat(rangeDivisions) / parseFloat(ticksOptions.subDivisions);
        currentDivision = parseFloat(this.minValue);
        currentSubDivision = 0.0 + subDivisions;
        lineWidth = range / 400;
        divWidth = lineWidth * (ticksOptions.divWidth || 1);
        subWidth = lineWidth * (ticksOptions.subWidth || 1);
        results = [];
        for (t = j = 0, ref = divisionCount + 1; j < ref; t = j += 1) {
          this.ctx.lineWidth = this.lineWidth * divLength;
          scaleMutate = (this.lineWidth / 2) * (1 - divLength);
          tmpRadius = (this.radius * this.options.radiusScale) + scaleMutate;
          this.ctx.strokeStyle = divColor;
          this.ctx.beginPath();
          this.ctx.arc(0, 0, tmpRadius, this.getAngle(currentDivision - divWidth), this.getAngle(currentDivision + divWidth), false);
          this.ctx.stroke();
          currentSubDivision = currentDivision + subDivisions;
          currentDivision += rangeDivisions;
          if (t !== ticksOptions.divisions && subdivisionCount > 0) {
            results.push((function() {
              var l, ref1, results1;
              results1 = [];
              for (st = l = 0, ref1 = subdivisionCount - 1; l < ref1; st = l += 1) {
                this.ctx.lineWidth = this.lineWidth * subLength;
                scaleMutate = (this.lineWidth / 2) * (1 - subLength);
                tmpRadius = (this.radius * this.options.radiusScale) + scaleMutate;
                this.ctx.strokeStyle = subColor;
                this.ctx.beginPath();
                this.ctx.arc(0, 0, tmpRadius, this.getAngle(currentSubDivision - subWidth), this.getAngle(currentSubDivision + subWidth), false);
                this.ctx.stroke();
                results1.push(currentSubDivision += subDivisions);
              }
              return results1;
            }).call(this));
          } else {
            results.push(void 0);
          }
        }
        return results;
      }
    };

    Gauge.prototype.render = function() {
      var displayedAngle, fillStyle, gauge, h, j, l, len, len1, max, min, radius, ref, ref1, scaleMutate, tmpRadius, w, zone;
      w = this.canvas.width / 2;
      h = (this.canvas.height * this.paddingTop + this.availableHeight) - ((this.radius + this.lineWidth / 2) * this.extraPadding);
      displayedAngle = this.getAngle(this.displayedValue);
      if (this.textField) {
        this.textField.render(this);
      }
      this.ctx.lineCap = "butt";
      radius = this.radius * this.options.radiusScale;
      if (this.options.staticLabels) {
        this.renderStaticLabels(this.options.staticLabels, w, h, radius);
      }
      if (this.options.staticZones) {
        this.ctx.save();
        this.ctx.translate(w, h);
        this.ctx.lineWidth = this.lineWidth;
        ref = this.options.staticZones;
        for (j = 0, len = ref.length; j < len; j++) {
          zone = ref[j];
          min = zone.min;
          if (this.options.limitMin && min < this.minValue) {
            min = this.minValue;
          }
          max = zone.max;
          if (this.options.limitMax && max > this.maxValue) {
            max = this.maxValue;
          }
          tmpRadius = this.radius * this.options.radiusScale;
          if (zone.height) {
            this.ctx.lineWidth = this.lineWidth * zone.height;
            scaleMutate = (this.lineWidth / 2) * (zone.offset || 1 - zone.height);
            tmpRadius = (this.radius * this.options.radiusScale) + scaleMutate;
          }
          this.ctx.strokeStyle = zone.strokeStyle;
          this.ctx.beginPath();
          this.ctx.arc(0, 0, tmpRadius, this.getAngle(min), this.getAngle(max), false);
          this.ctx.stroke();
        }
      } else {
        if (this.options.customFillStyle !== void 0) {
          fillStyle = this.options.customFillStyle(this);
        } else if (this.percentColors !== null) {
          fillStyle = this.getColorForValue(this.displayedValue, this.options.generateGradient);
        } else if (this.options.colorStop !== void 0) {
          if (this.options.gradientType === 0) {
            fillStyle = this.ctx.createRadialGradient(w, h, 9, w, h, 70);
          } else {
            fillStyle = this.ctx.createLinearGradient(0, 0, w, 0);
          }
          fillStyle.addColorStop(0, this.options.colorStart);
          fillStyle.addColorStop(1, this.options.colorStop);
        } else {
          fillStyle = this.options.colorStart;
        }
        this.ctx.strokeStyle = fillStyle;
        this.ctx.beginPath();
        this.ctx.arc(w, h, radius, (1 + this.options.angle) * Math.PI, displayedAngle, false);
        this.ctx.lineWidth = this.lineWidth;
        this.ctx.stroke();
        this.ctx.strokeStyle = this.options.strokeColor;
        this.ctx.beginPath();
        this.ctx.arc(w, h, radius, displayedAngle, (2 - this.options.angle) * Math.PI, false);
        this.ctx.stroke();
        this.ctx.save();
        this.ctx.translate(w, h);
      }
      if (this.options.renderTicks) {
        this.renderTicks(this.options.renderTicks, w, h, radius);
      }
      this.ctx.restore();
      this.ctx.translate(w, h);
      ref1 = this.gp;
      for (l = 0, len1 = ref1.length; l < len1; l++) {
        gauge = ref1[l];
        gauge.update(true);
      }
      return this.ctx.translate(-w, -h);
    };

    return Gauge;

  })(BaseGauge);

  BaseDonut = (function(superClass) {
    extend(BaseDonut, superClass);

    BaseDonut.prototype.lineWidth = 15;

    BaseDonut.prototype.displayedValue = 0;

    BaseDonut.prototype.value = 33;

    BaseDonut.prototype.maxValue = 80;

    BaseDonut.prototype.minValue = 0;

    BaseDonut.prototype.options = {
      lineWidth: 0.10,
      colorStart: "#6f6ea0",
      colorStop: "#c0c0db",
      strokeColor: "#eeeeee",
      shadowColor: "#d5d5d5",
      angle: 0.35,
      radiusScale: 1.0
    };

    function BaseDonut(canvas) {
      this.canvas = canvas;
      BaseDonut.__super__.constructor.call(this);
      if (typeof G_vmlCanvasManager !== 'undefined') {
        this.canvas = window.G_vmlCanvasManager.initElement(this.canvas);
      }
      this.ctx = this.canvas.getContext('2d');
      this.setOptions();
      this.render();
    }

    BaseDonut.prototype.getAngle = function(value) {
      return (1 - this.options.angle) * Math.PI + ((value - this.minValue) / (this.maxValue - this.minValue)) * ((2 + this.options.angle) - (1 - this.options.angle)) * Math.PI;
    };

    BaseDonut.prototype.setOptions = function(options) {
      if (options == null) {
        options = null;
      }
      BaseDonut.__super__.setOptions.call(this, options);
      this.lineWidth = this.canvas.height * this.options.lineWidth;
      this.radius = this.options.radiusScale * (this.canvas.height / 2 - this.lineWidth / 2);
      return this;
    };

    BaseDonut.prototype.set = function(value) {
      this.value = this.parseValue(value);
      if (this.value > this.maxValue) {
        if (this.options.limitMax) {
          this.value = this.maxValue;
        } else {
          this.maxValue = this.value;
        }
      } else if (this.value < this.minValue) {
        if (this.options.limitMin) {
          this.value = this.minValue;
        } else {
          this.minValue = this.value;
        }
      }
      AnimationUpdater.add(this);
      AnimationUpdater.run(this.forceUpdate);
      return this.forceUpdate = false;
    };

    BaseDonut.prototype.render = function() {
      var displayedAngle, grdFill, h, start, stop, w;
      displayedAngle = this.getAngle(this.displayedValue);
      w = this.canvas.width / 2;
      h = this.canvas.height / 2;
      if (this.textField) {
        this.textField.render(this);
      }
      grdFill = this.ctx.createRadialGradient(w, h, 39, w, h, 70);
      grdFill.addColorStop(0, this.options.colorStart);
      grdFill.addColorStop(1, this.options.colorStop);
      start = this.radius - this.lineWidth / 2;
      stop = this.radius + this.lineWidth / 2;
      this.ctx.strokeStyle = this.options.strokeColor;
      this.ctx.beginPath();
      this.ctx.arc(w, h, this.radius, (1 - this.options.angle) * Math.PI, (2 + this.options.angle) * Math.PI, false);
      this.ctx.lineWidth = this.lineWidth;
      this.ctx.lineCap = "round";
      this.ctx.stroke();
      this.ctx.strokeStyle = grdFill;
      this.ctx.beginPath();
      this.ctx.arc(w, h, this.radius, (1 - this.options.angle) * Math.PI, displayedAngle, false);
      return this.ctx.stroke();
    };

    return BaseDonut;

  })(BaseGauge);

  Donut = (function(superClass) {
    extend(Donut, superClass);

    function Donut() {
      return Donut.__super__.constructor.apply(this, arguments);
    }

    Donut.prototype.strokeGradient = function(w, h, start, stop) {
      var grd;
      grd = this.ctx.createRadialGradient(w, h, start, w, h, stop);
      grd.addColorStop(0, this.options.shadowColor);
      grd.addColorStop(0.12, this.options._orgStrokeColor);
      grd.addColorStop(0.88, this.options._orgStrokeColor);
      grd.addColorStop(1, this.options.shadowColor);
      return grd;
    };

    Donut.prototype.setOptions = function(options) {
      var h, start, stop, w;
      if (options == null) {
        options = null;
      }
      Donut.__super__.setOptions.call(this, options);
      w = this.canvas.width / 2;
      h = this.canvas.height / 2;
      start = this.radius - this.lineWidth / 2;
      stop = this.radius + this.lineWidth / 2;
      this.options._orgStrokeColor = this.options.strokeColor;
      this.options.strokeColor = this.strokeGradient(w, h, start, stop);
      return this;
    };

    return Donut;

  })(BaseDonut);

  window.AnimationUpdater = {
    elements: [],
    animId: null,
    addAll: function(list) {
      var elem, j, len, results;
      results = [];
      for (j = 0, len = list.length; j < len; j++) {
        elem = list[j];
        results.push(AnimationUpdater.elements.push(elem));
      }
      return results;
    },
    add: function(object) {
      if (indexOf.call(AnimationUpdater.elements, object) < 0) {
        return AnimationUpdater.elements.push(object);
      }
    },
    run: function(force) {
      var elem, finished, isCallback, j, k, l, len, ref, toRemove;
      if (force == null) {
        force = false;
      }
      isCallback = isFinite(parseFloat(force));
      if (isCallback || force === true) {
        finished = true;
        toRemove = [];
        ref = AnimationUpdater.elements;
        for (k = j = 0, len = ref.length; j < len; k = ++j) {
          elem = ref[k];
          if (elem.update(force === true)) {
            finished = false;
          } else {
            toRemove.push(k);
          }
        }
        for (l = toRemove.length - 1; l >= 0; l += -1) {
          k = toRemove[l];
          AnimationUpdater.elements.splice(k, 1);
        }
        return AnimationUpdater.animId = finished ? null : requestAnimationFrame(AnimationUpdater.run);
      } else if (force === false) {
        if (AnimationUpdater.animId === !null) {
          cancelAnimationFrame(AnimationUpdater.animId);
        }
        return AnimationUpdater.animId = requestAnimationFrame(AnimationUpdater.run);
      }
    }
  };

  if (typeof window.define === 'function' && (window.define.amd != null)) {
    define(function() {
      return {
        Gauge: Gauge,
        Donut: Donut,
        BaseDonut: BaseDonut,
        TextRenderer: TextRenderer
      };
    });
  } else if (typeof module !== 'undefined' && (module.exports != null)) {
    module.exports = {
      Gauge: Gauge,
      Donut: Donut,
      BaseDonut: BaseDonut,
      TextRenderer: TextRenderer
    };
  } else {
    window.Gauge = Gauge;
    window.Donut = Donut;
    window.BaseDonut = BaseDonut;
    window.TextRenderer = TextRenderer;
  }

}).call(this);

//# sourceMappingURL=gauge.js.map


var opts;
function getRandomColor() {
    var letters = '0123456789ABCDEF';
    var color = '#';
    for (var i = 0; i < 6; i++) {
        color += letters[Math.floor(Math.random() * 16)];
    }
    return color;
}

var ProgressGaugeWrapper = function (option, ref) {
    this.EbSid = option.EbSid;
    this.GaugeValue = option.GaugeValue;
    this.GaugeContainer = option.GaugeContainer;
    this.Color = option.Color;
    this.Gradient = option.Gradient;
    this.Color2 = option.Color2;
    this.StartAngle = option.StartAngle == 0 ? -150 : option.StartAngle;
    this.EndAngle = option.EndAngle == 0 ? 150 : option.EndAngle;
    this.Hollow = option.Hollow;
    this.HollowMargin = option.HollowMargin
    this.HollowSize = option.HollowSize == 0 ? 72 + "%" : option.HollowSize + "%";
    this.HollowColor = option.HollowColor;
    this.DropShadow = option.DropShadow;
    this.TrackBgColor = option.TrackBgColor;
    this.Left = option.Left;
    this.Top = option.Top;
    this.Blur = option.Blur;
    this.Opacity = option.Opacity;
    this.LineCap = option.LineCap;
    this.GaugeName = option.GaugeName;
    this.NameOffsetY = option.NameOffsetY;
    this.NameColor = option.NameColor;
    this.NameFontSize = option.NameFontSize;
    this.ValueFontSize = option.ValueFontSize;
    this.ValueColor = option.ValueColor;
    this.ValueUnit = option.ValueUnit;
    $(`#${option.EbSid}`).empty();
    this.GaugeValue = option.GaugeValue ? option.GaugeValue : Math.floor(Math.random() * 10) * Math.floor(Math.random() * 10);
    var options = {
        chart: {
            height: $(`#${option.EbSid}`).height() +  10,
            type: "radialBar",
        },

        series: [this.GaugeValue],
        colors: [this.Color],
        plotOptions: {
            radialBar: {
                startAngle: this.StartAngle,
                endAngle: this.EndAngle,
                hollow: {
                    margin: 0,
                    size: this.HollowSize,
                    background: this.HollowColor 
                },
                track: {
                    background: this.TrackBgColor ,
                    dropShadow: {
                        enabled: true,
                        top: this.Top,
                        left: this.Left,
                        blur: this.Blur,
                        opacity: this.Opacity / 100
                    }
                },
                dataLabels: {
                    name: {
                        offsetY: -10,
                        color: "#fff",
                        fontSize: "14px"
                    },
                    value: {
                        color: "#fff",
                        fontSize: "30px",
                        show: true,
                        formatter: function (val) {
                            return val + '%'
                        }
                    }
                }
            }
        },
        fill: {
            type: "gradient",
            gradient: {
                shade: "dark",
                type: "vertical",
                gradientToColors: [this.Color2],
                stops: [0, 100]
            }
        },
        stroke: {
            lineCap: "round"
        },
        labels: [this.GaugeName]
    };

    var Progresschart = new ApexCharts(document.querySelector(`#${option.EbSid}`), options);

    var a = Progresschart.render();

}


var SpeedoMeterWrapper = function (option, ref) {
    this.GaugeValue = option.GaugeValue ? option.GaugeValue : Math.floor(Math.random() * 10) * Math.floor(Math.random() * 10);

    google.charts.load('current', { 'packages': ['gauge'] });
    google.charts.setOnLoadCallback(drawChart);
    function drawChart() {

        var data = google.visualization.arrayToDataTable([
            ['Label', 'Value'],
            ['Rank', this.GaugeValue]
        ]);
        var options = {
            width: $(`#${option.EbSid}`).height(),
            height: $(`#${option.EbSid}`).height(),
            redFrom: 0,
            redTo: 10,
            yellowFrom: 10,
            yellowTo: 15,
            greenFrom: 15,
            greenTo: 20,
            minorTicks: 20,
            max: 20,
            min: 0,
            majorTicks: ['20', '1']
        };

        var chart = new google.visualization.Gauge(document.getElementById(option.EbSid));
        chart.draw(data, options);

    }
}
/*!
 * ApexCharts v3.20.0
 * (c) 2018-2020 Juned Chhipa
 * Released under the MIT License.
 */
!function (t, e) { "object" == typeof exports && "undefined" != typeof module ? module.exports = e() : "function" == typeof define && define.amd ? define(e) : (t = t || self).ApexCharts = e() }(this, (function () {
    "use strict"; function t(e) { return (t = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(e) } function e(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") } function i(t, e) { for (var i = 0; i < e.length; i++) { var a = e[i]; a.enumerable = a.enumerable || !1, a.configurable = !0, "value" in a && (a.writable = !0), Object.defineProperty(t, a.key, a) } } function a(t, e, a) { return e && i(t.prototype, e), a && i(t, a), t } function s(t, e, i) { return e in t ? Object.defineProperty(t, e, { value: i, enumerable: !0, configurable: !0, writable: !0 }) : t[e] = i, t } function r(t, e) { var i = Object.keys(t); if (Object.getOwnPropertySymbols) { var a = Object.getOwnPropertySymbols(t); e && (a = a.filter((function (e) { return Object.getOwnPropertyDescriptor(t, e).enumerable }))), i.push.apply(i, a) } return i } function n(t) { for (var e = 1; e < arguments.length; e++) { var i = null != arguments[e] ? arguments[e] : {}; e % 2 ? r(Object(i), !0).forEach((function (e) { s(t, e, i[e]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(i)) : r(Object(i)).forEach((function (e) { Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(i, e)) })) } return t } function o(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), e && h(t, e) } function l(t) { return (l = Object.setPrototypeOf ? Object.getPrototypeOf : function (t) { return t.__proto__ || Object.getPrototypeOf(t) })(t) } function h(t, e) { return (h = Object.setPrototypeOf || function (t, e) { return t.__proto__ = e, t })(t, e) } function c(t, e) { return !e || "object" != typeof e && "function" != typeof e ? function (t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t }(t) : e } function d(t) { var e = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Date.prototype.toString.call(Reflect.construct(Date, [], (function () { }))), !0 } catch (t) { return !1 } }(); return function () { var i, a = l(t); if (e) { var s = l(this).constructor; i = Reflect.construct(a, arguments, s) } else i = a.apply(this, arguments); return c(this, i) } } function g(t) { return function (t) { if (Array.isArray(t)) return u(t) }(t) || function (t) { if ("undefined" != typeof Symbol && Symbol.iterator in Object(t)) return Array.from(t) }(t) || function (t, e) { if (!t) return; if ("string" == typeof t) return u(t, e); var i = Object.prototype.toString.call(t).slice(8, -1); "Object" === i && t.constructor && (i = t.constructor.name); if ("Map" === i || "Set" === i) return Array.from(t); if ("Arguments" === i || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)) return u(t, e) }(t) || function () { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") }() } function u(t, e) { (null == e || e > t.length) && (e = t.length); for (var i = 0, a = new Array(e); i < e; i++)a[i] = t[i]; return a } var f = function () { function i() { e(this, i) } return a(i, [{ key: "shadeRGBColor", value: function (t, e) { var i = e.split(","), a = t < 0 ? 0 : 255, s = t < 0 ? -1 * t : t, r = parseInt(i[0].slice(4), 10), n = parseInt(i[1], 10), o = parseInt(i[2], 10); return "rgb(" + (Math.round((a - r) * s) + r) + "," + (Math.round((a - n) * s) + n) + "," + (Math.round((a - o) * s) + o) + ")" } }, { key: "shadeHexColor", value: function (t, e) { var i = parseInt(e.slice(1), 16), a = t < 0 ? 0 : 255, s = t < 0 ? -1 * t : t, r = i >> 16, n = i >> 8 & 255, o = 255 & i; return "#" + (16777216 + 65536 * (Math.round((a - r) * s) + r) + 256 * (Math.round((a - n) * s) + n) + (Math.round((a - o) * s) + o)).toString(16).slice(1) } }, { key: "shadeColor", value: function (t, e) { return i.isColorHex(e) ? this.shadeHexColor(t, e) : this.shadeRGBColor(t, e) } }], [{ key: "bind", value: function (t, e) { return function () { return t.apply(e, arguments) } } }, { key: "isObject", value: function (e) { return e && "object" === t(e) && !Array.isArray(e) && null != e } }, { key: "listToArray", value: function (t) { var e, i = []; for (e = 0; e < t.length; e++)i[e] = t[e]; return i } }, { key: "extend", value: function (t, e) { var i = this; "function" != typeof Object.assign && (Object.assign = function (t) { if (null == t) throw new TypeError("Cannot convert undefined or null to object"); for (var e = Object(t), i = 1; i < arguments.length; i++) { var a = arguments[i]; if (null != a) for (var s in a) a.hasOwnProperty(s) && (e[s] = a[s]) } return e }); var a = Object.assign({}, t); return this.isObject(t) && this.isObject(e) && Object.keys(e).forEach((function (r) { i.isObject(e[r]) && r in t ? a[r] = i.extend(t[r], e[r]) : Object.assign(a, s({}, r, e[r])) })), a } }, { key: "extendArray", value: function (t, e) { var a = []; return t.map((function (t) { a.push(i.extend(e, t)) })), t = a } }, { key: "monthMod", value: function (t) { return t % 12 } }, { key: "clone", value: function (e) { if ("[object Array]" === Object.prototype.toString.call(e)) { for (var i = [], a = 0; a < e.length; a++)i[a] = this.clone(e[a]); return i } if ("[object Null]" === Object.prototype.toString.call(e)) return null; if ("[object Date]" === Object.prototype.toString.call(e)) return e; if ("object" === t(e)) { var s = {}; for (var r in e) e.hasOwnProperty(r) && (s[r] = this.clone(e[r])); return s } return e } }, { key: "log10", value: function (t) { return Math.log(t) / Math.LN10 } }, { key: "roundToBase10", value: function (t) { return Math.pow(10, Math.floor(Math.log10(t))) } }, { key: "roundToBase", value: function (t, e) { return Math.pow(e, Math.floor(Math.log(t) / Math.log(e))) } }, { key: "parseNumber", value: function (t) { return null === t ? t : parseFloat(t) } }, { key: "randomId", value: function () { return (Math.random() + 1).toString(36).substring(4) } }, { key: "noExponents", value: function (t) { var e = String(t).split(/[eE]/); if (1 === e.length) return e[0]; var i = "", a = t < 0 ? "-" : "", s = e[0].replace(".", ""), r = Number(e[1]) + 1; if (r < 0) { for (i = a + "0."; r++;)i += "0"; return i + s.replace(/^-/, "") } for (r -= s.length; r--;)i += "0"; return s + i } }, { key: "getDimensions", value: function (t) { var e = getComputedStyle(t), i = [], a = t.clientHeight, s = t.clientWidth; return a -= parseFloat(e.paddingTop) + parseFloat(e.paddingBottom), s -= parseFloat(e.paddingLeft) + parseFloat(e.paddingRight), i.push(s), i.push(a), i } }, { key: "getBoundingClientRect", value: function (t) { var e = t.getBoundingClientRect(); return { top: e.top, right: e.right, bottom: e.bottom, left: e.left, width: t.clientWidth, height: t.clientHeight, x: e.left, y: e.top } } }, { key: "getLargestStringFromArr", value: function (t) { return t.reduce((function (t, e) { return Array.isArray(e) && (e = e.reduce((function (t, e) { return t.length > e.length ? t : e }))), t.length > e.length ? t : e }), 0) } }, { key: "hexToRgba", value: function () { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "#999999", e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : .6; "#" !== t.substring(0, 1) && (t = "#999999"); var i = t.replace("#", ""); i = i.match(new RegExp("(.{" + i.length / 3 + "})", "g")); for (var a = 0; a < i.length; a++)i[a] = parseInt(1 === i[a].length ? i[a] + i[a] : i[a], 16); return void 0 !== e && i.push(e), "rgba(" + i.join(",") + ")" } }, { key: "getOpacityFromRGBA", value: function (t) { return parseFloat(t.replace(/^.*,(.+)\)/, "$1")) } }, { key: "rgb2hex", value: function (t) { return (t = t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i)) && 4 === t.length ? "#" + ("0" + parseInt(t[1], 10).toString(16)).slice(-2) + ("0" + parseInt(t[2], 10).toString(16)).slice(-2) + ("0" + parseInt(t[3], 10).toString(16)).slice(-2) : "" } }, { key: "isColorHex", value: function (t) { return /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(t) } }, { key: "polarToCartesian", value: function (t, e, i, a) { var s = (a - 90) * Math.PI / 180; return { x: t + i * Math.cos(s), y: e + i * Math.sin(s) } } }, { key: "escapeString", value: function (t) { var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "x", i = t.toString().slice(); return i = i.replace(/[` ~!@#$%^&*()_|+\-=?;:'",.<>{}[\]\\/]/gi, e) } }, { key: "negToZero", value: function (t) { return t < 0 ? 0 : t } }, { key: "moveIndexInArray", value: function (t, e, i) { if (i >= t.length) for (var a = i - t.length + 1; a--;)t.push(void 0); return t.splice(i, 0, t.splice(e, 1)[0]), t } }, { key: "extractNumber", value: function (t) { return parseFloat(t.replace(/[^\d.]*/g, "")) } }, { key: "findAncestor", value: function (t, e) { for (; (t = t.parentElement) && !t.classList.contains(e);); return t } }, { key: "setELstyles", value: function (t, e) { for (var i in e) e.hasOwnProperty(i) && (t.style.key = e[i]) } }, { key: "isNumber", value: function (t) { return !isNaN(t) && parseFloat(Number(t)) === t && !isNaN(parseInt(t, 10)) } }, { key: "isFloat", value: function (t) { return Number(t) === t && t % 1 != 0 } }, { key: "isSafari", value: function () { return /^((?!chrome|android).)*safari/i.test(navigator.userAgent) } }, { key: "isFirefox", value: function () { return navigator.userAgent.toLowerCase().indexOf("firefox") > -1 } }, { key: "isIE11", value: function () { if (-1 !== window.navigator.userAgent.indexOf("MSIE") || window.navigator.appVersion.indexOf("Trident/") > -1) return !0 } }, { key: "isIE", value: function () { var t = window.navigator.userAgent, e = t.indexOf("MSIE "); if (e > 0) return parseInt(t.substring(e + 5, t.indexOf(".", e)), 10); if (t.indexOf("Trident/") > 0) { var i = t.indexOf("rv:"); return parseInt(t.substring(i + 3, t.indexOf(".", i)), 10) } var a = t.indexOf("Edge/"); return a > 0 && parseInt(t.substring(a + 5, t.indexOf(".", a)), 10) } }]), i }(), p = function () { function t(i) { e(this, t), this.ctx = i, this.w = i.w } return a(t, [{ key: "getDefaultFilter", value: function (t, e) { var i = this.w; t.unfilter(!0), (new window.SVG.Filter).size("120%", "180%", "-5%", "-40%"), "none" !== i.config.states.normal.filter ? this.applyFilter(t, e, i.config.states.normal.filter.type, i.config.states.normal.filter.value) : i.config.chart.dropShadow.enabled && this.dropShadow(t, i.config.chart.dropShadow, e) } }, { key: "addNormalFilter", value: function (t, e) { var i = this.w; i.config.chart.dropShadow.enabled && !t.node.classList.contains("apexcharts-marker") && this.dropShadow(t, i.config.chart.dropShadow, e) } }, { key: "addLightenFilter", value: function (t, e, i) { var a = this, s = this.w, r = i.intensity; if (!f.isFirefox()) { t.unfilter(!0); new window.SVG.Filter; t.filter((function (t) { var i = s.config.chart.dropShadow; (i.enabled ? a.addShadow(t, e, i) : t).componentTransfer({ rgb: { type: "linear", slope: 1.5, intercept: r } }) })), t.filterer.node.setAttribute("filterUnits", "userSpaceOnUse"), this._scaleFilterSize(t.filterer.node) } } }, { key: "addDarkenFilter", value: function (t, e, i) { var a = this, s = this.w, r = i.intensity; if (!f.isFirefox()) { t.unfilter(!0); new window.SVG.Filter; t.filter((function (t) { var i = s.config.chart.dropShadow; (i.enabled ? a.addShadow(t, e, i) : t).componentTransfer({ rgb: { type: "linear", slope: r } }) })), t.filterer.node.setAttribute("filterUnits", "userSpaceOnUse"), this._scaleFilterSize(t.filterer.node) } } }, { key: "applyFilter", value: function (t, e, i) { var a = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : .5; switch (i) { case "none": this.addNormalFilter(t, e); break; case "lighten": this.addLightenFilter(t, e, { intensity: a }); break; case "darken": this.addDarkenFilter(t, e, { intensity: a }) } } }, { key: "addShadow", value: function (t, e, i) { var a = i.blur, s = i.top, r = i.left, n = i.color, o = i.opacity, l = t.flood(Array.isArray(n) ? n[e] : n, o).composite(t.sourceAlpha, "in").offset(r, s).gaussianBlur(a).merge(t.source); return t.blend(t.source, l) } }, { key: "dropShadow", value: function (t, e) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, a = e.top, s = e.left, r = e.blur, n = e.color, o = e.opacity, l = e.noUserSpaceOnUse, h = this.w; return t.unfilter(!0), f.isIE() && "radialBar" === h.config.chart.type || (n = Array.isArray(n) ? n[i] : n, t.filter((function (t) { var e = null; e = f.isSafari() || f.isFirefox() || f.isIE() ? t.flood(n, o).composite(t.sourceAlpha, "in").offset(s, a).gaussianBlur(r) : t.flood(n, o).composite(t.sourceAlpha, "in").offset(s, a).gaussianBlur(r).merge(t.source), t.blend(t.source, e) })), l || t.filterer.node.setAttribute("filterUnits", "userSpaceOnUse"), this._scaleFilterSize(t.filterer.node)), t } }, { key: "setSelectionFilter", value: function (t, e, i) { var a = this.w; if (void 0 !== a.globals.selectedDataPoints[e] && a.globals.selectedDataPoints[e].indexOf(i) > -1) { t.node.setAttribute("selected", !0); var s = a.config.states.active.filter; "none" !== s && this.applyFilter(t, e, s.type, s.value) } } }, { key: "_scaleFilterSize", value: function (t) { !function (e) { for (var i in e) e.hasOwnProperty(i) && t.setAttribute(i, e[i]) }({ width: "200%", height: "200%", x: "-50%", y: "-50%" }) } }]), t }(), x = function () { function t(i) { e(this, t), this.ctx = i, this.w = i.w, this.setEasingFunctions() } return a(t, [{ key: "setEasingFunctions", value: function () { var t; if (!this.w.globals.easing) { switch (this.w.config.chart.animations.easing) { case "linear": t = "-"; break; case "easein": t = "<"; break; case "easeout": t = ">"; break; case "easeinout": t = "<>"; break; case "swing": t = function (t) { var e = 1.70158; return (t -= 1) * t * ((e + 1) * t + e) + 1 }; break; case "bounce": t = function (t) { return t < 1 / 2.75 ? 7.5625 * t * t : t < 2 / 2.75 ? 7.5625 * (t -= 1.5 / 2.75) * t + .75 : t < 2.5 / 2.75 ? 7.5625 * (t -= 2.25 / 2.75) * t + .9375 : 7.5625 * (t -= 2.625 / 2.75) * t + .984375 }; break; case "elastic": t = function (t) { return t === !!t ? t : Math.pow(2, -10 * t) * Math.sin((t - .075) * (2 * Math.PI) / .3) + 1 }; break; default: t = "<>" }this.w.globals.easing = t } } }, { key: "animateLine", value: function (t, e, i, a) { t.attr(e).animate(a).attr(i) } }, { key: "animateCircleRadius", value: function (t, e, i, a, s, r) { e || (e = 0), t.attr({ r: e }).animate(a, s).attr({ r: i }).afterAll((function () { r() })) } }, { key: "animateCircle", value: function (t, e, i, a, s) { t.attr({ r: e.r, cx: e.cx, cy: e.cy }).animate(a, s).attr({ r: i.r, cx: i.cx, cy: i.cy }) } }, { key: "animateRect", value: function (t, e, i, a, s) { t.attr(e).animate(a).attr(i).afterAll((function () { return s() })) } }, { key: "animatePathsGradually", value: function (t) { var e = t.el, i = t.realIndex, a = t.j, s = t.fill, r = t.pathFrom, n = t.pathTo, o = t.speed, l = t.delay, h = this.w, c = 0; h.config.chart.animations.animateGradually.enabled && (c = h.config.chart.animations.animateGradually.delay), h.config.chart.animations.dynamicAnimation.enabled && h.globals.dataChanged && "bar" !== h.config.chart.type && (c = 0), this.morphSVG(e, i, a, "line" !== h.config.chart.type || h.globals.comboCharts ? s : "stroke", r, n, o, l * c) } }, { key: "showDelayedElements", value: function () { this.w.globals.delayedElements.forEach((function (t) { t.el.classList.remove("apexcharts-element-hidden") })) } }, { key: "animationCompleted", value: function (t) { var e = this.w; e.globals.animationEnded || (e.globals.animationEnded = !0, this.showDelayedElements(), "function" == typeof e.config.chart.events.animationEnd && e.config.chart.events.animationEnd(this.ctx, { el: t, w: e })) } }, { key: "morphSVG", value: function (t, e, i, a, s, r, n, o) { var l = this, h = this.w; s || (s = t.attr("pathFrom")), r || (r = t.attr("pathTo")); var c = function (t) { return "radar" === h.config.chart.type && (n = 1), "M 0 ".concat(h.globals.gridHeight) }; (!s || s.indexOf("undefined") > -1 || s.indexOf("NaN") > -1) && (s = c()), (!r || r.indexOf("undefined") > -1 || r.indexOf("NaN") > -1) && (r = c()), h.globals.shouldAnimate || (n = 1), t.plot(s).animate(1, h.globals.easing, o).plot(s).animate(n, h.globals.easing, o).plot(r).afterAll((function () { f.isNumber(i) ? i === h.globals.series[h.globals.maxValsInArrayIndex].length - 2 && h.globals.shouldAnimate && l.animationCompleted(t) : "none" !== a && h.globals.shouldAnimate && (!h.globals.comboCharts && e === h.globals.series.length - 1 || h.globals.comboCharts) && l.animationCompleted(t), l.showDelayedElements() })) } }]), t }(), b = function () { function t(i) { e(this, t), this.ctx = i, this.w = i.w } return a(t, [{ key: "drawLine", value: function (t, e, i, a) { var s = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : "#a8a8a8", r = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : 0, n = arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : null, o = this.w, l = o.globals.dom.Paper.line().attr({ x1: t, y1: e, x2: i, y2: a, stroke: s, "stroke-dasharray": r, "stroke-width": n }); return l } }, { key: "drawRect", value: function () { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0, e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, a = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0, s = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : 0, r = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : "#fefefe", n = arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : 1, o = arguments.length > 7 && void 0 !== arguments[7] ? arguments[7] : null, l = arguments.length > 8 && void 0 !== arguments[8] ? arguments[8] : null, h = arguments.length > 9 && void 0 !== arguments[9] ? arguments[9] : 0, c = this.w, d = c.globals.dom.Paper.rect(); return d.attr({ x: t, y: e, width: i > 0 ? i : 0, height: a > 0 ? a : 0, rx: s, ry: s, opacity: n, "stroke-width": null !== o ? o : 0, stroke: null !== l ? l : "none", "stroke-dasharray": h }), d.node.setAttribute("fill", r), d } }, { key: "drawPolygon", value: function (t) { var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "#e1e1e1", i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1, a = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : "none", s = this.w, r = s.globals.dom.Paper.polygon(t).attr({ fill: a, stroke: e, "stroke-width": i }); return r } }, { key: "drawCircle", value: function (t) { var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null, i = this.w, a = i.globals.dom.Paper.circle(2 * t); return null !== e && a.attr(e), a } }, { key: "drawPath", value: function (t) { var e = t.d, i = void 0 === e ? "" : e, a = t.stroke, s = void 0 === a ? "#a8a8a8" : a, r = t.strokeWidth, n = void 0 === r ? 1 : r, o = t.fill, l = t.fillOpacity, h = void 0 === l ? 1 : l, c = t.strokeOpacity, d = void 0 === c ? 1 : c, g = t.classes, u = t.strokeLinecap, f = void 0 === u ? null : u, p = t.strokeDashArray, x = void 0 === p ? 0 : p, b = this.w; return null === f && (f = b.config.stroke.lineCap), (i.indexOf("undefined") > -1 || i.indexOf("NaN") > -1) && (i = "M 0 ".concat(b.globals.gridHeight)), b.globals.dom.Paper.path(i).attr({ fill: o, "fill-opacity": h, stroke: s, "stroke-opacity": d, "stroke-linecap": f, "stroke-width": n, "stroke-dasharray": x, class: g }) } }, { key: "group", value: function () { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null, e = this.w, i = e.globals.dom.Paper.group(); return null !== t && i.attr(t), i } }, { key: "move", value: function (t, e) { var i = ["M", t, e].join(" "); return i } }, { key: "line", value: function (t, e) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null, a = null; return null === i ? a = ["L", t, e].join(" ") : "H" === i ? a = ["H", t].join(" ") : "V" === i && (a = ["V", e].join(" ")), a } }, { key: "curve", value: function (t, e, i, a, s, r) { var n = ["C", t, e, i, a, s, r].join(" "); return n } }, { key: "quadraticCurve", value: function (t, e, i, a) { return ["Q", t, e, i, a].join(" ") } }, { key: "arc", value: function (t, e, i, a, s, r, n) { var o = arguments.length > 7 && void 0 !== arguments[7] && arguments[7], l = "A"; o && (l = "a"); var h = [l, t, e, i, a, s, r, n].join(" "); return h } }, { key: "renderPaths", value: function (t) { var e, i = t.j, a = t.realIndex, s = t.pathFrom, r = t.pathTo, o = t.stroke, l = t.strokeWidth, h = t.strokeLinecap, c = t.fill, d = t.animationDelay, g = t.initialSpeed, u = t.dataChangeSpeed, f = t.className, b = t.shouldClipToGrid, m = void 0 === b || b, v = t.bindEventsOnPaths, y = void 0 === v || v, w = t.drawShadow, k = void 0 === w || w, A = this.w, S = new p(this.ctx), C = new x(this.ctx), L = this.w.config.chart.animations.enabled, P = L && this.w.config.chart.animations.dynamicAnimation.enabled, T = !!(L && !A.globals.resized || P && A.globals.dataChanged && A.globals.shouldAnimate); T ? e = s : (e = r, A.globals.animationEnded = !0); var z = A.config.stroke.dashArray, I = 0; I = Array.isArray(z) ? z[a] : A.config.stroke.dashArray; var M = this.drawPath({ d: e, stroke: o, strokeWidth: l, fill: c, fillOpacity: 1, classes: f, strokeLinecap: h, strokeDashArray: I }); if (M.attr("index", a), m && M.attr({ "clip-path": "url(#gridRectMask".concat(A.globals.cuid, ")") }), "none" !== A.config.states.normal.filter.type) S.getDefaultFilter(M, a); else if (A.config.chart.dropShadow.enabled && k && (!A.config.chart.dropShadow.enabledOnSeries || A.config.chart.dropShadow.enabledOnSeries && -1 !== A.config.chart.dropShadow.enabledOnSeries.indexOf(a))) { var E = A.config.chart.dropShadow; S.dropShadow(M, E, a) } y && (M.node.addEventListener("mouseenter", this.pathMouseEnter.bind(this, M)), M.node.addEventListener("mouseleave", this.pathMouseLeave.bind(this, M)), M.node.addEventListener("mousedown", this.pathMouseDown.bind(this, M))), M.attr({ pathTo: r, pathFrom: s }); var X = { el: M, j: i, realIndex: a, pathFrom: s, pathTo: r, fill: c, strokeWidth: l, delay: d }; return !L || A.globals.resized || A.globals.dataChanged ? !A.globals.resized && A.globals.dataChanged || C.showDelayedElements() : C.animatePathsGradually(n(n({}, X), {}, { speed: g })), A.globals.dataChanged && P && T && C.animatePathsGradually(n(n({}, X), {}, { speed: u })), M } }, { key: "drawPattern", value: function (t, e, i) { var a = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : "#a8a8a8", s = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : 0, r = this.w, n = r.globals.dom.Paper.pattern(e, i, (function (r) { "horizontalLines" === t ? r.line(0, 0, i, 0).stroke({ color: a, width: s + 1 }) : "verticalLines" === t ? r.line(0, 0, 0, e).stroke({ color: a, width: s + 1 }) : "slantedLines" === t ? r.line(0, 0, e, i).stroke({ color: a, width: s }) : "squares" === t ? r.rect(e, i).fill("none").stroke({ color: a, width: s }) : "circles" === t && r.circle(e).fill("none").stroke({ color: a, width: s }) })); return n } }, { key: "drawGradient", value: function (t, e, i, a, s) { var r, n = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : null, o = arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : null, l = arguments.length > 7 && void 0 !== arguments[7] ? arguments[7] : null, h = arguments.length > 8 && void 0 !== arguments[8] ? arguments[8] : 0, c = this.w; e.length < 9 && 0 === e.indexOf("#") && (e = f.hexToRgba(e, a)), i.length < 9 && 0 === i.indexOf("#") && (i = f.hexToRgba(i, s)); var d = 0, g = 1, u = 1, p = null; null !== o && (d = void 0 !== o[0] ? o[0] / 100 : 0, g = void 0 !== o[1] ? o[1] / 100 : 1, u = void 0 !== o[2] ? o[2] / 100 : 1, p = void 0 !== o[3] ? o[3] / 100 : null); var x = !("donut" !== c.config.chart.type && "pie" !== c.config.chart.type && "polarArea" !== c.config.chart.type && "bubble" !== c.config.chart.type); if (r = null === l || 0 === l.length ? c.globals.dom.Paper.gradient(x ? "radial" : "linear", (function (t) { t.at(d, e, a), t.at(g, i, s), t.at(u, i, s), null !== p && t.at(p, e, a) })) : c.globals.dom.Paper.gradient(x ? "radial" : "linear", (function (t) { (Array.isArray(l[h]) ? l[h] : l).forEach((function (e) { t.at(e.offset / 100, e.color, e.opacity) })) })), x) { var b = c.globals.gridWidth / 2, m = c.globals.gridHeight / 2; "bubble" !== c.config.chart.type ? r.attr({ gradientUnits: "userSpaceOnUse", cx: b, cy: m, r: n }) : r.attr({ cx: .5, cy: .5, r: .8, fx: .2, fy: .2 }) } else "vertical" === t ? r.from(0, 0).to(0, 1) : "diagonal" === t ? r.from(0, 0).to(1, 1) : "horizontal" === t ? r.from(0, 1).to(1, 1) : "diagonal2" === t && r.from(1, 0).to(0, 1); return r } }, { key: "drawText", value: function (t) { var e, i = t.x, a = t.y, s = t.text, r = t.textAnchor, n = t.fontSize, o = t.fontFamily, l = t.fontWeight, h = t.foreColor, c = t.opacity, d = t.cssClass, g = void 0 === d ? "" : d, u = t.isPlainText, f = void 0 === u || u, p = this.w; return void 0 === s && (s = ""), r || (r = "start"), h && h.length || (h = p.config.chart.foreColor), o = o || p.config.chart.fontFamily, l = l || "regular", (e = Array.isArray(s) ? p.globals.dom.Paper.text((function (t) { for (var e = 0; e < s.length; e++)0 === e ? t.tspan(s[e]) : t.tspan(s[e]).newLine() })) : f ? p.globals.dom.Paper.plain(s) : p.globals.dom.Paper.text((function (t) { return t.tspan(s) }))).attr({ x: i, y: a, "text-anchor": r, "dominant-baseline": "auto", "font-size": n, "font-family": o, "font-weight": l, fill: h, class: "apexcharts-text " + g }), e.node.style.fontFamily = o, e.node.style.opacity = c, e } }, { key: "drawMarker", value: function (t, e, i) { t = t || 0; var a = i.pSize || 0, s = null; if ("square" === i.shape) { var r = void 0 === i.pRadius ? a / 2 : i.pRadius; null !== e && a || (a = 0, r = 0); var n = 1.2 * a + r, o = this.drawRect(n, n, n, n, r); o.attr({ x: t - n / 2, y: e - n / 2, cx: t, cy: e, class: i.class ? i.class : "", fill: i.pointFillColor, "fill-opacity": i.pointFillOpacity ? i.pointFillOpacity : 1, stroke: i.pointStrokeColor, "stroke-width": i.pWidth ? i.pWidth : 0, "stroke-opacity": i.pointStrokeOpacity ? i.pointStrokeOpacity : 1 }), s = o } else "circle" !== i.shape && i.shape || (f.isNumber(e) || (a = 0, e = 0), s = this.drawCircle(a, { cx: t, cy: e, class: i.class ? i.class : "", stroke: i.pointStrokeColor, fill: i.pointFillColor, "fill-opacity": i.pointFillOpacity ? i.pointFillOpacity : 1, "stroke-width": i.pWidth ? i.pWidth : 0, "stroke-opacity": i.pointStrokeOpacity ? i.pointStrokeOpacity : 1 })); return s } }, { key: "pathMouseEnter", value: function (t, e) { var i = this.w, a = new p(this.ctx), s = parseInt(t.node.getAttribute("index"), 10), r = parseInt(t.node.getAttribute("j"), 10); if ("function" == typeof i.config.chart.events.dataPointMouseEnter && i.config.chart.events.dataPointMouseEnter(e, this.ctx, { seriesIndex: s, dataPointIndex: r, w: i }), this.ctx.events.fireEvent("dataPointMouseEnter", [e, this.ctx, { seriesIndex: s, dataPointIndex: r, w: i }]), ("none" === i.config.states.active.filter.type || "true" !== t.node.getAttribute("selected")) && "none" !== i.config.states.hover.filter.type && "none" !== i.config.states.active.filter.type && !i.globals.isTouchDevice) { var n = i.config.states.hover.filter; a.applyFilter(t, s, n.type, n.value) } } }, { key: "pathMouseLeave", value: function (t, e) { var i = this.w, a = new p(this.ctx), s = parseInt(t.node.getAttribute("index"), 10), r = parseInt(t.node.getAttribute("j"), 10); "function" == typeof i.config.chart.events.dataPointMouseLeave && i.config.chart.events.dataPointMouseLeave(e, this.ctx, { seriesIndex: s, dataPointIndex: r, w: i }), this.ctx.events.fireEvent("dataPointMouseLeave", [e, this.ctx, { seriesIndex: s, dataPointIndex: r, w: i }]), "none" !== i.config.states.active.filter.type && "true" === t.node.getAttribute("selected") || "none" !== i.config.states.hover.filter.type && a.getDefaultFilter(t, s) } }, { key: "pathMouseDown", value: function (t, e) { var i = this.w, a = new p(this.ctx), s = parseInt(t.node.getAttribute("index"), 10), r = parseInt(t.node.getAttribute("j"), 10), n = "false"; if ("true" === t.node.getAttribute("selected")) { if (t.node.setAttribute("selected", "false"), i.globals.selectedDataPoints[s].indexOf(r) > -1) { var o = i.globals.selectedDataPoints[s].indexOf(r); i.globals.selectedDataPoints[s].splice(o, 1) } } else { if (!i.config.states.active.allowMultipleDataPointsSelection && i.globals.selectedDataPoints.length > 0) { i.globals.selectedDataPoints = []; var l = i.globals.dom.Paper.select(".apexcharts-series path").members, h = i.globals.dom.Paper.select(".apexcharts-series circle, .apexcharts-series rect").members, c = function (t) { Array.prototype.forEach.call(t, (function (t) { t.node.setAttribute("selected", "false"), a.getDefaultFilter(t, s) })) }; c(l), c(h) } t.node.setAttribute("selected", "true"), n = "true", void 0 === i.globals.selectedDataPoints[s] && (i.globals.selectedDataPoints[s] = []), i.globals.selectedDataPoints[s].push(r) } if ("true" === n) { var d = i.config.states.active.filter; "none" !== d && a.applyFilter(t, s, d.type, d.value) } else "none" !== i.config.states.active.filter.type && a.getDefaultFilter(t, s); "function" == typeof i.config.chart.events.dataPointSelection && i.config.chart.events.dataPointSelection(e, this.ctx, { selectedDataPoints: i.globals.selectedDataPoints, seriesIndex: s, dataPointIndex: r, w: i }), e && this.ctx.events.fireEvent("dataPointSelection", [e, this.ctx, { selectedDataPoints: i.globals.selectedDataPoints, seriesIndex: s, dataPointIndex: r, w: i }]) } }, { key: "rotateAroundCenter", value: function (t) { var e = t.getBBox(); return { x: e.x + e.width / 2, y: e.y + e.height / 2 } } }, { key: "getTextRects", value: function (t, e, i, a) { var s = !(arguments.length > 4 && void 0 !== arguments[4]) || arguments[4], r = this.w, n = this.drawText({ x: -200, y: -200, text: t, textAnchor: "start", fontSize: e, fontFamily: i, foreColor: "#fff", opacity: 0 }); a && n.attr("transform", a), r.globals.dom.Paper.add(n); var o = n.bbox(); return s || (o = n.node.getBoundingClientRect()), n.remove(), { width: o.width, height: o.height } } }, { key: "placeTextWithEllipsis", value: function (t, e, i) { if ("function" == typeof t.getComputedTextLength && (t.textContent = e, e.length > 0 && t.getComputedTextLength() >= i / .8)) { for (var a = e.length - 3; a > 0; a -= 3)if (t.getSubStringLength(0, a) <= i / .8) return void (t.textContent = e.substring(0, a) + "..."); t.textContent = "." } } }], [{ key: "setAttrs", value: function (t, e) { for (var i in e) e.hasOwnProperty(i) && t.setAttribute(i, e[i]) } }]), t }(), m = function () { function t(i) { e(this, t), this.w = i.w, this.annoCtx = i } return a(t, [{ key: "setOrientations", value: function (t) { var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null, i = this.w; if ("vertical" === t.label.orientation) { var a = null !== e ? e : 0, s = i.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(a, "']")); if (null !== s) { var r = s.getBoundingClientRect(); s.setAttribute("x", parseFloat(s.getAttribute("x")) - r.height + 4), "top" === t.label.position ? s.setAttribute("y", parseFloat(s.getAttribute("y")) + r.width) : s.setAttribute("y", parseFloat(s.getAttribute("y")) - r.width); var n = this.annoCtx.graphics.rotateAroundCenter(s), o = n.x, l = n.y; s.setAttribute("transform", "rotate(-90 ".concat(o, " ").concat(l, ")")) } } } }, { key: "addBackgroundToAnno", value: function (t, e) { var i = this.w; if (!e.label.text || e.label.text && !e.label.text.trim()) return null; var a = i.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(), s = t.getBoundingClientRect(), r = e.label.style.padding.left, n = e.label.style.padding.right, o = e.label.style.padding.top, l = e.label.style.padding.bottom; "vertical" === e.label.orientation && (o = e.label.style.padding.left, l = e.label.style.padding.right, r = e.label.style.padding.top, n = e.label.style.padding.bottom); var h = s.left - a.left - r, c = s.top - a.top - o, d = this.annoCtx.graphics.drawRect(h - i.globals.barPadForNumericAxis, c, s.width + r + n, s.height + o + l, e.label.borderRadius, e.label.style.background, 1, e.label.borderWidth, e.label.borderColor, 0); return e.id && d.node.classList.add(e.id), d } }, { key: "annotationsBackground", value: function () { var t = this, e = this.w, i = function (i, a, s) { var r = e.globals.dom.baseEl.querySelector(".apexcharts-".concat(s, "-annotations .apexcharts-").concat(s, "-annotation-label[rel='").concat(a, "']")); if (r) { var n = r.parentNode, o = t.addBackgroundToAnno(r, i); o && n.insertBefore(o.node, r) } }; e.config.annotations.xaxis.map((function (t, e) { i(t, e, "xaxis") })), e.config.annotations.yaxis.map((function (t, e) { i(t, e, "yaxis") })), e.config.annotations.points.map((function (t, e) { i(t, e, "point") })) } }, { key: "getStringX", value: function (t) { var e = this.w, i = t; e.config.xaxis.convertedCatToNumeric && e.globals.categoryLabels.length && (t = e.globals.categoryLabels.indexOf(t) + 1); var a = e.globals.labels.indexOf(t), s = e.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child(" + (a + 1) + ")"); return s && (i = parseFloat(s.getAttribute("x"))), i } }]), t }(), v = function () { function t(i) { e(this, t), this.w = i.w, this.annoCtx = i, this.invertAxis = this.annoCtx.invertAxis } return a(t, [{ key: "addXaxisAnnotation", value: function (t, e, i) { var a = this.w, s = this.invertAxis ? a.globals.minY : a.globals.minX, r = this.invertAxis ? a.globals.maxY : a.globals.maxX, n = this.invertAxis ? a.globals.yRange[0] : a.globals.xRange, o = (t.x - s) / (n / a.globals.gridWidth); this.annoCtx.inversedReversedAxis && (o = (r - t.x) / (n / a.globals.gridWidth)); var l = t.label.text; "category" !== a.config.xaxis.type && !a.config.xaxis.convertedCatToNumeric || this.invertAxis || a.globals.dataFormatXNumeric || (o = this.annoCtx.helpers.getStringX(t.x)); var h = t.strokeDashArray; if (f.isNumber(o)) { if (null === t.x2 || void 0 === t.x2) { var c = this.annoCtx.graphics.drawLine(o + t.offsetX, 0 + t.offsetY, o + t.offsetX, a.globals.gridHeight + t.offsetY, t.borderColor, h, t.borderWidth); e.appendChild(c.node), t.id && c.node.classList.add(t.id) } else { var d = (t.x2 - s) / (n / a.globals.gridWidth); if (this.annoCtx.inversedReversedAxis && (d = (r - t.x2) / (n / a.globals.gridWidth)), "category" !== a.config.xaxis.type && !a.config.xaxis.convertedCatToNumeric || this.invertAxis || a.globals.dataFormatXNumeric || (d = this.annoCtx.helpers.getStringX(t.x2)), d < o) { var g = o; o = d, d = g } var u = this.annoCtx.graphics.drawRect(o + t.offsetX, 0 + t.offsetY, d - o, a.globals.gridHeight + t.offsetY, 0, t.fillColor, t.opacity, 1, t.borderColor, h); u.node.classList.add("apexcharts-annotation-rect"), u.attr("clip-path", "url(#gridRectMask".concat(a.globals.cuid, ")")), e.appendChild(u.node), t.id && u.node.classList.add(t.id) } var p = "top" === t.label.position ? 4 : a.globals.gridHeight, x = this.annoCtx.graphics.getTextRects(l, parseFloat(t.label.style.fontSize)), b = this.annoCtx.graphics.drawText({ x: o + t.label.offsetX, y: p + t.label.offsetY - ("vertical" === t.label.orientation ? "top" === t.label.position ? x.width / 2 - 12 : -x.width / 2 : 0), text: l, textAnchor: t.label.textAnchor, fontSize: t.label.style.fontSize, fontFamily: t.label.style.fontFamily, fontWeight: t.label.style.fontWeight, foreColor: t.label.style.color, cssClass: "apexcharts-xaxis-annotation-label ".concat(t.label.style.cssClass, " ").concat(t.id ? t.id : "") }); b.attr({ rel: i }), e.appendChild(b.node), this.annoCtx.helpers.setOrientations(t, i) } } }, { key: "drawXAxisAnnotations", value: function () { var t = this, e = this.w, i = this.annoCtx.graphics.group({ class: "apexcharts-xaxis-annotations" }); return e.config.annotations.xaxis.map((function (e, a) { t.addXaxisAnnotation(e, i.node, a) })), i } }]), t }(), y = function () { function t(i) { e(this, t), this.ctx = i, this.w = i.w } return a(t, [{ key: "getStackedSeriesTotals", value: function () { var t = this.w, e = []; if (0 === t.globals.series.length) return e; for (var i = 0; i < t.globals.series[t.globals.maxValsInArrayIndex].length; i++) { for (var a = 0, s = 0; s < t.globals.series.length; s++)void 0 !== t.globals.series[s][i] && (a += t.globals.series[s][i]); e.push(a) } return t.globals.stackedSeriesTotals = e, e } }, { key: "getSeriesTotalByIndex", value: function () { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null; return null === t ? this.w.config.series.reduce((function (t, e) { return t + e }), 0) : this.w.globals.series[t].reduce((function (t, e) { return t + e }), 0) } }, { key: "isSeriesNull", value: function () { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null; return 0 === (null === t ? this.w.config.series.filter((function (t) { return null !== t })) : this.w.config.series[t].data.filter((function (t) { return null !== t }))).length } }, { key: "seriesHaveSameValues", value: function (t) { return this.w.globals.series[t].every((function (t, e, i) { return t === i[0] })) } }, { key: "getCategoryLabels", value: function (t) { var e = this.w, i = t.slice(); return e.config.xaxis.convertedCatToNumeric && (i = t.map((function (t) { return e.config.xaxis.labels.formatter(t - e.globals.minX + 1) }))), i } }, { key: "getLargestSeries", value: function () { var t = this.w; t.globals.maxValsInArrayIndex = t.globals.series.map((function (t) { return t.length })).indexOf(Math.max.apply(Math, t.globals.series.map((function (t) { return t.length })))) } }, { key: "getLargestMarkerSize", value: function () { var t = this.w, e = 0; return t.globals.markers.size.forEach((function (t) { e = Math.max(e, t) })), t.globals.markers.largestSize = e, e } }, { key: "getSeriesTotals", value: function () { var t = this.w; t.globals.seriesTotals = t.globals.series.map((function (t, e) { var i = 0; if (Array.isArray(t)) for (var a = 0; a < t.length; a++)i += t[a]; else i += t; return i })) } }, { key: "getSeriesTotalsXRange", value: function (t, e) { var i = this.w; return i.globals.series.map((function (a, s) { for (var r = 0, n = 0; n < a.length; n++)i.globals.seriesX[s][n] > t && i.globals.seriesX[s][n] < e && (r += a[n]); return r })) } }, { key: "getPercentSeries", value: function () { var t = this.w; t.globals.seriesPercent = t.globals.series.map((function (e, i) { var a = []; if (Array.isArray(e)) for (var s = 0; s < e.length; s++) { var r = t.globals.stackedSeriesTotals[s], n = 0; r && (n = 100 * e[s] / r), a.push(n) } else { var o = 100 * e / t.globals.seriesTotals.reduce((function (t, e) { return t + e }), 0); a.push(o) } return a })) } }, { key: "getCalculatedRatios", value: function () { var t, e, i, a, s = this.w.globals, r = [], n = 0, o = [], l = .1, h = 0; if (s.yRange = [], s.isMultipleYAxis) for (var c = 0; c < s.minYArr.length; c++)s.yRange.push(Math.abs(s.minYArr[c] - s.maxYArr[c])), o.push(0); else s.yRange.push(Math.abs(s.minY - s.maxY)); s.xRange = Math.abs(s.maxX - s.minX), s.zRange = Math.abs(s.maxZ - s.minZ); for (var d = 0; d < s.yRange.length; d++)r.push(s.yRange[d] / s.gridHeight); if (e = s.xRange / s.gridWidth, i = Math.abs(s.initialMaxX - s.initialMinX) / s.gridWidth, t = s.yRange / s.gridWidth, a = s.xRange / s.gridHeight, (n = s.zRange / s.gridHeight * 16) || (n = 1), s.minY !== Number.MIN_VALUE && 0 !== Math.abs(s.minY) && (s.hasNegs = !0), s.isMultipleYAxis) { o = []; for (var g = 0; g < r.length; g++)o.push(-s.minYArr[g] / r[g]) } else o.push(-s.minY / r[0]), s.minY !== Number.MIN_VALUE && 0 !== Math.abs(s.minY) && (l = -s.minY / t, h = s.minX / e); return { yRatio: r, invertedYRatio: t, zRatio: n, xRatio: e, initialXRatio: i, invertedXRatio: a, baseLineInvertedY: l, baseLineY: o, baseLineX: h } } }, { key: "getLogSeries", value: function (t) { var e = this, i = this.w; return i.globals.seriesLog = t.map((function (t, a) { return i.config.yaxis[a] && i.config.yaxis[a].logarithmic ? t.map((function (t) { return null === t ? null : e.getLogVal(t, a) })) : t })), i.globals.invalidLogScale ? t : i.globals.seriesLog } }, { key: "getLogVal", value: function (t, e) { var i = this.w; return (Math.log(t) - Math.log(i.globals.minYArr[e])) / (Math.log(i.globals.maxYArr[e]) - Math.log(i.globals.minYArr[e])) } }, { key: "getLogYRatios", value: function (t) { var e = this, i = this.w, a = this.w.globals; return a.yLogRatio = t.slice(), a.logYRange = a.yRange.map((function (t, s) { if (i.config.yaxis[s] && e.w.config.yaxis[s].logarithmic) { var r, n = -Number.MAX_VALUE, o = Number.MIN_VALUE; return a.seriesLog.forEach((function (t, e) { t.forEach((function (t) { i.config.yaxis[e] && i.config.yaxis[e].logarithmic && (n = Math.max(t, n), o = Math.min(t, o)) })) })), r = Math.pow(a.yRange[s], Math.abs(o - n) / a.yRange[s]), a.yLogRatio[s] = r / a.gridHeight, r } })), a.invalidLogScale ? t.slice() : a.yLogRatio } }], [{ key: "checkComboSeries", value: function (t) { var e = !1, i = 0; return t.length && void 0 !== t[0].type && (e = !0, t.forEach((function (t) { "bar" !== t.type && "column" !== t.type && "candlestick" !== t.type || i++ }))), { comboBarCount: i, comboCharts: e } } }, { key: "extendArrayProps", value: function (t, e, i) { return e.yaxis && (e = t.extendYAxis(e, i)), e.annotations && (e.annotations.yaxis && (e = t.extendYAxisAnnotations(e)), e.annotations.xaxis && (e = t.extendXAxisAnnotations(e)), e.annotations.points && (e = t.extendPointAnnotations(e))), e } }]), t }(), w = function () { function t(i) { e(this, t), this.w = i.w, this.annoCtx = i } return a(t, [{ key: "addYaxisAnnotation", value: function (t, e, i) { var a, s = this.w, r = t.strokeDashArray, n = this._getY1Y2("y1", t), o = t.label.text; if (null === t.y2 || void 0 === t.y2) { var l = this.annoCtx.graphics.drawLine(0 + t.offsetX, n + t.offsetY, s.globals.gridWidth + t.offsetX, n + t.offsetY, t.borderColor, r, t.borderWidth); e.appendChild(l.node), t.id && l.node.classList.add(t.id) } else { if ((a = this._getY1Y2("y2", t)) > n) { var h = n; n = a, a = h } var c = this.annoCtx.graphics.drawRect(0 + t.offsetX, a + t.offsetY, s.globals.gridWidth + t.offsetX, n - a, 0, t.fillColor, t.opacity, 1, t.borderColor, r); c.node.classList.add("apexcharts-annotation-rect"), c.attr("clip-path", "url(#gridRectMask".concat(s.globals.cuid, ")")), e.appendChild(c.node), t.id && c.node.classList.add(t.id) } var d = "right" === t.label.position ? s.globals.gridWidth : 0, g = this.annoCtx.graphics.drawText({ x: d + t.label.offsetX, y: (a || n) + t.label.offsetY - 3, text: o, textAnchor: t.label.textAnchor, fontSize: t.label.style.fontSize, fontFamily: t.label.style.fontFamily, fontWeight: t.label.style.fontWeight, foreColor: t.label.style.color, cssClass: "apexcharts-yaxis-annotation-label ".concat(t.label.style.cssClass, " ").concat(t.id ? t.id : "") }); g.attr({ rel: i }), e.appendChild(g.node) } }, { key: "_getY1Y2", value: function (t, e) { var i, a = "y1" === t ? e.y : e.y2, s = this.w; if (this.annoCtx.invertAxis) { var r = s.globals.labels.indexOf(a); s.config.xaxis.convertedCatToNumeric && (r = s.globals.categoryLabels.indexOf(a)); var n = s.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child(" + (r + 1) + ")"); n && (i = parseFloat(n.getAttribute("y"))) } else { var o; if (s.config.yaxis[e.yAxisIndex].logarithmic) o = (a = new y(this.annoCtx.ctx).getLogVal(a, e.yAxisIndex)) / s.globals.yLogRatio[e.yAxisIndex]; else o = (a - s.globals.minYArr[e.yAxisIndex]) / (s.globals.yRange[e.yAxisIndex] / s.globals.gridHeight); i = s.globals.gridHeight - o, s.config.yaxis[e.yAxisIndex] && s.config.yaxis[e.yAxisIndex].reversed && (i = o) } return i } }, { key: "drawYAxisAnnotations", value: function () { var t = this, e = this.w, i = this.annoCtx.graphics.group({ class: "apexcharts-yaxis-annotations" }); return e.config.annotations.yaxis.map((function (e, a) { t.addYaxisAnnotation(e, i.node, a) })), i } }]), t }(), k = function () { function t(i) { e(this, t), this.w = i.w, this.annoCtx = i } return a(t, [{ key: "addPointAnnotation", value: function (t, e, i) { var a = this.w, s = 0, r = 0, n = 0; this.annoCtx.invertAxis && console.warn("Point annotation is not supported in horizontal bar charts."); var o, l = parseFloat(t.y); if ("string" == typeof t.x) { var h = a.globals.labels.indexOf(t.x); a.config.xaxis.convertedCatToNumeric && (h = a.globals.categoryLabels.indexOf(t.x)), s = this.annoCtx.helpers.getStringX(t.x), null === t.y && (l = a.globals.series[t.seriesIndex][h]) } else s = (t.x - a.globals.minX) / (a.globals.xRange / a.globals.gridWidth); a.config.yaxis[t.yAxisIndex].logarithmic ? o = (l = new y(this.annoCtx.ctx).getLogVal(l, t.yAxisIndex)) / a.globals.yLogRatio[t.yAxisIndex] : o = (l - a.globals.minYArr[t.yAxisIndex]) / (a.globals.yRange[t.yAxisIndex] / a.globals.gridHeight); if (r = a.globals.gridHeight - o - parseFloat(t.label.style.fontSize) - t.marker.size, n = a.globals.gridHeight - o, a.config.yaxis[t.yAxisIndex] && a.config.yaxis[t.yAxisIndex].reversed && (r = o + parseFloat(t.label.style.fontSize) + t.marker.size, n = o), f.isNumber(s)) { var c = { pSize: t.marker.size, pWidth: t.marker.strokeWidth, pointFillColor: t.marker.fillColor, pointStrokeColor: t.marker.strokeColor, shape: t.marker.shape, pRadius: t.marker.radius, class: "apexcharts-point-annotation-marker ".concat(t.marker.cssClass, " ").concat(t.id ? t.id : "") }, d = this.annoCtx.graphics.drawMarker(s + t.marker.offsetX, n + t.marker.offsetY, c); e.appendChild(d.node); var g = t.label.text ? t.label.text : "", u = this.annoCtx.graphics.drawText({ x: s + t.label.offsetX, y: r + t.label.offsetY, text: g, textAnchor: t.label.textAnchor, fontSize: t.label.style.fontSize, fontFamily: t.label.style.fontFamily, fontWeight: t.label.style.fontWeight, foreColor: t.label.style.color, cssClass: "apexcharts-point-annotation-label ".concat(t.label.style.cssClass, " ").concat(t.id ? t.id : "") }); if (u.attr({ rel: i }), e.appendChild(u.node), t.customSVG.SVG) { var p = this.annoCtx.graphics.group({ class: "apexcharts-point-annotations-custom-svg " + t.customSVG.cssClass }); p.attr({ transform: "translate(".concat(s + t.customSVG.offsetX, ", ").concat(r + t.customSVG.offsetY, ")") }), p.node.innerHTML = t.customSVG.SVG, e.appendChild(p.node) } if (t.image.path) { var x = t.image.width ? t.image.width : 20, b = t.image.height ? t.image.height : 20; this.annoCtx.addImage({ x: s + t.image.offsetX - x / 2, y: r + t.image.offsetY - b / 2, width: x, height: b, path: t.image.path, appendTo: ".apexcharts-point-annotations" }) } } } }, { key: "drawPointAnnotations", value: function () { var t = this, e = this.w, i = this.annoCtx.graphics.group({ class: "apexcharts-point-annotations" }); return e.config.annotations.points.map((function (e, a) { t.addPointAnnotation(e, i.node, a) })), i } }]), t }(); var A, S, C = { name: "en", options: { months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"], shortMonths: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"], days: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], shortDays: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], toolbar: { exportToSVG: "Download SVG", exportToPNG: "Download PNG", exportToCSV: "Download CSV", menu: "Menu", selection: "Selection", selectionZoom: "Selection Zoom", zoomIn: "Zoom In", zoomOut: "Zoom Out", pan: "Panning", reset: "Reset Zoom" } } }, L = function () { function t() { e(this, t), this.yAxis = { show: !0, showAlways: !1, showForNullSeries: !0, seriesName: void 0, opposite: !1, reversed: !1, logarithmic: !1, tickAmount: void 0, forceNiceScale: !1, max: void 0, min: void 0, floating: !1, decimalsInFloat: void 0, labels: { show: !0, minWidth: 0, maxWidth: 160, offsetX: 0, offsetY: 0, align: void 0, rotate: 0, padding: 20, style: { colors: [], fontSize: "11px", fontWeight: 400, fontFamily: void 0, cssClass: "" }, formatter: void 0 }, axisBorder: { show: !1, color: "#e0e0e0", width: 1, offsetX: 0, offsetY: 0 }, axisTicks: { show: !1, color: "#e0e0e0", width: 6, offsetX: 0, offsetY: 0 }, title: { text: void 0, rotate: -90, offsetY: 0, offsetX: 0, style: { color: void 0, fontSize: "11px", fontWeight: 900, fontFamily: void 0, cssClass: "" } }, tooltip: { enabled: !1, offsetX: 0 }, crosshairs: { show: !0, position: "front", stroke: { color: "#b6b6b6", width: 1, dashArray: 0 } } }, this.pointAnnotation = { x: 0, y: null, yAxisIndex: 0, seriesIndex: 0, marker: { size: 4, fillColor: "#fff", strokeWidth: 2, strokeColor: "#333", shape: "circle", offsetX: 0, offsetY: 0, radius: 2, cssClass: "" }, label: { borderColor: "#c2c2c2", borderWidth: 1, borderRadius: 2, text: void 0, textAnchor: "middle", offsetX: 0, offsetY: 0, style: { background: "#fff", color: void 0, fontSize: "11px", fontFamily: void 0, fontWeight: 400, cssClass: "", padding: { left: 5, right: 5, top: 2, bottom: 2 } } }, customSVG: { SVG: void 0, cssClass: void 0, offsetX: 0, offsetY: 0 }, image: { path: void 0, width: 20, height: 20, offsetX: 0, offsetY: 0 } }, this.yAxisAnnotation = { y: 0, y2: null, strokeDashArray: 1, fillColor: "#c2c2c2", borderColor: "#c2c2c2", borderWidth: 1, opacity: .3, offsetX: 0, offsetY: 0, yAxisIndex: 0, label: { borderColor: "#c2c2c2", borderWidth: 1, borderRadius: 2, text: void 0, textAnchor: "end", position: "right", offsetX: 0, offsetY: -3, style: { background: "#fff", color: void 0, fontSize: "11px", fontFamily: void 0, fontWeight: 400, cssClass: "", padding: { left: 5, right: 5, top: 2, bottom: 2 } } } }, this.xAxisAnnotation = { x: 0, x2: null, strokeDashArray: 1, fillColor: "#c2c2c2", borderColor: "#c2c2c2", borderWidth: 1, opacity: .3, offsetX: 0, offsetY: 0, label: { borderColor: "#c2c2c2", borderWidth: 1, borderRadius: 2, text: void 0, textAnchor: "middle", orientation: "vertical", position: "top", offsetX: 0, offsetY: 0, style: { background: "#fff", color: void 0, fontSize: "11px", fontFamily: void 0, fontWeight: 400, cssClass: "", padding: { left: 5, right: 5, top: 2, bottom: 2 } } } }, this.text = { x: 0, y: 0, text: "", textAnchor: "start", foreColor: void 0, fontSize: "13px", fontFamily: void 0, fontWeight: 400, appendTo: ".apexcharts-annotations", backgroundColor: "transparent", borderColor: "#c2c2c2", borderRadius: 0, borderWidth: 0, paddingLeft: 4, paddingRight: 4, paddingTop: 2, paddingBottom: 2 } } return a(t, [{ key: "init", value: function () { return { annotations: { position: "front", yaxis: [this.yAxisAnnotation], xaxis: [this.xAxisAnnotation], points: [this.pointAnnotation], texts: [], images: [], shapes: [] }, chart: { animations: { enabled: !0, easing: "easeinout", speed: 800, animateGradually: { delay: 150, enabled: !0 }, dynamicAnimation: { enabled: !0, speed: 350 } }, background: "transparent", locales: [C], defaultLocale: "en", dropShadow: { enabled: !1, enabledOnSeries: void 0, top: 2, left: 2, blur: 4, color: "#000", opacity: .35 }, events: { animationEnd: void 0, beforeMount: void 0, mounted: void 0, updated: void 0, click: void 0, mouseMove: void 0, legendClick: void 0, markerClick: void 0, selection: void 0, dataPointSelection: void 0, dataPointMouseEnter: void 0, dataPointMouseLeave: void 0, beforeZoom: void 0, zoomed: void 0, scrolled: void 0 }, foreColor: "#373d3f", fontFamily: "Helvetica, Arial, sans-serif", height: "auto", parentHeightOffset: 15, redrawOnParentResize: !0, id: void 0, group: void 0, offsetX: 0, offsetY: 0, selection: { enabled: !1, type: "x", fill: { color: "#24292e", opacity: .1 }, stroke: { width: 1, color: "#24292e", opacity: .4, dashArray: 3 }, xaxis: { min: void 0, max: void 0 }, yaxis: { min: void 0, max: void 0 } }, sparkline: { enabled: !1 }, brush: { enabled: !1, autoScaleYaxis: !0, target: void 0 }, stacked: !1, stackType: "normal", toolbar: { show: !0, offsetX: 0, offsetY: 0, tools: { download: !0, selection: !0, zoom: !0, zoomin: !0, zoomout: !0, pan: !0, reset: !0, customIcons: [] }, export: { csv: { filename: void 0, columnDelimiter: ",", headerCategory: "category", headerValue: "value", dateFormatter: function (t) { return new Date(t).toDateString() } } }, autoSelected: "zoom" }, type: "line", width: "100%", zoom: { enabled: !0, type: "x", autoScaleYaxis: !1, zoomedArea: { fill: { color: "#90CAF9", opacity: .4 }, stroke: { color: "#0D47A1", opacity: .4, width: 1 } } } }, plotOptions: { area: { fillTo: "origin" }, bar: { horizontal: !1, columnWidth: "70%", barHeight: "70%", distributed: !1, startingShape: "flat", endingShape: "flat", rangeBarOverlap: !0, colors: { ranges: [], backgroundBarColors: [], backgroundBarOpacity: 1, backgroundBarRadius: 0 }, dataLabels: { position: "top", maxItems: 100, hideOverflowingLabels: !0, orientation: "horizontal" } }, bubble: { minBubbleRadius: void 0, maxBubbleRadius: void 0 }, candlestick: { colors: { upward: "#00B746", downward: "#EF403C" }, wick: { useFillColor: !0 } }, heatmap: { radius: 2, enableShades: !0, shadeIntensity: .5, reverseNegativeShade: !1, distributed: !1, useFillColorAsStroke: !1, colorScale: { inverse: !1, ranges: [], min: void 0, max: void 0 } }, radialBar: { inverseOrder: !1, startAngle: 0, endAngle: 360, offsetX: 0, offsetY: 0, hollow: { margin: 5, size: "50%", background: "transparent", image: void 0, imageWidth: 150, imageHeight: 150, imageOffsetX: 0, imageOffsetY: 0, imageClipped: !0, position: "front", dropShadow: { enabled: !1, top: 0, left: 0, blur: 3, color: "#000", opacity: .5 } }, track: { show: !0, startAngle: void 0, endAngle: void 0, background: "#f2f2f2", strokeWidth: "97%", opacity: 1, margin: 5, dropShadow: { enabled: !1, top: 0, left: 0, blur: 3, color: "#000", opacity: .5 } }, dataLabels: { show: !0, name: { show: !0, fontSize: "16px", fontFamily: void 0, fontWeight: 600, color: void 0, offsetY: 0, formatter: function (t) { return t } }, value: { show: !0, fontSize: "14px", fontFamily: void 0, fontWeight: 400, color: void 0, offsetY: 16, formatter: function (t) { return t + "%" } }, total: { show: !1, label: "Total", fontSize: "16px", fontWeight: 600, fontFamily: void 0, color: void 0, formatter: function (t) { return t.globals.seriesTotals.reduce((function (t, e) { return t + e }), 0) / t.globals.series.length + "%" } } } }, pie: { customScale: 1, offsetX: 0, offsetY: 0, startAngle: 0, expandOnClick: !0, dataLabels: { offset: 0, minAngleToShowLabel: 10 }, donut: { size: "65%", background: "transparent", labels: { show: !1, name: { show: !0, fontSize: "16px", fontFamily: void 0, fontWeight: 600, color: void 0, offsetY: -10, formatter: function (t) { return t } }, value: { show: !0, fontSize: "20px", fontFamily: void 0, fontWeight: 400, color: void 0, offsetY: 10, formatter: function (t) { return t } }, total: { show: !1, showAlways: !1, label: "Total", fontSize: "16px", fontWeight: 400, fontFamily: void 0, color: void 0, formatter: function (t) { return t.globals.seriesTotals.reduce((function (t, e) { return t + e }), 0) } } } } }, polarArea: { rings: { strokeWidth: 1, strokeColor: "#e8e8e8" } }, radar: { size: void 0, offsetX: 0, offsetY: 0, polygons: { strokeWidth: 1, strokeColors: "#e8e8e8", connectorColors: "#e8e8e8", fill: { colors: void 0 } } } }, colors: void 0, dataLabels: { enabled: !0, enabledOnSeries: void 0, formatter: function (t) { return null !== t ? t : "" }, textAnchor: "middle", distributed: !1, offsetX: 0, offsetY: 0, style: { fontSize: "12px", fontFamily: void 0, fontWeight: 600, colors: void 0 }, background: { enabled: !0, foreColor: "#fff", borderRadius: 2, padding: 4, opacity: .9, borderWidth: 1, borderColor: "#fff", dropShadow: { enabled: !1, top: 1, left: 1, blur: 1, color: "#000", opacity: .45 } }, dropShadow: { enabled: !1, top: 1, left: 1, blur: 1, color: "#000", opacity: .45 } }, fill: { type: "solid", colors: void 0, opacity: .85, gradient: { shade: "dark", type: "horizontal", shadeIntensity: .5, gradientToColors: void 0, inverseColors: !0, opacityFrom: 1, opacityTo: 1, stops: [0, 50, 100], colorStops: [] }, image: { src: [], width: void 0, height: void 0 }, pattern: { style: "squares", width: 6, height: 6, strokeWidth: 2 } }, grid: { show: !0, borderColor: "#e0e0e0", strokeDashArray: 0, position: "back", xaxis: { lines: { show: !1 } }, yaxis: { lines: { show: !0 } }, row: { colors: void 0, opacity: .5 }, column: { colors: void 0, opacity: .5 }, padding: { top: 0, right: 10, bottom: 0, left: 12 } }, labels: [], legend: { show: !0, showForSingleSeries: !1, showForNullSeries: !0, showForZeroSeries: !0, floating: !1, position: "bottom", horizontalAlign: "center", inverseOrder: !1, fontSize: "12px", fontFamily: void 0, fontWeight: 400, width: void 0, height: void 0, formatter: void 0, tooltipHoverFormatter: void 0, offsetX: -20, offsetY: 4, labels: { colors: void 0, useSeriesColors: !1 }, markers: { width: 12, height: 12, strokeWidth: 0, fillColors: void 0, strokeColor: "#fff", radius: 12, customHTML: void 0, offsetX: 0, offsetY: 0, onClick: void 0 }, itemMargin: { horizontal: 5, vertical: 2 }, onItemClick: { toggleDataSeries: !0 }, onItemHover: { highlightDataSeries: !0 } }, markers: { discrete: [], size: 0, colors: void 0, strokeColors: "#fff", strokeWidth: 2, strokeOpacity: .9, strokeDashArray: 0, fillOpacity: 1, shape: "circle", radius: 2, offsetX: 0, offsetY: 0, onClick: void 0, onDblClick: void 0, showNullDataPoints: !0, hover: { size: void 0, sizeOffset: 3 } }, noData: { text: void 0, align: "center", verticalAlign: "middle", offsetX: 0, offsetY: 0, style: { color: void 0, fontSize: "14px", fontFamily: void 0 } }, responsive: [], series: void 0, states: { normal: { filter: { type: "none", value: 0 } }, hover: { filter: { type: "lighten", value: .15 } }, active: { allowMultipleDataPointsSelection: !1, filter: { type: "darken", value: .65 } } }, title: { text: void 0, align: "left", margin: 5, offsetX: 0, offsetY: 0, floating: !1, style: { fontSize: "14px", fontWeight: 900, fontFamily: void 0, color: void 0 } }, subtitle: { text: void 0, align: "left", margin: 5, offsetX: 0, offsetY: 30, floating: !1, style: { fontSize: "12px", fontWeight: 400, fontFamily: void 0, color: void 0 } }, stroke: { show: !0, curve: "smooth", lineCap: "butt", width: 2, colors: void 0, dashArray: 0 }, tooltip: { enabled: !0, enabledOnSeries: void 0, shared: !0, followCursor: !1, intersect: !1, inverseOrder: !1, custom: void 0, fillSeriesColor: !1, theme: "light", style: { fontSize: "12px", fontFamily: void 0 }, onDatasetHover: { highlightDataSeries: !1 }, x: { show: !0, format: "dd MMM", formatter: void 0 }, y: { formatter: void 0, title: { formatter: function (t) { return t + ": " } } }, z: { formatter: void 0, title: "Size: " }, marker: { show: !0, fillColors: void 0 }, items: { display: "flex" }, fixed: { enabled: !1, position: "topRight", offsetX: 0, offsetY: 0 } }, xaxis: { type: "category", categories: [], convertedCatToNumeric: !1, sorted: !1, offsetX: 0, offsetY: 0, labels: { show: !0, rotate: -45, rotateAlways: !1, hideOverlappingLabels: !0, trim: !1, minHeight: void 0, maxHeight: 120, showDuplicates: !0, style: { colors: [], fontSize: "12px", fontWeight: 400, fontFamily: void 0, cssClass: "" }, offsetX: 0, offsetY: 0, format: void 0, formatter: void 0, datetimeUTC: !0, datetimeFormatter: { year: "yyyy", month: "MMM 'yy", day: "dd MMM", hour: "HH:mm", minute: "HH:mm:ss" } }, axisBorder: { show: !0, color: "#e0e0e0", width: "100%", height: 1, offsetX: 0, offsetY: 0 }, axisTicks: { show: !0, color: "#e0e0e0", height: 6, offsetX: 0, offsetY: 0 }, tickAmount: void 0, tickPlacement: "on", min: void 0, max: void 0, range: void 0, floating: !1, position: "bottom", title: { text: void 0, offsetX: 0, offsetY: 0, style: { color: void 0, fontSize: "12px", fontWeight: 900, fontFamily: void 0, cssClass: "" } }, crosshairs: { show: !0, width: 1, position: "back", opacity: .9, stroke: { color: "#b6b6b6", width: 1, dashArray: 3 }, fill: { type: "solid", color: "#B1B9C4", gradient: { colorFrom: "#D8E3F0", colorTo: "#BED1E6", stops: [0, 100], opacityFrom: .4, opacityTo: .5 } }, dropShadow: { enabled: !1, left: 0, top: 0, blur: 1, opacity: .4 } }, tooltip: { enabled: !0, offsetY: 0, formatter: void 0, style: { fontSize: "12px", fontFamily: void 0 } } }, yaxis: this.yAxis, theme: { mode: "light", palette: "palette1", monochrome: { enabled: !1, color: "#008FFB", shadeTo: "light", shadeIntensity: .65 } } } } }]), t }(), P = function () { function t(i) { e(this, t), this.ctx = i, this.w = i.w, this.graphics = new b(this.ctx), this.w.globals.isBarHorizontal && (this.invertAxis = !0), this.helpers = new m(this), this.xAxisAnnotations = new v(this), this.yAxisAnnotations = new w(this), this.pointsAnnotations = new k(this), this.w.globals.isBarHorizontal && this.w.config.yaxis[0].reversed && (this.inversedReversedAxis = !0), this.xDivision = this.w.globals.gridWidth / this.w.globals.dataPoints } return a(t, [{ key: "drawAxesAnnotations", value: function () { var t = this.w; if (t.globals.axisCharts) { for (var e = this.yAxisAnnotations.drawYAxisAnnotations(), i = this.xAxisAnnotations.drawXAxisAnnotations(), a = this.pointsAnnotations.drawPointAnnotations(), s = t.config.chart.animations.enabled, r = [e, i, a], n = [i.node, e.node, a.node], o = 0; o < 3; o++)t.globals.dom.elGraphical.add(r[o]), !s || t.globals.resized || t.globals.dataChanged || "scatter" !== t.config.chart.type && "bubble" !== t.config.chart.type && t.globals.dataPoints > 1 && n[o].classList.add("apexcharts-element-hidden"), t.globals.delayedElements.push({ el: n[o], index: 0 }); this.helpers.annotationsBackground() } } }, { key: "drawImageAnnos", value: function () { var t = this; this.w.config.annotations.images.map((function (e, i) { t.addImage(e, i) })) } }, { key: "drawTextAnnos", value: function () { var t = this; this.w.config.annotations.texts.map((function (e, i) { t.addText(e, i) })) } }, { key: "addXaxisAnnotation", value: function (t, e, i) { this.xAxisAnnotations.addXaxisAnnotation(t, e, i) } }, { key: "addYaxisAnnotation", value: function (t, e, i) { this.yAxisAnnotations.addYaxisAnnotation(t, e, i) } }, { key: "addPointAnnotation", value: function (t, e, i) { this.pointsAnnotations.addPointAnnotation(t, e, i) } }, { key: "addText", value: function (t, e) { var i = t.x, a = t.y, s = t.text, r = t.textAnchor, n = t.foreColor, o = t.fontSize, l = t.fontFamily, h = t.fontWeight, c = t.cssClass, d = t.backgroundColor, g = t.borderWidth, u = t.strokeDashArray, f = t.borderRadius, p = t.borderColor, x = t.appendTo, b = void 0 === x ? ".apexcharts-annotations" : x, m = t.paddingLeft, v = void 0 === m ? 4 : m, y = t.paddingRight, w = void 0 === y ? 4 : y, k = t.paddingBottom, A = void 0 === k ? 2 : k, S = t.paddingTop, C = void 0 === S ? 2 : S, L = this.w, P = this.graphics.drawText({ x: i, y: a, text: s, textAnchor: r || "start", fontSize: o || "12px", fontWeight: h || "regular", fontFamily: l || L.config.chart.fontFamily, foreColor: n || L.config.chart.foreColor, cssClass: c }), T = L.globals.dom.baseEl.querySelector(b); T && T.appendChild(P.node); var z = P.bbox(); if (s) { var I = this.graphics.drawRect(z.x - v, z.y - C, z.width + v + w, z.height + A + C, f, d || "transparent", 1, g, p, u); T.insertBefore(I.node, P.node) } } }, { key: "addImage", value: function (t, e) { var i = this.w, a = t.path, s = t.x, r = void 0 === s ? 0 : s, n = t.y, o = void 0 === n ? 0 : n, l = t.width, h = void 0 === l ? 20 : l, c = t.height, d = void 0 === c ? 20 : c, g = t.appendTo, u = void 0 === g ? ".apexcharts-annotations" : g, f = i.globals.dom.Paper.image(a); f.size(h, d).move(r, o); var p = i.globals.dom.baseEl.querySelector(u); p && p.appendChild(f.node) } }, { key: "addXaxisAnnotationExternal", value: function (t, e, i) { return this.addAnnotationExternal({ params: t, pushToMemory: e, context: i, type: "xaxis", contextMethod: i.addXaxisAnnotation }), i } }, { key: "addYaxisAnnotationExternal", value: function (t, e, i) { return this.addAnnotationExternal({ params: t, pushToMemory: e, context: i, type: "yaxis", contextMethod: i.addYaxisAnnotation }), i } }, { key: "addPointAnnotationExternal", value: function (t, e, i) { return void 0 === this.invertAxis && (this.invertAxis = i.w.globals.isBarHorizontal), this.addAnnotationExternal({ params: t, pushToMemory: e, context: i, type: "point", contextMethod: i.addPointAnnotation }), i } }, { key: "addAnnotationExternal", value: function (t) { var e = t.params, i = t.pushToMemory, a = t.context, s = t.type, r = t.contextMethod, n = a, o = n.w, l = o.globals.dom.baseEl.querySelector(".apexcharts-".concat(s, "-annotations")), h = l.childNodes.length + 1, c = new L, d = Object.assign({}, "xaxis" === s ? c.xAxisAnnotation : "yaxis" === s ? c.yAxisAnnotation : c.pointAnnotation), g = f.extend(d, e); switch (s) { case "xaxis": this.addXaxisAnnotation(g, l, h); break; case "yaxis": this.addYaxisAnnotation(g, l, h); break; case "point": this.addPointAnnotation(g, l, h) }var u = o.globals.dom.baseEl.querySelector(".apexcharts-".concat(s, "-annotations .apexcharts-").concat(s, "-annotation-label[rel='").concat(h, "']")), p = this.helpers.addBackgroundToAnno(u, g); return p && l.insertBefore(p.node, u), i && o.globals.memory.methodsToExec.push({ context: n, id: g.id ? g.id : f.randomId(), method: r, label: "addAnnotation", params: e }), a } }, { key: "clearAnnotations", value: function (t) { var e = t.w, i = e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations"); e.globals.memory.methodsToExec.map((function (t, i) { "addText" !== t.label && "addAnnotation" !== t.label || e.globals.memory.methodsToExec.splice(i, 1) })), i = f.listToArray(i), Array.prototype.forEach.call(i, (function (t) { for (; t.firstChild;)t.removeChild(t.firstChild) })) } }, { key: "removeAnnotation", value: function (t, e) { var i = t.w, a = i.globals.dom.baseEl.querySelectorAll(".".concat(e)); a && (i.globals.memory.methodsToExec.map((function (t, a) { t.id === e && i.globals.memory.methodsToExec.splice(a, 1) })), Array.prototype.forEach.call(a, (function (t) { t.parentElement.removeChild(t) }))) } }]), t }(), T = function () { function t(i) { e(this, t), this.ctx = i, this.w = i.w, this.opts = null, this.seriesIndex = 0 } return a(t, [{ key: "clippedImgArea", value: function (t) { var e = this.w, i = e.config, a = parseInt(e.globals.gridWidth, 10), s = parseInt(e.globals.gridHeight, 10), r = a > s ? a : s, n = t.image, o = 0, l = 0; void 0 === t.width && void 0 === t.height ? void 0 !== i.fill.image.width && void 0 !== i.fill.image.height ? (o = i.fill.image.width + 1, l = i.fill.image.height) : (o = r + 1, l = r) : (o = t.width, l = t.height); var h = document.createElementNS(e.globals.SVGNS, "pattern"); b.setAttrs(h, { id: t.patternID, patternUnits: t.patternUnits ? t.patternUnits : "userSpaceOnUse", width: o + "px", height: l + "px" }); var c = document.createElementNS(e.globals.SVGNS, "image"); h.appendChild(c), c.setAttributeNS(window.SVG.xlink, "href", n), b.setAttrs(c, { x: 0, y: 0, preserveAspectRatio: "none", width: o + "px", height: l + "px" }), c.style.opacity = t.opacity, e.globals.dom.elDefs.node.appendChild(h) } }, { key: "getSeriesIndex", value: function (t) { var e = this.w; return ("bar" === e.config.chart.type || "rangeBar" === e.config.chart.type) && e.config.plotOptions.bar.distributed || "heatmap" === e.config.chart.type ? this.seriesIndex = t.seriesNumber : this.seriesIndex = t.seriesNumber % e.globals.series.length, this.seriesIndex } }, { key: "fillPath", value: function (t) { var e = this.w; this.opts = t; var i, a, s, r = this.w.config; this.seriesIndex = this.getSeriesIndex(t); var n = this.getFillColors()[this.seriesIndex]; void 0 !== e.globals.seriesColors[this.seriesIndex] && (n = e.globals.seriesColors[this.seriesIndex]), "function" == typeof n && (n = n({ seriesIndex: this.seriesIndex, dataPointIndex: t.dataPointIndex, value: t.value, w: e })); var o = this.getFillType(this.seriesIndex), l = Array.isArray(r.fill.opacity) ? r.fill.opacity[this.seriesIndex] : r.fill.opacity, h = n; if (t.color && (n = t.color), -1 === n.indexOf("rgb") ? n.length < 9 && (h = f.hexToRgba(n, l)) : n.indexOf("rgba") > -1 && (l = f.getOpacityFromRGBA(n)), t.opacity && (l = t.opacity), "pattern" === o && (a = this.handlePatternFill(a, n, l, h)), "gradient" === o && (s = this.handleGradientFill(n, l, this.seriesIndex)), "image" === o) { var c = r.fill.image.src, d = t.patternID ? t.patternID : ""; this.clippedImgArea({ opacity: l, image: Array.isArray(c) ? t.seriesNumber < c.length ? c[t.seriesNumber] : c[0] : c, width: t.width ? t.width : void 0, height: t.height ? t.height : void 0, patternUnits: t.patternUnits, patternID: "pattern".concat(e.globals.cuid).concat(t.seriesNumber + 1).concat(d) }), i = "url(#pattern".concat(e.globals.cuid).concat(t.seriesNumber + 1).concat(d, ")") } else i = "gradient" === o ? s : "pattern" === o ? a : h; return t.solid && (i = h), i } }, { key: "getFillType", value: function (t) { var e = this.w; return Array.isArray(e.config.fill.type) ? e.config.fill.type[t] : e.config.fill.type } }, { key: "getFillColors", value: function () { var t = this.w, e = t.config, i = this.opts, a = []; return t.globals.comboCharts ? "line" === t.config.series[this.seriesIndex].type ? Array.isArray(t.globals.stroke.colors) ? a = t.globals.stroke.colors : a.push(t.globals.stroke.colors) : Array.isArray(t.globals.fill.colors) ? a = t.globals.fill.colors : a.push(t.globals.fill.colors) : "line" === e.chart.type ? Array.isArray(t.globals.stroke.colors) ? a = t.globals.stroke.colors : a.push(t.globals.stroke.colors) : Array.isArray(t.globals.fill.colors) ? a = t.globals.fill.colors : a.push(t.globals.fill.colors), void 0 !== i.fillColors && (a = [], Array.isArray(i.fillColors) ? a = i.fillColors.slice() : a.push(i.fillColors)), a } }, { key: "handlePatternFill", value: function (t, e, i, a) { var s = this.w.config, r = this.opts, n = new b(this.ctx), o = void 0 === s.fill.pattern.strokeWidth ? Array.isArray(s.stroke.width) ? s.stroke.width[this.seriesIndex] : s.stroke.width : Array.isArray(s.fill.pattern.strokeWidth) ? s.fill.pattern.strokeWidth[this.seriesIndex] : s.fill.pattern.strokeWidth, l = e; Array.isArray(s.fill.pattern.style) ? t = void 0 !== s.fill.pattern.style[r.seriesNumber] ? n.drawPattern(s.fill.pattern.style[r.seriesNumber], s.fill.pattern.width, s.fill.pattern.height, l, o, i) : a : t = n.drawPattern(s.fill.pattern.style, s.fill.pattern.width, s.fill.pattern.height, l, o, i); return t } }, { key: "handleGradientFill", value: function (t, e, i) { var a, s = this.w.config, r = this.opts, n = new b(this.ctx), o = new f, l = s.fill.gradient.type, h = t, c = void 0 === s.fill.gradient.opacityFrom ? e : Array.isArray(s.fill.gradient.opacityFrom) ? s.fill.gradient.opacityFrom[i] : s.fill.gradient.opacityFrom; h.indexOf("rgba") > -1 && (c = f.getOpacityFromRGBA(h)); var d = void 0 === s.fill.gradient.opacityTo ? e : Array.isArray(s.fill.gradient.opacityTo) ? s.fill.gradient.opacityTo[i] : s.fill.gradient.opacityTo; if (void 0 === s.fill.gradient.gradientToColors || 0 === s.fill.gradient.gradientToColors.length) a = "dark" === s.fill.gradient.shade ? o.shadeColor(-1 * parseFloat(s.fill.gradient.shadeIntensity), t.indexOf("rgb") > -1 ? f.rgb2hex(t) : t) : o.shadeColor(parseFloat(s.fill.gradient.shadeIntensity), t.indexOf("rgb") > -1 ? f.rgb2hex(t) : t); else { var g = s.fill.gradient.gradientToColors[r.seriesNumber]; a = g, g.indexOf("rgba") > -1 && (d = f.getOpacityFromRGBA(g)) } if (s.fill.gradient.inverseColors) { var u = h; h = a, a = u } return h.indexOf("rgb") > -1 && (h = f.rgb2hex(h)), a.indexOf("rgb") > -1 && (a = f.rgb2hex(a)), n.drawGradient(l, h, a, c, d, r.size, s.fill.gradient.stops, s.fill.gradient.colorStops, i) } }]), t }(), z = function () { function t(i, a) { e(this, t), this.ctx = i, this.w = i.w } return a(t, [{ key: "setGlobalMarkerSize", value: function () { var t = this.w; if (t.globals.markers.size = Array.isArray(t.config.markers.size) ? t.config.markers.size : [t.config.markers.size], t.globals.markers.size.length > 0) { if (t.globals.markers.size.length < t.globals.series.length + 1) for (var e = 0; e <= t.globals.series.length; e++)void 0 === t.globals.markers.size[e] && t.globals.markers.size.push(t.globals.markers.size[0]) } else t.globals.markers.size = t.config.series.map((function (e) { return t.config.markers.size })) } }, { key: "plotChartMarkers", value: function (t, e, i, a) { var s, r = arguments.length > 4 && void 0 !== arguments[4] && arguments[4], n = this.w, o = e, l = t, h = null, c = new b(this.ctx); if ((n.globals.markers.size[e] > 0 || r) && (h = c.group({ class: r ? "" : "apexcharts-series-markers" })).attr("clip-path", "url(#gridRectMarkerMask".concat(n.globals.cuid, ")")), Array.isArray(l.x)) for (var d = 0; d < l.x.length; d++) { var g = i; 1 === i && 0 === d && (g = 0), 1 === i && 1 === d && (g = 1); var u = "apexcharts-marker"; "line" !== n.config.chart.type && "area" !== n.config.chart.type || n.globals.comboCharts || n.config.tooltip.intersect || (u += " no-pointer-events"); var x = Array.isArray(n.config.markers.size) ? n.globals.markers.size[e] > 0 : n.config.markers.size > 0; if (x || r) { f.isNumber(l.y[d]) ? u += " w".concat(f.randomId()) : u = "apexcharts-nullpoint"; var m = this.getMarkerConfig(u, e, g); n.config.series[o].data[g] && (n.config.series[o].data[g].fillColor && (m.pointFillColor = n.config.series[o].data[g].fillColor), n.config.series[o].data[g].strokeColor && (m.pointStrokeColor = n.config.series[o].data[g].strokeColor)), a && (m.pSize = a), (s = c.drawMarker(l.x[d], l.y[d], m)).attr("rel", g), s.attr("j", g), s.attr("index", e), s.node.setAttribute("default-marker-size", m.pSize); var v = new p(this.ctx); v.setSelectionFilter(s, e, g), this.addEvents(s), h && h.add(s) } else void 0 === n.globals.pointsArray[e] && (n.globals.pointsArray[e] = []), n.globals.pointsArray[e].push([l.x[d], l.y[d]]) } return h } }, { key: "getMarkerConfig", value: function (t, e) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null, a = this.w, s = this.getMarkerStyle(e), r = a.globals.markers.size[e], n = a.config.markers; return null !== i && n.discrete.length && n.discrete.map((function (t) { t.seriesIndex === e && t.dataPointIndex === i && (s.pointStrokeColor = t.strokeColor, s.pointFillColor = t.fillColor, r = t.size) })), { pSize: r, pRadius: n.radius, pWidth: Array.isArray(n.strokeWidth) ? n.strokeWidth[e] : n.strokeWidth, pointStrokeColor: s.pointStrokeColor, pointFillColor: s.pointFillColor, shape: Array.isArray(n.shape) ? n.shape[e] : n.shape, class: t, pointStrokeOpacity: Array.isArray(n.strokeOpacity) ? n.strokeOpacity[e] : n.strokeOpacity, pointStrokeDashArray: Array.isArray(n.strokeDashArray) ? n.strokeDashArray[e] : n.strokeDashArray, pointFillOpacity: Array.isArray(n.fillOpacity) ? n.fillOpacity[e] : n.fillOpacity, seriesIndex: e } } }, { key: "addEvents", value: function (t) { var e = this.w, i = new b(this.ctx); t.node.addEventListener("mouseenter", i.pathMouseEnter.bind(this.ctx, t)), t.node.addEventListener("mouseleave", i.pathMouseLeave.bind(this.ctx, t)), t.node.addEventListener("mousedown", i.pathMouseDown.bind(this.ctx, t)), t.node.addEventListener("click", e.config.markers.onClick), t.node.addEventListener("dblclick", e.config.markers.onDblClick), t.node.addEventListener("touchstart", i.pathMouseDown.bind(this.ctx, t), { passive: !0 }) } }, { key: "getMarkerStyle", value: function (t) { var e = this.w, i = e.globals.markers.colors, a = e.config.markers.strokeColor || e.config.markers.strokeColors; return { pointStrokeColor: Array.isArray(a) ? a[t] : a, pointFillColor: Array.isArray(i) ? i[t] : i } } }]), t }(), I = function () { function t(i) { e(this, t), this.ctx = i, this.w = i.w, this.initialAnim = this.w.config.chart.animations.enabled, this.dynamicAnim = this.initialAnim && this.w.config.chart.animations.dynamicAnimation.enabled } return a(t, [{ key: "draw", value: function (t, e, i) { var a = this.w, s = new b(this.ctx), r = i.realIndex, n = i.pointsPos, o = i.zRatio, l = i.elParent, h = s.group({ class: "apexcharts-series-markers apexcharts-series-".concat(a.config.chart.type) }); if (h.attr("clip-path", "url(#gridRectMarkerMask".concat(a.globals.cuid, ")")), Array.isArray(n.x)) for (var c = 0; c < n.x.length; c++) { var d = e + 1, g = !0; 0 === e && 0 === c && (d = 0), 0 === e && 1 === c && (d = 1); var u = 0, f = a.globals.markers.size[r]; if (o !== 1 / 0) { f = a.globals.seriesZ[r][d] / o; var p = a.config.plotOptions.bubble; p.minBubbleRadius && f < p.minBubbleRadius && (f = p.minBubbleRadius), p.maxBubbleRadius && f > p.maxBubbleRadius && (f = p.maxBubbleRadius) } a.config.chart.animations.enabled || (u = f); var x = n.x[c], m = n.y[c]; if (u = u || 0, null !== m && void 0 !== a.globals.series[r][d] || (g = !1), g) { var v = this.drawPoint(x, m, u, f, r, d, e); h.add(v) } l.add(h) } } }, { key: "drawPoint", value: function (t, e, i, a, s, r, n) { var o = this.w, l = s, h = new x(this.ctx), c = new p(this.ctx), d = new T(this.ctx), g = new z(this.ctx), u = new b(this.ctx), f = g.getMarkerConfig("apexcharts-marker", l), m = d.fillPath({ seriesNumber: s, dataPointIndex: r, patternUnits: "objectBoundingBox", value: o.globals.series[s][n] }), v = u.drawCircle(i); if (o.config.series[l].data[r] && o.config.series[l].data[r].fillColor && (m = o.config.series[l].data[r].fillColor), v.attr({ cx: t, cy: e, fill: m, stroke: f.pointStrokeColor, r: a, "stroke-width": f.pWidth, "stroke-dasharray": f.pointStrokeDashArray, "stroke-opacity": f.pointStrokeOpacity }), o.config.chart.dropShadow.enabled) { var y = o.config.chart.dropShadow; c.dropShadow(v, y, s) } if (this.initialAnim && !o.globals.dataChanged && !o.globals.resized) { var w = o.config.chart.animations.speed; h.animateCircleRadius(v, 0, a, w, o.globals.easing, (function () { window.setTimeout((function () { h.animationCompleted(v) }), 100) })) } if (o.globals.dataChanged) if (this.dynamicAnim) { var k, A, S, C, L = o.config.chart.animations.dynamicAnimation.speed; null != (C = o.globals.previousPaths[s] && o.globals.previousPaths[s][n]) && (k = C.x, A = C.y, S = void 0 !== C.r ? C.r : a); for (var P = 0; P < o.globals.collapsedSeries.length; P++)o.globals.collapsedSeries[P].index === s && (L = 1, a = 0); 0 === t && 0 === e && (a = 0), h.animateCircle(v, { cx: k, cy: A, r: S }, { cx: t, cy: e, r: a }, L, o.globals.easing) } else v.attr({ r: a }); return v.attr({ rel: r, j: r, index: s, "default-marker-size": a }), c.setSelectionFilter(v, s, r), g.addEvents(v), v.node.classList.add("apexcharts-marker"), v } }, { key: "centerTextInBubble", value: function (t) { var e = this.w; return { y: t += parseInt(e.config.dataLabels.style.fontSize, 10) / 4 } } }]), t }(), M = function () { function t(i) { e(this, t), this.ctx = i, this.w = i.w } return a(t, [{ key: "dataLabelsCorrection", value: function (t, e, i, a, s, r, n) { var o = this.w, l = !1, h = new b(this.ctx).getTextRects(i, n), c = h.width, d = h.height; void 0 === o.globals.dataLabelsRects[a] && (o.globals.dataLabelsRects[a] = []), o.globals.dataLabelsRects[a].push({ x: t, y: e, width: c, height: d }); var g = o.globals.dataLabelsRects[a].length - 2, u = void 0 !== o.globals.lastDrawnDataLabelsIndexes[a] ? o.globals.lastDrawnDataLabelsIndexes[a][o.globals.lastDrawnDataLabelsIndexes[a].length - 1] : 0; if (void 0 !== o.globals.dataLabelsRects[a][g]) { var f = o.globals.dataLabelsRects[a][u]; (t > f.x + f.width + 2 || e > f.y + f.height + 2 || t + c < f.x) && (l = !0) } return (0 === s || r) && (l = !0), { x: t, y: e, textRects: h, drawnextLabel: l } } }, { key: "drawDataLabel", value: function (t, e, i) { var a = this, s = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : 2, r = this.w, n = new b(this.ctx), o = r.config.dataLabels, l = 0, h = 0, c = i, d = null; if (!o.enabled || !Array.isArray(t.x)) return d; d = n.group({ class: "apexcharts-data-labels" }); for (var g = 0; g < t.x.length; g++)if (l = t.x[g] + o.offsetX, h = t.y[g] + o.offsetY + s, !isNaN(l)) { 1 === i && 0 === g && (c = 0), 1 === i && 1 === g && (c = 1); var u = r.globals.series[e][c], f = "", p = function (t) { return r.config.dataLabels.formatter(t, { ctx: a.ctx, seriesIndex: e, dataPointIndex: c, w: r }) }; if ("bubble" === r.config.chart.type) { f = p(u = r.globals.seriesZ[e][c]), h = t.y[g]; var x = new I(this.ctx), m = x.centerTextInBubble(h, e, c); h = m.y } else void 0 !== u && (f = p(u)); this.plotDataLabelsText({ x: l, y: h, text: f, i: e, j: c, parent: d, offsetCorrection: !0, dataLabelsConfig: r.config.dataLabels }) } return d } }, { key: "plotDataLabelsText", value: function (t) { var e = this.w, i = new b(this.ctx), a = t.x, s = t.y, r = t.i, n = t.j, o = t.text, l = t.textAnchor, h = t.parent, c = t.dataLabelsConfig, d = t.color, g = t.alwaysDrawDataLabel, u = t.offsetCorrection; if (!(Array.isArray(e.config.dataLabels.enabledOnSeries) && e.config.dataLabels.enabledOnSeries.indexOf(r) < 0)) { var f = { x: a, y: s, drawnextLabel: !0 }; u && (f = this.dataLabelsCorrection(a, s, o, r, n, g, parseInt(c.style.fontSize, 10))), e.globals.zoomed || (a = f.x, s = f.y), f.textRects && (a + f.textRects.width < -20 || a > e.globals.gridWidth + 20) && (o = ""); var x = e.globals.dataLabels.style.colors[r]; (("bar" === e.config.chart.type || "rangeBar" === e.config.chart.type) && e.config.plotOptions.bar.distributed || e.config.dataLabels.distributed) && (x = e.globals.dataLabels.style.colors[n]), d && (x = d); var m = c.offsetX, v = c.offsetY; if ("bar" !== e.config.chart.type && "rangeBar" !== e.config.chart.type || (m = 0, v = 0), f.drawnextLabel) { var y = i.drawText({ width: 100, height: parseInt(c.style.fontSize, 10), x: a + m, y: s + v, foreColor: x, textAnchor: l || c.textAnchor, text: o, fontSize: c.style.fontSize, fontFamily: c.style.fontFamily, fontWeight: c.style.fontWeight || "normal" }); if (y.attr({ class: "apexcharts-datalabel", cx: a, cy: s }), c.dropShadow.enabled) { var w = c.dropShadow; new p(this.ctx).dropShadow(y, w) } h.add(y), void 0 === e.globals.lastDrawnDataLabelsIndexes[r] && (e.globals.lastDrawnDataLabelsIndexes[r] = []), e.globals.lastDrawnDataLabelsIndexes[r].push(n) } } } }, { key: "addBackgroundToDataLabel", value: function (t, e) { var i = this.w, a = i.config.dataLabels.background, s = a.padding, r = a.padding / 2, n = e.width, o = e.height, l = new b(this.ctx).drawRect(e.x - s, e.y - r / 2, n + 2 * s, o + r, a.borderRadius, "transparent" === i.config.chart.background ? "#fff" : i.config.chart.background, a.opacity, a.borderWidth, a.borderColor); a.dropShadow.enabled && new p(this.ctx).dropShadow(l, a.dropShadow); return l } }, { key: "dataLabelsBackground", value: function () { var t = this.w; if ("bubble" !== t.config.chart.type) for (var e = t.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"), i = 0; i < e.length; i++) { var a = e[i], s = a.getBBox(), r = null; if (s.width && s.height && (r = this.addBackgroundToDataLabel(a, s)), r) { a.parentNode.insertBefore(r.node, a); var n = a.getAttribute("fill"); t.config.chart.animations.enabled && !t.globals.resized && !t.globals.dataChanged ? r.animate().attr({ fill: n }) : r.attr({ fill: n }), a.setAttribute("fill", t.config.dataLabels.background.foreColor) } } } }, { key: "bringForward", value: function () { for (var t = this.w, e = t.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"), i = t.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"), a = 0; a < e.length; a++)i && i.insertBefore(e[a], i.nextSibling) } }]), t }(), E = function () { function t(i) { e(this, t), this.w = i.w, this.barCtx = i } return a(t, [{ key: "handleBarDataLabels", value: function (t) { var e = t.x, i = t.y, a = t.y1, s = t.y2, r = t.i, n = t.j, o = t.realIndex, l = t.series, h = t.barHeight, c = t.barWidth, d = t.barYPosition, g = t.visibleSeries, u = t.renderedPath, f = this.w, p = new b(this.barCtx.ctx), x = Array.isArray(this.barCtx.strokeWidth) ? this.barCtx.strokeWidth[o] : this.barCtx.strokeWidth, m = e + parseFloat(c * g), v = i + parseFloat(h * g); f.globals.isXNumeric && !f.globals.isBarHorizontal && (m = e + parseFloat(c * (g + 1)), v = i + parseFloat(h * (g + 1)) - x); var y = e, w = i, k = {}, A = f.config.dataLabels, S = this.barCtx.barOptions.dataLabels; void 0 !== d && this.barCtx.isTimelineBar && (v = d, w = d); var C = A.offsetX, L = A.offsetY, P = { width: 0, height: 0 }; if (f.config.dataLabels.enabled) { var T = String(f.globals.minY).length > String(f.globals.maxY).length ? f.globals.minY : f.globals.maxY; P = p.getTextRects(f.globals.yLabelFormatters[0](T), parseFloat(A.style.fontSize)) } var z = { x: e, y: i, i: r, j: n, renderedPath: u, bcx: m, bcy: v, barHeight: h, barWidth: c, textRects: P, strokeWidth: x, dataLabelsX: y, dataLabelsY: w, barDataLabelsConfig: S, offX: C, offY: L }; return k = this.barCtx.isHorizontal ? this.calculateBarsDataLabelsPosition(z) : this.calculateColumnsDataLabelsPosition(z), u.attr({ cy: k.bcy, cx: k.bcx, j: n, val: l[r][n], barHeight: h, barWidth: c }), this.drawCalculatedDataLabels({ x: k.dataLabelsX, y: k.dataLabelsY, val: this.barCtx.isTimelineBar ? [a, s] : l[r][n], i: o, j: n, barWidth: c, barHeight: h, textRects: P, dataLabelsConfig: A }) } }, { key: "calculateColumnsDataLabelsPosition", value: function (t) { var e, i = this.w, a = t.i, s = t.j, r = t.y, n = t.bcx, o = t.barWidth, l = t.barHeight, h = t.textRects, c = t.dataLabelsY, d = t.barDataLabelsConfig, g = t.strokeWidth, u = t.offX, f = t.offY; l = Math.abs(l); var p = "vertical" === i.config.plotOptions.bar.dataLabels.orientation; n -= g / 2; var x = i.globals.gridWidth / i.globals.dataPoints; if (e = i.globals.isXNumeric ? n - o / 2 + u : n - x + o / 2 + u, p) { e = e + h.height / 2 - g / 2 - 2 } var b = this.barCtx.series[a][s] < 0, m = r; switch (this.barCtx.isReversed && (m = r - l + (b ? 2 * l : 0), r -= l), d.position) { case "center": c = p ? b ? m + l / 2 + f : m + l / 2 - f : b ? m - l / 2 + h.height / 2 + f : m + l / 2 + h.height / 2 - f; break; case "bottom": c = p ? b ? m + l + f : m + l - f : b ? m - l + h.height + g + f : m + l - h.height / 2 + g - f; break; case "top": c = p ? b ? m + f : m - f : b ? m - h.height / 2 - f : m + h.height + f }return i.config.chart.stacked || (c < 0 ? c = 0 + g : c + h.height / 3 > i.globals.gridHeight && (c = i.globals.gridHeight - g)), { bcx: n, bcy: r, dataLabelsX: e, dataLabelsY: c } } }, { key: "calculateBarsDataLabelsPosition", value: function (t) { var e = this.w, i = t.x, a = t.i, s = t.j, r = t.bcy, n = t.barHeight, o = t.barWidth, l = t.textRects, h = t.dataLabelsX, c = t.strokeWidth, d = t.barDataLabelsConfig, g = t.offX, u = t.offY, f = e.globals.gridHeight / e.globals.dataPoints; o = Math.abs(o); var p = r - (this.barCtx.isTimelineBar ? 0 : f) + n / 2 + l.height / 2 + u - 3, x = this.barCtx.series[a][s] < 0, b = i; switch (this.barCtx.isReversed && (b = i + o - (x ? 2 * o : 0), i = e.globals.gridWidth - o), d.position) { case "center": h = x ? b + o / 2 - g : b - o / 2 + g; break; case "bottom": h = x ? b + o - c - Math.round(l.width / 2) - g : b - o + c + Math.round(l.width / 2) + g; break; case "top": h = x ? b - c + Math.round(l.width / 2) - g : b - c - Math.round(l.width / 2) + g }return e.config.chart.stacked || (h < 0 ? h = h + l.width + c : h + l.width / 2 > e.globals.gridWidth && (h = e.globals.gridWidth - l.width - c)), { bcx: i, bcy: r, dataLabelsX: h, dataLabelsY: p } } }, { key: "drawCalculatedDataLabels", value: function (t) { var e = t.x, i = t.y, a = t.val, s = t.i, r = t.j, o = t.textRects, l = t.barHeight, h = t.barWidth, c = t.dataLabelsConfig, d = this.w, g = "rotate(0)"; "vertical" === d.config.plotOptions.bar.dataLabels.orientation && (g = "rotate(-90, ".concat(e, ", ").concat(i, ")")); var u = new M(this.barCtx.ctx), f = new b(this.barCtx.ctx), p = c.formatter, x = null, m = d.globals.collapsedSeriesIndices.indexOf(s) > -1; if (c.enabled && !m) { x = f.group({ class: "apexcharts-data-labels", transform: g }); var v = ""; void 0 !== a && (v = p(a, { seriesIndex: s, dataPointIndex: r, w: d })), 0 === a && d.config.chart.stacked && (v = ""); var y = d.globals.series[s][r] <= 0, w = d.config.plotOptions.bar.dataLabels.position; if ("vertical" === d.config.plotOptions.bar.dataLabels.orientation && ("top" === w && (c.textAnchor = y ? "end" : "start"), "center" === w && (c.textAnchor = "middle"), "bottom" === w && (c.textAnchor = y ? "end" : "start")), this.barCtx.isTimelineBar && this.barCtx.barOptions.dataLabels.hideOverflowingLabels) h < f.getTextRects(v, parseFloat(c.style.fontSize)).width && (v = ""); d.config.chart.stacked && this.barCtx.barOptions.dataLabels.hideOverflowingLabels && (this.barCtx.isHorizontal ? ((h = Math.abs(d.globals.series[s][r]) / this.barCtx.invertedYRatio[this.barCtx.yaxisIndex]) > 0 && o.width / 1.6 > h || h < 0 && o.width / 1.6 < h) && (v = "") : (l = Math.abs(d.globals.series[s][r]) / this.barCtx.yRatio[this.barCtx.yaxisIndex], o.height / 1.6 > l && (v = ""))); var k = n({}, c); this.barCtx.isHorizontal && a < 0 && ("start" === c.textAnchor ? k.textAnchor = "end" : "end" === c.textAnchor && (k.textAnchor = "start")), u.plotDataLabelsText({ x: e, y: i, text: v, i: s, j: r, parent: x, dataLabelsConfig: k, alwaysDrawDataLabel: !0, offsetCorrection: !0 }) } return x } }]), t }(), X = function () { function t(i) { e(this, t), this.ctx = i, this.w = i.w, this.legendInactiveClass = "legend-mouseover-inactive" } return a(t, [{ key: "getAllSeriesEls", value: function () { return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series") } }, { key: "getSeriesByName", value: function (t) { return this.w.globals.dom.baseEl.querySelector("[seriesName='".concat(f.escapeString(t), "']")) } }, { key: "isSeriesHidden", value: function (t) { var e = this.getSeriesByName(t), i = parseInt(e.getAttribute("data:realIndex"), 10); return { isHidden: e.classList.contains("apexcharts-series-collapsed"), realIndex: i } } }, { key: "addCollapsedClassToSeries", value: function (t, e) { var i = this.w; function a(i) { for (var a = 0; a < i.length; a++)i[a].index === e && t.node.classList.add("apexcharts-series-collapsed") } a(i.globals.collapsedSeries), a(i.globals.ancillaryCollapsedSeries) } }, { key: "toggleSeries", value: function (t) { var e = this.isSeriesHidden(t); return this.ctx.legend.legendHelpers.toggleDataSeries(e.realIndex, e.isHidden), e.isHidden } }, { key: "showSeries", value: function (t) { var e = this.isSeriesHidden(t); e.isHidden && this.ctx.legend.legendHelpers.toggleDataSeries(e.realIndex, !0) } }, { key: "hideSeries", value: function (t) { var e = this.isSeriesHidden(t); e.isHidden || this.ctx.legend.legendHelpers.toggleDataSeries(e.realIndex, !1) } }, { key: "resetSeries", value: function () { var t = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0], e = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1], i = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2], a = this.w, s = f.clone(a.globals.initialSeries); a.globals.previousPaths = [], i ? (a.globals.collapsedSeries = [], a.globals.ancillaryCollapsedSeries = [], a.globals.collapsedSeriesIndices = [], a.globals.ancillaryCollapsedSeriesIndices = []) : s = this.emptyCollapsedSeries(s), a.config.series = s, t && (e && (a.globals.zoomed = !1, this.ctx.updateHelpers.revertDefaultAxisMinMax()), this.ctx.updateHelpers._updateSeries(s, a.config.chart.animations.dynamicAnimation.enabled)) } }, { key: "emptyCollapsedSeries", value: function (t) { for (var e = this.w, i = 0; i < t.length; i++)e.globals.collapsedSeriesIndices.indexOf(i) > -1 && (t[i].data = []); return t } }, { key: "toggleSeriesOnHover", value: function (t, e) { var i = this.w, a = i.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels"); if ("mousemove" === t.type) { var s = parseInt(e.getAttribute("rel"), 10) - 1, r = null, n = null; i.globals.axisCharts || "radialBar" === i.config.chart.type ? i.globals.axisCharts ? (r = i.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(s, "']")), n = i.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(s, "']"))) : r = i.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(s + 1, "']")) : r = i.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(s + 1, "'] path")); for (var o = 0; o < a.length; o++)a[o].classList.add(this.legendInactiveClass); null !== r && (i.globals.axisCharts || r.parentNode.classList.remove(this.legendInactiveClass), r.classList.remove(this.legendInactiveClass), null !== n && n.classList.remove(this.legendInactiveClass)) } else if ("mouseout" === t.type) for (var l = 0; l < a.length; l++)a[l].classList.remove(this.legendInactiveClass) } }, { key: "highlightRangeInSeries", value: function (t, e) { var i = this, a = this.w, s = a.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"), r = function (t) { for (var e = 0; e < s.length; e++)s[e].classList[t](i.legendInactiveClass) }; if ("mousemove" === t.type) { var n = parseInt(e.getAttribute("rel"), 10) - 1; r("add"), function (t) { for (var e = 0; e < s.length; e++) { var a = parseInt(s[e].getAttribute("val"), 10); a >= t.from && a <= t.to && s[e].classList.remove(i.legendInactiveClass) } }(a.config.plotOptions.heatmap.colorScale.ranges[n]) } else "mouseout" === t.type && r("remove") } }, { key: "getActiveConfigSeriesIndex", value: function () { var t = arguments.length > 0 && void 0 !== arguments[0] && arguments[0], e = this.w, i = 0; if (e.config.series.length > 1) for (var a = e.config.series.map((function (i, a) { var s = !1; return t && (s = "bar" === e.config.series[a].type || "column" === e.config.series[a].type), i.data && i.data.length > 0 && !s ? a : -1 })), s = 0; s < a.length; s++)if (-1 !== a[s]) { i = a[s]; break } return i } }, { key: "getPreviousPaths", value: function () { var t = this.w; function e(e, i, a) { for (var s = e[i].childNodes, r = { type: a, paths: [], realIndex: e[i].getAttribute("data:realIndex") }, n = 0; n < s.length; n++)if (s[n].hasAttribute("pathTo")) { var o = s[n].getAttribute("pathTo"); r.paths.push({ d: o }) } t.globals.previousPaths.push(r) } t.globals.previousPaths = [];["line", "area", "bar", "candlestick", "radar"].forEach((function (i) { for (var a, s = (a = i, t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(a, "-series .apexcharts-series"))), r = 0; r < s.length; r++)e(s, r, i) })), this.handlePrevBubbleScatterPaths("bubble"), this.handlePrevBubbleScatterPaths("scatter"); var i = t.globals.dom.baseEl.querySelectorAll(".apexcharts-heatmap .apexcharts-series"); if (i.length > 0) for (var a = 0; a < i.length; a++) { for (var s = t.globals.dom.baseEl.querySelectorAll(".apexcharts-heatmap .apexcharts-series[data\\:realIndex='".concat(a, "'] rect")), r = [], n = 0; n < s.length; n++)r.push({ color: s[n].getAttribute("color") }); t.globals.previousPaths.push(r) } t.globals.axisCharts || (t.globals.previousPaths = t.globals.series) } }, { key: "handlePrevBubbleScatterPaths", value: function (t) { var e = this.w, i = e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t, "-series .apexcharts-series")); if (i.length > 0) for (var a = 0; a < i.length; a++) { for (var s = e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t, "-series .apexcharts-series[data\\:realIndex='").concat(a, "'] circle")), r = [], n = 0; n < s.length; n++)r.push({ x: s[n].getAttribute("cx"), y: s[n].getAttribute("cy"), r: s[n].getAttribute("r") }); e.globals.previousPaths.push(r) } } }, { key: "clearPreviousPaths", value: function () { var t = this.w; t.globals.previousPaths = [], t.globals.allSeriesCollapsed = !1 } }, { key: "handleNoData", value: function () { var t = this.w, e = t.config.noData, i = new b(this.ctx), a = t.globals.svgWidth / 2, s = t.globals.svgHeight / 2, r = "middle"; if (t.globals.noData = !0, t.globals.animationEnded = !0, "left" === e.align ? (a = 10, r = "start") : "right" === e.align && (a = t.globals.svgWidth - 10, r = "end"), "top" === e.verticalAlign ? s = 50 : "bottom" === e.verticalAlign && (s = t.globals.svgHeight - 50), a += e.offsetX, s = s + parseInt(e.style.fontSize, 10) + 2 + e.offsetY, void 0 !== e.text && "" !== e.text) { var n = i.drawText({ x: a, y: s, text: e.text, textAnchor: r, fontSize: e.style.fontSize, fontFamily: e.style.fontFamily, foreColor: e.style.color, opacity: 1, class: "apexcharts-text-nodata" }); t.globals.dom.Paper.add(n) } } }, { key: "setNullSeriesToZeroValues", value: function (t) { for (var e = this.w, i = 0; i < t.length; i++)if (0 === t[i].length) for (var a = 0; a < t[e.globals.maxValsInArrayIndex].length; a++)t[i].push(0); return t } }, { key: "hasAllSeriesEqualX", value: function () { for (var t = !0, e = this.w, i = this.filteredSeriesX(), a = 0; a < i.length - 1; a++)if (i[a][0] !== i[a + 1][0]) { t = !1; break } return e.globals.allSeriesHasEqualX = t, t } }, { key: "filteredSeriesX", value: function () { var t = this.w.globals.seriesX.map((function (t) { return t.length > 0 ? t : [] })); return t } }]), t }(), Y = function () { function t(i) { e(this, t), this.w = i.w, this.barCtx = i } return a(t, [{ key: "initVariables", value: function (t) { var e = this.w; this.barCtx.series = t, this.barCtx.totalItems = 0, this.barCtx.seriesLen = 0, this.barCtx.visibleI = -1, this.barCtx.visibleItems = 1; for (var i = 0; i < t.length; i++)if (t[i].length > 0 && (this.barCtx.seriesLen = this.barCtx.seriesLen + 1, this.barCtx.totalItems += t[i].length), e.globals.isXNumeric) for (var a = 0; a < t[i].length; a++)e.globals.seriesX[i][a] > e.globals.minX && e.globals.seriesX[i][a] < e.globals.maxX && this.barCtx.visibleItems++; else this.barCtx.visibleItems = e.globals.dataPoints; 0 === this.barCtx.seriesLen && (this.barCtx.seriesLen = 1) } }, { key: "initialPositions", value: function () { var t, e, i, a, s, r, n, o, l = this.w, h = l.globals.dataPoints; if (this.barCtx.isTimelineBar && (h = l.globals.labels.length), this.barCtx.isHorizontal) s = (i = l.globals.gridHeight / h) / this.barCtx.seriesLen, l.globals.isXNumeric && (s = (i = l.globals.gridHeight / this.barCtx.totalItems) / this.barCtx.seriesLen), s = s * parseInt(this.barCtx.barOptions.barHeight, 10) / 100, o = this.barCtx.baseLineInvertedY + l.globals.padHorizontal + (this.barCtx.isReversed ? l.globals.gridWidth : 0) - (this.barCtx.isReversed ? 2 * this.barCtx.baseLineInvertedY : 0), e = (i - s * this.barCtx.seriesLen) / 2; else { if (a = l.globals.gridWidth / this.barCtx.visibleItems, l.config.xaxis.convertedCatToNumeric && (a = l.globals.gridWidth / l.globals.dataPoints), r = a / this.barCtx.seriesLen * parseInt(this.barCtx.barOptions.columnWidth, 10) / 100, l.globals.isXNumeric) { var c = this.barCtx.xRatio; l.config.xaxis.convertedCatToNumeric && (c = this.barCtx.initialXRatio), l.globals.minXDiff && .5 !== l.globals.minXDiff && l.globals.minXDiff / c > 0 && (a = l.globals.minXDiff / c), (r = a / this.barCtx.seriesLen * parseInt(this.barCtx.barOptions.columnWidth, 10) / 100) < 1 && (r = 1) } n = l.globals.gridHeight - this.barCtx.baseLineY[this.barCtx.yaxisIndex] - (this.barCtx.isReversed ? l.globals.gridHeight : 0) + (this.barCtx.isReversed ? 2 * this.barCtx.baseLineY[this.barCtx.yaxisIndex] : 0), t = l.globals.padHorizontal + (a - r * this.barCtx.seriesLen) / 2 } return { x: t, y: e, yDivision: i, xDivision: a, barHeight: s, barWidth: r, zeroH: n, zeroW: o } } }, { key: "getPathFillColor", value: function (t, e, i, a) { var s = this.w, r = new T(this.barCtx.ctx), n = null, o = this.barCtx.barOptions.distributed ? i : e; this.barCtx.barOptions.colors.ranges.length > 0 && this.barCtx.barOptions.colors.ranges.map((function (a) { t[e][i] >= a.from && t[e][i] <= a.to && (n = a.color) })); return s.config.series[e].data[i] && s.config.series[e].data[i].fillColor && (n = s.config.series[e].data[i].fillColor), r.fillPath({ seriesNumber: this.barCtx.barOptions.distributed ? o : a, dataPointIndex: i, color: n, value: t[e][i] }) } }, { key: "getStrokeWidth", value: function (t, e, i) { var a = 0, s = this.w; return void 0 === this.barCtx.series[t][e] || null === this.barCtx.series[t][e] ? this.barCtx.isNullValue = !0 : this.barCtx.isNullValue = !1, s.config.stroke.show && (this.barCtx.isNullValue || (a = Array.isArray(this.barCtx.strokeWidth) ? this.barCtx.strokeWidth[i] : this.barCtx.strokeWidth)), a } }, { key: "barBackground", value: function (t) { var e = t.j, i = t.i, a = t.x1, s = t.x2, r = t.y1, n = t.y2, o = t.elSeries, l = this.w, h = new b(this.barCtx.ctx), c = new X(this.barCtx.ctx).getActiveConfigSeriesIndex(); if (this.barCtx.barOptions.colors.backgroundBarColors.length > 0 && c === i) { e >= this.barCtx.barOptions.colors.backgroundBarColors.length && (e -= this.barCtx.barOptions.colors.backgroundBarColors.length); var d = this.barCtx.barOptions.colors.backgroundBarColors[e], g = h.drawRect(void 0 !== a ? a : 0, void 0 !== r ? r : 0, void 0 !== s ? s : l.globals.gridWidth, void 0 !== n ? n : l.globals.gridHeight, this.barCtx.barOptions.colors.backgroundBarRadius, d, this.barCtx.barOptions.colors.backgroundBarOpacity); o.add(g), g.node.classList.add("apexcharts-backgroundBar") } } }, { key: "getColumnPaths", value: function (t) { var e = t.barWidth, i = t.barXPosition, a = t.yRatio, s = t.y1, r = t.y2, n = t.strokeWidth, o = t.series, l = t.realIndex, h = t.i, c = t.j, d = t.w, g = new b(this.barCtx.ctx); (n = Array.isArray(n) ? n[l] : n) || (n = 0); var u = { barWidth: e, strokeWidth: n, yRatio: a, barXPosition: i, y1: s, y2: r }, f = this.getRoundedBars(d, u, o, h, c), p = i, x = i + e, m = g.move(p, f.y1), v = g.move(p, f.y1); return d.globals.previousPaths.length > 0 && (v = this.barCtx.getPreviousPath(l, c, !1)), { pathTo: m = m + g.line(p, f.y2) + f.endingPath + g.line(x - n, f.y2) + g.line(x - n, f.y1) + f.startingPath + "z", pathFrom: v = v + g.line(p, s) + g.line(x - n, s) + g.line(x - n, s) + g.line(x - n, s) + g.line(p, s) } } }, { key: "getBarpaths", value: function (t) { var e = t.barYPosition, i = t.barHeight, a = t.x1, s = t.x2, r = t.strokeWidth, n = t.series, o = t.realIndex, l = t.i, h = t.j, c = t.w, d = new b(this.barCtx.ctx); (r = Array.isArray(r) ? r[o] : r) || (r = 0); var g = { barHeight: i, strokeWidth: r, barYPosition: e, x2: s, x1: a }, u = this.getRoundedBars(c, g, n, l, h), f = d.move(u.x1, e), p = d.move(u.x1, e); c.globals.previousPaths.length > 0 && (p = this.barCtx.getPreviousPath(o, h, !1)); var x = e, m = e + i; return { pathTo: f = f + d.line(u.x2, x) + u.endingPath + d.line(u.x2, m - r) + d.line(u.x1, m - r) + u.startingPath + "z", pathFrom: p = p + d.line(a, x) + d.line(a, m - r) + d.line(a, m - r) + d.line(a, m - r) + d.line(a, x) } } }, { key: "getRoundedBars", value: function (t, e, i, a, s) { var r = new b(this.barCtx.ctx), n = Array.isArray(e.strokeWidth) ? e.strokeWidth[a] : e.strokeWidth; if (n || (n = 0), this.barCtx.isHorizontal) { var o = null, l = "", h = e.x2, c = e.x1; if (void 0 !== i[a][s] || null !== i[a][s]) { var d = i[a][s] < 0, g = e.barHeight / 2 - n; switch (d && (g = -e.barHeight / 2 - n), g > Math.abs(h - c) && (g = Math.abs(h - c)), "rounded" === this.barCtx.barOptions.endingShape && (h = e.x2 - g / 2), "rounded" === this.barCtx.barOptions.startingShape && (c = e.x1 + g / 2), this.barCtx.barOptions.endingShape) { case "flat": o = r.line(h, e.barYPosition + e.barHeight - n); break; case "rounded": o = r.quadraticCurve(h + g, e.barYPosition + (e.barHeight - n) / 2, h, e.barYPosition + e.barHeight - n) }switch (this.barCtx.barOptions.startingShape) { case "flat": l = r.line(c, e.barYPosition + e.barHeight - n); break; case "rounded": l = r.quadraticCurve(c - g, e.barYPosition + e.barHeight / 2, c, e.barYPosition) } } return { endingPath: o, startingPath: l, x2: h, x1: c } } var u = null, f = "", p = e.y2, x = e.y1; if (void 0 !== i[a][s] || null !== i[a][s]) { var m = i[a][s] < 0, v = e.barWidth / 2 - n; switch (m && (v = -e.barWidth / 2 - n), v > Math.abs(p - x) && (v = Math.abs(p - x)), "rounded" === this.barCtx.barOptions.endingShape && (p += v / 2), "rounded" === this.barCtx.barOptions.startingShape && (x -= v / 2), this.barCtx.barOptions.endingShape) { case "flat": u = r.line(e.barXPosition + e.barWidth - n, p); break; case "rounded": u = r.quadraticCurve(e.barXPosition + (e.barWidth - n) / 2, p - v, e.barXPosition + e.barWidth - n, p) }switch (this.barCtx.barOptions.startingShape) { case "flat": f = r.line(e.barXPosition + e.barWidth - n, x); break; case "rounded": f = r.quadraticCurve(e.barXPosition + (e.barWidth - n) / 2, x + v, e.barXPosition, x) } } return { endingPath: u, startingPath: f, y2: p, y1: x } } }]), t }(), F = function () { function t(i, a) { e(this, t), this.ctx = i, this.w = i.w; var s = this.w; this.barOptions = s.config.plotOptions.bar, this.isHorizontal = this.barOptions.horizontal, this.strokeWidth = s.config.stroke.width, this.isNullValue = !1, this.isTimelineBar = "datetime" === s.config.xaxis.type && s.globals.seriesRangeBarTimeline.length, this.xyRatios = a, null !== this.xyRatios && (this.xRatio = a.xRatio, this.initialXRatio = a.initialXRatio, this.yRatio = a.yRatio, this.invertedXRatio = a.invertedXRatio, this.invertedYRatio = a.invertedYRatio, this.baseLineY = a.baseLineY, this.baseLineInvertedY = a.baseLineInvertedY), this.yaxisIndex = 0, this.seriesLen = 0, this.barHelpers = new Y(this) } return a(t, [{ key: "draw", value: function (t, e) { var i = this.w, a = new b(this.ctx), s = new y(this.ctx, i); t = s.getLogSeries(t), this.series = t, this.yRatio = s.getLogYRatios(this.yRatio), this.barHelpers.initVariables(t); var r = a.group({ class: "apexcharts-bar-series apexcharts-plot-series" }); i.config.dataLabels.enabled && this.totalItems > this.barOptions.dataLabels.maxItems && console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering."); for (var o = 0, l = 0; o < t.length; o++ , l++) { var h, c, d, g, u = void 0, p = void 0, x = [], m = [], v = i.globals.comboCharts ? e[o] : o, w = a.group({ class: "apexcharts-series", rel: o + 1, seriesName: f.escapeString(i.globals.seriesNames[v]), "data:realIndex": v }); this.ctx.series.addCollapsedClassToSeries(w, v), t[o].length > 0 && (this.visibleI = this.visibleI + 1); var k = 0, A = 0; this.yRatio.length > 1 && (this.yaxisIndex = v), this.isReversed = i.config.yaxis[this.yaxisIndex] && i.config.yaxis[this.yaxisIndex].reversed; var S = this.barHelpers.initialPositions(); p = S.y, k = S.barHeight, c = S.yDivision, g = S.zeroW, u = S.x, A = S.barWidth, h = S.xDivision, d = S.zeroH, this.horizontal || m.push(u + A / 2); for (var C = a.group({ class: "apexcharts-datalabels", "data:realIndex": v }), L = 0; L < i.globals.dataPoints; L++) { var P = this.barHelpers.getStrokeWidth(o, L, v), T = null, z = { indexes: { i: o, j: L, realIndex: v, bc: l }, x: u, y: p, strokeWidth: P, elSeries: w }; this.isHorizontal ? (T = this.drawBarPaths(n(n({}, z), {}, { barHeight: k, zeroW: g, yDivision: c })), A = this.series[o][L] / this.invertedYRatio) : (T = this.drawColumnPaths(n(n({}, z), {}, { xDivision: h, barWidth: A, zeroH: d })), k = this.series[o][L] / this.yRatio[this.yaxisIndex]), p = T.y, u = T.x, L > 0 && m.push(u + A / 2), x.push(p); var I = this.barHelpers.getPathFillColor(t, o, L, v); this.renderSeries({ realIndex: v, pathFill: I, j: L, i: o, pathFrom: T.pathFrom, pathTo: T.pathTo, strokeWidth: P, elSeries: w, x: u, y: p, series: t, barHeight: k, barWidth: A, elDataLabelsWrap: C, visibleSeries: this.visibleI, type: "bar" }) } i.globals.seriesXvalues[v] = m, i.globals.seriesYvalues[v] = x, r.add(w) } return r } }, { key: "renderSeries", value: function (t) { var e = t.realIndex, i = t.pathFill, a = t.lineFill, s = t.j, r = t.i, n = t.pathFrom, o = t.pathTo, l = t.strokeWidth, h = t.elSeries, c = t.x, d = t.y, g = t.y1, u = t.y2, f = t.series, x = t.barHeight, m = t.barWidth, v = t.barYPosition, y = t.elDataLabelsWrap, w = t.visibleSeries, k = t.type, A = this.w, S = new b(this.ctx); a || (a = this.barOptions.distributed ? A.globals.stroke.colors[s] : A.globals.stroke.colors[e]), A.config.series[r].data[s] && A.config.series[r].data[s].strokeColor && (a = A.config.series[r].data[s].strokeColor), this.isNullValue && (i = "none"); var C = s / A.config.chart.animations.animateGradually.delay * (A.config.chart.animations.speed / A.globals.dataPoints) / 2.4, L = S.renderPaths({ i: r, j: s, realIndex: e, pathFrom: n, pathTo: o, stroke: a, strokeWidth: l, strokeLineCap: A.config.stroke.lineCap, fill: i, animationDelay: C, initialSpeed: A.config.chart.animations.speed, dataChangeSpeed: A.config.chart.animations.dynamicAnimation.speed, className: "apexcharts-".concat(k, "-area") }); L.attr("clip-path", "url(#gridRectMask".concat(A.globals.cuid, ")")), void 0 !== g && void 0 !== u && (L.attr("data-range-y1", g), L.attr("data-range-y2", u)), new p(this.ctx).setSelectionFilter(L, e, s), h.add(L); var P = new E(this).handleBarDataLabels({ x: c, y: d, y1: g, y2: u, i: r, j: s, series: f, realIndex: e, barHeight: x, barWidth: m, barYPosition: v, renderedPath: L, visibleSeries: w }); return null !== P && y.add(P), h.add(y), h } }, { key: "drawBarPaths", value: function (t) { var e = t.indexes, i = t.barHeight, a = t.strokeWidth, s = t.zeroW, r = t.x, n = t.y, o = t.yDivision, l = t.elSeries, h = this.w, c = e.i, d = e.j; h.globals.isXNumeric && (n = (h.globals.seriesX[c][d] - h.globals.minX) / this.invertedXRatio - i); var g = n + i * this.visibleI; r = void 0 === this.series[c][d] || null === this.series[c][d] ? s : s + this.series[c][d] / this.invertedYRatio - 2 * (this.isReversed ? this.series[c][d] / this.invertedYRatio : 0); var u = this.barHelpers.getBarpaths({ barYPosition: g, barHeight: i, x1: s, x2: r, strokeWidth: a, series: this.series, realIndex: e.realIndex, i: c, j: d, w: h }); return h.globals.isXNumeric || (n += o), this.barHelpers.barBackground({ j: d, i: c, y1: g - i * this.visibleI, y2: i * this.seriesLen, elSeries: l }), { pathTo: u.pathTo, pathFrom: u.pathFrom, x: r, y: n, barYPosition: g } } }, { key: "drawColumnPaths", value: function (t) { var e = t.indexes, i = t.x, a = t.y, s = t.xDivision, r = t.barWidth, n = t.zeroH, o = t.strokeWidth, l = t.elSeries, h = this.w, c = e.i, d = e.j, g = e.bc; if (h.globals.isXNumeric) { var u = c; h.globals.seriesX[c].length || (u = h.globals.maxValsInArrayIndex), i = (h.globals.seriesX[u][d] - h.globals.minX) / this.xRatio - r * this.seriesLen / 2 } var f = i + r * this.visibleI; a = void 0 === this.series[c][d] || null === this.series[c][d] ? n : n - this.series[c][d] / this.yRatio[this.yaxisIndex] + 2 * (this.isReversed ? this.series[c][d] / this.yRatio[this.yaxisIndex] : 0); var p = this.barHelpers.getColumnPaths({ barXPosition: f, barWidth: r, y1: n, y2: a, strokeWidth: o, series: this.series, realIndex: e.realIndex, i: c, j: d, w: h }); return h.globals.isXNumeric || (i += s), this.barHelpers.barBackground({ bc: g, j: d, i: c, x1: f - o / 2 - r * this.visibleI, x2: r * this.seriesLen + o / 2, elSeries: l }), { pathTo: p.pathTo, pathFrom: p.pathFrom, x: i, y: a, barXPosition: f } } }, { key: "getPreviousPath", value: function (t, e) { for (var i, a = this.w, s = 0; s < a.globals.previousPaths.length; s++) { var r = a.globals.previousPaths[s]; r.paths && r.paths.length > 0 && parseInt(r.realIndex, 10) === parseInt(t, 10) && void 0 !== a.globals.previousPaths[s].paths[e] && (i = a.globals.previousPaths[s].paths[e].d) } return i } }]), t }(), D = function () { function t(i) { e(this, t), this.ctx = i, this.w = i.w, this.months31 = [1, 3, 5, 7, 8, 10, 12], this.months30 = [2, 4, 6, 9, 11], this.daysCntOfYear = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334] } return a(t, [{ key: "isValidDate", value: function (t) { return !isNaN(this.parseDate(t)) } }, { key: "getTimeStamp", value: function (t) { return Date.parse(t) ? this.w.config.xaxis.labels.datetimeUTC ? new Date(new Date(t).toISOString().substr(0, 25)).getTime() : new Date(t).getTime() : t } }, { key: "getDate", value: function (t) { return this.w.config.xaxis.labels.datetimeUTC ? new Date(new Date(t).toUTCString()) : new Date(t) } }, { key: "parseDate", value: function (t) { var e = Date.parse(t); if (!isNaN(e)) return this.getTimeStamp(t); var i = Date.parse(t.replace(/-/g, "/").replace(/[a-z]+/gi, " ")); return i = this.getTimeStamp(i) } }, { key: "parseDateWithTimezone", value: function (t) { return Date.parse(t.replace(/-/g, "/").replace(/[a-z]+/gi, " ")) } }, { key: "formatDate", value: function (t, e) { var i = this.w.globals.locale, a = this.w.config.xaxis.labels.datetimeUTC, s = ["\0"].concat(g(i.months)), r = ["\x01"].concat(g(i.shortMonths)), n = ["\x02"].concat(g(i.days)), o = ["\x03"].concat(g(i.shortDays)); function l(t, e) { var i = t + ""; for (e = e || 2; i.length < e;)i = "0" + i; return i } var h = a ? t.getUTCFullYear() : t.getFullYear(); e = (e = (e = e.replace(/(^|[^\\])yyyy+/g, "$1" + h)).replace(/(^|[^\\])yy/g, "$1" + h.toString().substr(2, 2))).replace(/(^|[^\\])y/g, "$1" + h); var c = (a ? t.getUTCMonth() : t.getMonth()) + 1; e = (e = (e = (e = e.replace(/(^|[^\\])MMMM+/g, "$1" + s[0])).replace(/(^|[^\\])MMM/g, "$1" + r[0])).replace(/(^|[^\\])MM/g, "$1" + l(c))).replace(/(^|[^\\])M/g, "$1" + c); var d = a ? t.getUTCDate() : t.getDate(); e = (e = (e = (e = e.replace(/(^|[^\\])dddd+/g, "$1" + n[0])).replace(/(^|[^\\])ddd/g, "$1" + o[0])).replace(/(^|[^\\])dd/g, "$1" + l(d))).replace(/(^|[^\\])d/g, "$1" + d); var u = a ? t.getUTCHours() : t.getHours(), f = u > 12 ? u - 12 : 0 === u ? 12 : u; e = (e = (e = (e = e.replace(/(^|[^\\])HH+/g, "$1" + l(u))).replace(/(^|[^\\])H/g, "$1" + u)).replace(/(^|[^\\])hh+/g, "$1" + l(f))).replace(/(^|[^\\])h/g, "$1" + f); var p = a ? t.getUTCMinutes() : t.getMinutes(); e = (e = e.replace(/(^|[^\\])mm+/g, "$1" + l(p))).replace(/(^|[^\\])m/g, "$1" + p); var x = a ? t.getUTCSeconds() : t.getSeconds(); e = (e = e.replace(/(^|[^\\])ss+/g, "$1" + l(x))).replace(/(^|[^\\])s/g, "$1" + x); var b = a ? t.getUTCMilliseconds() : t.getMilliseconds(); e = e.replace(/(^|[^\\])fff+/g, "$1" + l(b, 3)), b = Math.round(b / 10), e = e.replace(/(^|[^\\])ff/g, "$1" + l(b)), b = Math.round(b / 10); var m = u < 12 ? "AM" : "PM"; e = (e = (e = e.replace(/(^|[^\\])f/g, "$1" + b)).replace(/(^|[^\\])TT+/g, "$1" + m)).replace(/(^|[^\\])T/g, "$1" + m.charAt(0)); var v = m.toLowerCase(); e = (e = e.replace(/(^|[^\\])tt+/g, "$1" + v)).replace(/(^|[^\\])t/g, "$1" + v.charAt(0)); var y = -t.getTimezoneOffset(), w = a || !y ? "Z" : y > 0 ? "+" : "-"; if (!a) { var k = (y = Math.abs(y)) % 60; w += l(Math.floor(y / 60)) + ":" + l(k) } e = e.replace(/(^|[^\\])K/g, "$1" + w); var A = (a ? t.getUTCDay() : t.getDay()) + 1; return e = (e = (e = (e = (e = e.replace(new RegExp(n[0], "g"), n[A])).replace(new RegExp(o[0], "g"), o[A])).replace(new RegExp(s[0], "g"), s[c])).replace(new RegExp(r[0], "g"), r[c])).replace(/\\(.)/g, "$1") } }, { key: "getTimeUnitsfromTimestamp", value: function (t, e, i) { var a = this.w; void 0 !== a.config.xaxis.min && (t = a.config.xaxis.min), void 0 !== a.config.xaxis.max && (e = a.config.xaxis.max); var s = this.getDate(t), r = this.getDate(e), n = this.formatDate(s, "yyyy MM dd HH mm").split(" "), o = this.formatDate(r, "yyyy MM dd HH mm").split(" "); return { minMinute: parseInt(n[4], 10), maxMinute: parseInt(o[4], 10), minHour: parseInt(n[3], 10), maxHour: parseInt(o[3], 10), minDate: parseInt(n[2], 10), maxDate: parseInt(o[2], 10), minMonth: parseInt(n[1], 10) - 1, maxMonth: parseInt(o[1], 10) - 1, minYear: parseInt(n[0], 10), maxYear: parseInt(o[0], 10) } } }, { key: "isLeapYear", value: function (t) { return t % 4 == 0 && t % 100 != 0 || t % 400 == 0 } }, { key: "calculcateLastDaysOfMonth", value: function (t, e, i) { return this.determineDaysOfMonths(t, e) - i } }, { key: "determineDaysOfYear", value: function (t) { var e = 365; return this.isLeapYear(t) && (e = 366), e } }, { key: "determineRemainingDaysOfYear", value: function (t, e, i) { var a = this.daysCntOfYear[e] + i; return e > 1 && this.isLeapYear() && a++ , a } }, { key: "determineDaysOfMonths", value: function (t, e) { var i = 30; switch (t = f.monthMod(t), !0) { case this.months30.indexOf(t) > -1: 2 === t && (i = this.isLeapYear(e) ? 29 : 28); break; case this.months31.indexOf(t) > -1: default: i = 31 }return i } }]), t }(), R = function (t) { o(s, t); var i = d(s); function s() { return e(this, s), i.apply(this, arguments) } return a(s, [{ key: "draw", value: function (t, e) { var i = this.w, a = new b(this.ctx); this.rangeBarOptions = this.w.config.plotOptions.rangeBar, this.series = t, this.seriesRangeStart = i.globals.seriesRangeStart, this.seriesRangeEnd = i.globals.seriesRangeEnd, this.barHelpers.initVariables(t); for (var s = a.group({ class: "apexcharts-rangebar-series apexcharts-plot-series" }), r = 0; r < t.length; r++) { var o, l, h, c = void 0, d = void 0, g = void 0, u = i.globals.comboCharts ? e[r] : r, p = a.group({ class: "apexcharts-series", seriesName: f.escapeString(i.globals.seriesNames[u]), rel: r + 1, "data:realIndex": u }); t[r].length > 0 && (this.visibleI = this.visibleI + 1); var x = 0, m = 0; this.yRatio.length > 1 && (this.yaxisIndex = u); var v = this.barHelpers.initialPositions(); d = v.y, h = v.zeroW, c = v.x, m = v.barWidth, o = v.xDivision, l = v.zeroH; for (var y = a.group({ class: "apexcharts-datalabels", "data:realIndex": u }), w = 0; w < i.globals.dataPoints; w++) { var k = this.barHelpers.getStrokeWidth(r, w, u), A = this.seriesRangeStart[r][w], S = this.seriesRangeEnd[r][w], C = null, L = null, P = { x: c, y: d, strokeWidth: k, elSeries: p }; if (g = v.yDivision, x = v.barHeight, this.isHorizontal) { L = d + x * this.visibleI; var T = (g - x * this.seriesLen) / 2; if (void 0 === i.config.series[r].data[w]) break; if (this.isTimelineBar && i.config.series[r].data[w].x) { var z = this.detectOverlappingBars({ i: r, j: w, barYPosition: L, srty: T, barHeight: x, yDivision: g, initPositions: v }); x = z.barHeight, L = z.barYPosition } m = (C = this.drawRangeBarPaths(n({ indexes: { i: r, j: w, realIndex: u }, barHeight: x, barYPosition: L, zeroW: h, yDivision: g, y1: A, y2: S }, P))).barWidth } else x = (C = this.drawRangeColumnPaths(n({ indexes: { i: r, j: w, realIndex: u }, zeroH: l, barWidth: m, xDivision: o }, P))).barHeight; d = C.y, c = C.x; var I = this.barHelpers.getPathFillColor(t, r, w, u), M = i.globals.stroke.colors[u]; this.renderSeries({ realIndex: u, pathFill: I, lineFill: M, j: w, i: r, x: c, y: d, y1: A, y2: S, pathFrom: C.pathFrom, pathTo: C.pathTo, strokeWidth: k, elSeries: p, series: t, barHeight: x, barYPosition: L, barWidth: m, elDataLabelsWrap: y, visibleSeries: this.visibleI, type: "rangebar" }) } s.add(p) } return s } }, { key: "detectOverlappingBars", value: function (t) { var e = t.i, i = t.j, a = t.barYPosition, s = t.srty, r = t.barHeight, n = t.yDivision, o = t.initPositions, l = this.w, h = [], c = l.config.series[e].data[i].rangeName, d = l.config.series[e].data[i].x, g = l.globals.labels.indexOf(d), u = l.globals.seriesRangeBarTimeline[e].findIndex((function (t) { return t.x === d && t.overlaps.length > 0 })); return a = s + r * this.visibleI + n * g, u > -1 && !l.config.plotOptions.bar.rangeBarOverlap && (h = l.globals.seriesRangeBarTimeline[e][u].overlaps).indexOf(c) > -1 && (a = (r = o.barHeight / h.length) * this.visibleI + n * (100 - parseInt(this.barOptions.barHeight, 10)) / 100 / 2 + r * (this.visibleI + h.indexOf(c)) + n * g), { barYPosition: a, barHeight: r } } }, { key: "drawRangeColumnPaths", value: function (t) { var e = t.indexes, i = t.x, a = (t.strokeWidth, t.xDivision), s = t.barWidth, r = t.zeroH, n = this.w, o = e.i, l = e.j, h = this.yRatio[this.yaxisIndex], c = e.realIndex, d = this.getRangeValue(c, l), g = Math.min(d.start, d.end), u = Math.max(d.start, d.end); n.globals.isXNumeric && (i = (n.globals.seriesX[o][l] - n.globals.minX) / this.xRatio - s / 2); var f = i + s * this.visibleI; void 0 === this.series[o][l] || null === this.series[o][l] ? g = r : (g = r - g / h, u = r - u / h); var p = Math.abs(u - g), x = this.barHelpers.getColumnPaths({ barXPosition: f, barWidth: s, y1: g, y2: u, strokeWidth: this.strokeWidth, series: this.seriesRangeEnd, i: c, j: l, w: n }); return n.globals.isXNumeric || (i += a), { pathTo: x.pathTo, pathFrom: x.pathFrom, barHeight: p, x: i, y: u, barXPosition: f } } }, { key: "drawRangeBarPaths", value: function (t) { var e = t.indexes, i = t.y, a = t.y1, s = t.y2, r = t.yDivision, n = t.barHeight, o = t.barYPosition, l = t.zeroW, h = this.w, c = l + a / this.invertedYRatio, d = l + s / this.invertedYRatio, g = Math.abs(d - c), u = this.barHelpers.getBarpaths({ barYPosition: o, barHeight: n, x1: c, x2: d, strokeWidth: this.strokeWidth, series: this.seriesRangeEnd, i: e.realIndex, j: e.j, w: h }); return h.globals.isXNumeric || (i += r), { pathTo: u.pathTo, pathFrom: u.pathFrom, barWidth: g, x: d, y: i } } }, { key: "getRangeValue", value: function (t, e) { var i = this.w; return { start: i.globals.seriesRangeStart[t][e], end: i.globals.seriesRangeEnd[t][e] } } }, { key: "getTooltipValues", value: function (t) { var e = t.ctx, i = t.seriesIndex, a = t.dataPointIndex, s = t.y1, r = t.y2, n = t.w, o = n.globals.seriesRangeStart[i][a], l = n.globals.seriesRangeEnd[i][a], h = n.globals.labels[a], c = n.config.series[i].name, d = n.config.tooltip.y.formatter, g = n.config.tooltip.y.title.formatter, u = { w: n, seriesIndex: i, dataPointIndex: a }; "function" == typeof g && (c = g(c, u)), s && r && (o = s, l = r, n.config.series[i].data[a].x && (h = n.config.series[i].data[a].x + ":"), "function" == typeof d && (h = d(h, u))); var f = "", p = "", x = n.globals.colors[i]; if (void 0 === n.config.tooltip.x.formatter) if ("datetime" === n.config.xaxis.type) { var b = new D(e); f = b.formatDate(b.getDate(o), n.config.tooltip.x.format), p = b.formatDate(b.getDate(l), n.config.tooltip.x.format) } else f = o, p = l; else f = n.config.tooltip.x.formatter(o), p = n.config.tooltip.x.formatter(l); return { start: o, end: l, startVal: f, endVal: p, ylabel: h, color: x, seriesName: c } } }, { key: "buildCustomTooltipHTML", value: function (t) { var e = t.color, i = t.seriesName; return '<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: ' + e + '">' + (i || "") + '</span></div><div> <span class="category">' + t.ylabel + ' </span> <span class="value start-value">' + t.start + '</span> <span class="separator">-</span> <span class="value end-value">' + t.end + "</span></div></div>" } }]), s }(F), H = function () { function t(i) { e(this, t), this.opts = i } return a(t, [{ key: "line", value: function () { return { chart: { animations: { easing: "swing" } }, dataLabels: { enabled: !1 }, stroke: { width: 5, curve: "straight" }, markers: { size: 0, hover: { sizeOffset: 6 } }, xaxis: { crosshairs: { width: 1 } } } } }, { key: "sparkline", value: function (t) { this.opts.yaxis[0].show = !1, this.opts.yaxis[0].title.text = "", this.opts.yaxis[0].axisBorder.show = !1, this.opts.yaxis[0].axisTicks.show = !1, this.opts.yaxis[0].floating = !0; return f.extend(t, { grid: { show: !1, padding: { left: 0, right: 0, top: 0, bottom: 0 } }, legend: { show: !1 }, xaxis: { labels: { show: !1 }, tooltip: { enabled: !1 }, axisBorder: { show: !1 }, axisTicks: { show: !1 } }, chart: { toolbar: { show: !1 }, zoom: { enabled: !1 } }, dataLabels: { enabled: !1 } }) } }, { key: "bar", value: function () { return { chart: { stacked: !1, animations: { easing: "swing" } }, plotOptions: { bar: { dataLabels: { position: "center" } } }, dataLabels: { style: { colors: ["#fff"] }, background: { enabled: !1 } }, stroke: { width: 0, lineCap: "square" }, fill: { opacity: .85 }, legend: { markers: { shape: "square", radius: 2, size: 8 } }, tooltip: { shared: !1 }, xaxis: { tooltip: { enabled: !1 }, tickPlacement: "between", crosshairs: { width: "barWidth", position: "back", fill: { type: "gradient" }, dropShadow: { enabled: !1 }, stroke: { width: 0 } } } } } }, { key: "candlestick", value: function () { return { stroke: { width: 1, colors: ["#333"] }, fill: { opacity: 1 }, dataLabels: { enabled: !1 }, tooltip: { shared: !0, custom: function (t) { var e = t.seriesIndex, i = t.dataPointIndex, a = t.w; return '<div class="apexcharts-tooltip-candlestick"><div>Open: <span class="value">' + a.globals.seriesCandleO[e][i] + '</span></div><div>High: <span class="value">' + a.globals.seriesCandleH[e][i] + '</span></div><div>Low: <span class="value">' + a.globals.seriesCandleL[e][i] + '</span></div><div>Close: <span class="value">' + a.globals.seriesCandleC[e][i] + "</span></div></div>" } }, states: { active: { filter: { type: "none" } } }, xaxis: { crosshairs: { width: 1 } } } } }, { key: "rangeBar", value: function () { return { stroke: { width: 0, lineCap: "square" }, plotOptions: { bar: { dataLabels: { position: "center" } } }, dataLabels: { enabled: !1, formatter: function (t, e) { e.ctx; var i = e.seriesIndex, a = e.dataPointIndex, s = e.w, r = s.globals.seriesRangeStart[i][a]; return s.globals.seriesRangeEnd[i][a] - r }, background: { enabled: !1 }, style: { colors: ["#fff"] } }, tooltip: { shared: !1, followCursor: !0, custom: function (t) { return t.w.config.plotOptions && t.w.config.plotOptions.bar && t.w.config.plotOptions.bar.horizontal ? function (t) { var e = new R(t.ctx, null), i = e.getTooltipValues(t), a = i.color, s = i.seriesName, r = i.ylabel, n = i.startVal, o = i.endVal; return e.buildCustomTooltipHTML({ color: a, seriesName: s, ylabel: r, start: n, end: o }) }(t) : function (t) { var e = new R(t.ctx, null), i = e.getTooltipValues(t), a = i.color, s = i.seriesName, r = i.ylabel, n = i.start, o = i.end; return e.buildCustomTooltipHTML({ color: a, seriesName: s, ylabel: r, start: n, end: o }) }(t) } }, xaxis: { tickPlacement: "between", tooltip: { enabled: !1 }, crosshairs: { stroke: { width: 0 } } } } } }, { key: "area", value: function () { return { stroke: { width: 4 }, fill: { type: "gradient", gradient: { inverseColors: !1, shade: "light", type: "vertical", opacityFrom: .65, opacityTo: .5, stops: [0, 100, 100] } }, markers: { size: 0, hover: { sizeOffset: 6 } }, tooltip: { followCursor: !1 } } } }, { key: "brush", value: function (t) { return f.extend(t, { chart: { toolbar: { autoSelected: "selection", show: !1 }, zoom: { enabled: !1 } }, dataLabels: { enabled: !1 }, stroke: { width: 1 }, tooltip: { enabled: !1 }, xaxis: { tooltip: { enabled: !1 } } }) } }, { key: "stacked100", value: function (t) { t.dataLabels = t.dataLabels || {}, t.dataLabels.formatter = t.dataLabels.formatter || void 0; var e = t.dataLabels.formatter; return t.yaxis.forEach((function (e, i) { t.yaxis[i].min = 0, t.yaxis[i].max = 100 })), "bar" === t.chart.type && (t.dataLabels.formatter = e || function (t) { return "number" == typeof t && t ? t.toFixed(0) + "%" : t }), t } }, { key: "convertCatToNumeric", value: function (t) { return t.xaxis.convertedCatToNumeric = !0, t } }, { key: "convertCatToNumericXaxis", value: function (t, e, i) { t.xaxis.type = "numeric", t.xaxis.labels = t.xaxis.labels || {}, t.xaxis.labels.formatter = t.xaxis.labels.formatter || function (t) { return f.isNumber(t) ? Math.floor(t) : t }; var a = t.xaxis.labels.formatter, s = t.xaxis.categories && t.xaxis.categories.length ? t.xaxis.categories : t.labels; return i && i.length && (s = i.map((function (t) { return t.toString() }))), s && s.length && (t.xaxis.labels.formatter = function (t) { return f.isNumber(t) ? a(s[Math.floor(t) - 1]) : a(t) }), t.xaxis.categories = [], t.labels = [], t.xaxis.tickAmount = t.xaxis.tickAmount || "dataPoints", t } }, { key: "bubble", value: function () { return { dataLabels: { style: { colors: ["#fff"] } }, tooltip: { shared: !1, intersect: !0 }, xaxis: { crosshairs: { width: 0 } }, fill: { type: "solid", gradient: { shade: "light", inverse: !0, shadeIntensity: .55, opacityFrom: .4, opacityTo: .8 } } } } }, { key: "scatter", value: function () { return { dataLabels: { enabled: !1 }, tooltip: { shared: !1, intersect: !0 }, markers: { size: 6, strokeWidth: 1, hover: { sizeOffset: 2 } } } } }, { key: "heatmap", value: function () { return { chart: { stacked: !1 }, fill: { opacity: 1 }, dataLabels: { style: { colors: ["#fff"] } }, stroke: { colors: ["#fff"] }, tooltip: { followCursor: !0, marker: { show: !1 }, x: { show: !1 } }, legend: { position: "top", markers: { shape: "square", size: 10, offsetY: 2 } }, grid: { padding: { right: 20 } } } } }, { key: "pie", value: function () { return { chart: { toolbar: { show: !1 } }, plotOptions: { pie: { donut: { labels: { show: !1 } } } }, dataLabels: { formatter: function (t) { return t.toFixed(1) + "%" }, style: { colors: ["#fff"] }, background: { enabled: !1 }, dropShadow: { enabled: !0 } }, stroke: { colors: ["#fff"] }, fill: { opacity: 1, gradient: { shade: "light", stops: [0, 100] } }, tooltip: { theme: "dark", fillSeriesColor: !0 }, legend: { position: "right" } } } }, { key: "donut", value: function () { return { chart: { toolbar: { show: !1 } }, dataLabels: { formatter: function (t) { return t.toFixed(1) + "%" }, style: { colors: ["#fff"] }, background: { enabled: !1 }, dropShadow: { enabled: !0 } }, stroke: { colors: ["#fff"] }, fill: { opacity: 1, gradient: { shade: "light", shadeIntensity: .35, stops: [80, 100], opacityFrom: 1, opacityTo: 1 } }, tooltip: { theme: "dark", fillSeriesColor: !0 }, legend: { position: "right" } } } }, { key: "polarArea", value: function () { return this.opts.yaxis[0].tickAmount = this.opts.yaxis[0].tickAmount ? this.opts.yaxis[0].tickAmount : 6, { chart: { toolbar: { show: !1 } }, dataLabels: { formatter: function (t) { return t.toFixed(1) + "%" }, enabled: !1 }, stroke: { show: !0, width: 2 }, fill: { opacity: .7 }, tooltip: { theme: "dark", fillSeriesColor: !0 }, legend: { position: "right" } } } }, { key: "radar", value: function () { return this.opts.yaxis[0].labels.offsetY = this.opts.yaxis[0].labels.offsetY ? this.opts.yaxis[0].labels.offsetY : 6, { dataLabels: { enabled: !1, style: { fontSize: "11px" } }, stroke: { width: 2 }, markers: { size: 3, strokeWidth: 1, strokeOpacity: 1 }, fill: { opacity: .2 }, tooltip: { shared: !1, intersect: !0, followCursor: !0 }, grid: { show: !1 }, xaxis: { labels: { formatter: function (t) { return t }, style: { colors: ["#a8a8a8"], fontSize: "11px" } }, tooltip: { enabled: !1 }, crosshairs: { show: !1 } } } } }, { key: "radialBar", value: function () { return { chart: { animations: { dynamicAnimation: { enabled: !0, speed: 800 } }, toolbar: { show: !1 } }, fill: { gradient: { shade: "dark", shadeIntensity: .4, inverseColors: !1, type: "diagonal2", opacityFrom: 1, opacityTo: 1, stops: [70, 98, 100] } }, legend: { show: !1, position: "right" }, tooltip: { enabled: !1, fillSeriesColor: !0 } } } }]), t }(), N = function () { function i(t) { e(this, i), this.opts = t } return a(i, [{ key: "init", value: function (e) { var i = e.responsiveOverride, a = this.opts, s = new L, r = new H(a); this.chartType = a.chart.type, "histogram" === this.chartType && (a.chart.type = "bar", a = f.extend({ plotOptions: { bar: { columnWidth: "99.99%" } } }, a)), a = this.extendYAxis(a), a = this.extendAnnotations(a); var n = s.init(), o = {}; if (a && "object" === t(a)) { var l = {}; l = -1 !== ["line", "area", "bar", "candlestick", "rangeBar", "histogram", "bubble", "scatter", "heatmap", "pie", "polarArea", "donut", "radar", "radialBar"].indexOf(a.chart.type) ? r[a.chart.type]() : r.line(), a.chart.brush && a.chart.brush.enabled && (l = r.brush(l)), a.chart.stacked && "100%" === a.chart.stackType && (a = r.stacked100(a)), this.checkForDarkTheme(window.Apex), this.checkForDarkTheme(a), a.xaxis = a.xaxis || window.Apex.xaxis || {}, i || (a.xaxis.convertedCatToNumeric = !1), ((a = this.checkForCatToNumericXAxis(this.chartType, l, a)).chart.sparkline && a.chart.sparkline.enabled || window.Apex.chart && window.Apex.chart.sparkline && window.Apex.chart.sparkline.enabled) && (l = r.sparkline(l)), o = f.extend(n, l) } var h = f.extend(o, window.Apex); return n = f.extend(h, a), n = this.handleUserInputErrors(n) } }, { key: "checkForCatToNumericXAxis", value: function (t, e, i) { var a = new H(i), s = "bar" === t && i.plotOptions && i.plotOptions.bar && i.plotOptions.bar.horizontal, r = "pie" === t || "polarArea" === t || "donut" === t || "radar" === t || "radialBar" === t || "heatmap" === t, n = "datetime" !== i.xaxis.type && "numeric" !== i.xaxis.type, o = i.xaxis.tickPlacement ? i.xaxis.tickPlacement : e.xaxis && e.xaxis.tickPlacement; return s || r || !n || "between" === o || (i = a.convertCatToNumeric(i)), i } }, { key: "extendYAxis", value: function (t, e) { var i = new L; (void 0 === t.yaxis || !t.yaxis || Array.isArray(t.yaxis) && 0 === t.yaxis.length) && (t.yaxis = {}), t.yaxis.constructor !== Array && window.Apex.yaxis && window.Apex.yaxis.constructor !== Array && (t.yaxis = f.extend(t.yaxis, window.Apex.yaxis)), t.yaxis.constructor !== Array ? t.yaxis = [f.extend(i.yAxis, t.yaxis)] : t.yaxis = f.extendArray(t.yaxis, i.yAxis); var a = !1; t.yaxis.forEach((function (t) { t.logarithmic && (a = !0) })); var s = t.series; return e && !s && (s = e.config.series), a && s.length !== t.yaxis.length && s.length && (t.yaxis = s.map((function (e, a) { if (e.name || (s[a].name = "series-".concat(a + 1)), t.yaxis[a]) return t.yaxis[a].seriesName = s[a].name, t.yaxis[a]; var r = f.extend(i.yAxis, t.yaxis[0]); return r.show = !1, r }))), a && s.length > 1 && s.length !== t.yaxis.length && console.warn("A multi-series logarithmic chart should have equal number of series and y-axes. Please make sure to equalize both."), t } }, { key: "extendAnnotations", value: function (t) { return void 0 === t.annotations && (t.annotations = {}, t.annotations.yaxis = [], t.annotations.xaxis = [], t.annotations.points = []), t = this.extendYAxisAnnotations(t), t = this.extendXAxisAnnotations(t), t = this.extendPointAnnotations(t) } }, { key: "extendYAxisAnnotations", value: function (t) { var e = new L; return t.annotations.yaxis = f.extendArray(void 0 !== t.annotations.yaxis ? t.annotations.yaxis : [], e.yAxisAnnotation), t } }, { key: "extendXAxisAnnotations", value: function (t) { var e = new L; return t.annotations.xaxis = f.extendArray(void 0 !== t.annotations.xaxis ? t.annotations.xaxis : [], e.xAxisAnnotation), t } }, { key: "extendPointAnnotations", value: function (t) { var e = new L; return t.annotations.points = f.extendArray(void 0 !== t.annotations.points ? t.annotations.points : [], e.pointAnnotation), t } }, { key: "checkForDarkTheme", value: function (t) { t.theme && "dark" === t.theme.mode && (t.tooltip || (t.tooltip = {}), "light" !== t.tooltip.theme && (t.tooltip.theme = "dark"), t.chart.foreColor || (t.chart.foreColor = "#f6f7f8"), t.chart.background || (t.chart.background = "#424242"), t.theme.palette || (t.theme.palette = "palette4")) } }, { key: "handleUserInputErrors", value: function (t) { var e = t; if (e.tooltip.shared && e.tooltip.intersect) throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false."); if (("bar" === e.chart.type || "rangeBar" === e.chart.type) && e.plotOptions.bar.horizontal) { if (e.yaxis.length > 1) throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false"); e.yaxis[0].reversed && (e.yaxis[0].opposite = !0), e.xaxis.tooltip.enabled = !1, e.yaxis[0].tooltip.enabled = !1, e.chart.zoom.enabled = !1 } return "bar" !== e.chart.type && "rangeBar" !== e.chart.type || e.tooltip.shared && ("barWidth" === e.xaxis.crosshairs.width && e.series.length > 1 && (console.warn('crosshairs.width = "barWidth" is only supported in single series, not in a multi-series barChart.'), e.xaxis.crosshairs.width = "tickWidth"), e.plotOptions.bar.horizontal && (e.states.hover.type = "none", e.tooltip.shared = !1), e.tooltip.followCursor || (console.warn("followCursor option in shared columns cannot be turned off. Please set %ctooltip.followCursor: true", "color: blue;"), e.tooltip.followCursor = !0)), "candlestick" === e.chart.type && e.yaxis[0].reversed && (console.warn("Reversed y-axis in candlestick chart is not supported."), e.yaxis[0].reversed = !1), e.chart.group && 0 === e.yaxis[0].labels.minWidth && console.warn("It looks like you have multiple charts in synchronization. You must provide yaxis.labels.minWidth which must be EQUAL for all grouped charts to prevent incorrect behaviour."), Array.isArray(e.stroke.width) && "line" !== e.chart.type && "area" !== e.chart.type && (console.warn("stroke.width option accepts array only for line and area charts. Reverted back to Number"), e.stroke.width = e.stroke.width[0]), e } }]), i }(), O = function () { function t() { e(this, t) } return a(t, [{ key: "initGlobalVars", value: function (t) { t.series = [], t.seriesCandleO = [], t.seriesCandleH = [], t.seriesCandleL = [], t.seriesCandleC = [], t.seriesRangeStart = [], t.seriesRangeEnd = [], t.seriesRangeBarTimeline = [], t.seriesPercent = [], t.seriesX = [], t.seriesZ = [], t.seriesNames = [], t.seriesTotals = [], t.seriesLog = [], t.seriesColors = [], t.stackedSeriesTotals = [], t.seriesXvalues = [], t.seriesYvalues = [], t.labels = [], t.categoryLabels = [], t.timescaleLabels = [], t.noLabelsProvided = !1, t.resizeTimer = null, t.selectionResizeTimer = null, t.delayedElements = [], t.pointsArray = [], t.dataLabelsRects = [], t.isXNumeric = !1, t.xaxisLabelsCount = 0, t.skipLastTimelinelabel = !1, t.skipFirstTimelinelabel = !1, t.isDataXYZ = !1, t.isMultiLineX = !1, t.isMultipleYAxis = !1, t.maxY = -Number.MAX_VALUE, t.minY = Number.MIN_VALUE, t.minYArr = [], t.maxYArr = [], t.maxX = -Number.MAX_VALUE, t.minX = Number.MAX_VALUE, t.initialMaxX = -Number.MAX_VALUE, t.initialMinX = Number.MAX_VALUE, t.maxDate = 0, t.minDate = Number.MAX_VALUE, t.minZ = Number.MAX_VALUE, t.maxZ = -Number.MAX_VALUE, t.minXDiff = Number.MAX_VALUE, t.yAxisScale = [], t.xAxisScale = null, t.xAxisTicksPositions = [], t.yLabelsCoords = [], t.yTitleCoords = [], t.barPadForNumericAxis = 0, t.padHorizontal = 0, t.xRange = 0, t.yRange = [], t.zRange = 0, t.dataPoints = 0, t.xTickAmount = 0 } }, { key: "globalVars", value: function (t) { return { chartID: null, cuid: null, events: { beforeMount: [], mounted: [], updated: [], clicked: [], selection: [], dataPointSelection: [], zoomed: [], scrolled: [] }, colors: [], clientX: null, clientY: null, fill: { colors: [] }, stroke: { colors: [] }, dataLabels: { style: { colors: [] } }, radarPolygons: { fill: { colors: [] } }, markers: { colors: [], size: t.markers.size, largestSize: 0 }, animationEnded: !1, isTouchDevice: "ontouchstart" in window || navigator.msMaxTouchPoints, isDirty: !1, isExecCalled: !1, initialConfig: null, initialSeries: [], lastXAxis: [], lastYAxis: [], columnSeries: null, labels: [], timescaleLabels: [], noLabelsProvided: !1, allSeriesCollapsed: !1, collapsedSeries: [], collapsedSeriesIndices: [], ancillaryCollapsedSeries: [], ancillaryCollapsedSeriesIndices: [], risingSeries: [], dataFormatXNumeric: !1, capturedSeriesIndex: -1, capturedDataPointIndex: -1, selectedDataPoints: [], goldenPadding: 35, invalidLogScale: !1, ignoreYAxisIndexes: [], yAxisSameScaleIndices: [], maxValsInArrayIndex: 0, radialSize: 0, selection: void 0, zoomEnabled: "zoom" === t.chart.toolbar.autoSelected && t.chart.toolbar.tools.zoom && t.chart.zoom.enabled, panEnabled: "pan" === t.chart.toolbar.autoSelected && t.chart.toolbar.tools.pan, selectionEnabled: "selection" === t.chart.toolbar.autoSelected && t.chart.toolbar.tools.selection, yaxis: null, mousedown: !1, lastClientPosition: {}, visibleXRange: void 0, yValueDecimal: 0, total: 0, SVGNS: "http://www.w3.org/2000/svg", svgWidth: 0, svgHeight: 0, noData: !1, locale: {}, dom: {}, memory: { methodsToExec: [] }, shouldAnimate: !0, skipLastTimelinelabel: !1, skipFirstTimelinelabel: !1, delayedElements: [], axisCharts: !0, isDataXYZ: !1, resized: !1, resizeTimer: null, comboCharts: !1, dataChanged: !1, previousPaths: [], allSeriesHasEqualX: !0, pointsArray: [], dataLabelsRects: [], lastDrawnDataLabelsIndexes: [], hasNullValues: !1, easing: null, zoomed: !1, gridWidth: 0, gridHeight: 0, rotateXLabels: !1, defaultLabels: !1, xLabelFormatter: void 0, yLabelFormatters: [], xaxisTooltipFormatter: void 0, ttKeyFormatter: void 0, ttVal: void 0, ttZFormatter: void 0, LINE_HEIGHT_RATIO: 1.618, xAxisLabelsHeight: 0, xAxisLabelsWidth: 0, yAxisLabelsWidth: 0, scaleX: 1, scaleY: 1, translateX: 0, translateY: 0, translateYAxisX: [], yAxisWidths: [], translateXAxisY: 0, translateXAxisX: 0, tooltip: null } } }, { key: "init", value: function (t) { var e = this.globalVars(t); return this.initGlobalVars(e), e.initialConfig = f.extend({}, t), e.initialSeries = f.clone(t.series), e.lastXAxis = f.clone(e.initialConfig.xaxis), e.lastYAxis = f.clone(e.initialConfig.yaxis), e } }]), t }(), W = function () { function t(i) { e(this, t), this.opts = i } return a(t, [{ key: "init", value: function () { var t = new N(this.opts).init({ responsiveOverride: !1 }); return { config: t, globals: (new O).init(t) } } }]), t }(), B = function () { function t(i) { e(this, t), this.ctx = i, this.w = i.w, this.twoDSeries = [], this.threeDSeries = [], this.twoDSeriesX = [], this.coreUtils = new y(this.ctx) } return a(t, [{ key: "isMultiFormat", value: function () { return this.isFormatXY() || this.isFormat2DArray() } }, { key: "isFormatXY", value: function () { var t = this.w.config.series.slice(), e = new X(this.ctx); if (this.activeSeriesIndex = e.getActiveConfigSeriesIndex(), void 0 !== t[this.activeSeriesIndex].data && t[this.activeSeriesIndex].data.length > 0 && null !== t[this.activeSeriesIndex].data[0] && void 0 !== t[this.activeSeriesIndex].data[0].x && null !== t[this.activeSeriesIndex].data[0]) return !0 } }, { key: "isFormat2DArray", value: function () { var t = this.w.config.series.slice(), e = new X(this.ctx); if (this.activeSeriesIndex = e.getActiveConfigSeriesIndex(), void 0 !== t[this.activeSeriesIndex].data && t[this.activeSeriesIndex].data.length > 0 && void 0 !== t[this.activeSeriesIndex].data[0] && null !== t[this.activeSeriesIndex].data[0] && t[this.activeSeriesIndex].data[0].constructor === Array) return !0 } }, { key: "handleFormat2DArray", value: function (t, e) { var i = this.w.config, a = this.w.globals; i.xaxis.sorted && ("datetime" === i.xaxis.type ? t[e].data.sort((function (t, e) { return new Date(t[0]).getTime() - new Date(e[0]).getTime() })) : "numeric" === i.xaxis.type && t[e].data.sort((function (t, e) { return t[0] - e[0] }))); for (var s = 0; s < t[e].data.length; s++)if (void 0 !== t[e].data[s][1] && (Array.isArray(t[e].data[s][1]) && 4 === t[e].data[s][1].length ? this.twoDSeries.push(f.parseNumber(t[e].data[s][1][3])) : 5 === t[e].data[s].length ? this.twoDSeries.push(f.parseNumber(t[e].data[s][4])) : this.twoDSeries.push(f.parseNumber(t[e].data[s][1])), a.dataFormatXNumeric = !0), "datetime" === i.xaxis.type) { var r = new Date(t[e].data[s][0]); r = new Date(r).getTime(), this.twoDSeriesX.push(r) } else this.twoDSeriesX.push(t[e].data[s][0]); for (var n = 0; n < t[e].data.length; n++)void 0 !== t[e].data[n][2] && (this.threeDSeries.push(t[e].data[n][2]), a.isDataXYZ = !0) } }, { key: "handleFormatXY", value: function (t, e) { var i = this.w.config, a = this.w.globals, s = new D(this.ctx), r = e; a.collapsedSeriesIndices.indexOf(e) > -1 && (r = this.activeSeriesIndex), i.xaxis.sorted && ("datetime" === i.xaxis.type ? t[e].data.sort((function (t, e) { return new Date(t.x).getTime() - new Date(e.x).getTime() })) : "numeric" === i.xaxis.type && t[e].data.sort((function (t, e) { return t.x - e.x }))); for (var n = 0; n < t[e].data.length; n++)void 0 !== t[e].data[n].y && (Array.isArray(t[e].data[n].y) ? this.twoDSeries.push(f.parseNumber(t[e].data[n].y[t[e].data[n].y.length - 1])) : this.twoDSeries.push(f.parseNumber(t[e].data[n].y))); for (var o = 0; o < t[r].data.length; o++) { var l = "string" == typeof t[r].data[o].x, h = Array.isArray(t[r].data[o].x), c = !h && !!s.isValidDate(t[r].data[o].x.toString()); if (l || c) if (l || i.xaxis.convertedCatToNumeric) { var d = a.isBarHorizontal && a.isRangeData; "datetime" !== i.xaxis.type || d ? (this.fallbackToCategory = !0, this.twoDSeriesX.push(t[r].data[o].x)) : this.twoDSeriesX.push(s.parseDate(t[r].data[o].x)) } else "datetime" === i.xaxis.type ? this.twoDSeriesX.push(s.parseDate(t[r].data[o].x.toString())) : (a.dataFormatXNumeric = !0, a.isXNumeric = !0, this.twoDSeriesX.push(parseFloat(t[r].data[o].x))); else h ? (this.fallbackToCategory = !0, this.twoDSeriesX.push(t[r].data[o].x)) : (a.isXNumeric = !0, a.dataFormatXNumeric = !0, this.twoDSeriesX.push(t[r].data[o].x)) } if (t[e].data[0] && void 0 !== t[e].data[0].z) { for (var g = 0; g < t[e].data.length; g++)this.threeDSeries.push(t[e].data[g].z); a.isDataXYZ = !0 } } }, { key: "handleRangeData", value: function (t, e) { var i = this.w.config, a = this.w.globals, s = {}; return this.isFormat2DArray() ? s = this.handleRangeDataFormat("array", t, e) : this.isFormatXY() && (s = this.handleRangeDataFormat("xy", t, e)), a.seriesRangeStart.push(s.start), a.seriesRangeEnd.push(s.end), "datetime" === i.xaxis.type && a.seriesRangeBarTimeline.push(s.rangeUniques), a.seriesRangeBarTimeline.forEach((function (t, e) { t && t.forEach((function (t, e) { t.y.forEach((function (e, i) { for (var a = 0; a < t.y.length; a++)if (i !== a) { var s = e.y1, r = e.y2, n = t.y[a].y1; s <= t.y[a].y2 && n <= r && (t.overlaps.indexOf(e.rangeName) < 0 && t.overlaps.push(e.rangeName), t.overlaps.indexOf(t.y[a].rangeName) < 0 && t.overlaps.push(t.y[a].rangeName)) } })) })) })), s } }, { key: "handleCandleStickData", value: function (t, e) { var i = this.w.globals, a = {}; return this.isFormat2DArray() ? a = this.handleCandleStickDataFormat("array", t, e) : this.isFormatXY() && (a = this.handleCandleStickDataFormat("xy", t, e)), i.seriesCandleO[e] = a.o, i.seriesCandleH[e] = a.h, i.seriesCandleL[e] = a.l, i.seriesCandleC[e] = a.c, a } }, { key: "handleRangeDataFormat", value: function (t, e, i) { var a = [], s = [], r = e[i].data.filter((function (t, e, i) { return e === i.findIndex((function (e) { return e.x === t.x })) })).map((function (t, e) { return { x: t.x, overlaps: [], y: [] } })), n = "Please provide [Start, End] values in valid format. Read more https://apexcharts.com/docs/series/#rangecharts", o = new X(this.ctx).getActiveConfigSeriesIndex(); if ("array" === t) { if (2 !== e[o].data[0][1].length) throw new Error(n); for (var l = 0; l < e[i].data.length; l++)a.push(e[i].data[l][1][0]), s.push(e[i].data[l][1][1]) } else if ("xy" === t) { if (2 !== e[o].data[0].y.length) throw new Error(n); for (var h = function (t) { var n = f.randomId(), o = e[i].data[t].x, l = { y1: e[i].data[t].y[0], y2: e[i].data[t].y[1], rangeName: n }; e[i].data[t].rangeName = n; var h = r.findIndex((function (t) { return t.x === o })); r[h].y.push(l), a.push(l.y1), s.push(l.y2) }, c = 0; c < e[i].data.length; c++)h(c) } return { start: a, end: s, rangeUniques: r } } }, { key: "handleCandleStickDataFormat", value: function (t, e, i) { var a = [], s = [], r = [], n = [], o = "Please provide [Open, High, Low and Close] values in valid format. Read more https://apexcharts.com/docs/series/#candlestick"; if ("array" === t) { if (!Array.isArray(e[i].data[0][1]) && 5 !== e[i].data[0].length || Array.isArray(e[i].data[0][1]) && 4 !== e[i].data[0][1].length) throw new Error(o); if (5 === e[i].data[0].length) for (var l = 0; l < e[i].data.length; l++)a.push(e[i].data[l][1]), s.push(e[i].data[l][2]), r.push(e[i].data[l][3]), n.push(e[i].data[l][4]); else for (var h = 0; h < e[i].data.length; h++)a.push(e[i].data[h][1][0]), s.push(e[i].data[h][1][1]), r.push(e[i].data[h][1][2]), n.push(e[i].data[h][1][3]) } else if ("xy" === t) { if (4 !== e[i].data[0].y.length) throw new Error(o); for (var c = 0; c < e[i].data.length; c++)a.push(e[i].data[c].y[0]), s.push(e[i].data[c].y[1]), r.push(e[i].data[c].y[2]), n.push(e[i].data[c].y[3]) } return { o: a, h: s, l: r, c: n } } }, { key: "parseDataAxisCharts", value: function (t) { for (var e = this, i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : this.ctx, a = this.w.config, s = this.w.globals, r = new D(i), n = a.labels.length > 0 ? a.labels.slice() : a.xaxis.categories.slice(), o = function () { for (var t = 0; t < n.length; t++)if ("string" == typeof n[t]) { if (!r.isValidDate(n[t])) throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date"); e.twoDSeriesX.push(r.parseDate(n[t])) } else e.twoDSeriesX.push(n[t]) }, l = 0; l < t.length; l++) { if (this.twoDSeries = [], this.twoDSeriesX = [], this.threeDSeries = [], void 0 === t[l].data) return void console.error("It is a possibility that you may have not included 'data' property in series."); if ("rangeBar" !== a.chart.type && "rangeArea" !== a.chart.type && "rangeBar" !== t[l].type && "rangeArea" !== t[l].type || (s.isRangeData = !0, this.handleRangeData(t, l)), this.isMultiFormat()) this.isFormat2DArray() ? this.handleFormat2DArray(t, l) : this.isFormatXY() && this.handleFormatXY(t, l), "candlestick" !== a.chart.type && "candlestick" !== t[l].type || this.handleCandleStickData(t, l), s.series.push(this.twoDSeries), s.labels.push(this.twoDSeriesX), s.seriesX.push(this.twoDSeriesX), l !== this.activeSeriesIndex || this.fallbackToCategory || (s.isXNumeric = !0); else { "datetime" === a.xaxis.type ? (s.isXNumeric = !0, o(), s.seriesX.push(this.twoDSeriesX)) : "numeric" === a.xaxis.type && (s.isXNumeric = !0, n.length > 0 && (this.twoDSeriesX = n, s.seriesX.push(this.twoDSeriesX))), s.labels.push(this.twoDSeriesX); var h = t[l].data.map((function (t) { return f.parseNumber(t) })); s.series.push(h) } s.seriesZ.push(this.threeDSeries), void 0 !== t[l].name ? s.seriesNames.push(t[l].name) : s.seriesNames.push("series-" + parseInt(l + 1, 10)), void 0 !== t[l].color ? s.seriesColors.push(t[l].color) : s.seriesColors.push(void 0) } return this.w } }, { key: "parseDataNonAxisCharts", value: function (t) { var e = this.w.globals, i = this.w.config; e.series = t.slice(), e.seriesNames = i.labels.slice(); for (var a = 0; a < e.series.length; a++)void 0 === e.seriesNames[a] && e.seriesNames.push("series-" + (a + 1)); return this.w } }, { key: "handleExternalLabelsData", value: function (t) { var e = this.w.config, i = this.w.globals; if (e.xaxis.categories.length > 0) i.labels = e.xaxis.categories; else if (e.labels.length > 0) i.labels = e.labels.slice(); else if (this.fallbackToCategory) { if (i.labels = i.labels[0], i.seriesRangeBarTimeline.length && (i.seriesRangeBarTimeline.map((function (t) { t.forEach((function (t) { i.labels.indexOf(t.x) < 0 && t.x && i.labels.push(t.x) })) })), i.labels = i.labels.filter((function (t, e, i) { return i.indexOf(t) === e }))), e.xaxis.convertedCatToNumeric) new H(e).convertCatToNumericXaxis(e, this.ctx, i.seriesX[0]), this._generateExternalLabels(t) } else this._generateExternalLabels(t) } }, { key: "_generateExternalLabels", value: function (t) { var e = this.w.globals, i = this.w.config, a = []; if (e.axisCharts) { if (e.series.length > 0) for (var s = 0; s < e.series[e.maxValsInArrayIndex].length; s++)a.push(s + 1); e.seriesX = []; for (var r = 0; r < t.length; r++)e.seriesX.push(a); e.isXNumeric = !0 } if (0 === a.length) { a = e.axisCharts ? [] : e.series.map((function (t, e) { return e + 1 })); for (var n = 0; n < t.length; n++)e.seriesX.push(a) } e.labels = a, i.xaxis.convertedCatToNumeric && (e.categoryLabels = a.map((function (t) { return i.xaxis.labels.formatter(t) }))), e.noLabelsProvided = !0 } }, { key: "parseData", value: function (t) { var e = this.w, i = e.config, a = e.globals; if (this.excludeCollapsedSeriesInYAxis(), this.fallbackToCategory = !1, this.ctx.core.resetGlobals(), this.ctx.core.isMultipleY(), a.axisCharts ? this.parseDataAxisCharts(t) : this.parseDataNonAxisCharts(t), this.coreUtils.getLargestSeries(), "bar" === i.chart.type && i.chart.stacked) { var s = new X(this.ctx); a.series = s.setNullSeriesToZeroValues(a.series) } this.coreUtils.getSeriesTotals(), a.axisCharts && this.coreUtils.getStackedSeriesTotals(), this.coreUtils.getPercentSeries(), a.dataFormatXNumeric || a.isXNumeric && ("numeric" !== i.xaxis.type || 0 !== i.labels.length || 0 !== i.xaxis.categories.length) || this.handleExternalLabelsData(t); for (var r = this.coreUtils.getCategoryLabels(a.labels), n = 0; n < r.length; n++)if (Array.isArray(r[n])) { a.isMultiLineX = !0; break } } }, { key: "excludeCollapsedSeriesInYAxis", value: function () { var t = this, e = this.w; e.globals.ignoreYAxisIndexes = e.globals.collapsedSeries.map((function (i, a) { if (t.w.globals.isMultipleYAxis && !e.config.chart.stacked) return i.index })) } }]), t }(), V = function () { function t(i) { e(this, t), this.ctx = i, this.w = i.w, this.tooltipKeyFormat = "dd MMM" } return a(t, [{ key: "xLabelFormat", value: function (t, e, i) { var a = this.w; if ("datetime" === a.config.xaxis.type && void 0 === a.config.xaxis.labels.formatter && void 0 === a.config.tooltip.x.formatter) { var s = new D(this.ctx); return s.formatDate(s.getDate(e), a.config.tooltip.x.format) } return t(e, i) } }, { key: "defaultGeneralFormatter", value: function (t) { return Array.isArray(t) ? t.map((function (t) { return t })) : t } }, { key: "defaultYFormatter", value: function (t, e, i) { var a = this.w; return f.isNumber(t) && (t = 0 !== a.globals.yValueDecimal ? t.toFixed(void 0 !== e.decimalsInFloat ? e.decimalsInFloat : a.globals.yValueDecimal) : a.globals.maxYArr[i] - a.globals.minYArr[i] < 10 ? t.toFixed(1) : t.toFixed(0)), t } }, { key: "setLabelFormatters", value: function () { var t = this, e = this.w; return e.globals.xLabelFormatter = function (e) { return t.defaultGeneralFormatter(e) }, e.globals.xaxisTooltipFormatter = function (e) { return t.defaultGeneralFormatter(e) }, e.globals.ttKeyFormatter = function (e) { return t.defaultGeneralFormatter(e) }, e.globals.ttZFormatter = function (t) { return t }, e.globals.legendFormatter = function (e) { return t.defaultGeneralFormatter(e) }, void 0 !== e.config.xaxis.labels.formatter ? e.globals.xLabelFormatter = e.config.xaxis.labels.formatter : e.globals.xLabelFormatter = function (t) { if (f.isNumber(t)) { if (!e.config.xaxis.convertedCatToNumeric && "numeric" === e.config.xaxis.type && e.globals.dataPoints < 50) return t.toFixed(1); if (e.globals.isBarHorizontal) if (e.globals.maxY - e.globals.minYArr < 4) return t.toFixed(1); return t.toFixed(0) } return t }, "function" == typeof e.config.tooltip.x.formatter ? e.globals.ttKeyFormatter = e.config.tooltip.x.formatter : e.globals.ttKeyFormatter = e.globals.xLabelFormatter, "function" == typeof e.config.xaxis.tooltip.formatter && (e.globals.xaxisTooltipFormatter = e.config.xaxis.tooltip.formatter), (Array.isArray(e.config.tooltip.y) || void 0 !== e.config.tooltip.y.formatter) && (e.globals.ttVal = e.config.tooltip.y), void 0 !== e.config.tooltip.z.formatter && (e.globals.ttZFormatter = e.config.tooltip.z.formatter), void 0 !== e.config.legend.formatter && (e.globals.legendFormatter = e.config.legend.formatter), e.config.yaxis.forEach((function (i, a) { void 0 !== i.labels.formatter ? e.globals.yLabelFormatters[a] = i.labels.formatter : e.globals.yLabelFormatters[a] = function (s) { return e.globals.xyCharts ? Array.isArray(s) ? s.map((function (e) { return t.defaultYFormatter(e, i, a) })) : t.defaultYFormatter(s, i, a) : s } })), e.globals } }, { key: "heatmapLabelFormatters", value: function () { var t = this.w; if ("heatmap" === t.config.chart.type) { t.globals.yAxisScale[0].result = t.globals.seriesNames.slice(); var e = t.globals.seriesNames.reduce((function (t, e) { return t.length > e.length ? t : e }), 0); t.globals.yAxisScale[0].niceMax = e, t.globals.yAxisScale[0].niceMin = e } } }]), t }(), G = function () { function t(i) { e(this, t), this.ctx = i, this.w = i.w } return a(t, [{ key: "getLabel", value: function (t, e, i, a) { var s = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : [], r = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : "12px", n = this.w, o = void 0 === t[a] ? "" : t[a], l = o, h = n.globals.xLabelFormatter, c = n.config.xaxis.labels.formatter, d = !1, g = new V(this.ctx), u = o; l = g.xLabelFormat(h, o, u), void 0 !== c && (l = c(o, t[a], a)); var f = function (t) { var i = null; return e.forEach((function (t) { "month" === t.unit ? i = "year" : "day" === t.unit ? i = "month" : "hour" === t.unit ? i = "day" : "minute" === t.unit && (i = "hour") })), i === t }; e.length > 0 ? (d = f(e[a].unit), i = e[a].position, l = e[a].value) : "datetime" === n.config.xaxis.type && void 0 === c && (l = ""), void 0 === l && (l = ""), l = Array.isArray(l) ? l : l.toString(); var p = new b(this.ctx), x = {}; return x = n.globals.rotateXLabels ? p.getTextRects(l, parseInt(r, 10), null, "rotate(".concat(n.config.xaxis.labels.rotate, " 0 0)"), !1) : p.getTextRects(l, parseInt(r, 10)), !Array.isArray(l) && (0 === l.indexOf("NaN") || 0 === l.toLowerCase().indexOf("invalid") || l.toLowerCase().indexOf("infinity") >= 0 || s.indexOf(l) >= 0 && !n.config.xaxis.labels.showDuplicates && "hours" !== this.ctx.timeScale.tickInterval && "minutes" !== this.ctx.timeScale.tickInterval) && (l = ""), { x: i, text: l, textRect: x, isBold: d } } }, { key: "checkForOverflowingLabels", value: function (t, e, i, a, s) { var r = this.w; if (0 === t && r.globals.skipFirstTimelinelabel && (e.text = ""), t === i - 1 && r.globals.skipLastTimelinelabel && (e.text = ""), r.config.xaxis.labels.hideOverlappingLabels && a.length > 0) { var n = s[s.length - 1]; e.x < n.textRect.width / (r.globals.rotateXLabels ? Math.abs(r.config.xaxis.labels.rotate) / 12 : 1.01) + n.x && (e.text = "") } return e } }, { key: "checkForReversedLabels", value: function (t, e) { var i = this.w; return i.config.yaxis[t] && i.config.yaxis[t].reversed && e.reverse(), e } }, { key: "isYAxisHidden", value: function (t) { var e = this.w, i = new y(this.ctx); return !e.config.yaxis[t].show || !e.config.yaxis[t].showForNullSeries && i.isSeriesNull(t) && -1 === e.globals.collapsedSeriesIndices.indexOf(t) } }, { key: "drawYAxisTicks", value: function (t, e, i, a, s, r, n) { var o = this.w, l = new b(this.ctx), h = o.globals.translateY; if (a.show && e > 0) { !0 === o.config.yaxis[s].opposite && (t += a.width); for (var c = e; c >= 0; c--) { var d = h + e / 10 + o.config.yaxis[s].labels.offsetY - 1; o.globals.isBarHorizontal && (d = r * c), "heatmap" === o.config.chart.type && (d += r / 2); var g = l.drawLine(t + i.offsetX - a.width + a.offsetX, d + a.offsetY, t + i.offsetX + a.offsetX, d + a.offsetY, a.color); n.add(g), h += r } } } }]), t }(), _ = function () { function t(i) { e(this, t), this.ctx = i, this.w = i.w } return a(t, [{ key: "fixSvgStringForIe11", value: function (t) { if (!f.isIE11()) return t; var e = 0, i = t.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g, (function (t) { return 2 === ++e ? 'xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"' : t })); return i = (i = i.replace(/xmlns:NS\d+=""/g, "")).replace(/NS\d+:(\w+:\w+=")/g, "$1") } }, { key: "getSvgString", value: function () { var t = this.w.globals.dom.Paper.svg(); return this.fixSvgStringForIe11(t) } }, { key: "cleanup", value: function () { var t = this.w, e = t.globals.dom.baseEl.getElementsByClassName("apexcharts-xcrosshairs"), i = t.globals.dom.baseEl.getElementsByClassName("apexcharts-ycrosshairs"), a = t.globals.dom.baseEl.querySelectorAll(".apexcharts-zoom-rect, .apexcharts-selection-rect"); Array.prototype.forEach.call(a, (function (t) { t.setAttribute("width", 0) })), e && e[0] && (e[0].setAttribute("x", -500), e[0].setAttribute("x1", -500), e[0].setAttribute("x2", -500)), i && i[0] && (i[0].setAttribute("y", -100), i[0].setAttribute("y1", -100), i[0].setAttribute("y2", -100)) } }, { key: "svgUrl", value: function () { this.cleanup(); var t = this.getSvgString(), e = new Blob([t], { type: "image/svg+xml;charset=utf-8" }); return URL.createObjectURL(e) } }, { key: "dataURI", value: function () { var t = this; return new Promise((function (e) { var i = t.w; t.cleanup(); var a = document.createElement("canvas"); a.width = i.globals.svgWidth, a.height = parseInt(i.globals.dom.elWrap.style.height, 10); var s = "transparent" === i.config.chart.background ? "#fff" : i.config.chart.background, r = a.getContext("2d"); r.fillStyle = s, r.fillRect(0, 0, a.width, a.height); var n = t.getSvgString(); if (window.canvg && f.isIE11()) { var o = window.canvg.Canvg.fromString(r, n, { ignoreClear: !0, ignoreDimensions: !0 }); o.start(); var l = a.msToBlob(); o.stop(), e({ blob: l }) } else { var h = "data:image/svg+xml," + encodeURIComponent(n), c = new Image; c.crossOrigin = "anonymous", c.onload = function () { if (r.drawImage(c, 0, 0), a.msToBlob) { var t = a.msToBlob(); e({ blob: t }) } else { var i = a.toDataURL("image/png"); e({ imgURI: i }) } }, c.src = h } })) } }, { key: "exportToSVG", value: function () { this.triggerDownload(this.svgUrl(), null, ".svg") } }, { key: "exportToPng", value: function () { var t = this; this.dataURI().then((function (e) { var i = e.imgURI, a = e.blob; a ? navigator.msSaveOrOpenBlob(a, t.w.globals.chartID + ".png") : t.triggerDownload(i, null, ".png") })) } }, { key: "exportToCSV", value: function (t) { var e = this, i = t.series, a = t.columnDelimiter, s = t.lineDelimiter, r = void 0 === s ? "\n" : s, n = this.w, o = [], l = [], h = "data:text/csv;charset=utf-8,", c = new B(this.ctx), d = new G(this.ctx), g = function (t) { var i = ""; if (n.globals.axisCharts) { if ("category" === n.config.xaxis.type || n.config.xaxis.convertedCatToNumeric) if (n.globals.isBarHorizontal) { var a = n.globals.yLabelFormatters[0], s = new X(e.ctx).getActiveConfigSeriesIndex(); i = a(n.globals.labels[t], { seriesIndex: s, dataPointIndex: t, w: n }) } else i = d.getLabel(n.globals.labels, n.globals.timescaleLabels, 0, t).text; "datetime" === n.config.xaxis.type && (n.config.xaxis.categories.length ? i = n.config.xaxis.categories[t] : n.config.labels.length && (i = n.config.labels[t])) } else i = n.config.labels[t]; return i }; o.push(n.config.chart.toolbar.export.csv.headerCategory), i.map((function (t, e) { n.globals.axisCharts && o.push(t.name ? t.name : "series-".concat(e)) })), n.globals.axisCharts || (o.push(n.config.chart.toolbar.export.csv.headerValue), l.push(o.join(a))), i.map((function (t, e) { n.globals.axisCharts ? function (t, e) { if (o.length && 0 === e && l.push(o.join(a)), t.data && t.data.length) for (var s = 0; s < t.data.length; s++) { o = []; var r = g(s); if (r || (c.isFormatXY() ? r = i[e].data[s].x : c.isFormat2DArray() && (r = i[e].data[s] ? i[e].data[s][0] : "")), 0 === e) { o.push((d = r, "datetime" === n.config.xaxis.type && String(d).length >= 10 ? n.config.chart.toolbar.export.csv.dateFormatter(r) : r)); for (var h = 0; h < n.globals.series.length; h++)o.push(n.globals.series[h][s]) } ("candlestick" === n.config.chart.type || t.type && "candlestick" === t.type) && (o.pop(), o.push(n.globals.seriesCandleO[e][s]), o.push(n.globals.seriesCandleH[e][s]), o.push(n.globals.seriesCandleL[e][s]), o.push(n.globals.seriesCandleC[e][s])), "rangeBar" === n.config.chart.type && (o.pop(), o.push(n.globals.seriesRangeStart[e][s]), o.push(n.globals.seriesRangeEnd[e][s])), o.length && l.push(o.join(a)) } var d }(t, e) : ((o = []).push(n.globals.labels[e]), o.push(n.globals.series[e]), l.push(o.join(a))) })), h += l.join(r), this.triggerDownload(encodeURI(h), n.config.chart.toolbar.export.csv.filename, ".csv") } }, { key: "triggerDownload", value: function (t, e, i) { var a = document.createElement("a"); a.href = t, a.download = (e || this.w.globals.chartID) + i, document.body.appendChild(a), a.click(), document.body.removeChild(a) } }]), t }(), j = function () { function t(i) { e(this, t), this.ctx = i, this.w = i.w; var a = this.w; this.axesUtils = new G(i), this.xaxisLabels = a.globals.labels.slice(), a.globals.timescaleLabels.length > 0 && !a.globals.isBarHorizontal && (this.xaxisLabels = a.globals.timescaleLabels.slice()), this.drawnLabels = [], this.drawnLabelsRects = [], "top" === a.config.xaxis.position ? this.offY = 0 : this.offY = a.globals.gridHeight + 1, this.offY = this.offY + a.config.xaxis.axisBorder.offsetY, this.isCategoryBarHorizontal = "bar" === a.config.chart.type && a.config.plotOptions.bar.horizontal, this.xaxisFontSize = a.config.xaxis.labels.style.fontSize, this.xaxisFontFamily = a.config.xaxis.labels.style.fontFamily, this.xaxisForeColors = a.config.xaxis.labels.style.colors, this.xaxisBorderWidth = a.config.xaxis.axisBorder.width, this.isCategoryBarHorizontal && (this.xaxisBorderWidth = a.config.yaxis[0].axisBorder.width.toString()), this.xaxisBorderWidth.indexOf("%") > -1 ? this.xaxisBorderWidth = a.globals.gridWidth * parseInt(this.xaxisBorderWidth, 10) / 100 : this.xaxisBorderWidth = parseInt(this.xaxisBorderWidth, 10), this.xaxisBorderHeight = a.config.xaxis.axisBorder.height, this.yaxis = a.config.yaxis[0] } return a(t, [{ key: "drawXaxis", value: function () { var t, e = this, i = this.w, a = new b(this.ctx), s = a.group({ class: "apexcharts-xaxis", transform: "translate(".concat(i.config.xaxis.offsetX, ", ").concat(i.config.xaxis.offsetY, ")") }), r = a.group({ class: "apexcharts-xaxis-texts-g", transform: "translate(".concat(i.globals.translateXAxisX, ", ").concat(i.globals.translateXAxisY, ")") }); s.add(r); for (var n = i.globals.padHorizontal, o = [], l = 0; l < this.xaxisLabels.length; l++)o.push(this.xaxisLabels[l]); var h = o.length; if (i.globals.isXNumeric) { var c = h > 1 ? h - 1 : h; t = i.globals.gridWidth / c, n = n + t / 2 + i.config.xaxis.labels.offsetX } else t = i.globals.gridWidth / o.length, n = n + t + i.config.xaxis.labels.offsetX; if (i.config.xaxis.labels.show) for (var d = function (s) { var l = n - t / 2 + i.config.xaxis.labels.offsetX; 0 === s && 1 === h && t / 2 === n && 1 === i.globals.dataPoints && (l = i.globals.gridWidth / 2); var c = e.axesUtils.getLabel(o, i.globals.timescaleLabels, l, s, e.drawnLabels, e.xaxisFontSize), d = 28; i.globals.rotateXLabels && (d = 22); (c = e.axesUtils.checkForOverflowingLabels(s, c, h, e.drawnLabels, e.drawnLabelsRects)).text && i.globals.xaxisLabelsCount++; var g = a.drawText({ x: c.x, y: e.offY + i.config.xaxis.labels.offsetY + d - ("top" === i.config.xaxis.position ? i.globals.xAxisHeight + i.config.xaxis.axisTicks.height - 2 : 0), text: c.text, textAnchor: "middle", fontWeight: c.isBold ? 600 : i.config.xaxis.labels.style.fontWeight, fontSize: e.xaxisFontSize, fontFamily: e.xaxisFontFamily, foreColor: Array.isArray(e.xaxisForeColors) ? i.config.xaxis.convertedCatToNumeric ? e.xaxisForeColors[i.globals.minX + s - 1] : e.xaxisForeColors[s] : e.xaxisForeColors, isPlainText: !1, cssClass: "apexcharts-xaxis-label " + i.config.xaxis.labels.style.cssClass }); r.add(g); var u = document.createElementNS(i.globals.SVGNS, "title"); u.textContent = Array.isArray(c.text) ? c.text.join(" ") : c.text, g.node.appendChild(u), "" !== c.text && (e.drawnLabels.push(c.text), e.drawnLabelsRects.push(c)), n += t }, g = 0; g <= h - 1; g++)d(g); if (void 0 !== i.config.xaxis.title.text) { var u = a.group({ class: "apexcharts-xaxis-title" }), f = a.drawText({ x: i.globals.gridWidth / 2 + i.config.xaxis.title.offsetX, y: this.offY - parseFloat(this.xaxisFontSize) + i.globals.xAxisLabelsHeight + i.config.xaxis.title.offsetY, text: i.config.xaxis.title.text, textAnchor: "middle", fontSize: i.config.xaxis.title.style.fontSize, fontFamily: i.config.xaxis.title.style.fontFamily, fontWeight: i.config.xaxis.title.style.fontWeight, foreColor: i.config.xaxis.title.style.color, cssClass: "apexcharts-xaxis-title-text " + i.config.xaxis.title.style.cssClass }); u.add(f), s.add(u) } if (i.config.xaxis.axisBorder.show) { var p = i.globals.barPadForNumericAxis, x = a.drawLine(i.globals.padHorizontal + i.config.xaxis.axisBorder.offsetX - p, this.offY, this.xaxisBorderWidth + p, this.offY, i.config.xaxis.axisBorder.color, 0, this.xaxisBorderHeight); s.add(x) } return s } }, { key: "drawXaxisInversed", value: function (t) { var e, i, a = this.w, s = new b(this.ctx), r = a.config.yaxis[0].opposite ? a.globals.translateYAxisX[t] : 0, n = s.group({ class: "apexcharts-yaxis apexcharts-xaxis-inversed", rel: t }), o = s.group({ class: "apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g", transform: "translate(" + r + ", 0)" }); n.add(o); var l = []; if (a.config.yaxis[t].show) for (var h = 0; h < this.xaxisLabels.length; h++)l.push(this.xaxisLabels[h]); i = -(e = a.globals.gridHeight / l.length) / 2.2; var c = a.globals.yLabelFormatters[0], d = a.config.yaxis[0].labels; if (d.show) for (var g = 0; g <= l.length - 1; g++) { var u = void 0 === l[g] ? "" : l[g]; u = c(u, { seriesIndex: t, dataPointIndex: g, w: a }); var f = 0; Array.isArray(u) && (f = u.length / 2 * parseInt(d.style.fontSize, 10)); var p = s.drawText({ x: d.offsetX - 15, y: i + e + d.offsetY - f, text: u, textAnchor: this.yaxis.opposite ? "start" : "end", foreColor: Array.isArray(d.style.colors) ? d.style.colors[g] : d.style.colors, fontSize: d.style.fontSize, fontFamily: d.style.fontFamily, fontWeight: d.style.fontWeight, isPlainText: !1, cssClass: "apexcharts-yaxis-label " + d.style.cssClass }); o.add(p); var x = document.createElementNS(a.globals.SVGNS, "title"); if (x.textContent = u.text, p.node.appendChild(x), 0 !== a.config.yaxis[t].labels.rotate) { var m = s.rotateAroundCenter(p.node); p.node.setAttribute("transform", "rotate(".concat(a.config.yaxis[t].labels.rotate, " 0 ").concat(m.y, ")")) } i += e } if (void 0 !== a.config.yaxis[0].title.text) { var v = s.group({ class: "apexcharts-yaxis-title apexcharts-xaxis-title-inversed", transform: "translate(" + r + ", 0)" }), y = s.drawText({ x: 0, y: a.globals.gridHeight / 2, text: a.config.yaxis[0].title.text, textAnchor: "middle", foreColor: a.config.yaxis[0].title.style.color, fontSize: a.config.yaxis[0].title.style.fontSize, fontWeight: a.config.yaxis[0].title.style.fontWeight, fontFamily: a.config.yaxis[0].title.style.fontFamily, cssClass: "apexcharts-yaxis-title-text " + a.config.yaxis[0].title.style.cssClass }); v.add(y), n.add(v) } var w = 0; this.isCategoryBarHorizontal && a.config.yaxis[0].opposite && (w = a.globals.gridWidth); var k = a.config.xaxis.axisBorder; if (k.show) { var A = s.drawLine(a.globals.padHorizontal + k.offsetX + w, 1 + k.offsetY, a.globals.padHorizontal + k.offsetX + w, a.globals.gridHeight + k.offsetY, k.color, 0); n.add(A) } return a.config.yaxis[0].axisTicks.show && this.axesUtils.drawYAxisTicks(w, l.length, a.config.yaxis[0].axisBorder, a.config.yaxis[0].axisTicks, 0, e, n), n } }, { key: "drawXaxisTicks", value: function (t, e) { var i = this.w, a = t; if (!(t < 0 || t - 2 > i.globals.gridWidth)) { var s = this.offY + i.config.xaxis.axisTicks.offsetY, r = s + i.config.xaxis.axisTicks.height; if ("top" === i.config.xaxis.position && (r = s - i.config.xaxis.axisTicks.height), i.config.xaxis.axisTicks.show) { var n = new b(this.ctx).drawLine(t + i.config.xaxis.axisTicks.offsetX, s + i.config.xaxis.offsetY, a + i.config.xaxis.axisTicks.offsetX, r + i.config.xaxis.offsetY, i.config.xaxis.axisTicks.color); e.add(n), n.node.classList.add("apexcharts-xaxis-tick") } } } }, { key: "getXAxisTicksPositions", value: function () { var t = this.w, e = [], i = this.xaxisLabels.length, a = t.globals.padHorizontal; if (t.globals.timescaleLabels.length > 0) for (var s = 0; s < i; s++)a = this.xaxisLabels[s].position, e.push(a); else for (var r = i, n = 0; n < r; n++) { var o = r; t.globals.isXNumeric && "bar" !== t.config.chart.type && (o -= 1), a += t.globals.gridWidth / o, e.push(a) } return e } }, { key: "xAxisLabelCorrections", value: function () { var t = this.w, e = new b(this.ctx), i = t.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"), a = t.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text"), s = t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"), r = t.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan"); if (t.globals.rotateXLabels || t.config.xaxis.labels.rotateAlways) for (var n = 0; n < a.length; n++) { var o = e.rotateAroundCenter(a[n]); o.y = o.y - 1, o.x = o.x + 1, a[n].setAttribute("transform", "rotate(".concat(t.config.xaxis.labels.rotate, " ").concat(o.x, " ").concat(o.y, ")")), a[n].setAttribute("text-anchor", "end"); i.setAttribute("transform", "translate(0, ".concat(-10, ")")); var l = a[n].childNodes; t.config.xaxis.labels.trim && Array.prototype.forEach.call(l, (function (i) { e.placeTextWithEllipsis(i, i.textContent, t.config.xaxis.labels.maxHeight - ("bottom" === t.config.legend.position ? 20 : 10)) })) } else !function () { for (var i = t.globals.gridWidth / (t.globals.labels.length + 1), s = 0; s < a.length; s++) { var r = a[s].childNodes; t.config.xaxis.labels.trim && "datetime" !== t.config.xaxis.type && Array.prototype.forEach.call(r, (function (t) { e.placeTextWithEllipsis(t, t.textContent, i) })) } }(); if (s.length > 0) { var h = s[s.length - 1].getBBox(), c = s[0].getBBox(); h.x < -20 && s[s.length - 1].parentNode.removeChild(s[s.length - 1]), c.x + c.width > t.globals.gridWidth && !t.globals.isBarHorizontal && s[0].parentNode.removeChild(s[0]); for (var d = 0; d < r.length; d++)e.placeTextWithEllipsis(r[d], r[d].textContent, t.config.yaxis[0].labels.maxWidth - 2 * parseFloat(t.config.yaxis[0].title.style.fontSize) - 20) } } }]), t }(), U = function () { function t(i) { e(this, t), this.ctx = i, this.w = i.w; var a = this.w; this.xaxisLabels = a.globals.labels.slice(), this.axesUtils = new G(i), this.isTimelineBar = "datetime" === a.config.xaxis.type && a.globals.seriesRangeBarTimeline.length, a.globals.timescaleLabels.length > 0 && (this.xaxisLabels = a.globals.timescaleLabels.slice()) } return a(t, [{ key: "drawGridArea", value: function () { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null, e = this.w, i = new b(this.ctx); null === t && (t = i.group({ class: "apexcharts-grid" })); var a = i.drawLine(e.globals.padHorizontal, 1, e.globals.padHorizontal, e.globals.gridHeight, "transparent"), s = i.drawLine(e.globals.padHorizontal, e.globals.gridHeight, e.globals.gridWidth, e.globals.gridHeight, "transparent"); return t.add(s), t.add(a), t } }, { key: "drawGrid", value: function () { var t = null; return this.w.globals.axisCharts && (t = this.renderGrid(), this.drawGridArea(t.el)), t } }, { key: "createGridMask", value: function () { var t = this.w, e = t.globals, i = new b(this.ctx), a = Array.isArray(t.config.stroke.width) ? 0 : t.config.stroke.width; if (Array.isArray(t.config.stroke.width)) { var s = 0; t.config.stroke.width.forEach((function (t) { s = Math.max(s, t) })), a = s } e.dom.elGridRectMask = document.createElementNS(e.SVGNS, "clipPath"), e.dom.elGridRectMask.setAttribute("id", "gridRectMask".concat(e.cuid)), e.dom.elGridRectMarkerMask = document.createElementNS(e.SVGNS, "clipPath"), e.dom.elGridRectMarkerMask.setAttribute("id", "gridRectMarkerMask".concat(e.cuid)); var r = t.config.chart.type, n = 0, o = 0; ("bar" === r || "rangeBar" === r || t.globals.comboBarCount > 0) && t.globals.isXNumeric && !t.globals.isBarHorizontal && (n = t.config.grid.padding.left, o = t.config.grid.padding.right, e.barPadForNumericAxis > n && (n = e.barPadForNumericAxis, o = e.barPadForNumericAxis)), e.dom.elGridRect = i.drawRect(-a / 2 - n - 2, -a / 2, e.gridWidth + a + o + n + 4, e.gridHeight + a, 0, "#fff"), new y(this).getLargestMarkerSize(); var l = t.globals.markers.largestSize + 1; e.dom.elGridRectMarker = i.drawRect(2 * -l, 2 * -l, e.gridWidth + 4 * l, e.gridHeight + 4 * l, 0, "#fff"), e.dom.elGridRectMask.appendChild(e.dom.elGridRect.node), e.dom.elGridRectMarkerMask.appendChild(e.dom.elGridRectMarker.node); var h = e.dom.baseEl.querySelector("defs"); h.appendChild(e.dom.elGridRectMask), h.appendChild(e.dom.elGridRectMarkerMask) } }, { key: "_drawGridLines", value: function (t) { var e = t.i, i = t.x1, a = t.y1, s = t.x2, r = t.y2, n = t.xCount, o = t.parent, l = this.w; 0 === e && l.globals.skipFirstTimelinelabel || e === n - 1 && l.globals.skipLastTimelinelabel && !l.config.xaxis.labels.formatter || "radar" === l.config.chart.type || (l.config.grid.xaxis.lines.show && this._drawGridLine({ x1: i, y1: a, x2: s, y2: r, parent: o }), new j(this.ctx).drawXaxisTicks(i, this.elg)) } }, { key: "_drawGridLine", value: function (t) { var e = t.x1, i = t.y1, a = t.x2, s = t.y2, r = t.parent, n = this.w, o = r.node.classList.contains("apexcharts-gridlines-horizontal"), l = n.config.grid.strokeDashArray, h = n.globals.barPadForNumericAxis, c = new b(this).drawLine(e - (o ? h : 0), i, a + (o ? h : 0), s, n.config.grid.borderColor, l); c.node.classList.add("apexcharts-gridline"), r.add(c) } }, { key: "_drawGridBandRect", value: function (t) { var e = t.c, i = t.x1, a = t.y1, s = t.x2, r = t.y2, n = t.type, o = this.w, l = new b(this.ctx), h = o.globals.barPadForNumericAxis; if ("column" !== n || "datetime" !== o.config.xaxis.type) { var c = o.config.grid[n].colors[e], d = l.drawRect(i - ("row" === n ? h : 0), a, s + ("row" === n ? 2 * h : 0), r, 0, c, o.config.grid[n].opacity); this.elg.add(d), d.attr("clip-path", "url(#gridRectMask".concat(o.globals.cuid, ")")), d.node.classList.add("apexcharts-grid-".concat(n)) } } }, { key: "_drawXYLines", value: function (t) { var e = this, i = t.xCount, a = t.tickAmount, s = this.w; if (s.config.grid.xaxis.lines.show || s.config.xaxis.axisTicks.show) { var r = s.globals.padHorizontal, n = s.globals.gridHeight; s.globals.timescaleLabels.length ? function (t) { for (var a = t.xC, s = t.x1, r = t.y1, n = t.x2, o = t.y2, l = 0; l < a; l++)s = e.xaxisLabels[l].position, n = e.xaxisLabels[l].position, e._drawGridLines({ i: l, x1: s, y1: r, x2: n, y2: o, xCount: i, parent: e.elgridLinesV }) }({ xC: i, x1: r, y1: 0, x2: void 0, y2: n }) : (s.globals.isXNumeric && (i = s.globals.xAxisScale.result.length), s.config.xaxis.convertedCatToNumeric && (i = s.globals.xaxisLabelsCount), function (t) { for (var a = t.xC, r = t.x1, n = t.y1, o = t.x2, l = t.y2, h = 0; h < a + (s.globals.isXNumeric ? 0 : 1); h++)0 === h && 1 === a && 1 === s.globals.dataPoints && (o = r = s.globals.gridWidth / 2), e._drawGridLines({ i: h, x1: r, y1: n, x2: o, y2: l, xCount: i, parent: e.elgridLinesV }), o = r += s.globals.gridWidth / (s.globals.isXNumeric ? a - 1 : a) }({ xC: i, x1: r, y1: 0, x2: void 0, y2: n })) } if (s.config.grid.yaxis.lines.show) { var o = 0, l = 0, h = s.globals.gridWidth, c = a + 1; this.isTimelineBar && (c = s.globals.labels.length); for (var d = 0; d < c + (this.isTimelineBar ? 1 : 0); d++)this._drawGridLine({ x1: 0, y1: o, x2: h, y2: l, parent: this.elgridLinesH }), l = o += s.globals.gridHeight / (this.isTimelineBar ? c : a) } } }, { key: "_drawInvertedXYLines", value: function (t) { var e = t.xCount, i = this.w; if (i.config.grid.xaxis.lines.show || i.config.xaxis.axisTicks.show) for (var a, s = i.globals.padHorizontal, r = i.globals.gridHeight, n = 0; n < e + 1; n++) { i.config.grid.xaxis.lines.show && this._drawGridLine({ x1: s, y1: 0, x2: a, y2: r, parent: this.elgridLinesV }), new j(this.ctx).drawXaxisTicks(s, this.elg), a = s = s + i.globals.gridWidth / e + .3 } if (i.config.grid.yaxis.lines.show) for (var o = 0, l = 0, h = i.globals.gridWidth, c = 0; c < i.globals.dataPoints + 1; c++)this._drawGridLine({ x1: 0, y1: o, x2: h, y2: l, parent: this.elgridLinesH }), l = o += i.globals.gridHeight / i.globals.dataPoints } }, { key: "renderGrid", value: function () { var t = this.w, e = new b(this.ctx); this.elg = e.group({ class: "apexcharts-grid" }), this.elgridLinesH = e.group({ class: "apexcharts-gridlines-horizontal" }), this.elgridLinesV = e.group({ class: "apexcharts-gridlines-vertical" }), this.elg.add(this.elgridLinesH), this.elg.add(this.elgridLinesV), t.config.grid.show || (this.elgridLinesV.hide(), this.elgridLinesH.hide()); for (var i, a = t.globals.yAxisScale.length ? t.globals.yAxisScale[0].result.length - 1 : 5, s = 0; s < t.globals.series.length && (void 0 !== t.globals.yAxisScale[s] && (a = t.globals.yAxisScale[s].result.length - 1), !(a > 2)); s++); return !t.globals.isBarHorizontal || this.isTimelineBar ? (i = this.xaxisLabels.length, this.isTimelineBar && (a = t.globals.labels.length, t.config.xaxis.tickAmount && t.config.xaxis.labels.formatter && (i = t.config.xaxis.tickAmount)), this._drawXYLines({ xCount: i, tickAmount: a })) : (i = a, a = t.globals.xTickAmount, this._drawInvertedXYLines({ xCount: i, tickAmount: a })), this.drawGridBands(i, a), { el: this.elg, xAxisTickWidth: t.globals.gridWidth / i } } }, { key: "drawGridBands", value: function (t, e) { var i = this.w; if (void 0 !== i.config.grid.row.colors && i.config.grid.row.colors.length > 0) for (var a = 0, s = i.globals.gridHeight / e, r = i.globals.gridWidth, n = 0, o = 0; n < e; n++ , o++)o >= i.config.grid.row.colors.length && (o = 0), this._drawGridBandRect({ c: o, x1: 0, y1: a, x2: r, y2: s, type: "row" }), a += i.globals.gridHeight / e; if (void 0 !== i.config.grid.column.colors && i.config.grid.column.colors.length > 0) for (var l = i.globals.isBarHorizontal || "category" !== i.config.xaxis.type && !i.config.xaxis.convertedCatToNumeric ? t : t - 1, h = i.globals.padHorizontal, c = i.globals.padHorizontal + i.globals.gridWidth / l, d = i.globals.gridHeight, g = 0, u = 0; g < t; g++ , u++)u >= i.config.grid.column.colors.length && (u = 0), this._drawGridBandRect({ c: u, x1: h, y1: 0, x2: c, y2: d, type: "column" }), h += i.globals.gridWidth / l } }]), t }(), q = function () { function t(i) { e(this, t), this.ctx = i, this.w = i.w } return a(t, [{ key: "niceScale", value: function (t, e) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 10, a = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0, s = arguments.length > 4 ? arguments[4] : void 0, r = this.w; if ("dataPoints" === i && (i = r.globals.dataPoints - 1), t === Number.MIN_VALUE && 0 === e || !f.isNumber(t) && !f.isNumber(e) || t === Number.MIN_VALUE && e === -Number.MAX_VALUE) { t = 0, e = i; var n = this.linearScale(t, e, i); return n } t > e ? (console.warn("axis.min cannot be greater than axis.max"), e = t + .1) : t === e && (t = 0 === t ? 0 : t - .5, e = 0 === e ? 2 : e + .5); var o = [], l = Math.abs(e - t); l < 1 && s && ("candlestick" === r.config.chart.type || "candlestick" === r.config.series[a].type || r.globals.isRangeData) && (e *= 1.01); var h = i + 1; h < 2 ? h = 2 : h > 2 && (h -= 2); var c = l / h, d = Math.floor(f.log10(c)), g = Math.pow(10, d), u = Math.round(c / g); u < 1 && (u = 1); var p = u * g, x = p * Math.floor(t / p), b = p * Math.ceil(e / p), m = x; if (s && l > 2) { for (; o.push(m), !((m += p) > b);); return { result: o, niceMin: o[0], niceMax: o[o.length - 1] } } var v = t; (o = []).push(v); for (var y = Math.abs(e - t) / i, w = 0; w <= i; w++)v += y, o.push(v); return o[o.length - 2] >= e && o.pop(), { result: o, niceMin: o[0], niceMax: o[o.length - 1] } } }, { key: "linearScale", value: function (t, e) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 10, a = Math.abs(e - t), s = a / i; i === Number.MAX_VALUE && (i = 10, s = 1); for (var r = [], n = t; i >= 0;)r.push(n), n += s, i -= 1; return { result: r, niceMin: r[0], niceMax: r[r.length - 1] } } }, { key: "logarithmicScale", value: function (t, e, i, a) { (e <= 0 || e === Number.MIN_VALUE) && (e = .01); for (var s = Math.log(e) / Math.log(10), r = Math.log(i) / Math.log(10), n = Math.abs(i - e) / a, o = [], l = e; a >= 0;)o.push(l), l += n, a -= 1; var h = o.map((function (t, a) { t <= 0 && (t = .01); var n = (r - s) / (i - e), o = Math.pow(10, s + n * (t - s)); return Math.round(o / f.roundToBase(o, 10)) * f.roundToBase(o, 10) })); return 0 === h[0] && (h[0] = 1), { result: h, niceMin: h[0], niceMax: h[h.length - 1] } } }, { key: "setYScaleForIndex", value: function (t, e, i) { var a = this.w.globals, s = this.w.config, r = a.isBarHorizontal ? s.xaxis : s.yaxis[t]; void 0 === a.yAxisScale[t] && (a.yAxisScale[t] = []); var n = Math.abs(i - e); if (r.logarithmic && n <= 5 && (a.invalidLogScale = !0), r.logarithmic && n > 5) a.allSeriesCollapsed = !1, a.yAxisScale[t] = this.logarithmicScale(t, e, i, r.tickAmount ? r.tickAmount : Math.floor(Math.log10(i))); else if (i !== -Number.MAX_VALUE && f.isNumber(i)) if (a.allSeriesCollapsed = !1, void 0 === r.min && void 0 === r.max || r.forceNiceScale) { var o = void 0 === s.yaxis[t].max && void 0 === s.yaxis[t].min || s.yaxis[t].forceNiceScale; a.yAxisScale[t] = this.niceScale(e, i, r.tickAmount ? r.tickAmount : n < 5 && n > 1 ? n + 1 : 5, t, o) } else a.yAxisScale[t] = this.linearScale(e, i, r.tickAmount); else a.yAxisScale[t] = this.linearScale(0, 5, 5) } }, { key: "setXScale", value: function (t, e) { var i = this.w, a = i.globals, s = i.config.xaxis, r = Math.abs(e - t); return e !== -Number.MAX_VALUE && f.isNumber(e) ? a.xAxisScale = this.niceScale(t, e, s.tickAmount ? s.tickAmount : r < 5 && r > 1 ? r + 1 : 5, 0) : a.xAxisScale = this.linearScale(0, 5, 5), a.xAxisScale } }, { key: "setMultipleYScales", value: function () { var t = this, e = this.w.globals, i = this.w.config, a = e.minYArr.concat([]), s = e.maxYArr.concat([]), r = []; i.yaxis.forEach((function (e, n) { var o = n; i.series.forEach((function (t, i) { t.name === e.seriesName && (o = i, n !== i ? r.push({ index: i, similarIndex: n, alreadyExists: !0 }) : r.push({ index: i })) })); var l = a[o], h = s[o]; t.setYScaleForIndex(n, l, h) })), this.sameScaleInMultipleAxes(a, s, r) } }, { key: "sameScaleInMultipleAxes", value: function (t, e, i) { var a = this, s = this.w.config, r = this.w.globals, n = []; i.forEach((function (t) { t.alreadyExists && (void 0 === n[t.index] && (n[t.index] = []), n[t.index].push(t.index), n[t.index].push(t.similarIndex)) })), r.yAxisSameScaleIndices = n, n.forEach((function (t, e) { n.forEach((function (i, a) { var s, r; e !== a && (s = t, r = i, s.filter((function (t) { return -1 !== r.indexOf(t) }))).length > 0 && (n[e] = n[e].concat(n[a])) })) })); var o = n.map((function (t) { return t.filter((function (e, i) { return t.indexOf(e) === i })) })).map((function (t) { return t.sort() })); n = n.filter((function (t) { return !!t })); var l = o.slice(), h = l.map((function (t) { return JSON.stringify(t) })); l = l.filter((function (t, e) { return h.indexOf(JSON.stringify(t)) === e })); var c = [], d = []; t.forEach((function (t, i) { l.forEach((function (a, s) { a.indexOf(i) > -1 && (void 0 === c[s] && (c[s] = [], d[s] = []), c[s].push({ key: i, value: t }), d[s].push({ key: i, value: e[i] })) })) })); var g = Array.apply(null, Array(l.length)).map(Number.prototype.valueOf, Number.MIN_VALUE), u = Array.apply(null, Array(l.length)).map(Number.prototype.valueOf, -Number.MAX_VALUE); c.forEach((function (t, e) { t.forEach((function (t, i) { g[e] = Math.min(t.value, g[e]) })) })), d.forEach((function (t, e) { t.forEach((function (t, i) { u[e] = Math.max(t.value, u[e]) })) })), t.forEach((function (t, e) { d.forEach((function (t, i) { var n = g[i], o = u[i]; s.chart.stacked && (o = 0, t.forEach((function (t, e) { t.value !== -Number.MAX_VALUE && (o += t.value), n !== Number.MIN_VALUE && (n += c[i][e].value) }))), t.forEach((function (i, l) { t[l].key === e && (void 0 !== s.yaxis[e].min && (n = "function" == typeof s.yaxis[e].min ? s.yaxis[e].min(r.minY) : s.yaxis[e].min), void 0 !== s.yaxis[e].max && (o = "function" == typeof s.yaxis[e].max ? s.yaxis[e].max(r.maxY) : s.yaxis[e].max), a.setYScaleForIndex(e, n, o)) })) })) })) } }, { key: "autoScaleY", value: function (t, e, i) { t || (t = this); var a = t.w; if (a.globals.isMultipleYAxis || a.globals.collapsedSeries.length) return console.warn("autoScaleYaxis is not supported in a multi-yaxis chart."), e; var s = a.globals.seriesX[0], r = a.config.chart.stacked; return e.forEach((function (t, n) { for (var o = 0, l = 0; l < s.length; l++)if (s[l] >= i.xaxis.min) { o = l; break } var h, c, d = a.globals.minYArr[n], g = a.globals.maxYArr[n], u = a.globals.stackedSeriesTotals; a.globals.series.forEach((function (n, l) { var f = n[o]; r ? (f = u[o], h = c = f, u.forEach((function (t, e) { s[e] <= i.xaxis.max && s[e] >= i.xaxis.min && (t > c && null !== t && (c = t), n[e] < h && null !== n[e] && (h = n[e])) }))) : (h = c = f, n.forEach((function (t, e) { if (s[e] <= i.xaxis.max && s[e] >= i.xaxis.min) { var r = t, n = t; a.globals.series.forEach((function (i, a) { null !== t && (r = Math.min(i[e], r), n = Math.max(i[e], n)) })), n > c && null !== n && (c = n), r < h && null !== r && (h = r) } }))), void 0 === h && void 0 === c && (h = d, c = g), (c *= c < 0 ? .9 : 1.1) < 0 && c < g && (c = g), (h *= h < 0 ? 1.1 : .9) < 0 && h > d && (h = d), e.length > 1 ? (e[l].min = void 0 === t.min ? h : t.min, e[l].max = void 0 === t.max ? c : t.max) : (e[0].min = void 0 === t.min ? h : t.min, e[0].max = void 0 === t.max ? c : t.max) })) })), e } }]), t }(), Z = function () { function t(i) { e(this, t), this.ctx = i, this.w = i.w, this.scales = new q(i) } return a(t, [{ key: "init", value: function () { this.setYRange(), this.setXRange(), this.setZRange() } }, { key: "getMinYMaxY", value: function (t) { var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : Number.MAX_VALUE, i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : -Number.MAX_VALUE, a = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : null, s = this.w.config, r = this.w.globals, n = -Number.MAX_VALUE, o = Number.MIN_VALUE; null === a && (a = t + 1); var l = r.series, h = l, c = l; "candlestick" === s.chart.type ? (h = r.seriesCandleL, c = r.seriesCandleH) : r.isRangeData && (h = r.seriesRangeStart, c = r.seriesRangeEnd); for (var d = t; d < a; d++) { r.dataPoints = Math.max(r.dataPoints, l[d].length); for (var g = 0; g < r.series[d].length; g++) { var u = l[d][g]; null !== u && f.isNumber(u) ? (n = Math.max(n, c[d][g]), e = Math.min(e, h[d][g]), i = Math.max(i, h[d][g]), "candlestick" === this.w.config.chart.type && (n = Math.max(n, r.seriesCandleO[d][g]), n = Math.max(n, r.seriesCandleH[d][g]), n = Math.max(n, r.seriesCandleL[d][g]), i = n = Math.max(n, r.seriesCandleC[d][g])), f.isFloat(u) && (u = f.noExponents(u), r.yValueDecimal = Math.max(r.yValueDecimal, u.toString().split(".")[1].length)), o > h[d][g] && h[d][g] < 0 && (o = h[d][g])) : r.hasNullValues = !0 } } return "rangeBar" === s.chart.type && r.seriesRangeStart.length && r.isBarHorizontal && "datetime" === s.xaxis.type && (o = e), "bar" === s.chart.type && (o < 0 && n < 0 && (n = 0), o === Number.MIN_VALUE && (o = 0)), { minY: o, maxY: n, lowestY: e, highestY: i } } }, { key: "setYRange", value: function () { var t = this.w.globals, e = this.w.config; t.maxY = -Number.MAX_VALUE, t.minY = Number.MIN_VALUE; var i = Number.MAX_VALUE; if (t.isMultipleYAxis) for (var a = 0; a < t.series.length; a++) { var s = this.getMinYMaxY(a, i, null, a + 1); t.minYArr.push(s.minY), t.maxYArr.push(s.maxY), i = s.lowestY } var r = this.getMinYMaxY(0, i, null, t.series.length); if (t.minY = r.minY, t.maxY = r.maxY, i = r.lowestY, e.chart.stacked && this._setStackedMinMax(), ("line" === e.chart.type || "area" === e.chart.type || "candlestick" === e.chart.type || "rangeBar" === e.chart.type && !t.isBarHorizontal) && t.minY === Number.MIN_VALUE && i !== -Number.MAX_VALUE && i !== t.maxY) { var n = t.maxY - i; i >= 0 && i <= 10 && (n = 0), t.minY = i - 5 * n / 100, i > 0 && t.minY < 0 && (t.minY = 0), t.maxY = t.maxY + 5 * n / 100 } if (e.yaxis.forEach((function (e, i) { void 0 !== e.max && ("number" == typeof e.max ? t.maxYArr[i] = e.max : "function" == typeof e.max && (t.maxYArr[i] = e.max(t.maxY)), t.maxY = t.maxYArr[i]), void 0 !== e.min && ("number" == typeof e.min ? t.minYArr[i] = e.min : "function" == typeof e.min && (t.minYArr[i] = e.min(t.minY)), t.minY = t.minYArr[i]) })), t.isBarHorizontal) { ["min", "max"].forEach((function (i) { void 0 !== e.xaxis[i] && "number" == typeof e.xaxis[i] && ("min" === i ? t.minY = e.xaxis[i] : t.maxY = e.xaxis[i]) })) } return t.isMultipleYAxis ? (this.scales.setMultipleYScales(), t.minY = i, t.yAxisScale.forEach((function (e, i) { t.minYArr[i] = e.niceMin, t.maxYArr[i] = e.niceMax }))) : (this.scales.setYScaleForIndex(0, t.minY, t.maxY), t.minY = t.yAxisScale[0].niceMin, t.maxY = t.yAxisScale[0].niceMax, t.minYArr[0] = t.yAxisScale[0].niceMin, t.maxYArr[0] = t.yAxisScale[0].niceMax), { minY: t.minY, maxY: t.maxY, minYArr: t.minYArr, maxYArr: t.maxYArr } } }, { key: "setXRange", value: function () { var t = this.w.globals, e = this.w.config, i = "numeric" === e.xaxis.type || "datetime" === e.xaxis.type || "category" === e.xaxis.type && !t.noLabelsProvided || t.noLabelsProvided || t.isXNumeric; if (t.isXNumeric && function () { for (var e = 0; e < t.series.length; e++)if (t.labels[e]) for (var i = 0; i < t.labels[e].length; i++)null !== t.labels[e][i] && f.isNumber(t.labels[e][i]) && (t.maxX = Math.max(t.maxX, t.labels[e][i]), t.initialMaxX = Math.max(t.maxX, t.labels[e][i]), t.minX = Math.min(t.minX, t.labels[e][i]), t.initialMinX = Math.min(t.minX, t.labels[e][i])) }(), t.noLabelsProvided && 0 === e.xaxis.categories.length && (t.maxX = t.labels[t.labels.length - 1], t.initialMaxX = t.labels[t.labels.length - 1], t.minX = 1, t.initialMinX = 1), t.isXNumeric || t.noLabelsProvided || t.dataFormatXNumeric) { var a; if (void 0 === e.xaxis.tickAmount ? (a = Math.round(t.svgWidth / 150), "numeric" === e.xaxis.type && t.dataPoints < 30 && (a = t.dataPoints - 1), a > t.dataPoints && 0 !== t.dataPoints && (a = t.dataPoints - 1)) : "dataPoints" === e.xaxis.tickAmount ? (t.series.length > 1 && (a = t.series[t.maxValsInArrayIndex].length - 1), t.isXNumeric && (a = t.maxX - t.minX - 1)) : a = e.xaxis.tickAmount, t.xTickAmount = a, void 0 !== e.xaxis.max && "number" == typeof e.xaxis.max && (t.maxX = e.xaxis.max), void 0 !== e.xaxis.min && "number" == typeof e.xaxis.min && (t.minX = e.xaxis.min), void 0 !== e.xaxis.range && (t.minX = t.maxX - e.xaxis.range), t.minX !== Number.MAX_VALUE && t.maxX !== -Number.MAX_VALUE) if (e.xaxis.convertedCatToNumeric && !t.dataFormatXNumeric) { for (var s = [], r = t.minX - 1; r < t.maxX; r++)s.push(r + 1); t.xAxisScale = { result: s, niceMin: s[0], niceMax: s[s.length - 1] } } else t.xAxisScale = this.scales.setXScale(t.minX, t.maxX); else t.xAxisScale = this.scales.linearScale(1, a, a), t.noLabelsProvided && t.labels.length > 0 && (t.xAxisScale = this.scales.linearScale(1, t.labels.length, a - 1), t.seriesX = t.labels.slice()); i && (t.labels = t.xAxisScale.result.slice()) } return t.isBarHorizontal && t.labels.length && (t.xTickAmount = t.labels.length), this._handleSingleDataPoint(), this._getMinXDiff(), { minX: t.minX, maxX: t.maxX } } }, { key: "setZRange", value: function () { var t = this.w.globals; if (t.isDataXYZ) for (var e = 0; e < t.series.length; e++)if (void 0 !== t.seriesZ[e]) for (var i = 0; i < t.seriesZ[e].length; i++)null !== t.seriesZ[e][i] && f.isNumber(t.seriesZ[e][i]) && (t.maxZ = Math.max(t.maxZ, t.seriesZ[e][i]), t.minZ = Math.min(t.minZ, t.seriesZ[e][i])) } }, { key: "_handleSingleDataPoint", value: function () { var t = this.w.globals, e = this.w.config; if (t.minX === t.maxX) { var i = new D(this.ctx); if ("datetime" === e.xaxis.type) { var a = i.getDate(t.minX); a.setUTCDate(a.getDate() - 2), t.minX = new Date(a).getTime(); var s = i.getDate(t.maxX); s.setUTCDate(s.getDate() + 2), t.maxX = new Date(s).getTime() } else ("numeric" === e.xaxis.type || "category" === e.xaxis.type && !t.noLabelsProvided) && (t.minX = t.minX - 2, t.initialMinX = t.minX, t.maxX = t.maxX + 2, t.initialMaxX = t.maxX) } } }, { key: "_getMinXDiff", value: function () { var t = this.w.globals; t.isXNumeric && t.seriesX.forEach((function (e, i) { 1 === e.length && e.push(t.seriesX[t.maxValsInArrayIndex][t.seriesX[t.maxValsInArrayIndex].length - 1]); var a = e.slice(); a.sort((function (t, e) { return t - e })), a.forEach((function (e, a) { if (a > 0) { var s = e - t.seriesX[i][a - 1]; s > 0 && (t.minXDiff = Math.min(s, t.minXDiff)) } })), 1 === t.dataPoints && t.minXDiff === Number.MAX_VALUE && (t.minXDiff = .5) })) } }, { key: "_setStackedMinMax", value: function () { var t = this.w.globals, e = [], i = []; if (t.series.length) for (var a = 0; a < t.series[t.maxValsInArrayIndex].length; a++)for (var s = 0, r = 0, n = 0; n < t.series.length; n++)null !== t.series[n][a] && f.isNumber(t.series[n][a]) && (t.series[n][a] > 0 ? s = s + parseFloat(t.series[n][a]) + 1e-4 : r += parseFloat(t.series[n][a])), n === t.series.length - 1 && (e.push(s), i.push(r)); for (var o = 0; o < e.length; o++)t.maxY = Math.max(t.maxY, e[o]), t.minY = Math.min(t.minY, i[o]) } }]), t }(), $ = function () { function t(i) { e(this, t), this.ctx = i, this.w = i.w; var a = this.w; this.xaxisFontSize = a.config.xaxis.labels.style.fontSize, this.axisFontFamily = a.config.xaxis.labels.style.fontFamily, this.xaxisForeColors = a.config.xaxis.labels.style.colors, this.isCategoryBarHorizontal = "bar" === a.config.chart.type && a.config.plotOptions.bar.horizontal, this.xAxisoffX = 0, "bottom" === a.config.xaxis.position && (this.xAxisoffX = a.globals.gridHeight), this.drawnLabels = [], this.axesUtils = new G(i) } return a(t, [{ key: "drawYaxis", value: function (t) { var e = this.w, i = new b(this.ctx), a = e.config.yaxis[t].labels.style, s = a.fontSize, r = a.fontFamily, n = a.fontWeight, o = i.group({ class: "apexcharts-yaxis", rel: t, transform: "translate(" + e.globals.translateYAxisX[t] + ", 0)" }); if (this.axesUtils.isYAxisHidden(t)) return o; var l = i.group({ class: "apexcharts-yaxis-texts-g" }); o.add(l); var h = e.globals.yAxisScale[t].result.length - 1, c = e.globals.gridHeight / h, d = e.globals.translateY, g = e.globals.yLabelFormatters[t], u = e.globals.yAxisScale[t].result.slice(); u = this.axesUtils.checkForReversedLabels(t, u); var f = ""; if (e.config.yaxis[t].labels.show) for (var p = function (o) { var p = u[o]; p = g(p, o); var x = e.config.yaxis[t].labels.padding; e.config.yaxis[t].opposite && 0 !== e.config.yaxis.length && (x *= -1); var b = i.drawText({ x: x, y: d + h / 10 + e.config.yaxis[t].labels.offsetY + 1, text: p, textAnchor: e.config.yaxis[t].opposite ? "start" : "end", fontSize: s, fontFamily: r, fontWeight: n, foreColor: Array.isArray(a.colors) ? a.colors[o] : a.colors, isPlainText: !1, cssClass: "apexcharts-yaxis-label " + a.cssClass }); if (o === h && (f = b), l.add(b), 0 !== e.config.yaxis[t].labels.rotate) { var m = i.rotateAroundCenter(f.node), v = i.rotateAroundCenter(b.node); b.node.setAttribute("transform", "rotate(".concat(e.config.yaxis[t].labels.rotate, " ").concat(m.x, " ").concat(v.y, ")")) } d += c }, x = h; x >= 0; x--)p(x); if (void 0 !== e.config.yaxis[t].title.text) { var m = i.group({ class: "apexcharts-yaxis-title" }), v = 0; e.config.yaxis[t].opposite && (v = e.globals.translateYAxisX[t]); var y = i.drawText({ x: v, y: e.globals.gridHeight / 2 + e.globals.translateY + e.config.yaxis[t].title.offsetY, text: e.config.yaxis[t].title.text, textAnchor: "end", foreColor: e.config.yaxis[t].title.style.color, fontSize: e.config.yaxis[t].title.style.fontSize, fontWeight: e.config.yaxis[t].title.style.fontWeight, fontFamily: e.config.yaxis[t].title.style.fontFamily, cssClass: "apexcharts-yaxis-title-text " + e.config.yaxis[t].title.style.cssClass }); m.add(y), o.add(m) } var w = e.config.yaxis[t].axisBorder, k = 31 + w.offsetX; if (e.config.yaxis[t].opposite && (k = -31 - w.offsetX), w.show) { var A = i.drawLine(k, e.globals.translateY + w.offsetY - 2, k, e.globals.gridHeight + e.globals.translateY + w.offsetY + 2, w.color, 0, w.width); o.add(A) } return e.config.yaxis[t].axisTicks.show && this.axesUtils.drawYAxisTicks(k, h, w, e.config.yaxis[t].axisTicks, t, c, o), o } }, { key: "drawYaxisInversed", value: function (t) { var e = this.w, i = new b(this.ctx), a = i.group({ class: "apexcharts-xaxis apexcharts-yaxis-inversed" }), s = i.group({ class: "apexcharts-xaxis-texts-g", transform: "translate(".concat(e.globals.translateXAxisX, ", ").concat(e.globals.translateXAxisY, ")") }); a.add(s); var r = e.globals.yAxisScale[t].result.length - 1, n = e.globals.gridWidth / r + .1, o = n + e.config.xaxis.labels.offsetX, l = e.globals.xLabelFormatter, h = e.globals.yAxisScale[t].result.slice(), c = e.globals.timescaleLabels; c.length > 0 && (this.xaxisLabels = c.slice(), r = (h = c.slice()).length), h = this.axesUtils.checkForReversedLabels(t, h); var d = c.length; if (e.config.xaxis.labels.show) for (var g = d ? 0 : r; d ? g < d : g >= 0; d ? g++ : g--) { var u = h[g]; u = l(u, g); var f = e.globals.gridWidth + e.globals.padHorizontal - (o - n + e.config.xaxis.labels.offsetX); if (c.length) { var p = this.axesUtils.getLabel(h, c, f, g, this.drawnLabels, this.xaxisFontSize); f = p.x, u = p.text, this.drawnLabels.push(p.text), 0 === g && e.globals.skipFirstTimelinelabel && (u = ""), g === h.length - 1 && e.globals.skipLastTimelinelabel && (u = "") } var x = i.drawText({ x: f, y: this.xAxisoffX + e.config.xaxis.labels.offsetY + 30 - ("top" === e.config.xaxis.position ? e.globals.xAxisHeight + e.config.xaxis.axisTicks.height - 2 : 0), text: u, textAnchor: "middle", foreColor: Array.isArray(this.xaxisForeColors) ? this.xaxisForeColors[t] : this.xaxisForeColors, fontSize: this.xaxisFontSize, fontFamily: this.xaxisFontFamily, fontWeight: e.config.xaxis.labels.style.fontWeight, isPlainText: !1, cssClass: "apexcharts-xaxis-label " + e.config.xaxis.labels.style.cssClass }); s.add(x), x.tspan(u); var m = document.createElementNS(e.globals.SVGNS, "title"); m.textContent = u, x.node.appendChild(m), o += n } return this.inversedYAxisTitleText(a), this.inversedYAxisBorder(a), a } }, { key: "inversedYAxisBorder", value: function (t) { var e = this.w, i = new b(this.ctx), a = e.config.xaxis.axisBorder; if (a.show) { var s = 0; "bar" === e.config.chart.type && e.globals.isXNumeric && (s -= 15); var r = i.drawLine(e.globals.padHorizontal + s + a.offsetX, this.xAxisoffX, e.globals.gridWidth, this.xAxisoffX, a.color, 0, a.height); t.add(r) } } }, { key: "inversedYAxisTitleText", value: function (t) { var e = this.w, i = new b(this.ctx); if (void 0 !== e.config.xaxis.title.text) { var a = i.group({ class: "apexcharts-xaxis-title apexcharts-yaxis-title-inversed" }), s = i.drawText({ x: e.globals.gridWidth / 2 + e.config.xaxis.title.offsetX, y: this.xAxisoffX + parseFloat(this.xaxisFontSize) + parseFloat(e.config.xaxis.title.style.fontSize) + e.config.xaxis.title.offsetY + 20, text: e.config.xaxis.title.text, textAnchor: "middle", fontSize: e.config.xaxis.title.style.fontSize, fontFamily: e.config.xaxis.title.style.fontFamily, fontWeight: e.config.xaxis.title.style.fontWeight, cssClass: "apexcharts-xaxis-title-text " + e.config.xaxis.title.style.cssClass }); a.add(s), t.add(a) } } }, { key: "yAxisTitleRotate", value: function (t, e) { var i = this.w, a = new b(this.ctx), s = { width: 0, height: 0 }, r = { width: 0, height: 0 }, n = i.globals.dom.baseEl.querySelector(" .apexcharts-yaxis[rel='".concat(t, "'] .apexcharts-yaxis-texts-g")); null !== n && (s = n.getBoundingClientRect()); var o = i.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(t, "'] .apexcharts-yaxis-title text")); if (null !== o && (r = o.getBoundingClientRect()), null !== o) { var l = this.xPaddingForYAxisTitle(t, s, r, e); o.setAttribute("x", l.xPos - (e ? 10 : 0)) } if (null !== o) { var h = a.rotateAroundCenter(o); o.setAttribute("transform", "rotate(".concat(e ? -1 * i.config.yaxis[t].title.rotate : i.config.yaxis[t].title.rotate, " ").concat(h.x, " ").concat(h.y, ")")) } } }, { key: "xPaddingForYAxisTitle", value: function (t, e, i, a) { var s = this.w, r = 0, n = 0, o = 10; return void 0 === s.config.yaxis[t].title.text || t < 0 ? { xPos: n, padd: 0 } : (a ? (n = e.width + s.config.yaxis[t].title.offsetX + i.width / 2 + o / 2, 0 === (r += 1) && (n -= o / 2)) : (n = -1 * e.width + s.config.yaxis[t].title.offsetX + o / 2 + i.width / 2, s.globals.isBarHorizontal && (o = 25, n = -1 * e.width - s.config.yaxis[t].title.offsetX - o)), { xPos: n, padd: o }) } }, { key: "setYAxisXPosition", value: function (t, e) { var i = this.w, a = 0, s = 0, r = 18, n = 1; i.config.yaxis.length > 1 && (this.multipleYs = !0), i.config.yaxis.map((function (o, l) { var h = i.globals.ignoreYAxisIndexes.indexOf(l) > -1 || !o.show || o.floating || 0 === t[l].width, c = t[l].width + e[l].width; o.opposite ? i.globals.isBarHorizontal ? (s = i.globals.gridWidth + i.globals.translateX - 1, i.globals.translateYAxisX[l] = s - o.labels.offsetX) : (s = i.globals.gridWidth + i.globals.translateX + n, h || (n = n + c + 20), i.globals.translateYAxisX[l] = s - o.labels.offsetX + 20) : (a = i.globals.translateX - r, h || (r = r + c + 20), i.globals.translateYAxisX[l] = a + o.labels.offsetX) })) } }, { key: "setYAxisTextAlignments", value: function () { var t = this.w, e = t.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis"); (e = f.listToArray(e)).forEach((function (e, i) { var a = t.config.yaxis[i]; if (void 0 !== a.labels.align) { var s = t.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(i, "'] .apexcharts-yaxis-texts-g")), r = t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(i, "'] .apexcharts-yaxis-label")); r = f.listToArray(r); var n = s.getBoundingClientRect(); "left" === a.labels.align ? (r.forEach((function (t, e) { t.setAttribute("text-anchor", "start") })), a.opposite || s.setAttribute("transform", "translate(-".concat(n.width, ", 0)"))) : "center" === a.labels.align ? (r.forEach((function (t, e) { t.setAttribute("text-anchor", "middle") })), s.setAttribute("transform", "translate(".concat(n.width / 2 * (a.opposite ? 1 : -1), ", 0)"))) : "right" === a.labels.align && (r.forEach((function (t, e) { t.setAttribute("text-anchor", "end") })), a.opposite && s.setAttribute("transform", "translate(".concat(n.width, ", 0)"))) } })) } }]), t }(), J = function () { function t(i) { e(this, t), this.ctx = i, this.w = i.w, this.documentEvent = f.bind(this.documentEvent, this) } return a(t, [{ key: "addEventListener", value: function (t, e) { var i = this.w; i.globals.events.hasOwnProperty(t) ? i.globals.events[t].push(e) : i.globals.events[t] = [e] } }, { key: "removeEventListener", value: function (t, e) { var i = this.w; if (i.globals.events.hasOwnProperty(t)) { var a = i.globals.events[t].indexOf(e); -1 !== a && i.globals.events[t].splice(a, 1) } } }, { key: "fireEvent", value: function (t, e) { var i = this.w; if (i.globals.events.hasOwnProperty(t)) { e && e.length || (e = []); for (var a = i.globals.events[t], s = a.length, r = 0; r < s; r++)a[r].apply(null, e) } } }, { key: "setupEventHandlers", value: function () { var t = this, e = this.w, i = this.ctx, a = e.globals.dom.baseEl.querySelector(e.globals.chartClass); this.ctx.eventList.forEach((function (t) { a.addEventListener(t, (function (t) { var a = Object.assign({}, e, { seriesIndex: e.globals.capturedSeriesIndex, dataPointIndex: e.globals.capturedDataPointIndex }); "mousemove" === t.type || "touchmove" === t.type ? "function" == typeof e.config.chart.events.mouseMove && e.config.chart.events.mouseMove(t, i, a) : ("mouseup" === t.type && 1 === t.which || "touchend" === t.type) && ("function" == typeof e.config.chart.events.click && e.config.chart.events.click(t, i, a), i.ctx.events.fireEvent("click", [t, i, a])) }), { capture: !1, passive: !0 }) })), this.ctx.eventList.forEach((function (i) { e.globals.dom.baseEl.addEventListener(i, t.documentEvent) })), this.ctx.core.setupBrushHandler() } }, { key: "documentEvent", value: function (t) { var e = this.w, i = t.target.className; if ("click" === t.type) { var a = e.globals.dom.baseEl.querySelector(".apexcharts-menu"); a && a.classList.contains("apexcharts-menu-open") && "apexcharts-menu-icon" !== i && a.classList.remove("apexcharts-menu-open") } e.globals.clientX = "touchmove" === t.type ? t.touches[0].clientX : t.clientX, e.globals.clientY = "touchmove" === t.type ? t.touches[0].clientY : t.clientY } }]), t }(), Q = function () { function t(i) { e(this, t), this.ctx = i, this.w = i.w } return a(t, [{ key: "setCurrentLocaleValues", value: function (t) { var e = this.w.config.chart.locales; window.Apex.chart && window.Apex.chart.locales && window.Apex.chart.locales.length > 0 && (e = this.w.config.chart.locales.concat(window.Apex.chart.locales)); var i = e.filter((function (e) { return e.name === t }))[0]; if (!i) throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options"); var a = f.extend(C, i); this.w.globals.locale = a.options } }]), t }(), K = function () { function t(i) { e(this, t), this.ctx = i, this.w = i.w } return a(t, [{ key: "drawAxis", value: function (t, e) { var i, a, s = this.w.globals, r = this.w.config, n = new j(this.ctx), o = new $(this.ctx); s.axisCharts && "radar" !== t && (s.isBarHorizontal ? (a = o.drawYaxisInversed(0), i = n.drawXaxisInversed(0), s.dom.elGraphical.add(i), s.dom.elGraphical.add(a)) : (i = n.drawXaxis(), s.dom.elGraphical.add(i), r.yaxis.map((function (t, e) { -1 === s.ignoreYAxisIndexes.indexOf(e) && (a = o.drawYaxis(e), s.dom.Paper.add(a)) })))); r.yaxis.map((function (t, e) { -1 === s.ignoreYAxisIndexes.indexOf(e) && o.yAxisTitleRotate(e, t.opposite) })) } }]), t }(), tt = function () { function t(i) { e(this, t), this.ctx = i, this.w = i.w } return a(t, [{ key: "drawXCrosshairs", value: function () { var t = this.w, e = new b(this.ctx), i = new p(this.ctx), a = t.config.xaxis.crosshairs.fill.gradient, s = t.config.xaxis.crosshairs.dropShadow, r = t.config.xaxis.crosshairs.fill.type, n = a.colorFrom, o = a.colorTo, l = a.opacityFrom, h = a.opacityTo, c = a.stops, d = s.enabled, g = s.left, u = s.top, x = s.blur, m = s.color, v = s.opacity, y = t.config.xaxis.crosshairs.fill.color; if (t.config.xaxis.crosshairs.show) { "gradient" === r && (y = e.drawGradient("vertical", n, o, l, h, null, c, null)); var w = e.drawRect(); 1 === t.config.xaxis.crosshairs.width && (w = e.drawLine()), w.attr({ class: "apexcharts-xcrosshairs", x: 0, y: 0, y2: t.globals.gridHeight, width: f.isNumber(t.config.xaxis.crosshairs.width) ? t.config.xaxis.crosshairs.width : 0, height: t.globals.gridHeight, fill: y, filter: "none", "fill-opacity": t.config.xaxis.crosshairs.opacity, stroke: t.config.xaxis.crosshairs.stroke.color, "stroke-width": t.config.xaxis.crosshairs.stroke.width, "stroke-dasharray": t.config.xaxis.crosshairs.stroke.dashArray }), d && (w = i.dropShadow(w, { left: g, top: u, blur: x, color: m, opacity: v })), t.globals.dom.elGraphical.add(w) } } }, { key: "drawYCrosshairs", value: function () { var t = this.w, e = new b(this.ctx), i = t.config.yaxis[0].crosshairs, a = t.globals.barPadForNumericAxis; if (t.config.yaxis[0].crosshairs.show) { var s = e.drawLine(-a, 0, t.globals.gridWidth + a, 0, i.stroke.color, i.stroke.dashArray, i.stroke.width); s.attr({ class: "apexcharts-ycrosshairs" }), t.globals.dom.elGraphical.add(s) } var r = e.drawLine(-a, 0, t.globals.gridWidth + a, 0, i.stroke.color, 0, 0); r.attr({ class: "apexcharts-ycrosshairs-hidden" }), t.globals.dom.elGraphical.add(r) } }]), t }(), et = function () { function t(i) { e(this, t), this.ctx = i, this.w = i.w } return a(t, [{ key: "checkResponsiveConfig", value: function (t) { var e = this, i = this.w, a = i.config; if (0 !== a.responsive.length) { var s = a.responsive.slice(); s.sort((function (t, e) { return t.breakpoint > e.breakpoint ? 1 : e.breakpoint > t.breakpoint ? -1 : 0 })).reverse(); var r = new N({}), n = function () { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, a = s[0].breakpoint, n = window.innerWidth > 0 ? window.innerWidth : screen.width; if (n > a) { var o = y.extendArrayProps(r, i.globals.initialConfig, i); t = f.extend(o, t), t = f.extend(i.config, t), e.overrideResponsiveOptions(t) } else for (var l = 0; l < s.length; l++)n < s[l].breakpoint && (t = y.extendArrayProps(r, s[l].options, i), t = f.extend(i.config, t), e.overrideResponsiveOptions(t)) }; if (t) { var o = y.extendArrayProps(r, t, i); o = f.extend(i.config, o), n(o = f.extend(o, t)) } else n({}) } } }, { key: "overrideResponsiveOptions", value: function (t) { var e = new N(t).init({ responsiveOverride: !0 }); this.w.config = e } }]), t }(), it = function () { function t(i) { e(this, t), this.ctx = i, this.colors = [], this.w = i.w; var a = this.w; this.isColorFn = !1, this.isBarDistributed = a.config.plotOptions.bar.distributed && ("bar" === a.config.chart.type || "rangeBar" === a.config.chart.type) } return a(t, [{ key: "init", value: function () { this.setDefaultColors() } }, { key: "setDefaultColors", value: function () { var t = this, e = this.w, i = new f; if (e.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(e.config.theme.mode)), void 0 === e.config.colors ? e.globals.colors = this.predefined() : (e.globals.colors = e.config.colors, Array.isArray(e.config.colors) && e.config.colors.length > 0 && "function" == typeof e.config.colors[0] && (e.globals.colors = e.config.series.map((function (i, a) { var s = e.config.colors[a]; return s || (s = e.config.colors[0]), "function" == typeof s ? (t.isColorFn = !0, s({ value: e.globals.axisCharts ? e.globals.series[a][0] ? e.globals.series[a][0] : 0 : e.globals.series[a], seriesIndex: a, dataPointIndex: a, w: e })) : s })))), e.globals.seriesColors.map((function (t, i) { t && (e.globals.colors[i] = t) })), e.config.theme.monochrome.enabled) { var a = [], s = e.globals.series.length; this.isBarDistributed && (s = e.globals.series[0].length * e.globals.series.length); for (var r = e.config.theme.monochrome.color, n = 1 / (s / e.config.theme.monochrome.shadeIntensity), o = e.config.theme.monochrome.shadeTo, l = 0, h = 0; h < s; h++) { var c = void 0; "dark" === o ? (c = i.shadeColor(-1 * l, r), l += n) : (c = i.shadeColor(l, r), l += n), a.push(c) } e.globals.colors = a.slice() } var d = e.globals.colors.slice(); this.pushExtraColors(e.globals.colors);["fill", "stroke"].forEach((function (i) { void 0 === e.config[i].colors ? e.globals[i].colors = t.isColorFn ? e.config.colors : d : e.globals[i].colors = e.config[i].colors.slice(), t.pushExtraColors(e.globals[i].colors) })), void 0 === e.config.dataLabels.style.colors ? e.globals.dataLabels.style.colors = d : e.globals.dataLabels.style.colors = e.config.dataLabels.style.colors.slice(), this.pushExtraColors(e.globals.dataLabels.style.colors, 50), void 0 === e.config.plotOptions.radar.polygons.fill.colors ? e.globals.radarPolygons.fill.colors = ["dark" === e.config.theme.mode ? "#424242" : "#fff"] : e.globals.radarPolygons.fill.colors = e.config.plotOptions.radar.polygons.fill.colors.slice(), this.pushExtraColors(e.globals.radarPolygons.fill.colors, 20), void 0 === e.config.markers.colors ? e.globals.markers.colors = d : e.globals.markers.colors = e.config.markers.colors.slice(), this.pushExtraColors(e.globals.markers.colors) } }, { key: "pushExtraColors", value: function (t, e) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null, a = this.w, s = e || a.globals.series.length; if (null === i && (i = this.isBarDistributed || "heatmap" === a.config.chart.type && a.config.plotOptions.heatmap.colorScale.inverse), i && (s = a.globals.series[0].length * a.globals.series.length), t.length < s) for (var r = s - t.length, n = 0; n < r; n++)t.push(t[n]) } }, { key: "updateThemeOptions", value: function (t) { t.chart = t.chart || {}, t.tooltip = t.tooltip || {}; var e = t.theme.mode || "light", i = t.theme.palette ? t.theme.palette : "dark" === e ? "palette4" : "palette1", a = t.chart.foreColor ? t.chart.foreColor : "dark" === e ? "#f6f7f8" : "#373d3f"; return t.tooltip.theme = e, t.chart.foreColor = a, t.theme.palette = i, t } }, { key: "predefined", value: function () { switch (this.w.config.theme.palette) { case "palette1": this.colors = ["#008FFB", "#00E396", "#FEB019", "#FF4560", "#775DD0"]; break; case "palette2": this.colors = ["#3f51b5", "#03a9f4", "#4caf50", "#f9ce1d", "#FF9800"]; break; case "palette3": this.colors = ["#33b2df", "#546E7A", "#d4526e", "#13d8aa", "#A5978B"]; break; case "palette4": this.colors = ["#4ecdc4", "#c7f464", "#81D4FA", "#fd6a6a", "#546E7A"]; break; case "palette5": this.colors = ["#2b908f", "#f9a3a4", "#90ee7e", "#fa4443", "#69d2e7"]; break; case "palette6": this.colors = ["#449DD1", "#F86624", "#EA3546", "#662E9B", "#C5D86D"]; break; case "palette7": this.colors = ["#D7263D", "#1B998B", "#2E294E", "#F46036", "#E2C044"]; break; case "palette8": this.colors = ["#662E9B", "#F86624", "#F9C80E", "#EA3546", "#43BCCD"]; break; case "palette9": this.colors = ["#5C4742", "#A5978B", "#8D5B4C", "#5A2A27", "#C4BBAF"]; break; case "palette10": this.colors = ["#A300D6", "#7D02EB", "#5653FE", "#2983FF", "#00B1F2"]; break; default: this.colors = ["#008FFB", "#00E396", "#FEB019", "#FF4560", "#775DD0"] }return this.colors } }]), t }(), at = function () { function t(i) { e(this, t), this.ctx = i, this.w = i.w } return a(t, [{ key: "draw", value: function () { this.drawTitleSubtitle("title"), this.drawTitleSubtitle("subtitle") } }, { key: "drawTitleSubtitle", value: function (t) { var e = this.w, i = "title" === t ? e.config.title : e.config.subtitle, a = e.globals.svgWidth / 2, s = i.offsetY, r = "middle"; if ("left" === i.align ? (a = 10, r = "start") : "right" === i.align && (a = e.globals.svgWidth - 10, r = "end"), a += i.offsetX, s = s + parseInt(i.style.fontSize, 10) + i.margin / 2, void 0 !== i.text) { var n = new b(this.ctx).drawText({ x: a, y: s, text: i.text, textAnchor: r, fontSize: i.style.fontSize, fontFamily: i.style.fontFamily, fontWeight: i.style.fontWeight, foreColor: i.style.color, opacity: 1 }); n.node.setAttribute("class", "apexcharts-".concat(t, "-text")), e.globals.dom.Paper.add(n) } } }]), t }(), st = function () { function t(i) { e(this, t), this.w = i.w, this.dCtx = i } return a(t, [{ key: "getTitleSubtitleCoords", value: function (t) { var e = this.w, i = 0, a = 0, s = "title" === t ? e.config.title.floating : e.config.subtitle.floating, r = e.globals.dom.baseEl.querySelector(".apexcharts-".concat(t, "-text")); if (null !== r && !s) { var n = r.getBoundingClientRect(); i = n.width, a = e.globals.axisCharts ? n.height + 5 : n.height } return { width: i, height: a } } }, { key: "getLegendsRect", value: function () { var t = this.w, e = t.globals.dom.baseEl.querySelector(".apexcharts-legend"), i = Object.assign({}, f.getBoundingClientRect(e)); return null !== e && !t.config.legend.floating && t.config.legend.show ? this.dCtx.lgRect = { x: i.x, y: i.y, height: i.height, width: 0 === i.height ? 0 : i.width } : this.dCtx.lgRect = { x: 0, y: 0, height: 0, width: 0 }, "left" !== t.config.legend.position && "right" !== t.config.legend.position || 1.5 * this.dCtx.lgRect.width > t.globals.svgWidth && (this.dCtx.lgRect.width = t.globals.svgWidth / 1.5), this.dCtx.lgRect } }, { key: "getLargestStringFromMultiArr", value: function (t, e) { var i = t; if (this.w.globals.isMultiLineX) { var a = e.map((function (t, e) { return Array.isArray(t) ? t.length : 1 })), s = Math.max.apply(Math, g(a)); i = e[a.indexOf(s)] } return i } }]), t }(), rt = function () { function t(i) { e(this, t), this.w = i.w, this.dCtx = i } return a(t, [{ key: "getxAxisLabelsCoords", value: function () { var t, e = this.w, i = e.globals.labels.slice(); if (e.config.xaxis.convertedCatToNumeric && 0 === i.length && (i = e.globals.categoryLabels), e.globals.timescaleLabels.length > 0) { var a = this.getxAxisTimeScaleLabelsCoords(); t = { width: a.width, height: a.height }, e.globals.rotateXLabels = !1 } else { this.dCtx.lgWidthForSideLegends = "left" !== e.config.legend.position && "right" !== e.config.legend.position || e.config.legend.floating ? 0 : this.dCtx.lgRect.width; var s = e.globals.xLabelFormatter, r = f.getLargestStringFromArr(i), n = this.dCtx.dimHelpers.getLargestStringFromMultiArr(r, i); e.globals.isBarHorizontal && (n = r = e.globals.yAxisScale[0].result.reduce((function (t, e) { return t.length > e.length ? t : e }), 0)); var o = new V(this.dCtx.ctx), l = r; r = o.xLabelFormat(s, r, l), n = o.xLabelFormat(s, n, l), (e.config.xaxis.convertedCatToNumeric && void 0 === r || "" === String(r).trim()) && (n = r = "1"); var h = new b(this.dCtx.ctx), c = h.getTextRects(r, e.config.xaxis.labels.style.fontSize), d = c; if (r !== n && (d = h.getTextRects(n, e.config.xaxis.labels.style.fontSize)), (t = { width: c.width >= d.width ? c.width : d.width, height: c.height >= d.height ? c.height : d.height }).width * i.length > e.globals.svgWidth - this.dCtx.lgWidthForSideLegends - this.dCtx.yAxisWidth - this.dCtx.gridPad.left - this.dCtx.gridPad.right && 0 !== e.config.xaxis.labels.rotate || e.config.xaxis.labels.rotateAlways) { if (!e.globals.isBarHorizontal) { e.globals.rotateXLabels = !0; var g = function (t) { return h.getTextRects(t, e.config.xaxis.labels.style.fontSize, e.config.xaxis.labels.style.fontFamily, "rotate(".concat(e.config.xaxis.labels.rotate, " 0 0)"), !1) }; c = g(r), r !== n && (d = g(n)), t.height = (c.height > d.height ? c.height : d.height) / 1.5, t.width = c.width > d.width ? c.width : d.width } } else e.globals.rotateXLabels = !1 } return e.config.xaxis.labels.show || (t = { width: 0, height: 0 }), { width: t.width, height: t.height } } }, { key: "getxAxisTitleCoords", value: function () { var t = this.w, e = 0, i = 0; if (void 0 !== t.config.xaxis.title.text) { var a = new b(this.dCtx.ctx).getTextRects(t.config.xaxis.title.text, t.config.xaxis.title.style.fontSize); e = a.width, i = a.height } return { width: e, height: i } } }, { key: "getxAxisTimeScaleLabelsCoords", value: function () { var t, e = this.w; this.dCtx.timescaleLabels = e.globals.timescaleLabels.slice(); var i = this.dCtx.timescaleLabels.map((function (t) { return t.value })), a = i.reduce((function (t, e) { return void 0 === t ? (console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"), 0) : t.length > e.length ? t : e }), 0); return 1.05 * (t = new b(this.dCtx.ctx).getTextRects(a, e.config.xaxis.labels.style.fontSize)).width * i.length > e.globals.gridWidth && 0 !== e.config.xaxis.labels.rotate && (e.globals.overlappingXLabels = !0), t } }, { key: "additionalPaddingXLabels", value: function (t) { var e = this, i = this.w, a = i.globals, s = i.config, r = s.xaxis.type, n = t.width; a.skipLastTimelinelabel = !1, a.skipFirstTimelinelabel = !1; var o = i.config.yaxis[0].opposite && i.globals.isBarHorizontal, l = function (t, o) { (function (t) { return -1 !== a.collapsedSeriesIndices.indexOf(t) })(o) || ("datetime" !== r && e.dCtx.gridPad.left < n / 2 - e.dCtx.yAxisWidthLeft && !a.rotateXLabels && !s.xaxis.labels.trim && (e.dCtx.xPadLeft = n / 2 + 1), function (t) { if (e.dCtx.timescaleLabels && e.dCtx.timescaleLabels.length) { var s = e.dCtx.timescaleLabels[0], o = e.dCtx.timescaleLabels[e.dCtx.timescaleLabels.length - 1].position + n / 1.75 - e.dCtx.yAxisWidthRight, l = s.position - n / 1.75 + e.dCtx.yAxisWidthLeft; o > a.gridWidth && (a.skipLastTimelinelabel = !0), l < 0 && (a.skipFirstTimelinelabel = !0) } else "datetime" === r ? e.dCtx.gridPad.right < n && !a.rotateXLabels && (a.skipLastTimelinelabel = !0) : "datetime" !== r && e.dCtx.gridPad.right < n / 2 - e.dCtx.yAxisWidthRight && !a.rotateXLabels && ("between" !== i.config.xaxis.tickPlacement || i.globals.isBarHorizontal) && (e.dCtx.xPadRight = n / 2 + 1) }()) }; s.yaxis.forEach((function (t, i) { o ? (e.dCtx.gridPad.left < n && (e.dCtx.xPadLeft = n / 2 + 1), e.dCtx.xPadRight = n / 2 + 1) : l(0, i) })) } }]), t }(), nt = function () { function t(i) { e(this, t), this.w = i.w, this.dCtx = i } return a(t, [{ key: "getyAxisLabelsCoords", value: function () { var t = this, e = this.w, i = [], a = 10, s = new G(this.dCtx.ctx); return e.config.yaxis.map((function (r, n) { var o = e.globals.yAxisScale[n]; if (!s.isYAxisHidden(n) && r.labels.show && o.result.length) { var l = e.globals.yLabelFormatters[n], h = String(o.niceMin).length > String(o.niceMax).length ? o.niceMin : o.niceMax, c = l(h, { seriesIndex: n, dataPointIndex: -1, w: e }), d = c; if (void 0 !== c && 0 !== c.length || (c = h), e.globals.isBarHorizontal) { a = 0; var g = e.globals.labels.slice(); c = l(c = f.getLargestStringFromArr(g), { seriesIndex: n, dataPointIndex: -1, w: e }), d = t.dCtx.dimHelpers.getLargestStringFromMultiArr(c, g) } var u = new b(t.dCtx.ctx), p = u.getTextRects(c, r.labels.style.fontSize), x = p; c !== d && (x = u.getTextRects(d, r.labels.style.fontSize)), i.push({ width: (x.width > p.width ? x.width : p.width) + a, height: x.height > p.height ? x.height : p.height }) } else i.push({ width: 0, height: 0 }) })), i } }, { key: "getyAxisTitleCoords", value: function () { var t = this, e = this.w, i = []; return e.config.yaxis.map((function (e, a) { if (e.show && void 0 !== e.title.text) { var s = new b(t.dCtx.ctx).getTextRects(e.title.text, e.title.style.fontSize, e.title.style.fontFamily, "rotate(-90 0 0)", !1); i.push({ width: s.width, height: s.height }) } else i.push({ width: 0, height: 0 }) })), i } }, { key: "getTotalYAxisWidth", value: function () { var t = this.w, e = 0, i = 0, a = 0, s = t.globals.yAxisScale.length > 1 ? 10 : 0, r = new G(this.dCtx.ctx), n = function (n, o) { var l = t.config.yaxis[o].floating, h = 0; n.width > 0 && !l ? (h = n.width + s, function (e) { return t.globals.ignoreYAxisIndexes.indexOf(e) > -1 }(o) && (h = h - n.width - s)) : h = l || r.isYAxisHidden(o) ? 0 : 5, t.config.yaxis[o].opposite ? a += h : i += h, e += h }; return t.globals.yLabelsCoords.map((function (t, e) { n(t, e) })), t.globals.yTitleCoords.map((function (t, e) { n(t, e) })), t.globals.isBarHorizontal && (e = t.globals.yLabelsCoords[0].width + t.globals.yTitleCoords[0].width + 15), this.dCtx.yAxisWidthLeft = i, this.dCtx.yAxisWidthRight = a, e } }]), t }(), ot = function () { function t(i) { e(this, t), this.w = i.w, this.dCtx = i } return a(t, [{ key: "gridPadForColumnsInNumericAxis", value: function (t) { var e = this.w; if (e.globals.noData || e.globals.allSeriesCollapsed) return 0; var i = e.config.chart.type, a = 0, s = "bar" === i || "rangeBar" === i ? e.config.series.length : 1; if (e.globals.comboBarCount > 0 && (s = e.globals.comboBarCount), e.globals.collapsedSeries.forEach((function (t) { "bar" !== t.type && "rangeBar" !== t.type || (s -= 1) })), e.config.chart.stacked && (s = 1), ("bar" === i || "rangeBar" === i || e.globals.comboBarCount > 0) && e.globals.isXNumeric && !e.globals.isBarHorizontal && s > 0) { var r, n, o = Math.abs(e.globals.initialMaxX - e.globals.initialMinX); o <= 3 && (o = e.globals.dataPoints), r = o / t, e.globals.minXDiff && e.globals.minXDiff / r > 0 && (n = e.globals.minXDiff / r), n > t / 2 && (n /= 2), (a = n / s * parseInt(e.config.plotOptions.bar.columnWidth, 10) / 100) < 1 && (a = 1), a = a / (s > 1 ? 1 : 1.5) + 5, e.globals.barPadForNumericAxis = a } return a } }, { key: "gridPadFortitleSubtitle", value: function () { var t = this, e = this.w, i = e.globals, a = this.dCtx.isSparkline || !e.globals.axisCharts ? 0 : 10;["title", "subtitle"].forEach((function (i) { void 0 !== e.config[i].text ? a += e.config[i].margin : a += t.dCtx.isSparkline || !e.globals.axisCharts ? 0 : 5 })), !e.config.legend.show || "bottom" !== e.config.legend.position || e.config.legend.floating || e.globals.axisCharts || (a += 10); var s = this.dCtx.dimHelpers.getTitleSubtitleCoords("title"), r = this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle"); i.gridHeight = i.gridHeight - s.height - r.height - a, i.translateY = i.translateY + s.height + r.height + a } }, { key: "setGridXPosForDualYAxis", value: function (t, e) { var i = this.w, a = new G(this.dCtx.ctx); i.config.yaxis.map((function (s, r) { -1 !== i.globals.ignoreYAxisIndexes.indexOf(r) || s.floating || a.isYAxisHidden(r) || (s.opposite && (i.globals.translateX = i.globals.translateX - (e[r].width + t[r].width) - parseInt(i.config.yaxis[r].labels.style.fontSize, 10) / 1.2 - 12), i.globals.translateX < 2 && (i.globals.translateX = 2)) })) } }]), t }(), lt = function () { function t(i) { e(this, t), this.ctx = i, this.w = i.w, this.lgRect = {}, this.yAxisWidth = 0, this.yAxisWidthLeft = 0, this.yAxisWidthRight = 0, this.xAxisHeight = 0, this.isSparkline = this.w.config.chart.sparkline.enabled, this.dimHelpers = new st(this), this.dimYAxis = new nt(this), this.dimXAxis = new rt(this), this.dimGrid = new ot(this), this.lgWidthForSideLegends = 0, this.gridPad = this.w.config.grid.padding, this.xPadRight = 0, this.xPadLeft = 0 } return a(t, [{ key: "plotCoords", value: function () { var t = this.w.globals; this.lgRect = this.dimHelpers.getLegendsRect(), t.axisCharts ? this.setDimensionsForAxisCharts() : this.setDimensionsForNonAxisCharts(), this.dimGrid.gridPadFortitleSubtitle(), t.gridHeight = t.gridHeight - this.gridPad.top - this.gridPad.bottom, t.gridWidth = t.gridWidth - this.gridPad.left - this.gridPad.right - this.xPadRight - this.xPadLeft; var e = this.dimGrid.gridPadForColumnsInNumericAxis(t.gridWidth); t.gridWidth = t.gridWidth - 2 * e, t.translateX = t.translateX + this.gridPad.left + this.xPadLeft + (e > 0 ? e + 4 : 0), t.translateY = t.translateY + this.gridPad.top } }, { key: "setDimensionsForAxisCharts", value: function () { var t = this, e = this.w, i = e.globals, a = this.dimYAxis.getyAxisLabelsCoords(), s = this.dimYAxis.getyAxisTitleCoords(); e.globals.yLabelsCoords = [], e.globals.yTitleCoords = [], e.config.yaxis.map((function (t, i) { e.globals.yLabelsCoords.push({ width: a[i].width, index: i }), e.globals.yTitleCoords.push({ width: s[i].width, index: i }) })), this.yAxisWidth = this.dimYAxis.getTotalYAxisWidth(); var r = this.dimXAxis.getxAxisLabelsCoords(), n = this.dimXAxis.getxAxisTitleCoords(); this.conditionalChecksForAxisCoords(r, n), i.translateXAxisY = e.globals.rotateXLabels ? this.xAxisHeight / 8 : -4, i.translateXAxisX = e.globals.rotateXLabels && e.globals.isXNumeric && e.config.xaxis.labels.rotate <= -45 ? -this.xAxisWidth / 4 : 0, e.globals.isBarHorizontal && (i.rotateXLabels = !1, i.translateXAxisY = parseInt(e.config.xaxis.labels.style.fontSize, 10) / 1.5 * -1), i.translateXAxisY = i.translateXAxisY + e.config.xaxis.labels.offsetY, i.translateXAxisX = i.translateXAxisX + e.config.xaxis.labels.offsetX; var o = this.yAxisWidth, l = this.xAxisHeight; i.xAxisLabelsHeight = this.xAxisHeight, i.xAxisLabelsWidth = this.xAxisWidth, i.xAxisHeight = this.xAxisHeight; var h = 10; ("radar" === e.config.chart.type || this.isSparkline) && (o = 0, l = i.goldenPadding), this.isSparkline && (this.lgRect = { height: 0, width: 0 }, l = 0, o = 0, h = 0), this.dimXAxis.additionalPaddingXLabels(r); var c = function () { i.translateX = o, i.gridHeight = i.svgHeight - t.lgRect.height - l - (t.isSparkline ? 0 : e.globals.rotateXLabels ? 10 : 15), i.gridWidth = i.svgWidth - o }; switch ("top" === e.config.xaxis.position && (h = i.xAxisHeight - e.config.xaxis.axisTicks.height - 5), e.config.legend.position) { case "bottom": i.translateY = h, c(); break; case "top": i.translateY = this.lgRect.height + h, c(); break; case "left": i.translateY = h, i.translateX = this.lgRect.width + o, i.gridHeight = i.svgHeight - l - 12, i.gridWidth = i.svgWidth - this.lgRect.width - o; break; case "right": i.translateY = h, i.translateX = o, i.gridHeight = i.svgHeight - l - 12, i.gridWidth = i.svgWidth - this.lgRect.width - o - 5; break; default: throw new Error("Legend position not supported") }this.dimGrid.setGridXPosForDualYAxis(s, a), new $(this.ctx).setYAxisXPosition(a, s) } }, { key: "setDimensionsForNonAxisCharts", value: function () { var t = this.w, e = t.globals, i = t.config, a = 0; t.config.legend.show && !t.config.legend.floating && (a = 20); var s = "pie" === i.chart.type || "polarArea" === i.chart.type || "donut" === i.chart.type ? "pie" : "radialBar", r = i.plotOptions[s].offsetY, n = i.plotOptions[s].offsetX; if (!i.legend.show || i.legend.floating) return e.gridHeight = e.svgHeight - i.grid.padding.left + i.grid.padding.right, e.gridWidth = e.gridHeight, e.translateY = r, void (e.translateX = n + (e.svgWidth - e.gridWidth) / 2); switch (i.legend.position) { case "bottom": e.gridHeight = e.svgHeight - this.lgRect.height - e.goldenPadding, e.gridWidth = e.gridHeight, e.translateY = r - 10, e.translateX = n + (e.svgWidth - e.gridWidth) / 2; break; case "top": e.gridHeight = e.svgHeight - this.lgRect.height - e.goldenPadding, e.gridWidth = e.gridHeight, e.translateY = this.lgRect.height + r + 10, e.translateX = n + (e.svgWidth - e.gridWidth) / 2; break; case "left": e.gridWidth = e.svgWidth - this.lgRect.width - a, e.gridHeight = "auto" !== i.chart.height ? e.svgHeight : e.gridWidth, e.translateY = r, e.translateX = n + this.lgRect.width + a; break; case "right": e.gridWidth = e.svgWidth - this.lgRect.width - a - 5, e.gridHeight = "auto" !== i.chart.height ? e.svgHeight : e.gridWidth, e.translateY = r, e.translateX = n + 10; break; default: throw new Error("Legend position not supported") } } }, { key: "conditionalChecksForAxisCoords", value: function (t, e) { var i = this.w; this.xAxisHeight = (t.height + e.height) * (i.globals.isMultiLineX ? 1.2 : i.globals.LINE_HEIGHT_RATIO) + (i.globals.rotateXLabels ? 22 : 10), this.xAxisWidth = t.width, this.xAxisHeight - e.height > i.config.xaxis.labels.maxHeight && (this.xAxisHeight = i.config.xaxis.labels.maxHeight), i.config.xaxis.labels.minHeight && this.xAxisHeight < i.config.xaxis.labels.minHeight && (this.xAxisHeight = i.config.xaxis.labels.minHeight), i.config.xaxis.floating && (this.xAxisHeight = 0); var a = 0, s = 0; i.config.yaxis.forEach((function (t) { a += t.labels.minWidth, s += t.labels.maxWidth })), this.yAxisWidth < a && (this.yAxisWidth = a), this.yAxisWidth > s && (this.yAxisWidth = s) } }]), t }(), ht = function () { function t(i) { e(this, t), this.w = i.w, this.lgCtx = i } return a(t, [{ key: "getLegendStyles", value: function () { var t = document.createElement("style"); t.setAttribute("type", "text/css"); var e = document.createTextNode("\t\n    \t\n      .apexcharts-legend {\t\n        display: flex;\t\n        overflow: auto;\t\n        padding: 0 10px;\t\n      }\t\n      .apexcharts-legend.position-bottom, .apexcharts-legend.position-top {\t\n        flex-wrap: wrap\t\n      }\t\n      .apexcharts-legend.position-right, .apexcharts-legend.position-left {\t\n        flex-direction: column;\t\n        bottom: 0;\t\n      }\t\n      .apexcharts-legend.position-bottom.apexcharts-align-left, .apexcharts-legend.position-top.apexcharts-align-left, .apexcharts-legend.position-right, .apexcharts-legend.position-left {\t\n        justify-content: flex-start;\t\n      }\t\n      .apexcharts-legend.position-bottom.apexcharts-align-center, .apexcharts-legend.position-top.apexcharts-align-center {\t\n        justify-content: center;  \t\n      }\t\n      .apexcharts-legend.position-bottom.apexcharts-align-right, .apexcharts-legend.position-top.apexcharts-align-right {\t\n        justify-content: flex-end;\t\n      }\t\n      .apexcharts-legend-series {\t\n        cursor: pointer;\t\n        line-height: normal;\t\n      }\t\n      .apexcharts-legend.position-bottom .apexcharts-legend-series, .apexcharts-legend.position-top .apexcharts-legend-series{\t\n        display: flex;\t\n        align-items: center;\t\n      }\t\n      .apexcharts-legend-text {\t\n        position: relative;\t\n        font-size: 14px;\t\n      }\t\n      .apexcharts-legend-text *, .apexcharts-legend-marker * {\t\n        pointer-events: none;\t\n      }\t\n      .apexcharts-legend-marker {\t\n        position: relative;\t\n        display: inline-block;\t\n        cursor: pointer;\t\n        margin-right: 3px;\t\n        border-style: solid;\n      }\t\n      \t\n      .apexcharts-legend.apexcharts-align-right .apexcharts-legend-series, .apexcharts-legend.apexcharts-align-left .apexcharts-legend-series{\t\n        display: inline-block;\t\n      }\t\n      .apexcharts-legend-series.apexcharts-no-click {\t\n        cursor: auto;\t\n      }\t\n      .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {\t\n        display: none !important;\t\n      }\t\n      .apexcharts-inactive-legend {\t\n        opacity: 0.45;\t\n      }"); return t.appendChild(e), t } }, { key: "getLegendBBox", value: function () { var t = this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect(), e = t.width; return { clwh: t.height, clww: e } } }, { key: "appendToForeignObject", value: function () { var t = this.w.globals; t.dom.elLegendForeign = document.createElementNS(t.SVGNS, "foreignObject"); var e = t.dom.elLegendForeign; e.setAttribute("x", 0), e.setAttribute("y", 0), e.setAttribute("width", t.svgWidth), e.setAttribute("height", t.svgHeight), t.dom.elLegendWrap.setAttribute("xmlns", "http://www.w3.org/1999/xhtml"), e.appendChild(t.dom.elLegendWrap), e.appendChild(this.getLegendStyles()), t.dom.Paper.node.insertBefore(e, t.dom.elGraphical.node) } }, { key: "toggleDataSeries", value: function (t, e) { var i = this, a = this.w; if (a.globals.axisCharts || "radialBar" === a.config.chart.type) { a.globals.resized = !0; var s = null, r = null; if (a.globals.risingSeries = [], a.globals.axisCharts ? (s = a.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(t, "']")), r = parseInt(s.getAttribute("data:realIndex"), 10)) : (s = a.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(t + 1, "']")), r = parseInt(s.getAttribute("rel"), 10) - 1), e) [{ cs: a.globals.collapsedSeries, csi: a.globals.collapsedSeriesIndices }, { cs: a.globals.ancillaryCollapsedSeries, csi: a.globals.ancillaryCollapsedSeriesIndices }].forEach((function (t) { i.riseCollapsedSeries(t.cs, t.csi, r) })); else this.hideSeries({ seriesEl: s, realIndex: r }) } else { var n = a.globals.dom.Paper.select(" .apexcharts-series[rel='".concat(t + 1, "'] path")), o = a.config.chart.type; if ("pie" === o || "polarArea" === o || "donut" === o) { var l = a.config.plotOptions.pie.donut.labels; new b(this.lgCtx.ctx).pathMouseDown(n.members[0], null), this.lgCtx.ctx.pie.printDataLabelsInner(n.members[0].node, l) } n.fire("click") } } }, { key: "hideSeries", value: function (t) { var e = t.seriesEl, i = t.realIndex, a = this.w, s = f.clone(a.config.series); if (a.globals.axisCharts) { var r = !1; if (a.config.yaxis[i] && a.config.yaxis[i].show && a.config.yaxis[i].showAlways && (r = !0, a.globals.ancillaryCollapsedSeriesIndices.indexOf(i) < 0 && (a.globals.ancillaryCollapsedSeries.push({ index: i, data: s[i].data.slice(), type: e.parentNode.className.baseVal.split("-")[1] }), a.globals.ancillaryCollapsedSeriesIndices.push(i))), !r) { a.globals.collapsedSeries.push({ index: i, data: s[i].data.slice(), type: e.parentNode.className.baseVal.split("-")[1] }), a.globals.collapsedSeriesIndices.push(i); var n = a.globals.risingSeries.indexOf(i); a.globals.risingSeries.splice(n, 1) } } else a.globals.collapsedSeries.push({ index: i, data: s[i] }), a.globals.collapsedSeriesIndices.push(i); for (var o = e.childNodes, l = 0; l < o.length; l++)o[l].classList.contains("apexcharts-series-markers-wrap") && (o[l].classList.contains("apexcharts-hide") ? o[l].classList.remove("apexcharts-hide") : o[l].classList.add("apexcharts-hide")); a.globals.allSeriesCollapsed = a.globals.collapsedSeries.length === a.config.series.length, s = this._getSeriesBasedOnCollapsedState(s), this.lgCtx.ctx.updateHelpers._updateSeries(s, a.config.chart.animations.dynamicAnimation.enabled) } }, { key: "riseCollapsedSeries", value: function (t, e, i) { var a = this.w, s = f.clone(a.config.series); if (t.length > 0) { for (var r = 0; r < t.length; r++)t[r].index === i && (a.globals.axisCharts ? (s[i].data = t[r].data.slice(), t.splice(r, 1), e.splice(r, 1), a.globals.risingSeries.push(i)) : (s[i] = t[r].data, t.splice(r, 1), e.splice(r, 1), a.globals.risingSeries.push(i))); s = this._getSeriesBasedOnCollapsedState(s), this.lgCtx.ctx.updateHelpers._updateSeries(s, a.config.chart.animations.dynamicAnimation.enabled) } } }, { key: "_getSeriesBasedOnCollapsedState", value: function (t) { var e = this.w; return e.globals.axisCharts ? t.forEach((function (i, a) { e.globals.collapsedSeriesIndices.indexOf(a) > -1 && (t[a].data = []) })) : t.forEach((function (i, a) { e.globals.collapsedSeriesIndices.indexOf(a) > -1 && (t[a] = 0) })), t } }]), t }(), ct = function () { function t(i, a) { e(this, t), this.ctx = i, this.w = i.w, this.onLegendClick = this.onLegendClick.bind(this), this.onLegendHovered = this.onLegendHovered.bind(this), this.isBarsDistributed = "bar" === this.w.config.chart.type && this.w.config.plotOptions.bar.distributed && 1 === this.w.config.series.length, this.legendHelpers = new ht(this) } return a(t, [{ key: "init", value: function () { var t = this.w, e = t.globals, i = t.config; if ((i.legend.showForSingleSeries && 1 === e.series.length || this.isBarsDistributed || e.series.length > 1 || !e.axisCharts) && i.legend.show) { for (; e.dom.elLegendWrap.firstChild;)e.dom.elLegendWrap.removeChild(e.dom.elLegendWrap.firstChild); this.drawLegends(), f.isIE11() ? document.getElementsByTagName("head")[0].appendChild(this.legendHelpers.getLegendStyles()) : this.legendHelpers.appendToForeignObject(), "bottom" === i.legend.position || "top" === i.legend.position ? this.legendAlignHorizontal() : "right" !== i.legend.position && "left" !== i.legend.position || this.legendAlignVertical() } } }, { key: "drawLegends", value: function () { var t = this.w, e = t.config.legend.fontFamily, i = t.globals.seriesNames, a = t.globals.colors.slice(); if ("heatmap" === t.config.chart.type) { var s = t.config.plotOptions.heatmap.colorScale.ranges; i = s.map((function (t) { return t.name ? t.name : t.from + " - " + t.to })), a = s.map((function (t) { return t.color })) } else this.isBarsDistributed && (i = t.globals.labels.slice()); for (var r = t.globals.legendFormatter, n = t.config.legend.inverseOrder, o = n ? i.length - 1 : 0; n ? o >= 0 : o <= i.length - 1; n ? o-- : o++) { var l = r(i[o], { seriesIndex: o, w: t }), h = !1, c = !1; if (t.globals.collapsedSeries.length > 0) for (var d = 0; d < t.globals.collapsedSeries.length; d++)t.globals.collapsedSeries[d].index === o && (h = !0); if (t.globals.ancillaryCollapsedSeriesIndices.length > 0) for (var g = 0; g < t.globals.ancillaryCollapsedSeriesIndices.length; g++)t.globals.ancillaryCollapsedSeriesIndices[g] === o && (c = !0); var u = document.createElement("span"); u.classList.add("apexcharts-legend-marker"); var f = t.config.legend.markers.offsetX, p = t.config.legend.markers.offsetY, x = t.config.legend.markers.height, m = t.config.legend.markers.width, v = t.config.legend.markers.strokeWidth, w = t.config.legend.markers.strokeColor, k = t.config.legend.markers.radius, A = u.style; A.background = a[o], A.color = a[o], t.config.legend.markers.fillColors && t.config.legend.markers.fillColors[o] && (A.background = t.config.legend.markers.fillColors[o]), void 0 !== t.globals.seriesColors[o] && (A.background = t.globals.seriesColors[o], A.color = t.globals.seriesColors[o]), A.height = Array.isArray(x) ? parseFloat(x[o]) + "px" : parseFloat(x) + "px", A.width = Array.isArray(m) ? parseFloat(m[o]) + "px" : parseFloat(m) + "px", A.left = Array.isArray(f) ? f[o] : f, A.top = Array.isArray(p) ? p[o] : p, A.borderWidth = Array.isArray(v) ? v[o] : v, A.borderColor = Array.isArray(w) ? w[o] : w, A.borderRadius = Array.isArray(k) ? parseFloat(k[o]) + "px" : parseFloat(k) + "px", t.config.legend.markers.customHTML && (Array.isArray(t.config.legend.markers.customHTML) ? t.config.legend.markers.customHTML[o] && (u.innerHTML = t.config.legend.markers.customHTML[o]()) : u.innerHTML = t.config.legend.markers.customHTML()), b.setAttrs(u, { rel: o + 1, "data:collapsed": h || c }), (h || c) && u.classList.add("apexcharts-inactive-legend"); var S = document.createElement("div"), C = document.createElement("span"); C.classList.add("apexcharts-legend-text"), C.innerHTML = Array.isArray(l) ? l.join(" ") : l; var L = t.config.legend.labels.useSeriesColors ? t.globals.colors[o] : t.config.legend.labels.colors; L || (L = t.config.chart.foreColor), C.style.color = L, C.style.fontSize = parseFloat(t.config.legend.fontSize) + "px", C.style.fontWeight = t.config.legend.fontWeight, C.style.fontFamily = e || t.config.chart.fontFamily, b.setAttrs(C, { rel: o + 1, i: o, "data:default-text": encodeURIComponent(l), "data:collapsed": h || c }), S.appendChild(u), S.appendChild(C); var P = new y(this.ctx); if (!t.config.legend.showForZeroSeries) 0 === P.getSeriesTotalByIndex(o) && P.seriesHaveSameValues(o) && !P.isSeriesNull(o) && -1 === t.globals.collapsedSeriesIndices.indexOf(o) && -1 === t.globals.ancillaryCollapsedSeriesIndices.indexOf(o) && S.classList.add("apexcharts-hidden-zero-series"); t.config.legend.showForNullSeries || P.isSeriesNull(o) && -1 === t.globals.collapsedSeriesIndices.indexOf(o) && -1 === t.globals.ancillaryCollapsedSeriesIndices.indexOf(o) && S.classList.add("apexcharts-hidden-null-series"), t.globals.dom.elLegendWrap.appendChild(S), t.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(t.config.legend.horizontalAlign)), t.globals.dom.elLegendWrap.classList.add("position-" + t.config.legend.position), S.classList.add("apexcharts-legend-series"), S.style.margin = "".concat(t.config.legend.itemMargin.vertical, "px ").concat(t.config.legend.itemMargin.horizontal, "px"), t.globals.dom.elLegendWrap.style.width = t.config.legend.width ? t.config.legend.width + "px" : "", t.globals.dom.elLegendWrap.style.height = t.config.legend.height ? t.config.legend.height + "px" : "", b.setAttrs(S, { rel: o + 1, "data:collapsed": h || c }), (h || c) && S.classList.add("apexcharts-inactive-legend"), t.config.legend.onItemClick.toggleDataSeries || S.classList.add("apexcharts-no-click") } "heatmap" !== t.config.chart.type && !this.isBarsDistributed && t.config.legend.onItemClick.toggleDataSeries && t.globals.dom.elWrap.addEventListener("click", this.onLegendClick, !0), t.config.legend.onItemHover.highlightDataSeries && (t.globals.dom.elWrap.addEventListener("mousemove", this.onLegendHovered, !0), t.globals.dom.elWrap.addEventListener("mouseout", this.onLegendHovered, !0)) } }, { key: "setLegendWrapXY", value: function (t, e) { var i = this.w, a = i.globals.dom.baseEl.querySelector(".apexcharts-legend"), s = a.getBoundingClientRect(), r = 0, n = 0; if ("bottom" === i.config.legend.position) n += i.globals.svgHeight - s.height / 2; else if ("top" === i.config.legend.position) { var o = new lt(this.ctx), l = o.dimHelpers.getTitleSubtitleCoords("title").height, h = o.dimHelpers.getTitleSubtitleCoords("subtitle").height; n = n + (l > 0 ? l - 10 : 0) + (h > 0 ? h - 10 : 0) } a.style.position = "absolute", r = r + t + i.config.legend.offsetX, n = n + e + i.config.legend.offsetY, a.style.left = r + "px", a.style.top = n + "px", "bottom" === i.config.legend.position ? (a.style.top = "auto", a.style.bottom = 5 - i.config.legend.offsetY + "px") : "right" === i.config.legend.position && (a.style.left = "auto", a.style.right = 25 + i.config.legend.offsetX + "px");["width", "height"].forEach((function (t) { a.style[t] && (a.style[t] = parseInt(i.config.legend[t], 10) + "px") })) } }, { key: "legendAlignHorizontal", value: function () { var t = this.w; t.globals.dom.baseEl.querySelector(".apexcharts-legend").style.right = 0; var e = this.legendHelpers.getLegendBBox(), i = new lt(this.ctx), a = i.dimHelpers.getTitleSubtitleCoords("title"), s = i.dimHelpers.getTitleSubtitleCoords("subtitle"), r = 0; "bottom" === t.config.legend.position ? r = -e.clwh / 1.8 : "top" === t.config.legend.position && (r = a.height + s.height + t.config.title.margin + t.config.subtitle.margin - 10), this.setLegendWrapXY(20, r) } }, { key: "legendAlignVertical", value: function () { var t = this.w, e = this.legendHelpers.getLegendBBox(), i = 0; "left" === t.config.legend.position && (i = 20), "right" === t.config.legend.position && (i = t.globals.svgWidth - e.clww - 10), this.setLegendWrapXY(i, 20) } }, { key: "onLegendHovered", value: function (t) { var e = this.w, i = t.target.classList.contains("apexcharts-legend-text") || t.target.classList.contains("apexcharts-legend-marker"); if ("heatmap" === e.config.chart.type || this.isBarsDistributed) { if (i) { var a = parseInt(t.target.getAttribute("rel"), 10) - 1; this.ctx.events.fireEvent("legendHover", [this.ctx, a, this.w]), new X(this.ctx).highlightRangeInSeries(t, t.target) } } else !t.target.classList.contains("apexcharts-inactive-legend") && i && new X(this.ctx).toggleSeriesOnHover(t, t.target) } }, { key: "onLegendClick", value: function (t) { if (t.target.classList.contains("apexcharts-legend-text") || t.target.classList.contains("apexcharts-legend-marker")) { var e = parseInt(t.target.getAttribute("rel"), 10) - 1, i = "true" === t.target.getAttribute("data:collapsed"), a = this.w.config.chart.events.legendClick; "function" == typeof a && a(this.ctx, e, this.w), this.ctx.events.fireEvent("legendClick", [this.ctx, e, this.w]); var s = this.w.config.legend.markers.onClick; "function" == typeof s && t.target.classList.contains("apexcharts-legend-marker") && (s(this.ctx, e, this.w), this.ctx.events.fireEvent("legendMarkerClick", [this.ctx, e, this.w])), this.legendHelpers.toggleDataSeries(e, i) } } }]), t }(), dt = function () { function t(i) { e(this, t), this.ctx = i, this.w = i.w, this.ev = this.w.config.chart.events, this.selectedClass = "apexcharts-selected", this.localeValues = this.w.globals.locale.toolbar } return a(t, [{ key: "createToolbar", value: function () { var t = this, e = this.w, i = function () { return document.createElement("div") }, a = i(); if (a.setAttribute("class", "apexcharts-toolbar"), a.style.top = e.config.chart.toolbar.offsetY + "px", a.style.right = 3 - e.config.chart.toolbar.offsetX + "px", e.globals.dom.elWrap.appendChild(a), this.elZoom = i(), this.elZoomIn = i(), this.elZoomOut = i(), this.elPan = i(), this.elSelection = i(), this.elZoomReset = i(), this.elMenuIcon = i(), this.elMenu = i(), this.elCustomIcons = [], this.t = e.config.chart.toolbar.tools, Array.isArray(this.t.customIcons)) for (var s = 0; s < this.t.customIcons.length; s++)this.elCustomIcons.push(i()); var r = [], n = function (i, a, s) { var n = i.toLowerCase(); t.t[n] && e.config.chart.zoom.enabled && r.push({ el: a, icon: "string" == typeof t.t[n] ? t.t[n] : s, title: t.localeValues[i], class: "apexcharts-".concat(n, "-icon") }) }; n("zoomIn", this.elZoomIn, '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n'), n("zoomOut", this.elZoomOut, '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n'); var o = function (i) { t.t[i] && e.config.chart[i].enabled && r.push({ el: "zoom" === i ? t.elZoom : t.elSelection, icon: "string" == typeof t.t[i] ? t.t[i] : "zoom" === i ? '<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>\n    <path d="M0 0h24v24H0V0z" fill="none"/>\n    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>\n</svg>' : '<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>\n</svg>', title: t.localeValues["zoom" === i ? "selectionZoom" : "selection"], class: e.globals.isTouchDevice ? "apexcharts-element-hidden" : "apexcharts-".concat(i, "-icon") }) }; o("zoom"), o("selection"), this.t.pan && e.config.chart.zoom.enabled && r.push({ el: this.elPan, icon: "string" == typeof this.t.pan ? this.t.pan : '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <defs>\n        <path d="M0 0h24v24H0z" id="a"/>\n    </defs>\n    <clipPath id="b">\n        <use overflow="visible" xlink:href="#a"/>\n    </clipPath>\n    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>\n</svg>', title: this.localeValues.pan, class: e.globals.isTouchDevice ? "apexcharts-element-hidden" : "apexcharts-pan-icon" }), n("reset", this.elZoomReset, '<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>'), this.t.download && r.push({ el: this.elMenuIcon, icon: "string" == typeof this.t.download ? this.t.download : '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>', title: this.localeValues.menu, class: "apexcharts-menu-icon" }); for (var l = 0; l < this.elCustomIcons.length; l++)r.push({ el: this.elCustomIcons[l], icon: this.t.customIcons[l].icon, title: this.t.customIcons[l].title, index: this.t.customIcons[l].index, class: "apexcharts-toolbar-custom-icon " + this.t.customIcons[l].class }); r.forEach((function (t, e) { t.index && f.moveIndexInArray(r, e, t.index) })); for (var h = 0; h < r.length; h++)b.setAttrs(r[h].el, { class: r[h].class, title: r[h].title }), r[h].el.innerHTML = r[h].icon, a.appendChild(r[h].el); this._createHamburgerMenu(a), e.globals.zoomEnabled ? this.elZoom.classList.add(this.selectedClass) : e.globals.panEnabled ? this.elPan.classList.add(this.selectedClass) : e.globals.selectionEnabled && this.elSelection.classList.add(this.selectedClass), this.addToolbarEventListeners() } }, { key: "_createHamburgerMenu", value: function (t) { this.elMenuItems = [], t.appendChild(this.elMenu), b.setAttrs(this.elMenu, { class: "apexcharts-menu" }); var e = [{ name: "exportSVG", title: this.localeValues.exportToSVG }, { name: "exportPNG", title: this.localeValues.exportToPNG }, { name: "exportCSV", title: this.localeValues.exportToCSV }]; this.w.globals.allSeriesHasEqualX || e.splice(2, 1); for (var i = 0; i < e.length; i++)this.elMenuItems.push(document.createElement("div")), this.elMenuItems[i].innerHTML = e[i].title, b.setAttrs(this.elMenuItems[i], { class: "apexcharts-menu-item ".concat(e[i].name), title: e[i].title }), this.elMenu.appendChild(this.elMenuItems[i]) } }, { key: "addToolbarEventListeners", value: function () { var t = this; this.elZoomReset.addEventListener("click", this.handleZoomReset.bind(this)), this.elSelection.addEventListener("click", this.toggleZoomSelection.bind(this, "selection")), this.elZoom.addEventListener("click", this.toggleZoomSelection.bind(this, "zoom")), this.elZoomIn.addEventListener("click", this.handleZoomIn.bind(this)), this.elZoomOut.addEventListener("click", this.handleZoomOut.bind(this)), this.elPan.addEventListener("click", this.togglePanning.bind(this)), this.elMenuIcon.addEventListener("click", this.toggleMenu.bind(this)), this.elMenuItems.forEach((function (e) { e.classList.contains("exportSVG") ? e.addEventListener("click", t.handleDownload.bind(t, "svg")) : e.classList.contains("exportPNG") ? e.addEventListener("click", t.handleDownload.bind(t, "png")) : e.classList.contains("exportCSV") && e.addEventListener("click", t.handleDownload.bind(t, "csv")) })); for (var e = 0; e < this.t.customIcons.length; e++)this.elCustomIcons[e].addEventListener("click", this.t.customIcons[e].click.bind(this, this.ctx, this.ctx.w)) } }, { key: "toggleZoomSelection", value: function (t) { this.ctx.getSyncedCharts().forEach((function (e) { e.ctx.toolbar.toggleOtherControls(); var i = "selection" === t ? e.ctx.toolbar.elSelection : e.ctx.toolbar.elZoom, a = "selection" === t ? "selectionEnabled" : "zoomEnabled"; e.w.globals[a] = !e.w.globals[a], i.classList.contains(e.ctx.toolbar.selectedClass) ? i.classList.remove(e.ctx.toolbar.selectedClass) : i.classList.add(e.ctx.toolbar.selectedClass) })) } }, { key: "getToolbarIconsReference", value: function () { var t = this.w; this.elZoom || (this.elZoom = t.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")), this.elPan || (this.elPan = t.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")), this.elSelection || (this.elSelection = t.globals.dom.baseEl.querySelector(".apexcharts-selection-icon")) } }, { key: "enableZoomPanFromToolbar", value: function (t) { this.toggleOtherControls(), "pan" === t ? this.w.globals.panEnabled = !0 : this.w.globals.zoomEnabled = !0; var e = "pan" === t ? this.elPan : this.elZoom, i = "pan" === t ? this.elZoom : this.elPan; e && e.classList.add(this.selectedClass), i && i.classList.remove(this.selectedClass) } }, { key: "togglePanning", value: function () { this.ctx.getSyncedCharts().forEach((function (t) { t.ctx.toolbar.toggleOtherControls(), t.w.globals.panEnabled = !t.w.globals.panEnabled, t.ctx.toolbar.elPan.classList.contains(t.ctx.toolbar.selectedClass) ? t.ctx.toolbar.elPan.classList.remove(t.ctx.toolbar.selectedClass) : t.ctx.toolbar.elPan.classList.add(t.ctx.toolbar.selectedClass) })) } }, { key: "toggleOtherControls", value: function () { var t = this, e = this.w; e.globals.panEnabled = !1, e.globals.zoomEnabled = !1, e.globals.selectionEnabled = !1, this.getToolbarIconsReference(), [this.elPan, this.elSelection, this.elZoom].forEach((function (e) { e && e.classList.remove(t.selectedClass) })) } }, { key: "handleZoomIn", value: function () { var t = this.w, e = (t.globals.minX + t.globals.maxX) / 2, i = (t.globals.minX + e) / 2, a = (t.globals.maxX + e) / 2, s = this._getNewMinXMaxX(i, a); t.globals.disableZoomIn || this.zoomUpdateOptions(s.minX, s.maxX) } }, { key: "handleZoomOut", value: function () { var t = this.w; if (!("datetime" === t.config.xaxis.type && new Date(t.globals.minX).getUTCFullYear() < 1e3)) { var e = (t.globals.minX + t.globals.maxX) / 2, i = t.globals.minX - (e - t.globals.minX), a = t.globals.maxX - (e - t.globals.maxX), s = this._getNewMinXMaxX(i, a); t.globals.disableZoomOut || this.zoomUpdateOptions(s.minX, s.maxX) } } }, { key: "_getNewMinXMaxX", value: function (t, e) { var i = this.w.config.xaxis.convertedCatToNumeric; return { minX: i ? Math.floor(t) : t, maxX: i ? Math.floor(e) : e } } }, { key: "zoomUpdateOptions", value: function (t, e) { var i = this.w; if (void 0 !== t || void 0 !== e) { if (!(i.config.xaxis.convertedCatToNumeric && (t < 1 && (t = 1, e = i.globals.dataPoints), e - t < 2))) { var a = { min: t, max: e }, s = this.getBeforeZoomRange(a); s && (a = s.xaxis); var r = { xaxis: a }, n = f.clone(i.globals.initialConfig.yaxis); if (i.config.chart.zoom.autoScaleYaxis) n = new q(this.ctx).autoScaleY(this.ctx, n, { xaxis: a }); i.config.chart.group || (r.yaxis = n), this.w.globals.zoomed = !0, this.ctx.updateHelpers._updateOptions(r, !1, this.w.config.chart.animations.dynamicAnimation.enabled), this.zoomCallback(a, n) } } else this.handleZoomReset() } }, { key: "zoomCallback", value: function (t, e) { "function" == typeof this.ev.zoomed && this.ev.zoomed(this.ctx, { xaxis: t, yaxis: e }) } }, { key: "getBeforeZoomRange", value: function (t, e) { var i = null; return "function" == typeof this.ev.beforeZoom && (i = this.ev.beforeZoom(this, { xaxis: t, yaxis: e })), i } }, { key: "toggleMenu", value: function () { var t = this; window.setTimeout((function () { t.elMenu.classList.contains("apexcharts-menu-open") ? t.elMenu.classList.remove("apexcharts-menu-open") : t.elMenu.classList.add("apexcharts-menu-open") }), 0) } }, { key: "handleDownload", value: function (t) { var e = this.w, i = new _(this.ctx); switch (t) { case "svg": i.exportToSVG(this.ctx); break; case "png": i.exportToPng(this.ctx); break; case "csv": i.exportToCSV({ series: e.config.series, columnDelimiter: e.config.chart.toolbar.export.csv.columnDelimiter }) } } }, { key: "handleZoomReset", value: function (t) { this.ctx.getSyncedCharts().forEach((function (t) { var e = t.w; e.globals.lastXAxis.min = void 0, e.globals.lastXAxis.max = void 0, t.updateHelpers.revertDefaultAxisMinMax(), "function" == typeof e.config.chart.events.zoomed && t.ctx.toolbar.zoomCallback({ min: e.config.xaxis.min, max: e.config.xaxis.max }), e.globals.zoomed = !1; var i = t.ctx.series.emptyCollapsedSeries(f.clone(e.globals.initialSeries)); t.updateHelpers._updateSeries(i, e.config.chart.animations.dynamicAnimation.enabled) })) } }, { key: "destroy", value: function () { this.elZoom = null, this.elZoomIn = null, this.elZoomOut = null, this.elPan = null, this.elSelection = null, this.elZoomReset = null, this.elMenuIcon = null } }]), t }(), gt = function (t) { o(s, t); var i = d(s); function s(t) { var a; return e(this, s), (a = i.call(this, t)).ctx = t, a.w = t.w, a.dragged = !1, a.graphics = new b(a.ctx), a.eventList = ["mousedown", "mouseleave", "mousemove", "touchstart", "touchmove", "mouseup", "touchend"], a.clientX = 0, a.clientY = 0, a.startX = 0, a.endX = 0, a.dragX = 0, a.startY = 0, a.endY = 0, a.dragY = 0, a.moveDirection = "none", a } return a(s, [{ key: "init", value: function (t) { var e = this, i = t.xyRatios, a = this.w, s = this; this.xyRatios = i, this.zoomRect = this.graphics.drawRect(0, 0, 0, 0), this.selectionRect = this.graphics.drawRect(0, 0, 0, 0), this.gridRect = a.globals.dom.baseEl.querySelector(".apexcharts-grid"), this.zoomRect.node.classList.add("apexcharts-zoom-rect"), this.selectionRect.node.classList.add("apexcharts-selection-rect"), a.globals.dom.elGraphical.add(this.zoomRect), a.globals.dom.elGraphical.add(this.selectionRect), "x" === a.config.chart.selection.type ? this.slDraggableRect = this.selectionRect.draggable({ minX: 0, minY: 0, maxX: a.globals.gridWidth, maxY: a.globals.gridHeight }).on("dragmove", this.selectionDragging.bind(this, "dragging")) : "y" === a.config.chart.selection.type ? this.slDraggableRect = this.selectionRect.draggable({ minX: 0, maxX: a.globals.gridWidth }).on("dragmove", this.selectionDragging.bind(this, "dragging")) : this.slDraggableRect = this.selectionRect.draggable().on("dragmove", this.selectionDragging.bind(this, "dragging")), this.preselectedSelection(), this.hoverArea = a.globals.dom.baseEl.querySelector("".concat(a.globals.chartClass, " .apexcharts-svg")), this.hoverArea.classList.add("apexcharts-zoomable"), this.eventList.forEach((function (t) { e.hoverArea.addEventListener(t, s.svgMouseEvents.bind(s, i), { capture: !1, passive: !0 }) })) } }, { key: "destroy", value: function () { this.slDraggableRect && (this.slDraggableRect.draggable(!1), this.slDraggableRect.off(), this.selectionRect.off()), this.selectionRect = null, this.zoomRect = null, this.gridRect = null } }, { key: "svgMouseEvents", value: function (t, e) { var i = this.w, a = this, s = this.ctx.toolbar, r = i.globals.zoomEnabled ? i.config.chart.zoom.type : i.config.chart.selection.type, n = i.config.chart.toolbar.autoSelected; e.shiftKey ? (this.shiftWasPressed = !0, s.enableZoomPanFromToolbar("pan" === n ? "zoom" : "pan")) : this.shiftWasPressed && (s.enableZoomPanFromToolbar(n), this.shiftWasPressed = !1); var o = e.target.classList; if (!(o.contains("apexcharts-selection-rect") || o.contains("apexcharts-legend-marker") || o.contains("apexcharts-legend-text") || e.target.parentNode.classList.contains("apexcharts-toolbar"))) { if (a.clientX = "touchmove" === e.type || "touchstart" === e.type ? e.touches[0].clientX : "touchend" === e.type ? e.changedTouches[0].clientX : e.clientX, a.clientY = "touchmove" === e.type || "touchstart" === e.type ? e.touches[0].clientY : "touchend" === e.type ? e.changedTouches[0].clientY : e.clientY, "mousedown" === e.type && 1 === e.which) { var l = a.gridRect.getBoundingClientRect(); a.startX = a.clientX - l.left, a.startY = a.clientY - l.top, a.dragged = !1, a.w.globals.mousedown = !0 } if (("mousemove" === e.type && 1 === e.which || "touchmove" === e.type) && (a.dragged = !0, i.globals.panEnabled ? (i.globals.selection = null, a.w.globals.mousedown && a.panDragging({ context: a, zoomtype: r, xyRatios: t })) : (a.w.globals.mousedown && i.globals.zoomEnabled || a.w.globals.mousedown && i.globals.selectionEnabled) && (a.selection = a.selectionDrawing({ context: a, zoomtype: r }))), "mouseup" === e.type || "touchend" === e.type || "mouseleave" === e.type) { var h = a.gridRect.getBoundingClientRect(); a.w.globals.mousedown && (a.endX = a.clientX - h.left, a.endY = a.clientY - h.top, a.dragX = Math.abs(a.endX - a.startX), a.dragY = Math.abs(a.endY - a.startY), (i.globals.zoomEnabled || i.globals.selectionEnabled) && a.selectionDrawn({ context: a, zoomtype: r }), i.globals.panEnabled && i.config.xaxis.convertedCatToNumeric && a.delayedPanScrolled()), i.globals.zoomEnabled && a.hideSelectionRect(this.selectionRect), a.dragged = !1, a.w.globals.mousedown = !1 } this.makeSelectionRectDraggable() } } }, { key: "makeSelectionRectDraggable", value: function () { var t = this.w; if (this.selectionRect) { var e = this.selectionRect.node.getBoundingClientRect(); e.width > 0 && e.height > 0 && this.slDraggableRect.selectize({ points: "l, r", pointSize: 8, pointType: "rect" }).resize({ constraint: { minX: 0, minY: 0, maxX: t.globals.gridWidth, maxY: t.globals.gridHeight } }).on("resizing", this.selectionDragging.bind(this, "resizing")) } } }, { key: "preselectedSelection", value: function () { var t = this.w, e = this.xyRatios; if (!t.globals.zoomEnabled) if (void 0 !== t.globals.selection && null !== t.globals.selection) this.drawSelectionRect(t.globals.selection); else if (void 0 !== t.config.chart.selection.xaxis.min && void 0 !== t.config.chart.selection.xaxis.max) { var i = (t.config.chart.selection.xaxis.min - t.globals.minX) / e.xRatio, a = { x: i, y: 0, width: t.globals.gridWidth - (t.globals.maxX - t.config.chart.selection.xaxis.max) / e.xRatio - i, height: t.globals.gridHeight, translateX: 0, translateY: 0, selectionEnabled: !0 }; this.drawSelectionRect(a), this.makeSelectionRectDraggable(), "function" == typeof t.config.chart.events.selection && t.config.chart.events.selection(this.ctx, { xaxis: { min: t.config.chart.selection.xaxis.min, max: t.config.chart.selection.xaxis.max }, yaxis: {} }) } } }, { key: "drawSelectionRect", value: function (t) { var e = t.x, i = t.y, a = t.width, s = t.height, r = t.translateX, n = void 0 === r ? 0 : r, o = t.translateY, l = void 0 === o ? 0 : o, h = this.w, c = this.zoomRect, d = this.selectionRect; if (this.dragged || null !== h.globals.selection) { var g = { transform: "translate(" + n + ", " + l + ")" }; h.globals.zoomEnabled && this.dragged && (a < 0 && (a = 1), c.attr({ x: e, y: i, width: a, height: s, fill: h.config.chart.zoom.zoomedArea.fill.color, "fill-opacity": h.config.chart.zoom.zoomedArea.fill.opacity, stroke: h.config.chart.zoom.zoomedArea.stroke.color, "stroke-width": h.config.chart.zoom.zoomedArea.stroke.width, "stroke-opacity": h.config.chart.zoom.zoomedArea.stroke.opacity }), b.setAttrs(c.node, g)), h.globals.selectionEnabled && (d.attr({ x: e, y: i, width: a > 0 ? a : 0, height: s > 0 ? s : 0, fill: h.config.chart.selection.fill.color, "fill-opacity": h.config.chart.selection.fill.opacity, stroke: h.config.chart.selection.stroke.color, "stroke-width": h.config.chart.selection.stroke.width, "stroke-dasharray": h.config.chart.selection.stroke.dashArray, "stroke-opacity": h.config.chart.selection.stroke.opacity }), b.setAttrs(d.node, g)) } } }, { key: "hideSelectionRect", value: function (t) { t && t.attr({ x: 0, y: 0, width: 0, height: 0 }) } }, { key: "selectionDrawing", value: function (t) { var e = t.context, i = t.zoomtype, a = this.w, s = e, r = this.gridRect.getBoundingClientRect(), n = s.startX - 1, o = s.startY, l = !1, h = !1, c = s.clientX - r.left - n, d = s.clientY - r.top - o, g = {}; return Math.abs(c + n) > a.globals.gridWidth ? c = a.globals.gridWidth - n : s.clientX - r.left < 0 && (c = n), n > s.clientX - r.left && (l = !0, c = Math.abs(c)), o > s.clientY - r.top && (h = !0, d = Math.abs(d)), g = "x" === i ? { x: l ? n - c : n, y: 0, width: c, height: a.globals.gridHeight } : "y" === i ? { x: 0, y: h ? o - d : o, width: a.globals.gridWidth, height: d } : { x: l ? n - c : n, y: h ? o - d : o, width: c, height: d }, s.drawSelectionRect(g), s.selectionDragging("resizing"), g } }, { key: "selectionDragging", value: function (t, e) { var i = this, a = this.w, s = this.xyRatios, r = this.selectionRect, n = 0; "resizing" === t && (n = 30); var o = function (t) { return parseFloat(r.node.getAttribute(t)) }, l = { x: o("x"), y: o("y"), width: o("width"), height: o("height") }; a.globals.selection = l, "function" == typeof a.config.chart.events.selection && a.globals.selectionEnabled && (clearTimeout(this.w.globals.selectionResizeTimer), this.w.globals.selectionResizeTimer = window.setTimeout((function () { var t = i.gridRect.getBoundingClientRect(), e = r.node.getBoundingClientRect(), n = a.globals.xAxisScale.niceMin + (e.left - t.left) * s.xRatio, o = a.globals.xAxisScale.niceMin + (e.right - t.left) * s.xRatio, l = a.globals.yAxisScale[0].niceMin + (t.bottom - e.bottom) * s.yRatio[0], h = a.globals.yAxisScale[0].niceMax - (e.top - t.top) * s.yRatio[0]; a.config.chart.events.selection(i.ctx, { xaxis: { min: n, max: o }, yaxis: { min: l, max: h } }) }), n)) } }, { key: "selectionDrawn", value: function (t) { var e = t.context, i = t.zoomtype, a = this.w, s = e, r = this.xyRatios, n = this.ctx.toolbar; if (s.startX > s.endX) { var o = s.startX; s.startX = s.endX, s.endX = o } if (s.startY > s.endY) { var l = s.startY; s.startY = s.endY, s.endY = l } var h = a.globals.xAxisScale.niceMin + s.startX * r.xRatio, c = a.globals.xAxisScale.niceMin + s.endX * r.xRatio, d = [], g = []; if (a.config.yaxis.forEach((function (t, e) { d.push(a.globals.yAxisScale[e].niceMax - r.yRatio[e] * s.startY), g.push(a.globals.yAxisScale[e].niceMax - r.yRatio[e] * s.endY) })), s.dragged && (s.dragX > 10 || s.dragY > 10) && h !== c) if (a.globals.zoomEnabled) { var u = f.clone(a.globals.initialConfig.yaxis), p = f.clone(a.globals.initialConfig.xaxis); if (a.globals.zoomed = !0, a.config.xaxis.convertedCatToNumeric && (h = Math.floor(h), c = Math.floor(c), h < 1 && (h = 1, c = a.globals.dataPoints), c - h < 2 && (c = h + 1)), "xy" !== i && "x" !== i || (p = { min: h, max: c }), "xy" !== i && "y" !== i || u.forEach((function (t, e) { u[e].min = g[e], u[e].max = d[e] })), a.config.chart.zoom.autoScaleYaxis) { var x = new q(s.ctx); u = x.autoScaleY(s.ctx, u, { xaxis: p }) } if (n) { var b = n.getBeforeZoomRange(p, u); b && (p = b.xaxis ? b.xaxis : p, u = b.yaxis ? b.yaxis : u) } var m = { xaxis: p }; a.config.chart.group || (m.yaxis = u), s.ctx.updateHelpers._updateOptions(m, !1, s.w.config.chart.animations.dynamicAnimation.enabled), "function" == typeof a.config.chart.events.zoomed && n.zoomCallback(p, u) } else if (a.globals.selectionEnabled) { var v, y = null; v = { min: h, max: c }, "xy" !== i && "y" !== i || (y = f.clone(a.config.yaxis)).forEach((function (t, e) { y[e].min = g[e], y[e].max = d[e] })), a.globals.selection = s.selection, "function" == typeof a.config.chart.events.selection && a.config.chart.events.selection(s.ctx, { xaxis: v, yaxis: y }) } } }, { key: "panDragging", value: function (t) { var e = t.context, i = this.w, a = e; if (void 0 !== i.globals.lastClientPosition.x) { var s = i.globals.lastClientPosition.x - a.clientX, r = i.globals.lastClientPosition.y - a.clientY; Math.abs(s) > Math.abs(r) && s > 0 ? this.moveDirection = "left" : Math.abs(s) > Math.abs(r) && s < 0 ? this.moveDirection = "right" : Math.abs(r) > Math.abs(s) && r > 0 ? this.moveDirection = "up" : Math.abs(r) > Math.abs(s) && r < 0 && (this.moveDirection = "down") } i.globals.lastClientPosition = { x: a.clientX, y: a.clientY }; var n = i.globals.minX, o = i.globals.maxX; i.config.xaxis.convertedCatToNumeric || a.panScrolled(n, o) } }, { key: "delayedPanScrolled", value: function () { var t = this.w, e = t.globals.minX, i = t.globals.maxX, a = (t.globals.maxX - t.globals.minX) / 2; "left" === this.moveDirection ? (e = t.globals.minX + a, i = t.globals.maxX + a) : "right" === this.moveDirection && (e = t.globals.minX - a, i = t.globals.maxX - a), e = Math.floor(e), i = Math.floor(i), this.updateScrolledChart({ xaxis: { min: e, max: i } }, e, i) } }, { key: "panScrolled", value: function (t, e) { var i = this.w, a = this.xyRatios, s = f.clone(i.globals.initialConfig.yaxis); "left" === this.moveDirection ? (t = i.globals.minX + i.globals.gridWidth / 15 * a.xRatio, e = i.globals.maxX + i.globals.gridWidth / 15 * a.xRatio) : "right" === this.moveDirection && (t = i.globals.minX - i.globals.gridWidth / 15 * a.xRatio, e = i.globals.maxX - i.globals.gridWidth / 15 * a.xRatio), (t < i.globals.initialMinX || e > i.globals.initialMaxX) && (t = i.globals.minX, e = i.globals.maxX); var r = { min: t, max: e }; i.config.chart.zoom.autoScaleYaxis && (s = new q(this.ctx).autoScaleY(this.ctx, s, { xaxis: r })); var n = { xaxis: { min: t, max: e } }; i.config.chart.group || (n.yaxis = s), this.updateScrolledChart(n, t, e) } }, { key: "updateScrolledChart", value: function (t, e, i) { var a = this.w; this.ctx.updateHelpers._updateOptions(t, !1, !1), "function" == typeof a.config.chart.events.scrolled && a.config.chart.events.scrolled(this.ctx, { xaxis: { min: e, max: i } }) } }]), s }(dt), ut = function () { function t(i) { e(this, t), this.w = i.w, this.ttCtx = i, this.ctx = i.ctx } return a(t, [{ key: "getNearestValues", value: function (t) { var e = t.hoverArea, i = t.elGrid, a = t.clientX, s = t.clientY, r = this.w, n = r.globals.gridWidth, o = n / (r.globals.dataPoints - 1), l = i.getBoundingClientRect(), h = this.hasBars(); !r.globals.comboCharts && !h || r.config.xaxis.convertedCatToNumeric || (o = n / r.globals.dataPoints); var c = a - l.left - r.globals.barPadForNumericAxis, d = s - l.top; c < 0 || d < 0 || c > r.globals.gridWidth || d > r.globals.gridHeight ? (e.classList.remove("hovering-zoom"), e.classList.remove("hovering-pan")) : r.globals.zoomEnabled ? (e.classList.remove("hovering-pan"), e.classList.add("hovering-zoom")) : r.globals.panEnabled && (e.classList.remove("hovering-zoom"), e.classList.add("hovering-pan")); var g = Math.round(c / o); h && !r.config.xaxis.convertedCatToNumeric && (g = Math.ceil(c / o), g -= 1); for (var u, p = null, x = null, b = [], m = 0; m < r.globals.seriesXvalues.length; m++)b.push([r.globals.seriesXvalues[m][0] - 1e-6].concat(r.globals.seriesXvalues[m])); return b = b.map((function (t) { return t.filter((function (t) { return t })) })), u = r.globals.seriesYvalues.map((function (t) { return t.filter((function (t) { return f.isNumber(t) })) })), r.globals.isXNumeric && (p = (x = this.closestInMultiArray(c, d, b, u)).index, g = x.j, null !== p && (b = r.globals.seriesXvalues[p], g = (x = this.closestInArray(c, b)).index)), r.globals.capturedSeriesIndex = null === p ? -1 : p, (!g || g < 1) && (g = 0), r.globals.capturedDataPointIndex = g, { capturedSeries: p, j: g, hoverX: c, hoverY: d } } }, { key: "closestInMultiArray", value: function (t, e, i, a) { var s = this.w, r = 0, n = null, o = -1; s.globals.series.length > 1 ? r = this.getFirstActiveXArray(i) : n = 0; var l = a[r][0], h = i[r][0], c = Math.abs(t - h), d = Math.abs(e - l), g = d + c; return a.map((function (s, r) { s.map((function (s, l) { var h = Math.abs(e - a[r][l]), u = Math.abs(t - i[r][l]), f = u + h; f < g && (g = f, c = u, d = h, n = r, o = l) })) })), { index: n, j: o } } }, { key: "getFirstActiveXArray", value: function (t) { for (var e = 0, i = t.map((function (t, e) { return t.length > 0 ? e : -1 })), a = 0; a < i.length; a++)if (-1 !== i[a]) { e = i[a]; break } return e } }, { key: "closestInArray", value: function (t, e) { for (var i = e[0], a = null, s = Math.abs(t - i), r = 0; r < e.length; r++) { var n = Math.abs(t - e[r]); n < s && (s = n, a = r) } return { index: a } } }, { key: "isXoverlap", value: function (t) { var e = [], i = this.w.globals.seriesX.filter((function (t) { return void 0 !== t[0] })); if (i.length > 0) for (var a = 0; a < i.length - 1; a++)void 0 !== i[a][t] && void 0 !== i[a + 1][t] && i[a][t] !== i[a + 1][t] && e.push("unEqual"); return 0 === e.length } }, { key: "isInitialSeriesSameLen", value: function () { for (var t = !0, e = this.w.globals.initialSeries, i = 0; i < e.length - 1; i++)if (e[i].data.length !== e[i + 1].data.length) { t = !1; break } return t } }, { key: "getBarsHeight", value: function (t) { return g(t).reduce((function (t, e) { return t + e.getBBox().height }), 0) } }, { key: "getElMarkers", value: function () { return this.w.globals.dom.baseEl.querySelectorAll(" .apexcharts-series-markers") } }, { key: "getAllMarkers", value: function () { var t = this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap"); (t = g(t)).sort((function (t, e) { return Number(e.getAttribute("data:realIndex")) < Number(t.getAttribute("data:realIndex")) ? 0 : -1 })); var e = []; return t.forEach((function (t) { e.push(t.querySelector(".apexcharts-marker")) })), e } }, { key: "hasMarkers", value: function () { return this.getElMarkers().length > 0 } }, { key: "getElBars", value: function () { return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-rangebar-series") } }, { key: "hasBars", value: function () { return this.getElBars().length > 0 } }, { key: "getHoverMarkerSize", value: function (t) { var e = this.w, i = e.config.markers.hover.size; return void 0 === i && (i = e.globals.markers.size[t] + e.config.markers.hover.sizeOffset), i } }, { key: "toggleAllTooltipSeriesGroups", value: function (t) { var e = this.w, i = this.ttCtx; 0 === i.allTooltipSeriesGroups.length && (i.allTooltipSeriesGroups = e.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group")); for (var a = i.allTooltipSeriesGroups, s = 0; s < a.length; s++)"enable" === t ? (a[s].classList.add("apexcharts-active"), a[s].style.display = e.config.tooltip.items.display) : (a[s].classList.remove("apexcharts-active"), a[s].style.display = "none") } }]), t }(), ft = function () { function t(i) { e(this, t), this.w = i.w, this.ctx = i.ctx, this.ttCtx = i, this.tooltipUtil = new ut(i) } return a(t, [{ key: "drawSeriesTexts", value: function (t) { var e = t.shared, i = void 0 === e || e, a = t.ttItems, s = t.i, r = void 0 === s ? 0 : s, n = t.j, o = void 0 === n ? null : n, l = t.y1, h = t.y2, c = this.w; void 0 !== c.config.tooltip.custom ? this.handleCustomTooltip({ i: r, j: o, y1: l, y2: h, w: c }) : this.toggleActiveInactiveSeries(i); var d = this.getValuesToPrint({ i: r, j: o }); this.printLabels({ i: r, j: o, values: d, ttItems: a, shared: i }); var g = this.ttCtx.getElTooltip(); this.ttCtx.tooltipRect.ttWidth = g.getBoundingClientRect().width, this.ttCtx.tooltipRect.ttHeight = g.getBoundingClientRect().height } }, { key: "printLabels", value: function (t) { var e, i = this, a = t.i, s = t.j, r = t.values, n = t.ttItems, o = t.shared, l = this.w, h = r.xVal, c = r.zVal, d = r.xAxisTTVal, g = "", u = l.globals.colors[a]; null !== s && l.config.plotOptions.bar.distributed && (u = l.globals.colors[s]); for (var f = function (t, r) { var f = i.getFormatters(a); g = i.getSeriesName({ fn: f.yLbTitleFormatter, index: a, seriesIndex: a, j: s }); var p = l.config.tooltip.inverseOrder ? r : t; if (l.globals.axisCharts) { var x = function (t) { return f.yLbFormatter(l.globals.series[t][s], { series: l.globals.series, seriesIndex: t, dataPointIndex: s, w: l }) }; o ? (f = i.getFormatters(p), g = i.getSeriesName({ fn: f.yLbTitleFormatter, index: p, seriesIndex: a, j: s }), u = l.globals.colors[p], e = x(p)) : e = x(a) } null === s && (e = f.yLbFormatter(l.globals.series[a], l)), i.DOMHandling({ i: a, t: p, j: s, ttItems: n, values: { val: e, xVal: h, xAxisTTVal: d, zVal: c }, seriesName: g, shared: o, pColor: u }) }, p = 0, x = l.globals.series.length - 1; p < l.globals.series.length; p++ , x--)f(p, x) } }, { key: "getFormatters", value: function (t) { var e, i = this.w, a = i.globals.yLabelFormatters[t]; return void 0 !== i.globals.ttVal ? Array.isArray(i.globals.ttVal) ? (a = i.globals.ttVal[t] && i.globals.ttVal[t].formatter, e = i.globals.ttVal[t] && i.globals.ttVal[t].title && i.globals.ttVal[t].title.formatter) : (a = i.globals.ttVal.formatter, "function" == typeof i.globals.ttVal.title.formatter && (e = i.globals.ttVal.title.formatter)) : e = i.config.tooltip.y.title.formatter, "function" != typeof a && (a = i.globals.yLabelFormatters[0] ? i.globals.yLabelFormatters[0] : function (t) { return t }), "function" != typeof e && (e = function (t) { return t }), { yLbFormatter: a, yLbTitleFormatter: e } } }, { key: "getSeriesName", value: function (t) { var e = t.fn, i = t.index, a = t.seriesIndex, s = t.j, r = this.w; return e(String(r.globals.seriesNames[i]), { series: r.globals.series, seriesIndex: a, dataPointIndex: s, w: r }) } }, { key: "DOMHandling", value: function (t) { t.i; var e = t.t, i = (t.j, t.ttItems), a = t.values, s = t.seriesName, r = t.shared, n = t.pColor, o = this.w, l = this.ttCtx, h = a.val, c = a.xVal, d = a.xAxisTTVal, g = a.zVal, u = null; u = i[e].children, o.config.tooltip.fillSeriesColor && (i[e].style.backgroundColor = n, u[0].style.display = "none"), l.showTooltipTitle && (null === l.tooltipTitle && (l.tooltipTitle = o.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")), l.tooltipTitle.innerHTML = c), l.blxaxisTooltip && (l.xaxisTooltipText.innerHTML = "" !== d ? d : c); var f = i[e].querySelector(".apexcharts-tooltip-text-label"); f && (f.innerHTML = s || ""); var p = i[e].querySelector(".apexcharts-tooltip-text-value"); (p && (p.innerHTML = void 0 !== h ? h : ""), u[0] && u[0].classList.contains("apexcharts-tooltip-marker") && (o.config.tooltip.marker.fillColors && Array.isArray(o.config.tooltip.marker.fillColors) && (n = o.config.tooltip.marker.fillColors[e]), u[0].style.backgroundColor = n), o.config.tooltip.marker.show || (u[0].style.display = "none"), null !== g) && (i[e].querySelector(".apexcharts-tooltip-text-z-label").innerHTML = o.config.tooltip.z.title, i[e].querySelector(".apexcharts-tooltip-text-z-value").innerHTML = void 0 !== g ? g : ""); r && u[0] && (null == h || o.globals.collapsedSeriesIndices.indexOf(e) > -1 ? u[0].parentNode.style.display = "none" : u[0].parentNode.style.display = o.config.tooltip.items.display) } }, { key: "toggleActiveInactiveSeries", value: function (t) { var e = this.w; if (t) this.tooltipUtil.toggleAllTooltipSeriesGroups("enable"); else { this.tooltipUtil.toggleAllTooltipSeriesGroups("disable"); var i = e.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group"); i && (i.classList.add("apexcharts-active"), i.style.display = e.config.tooltip.items.display) } } }, { key: "getValuesToPrint", value: function (t) { var e = t.i, i = t.j, a = this.w, s = this.ctx.series.filteredSeriesX(), r = "", n = "", o = null, l = null, h = { series: a.globals.series, seriesIndex: e, dataPointIndex: i, w: a }, c = a.globals.ttZFormatter; null === i ? l = a.globals.series[e] : a.globals.isXNumeric ? (r = s[e][i], 0 === s[e].length && (r = s[this.tooltipUtil.getFirstActiveXArray(s)][i])) : r = void 0 !== a.globals.labels[i] ? a.globals.labels[i] : ""; var d = r; a.globals.isXNumeric && "datetime" === a.config.xaxis.type ? r = new V(this.ctx).xLabelFormat(a.globals.ttKeyFormatter, d, d) : a.globals.isBarHorizontal || (r = a.globals.xLabelFormatter(d, h)); return void 0 !== a.config.tooltip.x.formatter && (r = a.globals.ttKeyFormatter(d, h)), a.globals.seriesZ.length > 0 && a.globals.seriesZ[0].length > 0 && (o = c(a.globals.seriesZ[e][i], a)), n = "function" == typeof a.config.xaxis.tooltip.formatter ? a.globals.xaxisTooltipFormatter(d, h) : r, { val: Array.isArray(l) ? l.join(" ") : l, xVal: Array.isArray(r) ? r.join(" ") : r, xAxisTTVal: Array.isArray(n) ? n.join(" ") : n, zVal: o } } }, { key: "handleCustomTooltip", value: function (t) { var e = t.i, i = t.j, a = t.y1, s = t.y2, r = t.w, n = this.ttCtx.getElTooltip(), o = r.config.tooltip.custom; Array.isArray(o) && o[e] && (o = o[e]), n.innerHTML = o({ ctx: this.ctx, series: r.globals.series, seriesIndex: e, dataPointIndex: i, y1: a, y2: s, w: r }) } }]), t }(), pt = function () { function t(i) { e(this, t), this.ttCtx = i, this.ctx = i.ctx, this.w = i.w } return a(t, [{ key: "moveXCrosshairs", value: function (t) { var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null, i = this.ttCtx, a = this.w, s = i.getElXCrosshairs(), r = t - i.xcrosshairsWidth / 2, n = a.globals.labels.slice().length; if (null !== e && (r = a.globals.gridWidth / n * e), null !== s && (s.setAttribute("x", r), s.setAttribute("x1", r), s.setAttribute("x2", r), s.setAttribute("y2", a.globals.gridHeight), s.classList.add("apexcharts-active")), r < 0 && (r = 0), r > a.globals.gridWidth && (r = a.globals.gridWidth), i.blxaxisTooltip) { var o = r; "tickWidth" !== a.config.xaxis.crosshairs.width && "barWidth" !== a.config.xaxis.crosshairs.width || (o = r + i.xcrosshairsWidth / 2), this.moveXAxisTooltip(o) } } }, { key: "moveYCrosshairs", value: function (t) { var e = this.ttCtx; null !== e.ycrosshairs && b.setAttrs(e.ycrosshairs, { y1: t, y2: t }), null !== e.ycrosshairsHidden && b.setAttrs(e.ycrosshairsHidden, { y1: t, y2: t }) } }, { key: "moveXAxisTooltip", value: function (t) { var e = this.w, i = this.ttCtx; if (null !== i.xaxisTooltip) { i.xaxisTooltip.classList.add("apexcharts-active"); var a = i.xaxisOffY + e.config.xaxis.tooltip.offsetY + e.globals.translateY + 1 + e.config.xaxis.offsetY; if (t -= i.xaxisTooltip.getBoundingClientRect().width / 2, !isNaN(t)) { t += e.globals.translateX; var s; s = new b(this.ctx).getTextRects(i.xaxisTooltipText.innerHTML), i.xaxisTooltipText.style.minWidth = s.width + "px", i.xaxisTooltip.style.left = t + "px", i.xaxisTooltip.style.top = a + "px" } } } }, { key: "moveYAxisTooltip", value: function (t) { var e = this.w, i = this.ttCtx; null === i.yaxisTTEls && (i.yaxisTTEls = e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip")); var a = parseInt(i.ycrosshairsHidden.getAttribute("y1"), 10), s = e.globals.translateY + a, r = i.yaxisTTEls[t].getBoundingClientRect().height, n = e.globals.translateYAxisX[t] - 2; e.config.yaxis[t].opposite && (n -= 26), s -= r / 2, -1 === e.globals.ignoreYAxisIndexes.indexOf(t) ? (i.yaxisTTEls[t].classList.add("apexcharts-active"), i.yaxisTTEls[t].style.top = s + "px", i.yaxisTTEls[t].style.left = n + e.config.yaxis[t].tooltip.offsetX + "px") : i.yaxisTTEls[t].classList.remove("apexcharts-active") } }, { key: "moveTooltip", value: function (t, e) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null, a = this.w, s = this.ttCtx, r = s.getElTooltip(), n = s.tooltipRect, o = null !== i ? parseFloat(i) : 1, l = parseFloat(t) + o + 5, h = parseFloat(e) + o / 2; if (l > a.globals.gridWidth / 2 && (l = l - n.ttWidth - o - 15), l > a.globals.gridWidth - n.ttWidth - 10 && (l = a.globals.gridWidth - n.ttWidth), l < -20 && (l = -20), a.config.tooltip.followCursor) { var c = s.getElGrid(), d = c.getBoundingClientRect(); h = s.e.clientY + a.globals.translateY - d.top - n.ttHeight / 2 } if (!a.config.tooltip.followCursor) { var g = this.positionChecks(n, l, h); l = g.x, h = g.y } isNaN(l) || (l += a.globals.translateX, r.style.left = l + "px", r.style.top = h + "px") } }, { key: "positionChecks", value: function (t, e, i) { var a = this.w; return t.ttHeight / 2 + i > a.globals.gridHeight && (i = a.globals.gridHeight - t.ttHeight + a.globals.translateY), i < 0 && (i = 0), { x: e, y: i } } }, { key: "moveMarkers", value: function (t, e) { var i = this.w, a = this.ttCtx; if (i.globals.markers.size[t] > 0) for (var s = i.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(t, "'] .apexcharts-marker")), r = 0; r < s.length; r++)parseInt(s[r].getAttribute("rel"), 10) === e && (a.marker.resetPointsSize(), a.marker.enlargeCurrentPoint(e, s[r])); else a.marker.resetPointsSize(), this.moveDynamicPointOnHover(e, t) } }, { key: "moveDynamicPointOnHover", value: function (t, e) { var i, a, s = this.w, r = this.ttCtx, n = s.globals.pointsArray, o = r.tooltipUtil.getHoverMarkerSize(e), l = s.config.series[e].type; if (!l || "column" !== l && "candlestick" !== l) { i = n[e][t][0], a = n[e][t][1] ? n[e][t][1] : 0; var h = s.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(e, "'] .apexcharts-series-markers circle")); h && a < s.globals.gridHeight && a > 0 && (h.setAttribute("r", o), h.setAttribute("cx", i), h.setAttribute("cy", a)), this.moveXCrosshairs(i), r.fixedTooltip || this.moveTooltip(i, a, o) } } }, { key: "moveDynamicPointsOnHover", value: function (t) { var e, i = this.ttCtx, a = i.w, s = 0, r = 0, n = a.globals.pointsArray; e = new X(this.ctx).getActiveConfigSeriesIndex(!0); var o = i.tooltipUtil.getHoverMarkerSize(e); n[e] && (s = n[e][t][0], r = n[e][t][1]); var l = i.tooltipUtil.getAllMarkers(); if (null !== l) for (var h = 0; h < a.globals.series.length; h++) { var c = n[h]; if (a.globals.comboCharts && void 0 === c && l.splice(h, 0, null), c && c.length) { var d = n[h][t][1]; l[h].setAttribute("cx", s), null !== d && !isNaN(d) && d < a.globals.gridHeight && d > 0 ? (l[h] && l[h].setAttribute("r", o), l[h] && l[h].setAttribute("cy", d)) : l[h] && l[h].setAttribute("r", 0) } } if (this.moveXCrosshairs(s), !i.fixedTooltip) { var g = r || a.globals.gridHeight; this.moveTooltip(s, g, o) } } }, { key: "moveStickyTooltipOverBars", value: function (t) { var e, i = this.w, a = this.ttCtx, s = i.globals.columnSeries ? i.globals.columnSeries.length : i.globals.series.length, r = s >= 2 && s % 2 == 0 ? Math.floor(s / 2) : Math.floor(s / 2) + 1, n = i.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(r, "'] path[j='").concat(t, "'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(r, "'] path[j='").concat(t, "'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(r, "'] path[j='").concat(t, "']")), o = n ? parseFloat(n.getAttribute("cx")) : 0, l = n ? parseFloat(n.getAttribute("barWidth")) : 0; i.globals.isXNumeric ? o -= s % 2 != 0 ? l / 2 : 0 : (o = a.xAxisTicksPositions[t - 1] + a.dataPointsDividedWidth / 2, isNaN(o) && (o = a.xAxisTicksPositions[t] - a.dataPointsDividedWidth / 2)); var h = a.getElGrid().getBoundingClientRect(); if (e = a.e.clientY - h.top - a.tooltipRect.ttHeight / 2, this.moveXCrosshairs(o), !a.fixedTooltip) { var c = e || i.globals.gridHeight; this.moveTooltip(o, c) } } }]), t }(), xt = function () { function t(i) { e(this, t), this.w = i.w, this.ttCtx = i, this.ctx = i.ctx, this.tooltipPosition = new pt(i) } return a(t, [{ key: "drawDynamicPoints", value: function () { var t = this.w, e = new b(this.ctx), i = new z(this.ctx), a = t.globals.dom.baseEl.querySelectorAll(".apexcharts-series"); a = g(a), t.config.chart.stacked && a.sort((function (t, e) { return parseFloat(t.getAttribute("data:realIndex")) - parseFloat(e.getAttribute("data:realIndex")) })); for (var s = 0; s < a.length; s++) { var r = a[s].querySelector(".apexcharts-series-markers-wrap"); if (null !== r) { var n = void 0, o = "apexcharts-marker w".concat((Math.random() + 1).toString(36).substring(4)); "line" !== t.config.chart.type && "area" !== t.config.chart.type || t.globals.comboCharts || t.config.tooltip.intersect || (o += " no-pointer-events"); var l = i.getMarkerConfig(o, s); (n = e.drawMarker(0, 0, l)).node.setAttribute("default-marker-size", 0); var h = document.createElementNS(t.globals.SVGNS, "g"); h.classList.add("apexcharts-series-markers"), h.appendChild(n.node), r.appendChild(h) } } } }, { key: "enlargeCurrentPoint", value: function (t, e) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null, a = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : null, s = this.w; "bubble" !== s.config.chart.type && this.newPointSize(t, e); var r = e.getAttribute("cx"), n = e.getAttribute("cy"); if (null !== i && null !== a && (r = i, n = a), this.tooltipPosition.moveXCrosshairs(r), !this.fixedTooltip) { if ("radar" === s.config.chart.type) { var o = this.ttCtx.getElGrid(), l = o.getBoundingClientRect(); r = this.ttCtx.e.clientX - l.left } this.tooltipPosition.moveTooltip(r, n, s.config.markers.hover.size) } } }, { key: "enlargePoints", value: function (t) { for (var e = this.w, i = this.ttCtx, a = t, s = e.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"), r = e.config.markers.hover.size, n = 0; n < s.length; n++) { var o = s[n].getAttribute("rel"), l = s[n].getAttribute("index"); if (void 0 === r && (r = e.globals.markers.size[l] + e.config.markers.hover.sizeOffset), a === parseInt(o, 10)) { this.newPointSize(a, s[n]); var h = s[n].getAttribute("cx"), c = s[n].getAttribute("cy"); this.tooltipPosition.moveXCrosshairs(h), i.fixedTooltip || this.tooltipPosition.moveTooltip(h, c, r) } else this.oldPointSize(s[n]) } } }, { key: "newPointSize", value: function (t, e) { var i = this.w, a = i.config.markers.hover.size, s = 0 === t ? e.parentNode.firstChild : e.parentNode.lastChild; if ("0" !== s.getAttribute("default-marker-size")) { var r = parseInt(s.getAttribute("index"), 10); void 0 === a && (a = i.globals.markers.size[r] + i.config.markers.hover.sizeOffset), s.setAttribute("r", a) } } }, { key: "oldPointSize", value: function (t) { var e = parseFloat(t.getAttribute("default-marker-size")); t.setAttribute("r", e) } }, { key: "resetPointsSize", value: function () { for (var t = this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"), e = 0; e < t.length; e++) { var i = parseFloat(t[e].getAttribute("default-marker-size")); f.isNumber(i) ? t[e].setAttribute("r", i) : t[e].setAttribute("r", 0) } } }]), t }(), bt = function () { function t(i) { e(this, t), this.w = i.w, this.ttCtx = i } return a(t, [{ key: "getAttr", value: function (t, e) { return parseFloat(t.target.getAttribute(e)) } }, { key: "handleHeatTooltip", value: function (t) { var e = t.e, i = t.opt, a = t.x, s = t.y, r = this.ttCtx, n = this.w; if (e.target.classList.contains("apexcharts-heatmap-rect")) { var o = this.getAttr(e, "i"), l = this.getAttr(e, "j"), h = this.getAttr(e, "cx"), c = this.getAttr(e, "cy"), d = this.getAttr(e, "width"), g = this.getAttr(e, "height"); if (r.tooltipLabels.drawSeriesTexts({ ttItems: i.ttItems, i: o, j: l, shared: !1 }), n.globals.capturedSeriesIndex = o, n.globals.capturedDataPointIndex = l, a = h + r.tooltipRect.ttWidth / 2 + d, s = c + r.tooltipRect.ttHeight / 2 - g / 2, r.tooltipPosition.moveXCrosshairs(h + d / 2), a > n.globals.gridWidth / 2 && (a = h - r.tooltipRect.ttWidth / 2 + d), r.w.config.tooltip.followCursor) { var u = r.getElGrid().getBoundingClientRect(); s = r.e.clientY - u.top + n.globals.translateY / 2 - 10 } } return { x: a, y: s } } }, { key: "handleMarkerTooltip", value: function (t) { var e, i, a = t.e, s = t.opt, r = t.x, n = t.y, o = this.w, l = this.ttCtx; if (a.target.classList.contains("apexcharts-marker")) { var h = parseInt(s.paths.getAttribute("cx"), 10), c = parseInt(s.paths.getAttribute("cy"), 10), d = parseFloat(s.paths.getAttribute("val")); if (i = parseInt(s.paths.getAttribute("rel"), 10), e = parseInt(s.paths.parentNode.parentNode.parentNode.getAttribute("rel"), 10) - 1, l.intersect) { var g = f.findAncestor(s.paths, "apexcharts-series"); g && (e = parseInt(g.getAttribute("data:realIndex"), 10)) } if (l.tooltipLabels.drawSeriesTexts({ ttItems: s.ttItems, i: e, j: i, shared: !l.showOnIntersect && o.config.tooltip.shared }), "mouseup" === a.type && l.markerClick(a, e, i), o.globals.capturedSeriesIndex = e, o.globals.capturedDataPointIndex = i, r = h, n = c + o.globals.translateY - 1.4 * l.tooltipRect.ttHeight, l.w.config.tooltip.followCursor) { var u = l.getElGrid().getBoundingClientRect(); n = l.e.clientY + o.globals.translateY - u.top } d < 0 && (n = c), l.marker.enlargeCurrentPoint(i, s.paths, r, n) } return { x: r, y: n } } }, { key: "handleBarTooltip", value: function (t) { var e, i, a = t.e, s = t.opt, r = this.w, n = this.ttCtx, o = n.getElTooltip(), l = 0, h = 0, c = 0, d = this.getBarTooltipXY({ e: a, opt: s }); e = d.i; var g = d.barHeight, u = d.j; if (r.globals.capturedSeriesIndex = e, r.globals.capturedDataPointIndex = u, r.globals.isBarHorizontal && n.tooltipUtil.hasBars() || !r.config.tooltip.shared ? (h = d.x, c = d.y, i = Array.isArray(r.config.stroke.width) ? r.config.stroke.width[e] : r.config.stroke.width, l = h) : r.globals.comboCharts || r.config.tooltip.shared || (l /= 2), isNaN(c) ? c = r.globals.svgHeight - n.tooltipRect.ttHeight : c < 0 && (c = 0), h + n.tooltipRect.ttWidth > r.globals.gridWidth ? h -= n.tooltipRect.ttWidth : h < 0 && (h = 0), n.w.config.tooltip.followCursor) { var f = n.getElGrid().getBoundingClientRect(); c = n.e.clientY - f.top } if (null === n.tooltip && (n.tooltip = r.globals.dom.baseEl.querySelector(".apexcharts-tooltip")), r.config.tooltip.shared || (r.globals.comboBarCount > 0 ? n.tooltipPosition.moveXCrosshairs(l + i / 2) : n.tooltipPosition.moveXCrosshairs(l)), !n.fixedTooltip && (!r.config.tooltip.shared || r.globals.isBarHorizontal && n.tooltipUtil.hasBars())) { var p = r.globals.isMultipleYAxis ? r.config.yaxis[x] && r.config.yaxis[x].reversed : r.config.yaxis[0].reversed; p && (h -= n.tooltipRect.ttWidth) < 0 && (h = 0), o.style.left = h + r.globals.translateX + "px"; var x = parseInt(s.paths.parentNode.getAttribute("data:realIndex"), 10); !p || r.globals.isBarHorizontal && n.tooltipUtil.hasBars() || (c = c + g - 2 * (r.globals.series[e][u] < 0 ? g : 0)), n.tooltipRect.ttHeight + c > r.globals.gridHeight ? (c = r.globals.gridHeight - n.tooltipRect.ttHeight + r.globals.translateY, o.style.top = c + "px") : o.style.top = c + r.globals.translateY - n.tooltipRect.ttHeight / 2 + "px" } } }, { key: "getBarTooltipXY", value: function (t) { var e = t.e, i = t.opt, a = this.w, s = null, r = this.ttCtx, n = 0, o = 0, l = 0, h = 0, c = 0, d = e.target.classList; if (d.contains("apexcharts-bar-area") || d.contains("apexcharts-candlestick-area") || d.contains("apexcharts-rangebar-area")) { var g = e.target, u = g.getBoundingClientRect(), f = i.elGrid.getBoundingClientRect(), p = u.height; c = u.height; var x = u.width, b = parseInt(g.getAttribute("cx"), 10), m = parseInt(g.getAttribute("cy"), 10); h = parseFloat(g.getAttribute("barWidth")); var v = "touchmove" === e.type ? e.touches[0].clientX : e.clientX; s = parseInt(g.getAttribute("j"), 10), n = parseInt(g.parentNode.getAttribute("rel"), 10) - 1; var y = g.getAttribute("data-range-y1"), w = g.getAttribute("data-range-y2"); a.globals.comboCharts && (n = parseInt(g.parentNode.getAttribute("data:realIndex"), 10)), r.tooltipLabels.drawSeriesTexts({ ttItems: i.ttItems, i: n, j: s, y1: y ? parseInt(y, 10) : null, y2: w ? parseInt(w, 10) : null, shared: !r.showOnIntersect && a.config.tooltip.shared }), a.config.tooltip.followCursor ? a.globals.isBarHorizontal ? (o = v - f.left + 15, l = m - r.dataPointsDividedHeight + p / 2 - r.tooltipRect.ttHeight / 2) : (o = a.globals.isXNumeric ? b - x / 2 : b - r.dataPointsDividedWidth + x / 2, l = e.clientY - f.top - r.tooltipRect.ttHeight / 2 - 15) : a.globals.isBarHorizontal ? ((o = b) < r.xyRatios.baseLineInvertedY && (o = b - r.tooltipRect.ttWidth), l = m - r.dataPointsDividedHeight + p / 2 - r.tooltipRect.ttHeight / 2) : (o = a.globals.isXNumeric ? b - x / 2 : b - r.dataPointsDividedWidth + x / 2, l = m) } return { x: o, y: l, barHeight: c, barWidth: h, i: n, j: s } } }]), t }(), mt = function () { function t(i) { e(this, t), this.w = i.w, this.ttCtx = i } return a(t, [{ key: "drawXaxisTooltip", value: function () { var t = this.w, e = this.ttCtx, i = "bottom" === t.config.xaxis.position; e.xaxisOffY = i ? t.globals.gridHeight + 1 : -t.globals.xAxisHeight - t.config.xaxis.axisTicks.height + 3; var a = i ? "apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom" : "apexcharts-xaxistooltip apexcharts-xaxistooltip-top", s = t.globals.dom.elWrap; e.blxaxisTooltip && (null === t.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip") && (e.xaxisTooltip = document.createElement("div"), e.xaxisTooltip.setAttribute("class", a + " apexcharts-theme-" + t.config.tooltip.theme), s.appendChild(e.xaxisTooltip), e.xaxisTooltipText = document.createElement("div"), e.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"), e.xaxisTooltipText.style.fontFamily = t.config.xaxis.tooltip.style.fontFamily || t.config.chart.fontFamily, e.xaxisTooltipText.style.fontSize = t.config.xaxis.tooltip.style.fontSize, e.xaxisTooltip.appendChild(e.xaxisTooltipText))) } }, { key: "drawYaxisTooltip", value: function () { for (var t = this.w, e = this.ttCtx, i = function (i) { var a = t.config.yaxis[i].opposite || t.config.yaxis[i].crosshairs.opposite; e.yaxisOffX = a ? t.globals.gridWidth + 1 : 1; var s = "apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(i, a ? " apexcharts-yaxistooltip-right" : " apexcharts-yaxistooltip-left"); t.globals.yAxisSameScaleIndices.map((function (e, a) { e.map((function (e, a) { a === i && (s += t.config.yaxis[a].show ? " " : " apexcharts-yaxistooltip-hidden") })) })); var r = t.globals.dom.elWrap; null === t.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(i)) && (e.yaxisTooltip = document.createElement("div"), e.yaxisTooltip.setAttribute("class", s + " apexcharts-theme-" + t.config.tooltip.theme), r.appendChild(e.yaxisTooltip), 0 === i && (e.yaxisTooltipText = []), e.yaxisTooltipText[i] = document.createElement("div"), e.yaxisTooltipText[i].classList.add("apexcharts-yaxistooltip-text"), e.yaxisTooltip.appendChild(e.yaxisTooltipText[i])) }, a = 0; a < t.config.yaxis.length; a++)i(a) } }, { key: "setXCrosshairWidth", value: function () { var t = this.w, e = this.ttCtx, i = e.getElXCrosshairs(); if (e.xcrosshairsWidth = parseInt(t.config.xaxis.crosshairs.width, 10), t.globals.comboCharts) { var a = t.globals.dom.baseEl.querySelector(".apexcharts-bar-area"); if (null !== a && "barWidth" === t.config.xaxis.crosshairs.width) { var s = parseFloat(a.getAttribute("barWidth")); e.xcrosshairsWidth = s } else if ("tickWidth" === t.config.xaxis.crosshairs.width) { var r = t.globals.labels.length; e.xcrosshairsWidth = t.globals.gridWidth / r } } else if ("tickWidth" === t.config.xaxis.crosshairs.width) { var n = t.globals.labels.length; e.xcrosshairsWidth = t.globals.gridWidth / n } else if ("barWidth" === t.config.xaxis.crosshairs.width) { var o = t.globals.dom.baseEl.querySelector(".apexcharts-bar-area"); if (null !== o) { var l = parseFloat(o.getAttribute("barWidth")); e.xcrosshairsWidth = l } else e.xcrosshairsWidth = 1 } t.globals.isBarHorizontal && (e.xcrosshairsWidth = 0), null !== i && e.xcrosshairsWidth > 0 && i.setAttribute("width", e.xcrosshairsWidth) } }, { key: "handleYCrosshair", value: function () { var t = this.w, e = this.ttCtx; e.ycrosshairs = t.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"), e.ycrosshairsHidden = t.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden") } }, { key: "drawYaxisTooltipText", value: function (t, e, i) { var a = this.ttCtx, s = this.w, r = s.globals.yLabelFormatters[t]; if (a.yaxisTooltips[t]) { var n = a.getElGrid().getBoundingClientRect(), o = (e - n.top) * i.yRatio[t], l = s.globals.maxYArr[t] - s.globals.minYArr[t], h = s.globals.minYArr[t] + (l - o); a.tooltipPosition.moveYCrosshairs(e - n.top), a.yaxisTooltipText[t].innerHTML = r(h), a.tooltipPosition.moveYAxisTooltip(t) } } }]), t }(), vt = function () { function t(i) { e(this, t), this.ctx = i, this.w = i.w; var a = this.w; this.tConfig = a.config.tooltip, this.tooltipUtil = new ut(this), this.tooltipLabels = new ft(this), this.tooltipPosition = new pt(this), this.marker = new xt(this), this.intersect = new bt(this), this.axesTooltip = new mt(this), this.showOnIntersect = this.tConfig.intersect, this.showTooltipTitle = this.tConfig.x.show, this.fixedTooltip = this.tConfig.fixed.enabled, this.xaxisTooltip = null, this.yaxisTTEls = null, this.isBarShared = !a.globals.isBarHorizontal && this.tConfig.shared } return a(t, [{ key: "getElTooltip", value: function (t) { return t || (t = this), t.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip") } }, { key: "getElXCrosshairs", value: function () { return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs") } }, { key: "getElGrid", value: function () { return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid") } }, { key: "drawTooltip", value: function (t) { var e = this.w; this.xyRatios = t, this.blxaxisTooltip = e.config.xaxis.tooltip.enabled && e.globals.axisCharts, this.yaxisTooltips = e.config.yaxis.map((function (t, i) { return !!(t.show && t.tooltip.enabled && e.globals.axisCharts) })), this.allTooltipSeriesGroups = [], e.globals.axisCharts || (this.showTooltipTitle = !1); var i = document.createElement("div"); if (i.classList.add("apexcharts-tooltip"), i.classList.add("apexcharts-theme-".concat(this.tConfig.theme)), e.globals.dom.elWrap.appendChild(i), e.globals.axisCharts) { this.axesTooltip.drawXaxisTooltip(), this.axesTooltip.drawYaxisTooltip(), this.axesTooltip.setXCrosshairWidth(), this.axesTooltip.handleYCrosshair(); var a = new j(this.ctx); this.xAxisTicksPositions = a.getXAxisTicksPositions() } if (!e.globals.comboCharts && !this.tConfig.intersect && "bar" !== e.config.chart.type && "rangeBar" !== e.config.chart.type || this.tConfig.shared || (this.showOnIntersect = !0), 0 !== e.config.markers.size && 0 !== e.globals.markers.largestSize || this.marker.drawDynamicPoints(this), e.globals.collapsedSeries.length !== e.globals.series.length) { this.dataPointsDividedHeight = e.globals.gridHeight / e.globals.dataPoints, this.dataPointsDividedWidth = e.globals.gridWidth / e.globals.dataPoints, this.showTooltipTitle && (this.tooltipTitle = document.createElement("div"), this.tooltipTitle.classList.add("apexcharts-tooltip-title"), this.tooltipTitle.style.fontFamily = this.tConfig.style.fontFamily || e.config.chart.fontFamily, this.tooltipTitle.style.fontSize = this.tConfig.style.fontSize, i.appendChild(this.tooltipTitle)); var s = e.globals.series.length; (e.globals.xyCharts || e.globals.comboCharts) && this.tConfig.shared && (s = this.showOnIntersect ? 1 : e.globals.series.length), this.legendLabels = e.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"), this.ttItems = this.createTTElements(s), this.addSVGEvents() } } }, { key: "createTTElements", value: function (t) { for (var e = this.w, i = [], a = this.getElTooltip(), s = 0; s < t; s++) { var r = document.createElement("div"); r.classList.add("apexcharts-tooltip-series-group"), this.tConfig.shared && this.tConfig.enabledOnSeries && Array.isArray(this.tConfig.enabledOnSeries) && this.tConfig.enabledOnSeries.indexOf(s) < 0 && r.classList.add("apexcharts-tooltip-series-group-hidden"); var n = document.createElement("span"); n.classList.add("apexcharts-tooltip-marker"), n.style.backgroundColor = e.globals.colors[s], r.appendChild(n); var o = document.createElement("div"); o.classList.add("apexcharts-tooltip-text"), o.style.fontFamily = this.tConfig.style.fontFamily || e.config.chart.fontFamily, o.style.fontSize = this.tConfig.style.fontSize; var l = document.createElement("div"); l.classList.add("apexcharts-tooltip-y-group"); var h = document.createElement("span"); h.classList.add("apexcharts-tooltip-text-label"), l.appendChild(h); var c = document.createElement("span"); c.classList.add("apexcharts-tooltip-text-value"), l.appendChild(c); var d = document.createElement("div"); d.classList.add("apexcharts-tooltip-z-group"); var g = document.createElement("span"); g.classList.add("apexcharts-tooltip-text-z-label"), d.appendChild(g); var u = document.createElement("span"); u.classList.add("apexcharts-tooltip-text-z-value"), d.appendChild(u), o.appendChild(l), o.appendChild(d), r.appendChild(o), a.appendChild(r), i.push(r) } return i } }, { key: "addSVGEvents", value: function () { var t = this.w, e = t.config.chart.type, i = this.getElTooltip(), a = !("bar" !== e && "candlestick" !== e && "rangeBar" !== e), s = "area" === e || "line" === e || "scatter" === e || "bubble" === e || "radar" === e, r = t.globals.dom.Paper.node, n = this.getElGrid(); n && (this.seriesBound = n.getBoundingClientRect()); var o, l = [], h = [], c = { hoverArea: r, elGrid: n, tooltipEl: i, tooltipY: l, tooltipX: h, ttItems: this.ttItems }; if (t.globals.axisCharts && (s ? o = t.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker") : a ? o = t.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-rangebar-area") : "heatmap" === e && (o = t.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap")), o && o.length)) for (var d = 0; d < o.length; d++)l.push(o[d].getAttribute("cy")), h.push(o[d].getAttribute("cx")); if (t.globals.xyCharts && !this.showOnIntersect || t.globals.comboCharts && !this.showOnIntersect || a && this.tooltipUtil.hasBars() && this.tConfig.shared) this.addPathsEventListeners([r], c); else if (a && !t.globals.comboCharts || s && this.showOnIntersect) this.addDatapointEventsListeners(c); else if (!t.globals.axisCharts || "heatmap" === e) { var g = t.globals.dom.baseEl.querySelectorAll(".apexcharts-series"); this.addPathsEventListeners(g, c) } if (this.showOnIntersect) { var u = t.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker"); u.length > 0 && this.addPathsEventListeners(u, c), this.tooltipUtil.hasBars() && !this.tConfig.shared && this.addDatapointEventsListeners(c) } } }, { key: "drawFixedTooltipRect", value: function () { var t = this.w, e = this.getElTooltip(), i = e.getBoundingClientRect(), a = i.width + 10, s = i.height + 10, r = this.tConfig.fixed.offsetX, n = this.tConfig.fixed.offsetY, o = this.tConfig.fixed.position.toLowerCase(); return o.indexOf("right") > -1 && (r = r + t.globals.svgWidth - a + 10), o.indexOf("bottom") > -1 && (n = n + t.globals.svgHeight - s - 10), e.style.left = r + "px", e.style.top = n + "px", { x: r, y: n, ttWidth: a, ttHeight: s } } }, { key: "addDatapointEventsListeners", value: function (t) { var e = this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-rangebar-area"); this.addPathsEventListeners(e, t) } }, { key: "addPathsEventListeners", value: function (t, e) { for (var i = this, a = function (a) { var s = { paths: t[a], tooltipEl: e.tooltipEl, tooltipY: e.tooltipY, tooltipX: e.tooltipX, elGrid: e.elGrid, hoverArea: e.hoverArea, ttItems: e.ttItems };["mousemove", "mouseup", "touchmove", "mouseout", "touchend"].map((function (e) { return t[a].addEventListener(e, i.seriesHover.bind(i, s), { capture: !1, passive: !0 }) })) }, s = 0; s < t.length; s++)a(s) } }, { key: "seriesHover", value: function (t, e) { var i = this, a = [], s = this.w; s.config.chart.group && (a = this.ctx.getGroupedCharts()), s.globals.axisCharts && (s.globals.minX === -1 / 0 && s.globals.maxX === 1 / 0 || 0 === s.globals.dataPoints) || (a.length ? a.forEach((function (a) { var s = i.getElTooltip(a), r = { paths: t.paths, tooltipEl: s, tooltipY: t.tooltipY, tooltipX: t.tooltipX, elGrid: t.elGrid, hoverArea: t.hoverArea, ttItems: a.w.globals.tooltip.ttItems }; a.w.globals.minX === i.w.globals.minX && a.w.globals.maxX === i.w.globals.maxX && a.w.globals.tooltip.seriesHoverByContext({ chartCtx: a, ttCtx: a.w.globals.tooltip, opt: r, e: e }) })) : this.seriesHoverByContext({ chartCtx: this.ctx, ttCtx: this.w.globals.tooltip, opt: t, e: e })) } }, { key: "seriesHoverByContext", value: function (t) { var e = t.chartCtx, i = t.ttCtx, a = t.opt, s = t.e, r = e.w, n = this.getElTooltip(); (i.tooltipRect = { x: 0, y: 0, ttWidth: n.getBoundingClientRect().width, ttHeight: n.getBoundingClientRect().height }, i.e = s, !i.tooltipUtil.hasBars() || r.globals.comboCharts || i.isBarShared) || this.tConfig.onDatasetHover.highlightDataSeries && new X(e).toggleSeriesOnHover(s, s.target.parentNode); i.fixedTooltip && i.drawFixedTooltipRect(), r.globals.axisCharts ? i.axisChartsTooltips({ e: s, opt: a, tooltipRect: i.tooltipRect }) : i.nonAxisChartsTooltips({ e: s, opt: a, tooltipRect: i.tooltipRect }) } }, { key: "axisChartsTooltips", value: function (t) { var e, i, a = t.e, s = t.opt, r = this.w, n = s.elGrid.getBoundingClientRect(), o = "touchmove" === a.type ? a.touches[0].clientX : a.clientX, l = "touchmove" === a.type ? a.touches[0].clientY : a.clientY; if (this.clientY = l, this.clientX = o, r.globals.capturedSeriesIndex = -1, r.globals.capturedDataPointIndex = -1, l < n.top || l > n.top + n.height) this.handleMouseOut(s); else { if (Array.isArray(this.tConfig.enabledOnSeries) && !r.config.tooltip.shared) { var h = parseInt(s.paths.getAttribute("index"), 10); if (this.tConfig.enabledOnSeries.indexOf(h) < 0) return void this.handleMouseOut(s) } var c = this.getElTooltip(), d = this.getElXCrosshairs(), g = r.globals.xyCharts || "bar" === r.config.chart.type && !r.globals.isBarHorizontal && this.tooltipUtil.hasBars() && this.tConfig.shared || r.globals.comboCharts && this.tooltipUtil.hasBars(); if (r.globals.isBarHorizontal && this.tooltipUtil.hasBars() && (g = !1), "mousemove" === a.type || "touchmove" === a.type || "mouseup" === a.type) { null !== d && d.classList.add("apexcharts-active"); var u = this.yaxisTooltips.filter((function (t) { return !0 === t })); if (null !== this.ycrosshairs && u.length && this.ycrosshairs.classList.add("apexcharts-active"), g && !this.showOnIntersect) this.handleStickyTooltip(a, o, l, s); else if ("heatmap" === r.config.chart.type) { var f = this.intersect.handleHeatTooltip({ e: a, opt: s, x: e, y: i }); e = f.x, i = f.y, c.style.left = e + "px", c.style.top = i + "px" } else this.tooltipUtil.hasBars() && this.intersect.handleBarTooltip({ e: a, opt: s }), this.tooltipUtil.hasMarkers() && this.intersect.handleMarkerTooltip({ e: a, opt: s, x: e, y: i }); if (this.yaxisTooltips.length) for (var p = 0; p < r.config.yaxis.length; p++)this.axesTooltip.drawYaxisTooltipText(p, l, this.xyRatios); s.tooltipEl.classList.add("apexcharts-active") } else "mouseout" !== a.type && "touchend" !== a.type || this.handleMouseOut(s) } } }, { key: "nonAxisChartsTooltips", value: function (t) { var e = t.e, i = t.opt, a = t.tooltipRect, s = this.w, r = i.paths.getAttribute("rel"), n = this.getElTooltip(), o = s.globals.dom.elWrap.getBoundingClientRect(); if ("mousemove" === e.type || "touchmove" === e.type) { n.classList.add("apexcharts-active"), this.tooltipLabels.drawSeriesTexts({ ttItems: i.ttItems, i: parseInt(r, 10) - 1, shared: !1 }); var l = s.globals.clientX - o.left - a.ttWidth / 2, h = s.globals.clientY - o.top - a.ttHeight - 10; n.style.left = l + "px", n.style.top = h + "px" } else "mouseout" !== e.type && "touchend" !== e.type || n.classList.remove("apexcharts-active") } }, { key: "handleStickyTooltip", value: function (t, e, i, a) { var s = this.w, r = this.tooltipUtil.getNearestValues({ context: this, hoverArea: a.hoverArea, elGrid: a.elGrid, clientX: e, clientY: i }), n = r.j, o = r.capturedSeries; r.hoverX < 0 || r.hoverX > s.globals.gridWidth ? this.handleMouseOut(a) : null !== o ? this.handleStickyCapturedSeries(t, o, a, n) : this.tooltipUtil.isXoverlap(n) && this.create(t, this, 0, n, a.ttItems) } }, { key: "handleStickyCapturedSeries", value: function (t, e, i, a) { var s = this.w; null === s.globals.series[e][a] ? this.handleMouseOut(i) : void 0 !== s.globals.series[e][a] ? this.tConfig.shared && this.tooltipUtil.isXoverlap(a) && this.tooltipUtil.isInitialSeriesSameLen() ? this.create(t, this, e, a, i.ttItems) : this.create(t, this, e, a, i.ttItems, !1) : this.tooltipUtil.isXoverlap(a) && this.create(t, this, 0, a, i.ttItems) } }, { key: "deactivateHoverFilter", value: function () { for (var t = this.w, e = new b(this.ctx), i = t.globals.dom.Paper.select(".apexcharts-bar-area"), a = 0; a < i.length; a++)e.pathMouseLeave(i[a]) } }, { key: "handleMouseOut", value: function (t) { var e = this.w, i = this.getElXCrosshairs(); if (t.tooltipEl.classList.remove("apexcharts-active"), this.deactivateHoverFilter(), "bubble" !== e.config.chart.type && this.marker.resetPointsSize(), null !== i && i.classList.remove("apexcharts-active"), null !== this.ycrosshairs && this.ycrosshairs.classList.remove("apexcharts-active"), this.blxaxisTooltip && this.xaxisTooltip.classList.remove("apexcharts-active"), this.yaxisTooltips.length) { null === this.yaxisTTEls && (this.yaxisTTEls = e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip")); for (var a = 0; a < this.yaxisTTEls.length; a++)this.yaxisTTEls[a].classList.remove("apexcharts-active") } e.config.legend.tooltipHoverFormatter && this.legendLabels.forEach((function (t) { var e = t.getAttribute("data:default-text"); t.innerHTML = decodeURIComponent(e) })) } }, { key: "markerClick", value: function (t, e, i) { var a = this.w; "function" == typeof a.config.chart.events.markerClick && a.config.chart.events.markerClick(t, this.ctx, { seriesIndex: e, dataPointIndex: i, w: a }), this.ctx.events.fireEvent("markerClick", [t, this.ctx, { seriesIndex: e, dataPointIndex: i, w: a }]) } }, { key: "create", value: function (t, e, i, a, s) { var r = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : null, n = this.w, o = e; "mouseup" === t.type && this.markerClick(t, i, a), null === r && (r = this.tConfig.shared); var l = this.tooltipUtil.hasMarkers(), h = this.tooltipUtil.getElBars(); if (n.config.legend.tooltipHoverFormatter) { var c = n.config.legend.tooltipHoverFormatter, d = Array.from(this.legendLabels); d.forEach((function (t) { var e = t.getAttribute("data:default-text"); t.innerHTML = decodeURIComponent(e) })); for (var g = 0; g < d.length; g++) { var u = d[g], f = parseInt(u.getAttribute("i"), 10), p = decodeURIComponent(u.getAttribute("data:default-text")), x = c(p, { seriesIndex: r ? f : i, dataPointIndex: a, w: n }); if (r) u.innerHTML = n.globals.collapsedSeriesIndices.indexOf(f) < 0 ? x : p; else if (u.innerHTML = f === i ? x : p, i === f) break } } if (r) { if (o.tooltipLabels.drawSeriesTexts({ ttItems: s, i: i, j: a, shared: !this.showOnIntersect && this.tConfig.shared }), l && (n.globals.markers.largestSize > 0 ? o.marker.enlargePoints(a) : o.tooltipPosition.moveDynamicPointsOnHover(a)), this.tooltipUtil.hasBars() && (this.barSeriesHeight = this.tooltipUtil.getBarsHeight(h), this.barSeriesHeight > 0)) { var m = new b(this.ctx), v = n.globals.dom.Paper.select(".apexcharts-bar-area[j='".concat(a, "']")); this.deactivateHoverFilter(), this.tooltipPosition.moveStickyTooltipOverBars(a); for (var y = 0; y < v.length; y++)m.pathMouseEnter(v[y]) } } else o.tooltipLabels.drawSeriesTexts({ shared: !1, ttItems: s, i: i, j: a }), this.tooltipUtil.hasBars() && o.tooltipPosition.moveStickyTooltipOverBars(a), l && o.tooltipPosition.moveMarkers(i, a) } }]), t }(), yt = function (t) { o(s, t); var i = d(s); function s() { return e(this, s), i.apply(this, arguments) } return a(s, [{ key: "draw", value: function (t, e) { var i = this, a = this.w; this.graphics = new b(this.ctx), this.bar = new F(this.ctx, this.xyRatios); var s = new y(this.ctx, a); t = s.getLogSeries(t), this.yRatio = s.getLogYRatios(this.yRatio), this.barHelpers.initVariables(t), "100%" === a.config.chart.stackType && (t = a.globals.seriesPercent.slice()), this.series = t, this.totalItems = 0, this.prevY = [], this.prevX = [], this.prevYF = [], this.prevXF = [], this.prevYVal = [], this.prevXVal = [], this.xArrj = [], this.xArrjF = [], this.xArrjVal = [], this.yArrj = [], this.yArrjF = [], this.yArrjVal = []; for (var r = 0; r < t.length; r++)t[r].length > 0 && (this.totalItems += t[r].length); for (var o = this.graphics.group({ class: "apexcharts-bar-series apexcharts-plot-series" }), l = 0, h = 0, c = function (s, r) { var c = void 0, d = void 0, g = void 0, u = void 0, p = [], x = [], b = a.globals.comboCharts ? e[s] : s; i.yRatio.length > 1 && (i.yaxisIndex = b), i.isReversed = a.config.yaxis[i.yaxisIndex] && a.config.yaxis[i.yaxisIndex].reversed; var m = i.graphics.group({ class: "apexcharts-series", seriesName: f.escapeString(a.globals.seriesNames[b]), rel: s + 1, "data:realIndex": b }); i.ctx.series.addCollapsedClassToSeries(m, b); var v = i.graphics.group({ class: "apexcharts-datalabels", "data:realIndex": b }), y = 0, w = 0, k = i.initialPositions(l, h, c, d, g, u); h = k.y, y = k.barHeight, d = k.yDivision, u = k.zeroW, l = k.x, w = k.barWidth, c = k.xDivision, g = k.zeroH, i.yArrj = [], i.yArrjF = [], i.yArrjVal = [], i.xArrj = [], i.xArrjF = [], i.xArrjVal = [], 1 === i.prevY.length && i.prevY[0].every((function (t) { return isNaN(t) })) && (i.prevY[0] = i.prevY[0].map((function (t) { return g })), i.prevYF[0] = i.prevYF[0].map((function (t) { return 0 }))); for (var A = 0; A < a.globals.dataPoints; A++) { var S = i.barHelpers.getStrokeWidth(s, A, b), C = { indexes: { i: s, j: A, realIndex: b, bc: r }, strokeWidth: S, x: l, y: h, elSeries: m }, L = null; i.isHorizontal ? (L = i.drawStackedBarPaths(n(n({}, C), {}, { zeroW: u, barHeight: y, yDivision: d })), w = i.series[s][A] / i.invertedYRatio) : (L = i.drawStackedColumnPaths(n(n({}, C), {}, { xDivision: c, barWidth: w, zeroH: g })), y = i.series[s][A] / i.yRatio[i.yaxisIndex]), h = L.y, l = L.x, p.push(l), x.push(h); var P = i.barHelpers.getPathFillColor(t, s, A, b); m = i.renderSeries({ realIndex: b, pathFill: P, j: A, i: s, pathFrom: L.pathFrom, pathTo: L.pathTo, strokeWidth: S, elSeries: m, x: l, y: h, series: t, barHeight: y, barWidth: w, elDataLabelsWrap: v, type: "bar", visibleSeries: 0 }) } a.globals.seriesXvalues[b] = p, a.globals.seriesYvalues[b] = x, i.prevY.push(i.yArrj), i.prevYF.push(i.yArrjF), i.prevYVal.push(i.yArrjVal), i.prevX.push(i.xArrj), i.prevXF.push(i.xArrjF), i.prevXVal.push(i.xArrjVal), o.add(m) }, d = 0, g = 0; d < t.length; d++ , g++)c(d, g); return o } }, { key: "initialPositions", value: function (t, e, i, a, s, r) { var n, o, l = this.w; return this.isHorizontal ? (n = (n = a = l.globals.gridHeight / l.globals.dataPoints) * parseInt(l.config.plotOptions.bar.barHeight, 10) / 100, r = this.baseLineInvertedY + l.globals.padHorizontal + (this.isReversed ? l.globals.gridWidth : 0) - (this.isReversed ? 2 * this.baseLineInvertedY : 0), e = (a - n) / 2) : (o = i = l.globals.gridWidth / l.globals.dataPoints, o = l.globals.isXNumeric && l.globals.dataPoints > 1 ? (i = l.globals.minXDiff / this.xRatio) * parseInt(this.barOptions.columnWidth, 10) / 100 : o * parseInt(l.config.plotOptions.bar.columnWidth, 10) / 100, s = this.baseLineY[this.yaxisIndex] + (this.isReversed ? l.globals.gridHeight : 0) - (this.isReversed ? 2 * this.baseLineY[this.yaxisIndex] : 0), t = l.globals.padHorizontal + (i - o) / 2), { x: t, y: e, yDivision: a, xDivision: i, barHeight: n, barWidth: o, zeroH: s, zeroW: r } } }, { key: "drawStackedBarPaths", value: function (t) { for (var e, i = t.indexes, a = t.barHeight, s = t.strokeWidth, r = t.zeroW, n = t.x, o = t.y, l = t.yDivision, h = t.elSeries, c = this.w, d = o, g = i.i, u = i.j, f = 0, p = 0; p < this.prevXF.length; p++)f += this.prevXF[p][u]; if (g > 0) { var x = r; this.prevXVal[g - 1][u] < 0 ? x = this.series[g][u] >= 0 ? this.prevX[g - 1][u] + f - 2 * (this.isReversed ? f : 0) : this.prevX[g - 1][u] : this.prevXVal[g - 1][u] >= 0 && (x = this.series[g][u] >= 0 ? this.prevX[g - 1][u] : this.prevX[g - 1][u] - f + 2 * (this.isReversed ? f : 0)), e = x } else e = r; n = null === this.series[g][u] ? e : e + this.series[g][u] / this.invertedYRatio - 2 * (this.isReversed ? this.series[g][u] / this.invertedYRatio : 0), this.xArrj.push(n), this.xArrjF.push(Math.abs(e - n)), this.xArrjVal.push(this.series[g][u]); var b = this.barHelpers.getBarpaths({ barYPosition: d, barHeight: a, x1: e, x2: n, strokeWidth: s, series: this.series, realIndex: i.realIndex, i: g, j: u, w: c }); return this.barHelpers.barBackground({ j: u, i: g, y1: d, y2: a, elSeries: h }), o += l, { pathTo: b.pathTo, pathFrom: b.pathFrom, x: n, y: o } } }, { key: "drawStackedColumnPaths", value: function (t) { var e = t.indexes, i = t.x, a = t.y, s = t.xDivision, r = t.barWidth, n = t.zeroH, o = (t.strokeWidth, t.elSeries), l = this.w, h = e.i, c = e.j, d = e.bc; if (l.globals.isXNumeric) { var g = l.globals.seriesX[h][c]; g || (g = 0), i = (g - l.globals.minX) / this.xRatio - r / 2 } for (var u, f = i, p = 0, x = 0; x < this.prevYF.length; x++)p += isNaN(this.prevYF[x][c]) ? 0 : this.prevYF[x][c]; if (h > 0 && !l.globals.isXNumeric || h > 0 && l.globals.isXNumeric && l.globals.seriesX[h - 1][c] === l.globals.seriesX[h][c]) { var b, m, v = Math.min(this.yRatio.length + 1, h + 1); if (void 0 !== this.prevY[h - 1]) for (var y = 1; y < v; y++)if (!isNaN(this.prevY[h - y][c])) { m = this.prevY[h - y][c]; break } for (var w = 1; w < v; w++) { if (this.prevYVal[h - w][c] < 0) { b = this.series[h][c] >= 0 ? m - p + 2 * (this.isReversed ? p : 0) : m; break } if (this.prevYVal[h - w][c] >= 0) { b = this.series[h][c] >= 0 ? m : m + p - 2 * (this.isReversed ? p : 0); break } } void 0 === b && (b = l.globals.gridHeight), u = this.prevYF[0].every((function (t) { return 0 === t })) && this.prevYF.slice(1, h).every((function (t) { return t.every((function (t) { return isNaN(t) })) })) ? l.globals.gridHeight - n : b } else u = l.globals.gridHeight - n; a = u - this.series[h][c] / this.yRatio[this.yaxisIndex] + 2 * (this.isReversed ? this.series[h][c] / this.yRatio[this.yaxisIndex] : 0), this.yArrj.push(a), this.yArrjF.push(Math.abs(u - a)), this.yArrjVal.push(this.series[h][c]); var k = this.barHelpers.getColumnPaths({ barXPosition: f, barWidth: r, y1: u, y2: a, yRatio: this.yRatio[this.yaxisIndex], strokeWidth: this.strokeWidth, series: this.series, realIndex: e.realIndex, i: h, j: c, w: l }); return this.barHelpers.barBackground({ bc: d, j: c, i: h, x1: f, x2: r, elSeries: o }), i += s, { pathTo: k.pathTo, pathFrom: k.pathFrom, x: l.globals.isXNumeric ? i - s : i, y: a } } }]), s }(F), wt = function (t) { o(s, t); var i = d(s); function s() { return e(this, s), i.apply(this, arguments) } return a(s, [{ key: "draw", value: function (t, e) { var i = this.w, a = new b(this.ctx), s = new T(this.ctx); this.candlestickOptions = this.w.config.plotOptions.candlestick; var r = new y(this.ctx, i); t = r.getLogSeries(t), this.series = t, this.yRatio = r.getLogYRatios(this.yRatio), this.barHelpers.initVariables(t); for (var n = a.group({ class: "apexcharts-candlestick-series apexcharts-plot-series" }), o = 0; o < t.length; o++) { var l, h, c = void 0, d = void 0, g = [], u = [], p = i.globals.comboCharts ? e[o] : o, x = a.group({ class: "apexcharts-series", seriesName: f.escapeString(i.globals.seriesNames[p]), rel: o + 1, "data:realIndex": p }); t[o].length > 0 && (this.visibleI = this.visibleI + 1); var m, v; this.yRatio.length > 1 && (this.yaxisIndex = p); var w = this.barHelpers.initialPositions(); d = w.y, m = w.barHeight, c = w.x, v = w.barWidth, l = w.xDivision, h = w.zeroH, u.push(c + v / 2); for (var k = a.group({ class: "apexcharts-datalabels", "data:realIndex": p }), A = 0; A < i.globals.dataPoints; A++) { var S, C = this.barHelpers.getStrokeWidth(o, A, p), L = this.drawCandleStickPaths({ indexes: { i: o, j: A, realIndex: p }, x: c, y: d, xDivision: l, barWidth: v, zeroH: h, strokeWidth: C, elSeries: x }); d = L.y, c = L.x, S = L.color, A > 0 && u.push(c + v / 2), g.push(d); var P = s.fillPath({ seriesNumber: p, dataPointIndex: A, color: S, value: t[o][A] }), z = this.candlestickOptions.wick.useFillColor ? S : void 0; this.renderSeries({ realIndex: p, pathFill: P, lineFill: z, j: A, i: o, pathFrom: L.pathFrom, pathTo: L.pathTo, strokeWidth: C, elSeries: x, x: c, y: d, series: t, barHeight: m, barWidth: v, elDataLabelsWrap: k, visibleSeries: this.visibleI, type: "candlestick" }) } i.globals.seriesXvalues[p] = u, i.globals.seriesYvalues[p] = g, n.add(x) } return n } }, { key: "drawCandleStickPaths", value: function (t) { var e = t.indexes, i = t.x, a = (t.y, t.xDivision), s = t.barWidth, r = t.zeroH, n = t.strokeWidth, o = this.w, l = new b(this.ctx), h = e.i, c = e.j, d = !0, g = o.config.plotOptions.candlestick.colors.upward, u = o.config.plotOptions.candlestick.colors.downward, f = this.yRatio[this.yaxisIndex], p = e.realIndex, x = this.getOHLCValue(p, c), m = r, v = r; x.o > x.c && (d = !1); var y = Math.min(x.o, x.c), w = Math.max(x.o, x.c); o.globals.isXNumeric && (i = (o.globals.seriesX[p][c] - o.globals.minX) / this.xRatio - s / 2); var k = i + s * this.visibleI; void 0 === this.series[h][c] || null === this.series[h][c] ? y = r : (y = r - y / f, w = r - w / f, m = r - x.h / f, v = r - x.l / f); var A = l.move(k, r), S = l.move(k, y); return o.globals.previousPaths.length > 0 && (S = this.getPreviousPath(p, c, !0)), A = l.move(k, w) + l.line(k + s / 2, w) + l.line(k + s / 2, m) + l.line(k + s / 2, w) + l.line(k + s, w) + l.line(k + s, y) + l.line(k + s / 2, y) + l.line(k + s / 2, v) + l.line(k + s / 2, y) + l.line(k, y) + l.line(k, w - n / 2), S += l.move(k, y), o.globals.isXNumeric || (i += a), { pathTo: A, pathFrom: S, x: i, y: w, barXPosition: k, color: d ? g : u } } }, { key: "getOHLCValue", value: function (t, e) { var i = this.w; return { o: i.globals.seriesCandleO[t][e], h: i.globals.seriesCandleH[t][e], l: i.globals.seriesCandleL[t][e], c: i.globals.seriesCandleC[t][e] } } }]), s }(F), kt = function () { function t(i, a) { e(this, t), this.ctx = i, this.w = i.w, this.xRatio = a.xRatio, this.yRatio = a.yRatio, this.negRange = !1, this.dynamicAnim = this.w.config.chart.animations.dynamicAnimation, this.rectRadius = this.w.config.plotOptions.heatmap.radius, this.strokeWidth = this.w.config.stroke.show ? this.w.config.stroke.width : 0 } return a(t, [{ key: "draw", value: function (t) { var e = this.w, i = new b(this.ctx), a = i.group({ class: "apexcharts-heatmap" }); a.attr("clip-path", "url(#gridRectMask".concat(e.globals.cuid, ")")); var s = e.globals.gridWidth / e.globals.dataPoints, r = e.globals.gridHeight / e.globals.series.length, n = 0, o = !1; this.checkColorRange(); var l = t.slice(); e.config.yaxis[0].reversed && (o = !0, l.reverse()); for (var h = o ? 0 : l.length - 1; o ? h < l.length : h >= 0; o ? h++ : h--) { var c = i.group({ class: "apexcharts-series apexcharts-heatmap-series", seriesName: f.escapeString(e.globals.seriesNames[h]), rel: h + 1, "data:realIndex": h }); if (this.ctx.series.addCollapsedClassToSeries(c, h), e.config.chart.dropShadow.enabled) { var d = e.config.chart.dropShadow; new p(this.ctx).dropShadow(c, d, h) } for (var g = 0, u = 0; u < l[h].length; u++) { var x = 1, m = e.config.plotOptions.heatmap.shadeIntensity, v = this.determineHeatColor(h, u); x = e.globals.hasNegs || this.negRange ? e.config.plotOptions.heatmap.reverseNegativeShade ? v.percent < 0 ? v.percent / 100 * (1.25 * m) : (1 - v.percent / 100) * (1.25 * m) : v.percent <= 0 ? 1 - (1 + v.percent / 100) * m : (1 - v.percent / 100) * m : 1 - v.percent / 100; var y = v.color, w = new f; if (e.config.plotOptions.heatmap.enableShades && (x < 0 && (x = 0), y = "dark" === this.w.config.theme.mode ? f.hexToRgba(w.shadeColor(-1 * x, v.color), e.config.fill.opacity) : f.hexToRgba(w.shadeColor(x, v.color), e.config.fill.opacity)), "image" === e.config.fill.type) y = new T(this.ctx).fillPath({ seriesNumber: h, dataPointIndex: u, opacity: e.globals.hasNegs ? v.percent < 0 ? 1 - (1 + v.percent / 100) : m + v.percent / 100 : v.percent / 100, patternID: f.randomId(), width: e.config.fill.image.width ? e.config.fill.image.width : s, height: e.config.fill.image.height ? e.config.fill.image.height : r }); var k = this.rectRadius, A = i.drawRect(g, n, s, r, k); if (A.attr({ cx: g, cy: n }), A.node.classList.add("apexcharts-heatmap-rect"), c.add(A), A.attr({ fill: y, i: h, index: h, j: u, val: l[h][u], "stroke-width": this.strokeWidth, stroke: e.config.plotOptions.heatmap.useFillColorAsStroke ? y : e.globals.stroke.colors[0], color: y }), A.node.addEventListener("mouseenter", i.pathMouseEnter.bind(this, A)), A.node.addEventListener("mouseleave", i.pathMouseLeave.bind(this, A)), A.node.addEventListener("mousedown", i.pathMouseDown.bind(this, A)), e.config.chart.animations.enabled && !e.globals.dataChanged) { var S = 1; e.globals.resized || (S = e.config.chart.animations.speed), this.animateHeatMap(A, g, n, s, r, S) } if (e.globals.dataChanged) { var C = 1; if (this.dynamicAnim.enabled && e.globals.shouldAnimate) { C = this.dynamicAnim.speed; var L = e.globals.previousPaths[h] && e.globals.previousPaths[h][u] && e.globals.previousPaths[h][u].color; L || (L = "rgba(255, 255, 255, 0)"), this.animateHeatColor(A, f.isColorHex(L) ? L : f.rgb2hex(L), f.isColorHex(y) ? y : f.rgb2hex(y), C) } } var P = this.calculateHeatmapDataLabels({ x: g, y: n, i: h, j: u, heatColorProps: v, series: l, rectHeight: r, rectWidth: s }); null !== P && c.add(P), g += s } n += r, a.add(c) } var z = e.globals.yAxisScale[0].result.slice(); e.config.yaxis[0].reversed ? z.unshift("") : z.push(""), e.globals.yAxisScale[0].result = z; var I = e.globals.gridHeight / e.globals.series.length; return e.config.yaxis[0].labels.offsetY = -I / 2, a } }, { key: "checkColorRange", value: function () { var t = this, e = this.w.config.plotOptions.heatmap; e.colorScale.ranges.length > 0 && e.colorScale.ranges.map((function (e, i) { e.from <= 0 && (t.negRange = !0) })) } }, { key: "determineHeatColor", value: function (t, e) { var i = this.w, a = i.globals.series[t][e], s = i.config.plotOptions.heatmap, r = s.colorScale.inverse ? e : t, n = i.globals.colors[r], o = null, l = Math.min.apply(Math, g(i.globals.series[t])), h = Math.max.apply(Math, g(i.globals.series[t])); s.distributed || (l = i.globals.minY, h = i.globals.maxY), void 0 !== s.colorScale.min && (l = s.colorScale.min < i.globals.minY ? s.colorScale.min : i.globals.minY, h = s.colorScale.max > i.globals.maxY ? s.colorScale.max : i.globals.maxY); var c = Math.abs(h) + Math.abs(l), d = 100 * a / (0 === c ? c - 1e-6 : c); s.colorScale.ranges.length > 0 && s.colorScale.ranges.map((function (t, e) { if (a >= t.from && a <= t.to) { n = t.color, o = t.foreColor ? t.foreColor : null, l = t.from, h = t.to; var i = Math.abs(h) + Math.abs(l); d = 100 * a / (0 === i ? i - 1e-6 : i) } })); return { color: n, foreColor: o, percent: d } } }, { key: "calculateHeatmapDataLabels", value: function (t) { var e = t.x, i = t.y, a = t.i, s = t.j, r = t.heatColorProps, n = (t.series, t.rectHeight), o = t.rectWidth, l = this.w, h = l.config.dataLabels, c = new b(this.ctx), d = new M(this.ctx), g = h.formatter, u = null; if (h.enabled) { u = c.group({ class: "apexcharts-data-labels" }); var f = h.offsetX, p = h.offsetY, x = e + o / 2 + f, m = i + n / 2 + parseFloat(h.style.fontSize) / 3 + p, v = g(l.globals.series[a][s], { seriesIndex: a, dataPointIndex: s, w: l }); d.plotDataLabelsText({ x: x, y: m, text: v, i: a, j: s, color: r.foreColor, parent: u, dataLabelsConfig: h }) } return u } }, { key: "animateHeatMap", value: function (t, e, i, a, s, r) { var n = new x(this.ctx); n.animateRect(t, { x: e + a / 2, y: i + s / 2, width: 0, height: 0 }, { x: e, y: i, width: a, height: s }, r, (function () { n.animationCompleted(t) })) } }, { key: "animateHeatColor", value: function (t, e, i, a) { t.attr({ fill: e }).animate(a).attr({ fill: i }) } }]), t }(), At = function () { function t(i) { e(this, t), this.ctx = i, this.w = i.w } return a(t, [{ key: "drawYAxisTexts", value: function (t, e, i, a) { var s = this.w, r = s.config.yaxis[0], n = s.globals.yLabelFormatters[0]; return new b(this.ctx).drawText({ x: t + r.labels.offsetX, y: e + r.labels.offsetY, text: n(a, i), textAnchor: "middle", fontSize: r.labels.style.fontSize, fontFamily: r.labels.style.fontFamily, foreColor: Array.isArray(r.labels.style.colors) ? r.labels.style.colors[i] : r.labels.style.colors }) } }]), t }(), St = function () { function t(i) { e(this, t), this.ctx = i, this.w = i.w; var a = this.w; this.chartType = this.w.config.chart.type, this.initialAnim = this.w.config.chart.animations.enabled, this.dynamicAnim = this.initialAnim && this.w.config.chart.animations.dynamicAnimation.enabled, this.animBeginArr = [0], this.animDur = 0, this.donutDataLabels = this.w.config.plotOptions.pie.donut.labels, this.lineColorArr = void 0 !== a.globals.stroke.colors ? a.globals.stroke.colors : a.globals.colors, this.defaultSize = a.globals.svgHeight < a.globals.svgWidth ? a.globals.gridHeight : a.globals.gridWidth, this.centerY = this.defaultSize / 2, this.centerX = a.globals.gridWidth / 2, this.fullAngle = 360, a.globals.radialSize = this.defaultSize / 2.05 - a.config.stroke.width - (a.config.chart.sparkline.enabled ? 0 : a.config.chart.dropShadow.blur), this.donutSize = a.globals.radialSize * parseInt(a.config.plotOptions.pie.donut.size, 10) / 100, this.maxY = 0, this.sliceLabels = [], this.sliceSizes = [], this.prevSectorAngleArr = [] } return a(t, [{ key: "draw", value: function (t) { var e = this, i = this.w, a = new b(this.ctx); if (this.ret = a.group({ class: "apexcharts-pie" }), i.globals.noData) return this.ret; for (var s = 0, r = 0; r < t.length; r++)s += f.negToZero(t[r]); var n = [], o = a.group(); 0 === s && (s = 1e-5), t.forEach((function (t) { e.maxY = Math.max(e.maxY, t) })), "polarArea" === this.chartType && this.drawPolarElements(); for (var l = 0; l < t.length; l++) { var h = this.fullAngle * f.negToZero(t[l]) / s; n.push(h), "polarArea" === this.chartType ? (n[l] = this.fullAngle / t.length, this.sliceSizes.push(i.globals.radialSize * t[l] / this.maxY)) : this.sliceSizes.push(i.globals.radialSize) } if (i.globals.dataChanged) { for (var c, d = 0, g = 0; g < i.globals.previousPaths.length; g++)d += f.negToZero(i.globals.previousPaths[g]); for (var u = 0; u < i.globals.previousPaths.length; u++)c = this.fullAngle * f.negToZero(i.globals.previousPaths[u]) / d, this.prevSectorAngleArr.push(c) } this.donutSize < 0 && (this.donutSize = 0); var p = i.config.plotOptions.pie.customScale, x = i.globals.gridWidth / 2, m = i.globals.gridHeight / 2, v = x - i.globals.gridWidth / 2 * p, y = m - i.globals.gridHeight / 2 * p; if ("donut" === this.chartType) { var w = a.drawCircle(this.donutSize); w.attr({ cx: this.centerX, cy: this.centerY, fill: i.config.plotOptions.pie.donut.background ? i.config.plotOptions.pie.donut.background : "transparent" }), o.add(w) } var k = this.drawArcs(n, t); if (this.sliceLabels.forEach((function (t) { k.add(t) })), o.attr({ transform: "translate(".concat(v, ", ").concat(y, ") scale(").concat(p, ")") }), o.add(k), this.ret.add(o), this.donutDataLabels.show) { var A = this.renderInnerDataLabels(this.donutDataLabels, { hollowSize: this.donutSize, centerX: this.centerX, centerY: this.centerY, opacity: this.donutDataLabels.show, translateX: v, translateY: y }); this.ret.add(A) } return this.ret } }, { key: "drawArcs", value: function (t, e) { var i = this.w, a = new p(this.ctx), s = new b(this.ctx), r = new T(this.ctx), n = s.group({ class: "apexcharts-slices" }), o = i.config.plotOptions.pie.startAngle % this.fullAngle, l = o, h = o, c = o, d = o; this.strokeWidth = i.config.stroke.show ? i.config.stroke.width : 0; for (var g = 0; g < t.length; g++) { var u = s.group({ class: "apexcharts-series apexcharts-pie-series", seriesName: f.escapeString(i.globals.seriesNames[g]), rel: g + 1, "data:realIndex": g }); n.add(u), h = d, c = (l = c) + t[g], d = h + this.prevSectorAngleArr[g]; var x = c < l ? this.fullAngle + c - l : c - l, m = r.fillPath({ seriesNumber: g, size: this.sliceSizes[g], value: e[g] }), v = this.getChangedPath(h, d), y = s.drawPath({ d: v, stroke: Array.isArray(this.lineColorArr) ? this.lineColorArr[g] : this.lineColorArr, strokeWidth: 0, fill: m, fillOpacity: i.config.fill.opacity, classes: "apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(), "-slice-").concat(g) }); if (y.attr({ index: 0, j: g }), i.config.chart.dropShadow.enabled) { var w = i.config.chart.dropShadow; a.dropShadow(y, w, g) } this.addListeners(y, this.donutDataLabels), b.setAttrs(y.node, { "data:angle": x, "data:startAngle": l, "data:strokeWidth": this.strokeWidth, "data:value": e[g] }); var k = { x: 0, y: 0 }; "pie" === this.chartType || "polarArea" === this.chartType ? k = f.polarToCartesian(this.centerX, this.centerY, i.globals.radialSize / 1.25 + i.config.plotOptions.pie.dataLabels.offset, (l + x / 2) % this.fullAngle) : "donut" === this.chartType && (k = f.polarToCartesian(this.centerX, this.centerY, (i.globals.radialSize + this.donutSize) / 2 + i.config.plotOptions.pie.dataLabels.offset, (l + x / 2) % this.fullAngle)), u.add(y); var A = 0; if (!this.initialAnim || i.globals.resized || i.globals.dataChanged ? this.animBeginArr.push(0) : (0 === (A = x / this.fullAngle * i.config.chart.animations.speed) && (A = 1), this.animDur = A + this.animDur, this.animBeginArr.push(this.animDur)), this.dynamicAnim && i.globals.dataChanged ? this.animatePaths(y, { size: this.sliceSizes[g], endAngle: c, startAngle: l, prevStartAngle: h, prevEndAngle: d, animateStartingPos: !0, i: g, animBeginArr: this.animBeginArr, shouldSetPrevPaths: !0, dur: i.config.chart.animations.dynamicAnimation.speed }) : this.animatePaths(y, { size: this.sliceSizes[g], endAngle: c, startAngle: l, i: g, totalItems: t.length - 1, animBeginArr: this.animBeginArr, dur: A }), i.config.plotOptions.pie.expandOnClick && "polarArea" !== this.chartType && y.click(this.pieClicked.bind(this, g)), i.config.dataLabels.enabled) { var S = k.x, C = k.y, L = 100 * x / this.fullAngle + "%"; if (0 !== x && i.config.plotOptions.pie.dataLabels.minAngleToShowLabel < t[g]) { var P = i.config.dataLabels.formatter; void 0 !== P && (L = P(i.globals.seriesPercent[g][0], { seriesIndex: g, w: i })); var z = i.globals.dataLabels.style.colors[g], I = s.group({ class: "apexcharts-datalabels" }), M = s.drawText({ x: S, y: C, text: L, textAnchor: "middle", fontSize: i.config.dataLabels.style.fontSize, fontFamily: i.config.dataLabels.style.fontFamily, fontWeight: i.config.dataLabels.style.fontWeight, foreColor: z }); if (I.add(M), i.config.dataLabels.dropShadow.enabled) { var E = i.config.dataLabels.dropShadow; a.dropShadow(M, E) } M.node.classList.add("apexcharts-pie-label"), i.config.chart.animations.animate && !1 === i.globals.resized && (M.node.classList.add("apexcharts-pie-label-delay"), M.node.style.animationDelay = i.config.chart.animations.speed / 940 + "s"), this.sliceLabels.push(I) } } } return n } }, { key: "addListeners", value: function (t, e) { var i = new b(this.ctx); t.node.addEventListener("mouseenter", i.pathMouseEnter.bind(this, t)), t.node.addEventListener("mouseleave", i.pathMouseLeave.bind(this, t)), t.node.addEventListener("mouseleave", this.revertDataLabelsInner.bind(this, t.node, e)), t.node.addEventListener("mousedown", i.pathMouseDown.bind(this, t)), this.donutDataLabels.total.showAlways || (t.node.addEventListener("mouseenter", this.printDataLabelsInner.bind(this, t.node, e)), t.node.addEventListener("mousedown", this.printDataLabelsInner.bind(this, t.node, e))) } }, { key: "animatePaths", value: function (t, e) { var i = this.w, a = e.endAngle < e.startAngle ? this.fullAngle + e.endAngle - e.startAngle : e.endAngle - e.startAngle, s = a, r = e.startAngle, n = e.startAngle; void 0 !== e.prevStartAngle && void 0 !== e.prevEndAngle && (r = e.prevEndAngle, s = e.prevEndAngle < e.prevStartAngle ? this.fullAngle + e.prevEndAngle - e.prevStartAngle : e.prevEndAngle - e.prevStartAngle), e.i === i.config.series.length - 1 && (a + n > this.fullAngle ? e.endAngle = e.endAngle - (a + n) : a + n < this.fullAngle && (e.endAngle = e.endAngle + (this.fullAngle - (a + n)))), a === this.fullAngle && (a = this.fullAngle - .01), this.animateArc(t, r, n, a, s, e) } }, { key: "animateArc", value: function (t, e, i, a, s, r) { var n, o = this, l = this.w, h = new x(this.ctx), c = r.size; (isNaN(e) || isNaN(s)) && (e = i, s = a, r.dur = 0); var d = a, g = i, u = e < i ? this.fullAngle + e - i : e - i; l.globals.dataChanged && r.shouldSetPrevPaths && r.prevEndAngle && (n = o.getPiePath({ me: o, startAngle: r.prevStartAngle, angle: r.prevEndAngle < r.prevStartAngle ? this.fullAngle + r.prevEndAngle - r.prevStartAngle : r.prevEndAngle - r.prevStartAngle, size: c }), t.attr({ d: n })), 0 !== r.dur ? t.animate(r.dur, l.globals.easing, r.animBeginArr[r.i]).afterAll((function () { "pie" !== o.chartType && "donut" !== o.chartType && "polarArea" !== o.chartType || this.animate(l.config.chart.animations.dynamicAnimation.speed).attr({ "stroke-width": o.strokeWidth }), r.i === l.config.series.length - 1 && h.animationCompleted(t) })).during((function (l) { d = u + (a - u) * l, r.animateStartingPos && (d = s + (a - s) * l, g = e - s + (i - (e - s)) * l), n = o.getPiePath({ me: o, startAngle: g, angle: d, size: c }), t.node.setAttribute("data:pathOrig", n), t.attr({ d: n }) })) : (n = o.getPiePath({ me: o, startAngle: g, angle: a, size: c }), r.isTrack || (l.globals.animationEnded = !0), t.node.setAttribute("data:pathOrig", n), t.attr({ d: n, "stroke-width": o.strokeWidth })) } }, { key: "pieClicked", value: function (t) { var e, i = this.w, a = this.sliceSizes[t] + (i.config.plotOptions.pie.expandOnClick ? 4 : 0), s = i.globals.dom.Paper.select(".apexcharts-".concat(this.chartType.toLowerCase(), "-slice-").concat(t)).members[0]; if ("true" !== s.attr("data:pieClicked")) { var r = i.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area"); Array.prototype.forEach.call(r, (function (t) { t.setAttribute("data:pieClicked", "false"); var e = t.getAttribute("data:pathOrig"); t.setAttribute("d", e) })), s.attr("data:pieClicked", "true"); var n = parseInt(s.attr("data:startAngle"), 10), o = parseInt(s.attr("data:angle"), 10); e = this.getPiePath({ me: this, startAngle: n, angle: o, size: a }), 360 !== o && s.plot(e) } else { s.attr({ "data:pieClicked": "false" }), this.revertDataLabelsInner(s.node, this.donutDataLabels); var l = s.attr("data:pathOrig"); s.attr({ d: l }) } } }, { key: "getChangedPath", value: function (t, e) { var i = ""; return this.dynamicAnim && this.w.globals.dataChanged && (i = this.getPiePath({ me: this, startAngle: t, angle: e - t, size: this.size })), i } }, { key: "getPiePath", value: function (t) { var e = t.me, i = t.startAngle, a = t.angle, s = t.size, r = i, n = Math.PI * (r - 90) / 180, o = a + i; Math.ceil(o) >= this.fullAngle + this.w.config.plotOptions.pie.startAngle % this.fullAngle && (o = this.fullAngle + this.w.config.plotOptions.pie.startAngle % this.fullAngle - .01), Math.ceil(o) > this.fullAngle && (o -= this.fullAngle); var l = Math.PI * (o - 90) / 180, h = e.centerX + s * Math.cos(n), c = e.centerY + s * Math.sin(n), d = e.centerX + s * Math.cos(l), g = e.centerY + s * Math.sin(l), u = f.polarToCartesian(e.centerX, e.centerY, e.donutSize, o), p = f.polarToCartesian(e.centerX, e.centerY, e.donutSize, r), x = a > 180 ? 1 : 0, b = ["M", h, c, "A", s, s, 0, x, 1, d, g]; return "donut" === e.chartType ? [].concat(b, ["L", u.x, u.y, "A", e.donutSize, e.donutSize, 0, x, 0, p.x, p.y, "L", h, c, "z"]).join(" ") : "pie" === e.chartType || "polarArea" === e.chartType ? [].concat(b, ["L", e.centerX, e.centerY, "L", h, c]).join(" ") : [].concat(b).join(" ") } }, { key: "drawPolarElements", value: function () { var t = this.w, e = new q(this.ctx), i = new b(this.ctx), a = new At(this.ctx), s = i.group(), r = i.group(), n = void 0 === t.config.yaxis[0].max && void 0 === t.config.yaxis[0].min, o = e.niceScale(0, Math.ceil(this.maxY), t.config.yaxis[0].tickAmount, 0, n), l = o.result.reverse(), h = o.result.length; this.maxY = o.niceMax; for (var c = t.globals.radialSize, d = c / (h - 1), g = 0; g < h - 1; g++) { var u = i.drawCircle(c); if (u.attr({ cx: this.centerX, cy: this.centerY, fill: "none", "stroke-width": t.config.plotOptions.polarArea.rings.strokeWidth, stroke: t.config.plotOptions.polarArea.rings.strokeColor }), t.config.yaxis[0].show) { var f = a.drawYAxisTexts(this.centerX, this.centerY - c + parseInt(t.config.yaxis[0].labels.style.fontSize, 10) / 2, g, l[g]); r.add(f) } s.add(u), c -= d } this.ret.add(s), this.ret.add(r) } }, { key: "renderInnerDataLabels", value: function (t, e) { var i = this.w, a = new b(this.ctx), s = a.group({ class: "apexcharts-datalabels-group", transform: "translate(".concat(e.translateX ? e.translateX : 0, ", ").concat(e.translateY ? e.translateY : 0, ") scale(").concat(i.config.plotOptions.pie.customScale, ")") }), r = t.total.show; s.node.style.opacity = e.opacity; var n, o, l = e.centerX, h = e.centerY; n = void 0 === t.name.color ? i.globals.colors[0] : t.name.color; var c = t.name.fontSize, d = t.name.fontFamily, g = t.value.fontWeight; o = void 0 === t.value.color ? i.config.chart.foreColor : t.value.color; var u = t.value.formatter, f = "", p = ""; if (r ? (n = t.total.color, c = t.total.fontSize, d = t.total.fontFamily, g = t.total.fontWeight, p = t.total.label, f = t.total.formatter(i)) : 1 === i.globals.series.length && (f = u(i.globals.series[0], i), p = i.globals.seriesNames[0]), p && (p = t.name.formatter(p, t.total.show, i)), t.name.show) { var x = a.drawText({ x: l, y: h + parseFloat(t.name.offsetY), text: p, textAnchor: "middle", foreColor: n, fontSize: c, fontWeight: g, fontFamily: d }); x.node.classList.add("apexcharts-datalabel-label"), s.add(x) } if (t.value.show) { var m = t.name.show ? parseFloat(t.value.offsetY) + 16 : t.value.offsetY, v = a.drawText({ x: l, y: h + m, text: f, textAnchor: "middle", foreColor: o, fontWeight: t.value.fontWeight, fontSize: t.value.fontSize, fontFamily: t.value.fontFamily }); v.node.classList.add("apexcharts-datalabel-value"), s.add(v) } return s } }, { key: "printInnerLabels", value: function (t, e, i, a) { var s, r = this.w; a ? s = void 0 === t.name.color ? r.globals.colors[parseInt(a.parentNode.getAttribute("rel"), 10) - 1] : t.name.color : r.globals.series.length > 1 && t.total.show && (s = t.total.color); var n = r.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"), o = r.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value"); i = (0, t.value.formatter)(i, r), a || "function" != typeof t.total.formatter || (i = t.total.formatter(r)); var l = e === t.total.label; e = t.name.formatter(e, l, r), null !== n && (n.textContent = e), null !== o && (o.textContent = i), null !== n && (n.style.fill = s) } }, { key: "printDataLabelsInner", value: function (t, e) { var i = this.w, a = t.getAttribute("data:value"), s = i.globals.seriesNames[parseInt(t.parentNode.getAttribute("rel"), 10) - 1]; i.globals.series.length > 1 && this.printInnerLabels(e, s, a, t); var r = i.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group"); null !== r && (r.style.opacity = 1) } }, { key: "revertDataLabelsInner", value: function (t, e, i) { var a = this, s = this.w, r = s.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group"), n = !1, o = s.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area"), l = function (t) { var i = t.makeSliceOut, s = t.printLabel; Array.prototype.forEach.call(o, (function (t) { "true" === t.getAttribute("data:pieClicked") && (i && (n = !0), s && a.printDataLabelsInner(t, e)) })) }; if (l({ makeSliceOut: !0, printLabel: !1 }), e.total.show && s.globals.series.length > 1) n && !e.total.showAlways ? l({ makeSliceOut: !1, printLabel: !0 }) : this.printInnerLabels(e, e.total.label, e.total.formatter(s)); else if (l({ makeSliceOut: !1, printLabel: !0 }), !n) if (s.globals.selectedDataPoints.length && s.globals.series.length > 1) if (s.globals.selectedDataPoints[0].length > 0) { var h = s.globals.selectedDataPoints[0], c = s.globals.dom.baseEl.querySelector(".apexcharts-".concat(this.chartType.toLowerCase(), "-slice-").concat(h)); this.printDataLabelsInner(c, e) } else r && s.globals.selectedDataPoints.length && 0 === s.globals.selectedDataPoints[0].length && (r.style.opacity = 0); else r && s.globals.series.length > 1 && (r.style.opacity = 0) } }]), t }(), Ct = function () { function t(i) { e(this, t), this.ctx = i, this.w = i.w, this.chartType = this.w.config.chart.type, this.initialAnim = this.w.config.chart.animations.enabled, this.dynamicAnim = this.initialAnim && this.w.config.chart.animations.dynamicAnimation.enabled, this.animDur = 0; var a = this.w; this.graphics = new b(this.ctx), this.lineColorArr = void 0 !== a.globals.stroke.colors ? a.globals.stroke.colors : a.globals.colors, this.defaultSize = a.globals.svgHeight < a.globals.svgWidth ? a.globals.gridHeight + 1.5 * a.globals.goldenPadding : a.globals.gridWidth, this.maxValue = this.w.globals.maxY, this.minValue = this.w.globals.minY, this.polygons = a.config.plotOptions.radar.polygons, this.strokeWidth = a.config.stroke.show ? a.config.stroke.width : 0, this.size = this.defaultSize / 2.1 - this.strokeWidth - a.config.chart.dropShadow.blur, a.config.xaxis.labels.show && (this.size = this.size - a.globals.xAxisLabelsWidth / 1.75), void 0 !== a.config.plotOptions.radar.size && (this.size = a.config.plotOptions.radar.size), this.dataRadiusOfPercent = [], this.dataRadius = [], this.angleArr = [], this.yaxisLabelsTextsPos = [] } return a(t, [{ key: "draw", value: function (t) { var e = this, i = this.w, a = new T(this.ctx), s = [], r = new M(this.ctx); t.length && (this.dataPointsLen = t[i.globals.maxValsInArrayIndex].length), this.disAngle = 2 * Math.PI / this.dataPointsLen; var o = i.globals.gridWidth / 2, l = i.globals.gridHeight / 2, h = o + i.config.plotOptions.radar.offsetX, c = l + i.config.plotOptions.radar.offsetY, d = this.graphics.group({ class: "apexcharts-radar-series apexcharts-plot-series", transform: "translate(".concat(h || 0, ", ").concat(c || 0, ")") }), g = [], u = null, x = null; if (this.yaxisLabels = this.graphics.group({ class: "apexcharts-yaxis" }), t.forEach((function (t, o) { var l = t.length === i.globals.dataPoints, h = e.graphics.group().attr({ class: "apexcharts-series", "data:longestSeries": l, seriesName: f.escapeString(i.globals.seriesNames[o]), rel: o + 1, "data:realIndex": o }); e.dataRadiusOfPercent[o] = [], e.dataRadius[o] = [], e.angleArr[o] = [], t.forEach((function (t, i) { var a = Math.abs(e.maxValue - e.minValue); t += Math.abs(e.minValue), e.dataRadiusOfPercent[o][i] = t / a, e.dataRadius[o][i] = e.dataRadiusOfPercent[o][i] * e.size, e.angleArr[o][i] = i * e.disAngle })), g = e.getDataPointsPos(e.dataRadius[o], e.angleArr[o]); var c = e.createPaths(g, { x: 0, y: 0 }); u = e.graphics.group({ class: "apexcharts-series-markers-wrap apexcharts-element-hidden" }), x = e.graphics.group({ class: "apexcharts-datalabels", "data:realIndex": o }), i.globals.delayedElements.push({ el: u.node, index: o }); var d = { i: o, realIndex: o, animationDelay: o, initialSpeed: i.config.chart.animations.speed, dataChangeSpeed: i.config.chart.animations.dynamicAnimation.speed, className: "apexcharts-radar", shouldClipToGrid: !1, bindEventsOnPaths: !1, stroke: i.globals.stroke.colors[o], strokeLineCap: i.config.stroke.lineCap }, b = null; i.globals.previousPaths.length > 0 && (b = e.getPreviousPath(o)); for (var m = 0; m < c.linePathsTo.length; m++) { var v = e.graphics.renderPaths(n(n({}, d), {}, { pathFrom: null === b ? c.linePathsFrom[m] : b, pathTo: c.linePathsTo[m], strokeWidth: Array.isArray(e.strokeWidth) ? e.strokeWidth[o] : e.strokeWidth, fill: "none", drawShadow: !1 })); h.add(v); var y = a.fillPath({ seriesNumber: o }), w = e.graphics.renderPaths(n(n({}, d), {}, { pathFrom: null === b ? c.areaPathsFrom[m] : b, pathTo: c.areaPathsTo[m], strokeWidth: 0, fill: y, drawShadow: !1 })); if (i.config.chart.dropShadow.enabled) { var k = new p(e.ctx), A = i.config.chart.dropShadow; k.dropShadow(w, Object.assign({}, A, { noUserSpaceOnUse: !0 }), o) } h.add(w) } t.forEach((function (t, a) { var s = new z(e.ctx).getMarkerConfig("apexcharts-marker", o, a), l = e.graphics.drawMarker(g[a].x, g[a].y, s); l.attr("rel", a), l.attr("j", a), l.attr("index", o), l.node.setAttribute("default-marker-size", s.pSize); var c = e.graphics.group({ class: "apexcharts-series-markers" }); c && c.add(l), u.add(c), h.add(u); var d = i.config.dataLabels; if (d.enabled) { var f = d.formatter(i.globals.series[o][a], { seriesIndex: o, dataPointIndex: a, w: i }); r.plotDataLabelsText({ x: g[a].x, y: g[a].y, text: f, textAnchor: "middle", i: o, j: o, parent: x, offsetCorrection: !1, dataLabelsConfig: n({}, d) }) } h.add(x) })), s.push(h) })), this.drawPolygons({ parent: d }), i.config.xaxis.labels.show) { var b = this.drawXAxisTexts(); d.add(b) } return d.add(this.yaxisLabels), s.forEach((function (t) { d.add(t) })), d } }, { key: "drawPolygons", value: function (t) { for (var e = this, i = this.w, a = t.parent, s = new At(this.ctx), r = i.globals.yAxisScale[0].result.reverse(), n = r.length, o = [], l = this.size / (n - 1), h = 0; h < n; h++)o[h] = l * h; o.reverse(); var c = [], d = []; o.forEach((function (t, i) { var a = e.getPolygonPos(t), s = ""; a.forEach((function (t, a) { if (0 === i) { var r = e.graphics.drawLine(t.x, t.y, 0, 0, Array.isArray(e.polygons.connectorColors) ? e.polygons.connectorColors[a] : e.polygons.connectorColors); d.push(r) } 0 === a && e.yaxisLabelsTextsPos.push({ x: t.x, y: t.y }), s += t.x + "," + t.y + " " })), c.push(s) })), c.forEach((function (t, s) { var r = e.polygons.strokeColors, n = e.polygons.strokeWidth, o = e.graphics.drawPolygon(t, Array.isArray(r) ? r[s] : r, Array.isArray(n) ? n[s] : n, i.globals.radarPolygons.fill.colors[s]); a.add(o) })), d.forEach((function (t) { a.add(t) })), i.config.yaxis[0].show && this.yaxisLabelsTextsPos.forEach((function (t, i) { var a = s.drawYAxisTexts(t.x, t.y, i, r[i]); e.yaxisLabels.add(a) })) } }, { key: "drawXAxisTexts", value: function () { var t = this, e = this.w, i = e.config.xaxis.labels, a = this.graphics.group({ class: "apexcharts-xaxis" }), s = this.getPolygonPos(this.size); return e.globals.labels.forEach((function (r, o) { var l = e.config.xaxis.labels.formatter, h = new M(t.ctx); if (s[o]) { var c = t.getTextPos(s[o], t.size), d = l(r, { seriesIndex: -1, dataPointIndex: o, w: e }); h.plotDataLabelsText({ x: c.newX, y: c.newY, text: d, textAnchor: c.textAnchor, i: o, j: o, parent: a, color: i.style.colors[o] ? i.style.colors[o] : "#a8a8a8", dataLabelsConfig: n({ textAnchor: c.textAnchor, dropShadow: { enabled: !1 } }, i), offsetCorrection: !1 }) } })), a } }, { key: "createPaths", value: function (t, e) { var i = this, a = [], s = [], r = [], n = []; if (t.length) { s = [this.graphics.move(e.x, e.y)], n = [this.graphics.move(e.x, e.y)]; var o = this.graphics.move(t[0].x, t[0].y), l = this.graphics.move(t[0].x, t[0].y); t.forEach((function (e, a) { o += i.graphics.line(e.x, e.y), l += i.graphics.line(e.x, e.y), a === t.length - 1 && (o += "Z", l += "Z") })), a.push(o), r.push(l) } return { linePathsFrom: s, linePathsTo: a, areaPathsFrom: n, areaPathsTo: r } } }, { key: "getTextPos", value: function (t, e) { var i = "middle", a = t.x, s = t.y; return Math.abs(t.x) >= 10 ? t.x > 0 ? (i = "start", a += 10) : t.x < 0 && (i = "end", a -= 10) : i = "middle", Math.abs(t.y) >= e - 10 && (t.y < 0 ? s -= 10 : t.y > 0 && (s += 10)), { textAnchor: i, newX: a, newY: s } } }, { key: "getPreviousPath", value: function (t) { for (var e = this.w, i = null, a = 0; a < e.globals.previousPaths.length; a++) { var s = e.globals.previousPaths[a]; s.paths.length > 0 && parseInt(s.realIndex, 10) === parseInt(t, 10) && void 0 !== e.globals.previousPaths[a].paths[0] && (i = e.globals.previousPaths[a].paths[0].d) } return i } }, { key: "getDataPointsPos", value: function (t, e) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : this.dataPointsLen; t = t || [], e = e || []; for (var a = [], s = 0; s < i; s++) { var r = {}; r.x = t[s] * Math.sin(e[s]), r.y = -t[s] * Math.cos(e[s]), a.push(r) } return a } }, { key: "getPolygonPos", value: function (t) { for (var e = [], i = 2 * Math.PI / this.dataPointsLen, a = 0; a < this.dataPointsLen; a++) { var s = {}; s.x = t * Math.sin(a * i), s.y = -t * Math.cos(a * i), e.push(s) } return e } }]), t }(), Lt = function (t) { o(s, t); var i = d(s); function s(t) { var a; e(this, s), (a = i.call(this, t)).ctx = t, a.w = t.w, a.animBeginArr = [0], a.animDur = 0; var r = a.w; return a.startAngle = r.config.plotOptions.radialBar.startAngle, a.endAngle = r.config.plotOptions.radialBar.endAngle, a.totalAngle = Math.abs(r.config.plotOptions.radialBar.endAngle - r.config.plotOptions.radialBar.startAngle), a.trackStartAngle = r.config.plotOptions.radialBar.track.startAngle, a.trackEndAngle = r.config.plotOptions.radialBar.track.endAngle, a.radialDataLabels = r.config.plotOptions.radialBar.dataLabels, a.trackStartAngle || (a.trackStartAngle = a.startAngle), a.trackEndAngle || (a.trackEndAngle = a.endAngle), 360 === a.endAngle && (a.endAngle = 359.99), a.margin = parseInt(r.config.plotOptions.radialBar.track.margin, 10), a } return a(s, [{ key: "draw", value: function (t) { var e = this.w, i = new b(this.ctx), a = i.group({ class: "apexcharts-radialbar" }); if (e.globals.noData) return a; var s = i.group(), r = this.defaultSize / 2, n = e.globals.gridWidth / 2, o = this.defaultSize / 2.05; e.config.chart.sparkline.enabled || (o = o - e.config.stroke.width - e.config.chart.dropShadow.blur); var l = e.globals.fill.colors; if (e.config.plotOptions.radialBar.track.show) { var h = this.drawTracks({ size: o, centerX: n, centerY: r, colorArr: l, series: t }); s.add(h) } var c = this.drawArcs({ size: o, centerX: n, centerY: r, colorArr: l, series: t }), d = 360; e.config.plotOptions.radialBar.startAngle < 0 && (d = this.totalAngle); var g = (360 - d) / 360; if (e.globals.radialSize = o - o * g, this.radialDataLabels.value.show) { var u = Math.max(this.radialDataLabels.value.offsetY, this.radialDataLabels.name.offsetY); e.globals.radialSize += u * g } return s.add(c.g), "front" === e.config.plotOptions.radialBar.hollow.position && (c.g.add(c.elHollow), c.dataLabels && c.g.add(c.dataLabels)), a.add(s), a } }, { key: "drawTracks", value: function (t) { var e = this.w, i = new b(this.ctx), a = i.group({ class: "apexcharts-tracks" }), s = new p(this.ctx), r = new T(this.ctx), n = this.getStrokeWidth(t); t.size = t.size - n / 2; for (var o = 0; o < t.series.length; o++) { var l = i.group({ class: "apexcharts-radialbar-track apexcharts-track" }); a.add(l), l.attr({ rel: o + 1 }), t.size = t.size - n - this.margin; var h = e.config.plotOptions.radialBar.track, c = r.fillPath({ seriesNumber: 0, size: t.size, fillColors: Array.isArray(h.background) ? h.background[o] : h.background, solid: !0 }), d = this.trackStartAngle, g = this.trackEndAngle; Math.abs(g) + Math.abs(d) >= 360 && (g = 360 - Math.abs(this.startAngle) - .1); var u = i.drawPath({ d: "", stroke: c, strokeWidth: n * parseInt(h.strokeWidth, 10) / 100, fill: "none", strokeOpacity: h.opacity, classes: "apexcharts-radialbar-area" }); if (h.dropShadow.enabled) { var f = h.dropShadow; s.dropShadow(u, f) } l.add(u), u.attr("id", "apexcharts-radialbarTrack-" + o), this.animatePaths(u, { centerX: t.centerX, centerY: t.centerY, endAngle: g, startAngle: d, size: t.size, i: o, totalItems: 2, animBeginArr: 0, dur: 0, isTrack: !0, easing: e.globals.easing }) } return a } }, { key: "drawArcs", value: function (t) { var e = this.w, i = new b(this.ctx), a = new T(this.ctx), s = new p(this.ctx), r = i.group(), n = this.getStrokeWidth(t); t.size = t.size - n / 2; var o = e.config.plotOptions.radialBar.hollow.background, l = t.size - n * t.series.length - this.margin * t.series.length - n * parseInt(e.config.plotOptions.radialBar.track.strokeWidth, 10) / 100 / 2, h = l - e.config.plotOptions.radialBar.hollow.margin; void 0 !== e.config.plotOptions.radialBar.hollow.image && (o = this.drawHollowImage(t, r, l, o)); var c = this.drawHollow({ size: h, centerX: t.centerX, centerY: t.centerY, fill: o || "transparent" }); if (e.config.plotOptions.radialBar.hollow.dropShadow.enabled) { var d = e.config.plotOptions.radialBar.hollow.dropShadow; s.dropShadow(c, d) } var g = 1; !this.radialDataLabels.total.show && e.globals.series.length > 1 && (g = 0); var u = null; this.radialDataLabels.show && (u = this.renderInnerDataLabels(this.radialDataLabels, { hollowSize: l, centerX: t.centerX, centerY: t.centerY, opacity: g })), "back" === e.config.plotOptions.radialBar.hollow.position && (r.add(c), u && r.add(u)); var x = !1; e.config.plotOptions.radialBar.inverseOrder && (x = !0); for (var m = x ? t.series.length - 1 : 0; x ? m >= 0 : m < t.series.length; x ? m-- : m++) { var v = i.group({ class: "apexcharts-series apexcharts-radial-series", seriesName: f.escapeString(e.globals.seriesNames[m]) }); r.add(v), v.attr({ rel: m + 1, "data:realIndex": m }), this.ctx.series.addCollapsedClassToSeries(v, m), t.size = t.size - n - this.margin; var y = a.fillPath({ seriesNumber: m, size: t.size, value: t.series[m] }), w = this.startAngle, k = void 0, A = f.negToZero(t.series[m] > 100 ? 100 : t.series[m]) / 100, S = Math.round(this.totalAngle * A) + this.startAngle, C = void 0; e.globals.dataChanged && (k = this.startAngle, C = Math.round(this.totalAngle * f.negToZero(e.globals.previousPaths[m]) / 100) + k), Math.abs(S) + Math.abs(w) >= 360 && (S -= .01), Math.abs(C) + Math.abs(k) >= 360 && (C -= .01); var L = S - w, P = Array.isArray(e.config.stroke.dashArray) ? e.config.stroke.dashArray[m] : e.config.stroke.dashArray, z = i.drawPath({ d: "", stroke: y, strokeWidth: n, fill: "none", fillOpacity: e.config.fill.opacity, classes: "apexcharts-radialbar-area apexcharts-radialbar-slice-" + m, strokeDashArray: P }); if (b.setAttrs(z.node, { "data:angle": L, "data:value": t.series[m] }), e.config.chart.dropShadow.enabled) { var I = e.config.chart.dropShadow; s.dropShadow(z, I, m) } this.addListeners(z, this.radialDataLabels), v.add(z), z.attr({ index: 0, j: m }); var M = 0; !this.initialAnim || e.globals.resized || e.globals.dataChanged || (M = (S - w) / 360 * e.config.chart.animations.speed, this.animDur = M / (1.2 * t.series.length) + this.animDur, this.animBeginArr.push(this.animDur)), e.globals.dataChanged && (M = (S - w) / 360 * e.config.chart.animations.dynamicAnimation.speed, this.animDur = M / (1.2 * t.series.length) + this.animDur, this.animBeginArr.push(this.animDur)), this.animatePaths(z, { centerX: t.centerX, centerY: t.centerY, endAngle: S, startAngle: w, prevEndAngle: C, prevStartAngle: k, size: t.size, i: m, totalItems: 2, animBeginArr: this.animBeginArr, dur: M, shouldSetPrevPaths: !0, easing: e.globals.easing }) } return { g: r, elHollow: c, dataLabels: u } } }, { key: "drawHollow", value: function (t) { var e = new b(this.ctx).drawCircle(2 * t.size); return e.attr({ class: "apexcharts-radialbar-hollow", cx: t.centerX, cy: t.centerY, r: t.size, fill: t.fill }), e } }, { key: "drawHollowImage", value: function (t, e, i, a) { var s = this.w, r = new T(this.ctx), n = f.randomId(), o = s.config.plotOptions.radialBar.hollow.image; if (s.config.plotOptions.radialBar.hollow.imageClipped) r.clippedImgArea({ width: i, height: i, image: o, patternID: "pattern".concat(s.globals.cuid).concat(n) }), a = "url(#pattern".concat(s.globals.cuid).concat(n, ")"); else { var l = s.config.plotOptions.radialBar.hollow.imageWidth, h = s.config.plotOptions.radialBar.hollow.imageHeight; if (void 0 === l && void 0 === h) { var c = s.globals.dom.Paper.image(o).loaded((function (e) { this.move(t.centerX - e.width / 2 + s.config.plotOptions.radialBar.hollow.imageOffsetX, t.centerY - e.height / 2 + s.config.plotOptions.radialBar.hollow.imageOffsetY) })); e.add(c) } else { var d = s.globals.dom.Paper.image(o).loaded((function (e) { this.move(t.centerX - l / 2 + s.config.plotOptions.radialBar.hollow.imageOffsetX, t.centerY - h / 2 + s.config.plotOptions.radialBar.hollow.imageOffsetY), this.size(l, h) })); e.add(d) } } return a } }, { key: "getStrokeWidth", value: function (t) { var e = this.w; return t.size * (100 - parseInt(e.config.plotOptions.radialBar.hollow.size, 10)) / 100 / (t.series.length + 1) - this.margin } }]), s }(St), Pt = function () { function t(i) { e(this, t), this.w = i.w, this.lineCtx = i } return a(t, [{ key: "sameValueSeriesFix", value: function (t, e) { var i = this.w; if ("line" === i.config.chart.type && ("gradient" === i.config.fill.type || "gradient" === i.config.fill.type[t]) && new y(this.lineCtx.ctx, i).seriesHaveSameValues(t)) { var a = e[t].slice(); a[a.length - 1] = a[a.length - 1] + 1e-6, e[t] = a } return e } }, { key: "calculatePoints", value: function (t) { var e = t.series, i = t.realIndex, a = t.x, s = t.y, r = t.i, n = t.j, o = t.prevY, l = this.w, h = [], c = []; if (0 === n) { var d = this.lineCtx.categoryAxisCorrection + l.config.markers.offsetX; l.globals.isXNumeric && (d = (l.globals.seriesX[i][0] - l.globals.minX) / this.lineCtx.xRatio + l.config.markers.offsetX), h.push(d), c.push(f.isNumber(e[r][0]) ? o + l.config.markers.offsetY : null), h.push(a + l.config.markers.offsetX), c.push(f.isNumber(e[r][n + 1]) ? s + l.config.markers.offsetY : null) } else h.push(a + l.config.markers.offsetX), c.push(f.isNumber(e[r][n + 1]) ? s + l.config.markers.offsetY : null); return { x: h, y: c } } }, { key: "checkPreviousPaths", value: function (t) { for (var e = t.pathFromLine, i = t.pathFromArea, a = t.realIndex, s = this.w, r = 0; r < s.globals.previousPaths.length; r++) { var n = s.globals.previousPaths[r]; ("line" === n.type || "area" === n.type) && n.paths.length > 0 && parseInt(n.realIndex, 10) === parseInt(a, 10) && ("line" === n.type ? (this.lineCtx.appendPathFrom = !1, e = s.globals.previousPaths[r].paths[0].d) : "area" === n.type && (this.lineCtx.appendPathFrom = !1, i = s.globals.previousPaths[r].paths[0].d, s.config.stroke.show && s.globals.previousPaths[r].paths[1] && (e = s.globals.previousPaths[r].paths[1].d))) } return { pathFromLine: e, pathFromArea: i } } }, { key: "determineFirstPrevY", value: function (t) { var e = t.i, i = t.series, a = t.prevY, s = t.lineYPosition, r = this.w; if (void 0 !== i[e][0]) a = (s = r.config.chart.stacked && e > 0 ? this.lineCtx.prevSeriesY[e - 1][0] : this.lineCtx.zeroY) - i[e][0] / this.lineCtx.yRatio[this.lineCtx.yaxisIndex] + 2 * (this.lineCtx.isReversed ? i[e][0] / this.lineCtx.yRatio[this.lineCtx.yaxisIndex] : 0); else if (r.config.chart.stacked && e > 0 && void 0 === i[e][0]) for (var n = e - 1; n >= 0; n--)if (null !== i[n][0] && void 0 !== i[n][0]) { a = s = this.lineCtx.prevSeriesY[n][0]; break } return { prevY: a, lineYPosition: s } } }]), t }(), Tt = function () { function t(i, a, s) { e(this, t), this.ctx = i, this.w = i.w, this.xyRatios = a, this.pointsChart = !("bubble" !== this.w.config.chart.type && "scatter" !== this.w.config.chart.type) || s, this.scatter = new I(this.ctx), this.noNegatives = this.w.globals.minX === Number.MAX_VALUE, this.lineHelpers = new Pt(this), this.markers = new z(this.ctx), this.prevSeriesY = [], this.categoryAxisCorrection = 0, this.yaxisIndex = 0 } return a(t, [{ key: "draw", value: function (t, e, i) { var a = this.w, s = new b(this.ctx), r = a.globals.comboCharts ? e : a.config.chart.type, n = s.group({ class: "apexcharts-".concat(r, "-series apexcharts-plot-series") }), o = new y(this.ctx, a); this.yRatio = this.xyRatios.yRatio, this.zRatio = this.xyRatios.zRatio, this.xRatio = this.xyRatios.xRatio, this.baseLineY = this.xyRatios.baseLineY, t = o.getLogSeries(t), this.yRatio = o.getLogYRatios(this.yRatio); for (var l = [], h = 0; h < t.length; h++) { t = this.lineHelpers.sameValueSeriesFix(h, t); var c = a.globals.comboCharts ? i[h] : h; this._initSerieVariables(t, h, c); var d = [], g = [], u = a.globals.padHorizontal + this.categoryAxisCorrection; this.ctx.series.addCollapsedClassToSeries(this.elSeries, c), a.globals.isXNumeric && a.globals.seriesX.length > 0 && (u = (a.globals.seriesX[c][0] - a.globals.minX) / this.xRatio), g.push(u); var f, p = u, x = p, m = this.zeroY; m = this.lineHelpers.determineFirstPrevY({ i: h, series: t, prevY: m, lineYPosition: 0 }).prevY, d.push(m), f = m; var v = this._calculatePathsFrom({ series: t, i: h, realIndex: c, prevX: x, prevY: m }), w = this._iterateOverDataPoints({ series: t, realIndex: c, i: h, x: u, y: 1, pX: p, pY: f, pathsFrom: v, linePaths: [], areaPaths: [], seriesIndex: i, lineYPosition: 0, xArrj: g, yArrj: d }); this._handlePaths({ type: r, realIndex: c, i: h, paths: w }), this.elSeries.add(this.elPointsMain), this.elSeries.add(this.elDataLabelsWrap), l.push(this.elSeries) } if (a.config.chart.stacked) for (var k = l.length; k > 0; k--)n.add(l[k - 1]); else for (var A = 0; A < l.length; A++)n.add(l[A]); return n } }, { key: "_initSerieVariables", value: function (t, e, i) { var a = this.w, s = new b(this.ctx); this.xDivision = a.globals.gridWidth / (a.globals.dataPoints - ("on" === a.config.xaxis.tickPlacement ? 1 : 0)), this.strokeWidth = Array.isArray(a.config.stroke.width) ? a.config.stroke.width[i] : a.config.stroke.width, this.yRatio.length > 1 && (this.yaxisIndex = i), this.isReversed = a.config.yaxis[this.yaxisIndex] && a.config.yaxis[this.yaxisIndex].reversed, this.zeroY = a.globals.gridHeight - this.baseLineY[this.yaxisIndex] - (this.isReversed ? a.globals.gridHeight : 0) + (this.isReversed ? 2 * this.baseLineY[this.yaxisIndex] : 0), this.areaBottomY = this.zeroY, (this.zeroY > a.globals.gridHeight || "end" === a.config.plotOptions.area.fillTo) && (this.areaBottomY = a.globals.gridHeight), this.categoryAxisCorrection = this.xDivision / 2, this.elSeries = s.group({ class: "apexcharts-series", seriesName: f.escapeString(a.globals.seriesNames[i]) }), this.elPointsMain = s.group({ class: "apexcharts-series-markers-wrap", "data:realIndex": i }), this.elDataLabelsWrap = s.group({ class: "apexcharts-datalabels", "data:realIndex": i }); var r = t[e].length === a.globals.dataPoints; this.elSeries.attr({ "data:longestSeries": r, rel: e + 1, "data:realIndex": i }), this.appendPathFrom = !0 } }, { key: "_calculatePathsFrom", value: function (t) { var e, i, a, s, r = t.series, n = t.i, o = t.realIndex, l = t.prevX, h = t.prevY, c = this.w, d = new b(this.ctx); if (null === r[n][0]) { for (var g = 0; g < r[n].length; g++)if (null !== r[n][g]) { l = this.xDivision * g, h = this.zeroY - r[n][g] / this.yRatio[this.yaxisIndex], e = d.move(l, h), i = d.move(l, this.areaBottomY); break } } else e = d.move(l, h), i = d.move(l, this.areaBottomY) + d.line(l, h); if (a = d.move(-1, this.zeroY) + d.line(-1, this.zeroY), s = d.move(-1, this.zeroY) + d.line(-1, this.zeroY), c.globals.previousPaths.length > 0) { var u = this.lineHelpers.checkPreviousPaths({ pathFromLine: a, pathFromArea: s, realIndex: o }); a = u.pathFromLine, s = u.pathFromArea } return { prevX: l, prevY: h, linePath: e, areaPath: i, pathFromLine: a, pathFromArea: s } } }, { key: "_handlePaths", value: function (t) { var e = t.type, i = t.realIndex, a = t.i, s = t.paths, r = this.w, o = new b(this.ctx), l = new T(this.ctx); this.prevSeriesY.push(s.yArrj), r.globals.seriesXvalues[i] = s.xArrj, r.globals.seriesYvalues[i] = s.yArrj, this.pointsChart || r.globals.delayedElements.push({ el: this.elPointsMain.node, index: i }); var h = { i: a, realIndex: i, animationDelay: a, initialSpeed: r.config.chart.animations.speed, dataChangeSpeed: r.config.chart.animations.dynamicAnimation.speed, className: "apexcharts-".concat(e) }; if ("area" === e) for (var c = l.fillPath({ seriesNumber: i }), d = 0; d < s.areaPaths.length; d++) { var g = o.renderPaths(n(n({}, h), {}, { pathFrom: s.pathFromArea, pathTo: s.areaPaths[d], stroke: "none", strokeWidth: 0, strokeLineCap: null, fill: c })); this.elSeries.add(g) } if (r.config.stroke.show && !this.pointsChart) { var u = null; u = "line" === e ? l.fillPath({ seriesNumber: i, i: a }) : r.globals.stroke.colors[i]; for (var f = 0; f < s.linePaths.length; f++) { var p = o.renderPaths(n(n({}, h), {}, { pathFrom: s.pathFromLine, pathTo: s.linePaths[f], stroke: u, strokeWidth: this.strokeWidth, strokeLineCap: r.config.stroke.lineCap, fill: "none" })); this.elSeries.add(p) } } } }, { key: "_iterateOverDataPoints", value: function (t) { for (var e = t.series, i = t.realIndex, a = t.i, s = t.x, r = t.y, n = t.pX, o = t.pY, l = t.pathsFrom, h = t.linePaths, c = t.areaPaths, d = t.seriesIndex, g = t.lineYPosition, u = t.xArrj, p = t.yArrj, x = this.w, m = new b(this.ctx), v = this.yRatio, y = l.prevY, w = l.linePath, k = l.areaPath, A = l.pathFromLine, S = l.pathFromArea, C = f.isNumber(x.globals.minYArr[i]) ? x.globals.minYArr[i] : x.globals.minY, L = x.globals.dataPoints > 1 ? x.globals.dataPoints - 1 : x.globals.dataPoints, P = 0; P < L; P++) { var T = void 0 === e[a][P + 1] || null === e[a][P + 1]; if (x.globals.isXNumeric) { var z = x.globals.seriesX[i][P + 1]; void 0 === x.globals.seriesX[i][P + 1] && (z = x.globals.seriesX[i][L - 1]), s = (z - x.globals.minX) / this.xRatio } else s += this.xDivision; if (x.config.chart.stacked) if (a > 0 && x.globals.collapsedSeries.length < x.config.series.length - 1) { g = this.prevSeriesY[function (t) { for (var e = t, i = 0; i < x.globals.series.length; i++)if (x.globals.collapsedSeriesIndices.indexOf(t) > -1) { e--; break } return e >= 0 ? e : 0 }(a - 1)][P + 1] } else g = this.zeroY; else g = this.zeroY; r = T ? g - C / v[this.yaxisIndex] + 2 * (this.isReversed ? C / v[this.yaxisIndex] : 0) : g - e[a][P + 1] / v[this.yaxisIndex] + 2 * (this.isReversed ? e[a][P + 1] / v[this.yaxisIndex] : 0), u.push(s), p.push(r); var I = this.lineHelpers.calculatePoints({ series: e, x: s, y: r, realIndex: i, i: a, j: P, prevY: y }), M = this._createPaths({ series: e, i: a, realIndex: i, j: P, x: s, y: r, pX: n, pY: o, linePath: w, areaPath: k, linePaths: h, areaPaths: c, seriesIndex: d }); c = M.areaPaths, h = M.linePaths, n = M.pX, o = M.pY, k = M.areaPath, w = M.linePath, this.appendPathFrom && (A += m.line(s, this.zeroY), S += m.line(s, this.zeroY)), this.handleNullDataPoints(e, I, a, P, i), this._handleMarkersAndLabels({ pointsPos: I, series: e, x: s, y: r, prevY: y, i: a, j: P, realIndex: i }) } return { yArrj: p, xArrj: u, pathFromArea: S, areaPaths: c, pathFromLine: A, linePaths: h } } }, { key: "_handleMarkersAndLabels", value: function (t) { var e = t.pointsPos, i = (t.series, t.x, t.y, t.prevY, t.i), a = t.j, s = t.realIndex, r = this.w, n = new M(this.ctx); if (this.pointsChart) this.scatter.draw(this.elSeries, a, { realIndex: s, pointsPos: e, zRatio: this.zRatio, elParent: this.elPointsMain }); else { r.globals.series[i].length > 1 && this.elPointsMain.node.classList.add("apexcharts-element-hidden"); var o = this.markers.plotChartMarkers(e, s, a + 1); null !== o && this.elPointsMain.add(o) } var l = n.drawDataLabel(e, s, a + 1, null); null !== l && this.elDataLabelsWrap.add(l) } }, { key: "_createPaths", value: function (t) { var e = t.series, i = t.i, a = t.realIndex, s = t.j, r = t.x, n = t.y, o = t.pX, l = t.pY, h = t.linePath, c = t.areaPath, d = t.linePaths, g = t.areaPaths, u = t.seriesIndex, f = this.w, p = new b(this.ctx), x = f.config.stroke.curve, m = this.areaBottomY; if (Array.isArray(f.config.stroke.curve) && (x = Array.isArray(u) ? f.config.stroke.curve[u[i]] : f.config.stroke.curve[i]), "smooth" === x) { var v = .35 * (r - o); f.globals.hasNullValues ? (null !== e[i][s] && (null !== e[i][s + 1] ? (h = p.move(o, l) + p.curve(o + v, l, r - v, n, r + 1, n), c = p.move(o + 1, l) + p.curve(o + v, l, r - v, n, r + 1, n) + p.line(r, m) + p.line(o, m) + "z") : (h = p.move(o, l), c = p.move(o, l) + "z")), d.push(h), g.push(c)) : (h += p.curve(o + v, l, r - v, n, r, n), c += p.curve(o + v, l, r - v, n, r, n)), o = r, l = n, s === e[i].length - 2 && (c = c + p.curve(o, l, r, n, r, m) + p.move(r, n) + "z", f.globals.hasNullValues || (d.push(h), g.push(c))) } else { if (null === e[i][s + 1]) { h += p.move(r, n); var y = f.globals.isXNumeric ? (f.globals.seriesX[a][s] - f.globals.minX) / this.xRatio : r - this.xDivision; c = c + p.line(y, m) + p.move(r, n) + "z" } null === e[i][s] && (h += p.move(r, n), c += p.move(r, m)), "stepline" === x ? (h = h + p.line(r, null, "H") + p.line(null, n, "V"), c = c + p.line(r, null, "H") + p.line(null, n, "V")) : "straight" === x && (h += p.line(r, n), c += p.line(r, n)), s === e[i].length - 2 && (c = c + p.line(r, m) + p.move(r, n) + "z", d.push(h), g.push(c)) } return { linePaths: d, areaPaths: g, pX: o, pY: l, linePath: h, areaPath: c } } }, { key: "handleNullDataPoints", value: function (t, e, i, a, s) { var r = this.w; if (null === t[i][a] && r.config.markers.showNullDataPoints || 1 === t[i].length) { var n = this.markers.plotChartMarkers(e, s, a + 1, this.strokeWidth - r.config.markers.strokeWidth / 2, !0); null !== n && this.elPointsMain.add(n) } } }]), t }(), zt = function () { function t(i) { e(this, t), this.ctx = i, this.w = i.w, this.timeScaleArray = [], this.utc = this.w.config.xaxis.labels.datetimeUTC } return a(t, [{ key: "calculateTimeScaleTicks", value: function (t, e) { var i = this, a = this.w; if (a.globals.allSeriesCollapsed) return a.globals.labels = [], a.globals.timescaleLabels = [], []; var s = new D(this.ctx), r = (e - t) / 864e5; this.determineInterval(r), a.globals.disableZoomIn = !1, a.globals.disableZoomOut = !1, r < .005 ? a.globals.disableZoomIn = !0 : r > 5e4 && (a.globals.disableZoomOut = !0); var o = s.getTimeUnitsfromTimestamp(t, e, this.utc), l = a.globals.gridWidth / r, h = l / 24, c = h / 60, d = Math.floor(24 * r), g = Math.floor(24 * r * 60), u = Math.floor(r), f = Math.floor(r / 30), p = Math.floor(r / 365), x = { minMinute: o.minMinute, minHour: o.minHour, minDate: o.minDate, minMonth: o.minMonth, minYear: o.minYear }, b = { firstVal: x, currentMinute: x.minMinute, currentHour: x.minHour, currentMonthDate: x.minDate, currentDate: x.minDate, currentMonth: x.minMonth, currentYear: x.minYear, daysWidthOnXAxis: l, hoursWidthOnXAxis: h, minutesWidthOnXAxis: c, numberOfMinutes: g, numberOfHours: d, numberOfDays: u, numberOfMonths: f, numberOfYears: p }; switch (this.tickInterval) { case "years": this.generateYearScale(b); break; case "months": case "half_year": this.generateMonthScale(b); break; case "months_days": case "months_fortnight": case "days": case "week_days": this.generateDayScale(b); break; case "hours": this.generateHourScale(b); break; case "minutes": this.generateMinuteScale(b) }var m = this.timeScaleArray.map((function (t) { var e = { position: t.position, unit: t.unit, year: t.year, day: t.day ? t.day : 1, hour: t.hour ? t.hour : 0, month: t.month + 1 }; return "month" === t.unit ? n(n({}, e), {}, { day: 1, value: t.value + 1 }) : "day" === t.unit || "hour" === t.unit ? n(n({}, e), {}, { value: t.value }) : "minute" === t.unit ? n(n({}, e), {}, { value: t.value, minute: t.value }) : t })); return m.filter((function (t) { var e = 1, s = Math.ceil(a.globals.gridWidth / 120), r = t.value; void 0 !== a.config.xaxis.tickAmount && (s = a.config.xaxis.tickAmount), m.length > s && (e = Math.floor(m.length / s)); var n = !1, o = !1; switch (i.tickInterval) { case "years": "year" === t.unit && (n = !0); break; case "half_year": e = 7, "year" === t.unit && (n = !0); break; case "months": e = 1, "year" === t.unit && (n = !0); break; case "months_fortnight": e = 15, "year" !== t.unit && "month" !== t.unit || (n = !0), 30 === r && (o = !0); break; case "months_days": e = 10, "month" === t.unit && (n = !0), 30 === r && (o = !0); break; case "week_days": e = 8, "month" === t.unit && (n = !0); break; case "days": e = 1, "month" === t.unit && (n = !0); break; case "hours": "day" === t.unit && (n = !0); break; case "minutes": r % 5 != 0 && (o = !0) }if ("minutes" === i.tickInterval || "hours" === i.tickInterval) { if (!o) return !0 } else if ((r % e == 0 || n) && !o) return !0 })) } }, { key: "recalcDimensionsBasedOnFormat", value: function (t, e) { var i = this.w, a = this.formatDates(t), s = this.removeOverlappingTS(a); i.globals.timescaleLabels = s.slice(), new lt(this.ctx).plotCoords() } }, { key: "determineInterval", value: function (t) { switch (!0) { case t > 1825: this.tickInterval = "years"; break; case t > 800 && t <= 1825: this.tickInterval = "half_year"; break; case t > 180 && t <= 800: this.tickInterval = "months"; break; case t > 90 && t <= 180: this.tickInterval = "months_fortnight"; break; case t > 60 && t <= 90: this.tickInterval = "months_days"; break; case t > 30 && t <= 60: this.tickInterval = "week_days"; break; case t > 2 && t <= 30: this.tickInterval = "days"; break; case t > .1 && t <= 2: this.tickInterval = "hours"; break; case t < .1: this.tickInterval = "minutes"; break; default: this.tickInterval = "days" } } }, { key: "generateYearScale", value: function (t) { var e = t.firstVal, i = t.currentMonth, a = t.currentYear, s = t.daysWidthOnXAxis, r = t.numberOfYears, n = e.minYear, o = 0, l = new D(this.ctx); if (e.minDate > 1 || e.minMonth > 0) { var h = l.determineRemainingDaysOfYear(e.minYear, e.minMonth, e.minDate); o = (l.determineDaysOfYear(e.minYear) - h + 1) * s, n = e.minYear + 1, this.timeScaleArray.push({ position: o, value: n, unit: "year", year: n, month: f.monthMod(i + 1) }) } else 1 === e.minDate && 0 === e.minMonth && this.timeScaleArray.push({ position: o, value: n, unit: "year", year: a, month: f.monthMod(i + 1) }); for (var c = n, d = o, g = 0; g < r; g++)c++ , d = l.determineDaysOfYear(c - 1) * s + d, this.timeScaleArray.push({ position: d, value: c, unit: "year", year: c, month: 1 }) } }, { key: "generateMonthScale", value: function (t) { var e = t.firstVal, i = t.currentMonthDate, a = t.currentMonth, s = t.currentYear, r = t.daysWidthOnXAxis, n = t.numberOfMonths, o = a, l = 0, h = new D(this.ctx), c = "month", d = 0; if (e.minDate > 1) { l = (h.determineDaysOfMonths(a + 1, e.minYear) - i + 1) * r, o = f.monthMod(a + 1); var g = s + d, u = f.monthMod(o), p = o; 0 === o && (c = "year", p = g, u = 1, g += d += 1), this.timeScaleArray.push({ position: l, value: p, unit: c, year: g, month: u }) } else this.timeScaleArray.push({ position: l, value: o, unit: c, year: s, month: f.monthMod(a) }); for (var x = o + 1, b = l, m = 0, v = 1; m < n; m++ , v++) { 0 === (x = f.monthMod(x)) ? (c = "year", d += 1) : c = "month"; var y = this._getYear(s, x, d); b = h.determineDaysOfMonths(x, y) * r + b; var w = 0 === x ? y : x; this.timeScaleArray.push({ position: b, value: w, unit: c, year: y, month: 0 === x ? 1 : x }), x++ } } }, { key: "generateDayScale", value: function (t) { var e = t.firstVal, i = t.currentMonth, a = t.currentYear, s = t.hoursWidthOnXAxis, r = t.numberOfDays, n = new D(this.ctx), o = "day", l = e.minDate + 1, h = l, c = function (t, e, i) { return t > n.determineDaysOfMonths(e + 1, i) ? (h = 1, o = "month", g = e += 1, e) : e }, d = (24 - e.minHour) * s, g = l, u = c(h, i, a); 0 === e.minHour && 1 === e.minDate && (d = 0, g = f.monthMod(e.minMonth), o = "month", h = e.minDate, r++), this.timeScaleArray.push({ position: d, value: g, unit: o, year: this._getYear(a, u, 0), month: f.monthMod(u), day: h }); for (var p = d, x = 0; x < r; x++) { o = "day", u = c(h += 1, u, this._getYear(a, u, 0)); var b = this._getYear(a, u, 0); p = 24 * s + p; var m = 1 === h ? f.monthMod(u) : h; this.timeScaleArray.push({ position: p, value: m, unit: o, year: b, month: f.monthMod(u), day: m }) } } }, { key: "generateHourScale", value: function (t) { var e = t.firstVal, i = t.currentDate, a = t.currentMonth, s = t.currentYear, r = t.minutesWidthOnXAxis, n = t.numberOfHours, o = new D(this.ctx), l = "hour", h = function (t, e) { return t > o.determineDaysOfMonths(e + 1, s) && (x = 1, e += 1), { month: e, date: x } }, c = function (t, e) { return t > o.determineDaysOfMonths(e + 1, s) ? e += 1 : e }, d = 60 - e.minMinute, g = d * r, u = e.minHour + 1, p = u + 1; 60 === d && (g = 0, p = (u = e.minHour) + 1); var x = i, b = c(x, a); this.timeScaleArray.push({ position: g, value: u, unit: l, day: x, hour: p, year: s, month: f.monthMod(b) }); for (var m = g, v = 0; v < n; v++) { if (l = "hour", p >= 24) p = 0, l = "day", b = h(x += 1, b).month, b = c(x, b); var y = this._getYear(s, b, 0); m = 0 === p && 0 === v ? d * r : 60 * r + m; var w = 0 === p ? x : p; this.timeScaleArray.push({ position: m, value: w, unit: l, hour: p, day: x, year: y, month: f.monthMod(b) }), p++ } } }, { key: "generateMinuteScale", value: function (t) { var e = t.firstVal, i = t.currentMinute, a = t.currentHour, s = t.currentDate, r = t.currentMonth, n = t.currentYear, o = t.minutesWidthOnXAxis, l = t.numberOfMinutes, h = o - (i - e.minMinute), c = e.minMinute + 1, d = c + 1, g = s, u = r, p = n, x = a; this.timeScaleArray.push({ position: h, value: c, unit: "minute", day: g, hour: x, minute: d, year: p, month: f.monthMod(u) }); for (var b = h, m = 0; m < l; m++)d >= 60 && (d = 0, 24 === (x += 1) && (x = 0)), b = o + b, this.timeScaleArray.push({ position: b, value: d, unit: "minute", hour: x, minute: d, day: g, year: this._getYear(n, u, 0), month: f.monthMod(u) }), d++ } }, { key: "createRawDateString", value: function (t, e) { var i = t.year; return i += "-" + ("0" + t.month.toString()).slice(-2), "day" === t.unit ? i += "day" === t.unit ? "-" + ("0" + e).slice(-2) : "-01" : i += "-" + ("0" + (t.day ? t.day : "1")).slice(-2), "hour" === t.unit ? i += "hour" === t.unit ? "T" + ("0" + e).slice(-2) : "T00" : i += "T" + ("0" + (t.hour ? t.hour : "0")).slice(-2), i += "minute" === t.unit ? ":" + ("0" + e).slice(-2) + ":00" : ":00:00", this.utc && (i += ".000Z"), i } }, { key: "formatDates", value: function (t) { var e = this, i = this.w; return t.map((function (t) { var a = t.value.toString(), s = new D(e.ctx), r = e.createRawDateString(t, a), n = s.getDate(s.parseDate(r)); if (e.utc || (n = s.getDate(s.parseDateWithTimezone(r))), void 0 === i.config.xaxis.labels.format) { var o = "dd MMM", l = i.config.xaxis.labels.datetimeFormatter; "year" === t.unit && (o = l.year), "month" === t.unit && (o = l.month), "day" === t.unit && (o = l.day), "hour" === t.unit && (o = l.hour), "minute" === t.unit && (o = l.minute), a = s.formatDate(n, o) } else a = s.formatDate(n, i.config.xaxis.labels.format); return { dateString: r, position: t.position, value: a, unit: t.unit, year: t.year, month: t.month } })) } }, { key: "removeOverlappingTS", value: function (t) { var e, i = this, a = new b(this.ctx), s = !1; t.length > 0 && t[0].value && t.every((function (e) { return e.value.length === t[0].value.length })) && (s = !0, e = a.getTextRects(t[0].value).width); var r = 0, n = t.map((function (n, o) { if (o > 0 && i.w.config.xaxis.labels.hideOverlappingLabels) { var l = s ? e : a.getTextRects(t[r].value).width, h = t[r].position; return n.position > h + l + 10 ? (r = o, n) : null } return n })); return n = n.filter((function (t) { return null !== t })) } }, { key: "_getYear", value: function (t, e, i) { return t + Math.floor(e / 12) + i } }]), t }(), It = function () { function t(i, a) { e(this, t), this.ctx = a, this.w = a.w, this.el = i } return a(t, [{ key: "setupElements", value: function () { var t = this.w.globals, e = this.w.config, i = e.chart.type; t.axisCharts = ["line", "area", "bar", "rangeBar", "candlestick", "scatter", "bubble", "radar", "heatmap"].indexOf(i) > -1, t.xyCharts = ["line", "area", "bar", "rangeBar", "candlestick", "scatter", "bubble"].indexOf(i) > -1, t.isBarHorizontal = ("bar" === e.chart.type || "rangeBar" === e.chart.type) && e.plotOptions.bar.horizontal, t.chartClass = ".apexcharts" + t.cuid, t.dom.baseEl = this.el, t.dom.elWrap = document.createElement("div"), b.setAttrs(t.dom.elWrap, { id: t.chartClass.substring(1), class: "apexcharts-canvas " + t.chartClass.substring(1) }), this.el.appendChild(t.dom.elWrap), t.dom.Paper = new window.SVG.Doc(t.dom.elWrap), t.dom.Paper.attr({ class: "apexcharts-svg", "xmlns:data": "ApexChartsNS", transform: "translate(".concat(e.chart.offsetX, ", ").concat(e.chart.offsetY, ")") }), t.dom.Paper.node.style.background = e.chart.background, this.setSVGDimensions(), t.dom.elGraphical = t.dom.Paper.group().attr({ class: "apexcharts-inner apexcharts-graphical" }), t.dom.elAnnotations = t.dom.Paper.group().attr({ class: "apexcharts-annotations" }), t.dom.elDefs = t.dom.Paper.defs(), t.dom.elLegendWrap = document.createElement("div"), t.dom.elLegendWrap.classList.add("apexcharts-legend"), t.dom.elWrap.appendChild(t.dom.elLegendWrap), t.dom.Paper.add(t.dom.elGraphical), t.dom.elGraphical.add(t.dom.elDefs) } }, { key: "plotChartType", value: function (t, e) { var i = this.w, a = i.config, s = i.globals, r = { series: [], i: [] }, n = { series: [], i: [] }, o = { series: [], i: [] }, l = { series: [], i: [] }, h = { series: [], i: [] }, c = { series: [], i: [] }; s.series.map((function (e, d) { void 0 !== t[d].type ? ("column" === t[d].type || "bar" === t[d].type ? (s.series.length > 1 && a.plotOptions.bar.horizontal && console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"), h.series.push(e), h.i.push(d), i.globals.columnSeries = h.series) : "area" === t[d].type ? (n.series.push(e), n.i.push(d)) : "line" === t[d].type ? (r.series.push(e), r.i.push(d)) : "scatter" === t[d].type ? (o.series.push(e), o.i.push(d)) : "bubble" === t[d].type ? (l.series.push(e), l.i.push(d)) : "candlestick" === t[d].type ? (c.series.push(e), c.i.push(d)) : console.warn("You have specified an unrecognized chart type. Available types for this propery are line/area/column/bar/scatter/bubble"), s.comboCharts = !0) : (r.series.push(e), r.i.push(d)) })); var d = new Tt(this.ctx, e), g = new wt(this.ctx, e); this.ctx.pie = new St(this.ctx); var u = new Lt(this.ctx), f = new R(this.ctx, e), p = new Ct(this.ctx), x = []; if (s.comboCharts) { if (n.series.length > 0 && x.push(d.draw(n.series, "area", n.i)), h.series.length > 0) if (i.config.chart.stacked) { var b = new yt(this.ctx, e); x.push(b.draw(h.series, h.i)) } else { var m = new F(this.ctx, e); x.push(m.draw(h.series, h.i)) } if (r.series.length > 0 && x.push(d.draw(r.series, "line", r.i)), c.series.length > 0 && x.push(g.draw(c.series, c.i)), o.series.length > 0) { var v = new Tt(this.ctx, e, !0); x.push(v.draw(o.series, "scatter", o.i)) } if (l.series.length > 0) { var y = new Tt(this.ctx, e, !0); x.push(y.draw(l.series, "bubble", l.i)) } } else switch (a.chart.type) { case "line": x = d.draw(s.series, "line"); break; case "area": x = d.draw(s.series, "area"); break; case "bar": if (a.chart.stacked) x = new yt(this.ctx, e).draw(s.series); else x = new F(this.ctx, e).draw(s.series); break; case "candlestick": x = new wt(this.ctx, e).draw(s.series); break; case "rangeBar": x = f.draw(s.series); break; case "heatmap": x = new kt(this.ctx, e).draw(s.series); break; case "pie": case "donut": case "polarArea": x = this.ctx.pie.draw(s.series); break; case "radialBar": x = u.draw(s.series); break; case "radar": x = p.draw(s.series); break; default: x = d.draw(s.series) }return x } }, { key: "setSVGDimensions", value: function () { var t = this.w.globals, e = this.w.config; t.svgWidth = e.chart.width, t.svgHeight = e.chart.height; var i = f.getDimensions(this.el), a = e.chart.width.toString().split(/[0-9]+/g).pop(); if ("%" === a ? f.isNumber(i[0]) && (0 === i[0].width && (i = f.getDimensions(this.el.parentNode)), t.svgWidth = i[0] * parseInt(e.chart.width, 10) / 100) : "px" !== a && "" !== a || (t.svgWidth = parseInt(e.chart.width, 10)), "auto" !== t.svgHeight && "" !== t.svgHeight) if ("%" === e.chart.height.toString().split(/[0-9]+/g).pop()) { var s = f.getDimensions(this.el.parentNode); t.svgHeight = s[1] * parseInt(e.chart.height, 10) / 100 } else t.svgHeight = parseInt(e.chart.height, 10); else t.axisCharts ? t.svgHeight = t.svgWidth / 1.61 : t.svgHeight = t.svgWidth / 1.2; t.svgWidth < 0 && (t.svgWidth = 0), t.svgHeight < 0 && (t.svgHeight = 0), b.setAttrs(t.dom.Paper.node, { width: t.svgWidth, height: t.svgHeight }); var r = e.chart.sparkline.enabled ? 0 : t.axisCharts ? e.chart.parentHeightOffset : 0; t.dom.Paper.node.parentNode.parentNode.style.minHeight = t.svgHeight + r + "px", t.dom.elWrap.style.width = t.svgWidth + "px", t.dom.elWrap.style.height = t.svgHeight + "px" } }, { key: "shiftGraphPosition", value: function () { var t = this.w.globals, e = t.translateY, i = { transform: "translate(" + t.translateX + ", " + e + ")" }; b.setAttrs(t.dom.elGraphical.node, i) } }, { key: "resizeNonAxisCharts", value: function () { var t = this.w, e = t.globals, i = 0, a = t.config.chart.sparkline.enabled ? 1 : 15; a += t.config.grid.padding.bottom, "top" !== t.config.legend.position && "bottom" !== t.config.legend.position || !t.config.legend.show || t.config.legend.floating || (i = new ct(this.ctx).legendHelpers.getLegendBBox().clwh + 10); var s = t.globals.dom.baseEl.querySelector(".apexcharts-radialbar"), r = 2.05 * t.globals.radialSize; if (s && !t.config.chart.sparkline.enabled) { var n = f.getBoundingClientRect(s); r = n.bottom; var o = n.bottom - n.top; r = Math.max(2.05 * t.globals.radialSize, o) } var l = r + e.translateY + i + a; e.dom.elLegendForeign && e.dom.elLegendForeign.setAttribute("height", l), e.dom.elWrap.style.height = l + "px", b.setAttrs(e.dom.Paper.node, { height: l }), e.dom.Paper.node.parentNode.parentNode.style.minHeight = l + "px" } }, { key: "coreCalculations", value: function () { new Z(this.ctx).init() } }, { key: "resetGlobals", value: function () { var t = this, e = function () { return t.w.config.series.map((function (t) { return [] })) }, i = new O, a = this.w.globals; i.initGlobalVars(a), a.seriesXvalues = e(), a.seriesYvalues = e() } }, { key: "isMultipleY", value: function () { if (this.w.config.yaxis.constructor === Array && this.w.config.yaxis.length > 1) return this.w.globals.isMultipleYAxis = !0, !0 } }, { key: "xySettings", value: function () { var t = null, e = this.w; if (e.globals.axisCharts) { if ("back" === e.config.xaxis.crosshairs.position) new tt(this.ctx).drawXCrosshairs(); if ("back" === e.config.yaxis[0].crosshairs.position) new tt(this.ctx).drawYCrosshairs(); if ("datetime" === e.config.xaxis.type && void 0 === e.config.xaxis.labels.formatter) { this.ctx.timeScale = new zt(this.ctx); var i = []; isFinite(e.globals.minX) && isFinite(e.globals.maxX) && !e.globals.isBarHorizontal ? i = this.ctx.timeScale.calculateTimeScaleTicks(e.globals.minX, e.globals.maxX) : e.globals.isBarHorizontal && (i = this.ctx.timeScale.calculateTimeScaleTicks(e.globals.minY, e.globals.maxY)), this.ctx.timeScale.recalcDimensionsBasedOnFormat(i) } t = new y(this.ctx).getCalculatedRatios() } return t } }, { key: "updateSourceChart", value: function (t) { this.ctx.w.globals.selection = void 0, this.ctx.updateHelpers._updateOptions({ chart: { selection: { xaxis: { min: t.w.globals.minX, max: t.w.globals.maxX } } } }, !1, !1) } }, { key: "setupBrushHandler", value: function () { var t = this, e = this.w; if (e.config.chart.brush.enabled && "function" != typeof e.config.chart.events.selection) { var i = e.config.chart.brush.targets || [e.config.chart.brush.target]; i.forEach((function (e) { var i = ApexCharts.getChartByID(e); i.w.globals.brushSource = t.ctx, "function" != typeof i.w.config.chart.events.zoomed && (i.w.config.chart.events.zoomed = function () { t.updateSourceChart(i) }), "function" != typeof i.w.config.chart.events.scrolled && (i.w.config.chart.events.scrolled = function () { t.updateSourceChart(i) }) })), e.config.chart.events.selection = function (t, a) { i.forEach((function (t) { var i = ApexCharts.getChartByID(t), s = f.clone(e.config.yaxis); if (e.config.chart.brush.autoScaleYaxis && 1 === i.w.globals.series.length) { var r = new q(i); s = r.autoScaleY(i, s, a) } var o = i.w.config.yaxis.reduce((function (t, e, a) { return [].concat(g(t), [n(n({}, i.w.config.yaxis[a]), {}, { min: s[0].min, max: s[0].max })]) }), []); i.ctx.updateHelpers._updateOptions({ xaxis: { min: a.xaxis.min, max: a.xaxis.max }, yaxis: o }, !1, !1, !1, !1) })) } } } }]), t }(), Mt = function () { function i(t) { e(this, i), this.ctx = t, this.w = t.w } return a(i, [{ key: "_updateOptions", value: function (e) { var i = this, a = arguments.length > 1 && void 0 !== arguments[1] && arguments[1], s = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2], r = !(arguments.length > 3 && void 0 !== arguments[3]) || arguments[3], n = arguments.length > 4 && void 0 !== arguments[4] && arguments[4], o = [this.ctx]; r && (o = this.ctx.getSyncedCharts()), this.ctx.w.globals.isExecCalled && (o = [this.ctx], this.ctx.w.globals.isExecCalled = !1), o.forEach((function (r) { var o = r.w; return o.globals.shouldAnimate = s, a || (o.globals.resized = !0, o.globals.dataChanged = !0, s && r.series.getPreviousPaths()), e && "object" === t(e) && (r.config = new N(e), e = y.extendArrayProps(r.config, e, o), r.w.globals.chartID !== i.ctx.w.globals.chartID && delete e.series, o.config = f.extend(o.config, e), n && (o.globals.lastXAxis = e.xaxis ? f.clone(e.xaxis) : [], o.globals.lastYAxis = e.yaxis ? f.clone(e.yaxis) : [], o.globals.initialConfig = f.extend({}, o.config), o.globals.initialSeries = f.clone(o.config.series))), r.update(e) })) } }, { key: "_updateSeries", value: function (t, e) { var i, a = this, s = arguments.length > 2 && void 0 !== arguments[2] && arguments[2], r = this.w; return r.globals.shouldAnimate = e, r.globals.dataChanged = !0, e && this.ctx.series.getPreviousPaths(), r.globals.axisCharts ? (0 === (i = t.map((function (t, e) { return a._extendSeries(t, e) }))).length && (i = [{ data: [] }]), r.config.series = i) : r.config.series = t.slice(), s && (r.globals.initialSeries = f.clone(r.config.series)), this.ctx.update({ series: t }) } }, { key: "_extendSeries", value: function (t, e) { var i = this.w, a = i.config.series[e]; return n(n({}, i.config.series[e]), {}, { name: t.name ? t.name : a && a.name, color: t.color ? t.color : a && a.color, type: t.type ? t.type : a && a.type, data: t.data ? t.data : a && a.data }) } }, { key: "toggleDataPointSelection", value: function (t, e) { var i = this.w, a = null, s = ".apexcharts-series[data\\:realIndex='".concat(t, "']"); return i.globals.axisCharts ? a = i.globals.dom.Paper.select("".concat(s, " path[j='").concat(e, "'], ").concat(s, " circle[j='").concat(e, "'], ").concat(s, " rect[j='").concat(e, "']")).members[0] : void 0 === e && (a = i.globals.dom.Paper.select("".concat(s, " path[j='").concat(t, "']")).members[0], "pie" !== i.config.chart.type && "polarArea" !== i.config.chart.type && "donut" !== i.config.chart.type || this.ctx.pie.pieClicked(t)), a ? (new b(this.ctx).pathMouseDown(a, null), a.node ? a.node : null) : (console.warn("toggleDataPointSelection: Element not found"), null) } }, { key: "forceXAxisUpdate", value: function (t) { var e = this.w; if (["min", "max"].forEach((function (i) { void 0 !== t.xaxis[i] && (e.config.xaxis[i] = t.xaxis[i], e.globals.lastXAxis[i] = t.xaxis[i]) })), t.xaxis.categories && t.xaxis.categories.length && (e.config.xaxis.categories = t.xaxis.categories), e.config.xaxis.convertedCatToNumeric) { var i = new H(t); t = i.convertCatToNumericXaxis(t, this.ctx) } return t } }, { key: "forceYAxisUpdate", value: function (t) { var e = this.w; return e.config.chart.stacked && "100%" === e.config.chart.stackType && (Array.isArray(t.yaxis) ? t.yaxis.forEach((function (e, i) { t.yaxis[i].min = 0, t.yaxis[i].max = 100 })) : (t.yaxis.min = 0, t.yaxis.max = 100)), t } }, { key: "revertDefaultAxisMinMax", value: function () { var t = this, e = this.w; e.config.xaxis.min = e.globals.lastXAxis.min, e.config.xaxis.max = e.globals.lastXAxis.max; var i = function (t) { void 0 !== e.globals.lastYAxis[t] && (e.config.yaxis[t].min = e.globals.lastYAxis[t].min, e.config.yaxis[t].max = e.globals.lastYAxis[t].max) }; e.config.yaxis.map((function (a, s) { e.globals.zoomed || void 0 !== e.globals.lastYAxis[s] ? i(s) : void 0 !== t.ctx.opts.yaxis[s] && (a.min = t.ctx.opts.yaxis[s].min, a.max = t.ctx.opts.yaxis[s].max) })) } }]), i }(); A = "undefined" != typeof window ? window : void 0, S = function (e, i) { var a = (void 0 !== this ? this : e).SVG = function (t) { if (a.supported) return t = new a.Doc(t), a.parser.draw || a.prepare(), t }; if (a.ns = "http://www.w3.org/2000/svg", a.xmlns = "http://www.w3.org/2000/xmlns/", a.xlink = "http://www.w3.org/1999/xlink", a.svgjs = "http://svgjs.com/svgjs", a.supported = !0, !a.supported) return !1; a.did = 1e3, a.eid = function (t) { return "Svgjs" + d(t) + a.did++ }, a.create = function (t) { var e = i.createElementNS(this.ns, t); return e.setAttribute("id", this.eid(t)), e }, a.extend = function () { var t, e; e = (t = [].slice.call(arguments)).pop(); for (var i = t.length - 1; i >= 0; i--)if (t[i]) for (var s in e) t[i].prototype[s] = e[s]; a.Set && a.Set.inherit && a.Set.inherit() }, a.invent = function (t) { var e = "function" == typeof t.create ? t.create : function () { this.constructor.call(this, a.create(t.create)) }; return t.inherit && (e.prototype = new t.inherit), t.extend && a.extend(e, t.extend), t.construct && a.extend(t.parent || a.Container, t.construct), e }, a.adopt = function (t) { return t ? t.instance ? t.instance : ((i = "svg" == t.nodeName ? t.parentNode instanceof e.SVGElement ? new a.Nested : new a.Doc : "linearGradient" == t.nodeName ? new a.Gradient("linear") : "radialGradient" == t.nodeName ? new a.Gradient("radial") : a[d(t.nodeName)] ? new (a[d(t.nodeName)]) : new a.Element(t)).type = t.nodeName, i.node = t, t.instance = i, i instanceof a.Doc && i.namespace().defs(), i.setData(JSON.parse(t.getAttribute("svgjs:data")) || {}), i) : null; var i }, a.prepare = function () { var t = i.getElementsByTagName("body")[0], e = (t ? new a.Doc(t) : a.adopt(i.documentElement).nested()).size(2, 0); a.parser = { body: t || i.documentElement, draw: e.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node, poly: e.polyline().node, path: e.path().node, native: a.create("svg") } }, a.parser = { native: a.create("svg") }, i.addEventListener("DOMContentLoaded", (function () { a.parser.draw || a.prepare() }), !1), a.regex = { numberAndUnit: /^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i, hex: /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i, rgb: /rgb\((\d+),(\d+),(\d+)\)/, reference: /#([a-z0-9\-_]+)/i, transforms: /\)\s*,?\s*/, whitespace: /\s/g, isHex: /^#[a-f0-9]{3,6}$/i, isRgb: /^rgb\(/, isCss: /[^:]+:[^;]+;?/, isBlank: /^(\s+)?$/, isNumber: /^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i, isPercent: /^-?[\d\.]+%$/, isImage: /\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i, delimiter: /[\s,]+/, hyphen: /([^e])\-/gi, pathLetters: /[MLHVCSQTAZ]/gi, isPathLetter: /[MLHVCSQTAZ]/i, numbersWithDots: /((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi, dots: /\./g }, a.utils = { map: function (t, e) { for (var i = t.length, a = [], s = 0; s < i; s++)a.push(e(t[s])); return a }, filter: function (t, e) { for (var i = t.length, a = [], s = 0; s < i; s++)e(t[s]) && a.push(t[s]); return a }, filterSVGElements: function (t) { return this.filter(t, (function (t) { return t instanceof e.SVGElement })) } }, a.defaults = { attrs: { "fill-opacity": 1, "stroke-opacity": 1, "stroke-width": 0, "stroke-linejoin": "miter", "stroke-linecap": "butt", fill: "#000000", stroke: "#000000", opacity: 1, x: 0, y: 0, cx: 0, cy: 0, width: 0, height: 0, r: 0, rx: 0, ry: 0, offset: 0, "stop-opacity": 1, "stop-color": "#000000", "font-size": 16, "font-family": "Helvetica, Arial, sans-serif", "text-anchor": "start" } }, a.Color = function (e) { var i, s; this.r = 0, this.g = 0, this.b = 0, e && ("string" == typeof e ? a.regex.isRgb.test(e) ? (i = a.regex.rgb.exec(e.replace(a.regex.whitespace, "")), this.r = parseInt(i[1]), this.g = parseInt(i[2]), this.b = parseInt(i[3])) : a.regex.isHex.test(e) && (i = a.regex.hex.exec(4 == (s = e).length ? ["#", s.substring(1, 2), s.substring(1, 2), s.substring(2, 3), s.substring(2, 3), s.substring(3, 4), s.substring(3, 4)].join("") : s), this.r = parseInt(i[1], 16), this.g = parseInt(i[2], 16), this.b = parseInt(i[3], 16)) : "object" === t(e) && (this.r = e.r, this.g = e.g, this.b = e.b)) }, a.extend(a.Color, { toString: function () { return this.toHex() }, toHex: function () { return "#" + g(this.r) + g(this.g) + g(this.b) }, toRgb: function () { return "rgb(" + [this.r, this.g, this.b].join() + ")" }, brightness: function () { return this.r / 255 * .3 + this.g / 255 * .59 + this.b / 255 * .11 }, morph: function (t) { return this.destination = new a.Color(t), this }, at: function (t) { return this.destination ? (t = t < 0 ? 0 : t > 1 ? 1 : t, new a.Color({ r: ~~(this.r + (this.destination.r - this.r) * t), g: ~~(this.g + (this.destination.g - this.g) * t), b: ~~(this.b + (this.destination.b - this.b) * t) })) : this } }), a.Color.test = function (t) { return t += "", a.regex.isHex.test(t) || a.regex.isRgb.test(t) }, a.Color.isRgb = function (t) { return t && "number" == typeof t.r && "number" == typeof t.g && "number" == typeof t.b }, a.Color.isColor = function (t) { return a.Color.isRgb(t) || a.Color.test(t) }, a.Array = function (t, e) { 0 == (t = (t || []).valueOf()).length && e && (t = e.valueOf()), this.value = this.parse(t) }, a.extend(a.Array, { toString: function () { return this.value.join(" ") }, valueOf: function () { return this.value }, parse: function (t) { return t = t.valueOf(), Array.isArray(t) ? t : this.split(t) } }), a.PointArray = function (t, e) { a.Array.call(this, t, e || [[0, 0]]) }, a.PointArray.prototype = new a.Array, a.PointArray.prototype.constructor = a.PointArray; for (var s = { M: function (t, e, i) { return e.x = i.x = t[0], e.y = i.y = t[1], ["M", e.x, e.y] }, L: function (t, e) { return e.x = t[0], e.y = t[1], ["L", t[0], t[1]] }, H: function (t, e) { return e.x = t[0], ["H", t[0]] }, V: function (t, e) { return e.y = t[0], ["V", t[0]] }, C: function (t, e) { return e.x = t[4], e.y = t[5], ["C", t[0], t[1], t[2], t[3], t[4], t[5]] }, Q: function (t, e) { return e.x = t[2], e.y = t[3], ["Q", t[0], t[1], t[2], t[3]] }, Z: function (t, e, i) { return e.x = i.x, e.y = i.y, ["Z"] } }, r = "mlhvqtcsaz".split(""), n = 0, o = r.length; n < o; ++n)s[r[n]] = function (t) { return function (e, i, a) { if ("H" == t) e[0] = e[0] + i.x; else if ("V" == t) e[0] = e[0] + i.y; else if ("A" == t) e[5] = e[5] + i.x, e[6] = e[6] + i.y; else for (var r = 0, n = e.length; r < n; ++r)e[r] = e[r] + (r % 2 ? i.y : i.x); return s[t](e, i, a) } }(r[n].toUpperCase()); a.PathArray = function (t, e) { a.Array.call(this, t, e || [["M", 0, 0]]) }, a.PathArray.prototype = new a.Array, a.PathArray.prototype.constructor = a.PathArray, a.extend(a.PathArray, { toString: function () { return function (t) { for (var e = 0, i = t.length, a = ""; e < i; e++)a += t[e][0], null != t[e][1] && (a += t[e][1], null != t[e][2] && (a += " ", a += t[e][2], null != t[e][3] && (a += " ", a += t[e][3], a += " ", a += t[e][4], null != t[e][5] && (a += " ", a += t[e][5], a += " ", a += t[e][6], null != t[e][7] && (a += " ", a += t[e][7]))))); return a + " " }(this.value) }, move: function (t, e) { var i = this.bbox(); return i.x, i.y, this }, at: function (t) { if (!this.destination) return this; for (var e = this.value, i = this.destination.value, s = [], r = new a.PathArray, n = 0, o = e.length; n < o; n++) { s[n] = [e[n][0]]; for (var l = 1, h = e[n].length; l < h; l++)s[n][l] = e[n][l] + (i[n][l] - e[n][l]) * t; "A" === s[n][0] && (s[n][4] = +(0 != s[n][4]), s[n][5] = +(0 != s[n][5])) } return r.value = s, r }, parse: function (t) { if (t instanceof a.PathArray) return t.valueOf(); var e, i = { M: 2, L: 2, H: 1, V: 1, C: 6, S: 4, Q: 4, T: 2, A: 7, Z: 0 }; t = "string" == typeof t ? t.replace(a.regex.numbersWithDots, h).replace(a.regex.pathLetters, " $& ").replace(a.regex.hyphen, "$1 -").trim().split(a.regex.delimiter) : t.reduce((function (t, e) { return [].concat.call(t, e) }), []); var r = [], n = new a.Point, o = new a.Point, l = 0, c = t.length; do { a.regex.isPathLetter.test(t[l]) ? (e = t[l], ++l) : "M" == e ? e = "L" : "m" == e && (e = "l"), r.push(s[e].call(null, t.slice(l, l += i[e.toUpperCase()]).map(parseFloat), n, o)) } while (c > l); return r }, bbox: function () { return a.parser.draw || a.prepare(), a.parser.path.setAttribute("d", this.toString()), a.parser.path.getBBox() } }), a.Number = a.invent({ create: function (t, e) { this.value = 0, this.unit = e || "", "number" == typeof t ? this.value = isNaN(t) ? 0 : isFinite(t) ? t : t < 0 ? -34e37 : 34e37 : "string" == typeof t ? (e = t.match(a.regex.numberAndUnit)) && (this.value = parseFloat(e[1]), "%" == e[5] ? this.value /= 100 : "s" == e[5] && (this.value *= 1e3), this.unit = e[5]) : t instanceof a.Number && (this.value = t.valueOf(), this.unit = t.unit) }, extend: { toString: function () { return ("%" == this.unit ? ~~(1e8 * this.value) / 1e6 : "s" == this.unit ? this.value / 1e3 : this.value) + this.unit }, toJSON: function () { return this.toString() }, valueOf: function () { return this.value }, plus: function (t) { return t = new a.Number(t), new a.Number(this + t, this.unit || t.unit) }, minus: function (t) { return t = new a.Number(t), new a.Number(this - t, this.unit || t.unit) }, times: function (t) { return t = new a.Number(t), new a.Number(this * t, this.unit || t.unit) }, divide: function (t) { return t = new a.Number(t), new a.Number(this / t, this.unit || t.unit) }, to: function (t) { var e = new a.Number(this); return "string" == typeof t && (e.unit = t), e }, morph: function (t) { return this.destination = new a.Number(t), t.relative && (this.destination.value += this.value), this }, at: function (t) { return this.destination ? new a.Number(this.destination).minus(this).times(t).plus(this) : this } } }), a.Element = a.invent({ create: function (t) { this._stroke = a.defaults.attrs.stroke, this._event = null, this.dom = {}, (this.node = t) && (this.type = t.nodeName, this.node.instance = this, this._stroke = t.getAttribute("stroke") || this._stroke) }, extend: { x: function (t) { return this.attr("x", t) }, y: function (t) { return this.attr("y", t) }, cx: function (t) { return null == t ? this.x() + this.width() / 2 : this.x(t - this.width() / 2) }, cy: function (t) { return null == t ? this.y() + this.height() / 2 : this.y(t - this.height() / 2) }, move: function (t, e) { return this.x(t).y(e) }, center: function (t, e) { return this.cx(t).cy(e) }, width: function (t) { return this.attr("width", t) }, height: function (t) { return this.attr("height", t) }, size: function (t, e) { var i = u(this, t, e); return this.width(new a.Number(i.width)).height(new a.Number(i.height)) }, clone: function (t) { this.writeDataToDom(); var e = x(this.node.cloneNode(!0)); return t ? t.add(e) : this.after(e), e }, remove: function () { return this.parent() && this.parent().removeElement(this), this }, replace: function (t) { return this.after(t).remove(), t }, addTo: function (t) { return t.put(this) }, putIn: function (t) { return t.add(this) }, id: function (t) { return this.attr("id", t) }, show: function () { return this.style("display", "") }, hide: function () { return this.style("display", "none") }, visible: function () { return "none" != this.style("display") }, toString: function () { return this.attr("id") }, classes: function () { var t = this.attr("class"); return null == t ? [] : t.trim().split(a.regex.delimiter) }, hasClass: function (t) { return -1 != this.classes().indexOf(t) }, addClass: function (t) { if (!this.hasClass(t)) { var e = this.classes(); e.push(t), this.attr("class", e.join(" ")) } return this }, removeClass: function (t) { return this.hasClass(t) && this.attr("class", this.classes().filter((function (e) { return e != t })).join(" ")), this }, toggleClass: function (t) { return this.hasClass(t) ? this.removeClass(t) : this.addClass(t) }, reference: function (t) { return a.get(this.attr(t)) }, parent: function (t) { var i = this; if (!i.node.parentNode) return null; if (i = a.adopt(i.node.parentNode), !t) return i; for (; i && i.node instanceof e.SVGElement;) { if ("string" == typeof t ? i.matches(t) : i instanceof t) return i; if (!i.node.parentNode || "#document" == i.node.parentNode.nodeName) return null; i = a.adopt(i.node.parentNode) } }, doc: function () { return this instanceof a.Doc ? this : this.parent(a.Doc) }, parents: function (t) { var e = [], i = this; do { if (!(i = i.parent(t)) || !i.node) break; e.push(i) } while (i.parent); return e }, matches: function (t) { return function (t, e) { return (t.matches || t.matchesSelector || t.msMatchesSelector || t.mozMatchesSelector || t.webkitMatchesSelector || t.oMatchesSelector).call(t, e) }(this.node, t) }, native: function () { return this.node }, svg: function (t) { var e = i.createElement("svg"); if (!(t && this instanceof a.Parent)) return e.appendChild(t = i.createElement("svg")), this.writeDataToDom(), t.appendChild(this.node.cloneNode(!0)), e.innerHTML.replace(/^<svg>/, "").replace(/<\/svg>$/, ""); e.innerHTML = "<svg>" + t.replace(/\n/, "").replace(/<([\w:-]+)([^<]+?)\/>/g, "<$1$2></$1>") + "</svg>"; for (var s = 0, r = e.firstChild.childNodes.length; s < r; s++)this.node.appendChild(e.firstChild.firstChild); return this }, writeDataToDom: function () { return (this.each || this.lines) && (this.each ? this : this.lines()).each((function () { this.writeDataToDom() })), this.node.removeAttribute("svgjs:data"), Object.keys(this.dom).length && this.node.setAttribute("svgjs:data", JSON.stringify(this.dom)), this }, setData: function (t) { return this.dom = t, this }, is: function (t) { return function (t, e) { return t instanceof e }(this, t) } } }), a.easing = { "-": function (t) { return t }, "<>": function (t) { return -Math.cos(t * Math.PI) / 2 + .5 }, ">": function (t) { return Math.sin(t * Math.PI / 2) }, "<": function (t) { return 1 - Math.cos(t * Math.PI / 2) } }, a.morph = function (t) { return function (e, i) { return new a.MorphObj(e, i).at(t) } }, a.Situation = a.invent({ create: function (t) { this.init = !1, this.reversed = !1, this.reversing = !1, this.duration = new a.Number(t.duration).valueOf(), this.delay = new a.Number(t.delay).valueOf(), this.start = +new Date + this.delay, this.finish = this.start + this.duration, this.ease = t.ease, this.loop = 0, this.loops = !1, this.animations = {}, this.attrs = {}, this.styles = {}, this.transforms = [], this.once = {} } }), a.FX = a.invent({ create: function (t) { this._target = t, this.situations = [], this.active = !1, this.situation = null, this.paused = !1, this.lastPos = 0, this.pos = 0, this.absPos = 0, this._speed = 1 }, extend: { animate: function (e, i, s) { "object" === t(e) && (i = e.ease, s = e.delay, e = e.duration); var r = new a.Situation({ duration: e || 1e3, delay: s || 0, ease: a.easing[i || "-"] || i }); return this.queue(r), this }, target: function (t) { return t && t instanceof a.Element ? (this._target = t, this) : this._target }, timeToAbsPos: function (t) { return (t - this.situation.start) / (this.situation.duration / this._speed) }, absPosToTime: function (t) { return this.situation.duration / this._speed * t + this.situation.start }, startAnimFrame: function () { this.stopAnimFrame(), this.animationFrame = e.requestAnimationFrame(function () { this.step() }.bind(this)) }, stopAnimFrame: function () { e.cancelAnimationFrame(this.animationFrame) }, start: function () { return !this.active && this.situation && (this.active = !0, this.startCurrent()), this }, startCurrent: function () { return this.situation.start = +new Date + this.situation.delay / this._speed, this.situation.finish = this.situation.start + this.situation.duration / this._speed, this.initAnimations().step() }, queue: function (t) { return ("function" == typeof t || t instanceof a.Situation) && this.situations.push(t), this.situation || (this.situation = this.situations.shift()), this }, dequeue: function () { return this.stop(), this.situation = this.situations.shift(), this.situation && (this.situation instanceof a.Situation ? this.start() : this.situation.call(this)), this }, initAnimations: function () { var t, e = this.situation; if (e.init) return this; for (var i in e.animations) { t = this.target()[i](), Array.isArray(t) || (t = [t]), Array.isArray(e.animations[i]) || (e.animations[i] = [e.animations[i]]); for (var s = t.length; s--;)e.animations[i][s] instanceof a.Number && (t[s] = new a.Number(t[s])), e.animations[i][s] = t[s].morph(e.animations[i][s]) } for (var i in e.attrs) e.attrs[i] = new a.MorphObj(this.target().attr(i), e.attrs[i]); for (var i in e.styles) e.styles[i] = new a.MorphObj(this.target().style(i), e.styles[i]); return e.initialTransformation = this.target().matrixify(), e.init = !0, this }, clearQueue: function () { return this.situations = [], this }, clearCurrent: function () { return this.situation = null, this }, stop: function (t, e) { var i = this.active; return this.active = !1, e && this.clearQueue(), t && this.situation && (!i && this.startCurrent(), this.atEnd()), this.stopAnimFrame(), this.clearCurrent() }, after: function (t) { var e = this.last(); return this.target().on("finished.fx", (function i(a) { a.detail.situation == e && (t.call(this, e), this.off("finished.fx", i)) })), this._callStart() }, during: function (t) { var e = this.last(), i = function (i) { i.detail.situation == e && t.call(this, i.detail.pos, a.morph(i.detail.pos), i.detail.eased, e) }; return this.target().off("during.fx", i).on("during.fx", i), this.after((function () { this.off("during.fx", i) })), this._callStart() }, afterAll: function (t) { var e = function e(i) { t.call(this), this.off("allfinished.fx", e) }; return this.target().off("allfinished.fx", e).on("allfinished.fx", e), this._callStart() }, last: function () { return this.situations.length ? this.situations[this.situations.length - 1] : this.situation }, add: function (t, e, i) { return this.last()[i || "animations"][t] = e, this._callStart() }, step: function (t) { var e, i, a; t || (this.absPos = this.timeToAbsPos(+new Date)), !1 !== this.situation.loops ? (e = Math.max(this.absPos, 0), i = Math.floor(e), !0 === this.situation.loops || i < this.situation.loops ? (this.pos = e - i, a = this.situation.loop, this.situation.loop = i) : (this.absPos = this.situation.loops, this.pos = 1, a = this.situation.loop - 1, this.situation.loop = this.situation.loops), this.situation.reversing && (this.situation.reversed = this.situation.reversed != Boolean((this.situation.loop - a) % 2))) : (this.absPos = Math.min(this.absPos, 1), this.pos = this.absPos), this.pos < 0 && (this.pos = 0), this.situation.reversed && (this.pos = 1 - this.pos); var s = this.situation.ease(this.pos); for (var r in this.situation.once) r > this.lastPos && r <= s && (this.situation.once[r].call(this.target(), this.pos, s), delete this.situation.once[r]); return this.active && this.target().fire("during", { pos: this.pos, eased: s, fx: this, situation: this.situation }), this.situation ? (this.eachAt(), 1 == this.pos && !this.situation.reversed || this.situation.reversed && 0 == this.pos ? (this.stopAnimFrame(), this.target().fire("finished", { fx: this, situation: this.situation }), this.situations.length || (this.target().fire("allfinished"), this.situations.length || (this.target().off(".fx"), this.active = !1)), this.active ? this.dequeue() : this.clearCurrent()) : !this.paused && this.active && this.startAnimFrame(), this.lastPos = s, this) : this }, eachAt: function () { var t, e = this, i = this.target(), s = this.situation; for (var r in s.animations) t = [].concat(s.animations[r]).map((function (t) { return "string" != typeof t && t.at ? t.at(s.ease(e.pos), e.pos) : t })), i[r].apply(i, t); for (var r in s.attrs) t = [r].concat(s.attrs[r]).map((function (t) { return "string" != typeof t && t.at ? t.at(s.ease(e.pos), e.pos) : t })), i.attr.apply(i, t); for (var r in s.styles) t = [r].concat(s.styles[r]).map((function (t) { return "string" != typeof t && t.at ? t.at(s.ease(e.pos), e.pos) : t })), i.style.apply(i, t); if (s.transforms.length) { t = s.initialTransformation, r = 0; for (var n = s.transforms.length; r < n; r++) { var o = s.transforms[r]; o instanceof a.Matrix ? t = o.relative ? t.multiply((new a.Matrix).morph(o).at(s.ease(this.pos))) : t.morph(o).at(s.ease(this.pos)) : (o.relative || o.undo(t.extract()), t = t.multiply(o.at(s.ease(this.pos)))) } i.matrix(t) } return this }, once: function (t, e, i) { var a = this.last(); return i || (t = a.ease(t)), a.once[t] = e, this }, _callStart: function () { return setTimeout(function () { this.start() }.bind(this), 0), this } }, parent: a.Element, construct: { animate: function (t, e, i) { return (this.fx || (this.fx = new a.FX(this))).animate(t, e, i) }, delay: function (t) { return (this.fx || (this.fx = new a.FX(this))).delay(t) }, stop: function (t, e) { return this.fx && this.fx.stop(t, e), this }, finish: function () { return this.fx && this.fx.finish(), this } } }), a.MorphObj = a.invent({ create: function (t, e) { return a.Color.isColor(e) ? new a.Color(t).morph(e) : a.regex.delimiter.test(t) ? a.regex.pathLetters.test(t) ? new a.PathArray(t).morph(e) : new a.Array(t).morph(e) : a.regex.numberAndUnit.test(e) ? new a.Number(t).morph(e) : (this.value = t, void (this.destination = e)) }, extend: { at: function (t, e) { return e < 1 ? this.value : this.destination }, valueOf: function () { return this.value } } }), a.extend(a.FX, { attr: function (e, i, a) { if ("object" === t(e)) for (var s in e) this.attr(s, e[s]); else this.add(e, i, "attrs"); return this }, plot: function (t, e, i, a) { return 4 == arguments.length ? this.plot([t, e, i, a]) : this.add("plot", new (this.target().morphArray)(t)) } }), a.Box = a.invent({ create: function (e, i, s, r) { if (!("object" !== t(e) || e instanceof a.Element)) return a.Box.call(this, null != e.left ? e.left : e.x, null != e.top ? e.top : e.y, e.width, e.height); 4 == arguments.length && (this.x = e, this.y = i, this.width = s, this.height = r), b(this) } }), a.BBox = a.invent({ create: function (t) { if (a.Box.apply(this, [].slice.call(arguments)), t instanceof a.Element) { var e; try { if (!i.documentElement.contains) { for (var s = t.node; s.parentNode;)s = s.parentNode; if (s != i) throw new Error("Element not in the dom") } e = t.node.getBBox() } catch (i) { if (t instanceof a.Shape) { a.parser.draw || a.prepare(); var r = t.clone(a.parser.draw.instance).show(); e = r.node.getBBox(), r.remove() } else e = { x: t.node.clientLeft, y: t.node.clientTop, width: t.node.clientWidth, height: t.node.clientHeight } } a.Box.call(this, e) } }, inherit: a.Box, parent: a.Element, construct: { bbox: function () { return new a.BBox(this) } } }), a.BBox.prototype.constructor = a.BBox, a.Matrix = a.invent({ create: function (e) { var i = p([1, 0, 0, 1, 0, 0]); e = e instanceof a.Element ? e.matrixify() : "string" == typeof e ? p(e.split(a.regex.delimiter).map(parseFloat)) : 6 == arguments.length ? p([].slice.call(arguments)) : Array.isArray(e) ? p(e) : "object" === t(e) ? e : i; for (var s = v.length - 1; s >= 0; --s)this[v[s]] = null != e[v[s]] ? e[v[s]] : i[v[s]] }, extend: { extract: function () { var t = f(this, 0, 1), e = (f(this, 1, 0), 180 / Math.PI * Math.atan2(t.y, t.x) - 90); return { x: this.e, y: this.f, transformedX: (this.e * Math.cos(e * Math.PI / 180) + this.f * Math.sin(e * Math.PI / 180)) / Math.sqrt(this.a * this.a + this.b * this.b), transformedY: (this.f * Math.cos(e * Math.PI / 180) + this.e * Math.sin(-e * Math.PI / 180)) / Math.sqrt(this.c * this.c + this.d * this.d), rotation: e, a: this.a, b: this.b, c: this.c, d: this.d, e: this.e, f: this.f, matrix: new a.Matrix(this) } }, clone: function () { return new a.Matrix(this) }, morph: function (t) { return this.destination = new a.Matrix(t), this }, multiply: function (t) { return new a.Matrix(this.native().multiply(function (t) { return t instanceof a.Matrix || (t = new a.Matrix(t)), t }(t).native())) }, inverse: function () { return new a.Matrix(this.native().inverse()) }, translate: function (t, e) { return new a.Matrix(this.native().translate(t || 0, e || 0)) }, native: function () { for (var t = a.parser.native.createSVGMatrix(), e = v.length - 1; e >= 0; e--)t[v[e]] = this[v[e]]; return t }, toString: function () { return "matrix(" + m(this.a) + "," + m(this.b) + "," + m(this.c) + "," + m(this.d) + "," + m(this.e) + "," + m(this.f) + ")" } }, parent: a.Element, construct: { ctm: function () { return new a.Matrix(this.node.getCTM()) }, screenCTM: function () { if (this instanceof a.Nested) { var t = this.rect(1, 1), e = t.node.getScreenCTM(); return t.remove(), new a.Matrix(e) } return new a.Matrix(this.node.getScreenCTM()) } } }), a.Point = a.invent({ create: function (e, i) { var a; a = Array.isArray(e) ? { x: e[0], y: e[1] } : "object" === t(e) ? { x: e.x, y: e.y } : null != e ? { x: e, y: null != i ? i : e } : { x: 0, y: 0 }, this.x = a.x, this.y = a.y }, extend: { clone: function () { return new a.Point(this) }, morph: function (t, e) { return this.destination = new a.Point(t, e), this } } }), a.extend(a.Element, { point: function (t, e) { return new a.Point(t, e).transform(this.screenCTM().inverse()) } }), a.extend(a.Element, { attr: function (e, i, s) { if (null == e) { for (e = {}, s = (i = this.node.attributes).length - 1; s >= 0; s--)e[i[s].nodeName] = a.regex.isNumber.test(i[s].nodeValue) ? parseFloat(i[s].nodeValue) : i[s].nodeValue; return e } if ("object" === t(e)) for (var r in e) this.attr(r, e[r]); else if (null === i) this.node.removeAttribute(e); else { if (null == i) return null == (i = this.node.getAttribute(e)) ? a.defaults.attrs[e] : a.regex.isNumber.test(i) ? parseFloat(i) : i; "stroke-width" == e ? this.attr("stroke", parseFloat(i) > 0 ? this._stroke : null) : "stroke" == e && (this._stroke = i), "fill" != e && "stroke" != e || (a.regex.isImage.test(i) && (i = this.doc().defs().image(i, 0, 0)), i instanceof a.Image && (i = this.doc().defs().pattern(0, 0, (function () { this.add(i) })))), "number" == typeof i ? i = new a.Number(i) : a.Color.isColor(i) ? i = new a.Color(i) : Array.isArray(i) && (i = new a.Array(i)), "leading" == e ? this.leading && this.leading(i) : "string" == typeof s ? this.node.setAttributeNS(s, e, i.toString()) : this.node.setAttribute(e, i.toString()), !this.rebuild || "font-size" != e && "x" != e || this.rebuild(e, i) } return this } }), a.extend(a.Element, { transform: function (e, i) { var s; return "object" !== t(e) ? (s = new a.Matrix(this).extract(), "string" == typeof e ? s[e] : s) : (s = new a.Matrix(this), i = !!i || !!e.relative, null != e.a && (s = i ? s.multiply(new a.Matrix(e)) : new a.Matrix(e)), this.attr("transform", s)) } }), a.extend(a.Element, { untransform: function () { return this.attr("transform", null) }, matrixify: function () { return (this.attr("transform") || "").split(a.regex.transforms).slice(0, -1).map((function (t) { var e = t.trim().split("("); return [e[0], e[1].split(a.regex.delimiter).map((function (t) { return parseFloat(t) }))] })).reduce((function (t, e) { return "matrix" == e[0] ? t.multiply(p(e[1])) : t[e[0]].apply(t, e[1]) }), new a.Matrix) }, toParent: function (t) { if (this == t) return this; var e = this.screenCTM(), i = t.screenCTM().inverse(); return this.addTo(t).untransform().transform(i.multiply(e)), this }, toDoc: function () { return this.toParent(this.doc()) } }), a.Transformation = a.invent({ create: function (e, i) { if (arguments.length > 1 && "boolean" != typeof i) return this.constructor.call(this, [].slice.call(arguments)); if (Array.isArray(e)) for (var a = 0, s = this.arguments.length; a < s; ++a)this[this.arguments[a]] = e[a]; else if ("object" === t(e)) for (a = 0, s = this.arguments.length; a < s; ++a)this[this.arguments[a]] = e[this.arguments[a]]; this.inversed = !1, !0 === i && (this.inversed = !0) } }), a.Translate = a.invent({ parent: a.Matrix, inherit: a.Transformation, create: function (t, e) { this.constructor.apply(this, [].slice.call(arguments)) }, extend: { arguments: ["transformedX", "transformedY"], method: "translate" } }), a.extend(a.Element, { style: function (e, i) { if (0 == arguments.length) return this.node.style.cssText || ""; if (arguments.length < 2) if ("object" === t(e)) for (var s in e) this.style(s, e[s]); else { if (!a.regex.isCss.test(e)) return this.node.style[c(e)]; for (e = e.split(/\s*;\s*/).filter((function (t) { return !!t })).map((function (t) { return t.split(/\s*:\s*/) })); i = e.pop();)this.style(i[0], i[1]) } else this.node.style[c(e)] = null === i || a.regex.isBlank.test(i) ? "" : i; return this } }), a.Parent = a.invent({ create: function (t) { this.constructor.call(this, t) }, inherit: a.Element, extend: { children: function () { return a.utils.map(a.utils.filterSVGElements(this.node.childNodes), (function (t) { return a.adopt(t) })) }, add: function (t, e) { return null == e ? this.node.appendChild(t.node) : t.node != this.node.childNodes[e] && this.node.insertBefore(t.node, this.node.childNodes[e]), this }, put: function (t, e) { return this.add(t, e), t }, has: function (t) { return this.index(t) >= 0 }, index: function (t) { return [].slice.call(this.node.childNodes).indexOf(t.node) }, get: function (t) { return a.adopt(this.node.childNodes[t]) }, first: function () { return this.get(0) }, last: function () { return this.get(this.node.childNodes.length - 1) }, each: function (t, e) { for (var i = this.children(), s = 0, r = i.length; s < r; s++)i[s] instanceof a.Element && t.apply(i[s], [s, i]), e && i[s] instanceof a.Container && i[s].each(t, e); return this }, removeElement: function (t) { return this.node.removeChild(t.node), this }, clear: function () { for (; this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild); return delete this._defs, this }, defs: function () { return this.doc().defs() } } }), a.extend(a.Parent, { ungroup: function (t, e) { return 0 === e || this instanceof a.Defs || this.node == a.parser.draw || (t = t || (this instanceof a.Doc ? this : this.parent(a.Parent)), e = e || 1 / 0, this.each((function () { return this instanceof a.Defs ? this : this instanceof a.Parent ? this.ungroup(t, e - 1) : this.toParent(t) })), this.node.firstChild || this.remove()), this }, flatten: function (t, e) { return this.ungroup(t, e) } }), a.Container = a.invent({ create: function (t) { this.constructor.call(this, t) }, inherit: a.Parent }), a.ViewBox = a.invent({ parent: a.Container, construct: {} }), ["click", "dblclick", "mousedown", "mouseup", "mouseover", "mouseout", "mousemove", "touchstart", "touchmove", "touchleave", "touchend", "touchcancel"].forEach((function (t) { a.Element.prototype[t] = function (e) { return a.on(this.node, t, e), this } })), a.listeners = [], a.handlerMap = [], a.listenerId = 0, a.on = function (t, e, i, s, r) { var n = i.bind(s || t.instance || t), o = (a.handlerMap.indexOf(t) + 1 || a.handlerMap.push(t)) - 1, l = e.split(".")[0], h = e.split(".")[1] || "*"; a.listeners[o] = a.listeners[o] || {}, a.listeners[o][l] = a.listeners[o][l] || {}, a.listeners[o][l][h] = a.listeners[o][l][h] || {}, i._svgjsListenerId || (i._svgjsListenerId = ++a.listenerId), a.listeners[o][l][h][i._svgjsListenerId] = n, t.addEventListener(l, n, r || !1) }, a.off = function (t, e, i) { var s = a.handlerMap.indexOf(t), r = e && e.split(".")[0], n = e && e.split(".")[1], o = ""; if (-1 != s) if (i) { if ("function" == typeof i && (i = i._svgjsListenerId), !i) return; a.listeners[s][r] && a.listeners[s][r][n || "*"] && (t.removeEventListener(r, a.listeners[s][r][n || "*"][i], !1), delete a.listeners[s][r][n || "*"][i]) } else if (n && r) { if (a.listeners[s][r] && a.listeners[s][r][n]) { for (var l in a.listeners[s][r][n]) a.off(t, [r, n].join("."), l); delete a.listeners[s][r][n] } } else if (n) for (var h in a.listeners[s]) for (var o in a.listeners[s][h]) n === o && a.off(t, [h, n].join(".")); else if (r) { if (a.listeners[s][r]) { for (var o in a.listeners[s][r]) a.off(t, [r, o].join(".")); delete a.listeners[s][r] } } else { for (var h in a.listeners[s]) a.off(t, h); delete a.listeners[s], delete a.handlerMap[s] } }, a.extend(a.Element, { on: function (t, e, i, s) { return a.on(this.node, t, e, i, s), this }, off: function (t, e) { return a.off(this.node, t, e), this }, fire: function (t, i) { return t instanceof e.Event ? this.node.dispatchEvent(t) : this.node.dispatchEvent(t = new a.CustomEvent(t, { detail: i, cancelable: !0 })), this._event = t, this }, event: function () { return this._event } }), a.Defs = a.invent({ create: "defs", inherit: a.Container }), a.G = a.invent({ create: "g", inherit: a.Container, extend: { x: function (t) { return null == t ? this.transform("x") : this.transform({ x: t - this.x() }, !0) } }, construct: { group: function () { return this.put(new a.G) } } }), a.Doc = a.invent({ create: function (t) { t && ("svg" == (t = "string" == typeof t ? i.getElementById(t) : t).nodeName ? this.constructor.call(this, t) : (this.constructor.call(this, a.create("svg")), t.appendChild(this.node), this.size("100%", "100%")), this.namespace().defs()) }, inherit: a.Container, extend: { namespace: function () { return this.attr({ xmlns: a.ns, version: "1.1" }).attr("xmlns:xlink", a.xlink, a.xmlns).attr("xmlns:svgjs", a.svgjs, a.xmlns) }, defs: function () { var t; return this._defs || ((t = this.node.getElementsByTagName("defs")[0]) ? this._defs = a.adopt(t) : this._defs = new a.Defs, this.node.appendChild(this._defs.node)), this._defs }, parent: function () { return this.node.parentNode && "#document" != this.node.parentNode.nodeName ? this.node.parentNode : null }, remove: function () { return this.parent() && this.parent().removeChild(this.node), this }, clear: function () { for (; this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild); return delete this._defs, a.parser.draw && !a.parser.draw.parentNode && this.node.appendChild(a.parser.draw), this }, clone: function (t) { this.writeDataToDom(); var e = this.node, i = x(e.cloneNode(!0)); return t ? (t.node || t).appendChild(i.node) : e.parentNode.insertBefore(i.node, e.nextSibling), i } } }), a.extend(a.Element, {}), a.Gradient = a.invent({ create: function (t) { this.constructor.call(this, a.create(t + "Gradient")), this.type = t }, inherit: a.Container, extend: { at: function (t, e, i) { return this.put(new a.Stop).update(t, e, i) }, update: function (t) { return this.clear(), "function" == typeof t && t.call(this, this), this }, fill: function () { return "url(#" + this.id() + ")" }, toString: function () { return this.fill() }, attr: function (t, e, i) { return "transform" == t && (t = "gradientTransform"), a.Container.prototype.attr.call(this, t, e, i) } }, construct: { gradient: function (t, e) { return this.defs().gradient(t, e) } } }), a.extend(a.Gradient, a.FX, { from: function (t, e) { return "radial" == (this._target || this).type ? this.attr({ fx: new a.Number(t), fy: new a.Number(e) }) : this.attr({ x1: new a.Number(t), y1: new a.Number(e) }) }, to: function (t, e) { return "radial" == (this._target || this).type ? this.attr({ cx: new a.Number(t), cy: new a.Number(e) }) : this.attr({ x2: new a.Number(t), y2: new a.Number(e) }) } }), a.extend(a.Defs, { gradient: function (t, e) { return this.put(new a.Gradient(t)).update(e) } }), a.Stop = a.invent({ create: "stop", inherit: a.Element, extend: { update: function (t) { return ("number" == typeof t || t instanceof a.Number) && (t = { offset: arguments[0], color: arguments[1], opacity: arguments[2] }), null != t.opacity && this.attr("stop-opacity", t.opacity), null != t.color && this.attr("stop-color", t.color), null != t.offset && this.attr("offset", new a.Number(t.offset)), this } } }), a.Pattern = a.invent({ create: "pattern", inherit: a.Container, extend: { fill: function () { return "url(#" + this.id() + ")" }, update: function (t) { return this.clear(), "function" == typeof t && t.call(this, this), this }, toString: function () { return this.fill() }, attr: function (t, e, i) { return "transform" == t && (t = "patternTransform"), a.Container.prototype.attr.call(this, t, e, i) } }, construct: { pattern: function (t, e, i) { return this.defs().pattern(t, e, i) } } }), a.extend(a.Defs, { pattern: function (t, e, i) { return this.put(new a.Pattern).update(i).attr({ x: 0, y: 0, width: t, height: e, patternUnits: "userSpaceOnUse" }) } }), a.Shape = a.invent({ create: function (t) { this.constructor.call(this, t) }, inherit: a.Element }), a.Symbol = a.invent({ create: "symbol", inherit: a.Container, construct: { symbol: function () { return this.put(new a.Symbol) } } }), a.Use = a.invent({ create: "use", inherit: a.Shape, extend: { element: function (t, e) { return this.attr("href", (e || "") + "#" + t, a.xlink) } }, construct: { use: function (t, e) { return this.put(new a.Use).element(t, e) } } }), a.Rect = a.invent({ create: "rect", inherit: a.Shape, construct: { rect: function (t, e) { return this.put(new a.Rect).size(t, e) } } }), a.Circle = a.invent({ create: "circle", inherit: a.Shape, construct: { circle: function (t) { return this.put(new a.Circle).rx(new a.Number(t).divide(2)).move(0, 0) } } }), a.extend(a.Circle, a.FX, { rx: function (t) { return this.attr("r", t) }, ry: function (t) { return this.rx(t) } }), a.Ellipse = a.invent({ create: "ellipse", inherit: a.Shape, construct: { ellipse: function (t, e) { return this.put(new a.Ellipse).size(t, e).move(0, 0) } } }), a.extend(a.Ellipse, a.Rect, a.FX, { rx: function (t) { return this.attr("rx", t) }, ry: function (t) { return this.attr("ry", t) } }), a.extend(a.Circle, a.Ellipse, { x: function (t) { return null == t ? this.cx() - this.rx() : this.cx(t + this.rx()) }, y: function (t) { return null == t ? this.cy() - this.ry() : this.cy(t + this.ry()) }, cx: function (t) { return null == t ? this.attr("cx") : this.attr("cx", t) }, cy: function (t) { return null == t ? this.attr("cy") : this.attr("cy", t) }, width: function (t) { return null == t ? 2 * this.rx() : this.rx(new a.Number(t).divide(2)) }, height: function (t) { return null == t ? 2 * this.ry() : this.ry(new a.Number(t).divide(2)) }, size: function (t, e) { var i = u(this, t, e); return this.rx(new a.Number(i.width).divide(2)).ry(new a.Number(i.height).divide(2)) } }), a.Line = a.invent({ create: "line", inherit: a.Shape, extend: { array: function () { return new a.PointArray([[this.attr("x1"), this.attr("y1")], [this.attr("x2"), this.attr("y2")]]) }, plot: function (t, e, i, s) { return null == t ? this.array() : (t = void 0 !== e ? { x1: t, y1: e, x2: i, y2: s } : new a.PointArray(t).toLine(), this.attr(t)) }, move: function (t, e) { return this.attr(this.array().move(t, e).toLine()) }, size: function (t, e) { var i = u(this, t, e); return this.attr(this.array().size(i.width, i.height).toLine()) } }, construct: { line: function (t, e, i, s) { return a.Line.prototype.plot.apply(this.put(new a.Line), null != t ? [t, e, i, s] : [0, 0, 0, 0]) } } }), a.Polyline = a.invent({ create: "polyline", inherit: a.Shape, construct: { polyline: function (t) { return this.put(new a.Polyline).plot(t || new a.PointArray) } } }), a.Polygon = a.invent({ create: "polygon", inherit: a.Shape, construct: { polygon: function (t) { return this.put(new a.Polygon).plot(t || new a.PointArray) } } }), a.extend(a.Polyline, a.Polygon, { array: function () { return this._array || (this._array = new a.PointArray(this.attr("points"))) }, plot: function (t) { return null == t ? this.array() : this.clear().attr("points", "string" == typeof t ? t : this._array = new a.PointArray(t)) }, clear: function () { return delete this._array, this }, move: function (t, e) { return this.attr("points", this.array().move(t, e)) }, size: function (t, e) { var i = u(this, t, e); return this.attr("points", this.array().size(i.width, i.height)) } }), a.extend(a.Line, a.Polyline, a.Polygon, { morphArray: a.PointArray, x: function (t) { return null == t ? this.bbox().x : this.move(t, this.bbox().y) }, y: function (t) { return null == t ? this.bbox().y : this.move(this.bbox().x, t) }, width: function (t) { var e = this.bbox(); return null == t ? e.width : this.size(t, e.height) }, height: function (t) { var e = this.bbox(); return null == t ? e.height : this.size(e.width, t) } }), a.Path = a.invent({ create: "path", inherit: a.Shape, extend: { morphArray: a.PathArray, array: function () { return this._array || (this._array = new a.PathArray(this.attr("d"))) }, plot: function (t) { return null == t ? this.array() : this.clear().attr("d", "string" == typeof t ? t : this._array = new a.PathArray(t)) }, clear: function () { return delete this._array, this } }, construct: { path: function (t) { return this.put(new a.Path).plot(t || new a.PathArray) } } }), a.Image = a.invent({ create: "image", inherit: a.Shape, extend: { load: function (t) { if (!t) return this; var i = this, s = new e.Image; return a.on(s, "load", (function () { a.off(s); var e = i.parent(a.Pattern); null !== e && (0 == i.width() && 0 == i.height() && i.size(s.width, s.height), e && 0 == e.width() && 0 == e.height() && e.size(i.width(), i.height()), "function" == typeof i._loaded && i._loaded.call(i, { width: s.width, height: s.height, ratio: s.width / s.height, url: t })) })), a.on(s, "error", (function (t) { a.off(s), "function" == typeof i._error && i._error.call(i, t) })), this.attr("href", s.src = this.src = t, a.xlink) }, loaded: function (t) { return this._loaded = t, this }, error: function (t) { return this._error = t, this } }, construct: { image: function (t, e, i) { return this.put(new a.Image).load(t).size(e || 0, i || e || 0) } } }), a.Text = a.invent({ create: function () { this.constructor.call(this, a.create("text")), this.dom.leading = new a.Number(1.3), this._rebuild = !0, this._build = !1, this.attr("font-family", a.defaults.attrs["font-family"]) }, inherit: a.Shape, extend: { x: function (t) { return null == t ? this.attr("x") : this.attr("x", t) }, text: function (t) { if (void 0 === t) { t = ""; for (var e = this.node.childNodes, i = 0, s = e.length; i < s; ++i)0 != i && 3 != e[i].nodeType && 1 == a.adopt(e[i]).dom.newLined && (t += "\n"), t += e[i].textContent; return t } if (this.clear().build(!0), "function" == typeof t) t.call(this, this); else { i = 0; for (var r = (t = t.split("\n")).length; i < r; i++)this.tspan(t[i]).newLine() } return this.build(!1).rebuild() }, size: function (t) { return this.attr("font-size", t).rebuild() }, leading: function (t) { return null == t ? this.dom.leading : (this.dom.leading = new a.Number(t), this.rebuild()) }, lines: function () { var t = (this.textPath && this.textPath() || this).node, e = a.utils.map(a.utils.filterSVGElements(t.childNodes), (function (t) { return a.adopt(t) })); return new a.Set(e) }, rebuild: function (t) { if ("boolean" == typeof t && (this._rebuild = t), this._rebuild) { var e = this, i = 0, s = this.dom.leading * new a.Number(this.attr("font-size")); this.lines().each((function () { this.dom.newLined && (e.textPath() || this.attr("x", e.attr("x")), "\n" == this.text() ? i += s : (this.attr("dy", s + i), i = 0)) })), this.fire("rebuild") } return this }, build: function (t) { return this._build = !!t, this }, setData: function (t) { return this.dom = t, this.dom.leading = new a.Number(t.leading || 1.3), this } }, construct: { text: function (t) { return this.put(new a.Text).text(t) }, plain: function (t) { return this.put(new a.Text).plain(t) } } }), a.Tspan = a.invent({ create: "tspan", inherit: a.Shape, extend: { text: function (t) { return null == t ? this.node.textContent + (this.dom.newLined ? "\n" : "") : ("function" == typeof t ? t.call(this, this) : this.plain(t), this) }, dx: function (t) { return this.attr("dx", t) }, dy: function (t) { return this.attr("dy", t) }, newLine: function () { var t = this.parent(a.Text); return this.dom.newLined = !0, this.dy(t.dom.leading * t.attr("font-size")).attr("x", t.x()) } } }), a.extend(a.Text, a.Tspan, { plain: function (t) { return !1 === this._build && this.clear(), this.node.appendChild(i.createTextNode(t)), this }, tspan: function (t) { var e = (this.textPath && this.textPath() || this).node, i = new a.Tspan; return !1 === this._build && this.clear(), e.appendChild(i.node), i.text(t) }, clear: function () { for (var t = (this.textPath && this.textPath() || this).node; t.hasChildNodes();)t.removeChild(t.lastChild); return this }, length: function () { return this.node.getComputedTextLength() } }), a.TextPath = a.invent({ create: "textPath", inherit: a.Parent, parent: a.Text, construct: { morphArray: a.PathArray, array: function () { var t = this.track(); return t ? t.array() : null }, plot: function (t) { var e = this.track(), i = null; return e && (i = e.plot(t)), null == t ? i : this }, track: function () { var t = this.textPath(); if (t) return t.reference("href") }, textPath: function () { if (this.node.firstChild && "textPath" == this.node.firstChild.nodeName) return a.adopt(this.node.firstChild) } } }), a.Nested = a.invent({ create: function () { this.constructor.call(this, a.create("svg")), this.style("overflow", "visible") }, inherit: a.Container, construct: { nested: function () { return this.put(new a.Nested) } } }); var l = { stroke: ["color", "width", "opacity", "linecap", "linejoin", "miterlimit", "dasharray", "dashoffset"], fill: ["color", "opacity", "rule"], prefix: function (t, e) { return "color" == e ? t : t + "-" + e } }; function h(t, e, i, s) { return i + s.replace(a.regex.dots, " .") } function c(t) { return t.toLowerCase().replace(/-(.)/g, (function (t, e) { return e.toUpperCase() })) } function d(t) { return t.charAt(0).toUpperCase() + t.slice(1) } function g(t) { var e = t.toString(16); return 1 == e.length ? "0" + e : e } function u(t, e, i) { if (null == e || null == i) { var a = t.bbox(); null == e ? e = a.width / a.height * i : null == i && (i = a.height / a.width * e) } return { width: e, height: i } } function f(t, e, i) { return { x: e * t.a + i * t.c + 0, y: e * t.b + i * t.d + 0 } } function p(t) { return { a: t[0], b: t[1], c: t[2], d: t[3], e: t[4], f: t[5] } } function x(t) { for (var i = t.childNodes.length - 1; i >= 0; i--)t.childNodes[i] instanceof e.SVGElement && x(t.childNodes[i]); return a.adopt(t).id(a.eid(t.nodeName)) } function b(t) { return null == t.x && (t.x = 0, t.y = 0, t.width = 0, t.height = 0), t.w = t.width, t.h = t.height, t.x2 = t.x + t.width, t.y2 = t.y + t.height, t.cx = t.x + t.width / 2, t.cy = t.y + t.height / 2, t } function m(t) { return Math.abs(t) > 1e-37 ? t : 0 } ["fill", "stroke"].forEach((function (t) { var e = {}; e[t] = function (e) { if (void 0 === e) return this; if ("string" == typeof e || a.Color.isRgb(e) || e && "function" == typeof e.fill) this.attr(t, e); else for (var i = l[t].length - 1; i >= 0; i--)null != e[l[t][i]] && this.attr(l.prefix(t, l[t][i]), e[l[t][i]]); return this }, a.extend(a.Element, a.FX, e) })), a.extend(a.Element, a.FX, { translate: function (t, e) { return this.transform({ x: t, y: e }) }, matrix: function (t) { return this.attr("transform", new a.Matrix(6 == arguments.length ? [].slice.call(arguments) : t)) }, opacity: function (t) { return this.attr("opacity", t) }, dx: function (t) { return this.x(new a.Number(t).plus(this instanceof a.FX ? 0 : this.x()), !0) }, dy: function (t) { return this.y(new a.Number(t).plus(this instanceof a.FX ? 0 : this.y()), !0) } }), a.extend(a.Path, { length: function () { return this.node.getTotalLength() }, pointAt: function (t) { return this.node.getPointAtLength(t) } }), a.Set = a.invent({ create: function (t) { Array.isArray(t) ? this.members = t : this.clear() }, extend: { add: function () { for (var t = [].slice.call(arguments), e = 0, i = t.length; e < i; e++)this.members.push(t[e]); return this }, remove: function (t) { var e = this.index(t); return e > -1 && this.members.splice(e, 1), this }, each: function (t) { for (var e = 0, i = this.members.length; e < i; e++)t.apply(this.members[e], [e, this.members]); return this }, clear: function () { return this.members = [], this }, length: function () { return this.members.length }, has: function (t) { return this.index(t) >= 0 }, index: function (t) { return this.members.indexOf(t) }, get: function (t) { return this.members[t] }, first: function () { return this.get(0) }, last: function () { return this.get(this.members.length - 1) }, valueOf: function () { return this.members } }, construct: { set: function (t) { return new a.Set(t) } } }), a.FX.Set = a.invent({ create: function (t) { this.set = t } }), a.Set.inherit = function () { var t = []; for (var e in a.Shape.prototype) "function" == typeof a.Shape.prototype[e] && "function" != typeof a.Set.prototype[e] && t.push(e); for (var e in t.forEach((function (t) { a.Set.prototype[t] = function () { for (var e = 0, i = this.members.length; e < i; e++)this.members[e] && "function" == typeof this.members[e][t] && this.members[e][t].apply(this.members[e], arguments); return "animate" == t ? this.fx || (this.fx = new a.FX.Set(this)) : this } })), t = [], a.FX.prototype) "function" == typeof a.FX.prototype[e] && "function" != typeof a.FX.Set.prototype[e] && t.push(e); t.forEach((function (t) { a.FX.Set.prototype[t] = function () { for (var e = 0, i = this.set.members.length; e < i; e++)this.set.members[e].fx[t].apply(this.set.members[e].fx, arguments); return this } })) }, a.extend(a.Element, {}), a.extend(a.Element, { remember: function (e, i) { if ("object" === t(arguments[0])) for (var a in e) this.remember(a, e[a]); else { if (1 == arguments.length) return this.memory()[e]; this.memory()[e] = i } return this }, forget: function () { if (0 == arguments.length) this._memory = {}; else for (var t = arguments.length - 1; t >= 0; t--)delete this.memory()[arguments[t]]; return this }, memory: function () { return this._memory || (this._memory = {}) } }), a.get = function (t) { var e = i.getElementById(function (t) { var e = (t || "").toString().match(a.regex.reference); if (e) return e[1] }(t) || t); return a.adopt(e) }, a.select = function (t, e) { return new a.Set(a.utils.map((e || i).querySelectorAll(t), (function (t) { return a.adopt(t) }))) }, a.extend(a.Parent, { select: function (t) { return a.select(t, this.node) } }); var v = "abcdef".split(""); if ("function" != typeof e.CustomEvent) { var y = function (t, e) { e = e || { bubbles: !1, cancelable: !1, detail: void 0 }; var a = i.createEvent("CustomEvent"); return a.initCustomEvent(t, e.bubbles, e.cancelable, e.detail), a }; y.prototype = e.Event.prototype, a.CustomEvent = y } else a.CustomEvent = e.CustomEvent; return a }, "function" == typeof define && define.amd ? define((function () { return S(A, A.document) })) : "object" === ("undefined" == typeof exports ? "undefined" : t(exports)) && "undefined" != typeof module ? module.exports = A.document ? S(A, A.document) : function (t) { return S(t, t.document) } : A.SVG = S(A, A.document),
        /*! svg.filter.js - v2.0.2 - 2016-02-24
          * https://github.com/wout/svg.filter.js
          * Copyright (c) 2016 Wout Fierens; Licensed MIT */
        function () { SVG.Filter = SVG.invent({ create: "filter", inherit: SVG.Parent, extend: { source: "SourceGraphic", sourceAlpha: "SourceAlpha", background: "BackgroundImage", backgroundAlpha: "BackgroundAlpha", fill: "FillPaint", stroke: "StrokePaint", autoSetIn: !0, put: function (t, e) { return this.add(t, e), !t.attr("in") && this.autoSetIn && t.attr("in", this.source), t.attr("result") || t.attr("result", t), t }, blend: function (t, e, i) { return this.put(new SVG.BlendEffect(t, e, i)) }, colorMatrix: function (t, e) { return this.put(new SVG.ColorMatrixEffect(t, e)) }, convolveMatrix: function (t) { return this.put(new SVG.ConvolveMatrixEffect(t)) }, componentTransfer: function (t) { return this.put(new SVG.ComponentTransferEffect(t)) }, composite: function (t, e, i) { return this.put(new SVG.CompositeEffect(t, e, i)) }, flood: function (t, e) { return this.put(new SVG.FloodEffect(t, e)) }, offset: function (t, e) { return this.put(new SVG.OffsetEffect(t, e)) }, image: function (t) { return this.put(new SVG.ImageEffect(t)) }, merge: function () { var t = [void 0]; for (var e in arguments) t.push(arguments[e]); return this.put(new (SVG.MergeEffect.bind.apply(SVG.MergeEffect, t))) }, gaussianBlur: function (t, e) { return this.put(new SVG.GaussianBlurEffect(t, e)) }, morphology: function (t, e) { return this.put(new SVG.MorphologyEffect(t, e)) }, diffuseLighting: function (t, e, i) { return this.put(new SVG.DiffuseLightingEffect(t, e, i)) }, displacementMap: function (t, e, i, a, s) { return this.put(new SVG.DisplacementMapEffect(t, e, i, a, s)) }, specularLighting: function (t, e, i, a) { return this.put(new SVG.SpecularLightingEffect(t, e, i, a)) }, tile: function () { return this.put(new SVG.TileEffect) }, turbulence: function (t, e, i, a, s) { return this.put(new SVG.TurbulenceEffect(t, e, i, a, s)) }, toString: function () { return "url(#" + this.attr("id") + ")" } } }), SVG.extend(SVG.Defs, { filter: function (t) { var e = this.put(new SVG.Filter); return "function" == typeof t && t.call(e, e), e } }), SVG.extend(SVG.Container, { filter: function (t) { return this.defs().filter(t) } }), SVG.extend(SVG.Element, SVG.G, SVG.Nested, { filter: function (t) { return this.filterer = t instanceof SVG.Element ? t : this.doc().filter(t), this.doc() && this.filterer.doc() !== this.doc() && this.doc().defs().add(this.filterer), this.attr("filter", this.filterer), this.filterer }, unfilter: function (t) { return this.filterer && !0 === t && this.filterer.remove(), delete this.filterer, this.attr("filter", null) } }), SVG.Effect = SVG.invent({ create: function () { this.constructor.call(this) }, inherit: SVG.Element, extend: { in: function (t) { return null == t ? this.parent() && this.parent().select('[result="' + this.attr("in") + '"]').get(0) || this.attr("in") : this.attr("in", t) }, result: function (t) { return null == t ? this.attr("result") : this.attr("result", t) }, toString: function () { return this.result() } } }), SVG.ParentEffect = SVG.invent({ create: function () { this.constructor.call(this) }, inherit: SVG.Parent, extend: { in: function (t) { return null == t ? this.parent() && this.parent().select('[result="' + this.attr("in") + '"]').get(0) || this.attr("in") : this.attr("in", t) }, result: function (t) { return null == t ? this.attr("result") : this.attr("result", t) }, toString: function () { return this.result() } } }); var t = { blend: function (t, e) { return this.parent() && this.parent().blend(this, t, e) }, colorMatrix: function (t, e) { return this.parent() && this.parent().colorMatrix(t, e).in(this) }, convolveMatrix: function (t) { return this.parent() && this.parent().convolveMatrix(t).in(this) }, componentTransfer: function (t) { return this.parent() && this.parent().componentTransfer(t).in(this) }, composite: function (t, e) { return this.parent() && this.parent().composite(this, t, e) }, flood: function (t, e) { return this.parent() && this.parent().flood(t, e) }, offset: function (t, e) { return this.parent() && this.parent().offset(t, e).in(this) }, image: function (t) { return this.parent() && this.parent().image(t) }, merge: function () { return this.parent() && this.parent().merge.apply(this.parent(), [this].concat(arguments)) }, gaussianBlur: function (t, e) { return this.parent() && this.parent().gaussianBlur(t, e).in(this) }, morphology: function (t, e) { return this.parent() && this.parent().morphology(t, e).in(this) }, diffuseLighting: function (t, e, i) { return this.parent() && this.parent().diffuseLighting(t, e, i).in(this) }, displacementMap: function (t, e, i, a) { return this.parent() && this.parent().displacementMap(this, t, e, i, a) }, specularLighting: function (t, e, i, a) { return this.parent() && this.parent().specularLighting(t, e, i, a).in(this) }, tile: function () { return this.parent() && this.parent().tile().in(this) }, turbulence: function (t, e, i, a, s) { return this.parent() && this.parent().turbulence(t, e, i, a, s).in(this) } }; SVG.extend(SVG.Effect, t), SVG.extend(SVG.ParentEffect, t), SVG.ChildEffect = SVG.invent({ create: function () { this.constructor.call(this) }, inherit: SVG.Element, extend: { in: function (t) { this.attr("in", t) } } }); var e = { blend: function (t, e, i) { this.attr({ in: t, in2: e, mode: i || "normal" }) }, colorMatrix: function (t, e) { "matrix" == t && (e = s(e)), this.attr({ type: t, values: void 0 === e ? null : e }) }, convolveMatrix: function (t) { t = s(t), this.attr({ order: Math.sqrt(t.split(" ").length), kernelMatrix: t }) }, composite: function (t, e, i) { this.attr({ in: t, in2: e, operator: i }) }, flood: function (t, e) { this.attr("flood-color", t), null != e && this.attr("flood-opacity", e) }, offset: function (t, e) { this.attr({ dx: t, dy: e }) }, image: function (t) { this.attr("href", t, SVG.xlink) }, displacementMap: function (t, e, i, a, s) { this.attr({ in: t, in2: e, scale: i, xChannelSelector: a, yChannelSelector: s }) }, gaussianBlur: function (t, e) { null != t || null != e ? this.attr("stdDeviation", r(Array.prototype.slice.call(arguments))) : this.attr("stdDeviation", "0 0") }, morphology: function (t, e) { this.attr({ operator: t, radius: e }) }, tile: function () { }, turbulence: function (t, e, i, a, s) { this.attr({ numOctaves: e, seed: i, stitchTiles: a, baseFrequency: t, type: s }) } }, i = { merge: function () { var t; if (arguments[0] instanceof SVG.Set) { var e = this; arguments[0].each((function (t) { this instanceof SVG.MergeNode ? e.put(this) : (this instanceof SVG.Effect || this instanceof SVG.ParentEffect) && e.put(new SVG.MergeNode(this)) })) } else { t = Array.isArray(arguments[0]) ? arguments[0] : arguments; for (var i = 0; i < t.length; i++)t[i] instanceof SVG.MergeNode ? this.put(t[i]) : this.put(new SVG.MergeNode(t[i])) } }, componentTransfer: function (t) { if (this.rgb = new SVG.Set, ["r", "g", "b", "a"].forEach(function (t) { this[t] = new (SVG["Func" + t.toUpperCase()])("identity"), this.rgb.add(this[t]), this.node.appendChild(this[t].node) }.bind(this)), t) for (var e in t.rgb && (["r", "g", "b"].forEach(function (e) { this[e].attr(t.rgb) }.bind(this)), delete t.rgb), t) this[e].attr(t[e]) }, diffuseLighting: function (t, e, i) { this.attr({ surfaceScale: t, diffuseConstant: e, kernelUnitLength: i }) }, specularLighting: function (t, e, i, a) { this.attr({ surfaceScale: t, diffuseConstant: e, specularExponent: i, kernelUnitLength: a }) } }, a = { distantLight: function (t, e) { this.attr({ azimuth: t, elevation: e }) }, pointLight: function (t, e, i) { this.attr({ x: t, y: e, z: i }) }, spotLight: function (t, e, i, a, s, r) { this.attr({ x: t, y: e, z: i, pointsAtX: a, pointsAtY: s, pointsAtZ: r }) }, mergeNode: function (t) { this.attr("in", t) } }; function s(t) { return Array.isArray(t) && (t = new SVG.Array(t)), t.toString().replace(/^\s+/, "").replace(/\s+$/, "").replace(/\s+/g, " ") } function r(t) { if (!Array.isArray(t)) return t; for (var e = 0, i = t.length, a = []; e < i; e++)a.push(t[e]); return a.join(" ") } function n() { var t = function () { }; for (var e in "function" == typeof arguments[arguments.length - 1] && (t = arguments[arguments.length - 1], Array.prototype.splice.call(arguments, arguments.length - 1, 1)), arguments) for (var i in arguments[e]) t(arguments[e][i], i, arguments[e]) } ["r", "g", "b", "a"].forEach((function (t) { a["Func" + t.toUpperCase()] = function (t) { switch (this.attr("type", t), t) { case "table": this.attr("tableValues", arguments[1]); break; case "linear": this.attr("slope", arguments[1]), this.attr("intercept", arguments[2]); break; case "gamma": this.attr("amplitude", arguments[1]), this.attr("exponent", arguments[2]), this.attr("offset", arguments[2]) } } })), n(e, (function (t, e) { var i = e.charAt(0).toUpperCase() + e.slice(1); SVG[i + "Effect"] = SVG.invent({ create: function () { this.constructor.call(this, SVG.create("fe" + i)), t.apply(this, arguments), this.result(this.attr("id") + "Out") }, inherit: SVG.Effect, extend: {} }) })), n(i, (function (t, e) { var i = e.charAt(0).toUpperCase() + e.slice(1); SVG[i + "Effect"] = SVG.invent({ create: function () { this.constructor.call(this, SVG.create("fe" + i)), t.apply(this, arguments), this.result(this.attr("id") + "Out") }, inherit: SVG.ParentEffect, extend: {} }) })), n(a, (function (t, e) { var i = e.charAt(0).toUpperCase() + e.slice(1); SVG[i] = SVG.invent({ create: function () { this.constructor.call(this, SVG.create("fe" + i)), t.apply(this, arguments) }, inherit: SVG.ChildEffect, extend: {} }) })), SVG.extend(SVG.MergeEffect, { in: function (t) { return t instanceof SVG.MergeNode ? this.add(t, 0) : this.add(new SVG.MergeNode(t), 0), this } }), SVG.extend(SVG.CompositeEffect, SVG.BlendEffect, SVG.DisplacementMapEffect, { in2: function (t) { return null == t ? this.parent() && this.parent().select('[result="' + this.attr("in2") + '"]').get(0) || this.attr("in2") : this.attr("in2", t) } }), SVG.filter = { sepiatone: [.343, .669, .119, 0, 0, .249, .626, .13, 0, 0, .172, .334, .111, 0, 0, 0, 0, 0, 1, 0] } }.call(void 0), function () { function t(t, s, r, n, o, l, h) { for (var c = t.slice(s, r || h), d = n.slice(o, l || h), g = 0, u = { pos: [0, 0], start: [0, 0] }, f = { pos: [0, 0], start: [0, 0] }; ;) { if (c[g] = e.call(u, c[g]), d[g] = e.call(f, d[g]), c[g][0] != d[g][0] || "M" == c[g][0] || "A" == c[g][0] && (c[g][4] != d[g][4] || c[g][5] != d[g][5]) ? (Array.prototype.splice.apply(c, [g, 1].concat(a.call(u, c[g]))), Array.prototype.splice.apply(d, [g, 1].concat(a.call(f, d[g])))) : (c[g] = i.call(u, c[g]), d[g] = i.call(f, d[g])), ++g == c.length && g == d.length) break; g == c.length && c.push(["C", u.pos[0], u.pos[1], u.pos[0], u.pos[1], u.pos[0], u.pos[1]]), g == d.length && d.push(["C", f.pos[0], f.pos[1], f.pos[0], f.pos[1], f.pos[0], f.pos[1]]) } return { start: c, dest: d } } function e(t) { switch (t[0]) { case "z": case "Z": t[0] = "L", t[1] = this.start[0], t[2] = this.start[1]; break; case "H": t[0] = "L", t[2] = this.pos[1]; break; case "V": t[0] = "L", t[2] = t[1], t[1] = this.pos[0]; break; case "T": t[0] = "Q", t[3] = t[1], t[4] = t[2], t[1] = this.reflection[1], t[2] = this.reflection[0]; break; case "S": t[0] = "C", t[6] = t[4], t[5] = t[3], t[4] = t[2], t[3] = t[1], t[2] = this.reflection[1], t[1] = this.reflection[0] }return t } function i(t) { var e = t.length; return this.pos = [t[e - 2], t[e - 1]], -1 != "SCQT".indexOf(t[0]) && (this.reflection = [2 * this.pos[0] - t[e - 4], 2 * this.pos[1] - t[e - 3]]), t } function a(t) { var e = [t]; switch (t[0]) { case "M": return this.pos = this.start = [t[1], t[2]], e; case "L": t[5] = t[3] = t[1], t[6] = t[4] = t[2], t[1] = this.pos[0], t[2] = this.pos[1]; break; case "Q": t[6] = t[4], t[5] = t[3], t[4] = 1 * t[4] / 3 + 2 * t[2] / 3, t[3] = 1 * t[3] / 3 + 2 * t[1] / 3, t[2] = 1 * this.pos[1] / 3 + 2 * t[2] / 3, t[1] = 1 * this.pos[0] / 3 + 2 * t[1] / 3; break; case "A": t = (e = function (t, e) { var i, a, s, r, n, o, l, h, c, d, g, u, f, p, x, b, m, v, y, w, k, A, S, C, L, P, T = Math.abs(e[1]), z = Math.abs(e[2]), I = e[3] % 360, M = e[4], E = e[5], X = e[6], Y = e[7], F = new SVG.Point(t), D = new SVG.Point(X, Y), R = []; if (0 === T || 0 === z || F.x === D.x && F.y === D.y) return [["C", F.x, F.y, D.x, D.y, D.x, D.y]]; i = new SVG.Point((F.x - D.x) / 2, (F.y - D.y) / 2).transform((new SVG.Matrix).rotate(I)), (a = i.x * i.x / (T * T) + i.y * i.y / (z * z)) > 1 && (a = Math.sqrt(a), T *= a, z *= a); s = (new SVG.Matrix).rotate(I).scale(1 / T, 1 / z).rotate(-I), F = F.transform(s), D = D.transform(s), r = [D.x - F.x, D.y - F.y], o = r[0] * r[0] + r[1] * r[1], n = Math.sqrt(o), r[0] /= n, r[1] /= n, l = o < 4 ? Math.sqrt(1 - o / 4) : 0, M === E && (l *= -1); h = new SVG.Point((D.x + F.x) / 2 + l * -r[1], (D.y + F.y) / 2 + l * r[0]), c = new SVG.Point(F.x - h.x, F.y - h.y), d = new SVG.Point(D.x - h.x, D.y - h.y), g = Math.acos(c.x / Math.sqrt(c.x * c.x + c.y * c.y)), c.y < 0 && (g *= -1); u = Math.acos(d.x / Math.sqrt(d.x * d.x + d.y * d.y)), d.y < 0 && (u *= -1); E && g > u && (u += 2 * Math.PI); !E && g < u && (u -= 2 * Math.PI); for (p = Math.ceil(2 * Math.abs(g - u) / Math.PI), b = [], m = g, f = (u - g) / p, x = 4 * Math.tan(f / 4) / 3, k = 0; k <= p; k++)y = Math.cos(m), v = Math.sin(m), w = new SVG.Point(h.x + y, h.y + v), b[k] = [new SVG.Point(w.x + x * v, w.y - x * y), w, new SVG.Point(w.x - x * v, w.y + x * y)], m += f; for (b[0][0] = b[0][1].clone(), b[b.length - 1][2] = b[b.length - 1][1].clone(), s = (new SVG.Matrix).rotate(I).scale(T, z).rotate(-I), k = 0, A = b.length; k < A; k++)b[k][0] = b[k][0].transform(s), b[k][1] = b[k][1].transform(s), b[k][2] = b[k][2].transform(s); for (k = 1, A = b.length; k < A; k++)w = b[k - 1][2], S = w.x, C = w.y, w = b[k][0], L = w.x, P = w.y, w = b[k][1], X = w.x, Y = w.y, R.push(["C", S, C, L, P, X, Y]); return R }(this.pos, t))[0] }return t[0] = "C", this.pos = [t[5], t[6]], this.reflection = [2 * t[5] - t[3], 2 * t[6] - t[4]], e } function s(t, e) { if (!1 === e) return !1; for (var i = e, a = t.length; i < a; ++i)if ("M" == t[i][0]) return i; return !1 } SVG.extend(SVG.PathArray, { morph: function (e) { for (var i = this.value, a = this.parse(e), r = 0, n = 0, o = !1, l = !1; !1 !== r || !1 !== n;) { var h; o = s(i, !1 !== r && r + 1), l = s(a, !1 !== n && n + 1), !1 === r && (r = 0 == (h = new SVG.PathArray(c.start).bbox()).height || 0 == h.width ? i.push(i[0]) - 1 : i.push(["M", h.x + h.width / 2, h.y + h.height / 2]) - 1), !1 === n && (n = 0 == (h = new SVG.PathArray(c.dest).bbox()).height || 0 == h.width ? a.push(a[0]) - 1 : a.push(["M", h.x + h.width / 2, h.y + h.height / 2]) - 1); var c = t(i, r, o, a, n, l); i = i.slice(0, r).concat(c.start, !1 === o ? [] : i.slice(o)), a = a.slice(0, n).concat(c.dest, !1 === l ? [] : a.slice(l)), r = !1 !== o && r + c.start.length, n = !1 !== l && n + c.dest.length } return this.value = i, this.destination = new SVG.PathArray, this.destination.value = a, this } }) }(),
        /*! svg.draggable.js - v2.2.2 - 2019-01-08
          * https://github.com/svgdotjs/svg.draggable.js
          * Copyright (c) 2019 Wout Fierens; Licensed MIT */
        function () { function t(t) { t.remember("_draggable", this), this.el = t } t.prototype.init = function (t, e) { var i = this; this.constraint = t, this.value = e, this.el.on("mousedown.drag", (function (t) { i.start(t) })), this.el.on("touchstart.drag", (function (t) { i.start(t) })) }, t.prototype.transformPoint = function (t, e) { var i = (t = t || window.event).changedTouches && t.changedTouches[0] || t; return this.p.x = i.clientX - (e || 0), this.p.y = i.clientY, this.p.matrixTransform(this.m) }, t.prototype.getBBox = function () { var t = this.el.bbox(); return this.el instanceof SVG.Nested && (t = this.el.rbox()), (this.el instanceof SVG.G || this.el instanceof SVG.Use || this.el instanceof SVG.Nested) && (t.x = this.el.x(), t.y = this.el.y()), t }, t.prototype.start = function (t) { if ("click" != t.type && "mousedown" != t.type && "mousemove" != t.type || 1 == (t.which || t.buttons)) { var e = this; if (this.el.fire("beforedrag", { event: t, handler: this }), !this.el.event().defaultPrevented) { t.preventDefault(), t.stopPropagation(), this.parent = this.parent || this.el.parent(SVG.Nested) || this.el.parent(SVG.Doc), this.p = this.parent.node.createSVGPoint(), this.m = this.el.node.getScreenCTM().inverse(); var i, a = this.getBBox(); if (this.el instanceof SVG.Text) switch (i = this.el.node.getComputedTextLength(), this.el.attr("text-anchor")) { case "middle": i /= 2; break; case "start": i = 0 }this.startPoints = { point: this.transformPoint(t, i), box: a, transform: this.el.transform() }, SVG.on(window, "mousemove.drag", (function (t) { e.drag(t) })), SVG.on(window, "touchmove.drag", (function (t) { e.drag(t) })), SVG.on(window, "mouseup.drag", (function (t) { e.end(t) })), SVG.on(window, "touchend.drag", (function (t) { e.end(t) })), this.el.fire("dragstart", { event: t, p: this.startPoints.point, m: this.m, handler: this }) } } }, t.prototype.drag = function (t) { var e = this.getBBox(), i = this.transformPoint(t), a = this.startPoints.box.x + i.x - this.startPoints.point.x, s = this.startPoints.box.y + i.y - this.startPoints.point.y, r = this.constraint, n = i.x - this.startPoints.point.x, o = i.y - this.startPoints.point.y; if (this.el.fire("dragmove", { event: t, p: i, m: this.m, handler: this }), this.el.event().defaultPrevented) return i; if ("function" == typeof r) { var l = r.call(this.el, a, s, this.m); "boolean" == typeof l && (l = { x: l, y: l }), !0 === l.x ? this.el.x(a) : !1 !== l.x && this.el.x(l.x), !0 === l.y ? this.el.y(s) : !1 !== l.y && this.el.y(l.y) } else "object" == typeof r && (null != r.minX && a < r.minX ? n = (a = r.minX) - this.startPoints.box.x : null != r.maxX && a > r.maxX - e.width && (n = (a = r.maxX - e.width) - this.startPoints.box.x), null != r.minY && s < r.minY ? o = (s = r.minY) - this.startPoints.box.y : null != r.maxY && s > r.maxY - e.height && (o = (s = r.maxY - e.height) - this.startPoints.box.y), null != r.snapToGrid && (a -= a % r.snapToGrid, s -= s % r.snapToGrid, n -= n % r.snapToGrid, o -= o % r.snapToGrid), this.el instanceof SVG.G ? this.el.matrix(this.startPoints.transform).transform({ x: n, y: o }, !0) : this.el.move(a, s)); return i }, t.prototype.end = function (t) { var e = this.drag(t); this.el.fire("dragend", { event: t, p: e, m: this.m, handler: this }), SVG.off(window, "mousemove.drag"), SVG.off(window, "touchmove.drag"), SVG.off(window, "mouseup.drag"), SVG.off(window, "touchend.drag") }, SVG.extend(SVG.Element, { draggable: function (e, i) { "function" != typeof e && "object" != typeof e || (i = e, e = !0); var a = this.remember("_draggable") || new t(this); return (e = void 0 === e || e) ? a.init(i || {}, e) : (this.off("mousedown.drag"), this.off("touchstart.drag")), this } }) }.call(void 0), function () { function t(t) { this.el = t, t.remember("_selectHandler", this), this.pointSelection = { isSelected: !1 }, this.rectSelection = { isSelected: !1 }, this.pointsList = { lt: [0, 0], rt: ["width", 0], rb: ["width", "height"], lb: [0, "height"], t: ["width", 0], r: ["width", "height"], b: ["width", "height"], l: [0, "height"] }, this.pointCoord = function (t, e, i) { var a = "string" != typeof t ? t : e[t]; return i ? a / 2 : a }, this.pointCoords = function (t, e) { var i = this.pointsList[t]; return { x: this.pointCoord(i[0], e, "t" === t || "b" === t), y: this.pointCoord(i[1], e, "r" === t || "l" === t) } } } t.prototype.init = function (t, e) { var i = this.el.bbox(); this.options = {}; var a = this.el.selectize.defaults.points; for (var s in this.el.selectize.defaults) this.options[s] = this.el.selectize.defaults[s], void 0 !== e[s] && (this.options[s] = e[s]); var r = ["points", "pointsExclude"]; for (var s in r) { var n = this.options[r[s]]; "string" == typeof n ? n = n.length > 0 ? n.split(/\s*,\s*/i) : [] : "boolean" == typeof n && "points" === r[s] && (n = n ? a : []), this.options[r[s]] = n } this.options.points = [a, this.options.points].reduce((function (t, e) { return t.filter((function (t) { return e.indexOf(t) > -1 })) })), this.options.points = [this.options.points, this.options.pointsExclude].reduce((function (t, e) { return t.filter((function (t) { return e.indexOf(t) < 0 })) })), this.parent = this.el.parent(), this.nested = this.nested || this.parent.group(), this.nested.matrix(new SVG.Matrix(this.el).translate(i.x, i.y)), this.options.deepSelect && -1 !== ["line", "polyline", "polygon"].indexOf(this.el.type) ? this.selectPoints(t) : this.selectRect(t), this.observe(), this.cleanup() }, t.prototype.selectPoints = function (t) { return this.pointSelection.isSelected = t, this.pointSelection.set || (this.pointSelection.set = this.parent.set(), this.drawPoints()), this }, t.prototype.getPointArray = function () { var t = this.el.bbox(); return this.el.array().valueOf().map((function (e) { return [e[0] - t.x, e[1] - t.y] })) }, t.prototype.drawPoints = function () { for (var t = this, e = this.getPointArray(), i = 0, a = e.length; i < a; ++i) { var s = function (e) { return function (i) { (i = i || window.event).preventDefault ? i.preventDefault() : i.returnValue = !1, i.stopPropagation(); var a = i.pageX || i.touches[0].pageX, s = i.pageY || i.touches[0].pageY; t.el.fire("point", { x: a, y: s, i: e, event: i }) } }(i), r = this.drawPoint(e[i][0], e[i][1]).addClass(this.options.classPoints).addClass(this.options.classPoints + "_point").on("touchstart", s).on("mousedown", s); this.pointSelection.set.add(r) } }, t.prototype.drawPoint = function (t, e) { var i = this.options.pointType; switch (i) { case "circle": return this.drawCircle(t, e); case "rect": return this.drawRect(t, e); default: if ("function" == typeof i) return i.call(this, t, e); throw new Error("Unknown " + i + " point type!") } }, t.prototype.drawCircle = function (t, e) { return this.nested.circle(this.options.pointSize).center(t, e) }, t.prototype.drawRect = function (t, e) { return this.nested.rect(this.options.pointSize, this.options.pointSize).center(t, e) }, t.prototype.updatePointSelection = function () { var t = this.getPointArray(); this.pointSelection.set.each((function (e) { this.cx() === t[e][0] && this.cy() === t[e][1] || this.center(t[e][0], t[e][1]) })) }, t.prototype.updateRectSelection = function () { var t = this, e = this.el.bbox(); if (this.rectSelection.set.get(0).attr({ width: e.width, height: e.height }), this.options.points.length && this.options.points.map((function (i, a) { var s = t.pointCoords(i, e); t.rectSelection.set.get(a + 1).center(s.x, s.y) })), this.options.rotationPoint) { var i = this.rectSelection.set.length(); this.rectSelection.set.get(i - 1).center(e.width / 2, 20) } }, t.prototype.selectRect = function (t) { var e = this, i = this.el.bbox(); function a(t) { return function (i) { (i = i || window.event).preventDefault ? i.preventDefault() : i.returnValue = !1, i.stopPropagation(); var a = i.pageX || i.touches[0].pageX, s = i.pageY || i.touches[0].pageY; e.el.fire(t, { x: a, y: s, event: i }) } } if (this.rectSelection.isSelected = t, this.rectSelection.set = this.rectSelection.set || this.parent.set(), this.rectSelection.set.get(0) || this.rectSelection.set.add(this.nested.rect(i.width, i.height).addClass(this.options.classRect)), this.options.points.length && this.rectSelection.set.length() < 2) { this.options.points.map((function (t, s) { var r = e.pointCoords(t, i), n = e.drawPoint(r.x, r.y).attr("class", e.options.classPoints + "_" + t).on("mousedown", a(t)).on("touchstart", a(t)); e.rectSelection.set.add(n) })), this.rectSelection.set.each((function () { this.addClass(e.options.classPoints) })) } if (this.options.rotationPoint && (this.options.points && !this.rectSelection.set.get(9) || !this.options.points && !this.rectSelection.set.get(1))) { var s = function (t) { (t = t || window.event).preventDefault ? t.preventDefault() : t.returnValue = !1, t.stopPropagation(); var i = t.pageX || t.touches[0].pageX, a = t.pageY || t.touches[0].pageY; e.el.fire("rot", { x: i, y: a, event: t }) }, r = this.drawPoint(i.width / 2, 20).attr("class", this.options.classPoints + "_rot").on("touchstart", s).on("mousedown", s); this.rectSelection.set.add(r) } }, t.prototype.handler = function () { var t = this.el.bbox(); this.nested.matrix(new SVG.Matrix(this.el).translate(t.x, t.y)), this.rectSelection.isSelected && this.updateRectSelection(), this.pointSelection.isSelected && this.updatePointSelection() }, t.prototype.observe = function () { var t = this; if (MutationObserver) if (this.rectSelection.isSelected || this.pointSelection.isSelected) this.observerInst = this.observerInst || new MutationObserver((function () { t.handler() })), this.observerInst.observe(this.el.node, { attributes: !0 }); else try { this.observerInst.disconnect(), delete this.observerInst } catch (t) { } else this.el.off("DOMAttrModified.select"), (this.rectSelection.isSelected || this.pointSelection.isSelected) && this.el.on("DOMAttrModified.select", (function () { t.handler() })) }, t.prototype.cleanup = function () { !this.rectSelection.isSelected && this.rectSelection.set && (this.rectSelection.set.each((function () { this.remove() })), this.rectSelection.set.clear(), delete this.rectSelection.set), !this.pointSelection.isSelected && this.pointSelection.set && (this.pointSelection.set.each((function () { this.remove() })), this.pointSelection.set.clear(), delete this.pointSelection.set), this.pointSelection.isSelected || this.rectSelection.isSelected || (this.nested.remove(), delete this.nested) }, SVG.extend(SVG.Element, { selectize: function (e, i) { return "object" == typeof e && (i = e, e = !0), (this.remember("_selectHandler") || new t(this)).init(void 0 === e || e, i || {}), this } }), SVG.Element.prototype.selectize.defaults = { points: ["lt", "rt", "rb", "lb", "t", "r", "b", "l"], pointsExclude: [], classRect: "svg_select_boundingRect", classPoints: "svg_select_points", pointSize: 7, rotationPoint: !0, deepSelect: !1, pointType: "circle" } }(), function () { (function () { function t(t) { t.remember("_resizeHandler", this), this.el = t, this.parameters = {}, this.lastUpdateCall = null, this.p = t.doc().node.createSVGPoint() } t.prototype.transformPoint = function (t, e, i) { return this.p.x = t - (this.offset.x - window.pageXOffset), this.p.y = e - (this.offset.y - window.pageYOffset), this.p.matrixTransform(i || this.m) }, t.prototype._extractPosition = function (t) { return { x: null != t.clientX ? t.clientX : t.touches[0].clientX, y: null != t.clientY ? t.clientY : t.touches[0].clientY } }, t.prototype.init = function (t) { var e = this; if (this.stop(), "stop" !== t) { for (var i in this.options = {}, this.el.resize.defaults) this.options[i] = this.el.resize.defaults[i], void 0 !== t[i] && (this.options[i] = t[i]); this.el.on("lt.resize", (function (t) { e.resize(t || window.event) })), this.el.on("rt.resize", (function (t) { e.resize(t || window.event) })), this.el.on("rb.resize", (function (t) { e.resize(t || window.event) })), this.el.on("lb.resize", (function (t) { e.resize(t || window.event) })), this.el.on("t.resize", (function (t) { e.resize(t || window.event) })), this.el.on("r.resize", (function (t) { e.resize(t || window.event) })), this.el.on("b.resize", (function (t) { e.resize(t || window.event) })), this.el.on("l.resize", (function (t) { e.resize(t || window.event) })), this.el.on("rot.resize", (function (t) { e.resize(t || window.event) })), this.el.on("point.resize", (function (t) { e.resize(t || window.event) })), this.update() } }, t.prototype.stop = function () { return this.el.off("lt.resize"), this.el.off("rt.resize"), this.el.off("rb.resize"), this.el.off("lb.resize"), this.el.off("t.resize"), this.el.off("r.resize"), this.el.off("b.resize"), this.el.off("l.resize"), this.el.off("rot.resize"), this.el.off("point.resize"), this }, t.prototype.resize = function (t) { var e = this; this.m = this.el.node.getScreenCTM().inverse(), this.offset = { x: window.pageXOffset, y: window.pageYOffset }; var i = this._extractPosition(t.detail.event); if (this.parameters = { type: this.el.type, p: this.transformPoint(i.x, i.y), x: t.detail.x, y: t.detail.y, box: this.el.bbox(), rotation: this.el.transform().rotation }, "text" === this.el.type && (this.parameters.fontSize = this.el.attr()["font-size"]), void 0 !== t.detail.i) { var a = this.el.array().valueOf(); this.parameters.i = t.detail.i, this.parameters.pointCoords = [a[t.detail.i][0], a[t.detail.i][1]] } switch (t.type) { case "lt": this.calc = function (t, e) { var i = this.snapToGrid(t, e); if (this.parameters.box.width - i[0] > 0 && this.parameters.box.height - i[1] > 0) { if ("text" === this.parameters.type) return this.el.move(this.parameters.box.x + i[0], this.parameters.box.y), void this.el.attr("font-size", this.parameters.fontSize - i[0]); i = this.checkAspectRatio(i), this.el.move(this.parameters.box.x + i[0], this.parameters.box.y + i[1]).size(this.parameters.box.width - i[0], this.parameters.box.height - i[1]) } }; break; case "rt": this.calc = function (t, e) { var i = this.snapToGrid(t, e, 2); if (this.parameters.box.width + i[0] > 0 && this.parameters.box.height - i[1] > 0) { if ("text" === this.parameters.type) return this.el.move(this.parameters.box.x - i[0], this.parameters.box.y), void this.el.attr("font-size", this.parameters.fontSize + i[0]); i = this.checkAspectRatio(i, !0), this.el.move(this.parameters.box.x, this.parameters.box.y + i[1]).size(this.parameters.box.width + i[0], this.parameters.box.height - i[1]) } }; break; case "rb": this.calc = function (t, e) { var i = this.snapToGrid(t, e, 0); if (this.parameters.box.width + i[0] > 0 && this.parameters.box.height + i[1] > 0) { if ("text" === this.parameters.type) return this.el.move(this.parameters.box.x - i[0], this.parameters.box.y), void this.el.attr("font-size", this.parameters.fontSize + i[0]); i = this.checkAspectRatio(i), this.el.move(this.parameters.box.x, this.parameters.box.y).size(this.parameters.box.width + i[0], this.parameters.box.height + i[1]) } }; break; case "lb": this.calc = function (t, e) { var i = this.snapToGrid(t, e, 1); if (this.parameters.box.width - i[0] > 0 && this.parameters.box.height + i[1] > 0) { if ("text" === this.parameters.type) return this.el.move(this.parameters.box.x + i[0], this.parameters.box.y), void this.el.attr("font-size", this.parameters.fontSize - i[0]); i = this.checkAspectRatio(i, !0), this.el.move(this.parameters.box.x + i[0], this.parameters.box.y).size(this.parameters.box.width - i[0], this.parameters.box.height + i[1]) } }; break; case "t": this.calc = function (t, e) { var i = this.snapToGrid(t, e, 2); if (this.parameters.box.height - i[1] > 0) { if ("text" === this.parameters.type) return; this.el.move(this.parameters.box.x, this.parameters.box.y + i[1]).height(this.parameters.box.height - i[1]) } }; break; case "r": this.calc = function (t, e) { var i = this.snapToGrid(t, e, 0); if (this.parameters.box.width + i[0] > 0) { if ("text" === this.parameters.type) return; this.el.move(this.parameters.box.x, this.parameters.box.y).width(this.parameters.box.width + i[0]) } }; break; case "b": this.calc = function (t, e) { var i = this.snapToGrid(t, e, 0); if (this.parameters.box.height + i[1] > 0) { if ("text" === this.parameters.type) return; this.el.move(this.parameters.box.x, this.parameters.box.y).height(this.parameters.box.height + i[1]) } }; break; case "l": this.calc = function (t, e) { var i = this.snapToGrid(t, e, 1); if (this.parameters.box.width - i[0] > 0) { if ("text" === this.parameters.type) return; this.el.move(this.parameters.box.x + i[0], this.parameters.box.y).width(this.parameters.box.width - i[0]) } }; break; case "rot": this.calc = function (t, e) { var i = t + this.parameters.p.x, a = e + this.parameters.p.y, s = Math.atan2(this.parameters.p.y - this.parameters.box.y - this.parameters.box.height / 2, this.parameters.p.x - this.parameters.box.x - this.parameters.box.width / 2), r = Math.atan2(a - this.parameters.box.y - this.parameters.box.height / 2, i - this.parameters.box.x - this.parameters.box.width / 2), n = this.parameters.rotation + 180 * (r - s) / Math.PI + this.options.snapToAngle / 2; this.el.center(this.parameters.box.cx, this.parameters.box.cy).rotate(n - n % this.options.snapToAngle, this.parameters.box.cx, this.parameters.box.cy) }; break; case "point": this.calc = function (t, e) { var i = this.snapToGrid(t, e, this.parameters.pointCoords[0], this.parameters.pointCoords[1]), a = this.el.array().valueOf(); a[this.parameters.i][0] = this.parameters.pointCoords[0] + i[0], a[this.parameters.i][1] = this.parameters.pointCoords[1] + i[1], this.el.plot(a) } }this.el.fire("resizestart", { dx: this.parameters.x, dy: this.parameters.y, event: t }), SVG.on(window, "touchmove.resize", (function (t) { e.update(t || window.event) })), SVG.on(window, "touchend.resize", (function () { e.done() })), SVG.on(window, "mousemove.resize", (function (t) { e.update(t || window.event) })), SVG.on(window, "mouseup.resize", (function () { e.done() })) }, t.prototype.update = function (t) { if (t) { var e = this._extractPosition(t), i = this.transformPoint(e.x, e.y), a = i.x - this.parameters.p.x, s = i.y - this.parameters.p.y; this.lastUpdateCall = [a, s], this.calc(a, s), this.el.fire("resizing", { dx: a, dy: s, event: t }) } else this.lastUpdateCall && this.calc(this.lastUpdateCall[0], this.lastUpdateCall[1]) }, t.prototype.done = function () { this.lastUpdateCall = null, SVG.off(window, "mousemove.resize"), SVG.off(window, "mouseup.resize"), SVG.off(window, "touchmove.resize"), SVG.off(window, "touchend.resize"), this.el.fire("resizedone") }, t.prototype.snapToGrid = function (t, e, i, a) { var s; return void 0 !== a ? s = [(i + t) % this.options.snapToGrid, (a + e) % this.options.snapToGrid] : (i = null == i ? 3 : i, s = [(this.parameters.box.x + t + (1 & i ? 0 : this.parameters.box.width)) % this.options.snapToGrid, (this.parameters.box.y + e + (2 & i ? 0 : this.parameters.box.height)) % this.options.snapToGrid]), t < 0 && (s[0] -= this.options.snapToGrid), e < 0 && (s[1] -= this.options.snapToGrid), t -= Math.abs(s[0]) < this.options.snapToGrid / 2 ? s[0] : s[0] - (t < 0 ? -this.options.snapToGrid : this.options.snapToGrid), e -= Math.abs(s[1]) < this.options.snapToGrid / 2 ? s[1] : s[1] - (e < 0 ? -this.options.snapToGrid : this.options.snapToGrid), this.constraintToBox(t, e, i, a) }, t.prototype.constraintToBox = function (t, e, i, a) { var s, r, n = this.options.constraint || {}; return void 0 !== a ? (s = i, r = a) : (s = this.parameters.box.x + (1 & i ? 0 : this.parameters.box.width), r = this.parameters.box.y + (2 & i ? 0 : this.parameters.box.height)), void 0 !== n.minX && s + t < n.minX && (t = n.minX - s), void 0 !== n.maxX && s + t > n.maxX && (t = n.maxX - s), void 0 !== n.minY && r + e < n.minY && (e = n.minY - r), void 0 !== n.maxY && r + e > n.maxY && (e = n.maxY - r), [t, e] }, t.prototype.checkAspectRatio = function (t, e) { if (!this.options.saveAspectRatio) return t; var i = t.slice(), a = this.parameters.box.width / this.parameters.box.height, s = this.parameters.box.width + t[0], r = this.parameters.box.height - t[1], n = s / r; return n < a ? (i[1] = s / a - this.parameters.box.height, e && (i[1] = -i[1])) : n > a && (i[0] = this.parameters.box.width - r * a, e && (i[0] = -i[0])), i }, SVG.extend(SVG.Element, { resize: function (e) { return (this.remember("_resizeHandler") || new t(this)).init(e || {}), this } }), SVG.Element.prototype.resize.defaults = { snapToAngle: .1, snapToGrid: 1, constraint: {}, saveAspectRatio: !1 } }).call(this) }(); !function (t, e) { void 0 === e && (e = {}); var i = e.insertAt; if (t && "undefined" != typeof document) { var a = document.head || document.getElementsByTagName("head")[0], s = document.createElement("style"); s.type = "text/css", "top" === i && a.firstChild ? a.insertBefore(s, a.firstChild) : a.appendChild(s), s.styleSheet ? s.styleSheet.cssText = t : s.appendChild(document.createTextNode(t)) } }('.apexcharts-canvas {\n  position: relative;\n  user-select: none;\n  /* cannot give overflow: hidden as it will crop tooltips which overflow outside chart area */\n}\n\n\n/* scrollbar is not visible by default for legend, hence forcing the visibility */\n.apexcharts-canvas ::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 6px;\n}\n\n.apexcharts-canvas ::-webkit-scrollbar-thumb {\n  border-radius: 4px;\n  background-color: rgba(0, 0, 0, .5);\n  box-shadow: 0 0 1px rgba(255, 255, 255, .5);\n  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, .5);\n}\n\n\n.apexcharts-inner {\n  position: relative;\n}\n\n.apexcharts-text tspan {\n  font-family: inherit;\n}\n\n.legend-mouseover-inactive {\n  transition: 0.15s ease all;\n  opacity: 0.20;\n}\n\n.apexcharts-series-collapsed {\n  opacity: 0;\n}\n\n.apexcharts-tooltip {\n  border-radius: 5px;\n  box-shadow: 2px 2px 6px -4px #999;\n  cursor: default;\n  font-size: 14px;\n  left: 62px;\n  opacity: 0;\n  pointer-events: none;\n  position: absolute;\n  top: 20px;\n  overflow: hidden;\n  white-space: nowrap;\n  z-index: 12;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-tooltip.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-tooltip.apexcharts-theme-light {\n  border: 1px solid #e3e3e3;\n  background: rgba(255, 255, 255, 0.96);\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark {\n  color: #fff;\n  background: rgba(30, 30, 30, 0.8);\n}\n\n.apexcharts-tooltip * {\n  font-family: inherit;\n}\n\n\n.apexcharts-tooltip-title {\n  padding: 6px;\n  font-size: 15px;\n  margin-bottom: 4px;\n}\n\n.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {\n  background: #ECEFF1;\n  border-bottom: 1px solid #ddd;\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {\n  background: rgba(0, 0, 0, 0.7);\n  border-bottom: 1px solid #333;\n}\n\n.apexcharts-tooltip-text-value,\n.apexcharts-tooltip-text-z-value {\n  display: inline-block;\n  font-weight: 600;\n  margin-left: 5px;\n}\n\n.apexcharts-tooltip-text-z-label:empty,\n.apexcharts-tooltip-text-z-value:empty {\n  display: none;\n}\n\n.apexcharts-tooltip-text-value,\n.apexcharts-tooltip-text-z-value {\n  font-weight: 600;\n}\n\n.apexcharts-tooltip-marker {\n  width: 12px;\n  height: 12px;\n  position: relative;\n  top: 0px;\n  margin-right: 10px;\n  border-radius: 50%;\n}\n\n.apexcharts-tooltip-series-group {\n  padding: 0 10px;\n  display: none;\n  text-align: left;\n  justify-content: left;\n  align-items: center;\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {\n  opacity: 1;\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active,\n.apexcharts-tooltip-series-group:last-child {\n  padding-bottom: 4px;\n}\n\n.apexcharts-tooltip-series-group-hidden {\n  opacity: 0;\n  height: 0;\n  line-height: 0;\n  padding: 0 !important;\n}\n\n.apexcharts-tooltip-y-group {\n  padding: 6px 0 5px;\n}\n\n.apexcharts-tooltip-candlestick {\n  padding: 4px 8px;\n}\n\n.apexcharts-tooltip-candlestick>div {\n  margin: 4px 0;\n}\n\n.apexcharts-tooltip-candlestick span.value {\n  font-weight: bold;\n}\n\n.apexcharts-tooltip-rangebar {\n  padding: 5px 8px;\n}\n\n.apexcharts-tooltip-rangebar .category {\n  font-weight: 600;\n  color: #777;\n}\n\n.apexcharts-tooltip-rangebar .series-name {\n  font-weight: bold;\n  display: block;\n  margin-bottom: 5px;\n}\n\n.apexcharts-xaxistooltip {\n  opacity: 0;\n  padding: 9px 10px;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #ECEFF1;\n  border: 1px solid #90A4AE;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-xaxistooltip.apexcharts-theme-dark {\n  background: rgba(0, 0, 0, 0.7);\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  color: #fff;\n}\n\n.apexcharts-xaxistooltip:after,\n.apexcharts-xaxistooltip:before {\n  left: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none;\n}\n\n.apexcharts-xaxistooltip:after {\n  border-color: rgba(236, 239, 241, 0);\n  border-width: 6px;\n  margin-left: -6px;\n}\n\n.apexcharts-xaxistooltip:before {\n  border-color: rgba(144, 164, 174, 0);\n  border-width: 7px;\n  margin-left: -7px;\n}\n\n.apexcharts-xaxistooltip-bottom:after,\n.apexcharts-xaxistooltip-bottom:before {\n  bottom: 100%;\n}\n\n.apexcharts-xaxistooltip-top:after,\n.apexcharts-xaxistooltip-top:before {\n  top: 100%;\n}\n\n.apexcharts-xaxistooltip-bottom:after {\n  border-bottom-color: #ECEFF1;\n}\n\n.apexcharts-xaxistooltip-bottom:before {\n  border-bottom-color: #90A4AE;\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after {\n  border-bottom-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {\n  border-bottom-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-top:after {\n  border-top-color: #ECEFF1\n}\n\n.apexcharts-xaxistooltip-top:before {\n  border-top-color: #90A4AE;\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after {\n  border-top-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {\n  border-top-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-yaxistooltip {\n  opacity: 0;\n  padding: 4px 10px;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #ECEFF1;\n  border: 1px solid #90A4AE;\n}\n\n.apexcharts-yaxistooltip.apexcharts-theme-dark {\n  background: rgba(0, 0, 0, 0.7);\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  color: #fff;\n}\n\n.apexcharts-yaxistooltip:after,\n.apexcharts-yaxistooltip:before {\n  top: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none;\n}\n\n.apexcharts-yaxistooltip:after {\n  border-color: rgba(236, 239, 241, 0);\n  border-width: 6px;\n  margin-top: -6px;\n}\n\n.apexcharts-yaxistooltip:before {\n  border-color: rgba(144, 164, 174, 0);\n  border-width: 7px;\n  margin-top: -7px;\n}\n\n.apexcharts-yaxistooltip-left:after,\n.apexcharts-yaxistooltip-left:before {\n  left: 100%;\n}\n\n.apexcharts-yaxistooltip-right:after,\n.apexcharts-yaxistooltip-right:before {\n  right: 100%;\n}\n\n.apexcharts-yaxistooltip-left:after {\n  border-left-color: #ECEFF1;\n}\n\n.apexcharts-yaxistooltip-left:before {\n  border-left-color: #90A4AE;\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after {\n  border-left-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {\n  border-left-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-right:after {\n  border-right-color: #ECEFF1;\n}\n\n.apexcharts-yaxistooltip-right:before {\n  border-right-color: #90A4AE;\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after {\n  border-right-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {\n  border-right-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip.apexcharts-active {\n  opacity: 1;\n}\n\n.apexcharts-yaxistooltip-hidden {\n  display: none;\n}\n\n.apexcharts-xcrosshairs,\n.apexcharts-ycrosshairs {\n  pointer-events: none;\n  opacity: 0;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-xcrosshairs.apexcharts-active,\n.apexcharts-ycrosshairs.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-ycrosshairs-hidden {\n  opacity: 0;\n}\n\n.apexcharts-selection-rect {\n  cursor: move;\n}\n\n.svg_select_boundingRect, .svg_select_points_rot {\n  pointer-events: none;\n  opacity: 0;\n  visibility: hidden;\n}\n.apexcharts-selection-rect + g .svg_select_boundingRect,\n.apexcharts-selection-rect + g .svg_select_points_rot {\n  opacity: 0;\n  visibility: hidden;\n}\n\n.apexcharts-selection-rect + g .svg_select_points_l,\n.apexcharts-selection-rect + g .svg_select_points_r {\n  cursor: ew-resize;\n  opacity: 1;\n  visibility: visible;\n}\n\n.svg_select_points {\n  fill: #efefef;\n  stroke: #333;\n  rx: 2;\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-zoom {\n  cursor: crosshair\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-pan {\n  cursor: move\n}\n\n.apexcharts-zoom-icon,\n.apexcharts-zoomin-icon,\n.apexcharts-zoomout-icon,\n.apexcharts-reset-icon,\n.apexcharts-pan-icon,\n.apexcharts-selection-icon,\n.apexcharts-menu-icon,\n.apexcharts-toolbar-custom-icon {\n  cursor: pointer;\n  width: 20px;\n  height: 20px;\n  line-height: 24px;\n  color: #6E8192;\n  text-align: center;\n}\n\n.apexcharts-zoom-icon svg,\n.apexcharts-zoomin-icon svg,\n.apexcharts-zoomout-icon svg,\n.apexcharts-reset-icon svg,\n.apexcharts-menu-icon svg {\n  fill: #6E8192;\n}\n\n.apexcharts-selection-icon svg {\n  fill: #444;\n  transform: scale(0.76)\n}\n\n.apexcharts-theme-dark .apexcharts-zoom-icon svg,\n.apexcharts-theme-dark .apexcharts-zoomin-icon svg,\n.apexcharts-theme-dark .apexcharts-zoomout-icon svg,\n.apexcharts-theme-dark .apexcharts-reset-icon svg,\n.apexcharts-theme-dark .apexcharts-pan-icon svg,\n.apexcharts-theme-dark .apexcharts-selection-icon svg,\n.apexcharts-theme-dark .apexcharts-menu-icon svg,\n.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg {\n  fill: #f3f4f5;\n}\n\n.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg,\n.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,\n.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg {\n  fill: #008FFB;\n}\n\n.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,\n.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,\n.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,\n.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg,\n.apexcharts-theme-light .apexcharts-reset-icon:hover svg,\n.apexcharts-theme-light .apexcharts-menu-icon:hover svg {\n  fill: #333;\n}\n\n.apexcharts-selection-icon,\n.apexcharts-menu-icon {\n  position: relative;\n}\n\n.apexcharts-reset-icon {\n  margin-left: 5px;\n}\n\n.apexcharts-zoom-icon,\n.apexcharts-reset-icon,\n.apexcharts-menu-icon {\n  transform: scale(0.85);\n}\n\n.apexcharts-zoomin-icon,\n.apexcharts-zoomout-icon {\n  transform: scale(0.7)\n}\n\n.apexcharts-zoomout-icon {\n  margin-right: 3px;\n}\n\n.apexcharts-pan-icon {\n  transform: scale(0.62);\n  position: relative;\n  left: 1px;\n  top: 0px;\n}\n\n.apexcharts-pan-icon svg {\n  fill: #fff;\n  stroke: #6E8192;\n  stroke-width: 2;\n}\n\n.apexcharts-pan-icon.apexcharts-selected svg {\n  stroke: #008FFB;\n}\n\n.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {\n  stroke: #333;\n}\n\n.apexcharts-toolbar {\n  position: absolute;\n  z-index: 11;\n  max-width: 176px;\n  text-align: right;\n  border-radius: 3px;\n  padding: 0px 6px 2px 6px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.apexcharts-menu {\n  background: #fff;\n  position: absolute;\n  top: 100%;\n  border: 1px solid #ddd;\n  border-radius: 3px;\n  padding: 3px;\n  right: 10px;\n  opacity: 0;\n  min-width: 110px;\n  transition: 0.15s ease all;\n  pointer-events: none;\n}\n\n.apexcharts-menu.apexcharts-menu-open {\n  opacity: 1;\n  pointer-events: all;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-menu-item {\n  padding: 6px 7px;\n  font-size: 12px;\n  cursor: pointer;\n}\n\n.apexcharts-theme-light .apexcharts-menu-item:hover {\n  background: #eee;\n}\n\n.apexcharts-theme-dark .apexcharts-menu {\n  background: rgba(0, 0, 0, 0.7);\n  color: #fff;\n}\n\n@media screen and (min-width: 768px) {\n  .apexcharts-canvas:hover .apexcharts-toolbar {\n    opacity: 1;\n  }\n}\n\n.apexcharts-datalabel.apexcharts-element-hidden {\n  opacity: 0;\n}\n\n.apexcharts-pie-label,\n.apexcharts-datalabels,\n.apexcharts-datalabel,\n.apexcharts-datalabel-label,\n.apexcharts-datalabel-value {\n  cursor: default;\n  pointer-events: none;\n}\n\n.apexcharts-pie-label-delay {\n  opacity: 0;\n  animation-name: opaque;\n  animation-duration: 0.3s;\n  animation-fill-mode: forwards;\n  animation-timing-function: ease;\n}\n\n.apexcharts-canvas .apexcharts-element-hidden {\n  opacity: 0;\n}\n\n.apexcharts-hide .apexcharts-series-points {\n  opacity: 0;\n}\n\n.apexcharts-gridline,\n.apexcharts-annotation-rect,\n.apexcharts-tooltip .apexcharts-marker,\n.apexcharts-area-series .apexcharts-area,\n.apexcharts-line,\n.apexcharts-zoom-rect,\n.apexcharts-toolbar svg,\n.apexcharts-area-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,\n.apexcharts-line-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,\n.apexcharts-radar-series path,\n.apexcharts-radar-series polygon {\n  pointer-events: none;\n}\n\n\n/* markers */\n\n.apexcharts-marker {\n  transition: 0.15s ease all;\n}\n\n@keyframes opaque {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n\n/* Resize generated styles */\n\n@keyframes resizeanim {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 0;\n  }\n}\n\n.resize-triggers {\n  animation: 1ms resizeanim;\n  visibility: hidden;\n  opacity: 0;\n}\n\n.resize-triggers,\n.resize-triggers>div,\n.contract-trigger:before {\n  content: " ";\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n}\n\n.resize-triggers>div {\n  background: #eee;\n  overflow: auto;\n}\n\n.contract-trigger:before {\n  width: 200%;\n  height: 200%;\n}'), function () { function t(t) { var e = t.__resizeTriggers__, i = e.firstElementChild, a = e.lastElementChild, s = i ? i.firstElementChild : null; a && (a.scrollLeft = a.scrollWidth, a.scrollTop = a.scrollHeight), s && (s.style.width = i.offsetWidth + 1 + "px", s.style.height = i.offsetHeight + 1 + "px"), i && (i.scrollLeft = i.scrollWidth, i.scrollTop = i.scrollHeight) } function e(e) { var i = this; t(this), this.__resizeRAF__ && r(this.__resizeRAF__), this.__resizeRAF__ = s((function () { (function (t) { return t.offsetWidth != t.__resizeLast__.width || t.offsetHeight != t.__resizeLast__.height })(i) && (i.__resizeLast__.width = i.offsetWidth, i.__resizeLast__.height = i.offsetHeight, i.__resizeListeners__.forEach((function (t) { t.call(e) }))) })) } var i, a, s = (i = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || function (t) { return window.setTimeout(t, 20) }, function (t) { return i(t) }), r = (a = window.cancelAnimationFrame || window.mozCancelAnimationFrame || window.webkitCancelAnimationFrame || window.clearTimeout, function (t) { return a(t) }), n = !1, o = "animationstart", l = "Webkit Moz O ms".split(" "), h = "webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "), c = document.createElement("fakeelement"); if (void 0 !== c.style.animationName && (n = !0), !1 === n) for (var d = 0; d < l.length; d++)if (void 0 !== c.style[l[d] + "AnimationName"]) { o = h[d]; break } window.addResizeListener = function (i, a) { i.__resizeTriggers__ || ("static" == getComputedStyle(i).position && (i.style.position = "relative"), i.__resizeLast__ = {}, i.__resizeListeners__ = [], (i.__resizeTriggers__ = document.createElement("div")).className = "resize-triggers", i.__resizeTriggers__.innerHTML = '<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>', i.appendChild(i.__resizeTriggers__), t(i), i.addEventListener("scroll", e, !0), o && i.__resizeTriggers__.addEventListener(o, (function (e) { "resizeanim" == e.animationName && t(i) }))), i.__resizeListeners__.push(a) }, window.removeResizeListener = function (t, i) { t && (t.__resizeListeners__.splice(t.__resizeListeners__.indexOf(i), 1), t.__resizeListeners__.length || (t.removeEventListener("scroll", e), t.__resizeTriggers__.parentNode && (t.__resizeTriggers__ = !t.removeChild(t.__resizeTriggers__)))) } }(), window.Apex = {}; var Et = function () { function t(i) { e(this, t), this.ctx = i, this.w = i.w } return a(t, [{ key: "initModules", value: function () { this.ctx.publicMethods = ["updateOptions", "updateSeries", "appendData", "appendSeries", "toggleSeries", "showSeries", "hideSeries", "setLocale", "resetSeries", "zoomX", "toggleDataPointSelection", "dataURI", "addXaxisAnnotation", "addYaxisAnnotation", "addPointAnnotation", "clearAnnotations", "removeAnnotation", "paper", "destroy"], this.ctx.eventList = ["click", "mousedown", "mousemove", "touchstart", "touchmove", "mouseup", "touchend"], this.ctx.animations = new x(this.ctx), this.ctx.axes = new K(this.ctx), this.ctx.core = new It(this.ctx.el, this.ctx), this.ctx.config = new N({}), this.ctx.data = new B(this.ctx), this.ctx.grid = new U(this.ctx), this.ctx.graphics = new b(this.ctx), this.ctx.coreUtils = new y(this.ctx), this.ctx.crosshairs = new tt(this.ctx), this.ctx.events = new J(this.ctx), this.ctx.exports = new _(this.ctx), this.ctx.localization = new Q(this.ctx), this.ctx.options = new L, this.ctx.responsive = new et(this.ctx), this.ctx.series = new X(this.ctx), this.ctx.theme = new it(this.ctx), this.ctx.formatters = new V(this.ctx), this.ctx.titleSubtitle = new at(this.ctx), this.ctx.legend = new ct(this.ctx), this.ctx.toolbar = new dt(this.ctx), this.ctx.dimensions = new lt(this.ctx), this.ctx.updateHelpers = new Mt(this.ctx), this.ctx.zoomPanSelection = new gt(this.ctx), this.ctx.w.globals.tooltip = new vt(this.ctx) } }]), t }(), Xt = function () { function t(i) { e(this, t), this.ctx = i, this.w = i.w } return a(t, [{ key: "clear", value: function () { this.ctx.zoomPanSelection && this.ctx.zoomPanSelection.destroy(), this.ctx.toolbar && this.ctx.toolbar.destroy(), this.ctx.animations = null, this.ctx.axes = null, this.ctx.annotations = null, this.ctx.core = null, this.ctx.data = null, this.ctx.grid = null, this.ctx.series = null, this.ctx.responsive = null, this.ctx.theme = null, this.ctx.formatters = null, this.ctx.titleSubtitle = null, this.ctx.legend = null, this.ctx.dimensions = null, this.ctx.options = null, this.ctx.crosshairs = null, this.ctx.zoomPanSelection = null, this.ctx.updateHelpers = null, this.ctx.toolbar = null, this.ctx.localization = null, this.ctx.w.globals.tooltip = null, this.clearDomElements() } }, { key: "killSVG", value: function (t) { t.each((function (t, e) { this.removeClass("*"), this.off(), this.stop() }), !0), t.ungroup(), t.clear() } }, { key: "clearDomElements", value: function () { var t = this, e = this.w.globals.dom.Paper.node; e.parentNode && e.parentNode.parentNode && (e.parentNode.parentNode.style.minHeight = "unset"), this.ctx.eventList.forEach((function (e) { t.w.globals.dom.baseEl.removeEventListener(e, t.ctx.events.documentEvent) })); var i = this.w.globals.dom; if (null !== this.ctx.el) for (; this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild); this.killSVG(i.Paper), i.Paper.remove(), i.elWrap = null, i.elGraphical = null, i.elAnnotations = null, i.elLegendWrap = null, i.baseEl = null, i.elGridRect = null, i.elGridRectMask = null, i.elGridRectMarkerMask = null, i.elDefs = null } }]), t }(); return function () { function t(i, a) { e(this, t), this.opts = a, this.ctx = this, this.w = new W(a).init(), this.el = i, this.w.globals.cuid = f.randomId(), this.w.globals.chartID = this.w.config.chart.id ? this.w.config.chart.id : this.w.globals.cuid, new Et(this).initModules(), this.create = f.bind(this.create, this), this.windowResizeHandler = this._windowResize.bind(this) } return a(t, [{ key: "render", value: function () { var t = this; return new Promise((function (e, i) { if (null !== t.el) { void 0 === Apex._chartInstances && (Apex._chartInstances = []), t.w.config.chart.id && Apex._chartInstances.push({ id: t.w.globals.chartID, group: t.w.config.chart.group, chart: t }), t.setLocale(t.w.config.chart.defaultLocale); var a = t.w.config.chart.events.beforeMount; "function" == typeof a && a(t, t.w), t.events.fireEvent("beforeMount", [t, t.w]), window.addEventListener("resize", t.windowResizeHandler), window.addResizeListener(t.el.parentNode, t._parentResizeCallback.bind(t)); var s = t.create(t.w.config.series, {}); if (!s) return e(t); t.mount(s).then((function () { "function" == typeof t.w.config.chart.events.mounted && t.w.config.chart.events.mounted(t, t.w), t.events.fireEvent("mounted", [t, t.w]), e(s) })).catch((function (t) { i(t) })) } else i(new Error("Element not found")) })) } }, { key: "create", value: function (t, e) { var i = this.w; new Et(this).initModules(); var a = this.w.globals; (a.noData = !1, a.animationEnded = !1, this.responsive.checkResponsiveConfig(e), i.config.xaxis.convertedCatToNumeric) && new H(i.config).convertCatToNumericXaxis(i.config, this.ctx); if (null === this.el) return a.animationEnded = !0, null; if (this.core.setupElements(), 0 === a.svgWidth) return a.animationEnded = !0, null; var s = y.checkComboSeries(t); a.comboCharts = s.comboCharts, a.comboBarCount = s.comboBarCount; var r = t.every((function (t) { return t.data && 0 === t.data.length })); (0 === t.length || r) && this.series.handleNoData(), this.events.setupEventHandlers(), this.data.parseData(t), this.theme.init(), new z(this).setGlobalMarkerSize(), this.formatters.setLabelFormatters(), this.titleSubtitle.draw(), a.noData && a.collapsedSeries.length !== a.series.length && !i.config.legend.showForSingleSeries || this.legend.init(), this.series.hasAllSeriesEqualX(), a.axisCharts && (this.core.coreCalculations(), "category" !== i.config.xaxis.type && this.formatters.setLabelFormatters()), this.formatters.heatmapLabelFormatters(), this.dimensions.plotCoords(); var n = this.core.xySettings(); this.grid.createGridMask(); var o = this.core.plotChartType(t, n), l = new M(this); l.bringForward(), i.config.dataLabels.background.enabled && l.dataLabelsBackground(), this.core.shiftGraphPosition(); var h = { plot: { left: i.globals.translateX, top: i.globals.translateY, width: i.globals.gridWidth, height: i.globals.gridHeight } }; return { elGraph: o, xyRatios: n, elInner: i.globals.dom.elGraphical, dimensions: h } } }, { key: "mount", value: function () { var t = this, e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null, i = this, a = i.w; return new Promise((function (s, r) { if (null === i.el) return r(new Error("Not enough data to display or target element not found")); (null === e || a.globals.allSeriesCollapsed) && i.series.handleNoData(), i.axes.drawAxis(a.config.chart.type, e.xyRatios), i.grid = new U(i); var n = i.grid.drawGrid(); i.annotations = new P(i), i.annotations.drawImageAnnos(), i.annotations.drawTextAnnos(), "back" === a.config.grid.position && n && a.globals.dom.elGraphical.add(n.el); var o = new j(t.ctx), l = new $(t.ctx); if (null !== n && (o.xAxisLabelCorrections(n.xAxisTickWidth), l.setYAxisTextAlignments()), "back" === a.config.annotations.position && (a.globals.dom.Paper.add(a.globals.dom.elAnnotations), i.annotations.drawAxesAnnotations()), Array.isArray(e.elGraph)) for (var h = 0; h < e.elGraph.length; h++)a.globals.dom.elGraphical.add(e.elGraph[h]); else a.globals.dom.elGraphical.add(e.elGraph); if ("front" === a.config.grid.position && n && a.globals.dom.elGraphical.add(n.el), "front" === a.config.xaxis.crosshairs.position && i.crosshairs.drawXCrosshairs(), "front" === a.config.yaxis[0].crosshairs.position && i.crosshairs.drawYCrosshairs(), "front" === a.config.annotations.position && (a.globals.dom.Paper.add(a.globals.dom.elAnnotations), i.annotations.drawAxesAnnotations()), !a.globals.noData) { if (a.config.tooltip.enabled && !a.globals.noData && i.w.globals.tooltip.drawTooltip(e.xyRatios), a.globals.axisCharts && (a.globals.isXNumeric || a.config.xaxis.convertedCatToNumeric)) (a.config.chart.zoom.enabled || a.config.chart.selection && a.config.chart.selection.enabled || a.config.chart.pan && a.config.chart.pan.enabled) && i.zoomPanSelection.init({ xyRatios: e.xyRatios }); else { var c = a.config.chart.toolbar.tools;["zoom", "zoomin", "zoomout", "selection", "pan", "reset"].forEach((function (t) { c[t] = !1 })) } a.config.chart.toolbar.show && !a.globals.allSeriesCollapsed && i.toolbar.createToolbar() } a.globals.memory.methodsToExec.length > 0 && a.globals.memory.methodsToExec.forEach((function (t) { t.method(t.params, !1, t.context) })), a.globals.axisCharts || a.globals.noData || i.core.resizeNonAxisCharts(), s(i) })) } }, { key: "destroy", value: function () { window.removeEventListener("resize", this.windowResizeHandler), window.removeResizeListener(this.el.parentNode, this._parentResizeCallback.bind(this)); var t = this.w.config.chart.id; t && Apex._chartInstances.forEach((function (e, i) { e.id === t && Apex._chartInstances.splice(i, 1) })), new Xt(this.ctx).clear() } }, { key: "updateOptions", value: function (t) { var e = this, i = arguments.length > 1 && void 0 !== arguments[1] && arguments[1], a = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2], s = !(arguments.length > 3 && void 0 !== arguments[3]) || arguments[3], r = !(arguments.length > 4 && void 0 !== arguments[4]) || arguments[4], n = this.w; return n.globals.selection = void 0, t.series && (this.series.resetSeries(!1, !0, !1), t.series.length && t.series[0].data && (t.series = t.series.map((function (t, i) { return e.updateHelpers._extendSeries(t, i) }))), this.updateHelpers.revertDefaultAxisMinMax()), t.xaxis && (t = this.updateHelpers.forceXAxisUpdate(t)), t.yaxis && (t = this.updateHelpers.forceYAxisUpdate(t)), n.globals.collapsedSeriesIndices.length > 0 && this.series.clearPreviousPaths(), t.theme && (t = this.theme.updateThemeOptions(t)), this.updateHelpers._updateOptions(t, i, a, s, r) } }, { key: "updateSeries", value: function () { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [], e = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1], i = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2]; return this.series.resetSeries(!1), this.updateHelpers.revertDefaultAxisMinMax(), this.updateHelpers._updateSeries(t, e, i) } }, { key: "appendSeries", value: function (t) { var e = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1], i = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2], a = this.w.config.series.slice(); return a.push(t), this.series.resetSeries(!1), this.updateHelpers.revertDefaultAxisMinMax(), this.updateHelpers._updateSeries(a, e, i) } }, { key: "appendData", value: function (t) { var e = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1], i = this; i.w.globals.dataChanged = !0, i.series.getPreviousPaths(); for (var a = i.w.config.series.slice(), s = 0; s < a.length; s++)if (null !== t[s] && void 0 !== t[s]) for (var r = 0; r < t[s].data.length; r++)a[s].data.push(t[s].data[r]); return i.w.config.series = a, e && (i.w.globals.initialSeries = f.clone(i.w.config.series)), this.update({ series: this.w.config.series }) } }, { key: "update", value: function (t) { var e = this; return new Promise((function (i, a) { new Xt(e.ctx).clear(); var s = e.create(e.w.config.series, t); if (!s) return i(e); e.mount(s).then((function () { "function" == typeof e.w.config.chart.events.updated && e.w.config.chart.events.updated(e, e.w), e.events.fireEvent("updated", [e, e.w]), e.w.globals.isDirty = !0, i(e) })).catch((function (t) { a(t) })) })) } }, { key: "getSyncedCharts", value: function () { var t = this.getGroupedCharts(), e = [this]; return t.length && (e = [], t.forEach((function (t) { e.push(t) }))), e } }, { key: "getGroupedCharts", value: function () { var t = this; return Apex._chartInstances.filter((function (t) { if (t.group) return !0 })).map((function (e) { return t.w.config.chart.group === e.group ? e.chart : t })) } }, { key: "toggleSeries", value: function (t) { return this.series.toggleSeries(t) } }, { key: "showSeries", value: function (t) { this.series.showSeries(t) } }, { key: "hideSeries", value: function (t) { this.series.hideSeries(t) } }, { key: "resetSeries", value: function () { var t = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0], e = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1]; this.series.resetSeries(t, e) } }, { key: "addEventListener", value: function (t, e) { this.events.addEventListener(t, e) } }, { key: "removeEventListener", value: function (t, e) { this.events.removeEventListener(t, e) } }, { key: "addXaxisAnnotation", value: function (t) { var e = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1], i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : void 0, a = this; i && (a = i), a.annotations.addXaxisAnnotationExternal(t, e, a) } }, { key: "addYaxisAnnotation", value: function (t) { var e = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1], i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : void 0, a = this; i && (a = i), a.annotations.addYaxisAnnotationExternal(t, e, a) } }, { key: "addPointAnnotation", value: function (t) { var e = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1], i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : void 0, a = this; i && (a = i), a.annotations.addPointAnnotationExternal(t, e, a) } }, { key: "clearAnnotations", value: function () { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : void 0, e = this; t && (e = t), e.annotations.clearAnnotations(e) } }, { key: "removeAnnotation", value: function (t) { var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : void 0, i = this; e && (i = e), i.annotations.removeAnnotation(i, t) } }, { key: "getChartArea", value: function () { return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner") } }, { key: "getSeriesTotalXRange", value: function (t, e) { return this.coreUtils.getSeriesTotalsXRange(t, e) } }, { key: "getHighestValueInSeries", value: function () { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0, e = new Z(this.ctx); return e.getMinYMaxY(t).highestY } }, { key: "getLowestValueInSeries", value: function () { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0, e = new Z(this.ctx); return e.getMinYMaxY(t).lowestY } }, { key: "getSeriesTotal", value: function () { return this.w.globals.seriesTotals } }, { key: "toggleDataPointSelection", value: function (t, e) { return this.updateHelpers.toggleDataPointSelection(t, e) } }, { key: "zoomX", value: function (t, e) { this.ctx.toolbar.zoomUpdateOptions(t, e) } }, { key: "setLocale", value: function (t) { this.localization.setCurrentLocaleValues(t) } }, { key: "dataURI", value: function () { return new _(this.ctx).dataURI() } }, { key: "paper", value: function () { return this.w.globals.dom.Paper } }, { key: "_parentResizeCallback", value: function () { !this.w.globals.noData && this.w.globals.animationEnded && this.w.config.chart.redrawOnParentResize && this._windowResize() } }, { key: "_windowResize", value: function () { var t = this; clearTimeout(this.w.globals.resizeTimer), this.w.globals.resizeTimer = window.setTimeout((function () { t.w.globals.resized = !0, t.w.globals.dataChanged = !1, t.ctx.update({ series: t.w.config.series }) }), 150) } }], [{ key: "getChartByID", value: function (t) { var e = Apex._chartInstances.filter((function (e) { return e.id === t }))[0]; return e && e.chart } }, { key: "initOnLoad", value: function () { for (var e = document.querySelectorAll("[data-apexcharts]"), i = 0; i < e.length; i++) { new t(e[i], JSON.parse(e[i].getAttribute("data-options"))).render() } } }, { key: "exec", value: function (t, e) { var i = this.getChartByID(t); if (i) { i.w.globals.isExecCalled = !0; var a = null; if (-1 !== i.publicMethods.indexOf(e)) { for (var s = arguments.length, r = new Array(s > 2 ? s - 2 : 0), n = 2; n < s; n++)r[n - 2] = arguments[n]; a = i[e].apply(i, r) } return a } } }, { key: "merge", value: function (t, e) { return f.extend(t, e) } }]), t }()
}));
(function () {/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
    'use strict'; var l; function aa(a) { var b = 0; return function () { return b < a.length ? { done: !1, value: a[b++] } : { done: !0 } } } function n(a) { var b = "undefined" != typeof Symbol && Symbol.iterator && a[Symbol.iterator]; return b ? b.call(a) : { next: aa(a) } } function ba(a) { if (!(a instanceof Array)) { a = n(a); for (var b, c = []; !(b = a.next()).done;)c.push(b.value); a = c } return a } function ca(a, b, c) { a instanceof String && (a = String(a)); for (var d = a.length, e = 0; e < d; e++) { var f = a[e]; if (b.call(c, f, e, a)) return { N: e, T: f } } return { N: -1, T: void 0 } }
    var da = "function" == typeof Object.defineProperties ? Object.defineProperty : function (a, b, c) { if (a == Array.prototype || a == Object.prototype) return a; a[b] = c.value; return a }; function ea(a) { a = ["object" == typeof globalThis && globalThis, a, "object" == typeof window && window, "object" == typeof self && self, "object" == typeof global && global]; for (var b = 0; b < a.length; ++b) { var c = a[b]; if (c && c.Math == Math) return c } throw Error("Cannot find global object"); } var fa = ea(this);
    function q(a, b) { if (b) a: { var c = fa; a = a.split("."); for (var d = 0; d < a.length - 1; d++) { var e = a[d]; if (!(e in c)) break a; c = c[e] } a = a[a.length - 1]; d = c[a]; b = b(d); b != d && null != b && da(c, a, { configurable: !0, writable: !0, value: b }) } } q("Array.prototype.findIndex", function (a) { return a ? a : function (b, c) { return ca(this, b, c).N } }); q("Array.prototype.find", function (a) { return a ? a : function (b, c) { return ca(this, b, c).T } });
    function r(a, b, c) { if (null == a) throw new TypeError("The 'this' value for String.prototype." + c + " must not be null or undefined"); if (b instanceof RegExp) throw new TypeError("First argument to String.prototype." + c + " must not be a regular expression"); return a + "" } q("String.prototype.endsWith", function (a) { return a ? a : function (b, c) { var d = r(this, b, "endsWith"); void 0 === c && (c = d.length); c = Math.max(0, Math.min(c | 0, d.length)); for (var e = b.length; 0 < e && 0 < c;)if (d[--c] != b[--e]) return !1; return 0 >= e } });
    q("String.prototype.startsWith", function (a) { return a ? a : function (b, c) { var d = r(this, b, "startsWith"), e = d.length, f = b.length; c = Math.max(0, Math.min(c | 0, d.length)); for (var g = 0; g < f && c < e;)if (d[c++] != b[g++]) return !1; return g >= f } }); q("String.prototype.repeat", function (a) { return a ? a : function (b) { var c = r(this, null, "repeat"); if (0 > b || 1342177279 < b) throw new RangeError("Invalid count value"); b |= 0; for (var d = ""; b;)if (b & 1 && (d += c), b >>>= 1) c += c; return d } });
    q("String.prototype.trimLeft", function (a) { function b() { return this.replace(/^[\s\xa0]+/, "") } return a || b }); q("String.prototype.trimStart", function (a) { return a || String.prototype.trimLeft });
    q("Promise", function (a) {
        function b(g) { this.b = 0; this.c = void 0; this.a = []; var h = this.g(); try { g(h.resolve, h.reject) } catch (k) { h.reject(k) } } function c() { this.a = null } function d(g) { return g instanceof b ? g : new b(function (h) { h(g) }) } if (a) return a; c.prototype.b = function (g) { if (null == this.a) { this.a = []; var h = this; this.c(function () { h.h() }) } this.a.push(g) }; var e = fa.setTimeout; c.prototype.c = function (g) { e(g, 0) }; c.prototype.h = function () {
            for (; this.a && this.a.length;) {
                var g = this.a; this.a = []; for (var h = 0; h < g.length; ++h) {
                    var k =
                        g[h]; g[h] = null; try { k() } catch (m) { this.g(m) }
                }
            } this.a = null
        }; c.prototype.g = function (g) { this.c(function () { throw g; }) }; b.prototype.g = function () { function g(m) { return function (p) { k || (k = !0, m.call(h, p)) } } var h = this, k = !1; return { resolve: g(this.B), reject: g(this.h) } }; b.prototype.B = function (g) { if (g === this) this.h(new TypeError("A Promise cannot resolve to itself")); else if (g instanceof b) this.H(g); else { a: switch (typeof g) { case "object": var h = null != g; break a; case "function": h = !0; break a; default: h = !1 }h ? this.A(g) : this.i(g) } };
        b.prototype.A = function (g) { var h = void 0; try { h = g.then } catch (k) { this.h(k); return } "function" == typeof h ? this.F(h, g) : this.i(g) }; b.prototype.h = function (g) { this.j(2, g) }; b.prototype.i = function (g) { this.j(1, g) }; b.prototype.j = function (g, h) { if (0 != this.b) throw Error("Cannot settle(" + g + ", " + h + "): Promise already settled in state" + this.b); this.b = g; this.c = h; this.m() }; b.prototype.m = function () { if (null != this.a) { for (var g = 0; g < this.a.length; ++g)f.b(this.a[g]); this.a = null } }; var f = new c; b.prototype.H = function (g) {
            var h = this.g();
            g.G(h.resolve, h.reject)
        }; b.prototype.F = function (g, h) { var k = this.g(); try { g.call(h, k.resolve, k.reject) } catch (m) { k.reject(m) } }; b.prototype.then = function (g, h) { function k(A, I) { return "function" == typeof A ? function (wa) { try { m(A(wa)) } catch (xa) { p(xa) } } : I } var m, p, x = new b(function (A, I) { m = A; p = I }); this.G(k(g, m), k(h, p)); return x }; b.prototype.catch = function (g) { return this.then(void 0, g) }; b.prototype.G = function (g, h) {
            function k() {
                switch (m.b) {
                    case 1: g(m.c); break; case 2: h(m.c); break; default: throw Error("Unexpected state: " +
                        m.b);
                }
            } var m = this; null == this.a ? f.b(k) : this.a.push(k)
        }; b.resolve = d; b.reject = function (g) { return new b(function (h, k) { k(g) }) }; b.race = function (g) { return new b(function (h, k) { for (var m = n(g), p = m.next(); !p.done; p = m.next())d(p.value).G(h, k) }) }; b.all = function (g) { var h = n(g), k = h.next(); return k.done ? d([]) : new b(function (m, p) { function x(wa) { return function (xa) { A[wa] = xa; I--; 0 == I && m(A) } } var A = [], I = 0; do A.push(void 0), I++ , d(k.value).G(x(A.length - 1), p), k = h.next(); while (!k.done) }) }; return b
    });
    q("Object.is", function (a) { return a ? a : function (b, c) { return b === c ? 0 !== b || 1 / b === 1 / c : b !== b && c !== c } }); q("Array.prototype.includes", function (a) { return a ? a : function (b, c) { var d = this; d instanceof String && (d = String(d)); var e = d.length; c = c || 0; for (0 > c && (c = Math.max(c + e, 0)); c < e; c++) { var f = d[c]; if (f === b || Object.is(f, b)) return !0 } return !1 } }); q("String.prototype.includes", function (a) { return a ? a : function (b, c) { return -1 !== r(this, b, "includes").indexOf(b, c || 0) } });
    q("Array.prototype.copyWithin", function (a) { function b(c) { c = Number(c); return Infinity === c || -Infinity === c ? c : c | 0 } return a ? a : function (c, d, e) { var f = this.length; c = b(c); d = b(d); e = void 0 === e ? f : b(e); c = 0 > c ? Math.max(f + c, 0) : Math.min(c, f); d = 0 > d ? Math.max(f + d, 0) : Math.min(d, f); e = 0 > e ? Math.max(f + e, 0) : Math.min(e, f); if (c < d) for (; d < e;)d in this ? this[c++] = this[d++] : (delete this[c++], d++); else for (e = Math.min(e, f + d - c), c += e - d; e > d;)--e in this ? this[--c] = this[e] : delete this[--c]; return this } });
    q("Symbol", function (a) { function b(e) { if (this instanceof b) throw new TypeError("Symbol is not a constructor"); return new c("jscomp_symbol_" + (e || "") + "_" + d++, e) } function c(e, f) { this.a = e; da(this, "description", { configurable: !0, writable: !0, value: f }) } if (a) return a; c.prototype.toString = function () { return this.a }; var d = 0; return b });
    q("Symbol.iterator", function (a) { if (a) return a; a = Symbol("Symbol.iterator"); for (var b = "Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "), c = 0; c < b.length; c++) { var d = fa[b[c]]; "function" === typeof d && "function" != typeof d.prototype[a] && da(d.prototype, a, { configurable: !0, writable: !0, value: function () { return ha(aa(this)) } }) } return a }); q("Symbol.asyncIterator", function (a) { return a ? a : Symbol("Symbol.asyncIterator") });
    function ha(a) { a = { next: a }; a[Symbol.iterator] = function () { return this }; return a } function ia(a, b) { a instanceof String && (a += ""); var c = 0, d = { next: function () { if (c < a.length) { var e = c++; return { value: b(e, a[e]), done: !1 } } d.next = function () { return { done: !0, value: void 0 } }; return d.next() } }; d[Symbol.iterator] = function () { return d }; return d } q("Array.prototype.entries", function (a) { return a ? a : function () { return ia(this, function (b, c) { return [b, c] }) } });
    q("Array.prototype.fill", function (a) { return a ? a : function (b, c, d) { var e = this.length || 0; 0 > c && (c = Math.max(0, e + c)); if (null == d || d > e) d = e; d = Number(d); 0 > d && (d = Math.max(0, e + d)); for (c = Number(c || 0); c < d; c++)this[c] = b; return this } }); q("Array.prototype.flat", function (a) { return a ? a : function (b) { b = void 0 === b ? 1 : b; for (var c = [], d = 0; d < this.length; d++) { var e = this[d]; Array.isArray(e) && 0 < b ? (e = Array.prototype.flat.call(e, b - 1), c.push.apply(c, e)) : c.push(e) } return c } });
    q("Array.prototype.flatMap", function (a) { return a ? a : function (b, c) { for (var d = [], e = 0; e < this.length; e++) { var f = b.call(c, this[e], e, this); Array.isArray(f) ? d.push.apply(d, f) : d.push(f) } return d } });
    q("Array.from", function (a) { return a ? a : function (b, c, d) { c = null != c ? c : function (h) { return h }; var e = [], f = "undefined" != typeof Symbol && Symbol.iterator && b[Symbol.iterator]; if ("function" == typeof f) { b = f.call(b); for (var g = 0; !(f = b.next()).done;)e.push(c.call(d, f.value, g++)) } else for (f = b.length, g = 0; g < f; g++)e.push(c.call(d, b[g], g)); return e } }); q("Array.prototype.keys", function (a) { return a ? a : function () { return ia(this, function (b) { return b }) } }); q("Array.of", function (a) { return a ? a : function (b) { return Array.from(arguments) } });
    q("Array.prototype.values", function (a) { return a ? a : function () { return ia(this, function (b, c) { return c }) } }); var ja; if ("function" == typeof Object.setPrototypeOf) ja = Object.setPrototypeOf; else { var ka; a: { var la = { X: !0 }, ma = {}; try { ma.__proto__ = la; ka = ma.X; break a } catch (a) { } ka = !1 } ja = ka ? function (a, b) { a.__proto__ = b; if (a.__proto__ !== b) throw new TypeError(a + " is not extensible"); return a } : null } var na = ja; q("globalThis", function (a) { return a || fa }); function t(a, b) { return Object.prototype.hasOwnProperty.call(a, b) }
    q("WeakMap", function (a) {
        function b(k) { this.a = (h += Math.random() + 1).toString(); if (k) { k = n(k); for (var m; !(m = k.next()).done;)m = m.value, this.set(m[0], m[1]) } } function c() { } function d(k) { var m = typeof k; return "object" === m && null !== k || "function" === m } function e(k) { if (!t(k, g)) { var m = new c; da(k, g, { value: m }) } } function f(k) { var m = Object[k]; m && (Object[k] = function (p) { if (p instanceof c) return p; Object.isExtensible(p) && e(p); return m(p) }) } if (function () {
            if (!a || !Object.seal) return !1; try {
                var k = Object.seal({}), m = Object.seal({}),
                p = new a([[k, 2], [m, 3]]); if (2 != p.get(k) || 3 != p.get(m)) return !1; p.delete(k); p.set(m, 4); return !p.has(k) && 4 == p.get(m)
            } catch (x) { return !1 }
        }()) return a; var g = "$jscomp_hidden_" + Math.random(); f("freeze"); f("preventExtensions"); f("seal"); var h = 0; b.prototype.set = function (k, m) { if (!d(k)) throw Error("Invalid WeakMap key"); e(k); if (!t(k, g)) throw Error("WeakMap key fail: " + k); k[g][this.a] = m; return this }; b.prototype.get = function (k) { return d(k) && t(k, g) ? k[g][this.a] : void 0 }; b.prototype.has = function (k) {
            return d(k) && t(k,
                g) && t(k[g], this.a)
        }; b.prototype.delete = function (k) { return d(k) && t(k, g) && t(k[g], this.a) ? delete k[g][this.a] : !1 }; return b
    });
    q("Map", function (a) {
        function b() { var h = {}; return h.s = h.next = h.head = h } function c(h, k) { var m = h.a; return ha(function () { if (m) { for (; m.head != h.a;)m = m.s; for (; m.next != m.head;)return m = m.next, { done: !1, value: k(m) }; m = null } return { done: !0, value: void 0 } }) } function d(h, k) {
            var m = k && typeof k; "object" == m || "function" == m ? f.has(k) ? m = f.get(k) : (m = "" + ++g, f.set(k, m)) : m = "p_" + k; var p = h.b[m]; if (p && t(h.b, m)) for (h = 0; h < p.length; h++) { var x = p[h]; if (k !== k && x.key !== x.key || k === x.key) return { id: m, list: p, index: h, l: x } } return {
                id: m, list: p,
                index: -1, l: void 0
            }
        } function e(h) { this.b = {}; this.a = b(); this.size = 0; if (h) { h = n(h); for (var k; !(k = h.next()).done;)k = k.value, this.set(k[0], k[1]) } } if (function () {
            if (!a || "function" != typeof a || !a.prototype.entries || "function" != typeof Object.seal) return !1; try {
                var h = Object.seal({ x: 4 }), k = new a(n([[h, "s"]])); if ("s" != k.get(h) || 1 != k.size || k.get({ x: 4 }) || k.set({ x: 4 }, "t") != k || 2 != k.size) return !1; var m = k.entries(), p = m.next(); if (p.done || p.value[0] != h || "s" != p.value[1]) return !1; p = m.next(); return p.done || 4 != p.value[0].x ||
                    "t" != p.value[1] || !m.next().done ? !1 : !0
            } catch (x) { return !1 }
        }()) return a; var f = new WeakMap; e.prototype.set = function (h, k) { h = 0 === h ? 0 : h; var m = d(this, h); m.list || (m.list = this.b[m.id] = []); m.l ? m.l.value = k : (m.l = { next: this.a, s: this.a.s, head: this.a, key: h, value: k }, m.list.push(m.l), this.a.s.next = m.l, this.a.s = m.l, this.size++); return this }; e.prototype.delete = function (h) {
            h = d(this, h); return h.l && h.list ? (h.list.splice(h.index, 1), h.list.length || delete this.b[h.id], h.l.s.next = h.l.next, h.l.next.s = h.l.s, h.l.head = null, this.size-- ,
                !0) : !1
        }; e.prototype.clear = function () { this.b = {}; this.a = this.a.s = b(); this.size = 0 }; e.prototype.has = function (h) { return !!d(this, h).l }; e.prototype.get = function (h) { return (h = d(this, h).l) && h.value }; e.prototype.entries = function () { return c(this, function (h) { return [h.key, h.value] }) }; e.prototype.keys = function () { return c(this, function (h) { return h.key }) }; e.prototype.values = function () { return c(this, function (h) { return h.value }) }; e.prototype.forEach = function (h, k) {
            for (var m = this.entries(), p; !(p = m.next()).done;)p = p.value,
                h.call(k, p[1], p[0], this)
        }; e.prototype[Symbol.iterator] = e.prototype.entries; var g = 0; return e
    }); q("Math.acosh", function (a) { return a ? a : function (b) { b = Number(b); return Math.log(b + Math.sqrt(b * b - 1)) } }); q("Math.asinh", function (a) { return a ? a : function (b) { b = Number(b); if (0 === b) return b; var c = Math.log(Math.abs(b) + Math.sqrt(b * b + 1)); return 0 > b ? -c : c } });
    q("Math.log1p", function (a) { return a ? a : function (b) { b = Number(b); if (.25 > b && -.25 < b) { for (var c = b, d = 1, e = b, f = 0, g = 1; f != e;)c *= b, g *= -1, e = (f = e) + g * c / ++d; return e } return Math.log(1 + b) } }); q("Math.atanh", function (a) { if (a) return a; var b = Math.log1p; return function (c) { c = Number(c); return (b(c) - b(-c)) / 2 } }); q("Math.cbrt", function (a) { return a ? a : function (b) { if (0 === b) return b; b = Number(b); var c = Math.pow(Math.abs(b), 1 / 3); return 0 > b ? -c : c } });
    q("Math.clz32", function (a) { return a ? a : function (b) { b = Number(b) >>> 0; if (0 === b) return 32; var c = 0; 0 === (b & 4294901760) && (b <<= 16, c += 16); 0 === (b & 4278190080) && (b <<= 8, c += 8); 0 === (b & 4026531840) && (b <<= 4, c += 4); 0 === (b & 3221225472) && (b <<= 2, c += 2); 0 === (b & 2147483648) && c++; return c } }); q("Math.cosh", function (a) { if (a) return a; var b = Math.exp; return function (c) { c = Number(c); return (b(c) + b(-c)) / 2 } });
    q("Math.expm1", function (a) { return a ? a : function (b) { b = Number(b); if (.25 > b && -.25 < b) { for (var c = b, d = 1, e = b, f = 0; f != e;)c *= b / ++d, e = (f = e) + c; return e } return Math.exp(b) - 1 } }); q("Math.fround", function (a) { if (a) return a; if ("function" !== typeof Float32Array) return function (c) { return c }; var b = new Float32Array(1); return function (c) { b[0] = c; return b[0] } });
    q("Math.hypot", function (a) { return a ? a : function (b) { if (2 > arguments.length) return arguments.length ? Math.abs(arguments[0]) : 0; var c, d, e; for (c = e = 0; c < arguments.length; c++)e = Math.max(e, Math.abs(arguments[c])); if (1E100 < e || 1E-100 > e) { if (!e) return e; for (c = d = 0; c < arguments.length; c++) { var f = Number(arguments[c]) / e; d += f * f } return Math.sqrt(d) * e } for (c = d = 0; c < arguments.length; c++)f = Number(arguments[c]), d += f * f; return Math.sqrt(d) } });
    q("Math.imul", function (a) { return a ? a : function (b, c) { b = Number(b); c = Number(c); var d = b & 65535, e = c & 65535; return d * e + ((b >>> 16 & 65535) * e + d * (c >>> 16 & 65535) << 16 >>> 0) | 0 } }); q("Math.log10", function (a) { return a ? a : function (b) { return Math.log(b) / Math.LN10 } }); q("Math.log2", function (a) { return a ? a : function (b) { return Math.log(b) / Math.LN2 } }); q("Math.sign", function (a) { return a ? a : function (b) { b = Number(b); return 0 === b || isNaN(b) ? b : 0 < b ? 1 : -1 } });
    q("Math.sinh", function (a) { if (a) return a; var b = Math.exp; return function (c) { c = Number(c); return 0 === c ? c : (b(c) - b(-c)) / 2 } }); q("Math.tanh", function (a) { return a ? a : function (b) { b = Number(b); if (0 === b) return b; var c = Math.exp(-2 * Math.abs(b)); c = (1 - c) / (1 + c); return 0 > b ? -c : c } }); q("Math.trunc", function (a) { return a ? a : function (b) { b = Number(b); if (isNaN(b) || Infinity === b || -Infinity === b || 0 === b) return b; var c = Math.floor(Math.abs(b)); return 0 > b ? -c : c } }); q("Number.EPSILON", function () { return Math.pow(2, -52) });
    q("Number.MAX_SAFE_INTEGER", function () { return 9007199254740991 }); q("Number.MIN_SAFE_INTEGER", function () { return -9007199254740991 }); q("Number.isFinite", function (a) { return a ? a : function (b) { return "number" !== typeof b ? !1 : !isNaN(b) && Infinity !== b && -Infinity !== b } }); q("Number.isInteger", function (a) { return a ? a : function (b) { return Number.isFinite(b) ? b === Math.floor(b) : !1 } }); q("Number.isNaN", function (a) { return a ? a : function (b) { return "number" === typeof b && isNaN(b) } });
    q("Number.isSafeInteger", function (a) { return a ? a : function (b) { return Number.isInteger(b) && Math.abs(b) <= Number.MAX_SAFE_INTEGER } }); q("Number.parseFloat", function (a) { return a || parseFloat }); q("Number.parseInt", function (a) { return a || parseInt }); var oa = "function" == typeof Object.assign ? Object.assign : function (a, b) { for (var c = 1; c < arguments.length; c++) { var d = arguments[c]; if (d) for (var e in d) t(d, e) && (a[e] = d[e]) } return a }; q("Object.assign", function (a) { return a || oa });
    q("Object.entries", function (a) { return a ? a : function (b) { var c = [], d; for (d in b) t(b, d) && c.push([d, b[d]]); return c } }); q("Object.fromEntries", function (a) { return a ? a : function (b) { var c = {}; if (!(Symbol.iterator in b)) throw new TypeError("" + b + " is not iterable"); b = b[Symbol.iterator].call(b); for (var d = b.next(); !d.done; d = b.next()) { d = d.value; if (Object(d) !== d) throw new TypeError("iterable for fromEntries should yield objects"); c[d[0]] = d[1] } return c } }); q("Reflect", function (a) { return a ? a : {} });
    q("Object.getOwnPropertySymbols", function (a) { return a ? a : function () { return [] } }); q("Reflect.ownKeys", function (a) { return a ? a : function (b) { var c = [], d = Object.getOwnPropertyNames(b); b = Object.getOwnPropertySymbols(b); for (var e = 0; e < d.length; e++)("jscomp_symbol_" == d[e].substring(0, 14) ? b : c).push(d[e]); return c.concat(b) } }); q("Object.getOwnPropertyDescriptors", function (a) { return a ? a : function (b) { for (var c = {}, d = Reflect.ownKeys(b), e = 0; e < d.length; e++)c[d[e]] = Object.getOwnPropertyDescriptor(b, d[e]); return c } });
    q("Object.setPrototypeOf", function (a) { return a || na }); q("Object.values", function (a) { return a ? a : function (b) { var c = [], d; for (d in b) t(b, d) && c.push(b[d]); return c } }); q("Promise.allSettled", function (a) { function b(d) { return { status: "fulfilled", value: d } } function c(d) { return { status: "rejected", reason: d } } return a ? a : function (d) { var e = this; d = Array.from(d, function (f) { return e.resolve(f).then(b, c) }); return e.all(d) } });
    q("Promise.prototype.finally", function (a) { return a ? a : function (b) { return this.then(function (c) { return Promise.resolve(b()).then(function () { return c }) }, function (c) { return Promise.resolve(b()).then(function () { throw c; }) }) } }); q("Reflect.apply", function (a) { if (a) return a; var b = Function.prototype.apply; return function (c, d, e) { return b.call(c, d, e) } });
    var pa = "function" == typeof Object.create ? Object.create : function (a) { function b() { } b.prototype = a; return new b }, qa = function () {
        function a() { function c() { } new c; Reflect.construct(c, [], function () { }); return new c instanceof c } if ("undefined" != typeof Reflect && Reflect.construct) { if (a()) return Reflect.construct; var b = Reflect.construct; return function (c, d, e) { c = b(c, d); e && Reflect.setPrototypeOf(c, e.prototype); return c } } return function (c, d, e) {
        void 0 === e && (e = c); e = pa(e.prototype || Object.prototype); return Function.prototype.apply.call(c,
            e, d) || e
        }
    }(); q("Reflect.construct", function () { return qa }); q("Reflect.defineProperty", function (a) { return a ? a : function (b, c, d) { try { Object.defineProperty(b, c, d); var e = Object.getOwnPropertyDescriptor(b, c); return e ? e.configurable === (d.configurable || !1) && e.enumerable === (d.enumerable || !1) && ("value" in e ? e.value === d.value && e.writable === (d.writable || !1) : e.get === d.get && e.set === d.set) : !1 } catch (f) { return !1 } } }); q("Reflect.deleteProperty", function (a) { return a ? a : function (b, c) { if (!t(b, c)) return !0; try { return delete b[c] } catch (d) { return !1 } } });
    q("Reflect.getOwnPropertyDescriptor", function (a) { return a || Object.getOwnPropertyDescriptor }); q("Reflect.getPrototypeOf", function (a) { return a || Object.getPrototypeOf }); function ra(a, b) { for (; a;) { var c = Reflect.getOwnPropertyDescriptor(a, b); if (c) return c; a = Reflect.getPrototypeOf(a) } } q("Reflect.get", function (a) { return a ? a : function (b, c, d) { if (2 >= arguments.length) return b[c]; var e = ra(b, c); if (e) return e.get ? e.get.call(d) : e.value } }); q("Reflect.has", function (a) { return a ? a : function (b, c) { return c in b } });
    q("Reflect.isExtensible", function (a) { return a ? a : "function" == typeof Object.isExtensible ? Object.isExtensible : function () { return !0 } }); q("Reflect.preventExtensions", function (a) { return a ? a : "function" != typeof Object.preventExtensions ? function () { return !1 } : function (b) { Object.preventExtensions(b); return !Object.isExtensible(b) } });
    q("Reflect.set", function (a) { return a ? a : function (b, c, d, e) { var f = ra(b, c); return f ? f.set ? (f.set.call(3 < arguments.length ? e : b, d), !0) : f.writable && !Object.isFrozen(b) ? (b[c] = d, !0) : !1 : Reflect.isExtensible(b) ? (b[c] = d, !0) : !1 } }); q("Reflect.setPrototypeOf", function (a) { return a ? a : na ? function (b, c) { try { return na(b, c), !0 } catch (d) { return !1 } } : null });
    q("Set", function (a) {
        function b(c) { this.a = new Map; if (c) { c = n(c); for (var d; !(d = c.next()).done;)this.add(d.value) } this.size = this.a.size } if (function () {
            if (!a || "function" != typeof a || !a.prototype.entries || "function" != typeof Object.seal) return !1; try {
                var c = Object.seal({ x: 4 }), d = new a(n([c])); if (!d.has(c) || 1 != d.size || d.add(c) != d || 1 != d.size || d.add({ x: 4 }) != d || 2 != d.size) return !1; var e = d.entries(), f = e.next(); if (f.done || f.value[0] != c || f.value[1] != c) return !1; f = e.next(); return f.done || f.value[0] == c || 4 != f.value[0].x ||
                    f.value[1] != f.value[0] ? !1 : e.next().done
            } catch (g) { return !1 }
        }()) return a; b.prototype.add = function (c) { c = 0 === c ? 0 : c; this.a.set(c, c); this.size = this.a.size; return this }; b.prototype.delete = function (c) { c = this.a.delete(c); this.size = this.a.size; return c }; b.prototype.clear = function () { this.a.clear(); this.size = 0 }; b.prototype.has = function (c) { return this.a.has(c) }; b.prototype.entries = function () { return this.a.entries() }; b.prototype.values = function () { return this.a.values() }; b.prototype.keys = b.prototype.values; b.prototype[Symbol.iterator] =
            b.prototype.values; b.prototype.forEach = function (c, d) { var e = this; this.a.forEach(function (f) { return c.call(d, f, f, e) }) }; return b
    }); q("String.prototype.codePointAt", function (a) { return a ? a : function (b) { var c = r(this, null, "codePointAt"), d = c.length; b = Number(b) || 0; if (0 <= b && b < d) { b |= 0; var e = c.charCodeAt(b); if (55296 > e || 56319 < e || b + 1 === d) return e; b = c.charCodeAt(b + 1); return 56320 > b || 57343 < b ? e : 1024 * (e - 55296) + b + 9216 } } });
    q("String.fromCodePoint", function (a) { return a ? a : function (b) { for (var c = "", d = 0; d < arguments.length; d++) { var e = Number(arguments[d]); if (0 > e || 1114111 < e || e !== Math.floor(e)) throw new RangeError("invalid_code_point " + e); 65535 >= e ? c += String.fromCharCode(e) : (e -= 65536, c += String.fromCharCode(e >>> 10 & 1023 | 55296), c += String.fromCharCode(e & 1023 | 56320)) } return c } });
    q("String.prototype.matchAll", function (a) { return a ? a : function (b) { if (b instanceof RegExp && !b.global) throw new TypeError("RegExp passed into String.prototype.matchAll() must have global tag."); var c = new RegExp(b, b instanceof RegExp ? void 0 : "g"), d = this, e = !1, f = { next: function () { var g = {}, h = c.lastIndex; if (e) return { value: void 0, done: !0 }; var k = c.exec(d); if (!k) return e = !0, { value: void 0, done: !0 }; c.lastIndex === h && (c.lastIndex += 1); g.value = k; g.done = !1; return g } }; f[Symbol.iterator] = function () { return f }; return f } });
    function sa(a, b) { a = void 0 !== a ? String(a) : " "; return 0 < b && a ? a.repeat(Math.ceil(b / a.length)).substring(0, b) : "" } q("String.prototype.padEnd", function (a) { return a ? a : function (b, c) { var d = r(this, null, "padStart"); return d + sa(c, b - d.length) } }); q("String.prototype.padStart", function (a) { return a ? a : function (b, c) { var d = r(this, null, "padStart"); return sa(c, b - d.length) + d } }); q("String.prototype.trimRight", function (a) { function b() { return this.replace(/[\s\xa0]+$/, "") } return a || b });
    q("String.prototype.trimEnd", function (a) { return a || String.prototype.trimRight }); function u(a) { return a ? a : Array.prototype.copyWithin } q("Int8Array.prototype.copyWithin", u); q("Uint8Array.prototype.copyWithin", u); q("Uint8ClampedArray.prototype.copyWithin", u); q("Int16Array.prototype.copyWithin", u); q("Uint16Array.prototype.copyWithin", u); q("Int32Array.prototype.copyWithin", u); q("Uint32Array.prototype.copyWithin", u); q("Float32Array.prototype.copyWithin", u); q("Float64Array.prototype.copyWithin", u);
    function v(a) { return a ? a : Array.prototype.fill } q("Int8Array.prototype.fill", v); q("Uint8Array.prototype.fill", v); q("Uint8ClampedArray.prototype.fill", v); q("Int16Array.prototype.fill", v); q("Uint16Array.prototype.fill", v); q("Int32Array.prototype.fill", v); q("Uint32Array.prototype.fill", v); q("Float32Array.prototype.fill", v); q("Float64Array.prototype.fill", v);
    q("WeakSet", function (a) { function b(c) { this.a = new WeakMap; if (c) { c = n(c); for (var d; !(d = c.next()).done;)this.add(d.value) } } if (function () { if (!a || !Object.seal) return !1; try { var c = Object.seal({}), d = Object.seal({}), e = new a([c]); if (!e.has(c) || e.has(d)) return !1; e.delete(c); e.add(d); return !e.has(c) && e.has(d) } catch (f) { return !1 } }()) return a; b.prototype.add = function (c) { this.a.set(c, !0); return this }; b.prototype.has = function (c) { return this.a.has(c) }; b.prototype.delete = function (c) { return this.a.delete(c) }; return b });
    var w = this || self, ta = /^[\w+/_-]+[=]{0,2}$/, ua = null; function va(a) { return (a = a.querySelector && a.querySelector("script[nonce]")) && (a = a.nonce || a.getAttribute("nonce")) && ta.test(a) ? a : "" } function y(a) { a = a.split("."); for (var b = w, c = 0; c < a.length; c++)if (b = b[a[c]], null == b) return null; return b } function z() { } function ya(a) { var b = typeof a; return "object" != b ? b : a ? Array.isArray(a) ? "array" : b : "null" } function B(a) { return "function" == ya(a) } function za(a) { var b = typeof a; return "object" == b && null != a || "function" == b }
    function Aa(a, b, c) { return a.call.apply(a.bind, arguments) } function Ba(a, b, c) { if (!a) throw Error(); if (2 < arguments.length) { var d = Array.prototype.slice.call(arguments, 2); return function () { var e = Array.prototype.slice.call(arguments); Array.prototype.unshift.apply(e, d); return a.apply(b, e) } } return function () { return a.apply(b, arguments) } } function C(a, b, c) { Function.prototype.bind && -1 != Function.prototype.bind.toString().indexOf("native code") ? C = Aa : C = Ba; return C.apply(null, arguments) }
    function D(a, b) { a = a.split("."); var c = w; a[0] in c || "undefined" == typeof c.execScript || c.execScript("var " + a[0]); for (var d; a.length && (d = a.shift());)a.length || void 0 === b ? c[d] && c[d] !== Object.prototype[d] ? c = c[d] : c = c[d] = {} : c[d] = b } function E(a, b) { function c() { } c.prototype = b.prototype; a.prototype = new c; a.prototype.constructor = a } function Ca(a) { return a }; function F(a) { if (Error.captureStackTrace) Error.captureStackTrace(this, F); else { var b = Error().stack; b && (this.stack = b) } a && (this.message = String(a)) } E(F, Error); F.prototype.name = "CustomError"; function G(a, b) { this.a = a === Da && b || ""; this.b = Ea } G.prototype.O = !0; G.prototype.M = function () { return this.a }; function Fa(a) { return a instanceof G && a.constructor === G && a.b === Ea ? a.a : "type_error:Const" } function H(a) { return new G(Da, a) } var Ea = {}, Da = {}; var J = { f: {} };
    J.f.I = {
        ha: {
            "gstatic.com": {
                loader: H("https://www.gstatic.com/charts/%{version}/loader.js"), debug: H("https://www.gstatic.com/charts/debug/%{version}/js/jsapi_debug_%{package}_module.js"), debug_i18n: H("https://www.gstatic.com/charts/debug/%{version}/i18n/jsapi_debug_i18n_%{package}_module__%{language}.js"), compiled: H("https://www.gstatic.com/charts/%{version}/js/jsapi_compiled_%{package}_module.js"), compiled_i18n: H("https://www.gstatic.com/charts/%{version}/i18n/jsapi_compiled_i18n_%{package}_module__%{language}.js"), css: H("https://www.gstatic.com/charts/%{version}/css/%{subdir}/%{filename}"),
                css2: H("https://www.gstatic.com/charts/%{version}/css/%{subdir1}/%{subdir2}/%{filename}"), third_party: H("https://www.gstatic.com/charts/%{version}/third_party/%{subdir}/%{filename}"), third_party2: H("https://www.gstatic.com/charts/%{version}/third_party/%{subdir1}/%{subdir2}/%{filename}"), third_party_gen: H("https://www.gstatic.com/charts/%{version}/third_party/%{subdir}/%{filename}")
            }, "gstatic.cn": {
                loader: H("https://www.gstatic.cn/charts/%{version}/loader.js"), debug: H("https://www.gstatic.cn/charts/debug/%{version}/js/jsapi_debug_%{package}_module.js"),
                debug_i18n: H("https://www.gstatic.cn/charts/debug/%{version}/i18n/jsapi_debug_i18n_%{package}_module__%{language}.js"), compiled: H("https://www.gstatic.cn/charts/%{version}/js/jsapi_compiled_%{package}_module.js"), compiled_i18n: H("https://www.gstatic.cn/charts/%{version}/i18n/jsapi_compiled_i18n_%{package}_module__%{language}.js"), css: H("https://www.gstatic.cn/charts/%{version}/css/%{subdir}/%{filename}"), css2: H("https://www.gstatic.cn/charts/%{version}/css/%{subdir1}/%{subdir2}/%{filename}"), third_party: H("https://www.gstatic.cn/charts/%{version}/third_party/%{subdir}/%{filename}"),
                third_party2: H("https://www.gstatic.cn/charts/%{version}/third_party/%{subdir1}/%{subdir2}/%{filename}"), third_party_gen: H("https://www.gstatic.cn/charts/%{version}/third_party/%{subdir}/%{filename}")
            }
        }, Y: ["default"], na: {
            "default": [], graphics: ["default"], ui: ["graphics"], ui_base: ["graphics"], flashui: ["ui"], fw: ["ui"], geo: ["ui"], annotatedtimeline: ["annotationchart"], annotationchart: ["ui", "controls", "corechart", "table"], areachart: "browserchart", bar: ["fw", "dygraph", "webfontloader"], barchart: "browserchart",
            browserchart: ["ui"], bubbles: ["fw", "d3"], calendar: ["fw"], charteditor: "ui corechart imagechart annotatedtimeline gauge geochart motionchart orgchart table".split(" "), charteditor_base: "ui_base corechart imagechart annotatedtimeline gauge geochart motionchart orgchart table_base".split(" "), circles: ["fw", "d3"], clusterchart: ["corechart", "d3"], columnchart: "browserchart", controls: ["ui"], controls_base: ["ui_base"], corechart: ["ui"], gantt: ["fw", "dygraph"], gauge: ["ui"], geochart: ["geo"], geomap: ["flashui", "geo"],
            geomap_base: ["ui_base"], heatmap: ["vegachart"], helloworld: ["fw"], imagechart: ["ui"], imageareachart: "imagechart", imagebarchart: "imagechart", imagelinechart: "imagechart", imagepiechart: "imagechart", imagesparkline: "imagechart", line: ["fw", "dygraph", "webfontloader"], linechart: "browserchart", map: ["geo"], motionchart: ["flashui"], orgchart: ["ui"], overtimecharts: ["ui", "corechart"], piechart: "browserchart", sankey: ["fw", "d3", "d3.sankey"], scatter: ["fw", "dygraph", "webfontloader"], scatterchart: "browserchart", sunburst: ["fw",
                "d3"], streamgraph: ["fw", "d3"], table: ["ui"], table_base: ["ui_base"], timeline: ["fw", "ui", "dygraph"], treemap: ["ui"], vegachart: ["graphics"], wordtree: ["ui"]
        }, Ha: { d3: { subdir1: "d3", subdir2: "v5", filename: "d3.js" }, "d3.sankey": { subdir1: "d3_sankey", subdir2: "v4", filename: "d3.sankey.js" }, webfontloader: { subdir: "webfontloader", filename: "webfont.js" } }, Ga: { dygraph: { subdir: "dygraphs", filename: "dygraph-tickers-combined.js" } }, ma: {
            "default": [{ subdir: "core", filename: "tooltip.css" }], annotationchart: [{
                subdir: "annotationchart",
                filename: "annotationchart.css"
            }], charteditor: [{ subdir: "charteditor", filename: "charteditor.css" }], charteditor_base: [{ subdir: "charteditor_base", filename: "charteditor_base.css" }], controls: [{ subdir: "controls", filename: "controls.css" }], imagesparkline: [{ subdir: "imagechart", filename: "imagesparkline.css" }], orgchart: [{ subdir: "orgchart", filename: "orgchart.css" }], table: [{ subdir: "table", filename: "table.css" }, { subdir: "util", filename: "format.css" }], table_base: [{ subdir: "util", filename: "format.css" }, {
                subdir: "table",
                filename: "table_base.css"
            }], ui: [{ subdir: "util", filename: "util.css" }], ui_base: [{ subdir: "util", filename: "util_base.css" }]
        }
    }; J.f.V = {
        $: {
            "chrome-frame": { versions: { "1.0.0": { uncompressed: "CFInstall.js", compressed: "CFInstall.min.js" }, "1.0.1": { uncompressed: "CFInstall.js", compressed: "CFInstall.min.js" }, "1.0.2": { uncompressed: "CFInstall.js", compressed: "CFInstall.min.js" } }, aliases: { 1: "1.0.2", "1.0": "1.0.2" } }, swfobject: { versions: { "2.1": { uncompressed: "swfobject_src.js", compressed: "swfobject.js" }, "2.2": { uncompressed: "swfobject_src.js", compressed: "swfobject.js" } }, aliases: { 2: "2.2" } }, "ext-core": {
                versions: {
                    "3.1.0": {
                        uncompressed: "ext-core-debug.js",
                        compressed: "ext-core.js"
                    }, "3.0.0": { uncompressed: "ext-core-debug.js", compressed: "ext-core.js" }
                }, aliases: { 3: "3.1.0", "3.0": "3.0.0", "3.1": "3.1.0" }
            }, scriptaculous: { versions: { "1.8.3": { uncompressed: "scriptaculous.js", compressed: "scriptaculous.js" }, "1.9.0": { uncompressed: "scriptaculous.js", compressed: "scriptaculous.js" }, "1.8.1": { uncompressed: "scriptaculous.js", compressed: "scriptaculous.js" }, "1.8.2": { uncompressed: "scriptaculous.js", compressed: "scriptaculous.js" } }, aliases: { 1: "1.9.0", "1.8": "1.8.3", "1.9": "1.9.0" } },
            webfont: {
                versions: {
                    "1.0.12": { uncompressed: "webfont_debug.js", compressed: "webfont.js" }, "1.0.13": { uncompressed: "webfont_debug.js", compressed: "webfont.js" }, "1.0.14": { uncompressed: "webfont_debug.js", compressed: "webfont.js" }, "1.0.15": { uncompressed: "webfont_debug.js", compressed: "webfont.js" }, "1.0.10": { uncompressed: "webfont_debug.js", compressed: "webfont.js" }, "1.0.11": { uncompressed: "webfont_debug.js", compressed: "webfont.js" }, "1.0.27": { uncompressed: "webfont_debug.js", compressed: "webfont.js" }, "1.0.28": {
                        uncompressed: "webfont_debug.js",
                        compressed: "webfont.js"
                    }, "1.0.29": { uncompressed: "webfont_debug.js", compressed: "webfont.js" }, "1.0.23": { uncompressed: "webfont_debug.js", compressed: "webfont.js" }, "1.0.24": { uncompressed: "webfont_debug.js", compressed: "webfont.js" }, "1.0.25": { uncompressed: "webfont_debug.js", compressed: "webfont.js" }, "1.0.26": { uncompressed: "webfont_debug.js", compressed: "webfont.js" }, "1.0.21": { uncompressed: "webfont_debug.js", compressed: "webfont.js" }, "1.0.22": { uncompressed: "webfont_debug.js", compressed: "webfont.js" }, "1.0.3": {
                        uncompressed: "webfont_debug.js",
                        compressed: "webfont.js"
                    }, "1.0.4": { uncompressed: "webfont_debug.js", compressed: "webfont.js" }, "1.0.5": { uncompressed: "webfont_debug.js", compressed: "webfont.js" }, "1.0.6": { uncompressed: "webfont_debug.js", compressed: "webfont.js" }, "1.0.9": { uncompressed: "webfont_debug.js", compressed: "webfont.js" }, "1.0.16": { uncompressed: "webfont_debug.js", compressed: "webfont.js" }, "1.0.17": { uncompressed: "webfont_debug.js", compressed: "webfont.js" }, "1.0.0": { uncompressed: "webfont_debug.js", compressed: "webfont.js" }, "1.0.18": {
                        uncompressed: "webfont_debug.js",
                        compressed: "webfont.js"
                    }, "1.0.1": { uncompressed: "webfont_debug.js", compressed: "webfont.js" }, "1.0.19": { uncompressed: "webfont_debug.js", compressed: "webfont.js" }, "1.0.2": { uncompressed: "webfont_debug.js", compressed: "webfont.js" }
                }, aliases: { 1: "1.0.29", "1.0": "1.0.29" }
            }, jqueryui: {
                versions: {
                    "1.8.17": { uncompressed: "jquery-ui.js", compressed: "jquery-ui.min.js" }, "1.8.16": { uncompressed: "jquery-ui.js", compressed: "jquery-ui.min.js" }, "1.8.15": { uncompressed: "jquery-ui.js", compressed: "jquery-ui.min.js" }, "1.8.14": {
                        uncompressed: "jquery-ui.js",
                        compressed: "jquery-ui.min.js"
                    }, "1.8.4": { uncompressed: "jquery-ui.js", compressed: "jquery-ui.min.js" }, "1.8.13": { uncompressed: "jquery-ui.js", compressed: "jquery-ui.min.js" }, "1.8.5": { uncompressed: "jquery-ui.js", compressed: "jquery-ui.min.js" }, "1.8.12": { uncompressed: "jquery-ui.js", compressed: "jquery-ui.min.js" }, "1.8.6": { uncompressed: "jquery-ui.js", compressed: "jquery-ui.min.js" }, "1.8.11": { uncompressed: "jquery-ui.js", compressed: "jquery-ui.min.js" }, "1.8.7": { uncompressed: "jquery-ui.js", compressed: "jquery-ui.min.js" },
                    "1.8.10": { uncompressed: "jquery-ui.js", compressed: "jquery-ui.min.js" }, "1.8.8": { uncompressed: "jquery-ui.js", compressed: "jquery-ui.min.js" }, "1.8.9": { uncompressed: "jquery-ui.js", compressed: "jquery-ui.min.js" }, "1.6.0": { uncompressed: "jquery-ui.js", compressed: "jquery-ui.min.js" }, "1.7.0": { uncompressed: "jquery-ui.js", compressed: "jquery-ui.min.js" }, "1.5.2": { uncompressed: "jquery-ui.js", compressed: "jquery-ui.min.js" }, "1.8.0": { uncompressed: "jquery-ui.js", compressed: "jquery-ui.min.js" }, "1.7.1": {
                        uncompressed: "jquery-ui.js",
                        compressed: "jquery-ui.min.js"
                    }, "1.5.3": { uncompressed: "jquery-ui.js", compressed: "jquery-ui.min.js" }, "1.8.1": { uncompressed: "jquery-ui.js", compressed: "jquery-ui.min.js" }, "1.7.2": { uncompressed: "jquery-ui.js", compressed: "jquery-ui.min.js" }, "1.8.2": { uncompressed: "jquery-ui.js", compressed: "jquery-ui.min.js" }, "1.7.3": { uncompressed: "jquery-ui.js", compressed: "jquery-ui.min.js" }
                }, aliases: { 1: "1.8.17", "1.5": "1.5.3", "1.6": "1.6.0", "1.7": "1.7.3", "1.8": "1.8.17", "1.8.3": "1.8.4" }
            }, mootools: {
                versions: {
                    "1.3.0": {
                        uncompressed: "mootools.js",
                        compressed: "mootools-yui-compressed.js"
                    }, "1.2.1": { uncompressed: "mootools.js", compressed: "mootools-yui-compressed.js" }, "1.1.2": { uncompressed: "mootools.js", compressed: "mootools-yui-compressed.js" }, "1.4.0": { uncompressed: "mootools.js", compressed: "mootools-yui-compressed.js" }, "1.3.1": { uncompressed: "mootools.js", compressed: "mootools-yui-compressed.js" }, "1.2.2": { uncompressed: "mootools.js", compressed: "mootools-yui-compressed.js" }, "1.4.1": { uncompressed: "mootools.js", compressed: "mootools-yui-compressed.js" },
                    "1.3.2": { uncompressed: "mootools.js", compressed: "mootools-yui-compressed.js" }, "1.2.3": { uncompressed: "mootools.js", compressed: "mootools-yui-compressed.js" }, "1.4.2": { uncompressed: "mootools.js", compressed: "mootools-yui-compressed.js" }, "1.2.4": { uncompressed: "mootools.js", compressed: "mootools-yui-compressed.js" }, "1.2.5": { uncompressed: "mootools.js", compressed: "mootools-yui-compressed.js" }, "1.1.1": { uncompressed: "mootools.js", compressed: "mootools-yui-compressed.js" }
                }, aliases: {
                    1: "1.1.2", "1.1": "1.1.2", "1.2": "1.2.5",
                    "1.3": "1.3.2", "1.4": "1.4.2", "1.11": "1.1.1"
                }
            }, yui: {
                versions: {
                    "2.8.0r4": { uncompressed: "build/yuiloader/yuiloader.js", compressed: "build/yuiloader/yuiloader-min.js" }, "2.9.0": { uncompressed: "build/yuiloader/yuiloader.js", compressed: "build/yuiloader/yuiloader-min.js" }, "2.8.1": { uncompressed: "build/yuiloader/yuiloader.js", compressed: "build/yuiloader/yuiloader-min.js" }, "2.6.0": { uncompressed: "build/yuiloader/yuiloader.js", compressed: "build/yuiloader/yuiloader-min.js" }, "2.7.0": {
                        uncompressed: "build/yuiloader/yuiloader.js",
                        compressed: "build/yuiloader/yuiloader-min.js"
                    }, "3.3.0": { uncompressed: "build/yui/yui.js", compressed: "build/yui/yui-min.js" }, "2.8.2r1": { uncompressed: "build/yuiloader/yuiloader.js", compressed: "build/yuiloader/yuiloader-min.js" }
                }, aliases: { 2: "2.9.0", "2.6": "2.6.0", "2.7": "2.7.0", "2.8": "2.8.2r1", "2.8.0": "2.8.0r4", "2.8.2": "2.8.2r1", "2.9": "2.9.0", 3: "3.3.0", "3.3": "3.3.0" }
            }, prototype: {
                versions: {
                    "1.6.1.0": { uncompressed: "prototype.js", compressed: "prototype.js" }, "1.6.0.2": { uncompressed: "prototype.js", compressed: "prototype.js" },
                    "1.7.0.0": { uncompressed: "prototype.js", compressed: "prototype.js" }, "1.6.0.3": { uncompressed: "prototype.js", compressed: "prototype.js" }
                }, aliases: { 1: "1.7.0.0", "1.6": "1.6.1.0", "1.6.0": "1.6.0.3", "1.6.1": "1.6.1.0", "1.7": "1.7.0.0", "1.7.0": "1.7.0.0" }
            }, jquery: {
                versions: {
                    "1.2.3": { uncompressed: "jquery.js", compressed: "jquery.min.js" }, "1.2.6": { uncompressed: "jquery.js", compressed: "jquery.min.js" }, "1.3.0": { uncompressed: "jquery.js", compressed: "jquery.min.js" }, "1.3.1": { uncompressed: "jquery.js", compressed: "jquery.min.js" },
                    "1.3.2": { uncompressed: "jquery.js", compressed: "jquery.min.js" }, "1.4.0": { uncompressed: "jquery.js", compressed: "jquery.min.js" }, "1.4.1": { uncompressed: "jquery.js", compressed: "jquery.min.js" }, "1.4.2": { uncompressed: "jquery.js", compressed: "jquery.min.js" }, "1.4.3": { uncompressed: "jquery.js", compressed: "jquery.min.js" }, "1.4.4": { uncompressed: "jquery.js", compressed: "jquery.min.js" }, "1.5.0": { uncompressed: "jquery.js", compressed: "jquery.min.js" }, "1.5.1": { uncompressed: "jquery.js", compressed: "jquery.min.js" }, "1.5.2": {
                        uncompressed: "jquery.js",
                        compressed: "jquery.min.js"
                    }, "1.6.0": { uncompressed: "jquery.js", compressed: "jquery.min.js" }, "1.6.1": { uncompressed: "jquery.js", compressed: "jquery.min.js" }, "1.6.2": { uncompressed: "jquery.js", compressed: "jquery.min.js" }, "1.6.3": { uncompressed: "jquery.js", compressed: "jquery.min.js" }, "1.6.4": { uncompressed: "jquery.js", compressed: "jquery.min.js" }, "1.7.0": { uncompressed: "jquery.js", compressed: "jquery.min.js" }, "1.7.1": { uncompressed: "jquery.js", compressed: "jquery.min.js" }
                }, aliases: {
                    1: "1.7.1", "1.2": "1.2.6", "1.3": "1.3.2",
                    "1.4": "1.4.4", "1.5": "1.5.2", "1.6": "1.6.4", "1.7": "1.7.1"
                }
            }, dojo: {
                versions: {
                    "1.3.0": { uncompressed: "dojo/dojo.xd.js.uncompressed.js", compressed: "dojo/dojo.xd.js" }, "1.4.0": { uncompressed: "dojo/dojo.xd.js.uncompressed.js", compressed: "dojo/dojo.xd.js" }, "1.3.1": { uncompressed: "dojo/dojo.xd.js.uncompressed.js", compressed: "dojo/dojo.xd.js" }, "1.5.0": { uncompressed: "dojo/dojo.xd.js.uncompressed.js", compressed: "dojo/dojo.xd.js" }, "1.4.1": { uncompressed: "dojo/dojo.xd.js.uncompressed.js", compressed: "dojo/dojo.xd.js" },
                    "1.3.2": { uncompressed: "dojo/dojo.xd.js.uncompressed.js", compressed: "dojo/dojo.xd.js" }, "1.2.3": { uncompressed: "dojo/dojo.xd.js.uncompressed.js", compressed: "dojo/dojo.xd.js" }, "1.6.0": { uncompressed: "dojo/dojo.xd.js.uncompressed.js", compressed: "dojo/dojo.xd.js" }, "1.5.1": { uncompressed: "dojo/dojo.xd.js.uncompressed.js", compressed: "dojo/dojo.xd.js" }, "1.7.0": { uncompressed: "dojo/dojo.js.uncompressed.js", compressed: "dojo/dojo.js" }, "1.6.1": { uncompressed: "dojo/dojo.xd.js.uncompressed.js", compressed: "dojo/dojo.xd.js" },
                    "1.4.3": { uncompressed: "dojo/dojo.xd.js.uncompressed.js", compressed: "dojo/dojo.xd.js" }, "1.7.1": { uncompressed: "dojo/dojo.js.uncompressed.js", compressed: "dojo/dojo.js" }, "1.7.2": { uncompressed: "dojo/dojo.js.uncompressed.js", compressed: "dojo/dojo.js" }, "1.2.0": { uncompressed: "dojo/dojo.xd.js.uncompressed.js", compressed: "dojo/dojo.xd.js" }, "1.1.1": { uncompressed: "dojo/dojo.xd.js.uncompressed.js", compressed: "dojo/dojo.xd.js" }
                }, aliases: {
                    1: "1.6.1", "1.1": "1.1.1", "1.2": "1.2.3", "1.3": "1.3.2", "1.4": "1.4.3", "1.5": "1.5.1",
                    "1.6": "1.6.1", "1.7": "1.7.2"
                }
            }
        }
    }; J.f.W = {
        af: !0, am: !0, az: !0, ar: !0, arb: "ar", bg: !0, bn: !0, ca: !0, cs: !0, cmn: "zh", da: !0, de: !0, el: !0, en: !0, en_gb: !0, es: !0, es_419: !0, et: !0, eu: !0, fa: !0, fi: !0, fil: !0, fr: !0, fr_ca: !0, gl: !0, ka: !0, gu: !0, he: "iw", hi: !0, hr: !0, hu: !0, hy: !0, id: !0, "in": "id", is: !0, it: !0, iw: !0, ja: !0, ji: "yi", jv: !1, jw: "jv", km: !0, kn: !0, ko: !0, lo: !0, lt: !0, lv: !0, ml: !0, mn: !0, mo: "ro", mr: !0, ms: !0, nb: "no", ne: !0, nl: !0, no: !0, pl: !0, pt: "pt_br", pt_br: !0, pt_pt: !0, ro: !0, ru: !0, si: !0, sk: !0, sl: !0, sr: !0, sv: !0, sw: !0, swh: "sw", ta: !0, te: !0, th: !0, tl: "fil", tr: !0, uk: !0,
        ur: !0, vi: !0, yi: !1, zh: "zh_cn", zh_cn: !0, zh_hk: !0, zh_tw: !0, zsm: "ms", zu: !0
    }; var Ga = Array.prototype.forEach ? function (a, b, c) { Array.prototype.forEach.call(a, b, c) } : function (a, b, c) { for (var d = a.length, e = "string" === typeof a ? a.split("") : a, f = 0; f < d; f++)f in e && b.call(c, e[f], f, a) }, Ha = Array.prototype.map ? function (a, b) { return Array.prototype.map.call(a, b, void 0) } : function (a, b) { for (var c = a.length, d = Array(c), e = "string" === typeof a ? a.split("") : a, f = 0; f < c; f++)f in e && (d[f] = b.call(void 0, e[f], f, a)); return d }, Ia = Array.prototype.some ? function (a, b) { return Array.prototype.some.call(a, b, void 0) } :
        function (a, b) { for (var c = a.length, d = "string" === typeof a ? a.split("") : a, e = 0; e < c; e++)if (e in d && b.call(void 0, d[e], e, a)) return !0; return !1 }; function Ja(a) { return Array.prototype.concat.apply([], arguments) } function Ka(a) { var b = a.length; if (0 < b) { for (var c = Array(b), d = 0; d < b; d++)c[d] = a[d]; return c } return [] }
    function La(a, b) { for (var c = 1; c < arguments.length; c++) { var d = arguments[c], e = ya(d); if ("array" == e || "object" == e && "number" == typeof d.length) { e = a.length || 0; var f = d.length || 0; a.length = e + f; for (var g = 0; g < f; g++)a[e + g] = d[g] } else a.push(d) } }; var Ma; function K(a, b) { this.a = a === Na && b || ""; this.b = Oa } K.prototype.O = !0; K.prototype.M = function () { return this.a.toString() }; function Pa(a) { return a instanceof K && a.constructor === K && a.b === Oa ? a.a : "type_error:TrustedResourceUrl" }
    function Qa(a, b) { var c = Fa(a); if (!Ra.test(c)) throw Error("Invalid TrustedResourceUrl format: " + c); a = c.replace(Sa, function (d, e) { if (!Object.prototype.hasOwnProperty.call(b, e)) throw Error('Found marker, "' + e + '", in format string, "' + c + '", but no valid label mapping found in args: ' + JSON.stringify(b)); d = b[e]; return d instanceof G ? Fa(d) : encodeURIComponent(String(d)) }); return Ta(a) } var Sa = /%{(\w+)}/g, Ra = /^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i, Ua = /^([^?#]*)(\?[^#]*)?(#[\s\S]*)?/;
    function Va(a, b, c) { a = Qa(a, b); a = Ua.exec(Pa(a).toString()); b = a[3] || ""; return Ta(a[1] + Wa("?", a[2] || "", c) + Wa("#", b, void 0)) } var Oa = {}; function Ta(a) { if (void 0 === Ma) { var b = null; var c = w.trustedTypes; if (c && c.createPolicy) { try { b = c.createPolicy("goog#html", { createHTML: Ca, createScript: Ca, createScriptURL: Ca }) } catch (d) { w.console && w.console.error(d.message) } Ma = b } else Ma = b } a = (b = Ma) ? b.createScriptURL(a) : a; return new K(Na, a) }
    function Wa(a, b, c) { if (null == c) return b; if ("string" === typeof c) return c ? a + encodeURIComponent(c) : ""; for (var d in c) if (Object.prototype.hasOwnProperty.call(c, d)) { var e = c[d]; e = Array.isArray(e) ? e : [e]; for (var f = 0; f < e.length; f++) { var g = e[f]; null != g && (b || (b = a), b += (b.length > a.length ? "&" : "") + encodeURIComponent(d) + "=" + encodeURIComponent(String(g))) } } return b } var Na = {}; var Xa = String.prototype.trim ? function (a) { return a.trim() } : function (a) { return /^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1] }; function Ya(a, b) { return a < b ? -1 : a > b ? 1 : 0 }; var L; a: { var Za = w.navigator; if (Za) { var $a = Za.userAgent; if ($a) { L = $a; break a } } L = "" } function M(a) { return -1 != L.indexOf(a) }; function ab(a, b) { for (var c in a) b.call(void 0, a[c], c, a) } var bb = "constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "); function cb(a, b) { for (var c, d, e = 1; e < arguments.length; e++) { d = arguments[e]; for (c in d) a[c] = d[c]; for (var f = 0; f < bb.length; f++)c = bb[f], Object.prototype.hasOwnProperty.call(d, c) && (a[c] = d[c]) } }; function db(a, b) { a.src = Pa(b); (b = a.ownerDocument && a.ownerDocument.defaultView) && b != w ? b = va(b.document) : (null === ua && (ua = va(w.document)), b = ua); b && a.setAttribute("nonce", b) }; function eb(a) { var b = fb; return Object.prototype.hasOwnProperty.call(b, 11) ? b[11] : b[11] = a(11) }; var gb = M("Opera"), hb = M("Trident") || M("MSIE"), ib = M("Edge"), jb = M("Gecko") && !(-1 != L.toLowerCase().indexOf("webkit") && !M("Edge")) && !(M("Trident") || M("MSIE")) && !M("Edge"), kb = -1 != L.toLowerCase().indexOf("webkit") && !M("Edge"), lb;
    a: { var mb = "", nb = function () { var a = L; if (jb) return /rv:([^\);]+)(\)|;)/.exec(a); if (ib) return /Edge\/([\d\.]+)/.exec(a); if (hb) return /\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a); if (kb) return /WebKit\/(\S+)/.exec(a); if (gb) return /(?:Version)[ \/]?(\S+)/.exec(a) }(); nb && (mb = nb ? nb[1] : ""); if (hb) { var ob, pb = w.document; ob = pb ? pb.documentMode : void 0; if (null != ob && ob > parseFloat(mb)) { lb = String(ob); break a } } lb = mb } var qb = lb, fb = {};
    function rb() { return eb(function () { for (var a = 0, b = Xa(String(qb)).split("."), c = Xa("11").split("."), d = Math.max(b.length, c.length), e = 0; 0 == a && e < d; e++) { var f = b[e] || "", g = c[e] || ""; do { f = /(\d*)(\D*)(.*)/.exec(f) || ["", "", "", ""]; g = /(\d*)(\D*)(.*)/.exec(g) || ["", "", "", ""]; if (0 == f[0].length && 0 == g[0].length) break; a = Ya(0 == f[1].length ? 0 : parseInt(f[1], 10), 0 == g[1].length ? 0 : parseInt(g[1], 10)) || Ya(0 == f[2].length, 0 == g[2].length) || Ya(f[2], g[2]); f = f[3]; g = g[3] } while (0 == a) } return 0 <= a }) }; function sb(a, b) { ab(b, function (c, d) { c && "object" == typeof c && c.O && (c = c.M()); "style" == d ? a.style.cssText = c : "class" == d ? a.className = c : "for" == d ? a.htmlFor = c : tb.hasOwnProperty(d) ? a.setAttribute(tb[d], c) : 0 == d.lastIndexOf("aria-", 0) || 0 == d.lastIndexOf("data-", 0) ? a.setAttribute(d, c) : a[d] = c }) }
    var tb = { cellpadding: "cellPadding", cellspacing: "cellSpacing", colspan: "colSpan", frameborder: "frameBorder", height: "height", maxlength: "maxLength", nonce: "nonce", role: "role", rowspan: "rowSpan", type: "type", usemap: "useMap", valign: "vAlign", width: "width" }; function ub(a) { var b = document; a = String(a); "application/xhtml+xml" === b.contentType && (a = a.toLowerCase()); return b.createElement(a) }; function vb(a, b) { this.c = a; this.g = b; this.b = 0; this.a = null } vb.prototype.get = function () { if (0 < this.b) { this.b--; var a = this.a; this.a = a.next; a.next = null } else a = this.c(); return a }; function wb(a, b) { a.g(b); 100 > a.b && (a.b++ , b.next = a.a, a.a = b) }; function xb(a) { w.setTimeout(function () { throw a; }, 0) } var yb;
    function zb() {
        var a = w.MessageChannel; "undefined" === typeof a && "undefined" !== typeof window && window.postMessage && window.addEventListener && !M("Presto") && (a = function () {
            var e = ub("IFRAME"); e.style.display = "none"; document.documentElement.appendChild(e); var f = e.contentWindow; e = f.document; e.open(); e.close(); var g = "callImmediate" + Math.random(), h = "file:" == f.location.protocol ? "*" : f.location.protocol + "//" + f.location.host; e = C(function (k) { if (("*" == h || k.origin == h) && k.data == g) this.port1.onmessage() }, this); f.addEventListener("message",
                e, !1); this.port1 = {}; this.port2 = { postMessage: function () { f.postMessage(g, h) } }
        }); if ("undefined" !== typeof a && !M("Trident") && !M("MSIE")) { var b = new a, c = {}, d = c; b.port1.onmessage = function () { if (void 0 !== c.next) { c = c.next; var e = c.L; c.L = null; e() } }; return function (e) { d.next = { L: e }; d = d.next; b.port2.postMessage(0) } } return function (e) { w.setTimeout(e, 0) }
    }; function Ab() { this.b = this.a = null } var Cb = new vb(function () { return new Bb }, function (a) { a.reset() }); Ab.prototype.add = function (a, b) { var c = Cb.get(); c.set(a, b); this.b ? this.b.next = c : this.a = c; this.b = c }; function Db() { var a = Eb, b = null; a.a && (b = a.a, a.a = a.a.next, a.a || (a.b = null), b.next = null); return b } function Bb() { this.next = this.b = this.a = null } Bb.prototype.set = function (a, b) { this.a = a; this.b = b; this.next = null }; Bb.prototype.reset = function () { this.next = this.b = this.a = null }; function Fb(a, b) { Gb || Hb(); Ib || (Gb(), Ib = !0); Eb.add(a, b) } var Gb; function Hb() { if (w.Promise && w.Promise.resolve) { var a = w.Promise.resolve(void 0); Gb = function () { a.then(Jb) } } else Gb = function () { var b = Jb; !B(w.setImmediate) || w.Window && w.Window.prototype && !M("Edge") && w.Window.prototype.setImmediate == w.setImmediate ? (yb || (yb = zb()), yb(b)) : w.setImmediate(b) } } var Ib = !1, Eb = new Ab; function Jb() { for (var a; a = Db();) { try { a.a.call(a.b) } catch (b) { xb(b) } wb(Cb, a) } Ib = !1 }; function Kb(a) { if (!a) return !1; try { return !!a.$goog_Thenable } catch (b) { return !1 } }; function N(a) { this.a = 0; this.j = void 0; this.g = this.b = this.c = null; this.h = this.i = !1; if (a != z) try { var b = this; a.call(void 0, function (c) { O(b, 2, c) }, function (c) { O(b, 3, c) }) } catch (c) { O(this, 3, c) } } function Lb() { this.next = this.c = this.b = this.g = this.a = null; this.h = !1 } Lb.prototype.reset = function () { this.c = this.b = this.g = this.a = null; this.h = !1 }; var Mb = new vb(function () { return new Lb }, function (a) { a.reset() }); function Nb(a, b, c) { var d = Mb.get(); d.g = a; d.b = b; d.c = c; return d }
    N.prototype.then = function (a, b, c) { return Ob(this, B(a) ? a : null, B(b) ? b : null, c) }; N.prototype.$goog_Thenable = !0; N.prototype.cancel = function (a) { if (0 == this.a) { var b = new P(a); Fb(function () { Pb(this, b) }, this) } }; function Pb(a, b) { if (0 == a.a) if (a.c) { var c = a.c; if (c.b) { for (var d = 0, e = null, f = null, g = c.b; g && (g.h || (d++ , g.a == a && (e = g), !(e && 1 < d))); g = g.next)e || (f = g); e && (0 == c.a && 1 == d ? Pb(c, b) : (f ? (d = f, d.next == c.g && (c.g = d), d.next = d.next.next) : Qb(c), Rb(c, e, 3, b))) } a.c = null } else O(a, 3, b) }
    function Sb(a, b) { a.b || 2 != a.a && 3 != a.a || Tb(a); a.g ? a.g.next = b : a.b = b; a.g = b } function Ob(a, b, c, d) { var e = Nb(null, null, null); e.a = new N(function (f, g) { e.g = b ? function (h) { try { var k = b.call(d, h); f(k) } catch (m) { g(m) } } : f; e.b = c ? function (h) { try { var k = c.call(d, h); void 0 === k && h instanceof P ? g(h) : f(k) } catch (m) { g(m) } } : g }); e.a.c = a; Sb(a, e); return e.a } N.prototype.A = function (a) { this.a = 0; O(this, 2, a) }; N.prototype.B = function (a) { this.a = 0; O(this, 3, a) };
    function O(a, b, c) { if (0 == a.a) { a === c && (b = 3, c = new TypeError("Promise cannot resolve to itself")); a.a = 1; a: { var d = c, e = a.A, f = a.B; if (d instanceof N) { Sb(d, Nb(e || z, f || null, a)); var g = !0 } else if (Kb(d)) d.then(e, f, a), g = !0; else { if (za(d)) try { var h = d.then; if (B(h)) { Ub(d, h, e, f, a); g = !0; break a } } catch (k) { f.call(a, k); g = !0; break a } g = !1 } } g || (a.j = c, a.a = b, a.c = null, Tb(a), 3 != b || c instanceof P || Vb(a, c)) } }
    function Ub(a, b, c, d, e) { function f(k) { h || (h = !0, d.call(e, k)) } function g(k) { h || (h = !0, c.call(e, k)) } var h = !1; try { b.call(a, g, f) } catch (k) { f(k) } } function Tb(a) { a.i || (a.i = !0, Fb(a.m, a)) } function Qb(a) { var b = null; a.b && (b = a.b, a.b = b.next, b.next = null); a.b || (a.g = null); return b } N.prototype.m = function () { for (var a; a = Qb(this);)Rb(this, a, this.a, this.j); this.i = !1 };
    function Rb(a, b, c, d) { if (3 == c && b.b && !b.h) for (; a && a.h; a = a.c)a.h = !1; if (b.a) b.a.c = null, Wb(b, c, d); else try { b.h ? b.g.call(b.c) : Wb(b, c, d) } catch (e) { Xb.call(null, e) } wb(Mb, b) } function Wb(a, b, c) { 2 == b ? a.g.call(a.c, c) : a.b && a.b.call(a.c, c) } function Vb(a, b) { a.h = !0; Fb(function () { a.h && Xb.call(null, b) }) } var Xb = xb; function P(a) { F.call(this, a) } E(P, F); P.prototype.name = "cancel";/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
    function Q(a, b) { this.h = []; this.F = a; this.H = b || null; this.g = this.a = !1; this.c = void 0; this.A = this.U = this.j = !1; this.i = 0; this.b = null; this.m = 0 } Q.prototype.cancel = function (a) { if (this.a) this.c instanceof Q && this.c.cancel(); else { if (this.b) { var b = this.b; delete this.b; a ? b.cancel(a) : (b.m-- , 0 >= b.m && b.cancel()) } this.F ? this.F.call(this.H, this) : this.A = !0; this.a || (a = new Yb(this), Zb(this), R(this, !1, a)) } }; Q.prototype.B = function (a, b) { this.j = !1; R(this, a, b) }; function R(a, b, c) { a.a = !0; a.c = c; a.g = !b; $b(a) }
    function Zb(a) { if (a.a) { if (!a.A) throw new ac(a); a.A = !1 } } function bc(a, b, c, d) { a.h.push([b, c, d]); a.a && $b(a); return a } Q.prototype.then = function (a, b, c) { var d, e, f = new N(function (g, h) { d = g; e = h }); bc(this, d, function (g) { g instanceof Yb ? f.cancel() : e(g) }); return f.then(a, b, c) }; Q.prototype.$goog_Thenable = !0; function cc(a) { return Ia(a.h, function (b) { return B(b[1]) }) }
    function $b(a) {
        if (a.i && a.a && cc(a)) { var b = a.i, c = dc[b]; c && (w.clearTimeout(c.a), delete dc[b]); a.i = 0 } a.b && (a.b.m-- , delete a.b); b = a.c; for (var d = c = !1; a.h.length && !a.j;) { var e = a.h.shift(), f = e[0], g = e[1]; e = e[2]; if (f = a.g ? g : f) try { var h = f.call(e || a.H, b); void 0 !== h && (a.g = a.g && (h == b || h instanceof Error), a.c = b = h); if (Kb(b) || "function" === typeof w.Promise && b instanceof w.Promise) d = !0, a.j = !0 } catch (k) { b = k, a.g = !0, cc(a) || (c = !0) } } a.c = b; d && (h = C(a.B, a, !0), d = C(a.B, a, !1), b instanceof Q ? (bc(b, h, d), b.U = !0) : b.then(h, d)); c && (b =
            new ec(b), dc[b.a] = b, a.i = b.a)
    } function fc() { var a = new Q; Zb(a); R(a, !0, null); return a } function ac() { F.call(this) } E(ac, F); ac.prototype.message = "Deferred has already fired"; ac.prototype.name = "AlreadyCalledError"; function Yb() { F.call(this) } E(Yb, F); Yb.prototype.message = "Deferred was canceled"; Yb.prototype.name = "CanceledError"; function ec(a) { this.a = w.setTimeout(C(this.c, this), 0); this.b = a } ec.prototype.c = function () { delete dc[this.a]; throw this.b; }; var dc = {}; var gc, hc = []; function ic(a, b) { function c() { var e = a.shift(); e = jc(e, b); a.length && bc(e, c, c, void 0); return e } if (!a.length) return fc(); var d = hc.length; La(hc, a); if (d) return gc; a = hc; return gc = c() }
    function jc(a, b) {
        var c = b || {}; b = c.document || document; var d = Pa(a).toString(), e = ub("SCRIPT"), f = { P: e, S: void 0 }, g = new Q(kc, f), h = null, k = null != c.timeout ? c.timeout : 5E3; 0 < k && (h = window.setTimeout(function () { lc(e, !0); var m = new mc(1, "Timeout reached for loading script " + d); Zb(g); R(g, !1, m) }, k), f.S = h); e.onload = e.onreadystatechange = function () { e.readyState && "loaded" != e.readyState && "complete" != e.readyState || (lc(e, c.la || !1, h), Zb(g), R(g, !0, null)) }; e.onerror = function () {
            lc(e, !0, h); var m = new mc(0, "Error while loading script " +
                d); Zb(g); R(g, !1, m)
        }; f = c.attributes || {}; cb(f, { type: "text/javascript", charset: "UTF-8" }); sb(e, f); db(e, a); nc(b).appendChild(e); return g
    } function nc(a) { var b; return (b = (a || document).getElementsByTagName("HEAD")) && 0 != b.length ? b[0] : a.documentElement } function kc() { if (this && this.P) { var a = this.P; a && "SCRIPT" == a.tagName && lc(a, !0, this.S) } } function lc(a, b, c) { null != c && w.clearTimeout(c); a.onload = z; a.onerror = z; a.onreadystatechange = z; b && window.setTimeout(function () { a && a.parentNode && a.parentNode.removeChild(a) }, 0) }
    function mc(a, b) { var c = "Jsloader error (code #" + a + ")"; b && (c += ": " + b); F.call(this, c); this.code = a } E(mc, F); J.f.o = {}; var oc = jc, qc = pc; function rc(a) { return Va(a.format, a.K, a.ea || {}) } function pc(a, b, c) { c = c || {}; a = Va(a, b, c); var d = oc(a, { timeout: 3E4, attributes: { async: !1, defer: !1 } }); return new Promise(function (e) { bc(d, e, null, void 0) }) } J.f.o.Ca = function (a) { pc = a }; J.f.o.Fa = function (a) { oc = a }; J.f.o.Z = rc; J.f.o.load = qc;
    J.f.o.ua = function (a) { a = Ha(a, rc); if (0 == a.length) return Promise.resolve(); var b = { timeout: 3E4, attributes: { async: !1, defer: !1 } }, c = []; !hb || rb() ? Ga(a, function (d) { c.push(oc(d, b)) }) : c.push(ic(a, b)); return Promise.all(Ha(c, function (d) { return new Promise(function (e) { return bc(d, e, null, void 0) }) })) }; J.f.o.wa = function (a, b, c) { return { format: a, K: b, ea: c } }; J.f.v = {}; var S = {}; J.f.v.oa = function (a) { return S[a] && S[a].loaded }; J.f.v.pa = function (a) { return S[a] && S[a].ga }; J.f.v.aa = function () { return new Promise(function (a) { "undefined" == typeof window || "complete" === document.readyState ? a() : window.addEventListener ? (document.addEventListener("DOMContentLoaded", a, !0), window.addEventListener("load", a, !0)) : window.attachEvent ? window.attachEvent("onload", a) : "function" !== typeof window.onload ? window.onload = a : window.onload = function (b) { window.onload(b); a() } }) }; J.f.v.va = S;
    J.f.v.Ba = function () { S = {} }; J.f.v.Da = function (a) { S[a] || (S[a] = { loaded: !1 }); S[a].loaded = !0 }; J.f.v.Ea = function (a, b) { S[a] = { ga: b, loaded: !1 } }; J.f.J = { 1: "1.0", "1.0": "current", "1.1": "upcoming", "1.2": "testing", 41: "pre-45", 42: "pre-45", 43: "pre-45", 44: "pre-45", 46: "46.1", "46.1": "46.2", 48: "48.1", current: "49", upcoming: "49", testing: "49" }; function sc(a, b) { this.b = {}; this.a = []; this.c = 0; var c = arguments.length; if (1 < c) { if (c % 2) throw Error("Uneven number of arguments"); for (var d = 0; d < c; d += 2)this.set(arguments[d], arguments[d + 1]) } else if (a) if (a instanceof sc) for (c = a.C(), d = 0; d < c.length; d++)this.set(c[d], a.get(c[d])); else for (d in a) this.set(d, a[d]) } l = sc.prototype; l.D = function () { tc(this); for (var a = [], b = 0; b < this.a.length; b++)a.push(this.b[this.a[b]]); return a }; l.C = function () { tc(this); return this.a.concat() };
    function tc(a) { if (a.c != a.a.length) { for (var b = 0, c = 0; b < a.a.length;) { var d = a.a[b]; T(a.b, d) && (a.a[c++] = d); b++ } a.a.length = c } if (a.c != a.a.length) { var e = {}; for (c = b = 0; b < a.a.length;)d = a.a[b], T(e, d) || (a.a[c++] = d, e[d] = 1), b++; a.a.length = c } } l.get = function (a, b) { return T(this.b, a) ? this.b[a] : b }; l.set = function (a, b) { T(this.b, a) || (this.c++ , this.a.push(a)); this.b[a] = b }; l.forEach = function (a, b) { for (var c = this.C(), d = 0; d < c.length; d++) { var e = c[d], f = this.get(e); a.call(b, f, e, this) } };
    function T(a, b) { return Object.prototype.hasOwnProperty.call(a, b) }; var uc = /^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/; function vc(a, b) { if (a) { a = a.split("&"); for (var c = 0; c < a.length; c++) { var d = a[c].indexOf("="), e = null; if (0 <= d) { var f = a[c].substring(0, d); e = a[c].substring(d + 1) } else f = a[c]; b(f, e ? decodeURIComponent(e.replace(/\+/g, " ")) : "") } } }; function wc(a) { this.a = this.j = this.g = ""; this.m = null; this.h = this.b = ""; this.i = !1; var b; a instanceof wc ? (this.i = a.i, xc(this, a.g), this.j = a.j, this.a = a.a, yc(this, a.m), this.b = a.b, zc(this, Ac(a.c)), this.h = a.h) : a && (b = String(a).match(uc)) ? (this.i = !1, xc(this, b[1] || "", !0), this.j = Bc(b[2] || ""), this.a = Bc(b[3] || "", !0), yc(this, b[4]), this.b = Bc(b[5] || "", !0), zc(this, b[6] || "", !0), this.h = Bc(b[7] || "")) : (this.i = !1, this.c = new U(null, this.i)) }
    wc.prototype.toString = function () { var a = [], b = this.g; b && a.push(Cc(b, Dc, !0), ":"); var c = this.a; if (c || "file" == b) a.push("//"), (b = this.j) && a.push(Cc(b, Dc, !0), "@"), a.push(encodeURIComponent(String(c)).replace(/%25([0-9a-fA-F]{2})/g, "%$1")), c = this.m, null != c && a.push(":", String(c)); if (c = this.b) this.a && "/" != c.charAt(0) && a.push("/"), a.push(Cc(c, "/" == c.charAt(0) ? Ec : Fc, !0)); (c = this.c.toString()) && a.push("?", c); (c = this.h) && a.push("#", Cc(c, Gc)); return a.join("") };
    wc.prototype.resolve = function (a) {
        var b = new wc(this), c = !!a.g; c ? xc(b, a.g) : c = !!a.j; c ? b.j = a.j : c = !!a.a; c ? b.a = a.a : c = null != a.m; var d = a.b; if (c) yc(b, a.m); else if (c = !!a.b) {
            if ("/" != d.charAt(0)) if (this.a && !this.b) d = "/" + d; else { var e = b.b.lastIndexOf("/"); -1 != e && (d = b.b.substr(0, e + 1) + d) } e = d; if (".." == e || "." == e) d = ""; else if (-1 != e.indexOf("./") || -1 != e.indexOf("/.")) {
                d = 0 == e.lastIndexOf("/", 0); e = e.split("/"); for (var f = [], g = 0; g < e.length;) {
                    var h = e[g++]; "." == h ? d && g == e.length && f.push("") : ".." == h ? ((1 < f.length || 1 == f.length &&
                        "" != f[0]) && f.pop(), d && g == e.length && f.push("")) : (f.push(h), d = !0)
                } d = f.join("/")
            } else d = e
        } c ? b.b = d : c = "" !== a.c.toString(); c ? zc(b, Ac(a.c)) : c = !!a.h; c && (b.h = a.h); return b
    }; function xc(a, b, c) { a.g = c ? Bc(b, !0) : b; a.g && (a.g = a.g.replace(/:$/, "")) } function yc(a, b) { if (b) { b = Number(b); if (isNaN(b) || 0 > b) throw Error("Bad port number " + b); a.m = b } else a.m = null } function zc(a, b, c) { b instanceof U ? (a.c = b, Hc(a.c, a.i)) : (c || (b = Cc(b, Ic)), a.c = new U(b, a.i)) }
    function Bc(a, b) { return a ? b ? decodeURI(a.replace(/%25/g, "%2525")) : decodeURIComponent(a) : "" } function Cc(a, b, c) { return "string" === typeof a ? (a = encodeURI(a).replace(b, Jc), c && (a = a.replace(/%25([0-9a-fA-F]{2})/g, "%$1")), a) : null } function Jc(a) { a = a.charCodeAt(0); return "%" + (a >> 4 & 15).toString(16) + (a & 15).toString(16) } var Dc = /[#\/\?@]/g, Fc = /[#\?:]/g, Ec = /[#\?]/g, Ic = /[#\?@]/g, Gc = /#/g; function U(a, b) { this.b = this.a = null; this.c = a || null; this.g = !!b }
    function V(a) { a.a || (a.a = new sc, a.b = 0, a.c && vc(a.c, function (b, c) { a.add(decodeURIComponent(b.replace(/\+/g, " ")), c) })) } l = U.prototype; l.add = function (a, b) { V(this); this.c = null; a = W(this, a); var c = this.a.get(a); c || this.a.set(a, c = []); c.push(b); this.b += 1; return this }; function Kc(a, b) { V(a); b = W(a, b); T(a.a.b, b) && (a.c = null, a.b -= a.a.get(b).length, a = a.a, T(a.b, b) && (delete a.b[b], a.c-- , a.a.length > 2 * a.c && tc(a))) } function Lc(a, b) { V(a); b = W(a, b); return T(a.a.b, b) }
    l.forEach = function (a, b) { V(this); this.a.forEach(function (c, d) { Ga(c, function (e) { a.call(b, e, d, this) }, this) }, this) }; l.C = function () { V(this); for (var a = this.a.D(), b = this.a.C(), c = [], d = 0; d < b.length; d++)for (var e = a[d], f = 0; f < e.length; f++)c.push(b[d]); return c }; l.D = function (a) { V(this); var b = []; if ("string" === typeof a) Lc(this, a) && (b = Ja(b, this.a.get(W(this, a)))); else { a = this.a.D(); for (var c = 0; c < a.length; c++)b = Ja(b, a[c]) } return b };
    l.set = function (a, b) { V(this); this.c = null; a = W(this, a); Lc(this, a) && (this.b -= this.a.get(a).length); this.a.set(a, [b]); this.b += 1; return this }; l.get = function (a, b) { if (!a) return b; a = this.D(a); return 0 < a.length ? String(a[0]) : b }; l.toString = function () { if (this.c) return this.c; if (!this.a) return ""; for (var a = [], b = this.a.C(), c = 0; c < b.length; c++) { var d = b[c], e = encodeURIComponent(String(d)); d = this.D(d); for (var f = 0; f < d.length; f++) { var g = e; "" !== d[f] && (g += "=" + encodeURIComponent(String(d[f]))); a.push(g) } } return this.c = a.join("&") };
    function Ac(a) { var b = new U; b.c = a.c; a.a && (b.a = new sc(a.a), b.b = a.b); return b } function W(a, b) { b = String(b); a.g && (b = b.toLowerCase()); return b } function Hc(a, b) { b && !a.g && (V(a), a.c = null, a.a.forEach(function (c, d) { var e = d.toLowerCase(); d != e && (Kc(this, d), Kc(this, e), 0 < c.length && (this.c = null, this.a.set(W(this, e), Ka(c)), this.b += c.length)) }, a)); a.g = b }; J.f.u = {}; var X = "", Y = "", Mc, Z, Nc = null, Oc; function Pc() { Y = X = ""; Nc = Z = Mc = null; y("google.load") || (D("google.load", Qc), D("google.setOnLoadCallback", J.R)); var a = document.getElementsByTagName("script"); a = (document.currentScript || a[a.length - 1]).getAttribute("src"); a = new wc(a); var b = a.a; Oc = b = b.match(/^www\.gstatic\.cn/) ? "gstatic.cn" : "gstatic.com"; Rc(a) }
    function Rc(a) { a = new U(a.c.toString()); var b = a.get("callback"); "string" === typeof b && (b = Sc(b), J.f.v.aa().then(b)); a = a.get("autoload"); if ("string" === typeof a) try { if ("" !== a) { var c = JSON.parse(a).modules; for (a = 0; a < c.length; a++) { var d = c[a]; Qc(d.name, d.version, d) } } } catch (e) { throw Error("Autoload failed with: " + e); } }
    function Tc(a) { var b = a, c, d = a.match(/^testing-/); d && (b = b.replace(/^testing-/, "")); a = b; do { if (b === J.f.J[b]) throw Error("Infinite loop in version mapping: " + b); (c = J.f.J[b]) && (b = c) } while (c); c = (d ? "testing-" : "") + b; return { version: "pre-45" == b ? a : c, ba: c } }
    function Uc(a) { var b = J.f.I.ha[Oc].loader, c = Tc(a); return J.f.o.load(b, { version: c.ba }).then(function () { var d = y("google.charts.loader.VersionSpecific.load") || y("google.charts.loader.publicLoad") || y("google.charts.versionSpecific.load"); if (!d) throw Error("Bad version: " + a); Nc = function (e) { e = d(c.version, e); if (null == e || null == e.then) { var f = y("google.charts.loader.publicSetOnLoadCallback") || y("google.charts.versionSpecific.setOnLoadCallback"); e = new Promise(function (g) { f(g) }); e.then = f } return e } }) }
    function Vc(a) { "string" === typeof a && (a = [a]); Array.isArray(a) && 0 !== a.length || (a = J.f.I.Y); var b = []; a.forEach(function (c) { c = c.toLowerCase(); b = b.concat(c.split(/[\s,]+\s*/)) }); return b } function Wc(a) { a = a || ""; for (var b = a.replace(/-/g, "_").toLowerCase(); "string" === typeof b;)a = b, b = J.f.W[b], b === a && (b = !1); b || (a.match(/_[^_]+$/) ? (a = a.replace(/_[^_]+$/, ""), a = Wc(a)) : a = "en"); return a }
    function Xc(a) { a = a || ""; "" !== X && X !== a && (console.warn(" Attempting to load version '" + a + "' of Google Charts, but the previously loaded '" + (X + "' will be used instead.")), a = X); return X = a || "" } function Yc(a) { a = a || ""; "" !== Y && Y !== a && (console.warn(" Attempting to load Google Charts for language '" + a + "', but the previously loaded '" + (Y + "' will be used instead.")), a = Y); "en" === a && (a = ""); return Y = a || "" } function Zc(a) { var b = {}, c; for (c in a) b[c] = a[c]; return b }
    function $c(a, b) { b = Zc(b); b.domain = Oc; b.callback = Sc(b.callback); a = Xc(a); var c = b.language; c = Yc(Wc(c)); b.language = c; if (!Mc) { if (b.enableUrlSettings && window.URLSearchParams) try { a = (new URLSearchParams(top.location.search)).get("charts-version") || a } catch (d) { console.info("Failed to get charts-version from top URL", d) } Mc = Uc(a) } b.packages = Vc(b.packages); return Z = Mc.then(function () { return Nc(b) }) } J.ia = function (a) { return J.load(Object.assign({}, a, { safeMode: !0 })) }; D("google.charts.safeLoad", J.ia);
    J.load = function (a) { for (var b = [], c = 0; c < arguments.length; ++c)b[c] = arguments[c]; c = 0; "visualization" === b[c] && c++; var d = "current"; if ("string" === typeof b[c] || "number" === typeof b[c]) d = String(b[c]), c++; var e = {}; za(b[c]) && (e = b[c]); return $c(d, e) }; D("google.charts.load", J.load); J.R = function (a) { if (!Z) throw Error("Must call google.charts.load before google.charts.setOnLoadCallback"); return a ? Z.then(a) : Z }; D("google.charts.setOnLoadCallback", J.R);
    var ad = H("https://maps.googleapis.com/maps/api/js?jsapiRedirect=true"), bd = H("https://maps-api-ssl.google.com/maps?jsapiRedirect=true&file=googleapi");
    function cd(a, b, c) { console.warn("Loading Maps API with the jsapi loader is deprecated."); c = c || {}; a = c.key || c.client; var d = c.libraries, e = function (h) { for (var k = {}, m = 0; m < h.length; m++) { var p = h[m]; k[p[0]] = p[1] } return k }(c.other_params ? c.other_params.split("&").map(function (h) { return h.split("=") }) : []), f = Object.assign({}, { key: a, sa: d }, e), g = "2" === b ? bd : ad; Z = new Promise(function (h) { var k = Sc(c && c.callback); J.f.o.load(g, {}, f).then(k).then(h) }) } var dd = H("https://www.gstatic.com/inputtools/js/ita/inputtools_3.js");
    function ed(a, b, c) { za(c) && c.packages ? (Array.isArray(c.packages) ? c.packages : [c.packages]).includes("inputtools") ? (console.warn('Loading "elements" with the jsapi loader is deprecated.\nPlease load ' + (dd + " directly.")), Z = new Promise(function (d) { var e = Sc(c && c.callback); J.f.o.load(dd, {}, {}).then(e).then(d) })) : console.error('Loading "elements" other than "inputtools" is unsupported.') : console.error("google.load of elements was invoked without specifying packages") } var fd = H("https://ajax.googleapis.com/ajax/libs/%{module}/%{version}/%{file}");
    function gd(a, b) { var c; do { if (a === b[a]) throw Error("Infinite loop in version mapping for version " + a); (c = b[a]) && (a = c) } while (c); return a }
    function hd(a, b, c) { var d = J.f.V.$[a]; if (d) { b = gd(b, d.aliases); d = d.versions[b]; if (!d) throw Error("Unknown version, " + b + ", of " + a + "."); var e = { module: a, version: b || "", file: d.compressed }; b = Pa(J.f.o.Z({ format: fd, K: e })).toString(); console.warn("Loading modules with the jsapi loader is deprecated.\nPlease load " + (a + " directly from " + b + ".")); Z = new Promise(function (f) { var g = Sc(c && c.callback); J.f.o.load(fd, e).then(g).then(f) }) } else setTimeout(function () { throw Error('Module "' + a + '" is not supported.'); }, 0) }
    function Sc(a) { return function () { if ("function" === typeof a) a(); else if ("string" === typeof a && "" !== a) try { var b = y(a); if ("function" !== typeof b) throw Error("Type of '" + a + "' is " + typeof b + "."); b() } catch (c) { throw Error("Callback of " + a + " failed with: " + c); } } } function Qc(a) { for (var b = [], c = 0; c < arguments.length; ++c)b[c] = arguments[c]; switch (b[0]) { case "maps": cd.apply(null, ba(b)); break; case "elements": ed.apply(null, ba(b)); break; case "visualization": J.load.apply(J, ba(b)); break; default: hd.apply(null, ba(b)) } }
    D("google.loader.LoadFailure", !1); Oc ? console.warn("Google Charts loader.js should only be loaded once.") : Pc(); J.f.u.ra = Pc; J.f.u.xa = Tc; J.f.u.ya = Wc; J.f.u.za = Vc; J.f.u.Ja = Xc; J.f.u.Ia = Yc; J.f.u.Aa = Rc; J.f.u.qa = function () { return Nc };
}).call(this);


//var mapView = function (options) {
//    this.TabNum = options.tabNum;
//    this.Wc = options.Wc;
//    this.Cid = options.Cid;
//    this.EbObject = options.dsobj;
//    this.GoogleKey = options.googlekey;
//    this.Refid = options.refid;
//    this.CurrentStatus = options.cur_status;
//    this.SSUrl = options.ssurl;
//    this.Ver_Num = options.ver_num;
//    this.Login = options.login;
//    this.TenantId = options.TenantId;
//    this.UserId = options.UserId;

//    this.initPropertyGrid = function () {
//        this.propGrid = new Eb_PropertyGrid({
//            id: `propGrid-${this.TabNum}`,
//            wc: this.Wc,
//            cid: this.Cid,
//            $extCont: $(`#pgt-cont-${this.TabNum}`),
//            isDraggable: true
//        });

//        if (this.EbObject === null) {
//            this.EbObject = new EbObjects.EbOpenStreetMap(`EbMapView${Date.now()}`);
//        }
//        commonO.Current_obj = this.EbObject;
//        this.propGrid.setObject(this.EbObject, AllMetas["EbOpenStreetMap"]);
//        this.propGrid.PropertyChanged = this.popChanged.bind(this);

//    };

//    this.popChanged = function (obj, pname, newval, oldval) {
//        if (pname === "DataSourceRefId") {
//            if (obj[pname] !== null) {
//                //this.PcFlag = true;
//                //this.EbObject.Columns.$values = [];
//                //this.EbObject.DSColumns.$values = [];
//                //this.EbObject.LatLong = null;
//                this.call2FD();
//            }
//        }
//    };

//    this.call2FD = function () {
//        this.relatedObjects = this.EbObject.DataSourceRefId;
//        $("#eb_common_loader").EbLoader("show");
//        $.ajax({
//            type: "POST",
//            url: "../DV/dvCommon",
//            data: { dvobj: JSON.stringify(this.EbObject), dvRefId: this.Refid, _flag: this.PcFlag, login: this.login, contextId: this.ContextId, _curloc: store.get("Eb_Loc-" + this.TenantId + this.UserId) },
//            success: this.ajaxSucc
//        });

//    };

//    this.ajaxSucc = function (text) {
//        this.AppendFD(text);
//    }.bind(this);

//    this.AppendFD = function (result) {
//        $('.param-div-cont').remove();
//        $(`#column-cont-${this.TabNum}`).prepend(`
//                <div id='paramdiv-Cont${this.TabNum}' class='param-div-cont'>
//                <div id='paramdiv${this.TabNum}' class='param-div fd'>
//                    <div class='pgHead'>
//                        <h6 class='smallfont' style='font-size: 12px;display:inline'>Filter Dialogue</h6>
//                        <div class="icon-cont  pull-right" id='close_paramdiv${this.TabNum}'><i class="fa fa-times" aria-hidden="true"></i></div>
//                    </div>
//                    </div>
//                    </div>
//                `);

//        $('#paramdiv' + this.tabNum).append(result);
//        $('#close_paramdiv' + this.TabNum).off('click').on('click', this.CloseParamDiv.bind(this));
//        $("#btnGo").off("click").on("click", this.GetFilterValues.bind(this));
//        if (typeof FilterDialog !== "undefined") {
//            $(".param-div-cont").show();
//            this.stickBtn = new EbStickButton({
//                $wraper: $(".param-div-cont"),
//                $extCont: $(".param-div-cont"),
//                icon: "fa-filter",
//                dir: "left",
//                label: "Parameters",
//                style: { top: "230px" }
//            });
//            this.filterDialog = FilterDialog;
//        }
//        else {
//            $(".param-div-cont").hide();
//            this.filterDialog = null;
//        }
//    };

//    this.GetFilterValues = function () {
//        this.filtervalues = [];
//        if (this.filterDialog)
//            this.filtervalues = getValsForViz(this.filterDialog.FormObj);

//        let temp = $.grep(this.filtervalues, function (obj) { return obj.Name === "eb_loc_id"; });
//        if (temp.length === 0)
//            this.filtervalues.push(new fltr_obj(11, "eb_loc_id", store.get("Eb_Loc-" + ebcontext.sid + ebcontext.user.UserId)));
//        temp = $.grep(this.filtervalues, function (obj) { return obj.Name === "eb_currentuser_id"; });
//        if (temp.length === 0)
//            this.filtervalues.push(new fltr_obj(11, "eb_currentuser_id", ebcontext.user.UserId));
//        if (this.stickBtn) { this.stickBtn.minimise(); }
//    };

//    this.CloseParamDiv = function () {
//        this.stickBtn.minimise();
//    };

//    this.init = function () {
//        this.initPropertyGrid();
//    };

//    this.init();
//}



var informaion = function (nam, val) {
    this.name = nam;
    this.value = val;
};

var BuilderMode = {
    NEW: "new",
    EDIT: "edit"
};
var mapView = function (option) {
    this.propGrid = option.PGobj || null;
    this.data = null;
    this.ssurl = option.ssurl;
    this.EbObject = option.dsobj || null;
    this.Refid = option.refid || "";
    this.tabNum = option.tabNum || 0;
    this.tableId = option.tableId || null;
    this.drake = null;
    this.PcFlag = false;
    this.login = option.login || "dc";
    this.relatedObjects = null;
    this.FD = false;
    this.MainData = option.data || null;
    this.isPipped = false;
    this.isContextual = false;
    this.filterValues = (option.filterValues !== "" && option.filterValues !== undefined && option.filterValues !== null) ? JSON.parse(decodeURIComponent(escape(window.atob(option.filterValues)))) : [];
    this.rowData = (option.rowData !== undefined && option.rowData !== null && option.rowData !== "") ? JSON.parse(decodeURIComponent(escape(window.atob(option.rowData)))) : null;
    this.isTagged = false;
    this.bot = false;
    this.cellData = option.cellData;
    this.filterHtml = "";
    this.isSecondTime = false;
    this.Mode = null;
    this.counter = option.counter || 0;
    this.TenantId = option.TenantId;
    this.UserId = option.UserId;
    this.googlekey = option.googlekey;
    this.Source = option.Source || "Visualization";
    this.ObjCollection = {};
    this.CurrentMapType = this.EbObject ? this.EbObject.Maptype : 0;
    this.TempEbObject;
    this.Temp2EbObject;
    this.MapEnum = {};
    this.MapEnum[0] = "EbOpenStreetMap";
    this.MapEnum[1] = "EbGoogleMap";

    if (this.Source === "Visualization") {
        let split_window = new splitWindow("parent-div0", "contBox");

        split_window.windowOnFocus = function (ev) {
            $("#Relateddiv").hide();
            if ($(ev.target).attr("class") !== undefined) {
                if ($(ev.target).attr("class").indexOf("sub-windows") !== -1) {
                    var id = $(ev.target).attr("id");
                    focusedId = id;
                }
            }
        }.bind(this);

        this.init = function () {
            if (this.EbObject === null) {
                this.EbObject = new EbObjects.EbOpenStreetMap(`EbMapView${Date.now()}`);
                this.Mode = BuilderMode.NEW;
            }
            else {
                this.CurrentMapType = this.EbObject.Maptype;
                this.Mode = BuilderMode.EDIT;
            }
            this.MapObjectCollFn();
            if (this.MainData !== null)
                split_window.createContentWindow(this.EbObject.EbSid + "_" + this.tabNum + "_" + this.counter, "EbGoogleMap", prevfocusedId);
            else
                split_window.createContentWindow(this.EbObject.EbSid + "_" + this.tabNum + "_" + this.counter, "EbGoogleMap");
            if (this.login === "dc") {
                if (this.propGrid === null) {
                    this.CreatePg();
                }
                else {
                    $(".form-group #ppt-grid").remove();
                    $(".form-group").prepend(`<button class="btn filter_menu" id="ppt-grid">
                                    <i class="fa fa-cog" aria-expanded="false"></i>
                                </button>`);
                    $(".stickBtn").hide();
                    this.PropertyDiv = $("#pp_inner");
                    $("#ppt-grid").off("click").on("click", this.togglePG.bind(this));
                    $("#pp_inner .pull-right.pgpin").remove();
                    $("#pp_inner .pgHead").append(`<div class="icon-cont  pull-right" id="${this.tabNum}_pg-close">
                <i class="fa fa-thumb-tack" style="transform: rotate(90deg);"></i></div>`);
                    $(`#${this.tabNum}_pg-close`).off("click").on("click", this.togglePG.bind(this));
                }
            }
            this.InitParamWindow();
            if (this.Mode === BuilderMode.EDIT)
                this.call2FD();
        };

        this.MapObjectCollFn = function () {
            if (this.EbObject.Maptype === 0) {
                this.Temp2EbObject = $.extend(new EbObjects.EbGoogleMap(`EbMapView${Date.now()}`), this.EbObject);
                this.TempEbObject = $.extend(new EbObjects.EbOpenStreetMap(`EbMapView${Date.now()}`), this.EbObject);
                this.Temp2EbObject.Maptype = 1;
            }
            else {
                this.TempEbObject = $.extend(new EbObjects.EbOpenStreetMap(`EbMapView${Date.now()}`), this.EbObject);
                this.Temp2EbObject = $.extend(new EbObjects.EbGoogleMap(`EbMapView${Date.now()}`), this.EbObject);
                this.TempEbObject.Maptype = 0;
            }
        };

        this.CreatePg = function () {
            $(".form-group #ppt-grid").remove();
            $(".form-group").prepend(`<button class="btn filter_menu" id="ppt-grid">
                                    <i class="fa fa-cog" aria-expanded="false"></i>
                                </button>`);
            this.propGrid = new Eb_PropertyGrid({
                id: "pp_inner",
                wc: "dc",
                cid: this.cid,
                $extCont: $(".ppcont")
            });
            this.propGrid.PropertyChanged = this.tmpPropertyChanged;
            commonO.Current_obj = this.EbObject;
            this.MapSwitch(this.EbObject, this.CurrentMapType);
            $(".stickBtn").hide();
            this.PropertyDiv = $("#pp_inner");
            $("#ppt-grid").off("click").on("click", this.togglePG.bind(this));
            $("#pp_inner .pull-right.pgpin").remove();
            $("#pp_inner .pgHead").append(`<div class="icon-cont  pull-right" id="${this.tabNum}_pg-close">
                <i class="fa fa-thumb-tack" style="transform: rotate(90deg);"></i></div>`);
            $(`#${this.tabNum}_pg-close`).off("click").on("click", this.togglePG.bind(this));
        };
        this.togglePG = function () {
            this.PropertyDiv.toggle('drop', { direction: 'right' }, 150);
        };
        this.MapSwitch = function (obj, newVal) {
            if (this.CurrentMapType == 0) {
                this.TempEbObject.Maptype = 0;
                this.Temp2EbObject.Maptype = 1;
            }
            else {
                this.Temp2EbObject.Maptype = 1;
                this.TempEbObject.Maptype = 0;
            }
            if (newVal === 0) {
                this.propGrid.setObject(this.TempEbObject, AllMetas["EbOpenStreetMap"]);
                this.EbObject = $.extend(new EbObjects.EbOpenStreetMap(`EbMapView${Date.now()}`), this.TempEbObject);
            }
            else if (newVal === 1) {
                this.propGrid.setObject(this.Temp2EbObject, AllMetas["EbGoogleMap"]);
                this.EbObject = $.extend(new EbObjects.EbGoogleMap(`EbMapView${Date.now()}`), this.Temp2EbObject);
            }
        };

        this.InitParamWindow = function () {
            this.tableId = "dv" + this.EbObject.EbSid + "_" + this.tabNum + "_" + this.counter;
            this.ContextId = "filterWindow_" + this.tableId;
            this.FDCont = $(`<div id='${this.ContextId}' class='filterCont fd'></div>`);
            $("#parent-div0").before(this.FDCont);
            this.FDCont.hide();

            if (this.login === "dc") {
                $(".form-group #filter-dg").remove();
                $(".form-group").prepend(`<button class="btn filter_menu" id="filter-dg">
                                    <i class="fa fa-filter" aria-expanded="false"></i>
                                </button>`);
                this.FilterBtn = $("#filter-dg");
                this.FilterBtn.off("click").on("click", this.FilterToggle.bind(this));
                //this.stickBtn = new EbStickButton({
                //    $wraper: this.FDCont,
                //    $extCont: this.FDCont,
                //    //$scope: $(subDivId),
                //    icon: "fa-filter",
                //    dir: "left",
                //    label: "Parameters",
                //    //btnTop: 42,
                //    style: { top: "112px" }
                //});
            }
        };

        this.tmpPropertyChanged = function (obj, Pname, newval, oldval) {
            if (Pname === "DataSourceRefId") {
                if (obj[Pname] !== null) {
                    this.Temp2EbObject.DataSourceRefId = newval;
                    this.TempEbObject.DataSourceRefId = newval;
                    this.MapSwitch(obj, obj.Maptype);
                    this.PcFlag = true;
                    this.EbObject.Columns.$values = [];
                    this.EbObject.DSColumns.$values = [];
                    this.EbObject.LatLong = null;
                    this.call2FD();
                }
            }
            else if (Pname === "Name") {
                $("#objname").text(obj.DisplayName);
            }
            else if (Pname === "Maptype") {
                this.Temp2EbObject.DataSourceRefId = obj.DataSourceRefId;
                this.TempEbObject.DataSourceRefId = obj.DataSourceRefId;
                this.MapSwitch(obj, obj.Maptype);
            }
        }.bind(this);
    }

    this.init4Other = function () {
        this.Mode === BuilderMode.EDIT;
        this.getDataCall();
    }

    this.call2FD = function () {
        this.relatedObjects = this.EbObject.DataSourceRefId;
        $("#eb_common_loader").EbLoader("show");
        $.ajax({
            type: "POST",
            url: "../DV/dvCommon",
            data: { dvobj: JSON.stringify(this.EbObject), dvRefId: this.Refid, _flag: this.PcFlag, login: this.login, contextId: this.ContextId, _curloc: store.get("Eb_Loc-" + this.TenantId + this.UserId) },
            success: this.ajaxSucc
        });

    };

    this.ajaxSucc = function (text) {
        if (this.login === "uc")
            $("#ppcont").hide();
        if (this.MainData !== null) {
            $("#Pipped").show();
            $("#Pipped").text("Pipped From: " + this.EbObject.Pippedfrom);
            this.isPipped = true;
            //this.filterValues = dvcontainerObj.dvcol[prevfocusedId].filterValues;
        }
        else if (this.rowData !== null && this.rowData !== "") {
            this.isContextual = true;
        }
        else
            this.isTagged = true;

        $("#obj_icons").empty();
        $("#obj_icons").append("<button id='btnGo" + this.tabNum + "' class='btn commonControl'><i class='fa fa-play' aria-hidden='true'></i></button>");
        $("#btnGo" + this.tabNum).click(this.Getdata.bind(this));
        var subDivId = "#sub_window_dv" + this.EbObject.EbSid + "_" + this.tabNum + "_" + this.counter;
        $("#content_dv" + this.EbObject.EbSid + "_" + this.tabNum + "_" + this.counter).empty();
        this.filterHtml = text;

        this.FDCont = $("#filterWindow_" + this.tableId);
        $("#filterWindow_" + this.tableId).empty();
        $("#filterWindow_" + this.tableId).append("<div class='pgHead'> Param window <div class='icon-cont  pull-right' id='close_paramdiv_" + this.tableId + "'><i class='fa fa-thumb-tack' style='transform: rotate(90deg);'></i></div></div>");//
        $("#filterWindow_" + this.tableId).children().find('#close_paramdiv_' + this.tableId).off('click').on('click', this.CloseParamDiv.bind(this));
        $("#filterWindow_" + this.tableId).append(text);
        $("#filterWindow_" + this.tableId).children().find("#btnGo").click(this.Getdata.bind(this));

        this.FilterDialog = (typeof (FilterDialog) !== "undefined") ? FilterDialog : {};
        if (this.login === "uc") {
            $(".form-group #filter-dg").remove();
            $(".form-group").prepend(`<button class="btn filter_menu" id="filter-dg">
                                    <i class="fa fa-filter" aria-expanded="false"></i>
                                </button>`);
            this.FilterBtn = $("#filter-dg");
            this.FilterBtn.off("click").on("click", this.FilterToggle.bind(this));
            //this.stickBtn = new EbStickButton({
            //    $wraper: $(".dv-body"),
            //    $extCont: this.FDCont,
            //    $scope: $("#" + focusedId),
            //    icon: "fa-filter",
            //    dir: "left",
            //    label: "Parameters",
            //    //btnTop: 42,
            //    style: { position: "absolute", top: "41px" }
            //});
        }

        if (typeof commonO !== "undefined")
            this.EbObject = commonO.Current_obj;
        else
            this.EbObject = dvcontainerObj.currentObj;

        if ($("#" + this.ContextId).children("#filterBox").length === 0) {
            this.FD = false;
            this.FDCont.hide();
            if (this.login === "dc") {
                //this.stickBtn.hide();
                this.FilterBtn.hide();
            }
            else {
                //dvcontainerObj.dvcol[focusedId].stickBtn.hide();
                this.FilterBtn.hide();
            }
            $("#btnGo" + this.tabNum).trigger("click");
            $("#eb_common_loader").EbLoader("hide");
        }
        else {
            this.FD = true;
            if (this.isPipped || this.isContextual) {
                this.placefiltervalues();
                $("#btnGo" + this.tabNum).trigger("click");
            }
            else {
                this.FDCont.show();
                this.FDCont.css("visibility", "visible");
            }
            $("#eb_common_loader").EbLoader("hide");
        }
        $(subDivId).focus();
        this.PcFlag = false;
        this.FDCont.css("right", "0");
    }.bind(this);

    this.FilterToggle = function () {
        $(".filterCont").toggle('drop', { direction: 'right' }, 150);
    };
    this.CloseParamDiv = function () {
        //this.stickBtn.minimise();
        this.FilterToggle();
    };

    this.Getdata = function () {
        this.EbObject = this.EbObject;
        //$.event.props.push('dataTransfer');
        this.CreateGoggleDiv();
        this.appendColumns();
        this.appendLatLong();
        if (this.login === "uc") {
            this.collapseGraph();
        }
        else
            this.PropertyDiv.hide();
        //this.propGrid.ClosePG();
        if (this.FD) {
            this.FilterToggle();
            //this.stickBtn.minimise();
        }
        else {
            this.FilterBtn.hide();
            //this.stickBtn.hide();
        }

        filterChanged = false;
        if (this.MainData !== null && !this.isSecondTime) {
            this.drawMapHelper(this.MainData.data);
        }
        else {
            if (this.login === "uc") {
                dvcontainerObj.currentObj.Pippedfrom = "";
                $("#Pipped").text("");
                this.isPipped = false;
            }
            if (this.isContextual) {
                if (this.isSecondTime) {
                    if (this.FilterDialog.IsFDValidationOK && !this.FilterDialog.IsFDValidationOK())
                        return;
                    this.filterValues = this.getFilterValues();
                }
            }
            else {
                if (this.FilterDialog.IsFDValidationOK && !this.FilterDialog.IsFDValidationOK())
                    return;
                this.filterValues = this.getFilterValues();
            }
            $("#eb_common_loader").EbLoader("show");
            this.getDataCall();
            this.isSecondTime = true;
        }
        this.GenerateButtons();

    };

    this.getDataCall = function () {
        $.ajax({
            type: 'POST',
            url: "../DV/getdata",
            data: { DataVizObjString: JSON.stringify(this.EbObject), draw: 1, RefId: this.EbObject.DataSourceRefId, Start: 0, Length: 50, TFilters: [], Params: this.filterValues, dvRefId: this.Refid },
            //beforeSend: function (xhr) {
            //    xhr.setRequestHeader("Authorization", "Bearer " + getToken());
            //},
            success: this.getDataSuccess.bind(this),
            error: function () { }
        });
    };

    this.getFilterValues = function () {
        var fltr_collection = [];

        if (this.FD)
            fltr_collection = getValsForViz(this.FilterDialog.FormObj);

        return fltr_collection;
    };

    this.CreateGoggleDiv = function () {
        $("#content_" + this.tableId).empty();
        $("#content_" + this.tableId).append(
            `<div id='graphcontainer_tab${this.tableId}' style='height:inherit;' class='chartCont'>
                <div class='col-md-2 no-padd' id='columnsDisplay${this.tableId}' style='height:inherit;'>
                <div class='tag-cont'>
                  <div class='tag-wraper'><div class='pgHead'>Data</div><div class='tag-scroll'><div id='ColumnCont${this.tableId}'></div>
                    <ul id="data-table-list_${this.tableId}" class="tool-box-items">
                        <li>
                            <a>Columns</a>
                            <ul id="Columns${this.tableId}"></ul>
                        </li>
                    </ul>
                </div></div>
                </div>
                </div>
                <div class='col-md-10 canvasParentDiv' id='canvasParentDiv${this.tableId}'>
                    <div id='xy${this.tableId}' style='vertical-align: top;'> 
                        <div class='input-group' >
                            <span class='input-group-addon' id='basic-addon3'> LatLong</span> 
                            <div class='form-control' style='padding: 4px;height:33px' id='LatLong${this.tableId}' ></div> 
                        </div>                
                    </div> 
                <div id='canvasDiv${this.tableId}' class="canvasstyle" ><canvas id='myChart${this.tableId}'></canvas></div> 
                </div> 
                </div>`);
    };

    this.getDataSuccess = function (result) {
        if (this.Source === "Visualization") {
            $("#eb_common_loader").EbLoader("hide");
            if (this.login === "uc")
                dvcontainerObj.currentObj.data = result;
        }
        this.MainData = result;
        this.data = result.data;
        this.formatedData = result.formattedData;
        if (this.EbObject.Maptype === 1) {
            this.drawMapHelper();
        }
        else { this.drawOSMapHelper(); }
    };

    //this.drawOSMapHelper = function () {

    //};

    this.drawOSMapHelper = function (datain) {
        if (datain)
            this.data = datain;
        if (this.EbObject.LatLong !== null)
            this.drawOSMap();
    };

    this.drawOSMap = function () {
        $("#canvasDiv" + this.tableId).children("iframe").remove();
        $("#myChart" + this.tableId).remove();
        if ($("#map" + this.tableId).children().length === 0)
            $("#canvasDiv" + this.tableId).append("<div id='map" + this.tableId + "' style='height:100%;width:100%;'></div>");
        Xlabel = this.XLabel;
        Ylabel = this.YLabel;
        showRoute = this.EbObject.ShowRoute;
        //if (!this.isMyScriptLoaded("https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js")) {
        //    $("#layout_div").prepend(`
        //    <script data-hai="aa" src= 'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js' ></script>
        //    <script data-hai="aa" async defer
        //        src='https://maps.googleapis.com/maps/api/js?key=${this.googlekey}&callback=initMap2'>
        //    </script>`);
        //}
        //else {
        //    $("#map" + this.tableId).empty();
        //    initMap2();
        //}
        if (this.login === "uc")
            $(".canvasParentDiv").css("padding", " 10px 0px");
        $("#eb_common_loader").EbLoader("hide");
        this.initOSM(this.EbObject, `map${this.tableId}`);
    };


    this.initOSM = function (Ebobject, id) {
        this.getData4GoogleMap();
        this.Ebobject = Ebobject;
        let selector = id;

        let google = window.google;
        if (this.Lat.length > 0) {
            var mid = Math.floor(this.Lat.length / 2);
            var mymap = L.map(selector).setView([this.Lat[mid], this.Long[mid]], 13);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
                maxZoom: 18,
                id: 'mapbox/streets-v11',
                tileSize: 512,
                zoomOffset: -1,
            }).addTo(mymap);

            var markerArray = [];
            var marker, i;
            for (i = 0; i < this.Lat.length; i++) {
                var marker = L.marker([this.Lat[i], this.Long[i]]).addTo(mymap);
                var content = "", url = "";
                $.each(this.Inform, function (k, obj) {
                    content += obj.value[i] + "</br>";
                });
                if (this.MarkerLink) {
                    let _l = ebcontext.languages.getCurrentLanguageCode();
                    url = `../webform/index?_r=${this.MarkerLink}&_p=${btoa(JSON.stringify([this.markerParams[i]]))}&_m=1&_l=${store.get("Eb_Loc-" + Te_id + Usr_id)}&_lg=${_l}`;
                    content += `<a href="#" onclick='window.open("${url}","_blank");'>Details</a>`;
                }
                if (content === "")
                    content = "no details";

                marker.bindPopup(`<div>${content}</div>`).openPopup();
                markerArray.push(marker);

                if (this.AutoZoom)
                    if (i == this.Lat.length - 1) {//this is the case when all the markers would be added to array
                        var group = L.featureGroup(markerArray); //add markers array to featureGroup
                        mymap.fitBounds(group.getBounds());
                    }
            }

        }
        else {
            $(`#map${this.tableId}`).append("<div class='map_inner'>No Data Available</div>");
        }
    }


    this.GenerateButtons = function () {
        $("#objname").text(this.EbObject.DisplayName);
        $("#obj_icons").empty();
        $("#obj_icons").append("<button id='btnGo" + this.tableId + "' class='btn commonControl'><i class='fa fa-play' aria-hidden='true'></i></button>");
        $("#btnGo" + this.tableId).click(this.Getdata.bind(this));
        $("#obj_icons").append(`           
            <button id='btnColumnCollapse${this.tableId}' class='btn' style='display: inline-block;'>
            <i class="fa fa-cogs" aria-hidden="true"></i>
            </button>`);

        if (this.login === "uc") {
            dvcontainerObj.modifyNavigation();
            $(`#btnColumnCollapse${this.tableId}`).hide();
        }
        this.bindEvents();

        if (this.bot) {
            $("#columnsDisplay" + this.tableId).empty();
            $("#columnsDisplay" + this.tableId).append(`<div class="pgHead">User:<label></label></div>`);
            $("#xy" + this.tableId).hide();
            $(".toolicons").hide();
            $("#canvasParentDiv" + this.tableId).removeClass("col-md-10").addClass("col-md-9");
            $("#columnsDisplay" + this.tableId).removeClass("col-md-2").addClass("col-md-3").addClass("botdata_cont").show();

        }
    };

    this.bindEvents = function () {
        $("#btnColumnCollapse" + this.tableId).off("click").on("click", this.collapseGraph.bind(this));
    };

    this.appendColumns = function () {
        this.appendColumns4Google();
        $('#data-table-list_' + this.tableId).killTree();
        $('#data-table-list_' + this.tableId).treed();
        $('#data-table-list_' + this.tableId + ' .branch a').trigger("click");
        this.updateDragula();
    };

    this.appendColumns4Google = function () {
        let temparray = [];
        if (this.EbObject.LatLong)
            temparray = this.EbObject.Columns.$values.filter((obj) => obj.name !== this.EbObject.LatLong.name);
        else
            temparray = this.EbObject.Columns.$values;
        $.each(temparray, function (i, obj) {
            this.AppendColumnInsideFn(obj);
        }.bind(this));
    };

    this.AppendColumnInsideFn = function (obj) {
        if (obj.Type === 16)
            _classname = "fa-font";
        else if (obj.Type === 5 || obj.Type === 6)
            _classname = "fa-calendar";
        else if (obj.Type === 8 || obj.Type === 7 || obj.Type === 11 || obj.Type === 12)
            _classname = "fa-sort-numeric-asc";

        $("#Columns" + this.tableId).append(`<li class='colTiles' style='display: list-item;' id='li${obj.name}' data-id='${obj.data}' data-type=${obj.Type}><span><i class='fa ${_classname}'></i></span>${obj.name}</li>`);
    };

    this.appendLatLong = function () {
        if (this.EbObject.LatLong !== null) {
            let obj = this.EbObject.LatLong;
            $("#LatLong" + this.tableId).empty();
            $("#LatLong" + this.tableId).append("<li class='colTiles columnDrag' id='li" + obj.name + "' data-id='" + obj.data + "' data-type='" + obj.Type + "'>" + obj.name + "<button class='close' type='button'>x</button></li>");

        }
        $("#LatLong" + this.tableId + " button[class=close]").off("click").on("click", this.RemoveAndAddToColumns.bind(this));
    };

    this.updateDragula = function (status) {
        if (this.drake)
            this.drake.destroy();
        this.drake = new dragula([document.getElementById("Columns" + this.tableId), document.getElementById("LatLong" + this.tableId)], {
            accepts: this.acceptDrop1.bind(this)
        });
        this.drake.off("drop").on("drop", this.colDrop.bind(this));
        if (this.login === "dc")
            this.propGrid.setObject(this.EbObject, AllMetas["EbGoogleMap"]);
    };

    this.acceptDrop1 = function (el, target, source, sibling) {
        if ($(source).attr("id") === "Columns" + this.tableId && $(target).attr("id") === "LatLong" + this.tableId) {
            if ($(target).children().length > 0) {
                return false;
            }
            else
                return true;
        }
        return false;
    };

    this.colDrop = function (el, target, source, sibling) {
        $(el).addClass("columnDrag");
        $(el).children("span").remove();
        $(el).children(".close").remove();
        var temp;
        $(el).css("display", "inline-block");
        var name = $(el).text();
        $(el).append("<button class='close' type='button'>x</button>");


        if ($(target).attr("id") === "LatLong" + this.tableId) {
            let temp = $.grep(this.EbObject.Columns.$values, function (obj) { return obj.name === name; });
            this.EbObject.LatLong = temp[0];
            this.drawMapHelper(this.data);
        }
        $("#LatLong" + this.tableId + " button[class=close]").off("click").on("click", this.RemoveAndAddToColumns.bind(this));
    };

    this.RemoveAndAddToColumns = function (e) {
        var str = $(e.target).parent().text();
        let tempObj = new Object();
        tempObj.Type = parseInt($(e.target).parent().attr("data-type"));
        tempObj.name = str.substr(0, str.length - 1).trim();
        tempObj.data = $(e.target).parent().attr("data-id");

        this.AppendColumnInsideFn(tempObj);
        $(e.target).parent().remove();

        this.EbObject.LatLong = null;
        $("#map" + this.tableId).remove();
        $("#myChart" + this.tableId).remove();
        $("#canvasDiv" + this.tableId).append("<canvas id='myChart" + this.tableId + "' width='auto' height='auto'></canvas>");
    };

    this.drawMapHelper = function (datain) {
        if (datain)
            this.data = datain;
        if (this.EbObject.LatLong !== null)
            this.drawMap();
    };

    this.drawMap = function () {
        this.getData4GoogleMap();
        $("#canvasDiv" + this.tableId).children("iframe").remove();
        $("#myChart" + this.tableId).remove();
        if ($("#map" + this.tableId).children().length === 0)
            $("#canvasDiv" + this.tableId).append("<div id='map" + this.tableId + "' style='height:100%;width:100%;'></div>");
        Xlabel = this.XLabel;
        Ylabel = this.YLabel;
        showRoute = this.EbObject.ShowRoute;
        if (!this.isMyScriptLoaded("https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js")) {
            $("#layout_div").prepend(`
            <script data-hai="aa" src= 'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js' ></script>
            <script data-hai="aa" async defer
                src='https://maps.googleapis.com/maps/api/js?key=${this.googlekey}&callback=initMap2'>
            </script>`);
        }
        else {
            $("#map" + this.tableId).empty();
            initMap2();
        }
        if (this.login === "uc")
            $(".canvasParentDiv").css("padding", " 10px 0px");
        $("#eb_common_loader").EbLoader("hide");
    };

    this.getData4GoogleMap = function () {
        if (this.EbObject.LatLong !== null) {
            this.getData4LatLong();
            this.getData4MarkerLabel();
            this.getData4InfoWindow();

            if (this.EbObject.Zoomlevel)
                this.zoomlevel = this.EbObject.Zoomlevel;
            this.showRoute = this.EbObject.ShowRoute;
            this.AutoZoom = this.EbObject.AutoZoom;
            this.MarkerLink = this.EbObject.MarkerLink;

            if (this.EbObject.FormParameter.$values.length > 0) {
                let obj = this.EbObject.FormParameter.$values[0];
                $.each(this.data, function (k, value) {
                    this.markerParams.push(new fltr_obj(obj.Type, obj.name, value[obj.data]));
                }.bind(this));
                Te_id = TenantId;
                Usr_id = UserId;
            }
        }
    };

    this.getData4LatLong = function () {
        this.Lat = [], this.Long = [];

        $.each(this.data, function (k, value) {
            if (value[this.EbObject.LatLong.data] && value[this.EbObject.LatLong.data] !== "0,0") {
                let _data = value[this.EbObject.LatLong.data].split(",");
                this.Lat.push(_data[0]);
                this.Long.push(_data[1]);
            }
        }.bind(this));
    };

    this.getData4MarkerLabel = function () {
        let ml = [];
        if (this.EbObject.MarkerLabel) {
            $.each(this.EbObject.MarkerLabel.$values, function (i, obj) {
                if (i === 0)
                    ml.push(obj.data);
            });

            if (ml.length > 0) {
                $.each(this.data, function (i, value) {
                    this.markLabel.push(value[ml[0]].charAt(0));
                }.bind(this));
            }
        }
    };

    this.getData4InfoWindow = function () {
        this.Inform = [];
        if (this.EbObject.InfoWindow) {
            $.each(this.EbObject.InfoWindow.$values, function (i, obj) {
                let info = [];
                $.each(this.formatedData, function (k, value) {
                    info.push(value[obj.data]);
                });
                this.Inform.push(new informaion(obj.name, info));
            }.bind(this));
        }
    };

    window.initMap2 = function () {
        let google = window.google;
        if (this.Lat.length > 0) {
            var infowindow = new google.maps.InfoWindow();
            var directionsService = new google.maps.DirectionsService();
            var directionsDisplay = new google.maps.DirectionsRenderer();
            var bounds = new google.maps.LatLngBounds();
            var mid = Math.floor(this.Lat.length / 2);
            var map = new google.maps.Map(document.getElementById('map' + this.tableId), {
                center: new google.maps.LatLng(this.Lat[mid], this.Long[mid]),
                gestureHandling: 'greedy'
                // mapTypeId: google.maps.MapTypeId.ROADMAP
            });
            if (!this.AutoZoom)
                map.setZoom(this.zoomlevel);
            directionsDisplay.setMap(map);
            var request = {
                travelMode: google.maps.TravelMode.DRIVING
            };
            var marker, i;
            for (i = 0; i < this.Lat.length; i++) {
                var latlng = new google.maps.LatLng(this.Lat[i], this.Long[i]);

                marker = new google.maps.Marker({
                    position: latlng,
                    map: map,
                    //label: markLabel[i]
                });

                if (i === 0) request.origin = marker.getPosition();
                else if (i === this.Lat.length - 1) request.destination = marker.getPosition();
                else {
                    if (!request.waypoints) request.waypoints = [];
                    request.waypoints.push({
                        location: marker.getPosition(),
                        stopover: true
                    });
                }

                var content = "", url = "";
                $.each(this.Inform, function (k, obj) {
                    content += obj.value[i] + "</br>";
                });
                if (this.MarkerLink) {
                    let _l = ebcontext.languages.getCurrentLanguageCode();
                    url = `../webform/index?_r=${this.MarkerLink}&_p=${btoa(JSON.stringify([this.markerParams[i]]))}&_m=1&_l=${store.get("Eb_Loc-" + Te_id + Usr_id)}&_lg=${_l}`;
                    content += `<a href="#" onclick='window.open("${url}","_blank");'>Details</a>`;
                }
                if (content === "")
                    content = "no details";
                infowindow.setContent(content);
                infowindow.setOptions({ maxWidth: 200 });

                google.maps.event.addListener(marker, 'mouseover', (function (marker, content, infowindow) {
                    return function () {
                        infowindow.setContent(content);
                        infowindow.open(map, marker);
                    };
                })(marker, content, infowindow));

                marker.addListener('click', function () {
                    if (url !== "")
                        window.open(url, "_blank");
                });
                map.addListener('click', function () {
                    infowindow.close(map, marker);
                });
                if (this.AutoZoom)
                    bounds.extend(latlng);
            }
            if (this.showRoute) {
                directionsService.route(request, function (result, status) {
                    if (status === google.maps.DirectionsStatus.OK) {
                        directionsDisplay.setDirections(result);
                    }
                });
            }
            if (this.AutoZoom)
                map.fitBounds(bounds);
        }
        else {
            $(`#map${this.tableId}`).append("<div class='map_inner'>No Data Available</div>");
        }

    }.bind(this);

    this.isMyScriptLoaded = function (url) {
        var scripts = document.getElementsByTagName('script');
        for (var i = scripts.length; i--;) {
            if (scripts[i].src === url) return true;
        }
        return false;
    };

    this.collapseGraph = function () {
        $("#columnsDisplay" + this.tableId).toggle();
        $("#xy" + this.tableId).toggle();
        if ($("#columnsDisplay" + this.tableId).css("display") === "none") {
            $("#canvasParentDiv" + this.tableId).removeClass("col-md-10").addClass("col-md-12");
            $("#canvasDiv" + this.tableId).css("height", "100%");
        }
        else {
            $("#canvasParentDiv" + this.tableId).removeClass("col-md-12").addClass("col-md-10");
            $("#canvasDiv" + this.tableId).css("height", "calc(100% - 67px)");
        }
    };
    if (this.Source === "Visualization")
        this.init();
    else
        this.init4Other();

};

$.fn.extend({
    treed: function (o) {
        var openedClass = 'fa-minus-square-o';
        var closedClass = 'fa-plus-square-o';
        var ic = o || 'fa-plus-square-o';

        if (typeof o !== 'undefined') {
            if (typeof o.openedClass !== 'undefined') {
                //openedClass = o.openedClass;
            }
            if (typeof o.closedClass !== 'undefined') {
                //closedClass = o.closedClass;
            }
        }
        var tree = $(this);
        tree.addClass("tree");
        tree.find('li').has("ul").each(function () {
            var branch = $(this);
            branch.prepend("<i class='indicator fa " + ic + "'></i>");
            branch.addClass('branch');
            branch.off("click").on('click', function (e) {
                if (this === e.target) {
                    var icon = $(this).children('i:first');
                    icon.toggleClass(openedClass + " " + closedClass);
                    $(this).children().children().toggle();
                }
            });
            branch.children().children().toggle();
        });
        tree.find('.branch .indicator').each(function () {
            $(this).off("click").on('click', function (e) {
                $(this).closest('li').click();
            });
        });
        tree.find('.branch>a').each(function () {
            $(this).off("click").on('click', function (e) {
                $(this).closest('li').click();
                e.preventDefault();
            });
        });
        tree.find('.branch>button').each(function () {
            $(this).off("off").on('click', function (e) {
                $(this).closest('li').click();
                e.preventDefault();
            });
        });
    }
});

$.fn.extend({
    killTree: function (o) {
        var tree = $(this);
        tree.removeClass("tree");
        tree.find('li').has("ul").each(function () {
            var branch = $(this);
            branch.children().children().show();
            branch.children("i").remove();
            branch.removeClass('branch');
            branch.off("click");
        });
    }
});



/* @preserve
 * Leaflet 1.6.0, a JS library for interactive maps. http://leafletjs.com
 * (c) 2010-2019 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */
!function (t, i) { "object" == typeof exports && "undefined" != typeof module ? i(exports) : "function" == typeof define && define.amd ? define(["exports"], i) : i(t.L = {}) }(this, function (t) { "use strict"; var i = Object.freeze; function h(t) { var i, e, n, o; for (e = 1, n = arguments.length; e < n; e++)for (i in o = arguments[e]) t[i] = o[i]; return t } Object.freeze = function (t) { return t }; var s = Object.create || function (t) { return e.prototype = t, new e }; function e() { } function a(t, i) { var e = Array.prototype.slice; if (t.bind) return t.bind.apply(t, e.call(arguments, 1)); var n = e.call(arguments, 2); return function () { return t.apply(i, n.length ? n.concat(e.call(arguments)) : arguments) } } var n = 0; function u(t) { return t._leaflet_id = t._leaflet_id || ++n, t._leaflet_id } function o(t, i, e) { var n, o, s, r; return r = function () { n = !1, o && (s.apply(e, o), o = !1) }, s = function () { n ? o = arguments : (t.apply(e, arguments), setTimeout(r, i), n = !0) } } function r(t, i, e) { var n = i[1], o = i[0], s = n - o; return t === n && e ? t : ((t - o) % s + s) % s + o } function l() { return !1 } function c(t, i) { var e = Math.pow(10, void 0 === i ? 6 : i); return Math.round(t * e) / e } function _(t) { return t.trim ? t.trim() : t.replace(/^\s+|\s+$/g, "") } function d(t) { return _(t).split(/\s+/) } function p(t, i) { for (var e in t.hasOwnProperty("options") || (t.options = t.options ? s(t.options) : {}), i) t.options[e] = i[e]; return t.options } function m(t, i, e) { var n = []; for (var o in t) n.push(encodeURIComponent(e ? o.toUpperCase() : o) + "=" + encodeURIComponent(t[o])); return (i && -1 !== i.indexOf("?") ? "&" : "?") + n.join("&") } var f = /\{ *([\w_-]+) *\}/g; function g(t, n) { return t.replace(f, function (t, i) { var e = n[i]; if (void 0 === e) throw new Error("No value provided for variable " + t); return "function" == typeof e && (e = e(n)), e }) } var v = Array.isArray || function (t) { return "[object Array]" === Object.prototype.toString.call(t) }; function y(t, i) { for (var e = 0; e < t.length; e++)if (t[e] === i) return e; return -1 } var x = "data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="; function w(t) { return window["webkit" + t] || window["moz" + t] || window["ms" + t] } var P = 0; function b(t) { var i = +new Date, e = Math.max(0, 16 - (i - P)); return P = i + e, window.setTimeout(t, e) } var T = window.requestAnimationFrame || w("RequestAnimationFrame") || b, z = window.cancelAnimationFrame || w("CancelAnimationFrame") || w("CancelRequestAnimationFrame") || function (t) { window.clearTimeout(t) }; function M(t, i, e) { if (!e || T !== b) return T.call(window, a(t, i)); t.call(i) } function C(t) { t && z.call(window, t) } var S = (Object.freeze || Object)({ freeze: i, extend: h, create: s, bind: a, lastId: n, stamp: u, throttle: o, wrapNum: r, falseFn: l, formatNum: c, trim: _, splitWords: d, setOptions: p, getParamString: m, template: g, isArray: v, indexOf: y, emptyImageUrl: x, requestFn: T, cancelFn: z, requestAnimFrame: M, cancelAnimFrame: C }); function E() { } E.extend = function (t) { function i() { this.initialize && this.initialize.apply(this, arguments), this.callInitHooks() } var e = i.__super__ = this.prototype, n = s(e); for (var o in (n.constructor = i).prototype = n, this) this.hasOwnProperty(o) && "prototype" !== o && "__super__" !== o && (i[o] = this[o]); return t.statics && (h(i, t.statics), delete t.statics), t.includes && (function (t) { if ("undefined" == typeof L || !L || !L.Mixin) return; t = v(t) ? t : [t]; for (var i = 0; i < t.length; i++)t[i] === L.Mixin.Events && console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.", (new Error).stack) }(t.includes), h.apply(null, [n].concat(t.includes)), delete t.includes), n.options && (t.options = h(s(n.options), t.options)), h(n, t), n._initHooks = [], n.callInitHooks = function () { if (!this._initHooksCalled) { e.callInitHooks && e.callInitHooks.call(this), this._initHooksCalled = !0; for (var t = 0, i = n._initHooks.length; t < i; t++)n._initHooks[t].call(this) } }, i }, E.include = function (t) { return h(this.prototype, t), this }, E.mergeOptions = function (t) { return h(this.prototype.options, t), this }, E.addInitHook = function (t) { var i = Array.prototype.slice.call(arguments, 1), e = "function" == typeof t ? t : function () { this[t].apply(this, i) }; return this.prototype._initHooks = this.prototype._initHooks || [], this.prototype._initHooks.push(e), this }; var Z = { on: function (t, i, e) { if ("object" == typeof t) for (var n in t) this._on(n, t[n], i); else for (var o = 0, s = (t = d(t)).length; o < s; o++)this._on(t[o], i, e); return this }, off: function (t, i, e) { if (t) if ("object" == typeof t) for (var n in t) this._off(n, t[n], i); else for (var o = 0, s = (t = d(t)).length; o < s; o++)this._off(t[o], i, e); else delete this._events; return this }, _on: function (t, i, e) { this._events = this._events || {}; var n = this._events[t]; n || (n = [], this._events[t] = n), e === this && (e = void 0); for (var o = { fn: i, ctx: e }, s = n, r = 0, a = s.length; r < a; r++)if (s[r].fn === i && s[r].ctx === e) return; s.push(o) }, _off: function (t, i, e) { var n, o, s; if (this._events && (n = this._events[t])) if (i) { if (e === this && (e = void 0), n) for (o = 0, s = n.length; o < s; o++) { var r = n[o]; if (r.ctx === e && r.fn === i) return r.fn = l, this._firingCount && (this._events[t] = n = n.slice()), void n.splice(o, 1) } } else { for (o = 0, s = n.length; o < s; o++)n[o].fn = l; delete this._events[t] } }, fire: function (t, i, e) { if (!this.listens(t, e)) return this; var n = h({}, i, { type: t, target: this, sourceTarget: i && i.sourceTarget || this }); if (this._events) { var o = this._events[t]; if (o) { this._firingCount = this._firingCount + 1 || 1; for (var s = 0, r = o.length; s < r; s++) { var a = o[s]; a.fn.call(a.ctx || this, n) } this._firingCount-- } } return e && this._propagateEvent(n), this }, listens: function (t, i) { var e = this._events && this._events[t]; if (e && e.length) return !0; if (i) for (var n in this._eventParents) if (this._eventParents[n].listens(t, i)) return !0; return !1 }, once: function (t, i, e) { if ("object" == typeof t) { for (var n in t) this.once(n, t[n], i); return this } var o = a(function () { this.off(t, i, e).off(t, o, e) }, this); return this.on(t, i, e).on(t, o, e) }, addEventParent: function (t) { return this._eventParents = this._eventParents || {}, this._eventParents[u(t)] = t, this }, removeEventParent: function (t) { return this._eventParents && delete this._eventParents[u(t)], this }, _propagateEvent: function (t) { for (var i in this._eventParents) this._eventParents[i].fire(t.type, h({ layer: t.target, propagatedFrom: t.target }, t), !0) } }; Z.addEventListener = Z.on, Z.removeEventListener = Z.clearAllEventListeners = Z.off, Z.addOneTimeEventListener = Z.once, Z.fireEvent = Z.fire, Z.hasEventListeners = Z.listens; var k = E.extend(Z); function B(t, i, e) { this.x = e ? Math.round(t) : t, this.y = e ? Math.round(i) : i } var A = Math.trunc || function (t) { return 0 < t ? Math.floor(t) : Math.ceil(t) }; function I(t, i, e) { return t instanceof B ? t : v(t) ? new B(t[0], t[1]) : null == t ? t : "object" == typeof t && "x" in t && "y" in t ? new B(t.x, t.y) : new B(t, i, e) } function O(t, i) { if (t) for (var e = i ? [t, i] : t, n = 0, o = e.length; n < o; n++)this.extend(e[n]) } function R(t, i) { return !t || t instanceof O ? t : new O(t, i) } function N(t, i) { if (t) for (var e = i ? [t, i] : t, n = 0, o = e.length; n < o; n++)this.extend(e[n]) } function D(t, i) { return t instanceof N ? t : new N(t, i) } function j(t, i, e) { if (isNaN(t) || isNaN(i)) throw new Error("Invalid LatLng object: (" + t + ", " + i + ")"); this.lat = +t, this.lng = +i, void 0 !== e && (this.alt = +e) } function W(t, i, e) { return t instanceof j ? t : v(t) && "object" != typeof t[0] ? 3 === t.length ? new j(t[0], t[1], t[2]) : 2 === t.length ? new j(t[0], t[1]) : null : null == t ? t : "object" == typeof t && "lat" in t ? new j(t.lat, "lng" in t ? t.lng : t.lon, t.alt) : void 0 === i ? null : new j(t, i, e) } B.prototype = { clone: function () { return new B(this.x, this.y) }, add: function (t) { return this.clone()._add(I(t)) }, _add: function (t) { return this.x += t.x, this.y += t.y, this }, subtract: function (t) { return this.clone()._subtract(I(t)) }, _subtract: function (t) { return this.x -= t.x, this.y -= t.y, this }, divideBy: function (t) { return this.clone()._divideBy(t) }, _divideBy: function (t) { return this.x /= t, this.y /= t, this }, multiplyBy: function (t) { return this.clone()._multiplyBy(t) }, _multiplyBy: function (t) { return this.x *= t, this.y *= t, this }, scaleBy: function (t) { return new B(this.x * t.x, this.y * t.y) }, unscaleBy: function (t) { return new B(this.x / t.x, this.y / t.y) }, round: function () { return this.clone()._round() }, _round: function () { return this.x = Math.round(this.x), this.y = Math.round(this.y), this }, floor: function () { return this.clone()._floor() }, _floor: function () { return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this }, ceil: function () { return this.clone()._ceil() }, _ceil: function () { return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this }, trunc: function () { return this.clone()._trunc() }, _trunc: function () { return this.x = A(this.x), this.y = A(this.y), this }, distanceTo: function (t) { var i = (t = I(t)).x - this.x, e = t.y - this.y; return Math.sqrt(i * i + e * e) }, equals: function (t) { return (t = I(t)).x === this.x && t.y === this.y }, contains: function (t) { return t = I(t), Math.abs(t.x) <= Math.abs(this.x) && Math.abs(t.y) <= Math.abs(this.y) }, toString: function () { return "Point(" + c(this.x) + ", " + c(this.y) + ")" } }, O.prototype = { extend: function (t) { return t = I(t), this.min || this.max ? (this.min.x = Math.min(t.x, this.min.x), this.max.x = Math.max(t.x, this.max.x), this.min.y = Math.min(t.y, this.min.y), this.max.y = Math.max(t.y, this.max.y)) : (this.min = t.clone(), this.max = t.clone()), this }, getCenter: function (t) { return new B((this.min.x + this.max.x) / 2, (this.min.y + this.max.y) / 2, t) }, getBottomLeft: function () { return new B(this.min.x, this.max.y) }, getTopRight: function () { return new B(this.max.x, this.min.y) }, getTopLeft: function () { return this.min }, getBottomRight: function () { return this.max }, getSize: function () { return this.max.subtract(this.min) }, contains: function (t) { var i, e; return (t = "number" == typeof t[0] || t instanceof B ? I(t) : R(t)) instanceof O ? (i = t.min, e = t.max) : i = e = t, i.x >= this.min.x && e.x <= this.max.x && i.y >= this.min.y && e.y <= this.max.y }, intersects: function (t) { t = R(t); var i = this.min, e = this.max, n = t.min, o = t.max, s = o.x >= i.x && n.x <= e.x, r = o.y >= i.y && n.y <= e.y; return s && r }, overlaps: function (t) { t = R(t); var i = this.min, e = this.max, n = t.min, o = t.max, s = o.x > i.x && n.x < e.x, r = o.y > i.y && n.y < e.y; return s && r }, isValid: function () { return !(!this.min || !this.max) } }, N.prototype = { extend: function (t) { var i, e, n = this._southWest, o = this._northEast; if (t instanceof j) e = i = t; else { if (!(t instanceof N)) return t ? this.extend(W(t) || D(t)) : this; if (i = t._southWest, e = t._northEast, !i || !e) return this } return n || o ? (n.lat = Math.min(i.lat, n.lat), n.lng = Math.min(i.lng, n.lng), o.lat = Math.max(e.lat, o.lat), o.lng = Math.max(e.lng, o.lng)) : (this._southWest = new j(i.lat, i.lng), this._northEast = new j(e.lat, e.lng)), this }, pad: function (t) { var i = this._southWest, e = this._northEast, n = Math.abs(i.lat - e.lat) * t, o = Math.abs(i.lng - e.lng) * t; return new N(new j(i.lat - n, i.lng - o), new j(e.lat + n, e.lng + o)) }, getCenter: function () { return new j((this._southWest.lat + this._northEast.lat) / 2, (this._southWest.lng + this._northEast.lng) / 2) }, getSouthWest: function () { return this._southWest }, getNorthEast: function () { return this._northEast }, getNorthWest: function () { return new j(this.getNorth(), this.getWest()) }, getSouthEast: function () { return new j(this.getSouth(), this.getEast()) }, getWest: function () { return this._southWest.lng }, getSouth: function () { return this._southWest.lat }, getEast: function () { return this._northEast.lng }, getNorth: function () { return this._northEast.lat }, contains: function (t) { t = "number" == typeof t[0] || t instanceof j || "lat" in t ? W(t) : D(t); var i, e, n = this._southWest, o = this._northEast; return t instanceof N ? (i = t.getSouthWest(), e = t.getNorthEast()) : i = e = t, i.lat >= n.lat && e.lat <= o.lat && i.lng >= n.lng && e.lng <= o.lng }, intersects: function (t) { t = D(t); var i = this._southWest, e = this._northEast, n = t.getSouthWest(), o = t.getNorthEast(), s = o.lat >= i.lat && n.lat <= e.lat, r = o.lng >= i.lng && n.lng <= e.lng; return s && r }, overlaps: function (t) { t = D(t); var i = this._southWest, e = this._northEast, n = t.getSouthWest(), o = t.getNorthEast(), s = o.lat > i.lat && n.lat < e.lat, r = o.lng > i.lng && n.lng < e.lng; return s && r }, toBBoxString: function () { return [this.getWest(), this.getSouth(), this.getEast(), this.getNorth()].join(",") }, equals: function (t, i) { return !!t && (t = D(t), this._southWest.equals(t.getSouthWest(), i) && this._northEast.equals(t.getNorthEast(), i)) }, isValid: function () { return !(!this._southWest || !this._northEast) } }; var H, F = { latLngToPoint: function (t, i) { var e = this.projection.project(t), n = this.scale(i); return this.transformation._transform(e, n) }, pointToLatLng: function (t, i) { var e = this.scale(i), n = this.transformation.untransform(t, e); return this.projection.unproject(n) }, project: function (t) { return this.projection.project(t) }, unproject: function (t) { return this.projection.unproject(t) }, scale: function (t) { return 256 * Math.pow(2, t) }, zoom: function (t) { return Math.log(t / 256) / Math.LN2 }, getProjectedBounds: function (t) { if (this.infinite) return null; var i = this.projection.bounds, e = this.scale(t); return new O(this.transformation.transform(i.min, e), this.transformation.transform(i.max, e)) }, infinite: !(j.prototype = { equals: function (t, i) { return !!t && (t = W(t), Math.max(Math.abs(this.lat - t.lat), Math.abs(this.lng - t.lng)) <= (void 0 === i ? 1e-9 : i)) }, toString: function (t) { return "LatLng(" + c(this.lat, t) + ", " + c(this.lng, t) + ")" }, distanceTo: function (t) { return U.distance(this, W(t)) }, wrap: function () { return U.wrapLatLng(this) }, toBounds: function (t) { var i = 180 * t / 40075017, e = i / Math.cos(Math.PI / 180 * this.lat); return D([this.lat - i, this.lng - e], [this.lat + i, this.lng + e]) }, clone: function () { return new j(this.lat, this.lng, this.alt) } }), wrapLatLng: function (t) { var i = this.wrapLng ? r(t.lng, this.wrapLng, !0) : t.lng; return new j(this.wrapLat ? r(t.lat, this.wrapLat, !0) : t.lat, i, t.alt) }, wrapLatLngBounds: function (t) { var i = t.getCenter(), e = this.wrapLatLng(i), n = i.lat - e.lat, o = i.lng - e.lng; if (0 == n && 0 == o) return t; var s = t.getSouthWest(), r = t.getNorthEast(); return new N(new j(s.lat - n, s.lng - o), new j(r.lat - n, r.lng - o)) } }, U = h({}, F, { wrapLng: [-180, 180], R: 6371e3, distance: function (t, i) { var e = Math.PI / 180, n = t.lat * e, o = i.lat * e, s = Math.sin((i.lat - t.lat) * e / 2), r = Math.sin((i.lng - t.lng) * e / 2), a = s * s + Math.cos(n) * Math.cos(o) * r * r, h = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a)); return this.R * h } }), V = 6378137, q = { R: V, MAX_LATITUDE: 85.0511287798, project: function (t) { var i = Math.PI / 180, e = this.MAX_LATITUDE, n = Math.max(Math.min(e, t.lat), -e), o = Math.sin(n * i); return new B(this.R * t.lng * i, this.R * Math.log((1 + o) / (1 - o)) / 2) }, unproject: function (t) { var i = 180 / Math.PI; return new j((2 * Math.atan(Math.exp(t.y / this.R)) - Math.PI / 2) * i, t.x * i / this.R) }, bounds: (H = V * Math.PI, new O([-H, -H], [H, H])) }; function G(t, i, e, n) { if (v(t)) return this._a = t[0], this._b = t[1], this._c = t[2], void (this._d = t[3]); this._a = t, this._b = i, this._c = e, this._d = n } function K(t, i, e, n) { return new G(t, i, e, n) } G.prototype = { transform: function (t, i) { return this._transform(t.clone(), i) }, _transform: function (t, i) { return i = i || 1, t.x = i * (this._a * t.x + this._b), t.y = i * (this._c * t.y + this._d), t }, untransform: function (t, i) { return i = i || 1, new B((t.x / i - this._b) / this._a, (t.y / i - this._d) / this._c) } }; var Y, X = h({}, U, { code: "EPSG:3857", projection: q, transformation: (Y = .5 / (Math.PI * q.R), K(Y, .5, -Y, .5)) }), J = h({}, X, { code: "EPSG:900913" }); function $(t) { return document.createElementNS("http://www.w3.org/2000/svg", t) } function Q(t, i) { var e, n, o, s, r, a, h = ""; for (e = 0, o = t.length; e < o; e++) { for (n = 0, s = (r = t[e]).length; n < s; n++)h += (n ? "L" : "M") + (a = r[n]).x + " " + a.y; h += i ? Zt ? "z" : "x" : "" } return h || "M0 0" } var tt = document.documentElement.style, it = "ActiveXObject" in window, et = it && !document.addEventListener, nt = "msLaunchUri" in navigator && !("documentMode" in document), ot = Bt("webkit"), st = Bt("android"), rt = Bt("android 2") || Bt("android 3"), at = parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1], 10), ht = st && Bt("Google") && at < 537 && !("AudioNode" in window), ut = !!window.opera, lt = Bt("chrome"), ct = Bt("gecko") && !ot && !ut && !it, _t = !lt && Bt("safari"), dt = Bt("phantom"), pt = "OTransition" in tt, mt = 0 === navigator.platform.indexOf("Win"), ft = it && "transition" in tt, gt = "WebKitCSSMatrix" in window && "m11" in new window.WebKitCSSMatrix && !rt, vt = "MozPerspective" in tt, yt = !window.L_DISABLE_3D && (ft || gt || vt) && !pt && !dt, xt = "undefined" != typeof orientation || Bt("mobile"), wt = xt && ot, Pt = xt && gt, Lt = !window.PointerEvent && window.MSPointerEvent, bt = !(ot || !window.PointerEvent && !Lt), Tt = !window.L_NO_TOUCH && (bt || "ontouchstart" in window || window.DocumentTouch && document instanceof window.DocumentTouch), zt = xt && ut, Mt = xt && ct, Ct = 1 < (window.devicePixelRatio || window.screen.deviceXDPI / window.screen.logicalXDPI), St = function () { var t = !1; try { var i = Object.defineProperty({}, "passive", { get: function () { t = !0 } }); window.addEventListener("testPassiveEventSupport", l, i), window.removeEventListener("testPassiveEventSupport", l, i) } catch (t) { } return t }, Et = !!document.createElement("canvas").getContext, Zt = !(!document.createElementNS || !$("svg").createSVGRect), kt = !Zt && function () { try { var t = document.createElement("div"); t.innerHTML = '<v:shape adj="1"/>'; var i = t.firstChild; return i.style.behavior = "url(#default#VML)", i && "object" == typeof i.adj } catch (t) { return !1 } }(); function Bt(t) { return 0 <= navigator.userAgent.toLowerCase().indexOf(t) } var At = (Object.freeze || Object)({ ie: it, ielt9: et, edge: nt, webkit: ot, android: st, android23: rt, androidStock: ht, opera: ut, chrome: lt, gecko: ct, safari: _t, phantom: dt, opera12: pt, win: mt, ie3d: ft, webkit3d: gt, gecko3d: vt, any3d: yt, mobile: xt, mobileWebkit: wt, mobileWebkit3d: Pt, msPointer: Lt, pointer: bt, touch: Tt, mobileOpera: zt, mobileGecko: Mt, retina: Ct, passiveEvents: St, canvas: Et, svg: Zt, vml: kt }), It = Lt ? "MSPointerDown" : "pointerdown", Ot = Lt ? "MSPointerMove" : "pointermove", Rt = Lt ? "MSPointerUp" : "pointerup", Nt = Lt ? "MSPointerCancel" : "pointercancel", Dt = ["INPUT", "SELECT", "OPTION"], jt = {}, Wt = !1, Ht = 0; function Ft(t, i, e, n) { return "touchstart" === i ? function (t, i, e) { var n = a(function (t) { if ("mouse" !== t.pointerType && t.MSPOINTER_TYPE_MOUSE && t.pointerType !== t.MSPOINTER_TYPE_MOUSE) { if (!(Dt.indexOf(t.target.tagName) < 0)) return; ji(t) } Gt(t, i) }); t["_leaflet_touchstart" + e] = n, t.addEventListener(It, n, !1), Wt || (document.documentElement.addEventListener(It, Ut, !0), document.documentElement.addEventListener(Ot, Vt, !0), document.documentElement.addEventListener(Rt, qt, !0), document.documentElement.addEventListener(Nt, qt, !0), Wt = !0) }(t, e, n) : "touchmove" === i ? function (t, i, e) { function n(t) { (t.pointerType !== t.MSPOINTER_TYPE_MOUSE && "mouse" !== t.pointerType || 0 !== t.buttons) && Gt(t, i) } t["_leaflet_touchmove" + e] = n, t.addEventListener(Ot, n, !1) }(t, e, n) : "touchend" === i && function (t, i, e) { function n(t) { Gt(t, i) } t["_leaflet_touchend" + e] = n, t.addEventListener(Rt, n, !1), t.addEventListener(Nt, n, !1) }(t, e, n), this } function Ut(t) { jt[t.pointerId] = t, Ht++ } function Vt(t) { jt[t.pointerId] && (jt[t.pointerId] = t) } function qt(t) { delete jt[t.pointerId], Ht-- } function Gt(t, i) { for (var e in t.touches = [], jt) t.touches.push(jt[e]); t.changedTouches = [t], i(t) } var Kt = Lt ? "MSPointerDown" : bt ? "pointerdown" : "touchstart", Yt = Lt ? "MSPointerUp" : bt ? "pointerup" : "touchend", Xt = "_leaflet_"; function Jt(t, o, i) { var s, r, a = !1; function e(t) { var i; if (bt) { if (!nt || "mouse" === t.pointerType) return; i = Ht } else i = t.touches.length; if (!(1 < i)) { var e = Date.now(), n = e - (s || e); r = t.touches ? t.touches[0] : t, a = 0 < n && n <= 250, s = e } } function n(t) { if (a && !r.cancelBubble) { if (bt) { if (!nt || "mouse" === t.pointerType) return; var i, e, n = {}; for (e in r) i = r[e], n[e] = i && i.bind ? i.bind(r) : i; r = n } r.type = "dblclick", r.button = 0, o(r), s = null } } return t[Xt + Kt + i] = e, t[Xt + Yt + i] = n, t[Xt + "dblclick" + i] = o, t.addEventListener(Kt, e, !!St && { passive: !1 }), t.addEventListener(Yt, n, !!St && { passive: !1 }), t.addEventListener("dblclick", o, !1), this } function $t(t, i) { var e = t[Xt + Kt + i], n = t[Xt + Yt + i], o = t[Xt + "dblclick" + i]; return t.removeEventListener(Kt, e, !!St && { passive: !1 }), t.removeEventListener(Yt, n, !!St && { passive: !1 }), nt || t.removeEventListener("dblclick", o, !1), this } var Qt, ti, ii, ei, ni, oi = xi(["transform", "webkitTransform", "OTransform", "MozTransform", "msTransform"]), si = xi(["webkitTransition", "transition", "OTransition", "MozTransition", "msTransition"]), ri = "webkitTransition" === si || "OTransition" === si ? si + "End" : "transitionend"; function ai(t) { return "string" == typeof t ? document.getElementById(t) : t } function hi(t, i) { var e = t.style[i] || t.currentStyle && t.currentStyle[i]; if ((!e || "auto" === e) && document.defaultView) { var n = document.defaultView.getComputedStyle(t, null); e = n ? n[i] : null } return "auto" === e ? null : e } function ui(t, i, e) { var n = document.createElement(t); return n.className = i || "", e && e.appendChild(n), n } function li(t) { var i = t.parentNode; i && i.removeChild(t) } function ci(t) { for (; t.firstChild;)t.removeChild(t.firstChild) } function _i(t) { var i = t.parentNode; i && i.lastChild !== t && i.appendChild(t) } function di(t) { var i = t.parentNode; i && i.firstChild !== t && i.insertBefore(t, i.firstChild) } function pi(t, i) { if (void 0 !== t.classList) return t.classList.contains(i); var e = vi(t); return 0 < e.length && new RegExp("(^|\\s)" + i + "(\\s|$)").test(e) } function mi(t, i) { if (void 0 !== t.classList) for (var e = d(i), n = 0, o = e.length; n < o; n++)t.classList.add(e[n]); else if (!pi(t, i)) { var s = vi(t); gi(t, (s ? s + " " : "") + i) } } function fi(t, i) { void 0 !== t.classList ? t.classList.remove(i) : gi(t, _((" " + vi(t) + " ").replace(" " + i + " ", " "))) } function gi(t, i) { void 0 === t.className.baseVal ? t.className = i : t.className.baseVal = i } function vi(t) { return t.correspondingElement && (t = t.correspondingElement), void 0 === t.className.baseVal ? t.className : t.className.baseVal } function yi(t, i) { "opacity" in t.style ? t.style.opacity = i : "filter" in t.style && function (t, i) { var e = !1, n = "DXImageTransform.Microsoft.Alpha"; try { e = t.filters.item(n) } catch (t) { if (1 === i) return } i = Math.round(100 * i), e ? (e.Enabled = 100 !== i, e.Opacity = i) : t.style.filter += " progid:" + n + "(opacity=" + i + ")" }(t, i) } function xi(t) { for (var i = document.documentElement.style, e = 0; e < t.length; e++)if (t[e] in i) return t[e]; return !1 } function wi(t, i, e) { var n = i || new B(0, 0); t.style[oi] = (ft ? "translate(" + n.x + "px," + n.y + "px)" : "translate3d(" + n.x + "px," + n.y + "px,0)") + (e ? " scale(" + e + ")" : "") } function Pi(t, i) { t._leaflet_pos = i, yt ? wi(t, i) : (t.style.left = i.x + "px", t.style.top = i.y + "px") } function Li(t) { return t._leaflet_pos || new B(0, 0) } if ("onselectstart" in document) Qt = function () { ki(window, "selectstart", ji) }, ti = function () { Ai(window, "selectstart", ji) }; else { var bi = xi(["userSelect", "WebkitUserSelect", "OUserSelect", "MozUserSelect", "msUserSelect"]); Qt = function () { if (bi) { var t = document.documentElement.style; ii = t[bi], t[bi] = "none" } }, ti = function () { bi && (document.documentElement.style[bi] = ii, ii = void 0) } } function Ti() { ki(window, "dragstart", ji) } function zi() { Ai(window, "dragstart", ji) } function Mi(t) { for (; -1 === t.tabIndex;)t = t.parentNode; t.style && (Ci(), ni = (ei = t).style.outline, t.style.outline = "none", ki(window, "keydown", Ci)) } function Ci() { ei && (ei.style.outline = ni, ni = ei = void 0, Ai(window, "keydown", Ci)) } function Si(t) { for (; !((t = t.parentNode).offsetWidth && t.offsetHeight || t === document.body);); return t } function Ei(t) { var i = t.getBoundingClientRect(); return { x: i.width / t.offsetWidth || 1, y: i.height / t.offsetHeight || 1, boundingClientRect: i } } var Zi = (Object.freeze || Object)({ TRANSFORM: oi, TRANSITION: si, TRANSITION_END: ri, get: ai, getStyle: hi, create: ui, remove: li, empty: ci, toFront: _i, toBack: di, hasClass: pi, addClass: mi, removeClass: fi, setClass: gi, getClass: vi, setOpacity: yi, testProp: xi, setTransform: wi, setPosition: Pi, getPosition: Li, disableTextSelection: Qt, enableTextSelection: ti, disableImageDrag: Ti, enableImageDrag: zi, preventOutline: Mi, restoreOutline: Ci, getSizedParentNode: Si, getScale: Ei }); function ki(t, i, e, n) { if ("object" == typeof i) for (var o in i) Ii(t, o, i[o], e); else for (var s = 0, r = (i = d(i)).length; s < r; s++)Ii(t, i[s], e, n); return this } var Bi = "_leaflet_events"; function Ai(t, i, e, n) { if ("object" == typeof i) for (var o in i) Oi(t, o, i[o], e); else if (i) for (var s = 0, r = (i = d(i)).length; s < r; s++)Oi(t, i[s], e, n); else { for (var a in t[Bi]) Oi(t, a, t[Bi][a]); delete t[Bi] } return this } function Ii(i, t, e, n) { var o = t + u(e) + (n ? "_" + u(n) : ""); if (i[Bi] && i[Bi][o]) return this; var s = function (t) { return e.call(n || i, t || window.event) }, r = s; bt && 0 === t.indexOf("touch") ? Ft(i, t, s, o) : !Tt || "dblclick" !== t || bt && lt ? "addEventListener" in i ? "mousewheel" === t ? i.addEventListener("onwheel" in i ? "wheel" : "mousewheel", s, !!St && { passive: !1 }) : "mouseenter" === t || "mouseleave" === t ? (s = function (t) { t = t || window.event, Yi(i, t) && r(t) }, i.addEventListener("mouseenter" === t ? "mouseover" : "mouseout", s, !1)) : ("click" === t && st && (s = function (t) { !function (t, i) { var e = t.timeStamp || t.originalEvent && t.originalEvent.timeStamp, n = Vi && e - Vi; if (n && 100 < n && n < 500 || t.target._simulatedClick && !t._simulated) return Wi(t); Vi = e, i(t) }(t, r) }), i.addEventListener(t, s, !1)) : "attachEvent" in i && i.attachEvent("on" + t, s) : Jt(i, s, o), i[Bi] = i[Bi] || {}, i[Bi][o] = s } function Oi(t, i, e, n) { var o = i + u(e) + (n ? "_" + u(n) : ""), s = t[Bi] && t[Bi][o]; if (!s) return this; bt && 0 === i.indexOf("touch") ? function (t, i, e) { var n = t["_leaflet_" + i + e]; "touchstart" === i ? t.removeEventListener(It, n, !1) : "touchmove" === i ? t.removeEventListener(Ot, n, !1) : "touchend" === i && (t.removeEventListener(Rt, n, !1), t.removeEventListener(Nt, n, !1)) }(t, i, o) : !Tt || "dblclick" !== i || bt && lt ? "removeEventListener" in t ? "mousewheel" === i ? t.removeEventListener("onwheel" in t ? "wheel" : "mousewheel", s, !!St && { passive: !1 }) : t.removeEventListener("mouseenter" === i ? "mouseover" : "mouseleave" === i ? "mouseout" : i, s, !1) : "detachEvent" in t && t.detachEvent("on" + i, s) : $t(t, o), t[Bi][o] = null } function Ri(t) { return t.stopPropagation ? t.stopPropagation() : t.originalEvent ? t.originalEvent._stopped = !0 : t.cancelBubble = !0, Ki(t), this } function Ni(t) { return Ii(t, "mousewheel", Ri), this } function Di(t) { return ki(t, "mousedown touchstart dblclick", Ri), Ii(t, "click", Gi), this } function ji(t) { return t.preventDefault ? t.preventDefault() : t.returnValue = !1, this } function Wi(t) { return ji(t), Ri(t), this } function Hi(t, i) { if (!i) return new B(t.clientX, t.clientY); var e = Ei(i), n = e.boundingClientRect; return new B((t.clientX - n.left) / e.x - i.clientLeft, (t.clientY - n.top) / e.y - i.clientTop) } var Fi = mt && lt ? 2 * window.devicePixelRatio : ct ? window.devicePixelRatio : 1; function Ui(t) { return nt ? t.wheelDeltaY / 2 : t.deltaY && 0 === t.deltaMode ? -t.deltaY / Fi : t.deltaY && 1 === t.deltaMode ? 20 * -t.deltaY : t.deltaY && 2 === t.deltaMode ? 60 * -t.deltaY : t.deltaX || t.deltaZ ? 0 : t.wheelDelta ? (t.wheelDeltaY || t.wheelDelta) / 2 : t.detail && Math.abs(t.detail) < 32765 ? 20 * -t.detail : t.detail ? t.detail / -32765 * 60 : 0 } var Vi, qi = {}; function Gi(t) { qi[t.type] = !0 } function Ki(t) { var i = qi[t.type]; return qi[t.type] = !1, i } function Yi(t, i) { var e = i.relatedTarget; if (!e) return !0; try { for (; e && e !== t;)e = e.parentNode } catch (t) { return !1 } return e !== t } var Xi = (Object.freeze || Object)({ on: ki, off: Ai, stopPropagation: Ri, disableScrollPropagation: Ni, disableClickPropagation: Di, preventDefault: ji, stop: Wi, getMousePosition: Hi, getWheelDelta: Ui, fakeStop: Gi, skipped: Ki, isExternalTarget: Yi, addListener: ki, removeListener: Ai }), Ji = k.extend({ run: function (t, i, e, n) { this.stop(), this._el = t, this._inProgress = !0, this._duration = e || .25, this._easeOutPower = 1 / Math.max(n || .5, .2), this._startPos = Li(t), this._offset = i.subtract(this._startPos), this._startTime = +new Date, this.fire("start"), this._animate() }, stop: function () { this._inProgress && (this._step(!0), this._complete()) }, _animate: function () { this._animId = M(this._animate, this), this._step() }, _step: function (t) { var i = +new Date - this._startTime, e = 1e3 * this._duration; i < e ? this._runFrame(this._easeOut(i / e), t) : (this._runFrame(1), this._complete()) }, _runFrame: function (t, i) { var e = this._startPos.add(this._offset.multiplyBy(t)); i && e._round(), Pi(this._el, e), this.fire("step") }, _complete: function () { C(this._animId), this._inProgress = !1, this.fire("end") }, _easeOut: function (t) { return 1 - Math.pow(1 - t, this._easeOutPower) } }), $i = k.extend({ options: { crs: X, center: void 0, zoom: void 0, minZoom: void 0, maxZoom: void 0, layers: [], maxBounds: void 0, renderer: void 0, zoomAnimation: !0, zoomAnimationThreshold: 4, fadeAnimation: !0, markerZoomAnimation: !0, transform3DLimit: 8388608, zoomSnap: 1, zoomDelta: 1, trackResize: !0 }, initialize: function (t, i) { i = p(this, i), this._handlers = [], this._layers = {}, this._zoomBoundLayers = {}, this._sizeChanged = !0, this._initContainer(t), this._initLayout(), this._onResize = a(this._onResize, this), this._initEvents(), i.maxBounds && this.setMaxBounds(i.maxBounds), void 0 !== i.zoom && (this._zoom = this._limitZoom(i.zoom)), i.center && void 0 !== i.zoom && this.setView(W(i.center), i.zoom, { reset: !0 }), this.callInitHooks(), this._zoomAnimated = si && yt && !zt && this.options.zoomAnimation, this._zoomAnimated && (this._createAnimProxy(), ki(this._proxy, ri, this._catchTransitionEnd, this)), this._addLayers(this.options.layers) }, setView: function (t, i, e) { if ((i = void 0 === i ? this._zoom : this._limitZoom(i), t = this._limitCenter(W(t), i, this.options.maxBounds), e = e || {}, this._stop(), this._loaded && !e.reset && !0 !== e) && (void 0 !== e.animate && (e.zoom = h({ animate: e.animate }, e.zoom), e.pan = h({ animate: e.animate, duration: e.duration }, e.pan)), this._zoom !== i ? this._tryAnimatedZoom && this._tryAnimatedZoom(t, i, e.zoom) : this._tryAnimatedPan(t, e.pan))) return clearTimeout(this._sizeTimer), this; return this._resetView(t, i), this }, setZoom: function (t, i) { return this._loaded ? this.setView(this.getCenter(), t, { zoom: i }) : (this._zoom = t, this) }, zoomIn: function (t, i) { return t = t || (yt ? this.options.zoomDelta : 1), this.setZoom(this._zoom + t, i) }, zoomOut: function (t, i) { return t = t || (yt ? this.options.zoomDelta : 1), this.setZoom(this._zoom - t, i) }, setZoomAround: function (t, i, e) { var n = this.getZoomScale(i), o = this.getSize().divideBy(2), s = (t instanceof B ? t : this.latLngToContainerPoint(t)).subtract(o).multiplyBy(1 - 1 / n), r = this.containerPointToLatLng(o.add(s)); return this.setView(r, i, { zoom: e }) }, _getBoundsCenterZoom: function (t, i) { i = i || {}, t = t.getBounds ? t.getBounds() : D(t); var e = I(i.paddingTopLeft || i.padding || [0, 0]), n = I(i.paddingBottomRight || i.padding || [0, 0]), o = this.getBoundsZoom(t, !1, e.add(n)); if ((o = "number" == typeof i.maxZoom ? Math.min(i.maxZoom, o) : o) === 1 / 0) return { center: t.getCenter(), zoom: o }; var s = n.subtract(e).divideBy(2), r = this.project(t.getSouthWest(), o), a = this.project(t.getNorthEast(), o); return { center: this.unproject(r.add(a).divideBy(2).add(s), o), zoom: o } }, fitBounds: function (t, i) { if (!(t = D(t)).isValid()) throw new Error("Bounds are not valid."); var e = this._getBoundsCenterZoom(t, i); return this.setView(e.center, e.zoom, i) }, fitWorld: function (t) { return this.fitBounds([[-90, -180], [90, 180]], t) }, panTo: function (t, i) { return this.setView(t, this._zoom, { pan: i }) }, panBy: function (t, i) { if (i = i || {}, !(t = I(t).round()).x && !t.y) return this.fire("moveend"); if (!0 !== i.animate && !this.getSize().contains(t)) return this._resetView(this.unproject(this.project(this.getCenter()).add(t)), this.getZoom()), this; if (this._panAnim || (this._panAnim = new Ji, this._panAnim.on({ step: this._onPanTransitionStep, end: this._onPanTransitionEnd }, this)), i.noMoveStart || this.fire("movestart"), !1 !== i.animate) { mi(this._mapPane, "leaflet-pan-anim"); var e = this._getMapPanePos().subtract(t).round(); this._panAnim.run(this._mapPane, e, i.duration || .25, i.easeLinearity) } else this._rawPanBy(t), this.fire("move").fire("moveend"); return this }, flyTo: function (n, o, t) { if (!1 === (t = t || {}).animate || !yt) return this.setView(n, o, t); this._stop(); var s = this.project(this.getCenter()), r = this.project(n), i = this.getSize(), a = this._zoom; n = W(n), o = void 0 === o ? a : o; var h = Math.max(i.x, i.y), u = h * this.getZoomScale(a, o), l = r.distanceTo(s) || 1, c = 1.42, _ = c * c; function e(t) { var i = (u * u - h * h + (t ? -1 : 1) * _ * _ * l * l) / (2 * (t ? u : h) * _ * l), e = Math.sqrt(i * i + 1) - i; return e < 1e-9 ? -18 : Math.log(e) } function d(t) { return (Math.exp(t) - Math.exp(-t)) / 2 } function p(t) { return (Math.exp(t) + Math.exp(-t)) / 2 } var m = e(0); function f(t) { return h * (p(m) * function (t) { return d(t) / p(t) }(m + c * t) - d(m)) / _ } var g = Date.now(), v = (e(1) - m) / c, y = t.duration ? 1e3 * t.duration : 1e3 * v * .8; return this._moveStart(!0, t.noMoveStart), function t() { var i = (Date.now() - g) / y, e = function (t) { return 1 - Math.pow(1 - t, 1.5) }(i) * v; i <= 1 ? (this._flyToFrame = M(t, this), this._move(this.unproject(s.add(r.subtract(s).multiplyBy(f(e) / l)), a), this.getScaleZoom(h / function (t) { return h * (p(m) / p(m + c * t)) }(e), a), { flyTo: !0 })) : this._move(n, o)._moveEnd(!0) }.call(this), this }, flyToBounds: function (t, i) { var e = this._getBoundsCenterZoom(t, i); return this.flyTo(e.center, e.zoom, i) }, setMaxBounds: function (t) { return (t = D(t)).isValid() ? (this.options.maxBounds && this.off("moveend", this._panInsideMaxBounds), this.options.maxBounds = t, this._loaded && this._panInsideMaxBounds(), this.on("moveend", this._panInsideMaxBounds)) : (this.options.maxBounds = null, this.off("moveend", this._panInsideMaxBounds)) }, setMinZoom: function (t) { var i = this.options.minZoom; return this.options.minZoom = t, this._loaded && i !== t && (this.fire("zoomlevelschange"), this.getZoom() < this.options.minZoom) ? this.setZoom(t) : this }, setMaxZoom: function (t) { var i = this.options.maxZoom; return this.options.maxZoom = t, this._loaded && i !== t && (this.fire("zoomlevelschange"), this.getZoom() > this.options.maxZoom) ? this.setZoom(t) : this }, panInsideBounds: function (t, i) { this._enforcingBounds = !0; var e = this.getCenter(), n = this._limitCenter(e, this._zoom, D(t)); return e.equals(n) || this.panTo(n, i), this._enforcingBounds = !1, this }, panInside: function (t, i) { var e = I((i = i || {}).paddingTopLeft || i.padding || [0, 0]), n = I(i.paddingBottomRight || i.padding || [0, 0]), o = this.getCenter(), s = this.project(o), r = this.project(t), a = this.getPixelBounds(), h = a.getSize().divideBy(2), u = R([a.min.add(e), a.max.subtract(n)]); if (!u.contains(r)) { this._enforcingBounds = !0; var l = s.subtract(r), c = I(r.x + l.x, r.y + l.y); (r.x < u.min.x || r.x > u.max.x) && (c.x = s.x - l.x, 0 < l.x ? c.x += h.x - e.x : c.x -= h.x - n.x), (r.y < u.min.y || r.y > u.max.y) && (c.y = s.y - l.y, 0 < l.y ? c.y += h.y - e.y : c.y -= h.y - n.y), this.panTo(this.unproject(c), i), this._enforcingBounds = !1 } return this }, invalidateSize: function (t) { if (!this._loaded) return this; t = h({ animate: !1, pan: !0 }, !0 === t ? { animate: !0 } : t); var i = this.getSize(); this._sizeChanged = !0, this._lastCenter = null; var e = this.getSize(), n = i.divideBy(2).round(), o = e.divideBy(2).round(), s = n.subtract(o); return s.x || s.y ? (t.animate && t.pan ? this.panBy(s) : (t.pan && this._rawPanBy(s), this.fire("move"), t.debounceMoveend ? (clearTimeout(this._sizeTimer), this._sizeTimer = setTimeout(a(this.fire, this, "moveend"), 200)) : this.fire("moveend")), this.fire("resize", { oldSize: i, newSize: e })) : this }, stop: function () { return this.setZoom(this._limitZoom(this._zoom)), this.options.zoomSnap || this.fire("viewreset"), this._stop() }, locate: function (t) { if (t = this._locateOptions = h({ timeout: 1e4, watch: !1 }, t), !("geolocation" in navigator)) return this._handleGeolocationError({ code: 0, message: "Geolocation not supported." }), this; var i = a(this._handleGeolocationResponse, this), e = a(this._handleGeolocationError, this); return t.watch ? this._locationWatchId = navigator.geolocation.watchPosition(i, e, t) : navigator.geolocation.getCurrentPosition(i, e, t), this }, stopLocate: function () { return navigator.geolocation && navigator.geolocation.clearWatch && navigator.geolocation.clearWatch(this._locationWatchId), this._locateOptions && (this._locateOptions.setView = !1), this }, _handleGeolocationError: function (t) { var i = t.code, e = t.message || (1 === i ? "permission denied" : 2 === i ? "position unavailable" : "timeout"); this._locateOptions.setView && !this._loaded && this.fitWorld(), this.fire("locationerror", { code: i, message: "Geolocation error: " + e + "." }) }, _handleGeolocationResponse: function (t) { var i = new j(t.coords.latitude, t.coords.longitude), e = i.toBounds(2 * t.coords.accuracy), n = this._locateOptions; if (n.setView) { var o = this.getBoundsZoom(e); this.setView(i, n.maxZoom ? Math.min(o, n.maxZoom) : o) } var s = { latlng: i, bounds: e, timestamp: t.timestamp }; for (var r in t.coords) "number" == typeof t.coords[r] && (s[r] = t.coords[r]); this.fire("locationfound", s) }, addHandler: function (t, i) { if (!i) return this; var e = this[t] = new i(this); return this._handlers.push(e), this.options[t] && e.enable(), this }, remove: function () { if (this._initEvents(!0), this._containerId !== this._container._leaflet_id) throw new Error("Map container is being reused by another instance"); try { delete this._container._leaflet_id, delete this._containerId } catch (t) { this._container._leaflet_id = void 0, this._containerId = void 0 } var t; for (t in void 0 !== this._locationWatchId && this.stopLocate(), this._stop(), li(this._mapPane), this._clearControlPos && this._clearControlPos(), this._resizeRequest && (C(this._resizeRequest), this._resizeRequest = null), this._clearHandlers(), this._loaded && this.fire("unload"), this._layers) this._layers[t].remove(); for (t in this._panes) li(this._panes[t]); return this._layers = [], this._panes = [], delete this._mapPane, delete this._renderer, this }, createPane: function (t, i) { var e = ui("div", "leaflet-pane" + (t ? " leaflet-" + t.replace("Pane", "") + "-pane" : ""), i || this._mapPane); return t && (this._panes[t] = e), e }, getCenter: function () { return this._checkIfLoaded(), this._lastCenter && !this._moved() ? this._lastCenter : this.layerPointToLatLng(this._getCenterLayerPoint()) }, getZoom: function () { return this._zoom }, getBounds: function () { var t = this.getPixelBounds(); return new N(this.unproject(t.getBottomLeft()), this.unproject(t.getTopRight())) }, getMinZoom: function () { return void 0 === this.options.minZoom ? this._layersMinZoom || 0 : this.options.minZoom }, getMaxZoom: function () { return void 0 === this.options.maxZoom ? void 0 === this._layersMaxZoom ? 1 / 0 : this._layersMaxZoom : this.options.maxZoom }, getBoundsZoom: function (t, i, e) { t = D(t), e = I(e || [0, 0]); var n = this.getZoom() || 0, o = this.getMinZoom(), s = this.getMaxZoom(), r = t.getNorthWest(), a = t.getSouthEast(), h = this.getSize().subtract(e), u = R(this.project(a, n), this.project(r, n)).getSize(), l = yt ? this.options.zoomSnap : 1, c = h.x / u.x, _ = h.y / u.y, d = i ? Math.max(c, _) : Math.min(c, _); return n = this.getScaleZoom(d, n), l && (n = Math.round(n / (l / 100)) * (l / 100), n = i ? Math.ceil(n / l) * l : Math.floor(n / l) * l), Math.max(o, Math.min(s, n)) }, getSize: function () { return this._size && !this._sizeChanged || (this._size = new B(this._container.clientWidth || 0, this._container.clientHeight || 0), this._sizeChanged = !1), this._size.clone() }, getPixelBounds: function (t, i) { var e = this._getTopLeftPoint(t, i); return new O(e, e.add(this.getSize())) }, getPixelOrigin: function () { return this._checkIfLoaded(), this._pixelOrigin }, getPixelWorldBounds: function (t) { return this.options.crs.getProjectedBounds(void 0 === t ? this.getZoom() : t) }, getPane: function (t) { return "string" == typeof t ? this._panes[t] : t }, getPanes: function () { return this._panes }, getContainer: function () { return this._container }, getZoomScale: function (t, i) { var e = this.options.crs; return i = void 0 === i ? this._zoom : i, e.scale(t) / e.scale(i) }, getScaleZoom: function (t, i) { var e = this.options.crs; i = void 0 === i ? this._zoom : i; var n = e.zoom(t * e.scale(i)); return isNaN(n) ? 1 / 0 : n }, project: function (t, i) { return i = void 0 === i ? this._zoom : i, this.options.crs.latLngToPoint(W(t), i) }, unproject: function (t, i) { return i = void 0 === i ? this._zoom : i, this.options.crs.pointToLatLng(I(t), i) }, layerPointToLatLng: function (t) { var i = I(t).add(this.getPixelOrigin()); return this.unproject(i) }, latLngToLayerPoint: function (t) { return this.project(W(t))._round()._subtract(this.getPixelOrigin()) }, wrapLatLng: function (t) { return this.options.crs.wrapLatLng(W(t)) }, wrapLatLngBounds: function (t) { return this.options.crs.wrapLatLngBounds(D(t)) }, distance: function (t, i) { return this.options.crs.distance(W(t), W(i)) }, containerPointToLayerPoint: function (t) { return I(t).subtract(this._getMapPanePos()) }, layerPointToContainerPoint: function (t) { return I(t).add(this._getMapPanePos()) }, containerPointToLatLng: function (t) { var i = this.containerPointToLayerPoint(I(t)); return this.layerPointToLatLng(i) }, latLngToContainerPoint: function (t) { return this.layerPointToContainerPoint(this.latLngToLayerPoint(W(t))) }, mouseEventToContainerPoint: function (t) { return Hi(t, this._container) }, mouseEventToLayerPoint: function (t) { return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t)) }, mouseEventToLatLng: function (t) { return this.layerPointToLatLng(this.mouseEventToLayerPoint(t)) }, _initContainer: function (t) { var i = this._container = ai(t); if (!i) throw new Error("Map container not found."); if (i._leaflet_id) throw new Error("Map container is already initialized."); ki(i, "scroll", this._onScroll, this), this._containerId = u(i) }, _initLayout: function () { var t = this._container; this._fadeAnimated = this.options.fadeAnimation && yt, mi(t, "leaflet-container" + (Tt ? " leaflet-touch" : "") + (Ct ? " leaflet-retina" : "") + (et ? " leaflet-oldie" : "") + (_t ? " leaflet-safari" : "") + (this._fadeAnimated ? " leaflet-fade-anim" : "")); var i = hi(t, "position"); "absolute" !== i && "relative" !== i && "fixed" !== i && (t.style.position = "relative"), this._initPanes(), this._initControlPos && this._initControlPos() }, _initPanes: function () { var t = this._panes = {}; this._paneRenderers = {}, this._mapPane = this.createPane("mapPane", this._container), Pi(this._mapPane, new B(0, 0)), this.createPane("tilePane"), this.createPane("shadowPane"), this.createPane("overlayPane"), this.createPane("markerPane"), this.createPane("tooltipPane"), this.createPane("popupPane"), this.options.markerZoomAnimation || (mi(t.markerPane, "leaflet-zoom-hide"), mi(t.shadowPane, "leaflet-zoom-hide")) }, _resetView: function (t, i) { Pi(this._mapPane, new B(0, 0)); var e = !this._loaded; this._loaded = !0, i = this._limitZoom(i), this.fire("viewprereset"); var n = this._zoom !== i; this._moveStart(n, !1)._move(t, i)._moveEnd(n), this.fire("viewreset"), e && this.fire("load") }, _moveStart: function (t, i) { return t && this.fire("zoomstart"), i || this.fire("movestart"), this }, _move: function (t, i, e) { void 0 === i && (i = this._zoom); var n = this._zoom !== i; return this._zoom = i, this._lastCenter = t, this._pixelOrigin = this._getNewPixelOrigin(t), (n || e && e.pinch) && this.fire("zoom", e), this.fire("move", e) }, _moveEnd: function (t) { return t && this.fire("zoomend"), this.fire("moveend") }, _stop: function () { return C(this._flyToFrame), this._panAnim && this._panAnim.stop(), this }, _rawPanBy: function (t) { Pi(this._mapPane, this._getMapPanePos().subtract(t)) }, _getZoomSpan: function () { return this.getMaxZoom() - this.getMinZoom() }, _panInsideMaxBounds: function () { this._enforcingBounds || this.panInsideBounds(this.options.maxBounds) }, _checkIfLoaded: function () { if (!this._loaded) throw new Error("Set map center and zoom first.") }, _initEvents: function (t) { this._targets = {}; var i = t ? Ai : ki; i((this._targets[u(this._container)] = this)._container, "click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup", this._handleDOMEvent, this), this.options.trackResize && i(window, "resize", this._onResize, this), yt && this.options.transform3DLimit && (t ? this.off : this.on).call(this, "moveend", this._onMoveEnd) }, _onResize: function () { C(this._resizeRequest), this._resizeRequest = M(function () { this.invalidateSize({ debounceMoveend: !0 }) }, this) }, _onScroll: function () { this._container.scrollTop = 0, this._container.scrollLeft = 0 }, _onMoveEnd: function () { var t = this._getMapPanePos(); Math.max(Math.abs(t.x), Math.abs(t.y)) >= this.options.transform3DLimit && this._resetView(this.getCenter(), this.getZoom()) }, _findEventTargets: function (t, i) { for (var e, n = [], o = "mouseout" === i || "mouseover" === i, s = t.target || t.srcElement, r = !1; s;) { if ((e = this._targets[u(s)]) && ("click" === i || "preclick" === i) && !t._simulated && this._draggableMoved(e)) { r = !0; break } if (e && e.listens(i, !0)) { if (o && !Yi(s, t)) break; if (n.push(e), o) break } if (s === this._container) break; s = s.parentNode } return n.length || r || o || !Yi(s, t) || (n = [this]), n }, _handleDOMEvent: function (t) { if (this._loaded && !Ki(t)) { var i = t.type; "mousedown" !== i && "keypress" !== i && "keyup" !== i && "keydown" !== i || Mi(t.target || t.srcElement), this._fireDOMEvent(t, i) } }, _mouseEvents: ["click", "dblclick", "mouseover", "mouseout", "contextmenu"], _fireDOMEvent: function (t, i, e) { if ("click" === t.type) { var n = h({}, t); n.type = "preclick", this._fireDOMEvent(n, n.type, e) } if (!t._stopped && (e = (e || []).concat(this._findEventTargets(t, i))).length) { var o = e[0]; "contextmenu" === i && o.listens(i, !0) && ji(t); var s = { originalEvent: t }; if ("keypress" !== t.type && "keydown" !== t.type && "keyup" !== t.type) { var r = o.getLatLng && (!o._radius || o._radius <= 10); s.containerPoint = r ? this.latLngToContainerPoint(o.getLatLng()) : this.mouseEventToContainerPoint(t), s.layerPoint = this.containerPointToLayerPoint(s.containerPoint), s.latlng = r ? o.getLatLng() : this.layerPointToLatLng(s.layerPoint) } for (var a = 0; a < e.length; a++)if (e[a].fire(i, s, !0), s.originalEvent._stopped || !1 === e[a].options.bubblingMouseEvents && -1 !== y(this._mouseEvents, i)) return } }, _draggableMoved: function (t) { return (t = t.dragging && t.dragging.enabled() ? t : this).dragging && t.dragging.moved() || this.boxZoom && this.boxZoom.moved() }, _clearHandlers: function () { for (var t = 0, i = this._handlers.length; t < i; t++)this._handlers[t].disable() }, whenReady: function (t, i) { return this._loaded ? t.call(i || this, { target: this }) : this.on("load", t, i), this }, _getMapPanePos: function () { return Li(this._mapPane) || new B(0, 0) }, _moved: function () { var t = this._getMapPanePos(); return t && !t.equals([0, 0]) }, _getTopLeftPoint: function (t, i) { return (t && void 0 !== i ? this._getNewPixelOrigin(t, i) : this.getPixelOrigin()).subtract(this._getMapPanePos()) }, _getNewPixelOrigin: function (t, i) { var e = this.getSize()._divideBy(2); return this.project(t, i)._subtract(e)._add(this._getMapPanePos())._round() }, _latLngToNewLayerPoint: function (t, i, e) { var n = this._getNewPixelOrigin(e, i); return this.project(t, i)._subtract(n) }, _latLngBoundsToNewLayerBounds: function (t, i, e) { var n = this._getNewPixelOrigin(e, i); return R([this.project(t.getSouthWest(), i)._subtract(n), this.project(t.getNorthWest(), i)._subtract(n), this.project(t.getSouthEast(), i)._subtract(n), this.project(t.getNorthEast(), i)._subtract(n)]) }, _getCenterLayerPoint: function () { return this.containerPointToLayerPoint(this.getSize()._divideBy(2)) }, _getCenterOffset: function (t) { return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint()) }, _limitCenter: function (t, i, e) { if (!e) return t; var n = this.project(t, i), o = this.getSize().divideBy(2), s = new O(n.subtract(o), n.add(o)), r = this._getBoundsOffset(s, e, i); return r.round().equals([0, 0]) ? t : this.unproject(n.add(r), i) }, _limitOffset: function (t, i) { if (!i) return t; var e = this.getPixelBounds(), n = new O(e.min.add(t), e.max.add(t)); return t.add(this._getBoundsOffset(n, i)) }, _getBoundsOffset: function (t, i, e) { var n = R(this.project(i.getNorthEast(), e), this.project(i.getSouthWest(), e)), o = n.min.subtract(t.min), s = n.max.subtract(t.max); return new B(this._rebound(o.x, -s.x), this._rebound(o.y, -s.y)) }, _rebound: function (t, i) { return 0 < t + i ? Math.round(t - i) / 2 : Math.max(0, Math.ceil(t)) - Math.max(0, Math.floor(i)) }, _limitZoom: function (t) { var i = this.getMinZoom(), e = this.getMaxZoom(), n = yt ? this.options.zoomSnap : 1; return n && (t = Math.round(t / n) * n), Math.max(i, Math.min(e, t)) }, _onPanTransitionStep: function () { this.fire("move") }, _onPanTransitionEnd: function () { fi(this._mapPane, "leaflet-pan-anim"), this.fire("moveend") }, _tryAnimatedPan: function (t, i) { var e = this._getCenterOffset(t)._trunc(); return !(!0 !== (i && i.animate) && !this.getSize().contains(e)) && (this.panBy(e, i), !0) }, _createAnimProxy: function () { var t = this._proxy = ui("div", "leaflet-proxy leaflet-zoom-animated"); this._panes.mapPane.appendChild(t), this.on("zoomanim", function (t) { var i = oi, e = this._proxy.style[i]; wi(this._proxy, this.project(t.center, t.zoom), this.getZoomScale(t.zoom, 1)), e === this._proxy.style[i] && this._animatingZoom && this._onZoomTransitionEnd() }, this), this.on("load moveend", this._animMoveEnd, this), this._on("unload", this._destroyAnimProxy, this) }, _destroyAnimProxy: function () { li(this._proxy), this.off("load moveend", this._animMoveEnd, this), delete this._proxy }, _animMoveEnd: function () { var t = this.getCenter(), i = this.getZoom(); wi(this._proxy, this.project(t, i), this.getZoomScale(i, 1)) }, _catchTransitionEnd: function (t) { this._animatingZoom && 0 <= t.propertyName.indexOf("transform") && this._onZoomTransitionEnd() }, _nothingToAnimate: function () { return !this._container.getElementsByClassName("leaflet-zoom-animated").length }, _tryAnimatedZoom: function (t, i, e) { if (this._animatingZoom) return !0; if (e = e || {}, !this._zoomAnimated || !1 === e.animate || this._nothingToAnimate() || Math.abs(i - this._zoom) > this.options.zoomAnimationThreshold) return !1; var n = this.getZoomScale(i), o = this._getCenterOffset(t)._divideBy(1 - 1 / n); return !(!0 !== e.animate && !this.getSize().contains(o)) && (M(function () { this._moveStart(!0, !1)._animateZoom(t, i, !0) }, this), !0) }, _animateZoom: function (t, i, e, n) { this._mapPane && (e && (this._animatingZoom = !0, this._animateToCenter = t, this._animateToZoom = i, mi(this._mapPane, "leaflet-zoom-anim")), this.fire("zoomanim", { center: t, zoom: i, noUpdate: n }), setTimeout(a(this._onZoomTransitionEnd, this), 250)) }, _onZoomTransitionEnd: function () { this._animatingZoom && (this._mapPane && fi(this._mapPane, "leaflet-zoom-anim"), this._animatingZoom = !1, this._move(this._animateToCenter, this._animateToZoom), M(function () { this._moveEnd(!0) }, this)) } }); function Qi(t) { return new te(t) } var te = E.extend({ options: { position: "topright" }, initialize: function (t) { p(this, t) }, getPosition: function () { return this.options.position }, setPosition: function (t) { var i = this._map; return i && i.removeControl(this), this.options.position = t, i && i.addControl(this), this }, getContainer: function () { return this._container }, addTo: function (t) { this.remove(), this._map = t; var i = this._container = this.onAdd(t), e = this.getPosition(), n = t._controlCorners[e]; return mi(i, "leaflet-control"), -1 !== e.indexOf("bottom") ? n.insertBefore(i, n.firstChild) : n.appendChild(i), this._map.on("unload", this.remove, this), this }, remove: function () { return this._map && (li(this._container), this.onRemove && this.onRemove(this._map), this._map.off("unload", this.remove, this), this._map = null), this }, _refocusOnMap: function (t) { this._map && t && 0 < t.screenX && 0 < t.screenY && this._map.getContainer().focus() } }); $i.include({ addControl: function (t) { return t.addTo(this), this }, removeControl: function (t) { return t.remove(), this }, _initControlPos: function () { var n = this._controlCorners = {}, o = "leaflet-", s = this._controlContainer = ui("div", o + "control-container", this._container); function t(t, i) { var e = o + t + " " + o + i; n[t + i] = ui("div", e, s) } t("top", "left"), t("top", "right"), t("bottom", "left"), t("bottom", "right") }, _clearControlPos: function () { for (var t in this._controlCorners) li(this._controlCorners[t]); li(this._controlContainer), delete this._controlCorners, delete this._controlContainer } }); var ie = te.extend({ options: { collapsed: !0, position: "topright", autoZIndex: !0, hideSingleBase: !1, sortLayers: !1, sortFunction: function (t, i, e, n) { return e < n ? -1 : n < e ? 1 : 0 } }, initialize: function (t, i, e) { for (var n in p(this, e), this._layerControlInputs = [], this._layers = [], this._lastZIndex = 0, this._handlingClick = !1, t) this._addLayer(t[n], n); for (n in i) this._addLayer(i[n], n, !0) }, onAdd: function (t) { this._initLayout(), this._update(), (this._map = t).on("zoomend", this._checkDisabledLayers, this); for (var i = 0; i < this._layers.length; i++)this._layers[i].layer.on("add remove", this._onLayerChange, this); return this._container }, addTo: function (t) { return te.prototype.addTo.call(this, t), this._expandIfNotCollapsed() }, onRemove: function () { this._map.off("zoomend", this._checkDisabledLayers, this); for (var t = 0; t < this._layers.length; t++)this._layers[t].layer.off("add remove", this._onLayerChange, this) }, addBaseLayer: function (t, i) { return this._addLayer(t, i), this._map ? this._update() : this }, addOverlay: function (t, i) { return this._addLayer(t, i, !0), this._map ? this._update() : this }, removeLayer: function (t) { t.off("add remove", this._onLayerChange, this); var i = this._getLayer(u(t)); return i && this._layers.splice(this._layers.indexOf(i), 1), this._map ? this._update() : this }, expand: function () { mi(this._container, "leaflet-control-layers-expanded"), this._section.style.height = null; var t = this._map.getSize().y - (this._container.offsetTop + 50); return t < this._section.clientHeight ? (mi(this._section, "leaflet-control-layers-scrollbar"), this._section.style.height = t + "px") : fi(this._section, "leaflet-control-layers-scrollbar"), this._checkDisabledLayers(), this }, collapse: function () { return fi(this._container, "leaflet-control-layers-expanded"), this }, _initLayout: function () { var t = "leaflet-control-layers", i = this._container = ui("div", t), e = this.options.collapsed; i.setAttribute("aria-haspopup", !0), Di(i), Ni(i); var n = this._section = ui("section", t + "-list"); e && (this._map.on("click", this.collapse, this), st || ki(i, { mouseenter: this.expand, mouseleave: this.collapse }, this)); var o = this._layersLink = ui("a", t + "-toggle", i); o.href = "#", o.title = "Layers", Tt ? (ki(o, "click", Wi), ki(o, "click", this.expand, this)) : ki(o, "focus", this.expand, this), e || this.expand(), this._baseLayersList = ui("div", t + "-base", n), this._separator = ui("div", t + "-separator", n), this._overlaysList = ui("div", t + "-overlays", n), i.appendChild(n) }, _getLayer: function (t) { for (var i = 0; i < this._layers.length; i++)if (this._layers[i] && u(this._layers[i].layer) === t) return this._layers[i] }, _addLayer: function (t, i, e) { this._map && t.on("add remove", this._onLayerChange, this), this._layers.push({ layer: t, name: i, overlay: e }), this.options.sortLayers && this._layers.sort(a(function (t, i) { return this.options.sortFunction(t.layer, i.layer, t.name, i.name) }, this)), this.options.autoZIndex && t.setZIndex && (this._lastZIndex++ , t.setZIndex(this._lastZIndex)), this._expandIfNotCollapsed() }, _update: function () { if (!this._container) return this; ci(this._baseLayersList), ci(this._overlaysList), this._layerControlInputs = []; var t, i, e, n, o = 0; for (e = 0; e < this._layers.length; e++)n = this._layers[e], this._addItem(n), i = i || n.overlay, t = t || !n.overlay, o += n.overlay ? 0 : 1; return this.options.hideSingleBase && (t = t && 1 < o, this._baseLayersList.style.display = t ? "" : "none"), this._separator.style.display = i && t ? "" : "none", this }, _onLayerChange: function (t) { this._handlingClick || this._update(); var i = this._getLayer(u(t.target)), e = i.overlay ? "add" === t.type ? "overlayadd" : "overlayremove" : "add" === t.type ? "baselayerchange" : null; e && this._map.fire(e, i) }, _createRadioElement: function (t, i) { var e = '<input type="radio" class="leaflet-control-layers-selector" name="' + t + '"' + (i ? ' checked="checked"' : "") + "/>", n = document.createElement("div"); return n.innerHTML = e, n.firstChild }, _addItem: function (t) { var i, e = document.createElement("label"), n = this._map.hasLayer(t.layer); t.overlay ? ((i = document.createElement("input")).type = "checkbox", i.className = "leaflet-control-layers-selector", i.defaultChecked = n) : i = this._createRadioElement("leaflet-base-layers_" + u(this), n), this._layerControlInputs.push(i), i.layerId = u(t.layer), ki(i, "click", this._onInputClick, this); var o = document.createElement("span"); o.innerHTML = " " + t.name; var s = document.createElement("div"); return e.appendChild(s), s.appendChild(i), s.appendChild(o), (t.overlay ? this._overlaysList : this._baseLayersList).appendChild(e), this._checkDisabledLayers(), e }, _onInputClick: function () { var t, i, e = this._layerControlInputs, n = [], o = []; this._handlingClick = !0; for (var s = e.length - 1; 0 <= s; s--)t = e[s], i = this._getLayer(t.layerId).layer, t.checked ? n.push(i) : t.checked || o.push(i); for (s = 0; s < o.length; s++)this._map.hasLayer(o[s]) && this._map.removeLayer(o[s]); for (s = 0; s < n.length; s++)this._map.hasLayer(n[s]) || this._map.addLayer(n[s]); this._handlingClick = !1, this._refocusOnMap() }, _checkDisabledLayers: function () { for (var t, i, e = this._layerControlInputs, n = this._map.getZoom(), o = e.length - 1; 0 <= o; o--)t = e[o], i = this._getLayer(t.layerId).layer, t.disabled = void 0 !== i.options.minZoom && n < i.options.minZoom || void 0 !== i.options.maxZoom && n > i.options.maxZoom }, _expandIfNotCollapsed: function () { return this._map && !this.options.collapsed && this.expand(), this }, _expand: function () { return this.expand() }, _collapse: function () { return this.collapse() } }), ee = te.extend({ options: { position: "topleft", zoomInText: "+", zoomInTitle: "Zoom in", zoomOutText: "&#x2212;", zoomOutTitle: "Zoom out" }, onAdd: function (t) { var i = "leaflet-control-zoom", e = ui("div", i + " leaflet-bar"), n = this.options; return this._zoomInButton = this._createButton(n.zoomInText, n.zoomInTitle, i + "-in", e, this._zoomIn), this._zoomOutButton = this._createButton(n.zoomOutText, n.zoomOutTitle, i + "-out", e, this._zoomOut), this._updateDisabled(), t.on("zoomend zoomlevelschange", this._updateDisabled, this), e }, onRemove: function (t) { t.off("zoomend zoomlevelschange", this._updateDisabled, this) }, disable: function () { return this._disabled = !0, this._updateDisabled(), this }, enable: function () { return this._disabled = !1, this._updateDisabled(), this }, _zoomIn: function (t) { !this._disabled && this._map._zoom < this._map.getMaxZoom() && this._map.zoomIn(this._map.options.zoomDelta * (t.shiftKey ? 3 : 1)) }, _zoomOut: function (t) { !this._disabled && this._map._zoom > this._map.getMinZoom() && this._map.zoomOut(this._map.options.zoomDelta * (t.shiftKey ? 3 : 1)) }, _createButton: function (t, i, e, n, o) { var s = ui("a", e, n); return s.innerHTML = t, s.href = "#", s.title = i, s.setAttribute("role", "button"), s.setAttribute("aria-label", i), Di(s), ki(s, "click", Wi), ki(s, "click", o, this), ki(s, "click", this._refocusOnMap, this), s }, _updateDisabled: function () { var t = this._map, i = "leaflet-disabled"; fi(this._zoomInButton, i), fi(this._zoomOutButton, i), !this._disabled && t._zoom !== t.getMinZoom() || mi(this._zoomOutButton, i), !this._disabled && t._zoom !== t.getMaxZoom() || mi(this._zoomInButton, i) } }); $i.mergeOptions({ zoomControl: !0 }), $i.addInitHook(function () { this.options.zoomControl && (this.zoomControl = new ee, this.addControl(this.zoomControl)) }); var ne = te.extend({ options: { position: "bottomleft", maxWidth: 100, metric: !0, imperial: !0 }, onAdd: function (t) { var i = "leaflet-control-scale", e = ui("div", i), n = this.options; return this._addScales(n, i + "-line", e), t.on(n.updateWhenIdle ? "moveend" : "move", this._update, this), t.whenReady(this._update, this), e }, onRemove: function (t) { t.off(this.options.updateWhenIdle ? "moveend" : "move", this._update, this) }, _addScales: function (t, i, e) { t.metric && (this._mScale = ui("div", i, e)), t.imperial && (this._iScale = ui("div", i, e)) }, _update: function () { var t = this._map, i = t.getSize().y / 2, e = t.distance(t.containerPointToLatLng([0, i]), t.containerPointToLatLng([this.options.maxWidth, i])); this._updateScales(e) }, _updateScales: function (t) { this.options.metric && t && this._updateMetric(t), this.options.imperial && t && this._updateImperial(t) }, _updateMetric: function (t) { var i = this._getRoundNum(t), e = i < 1e3 ? i + " m" : i / 1e3 + " km"; this._updateScale(this._mScale, e, i / t) }, _updateImperial: function (t) { var i, e, n, o = 3.2808399 * t; 5280 < o ? (i = o / 5280, e = this._getRoundNum(i), this._updateScale(this._iScale, e + " mi", e / i)) : (n = this._getRoundNum(o), this._updateScale(this._iScale, n + " ft", n / o)) }, _updateScale: function (t, i, e) { t.style.width = Math.round(this.options.maxWidth * e) + "px", t.innerHTML = i }, _getRoundNum: function (t) { var i = Math.pow(10, (Math.floor(t) + "").length - 1), e = t / i; return i * (e = 10 <= e ? 10 : 5 <= e ? 5 : 3 <= e ? 3 : 2 <= e ? 2 : 1) } }), oe = te.extend({ options: { position: "bottomright", prefix: '<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>' }, initialize: function (t) { p(this, t), this._attributions = {} }, onAdd: function (t) { for (var i in (t.attributionControl = this)._container = ui("div", "leaflet-control-attribution"), Di(this._container), t._layers) t._layers[i].getAttribution && this.addAttribution(t._layers[i].getAttribution()); return this._update(), this._container }, setPrefix: function (t) { return this.options.prefix = t, this._update(), this }, addAttribution: function (t) { return t && (this._attributions[t] || (this._attributions[t] = 0), this._attributions[t]++ , this._update()), this }, removeAttribution: function (t) { return t && this._attributions[t] && (this._attributions[t]-- , this._update()), this }, _update: function () { if (this._map) { var t = []; for (var i in this._attributions) this._attributions[i] && t.push(i); var e = []; this.options.prefix && e.push(this.options.prefix), t.length && e.push(t.join(", ")), this._container.innerHTML = e.join(" | ") } } }); $i.mergeOptions({ attributionControl: !0 }), $i.addInitHook(function () { this.options.attributionControl && (new oe).addTo(this) }); te.Layers = ie, te.Zoom = ee, te.Scale = ne, te.Attribution = oe, Qi.layers = function (t, i, e) { return new ie(t, i, e) }, Qi.zoom = function (t) { return new ee(t) }, Qi.scale = function (t) { return new ne(t) }, Qi.attribution = function (t) { return new oe(t) }; var se = E.extend({ initialize: function (t) { this._map = t }, enable: function () { return this._enabled || (this._enabled = !0, this.addHooks()), this }, disable: function () { return this._enabled && (this._enabled = !1, this.removeHooks()), this }, enabled: function () { return !!this._enabled } }); se.addTo = function (t, i) { return t.addHandler(i, this), this }; var re, ae = { Events: Z }, he = Tt ? "touchstart mousedown" : "mousedown", ue = { mousedown: "mouseup", touchstart: "touchend", pointerdown: "touchend", MSPointerDown: "touchend" }, le = { mousedown: "mousemove", touchstart: "touchmove", pointerdown: "touchmove", MSPointerDown: "touchmove" }, ce = k.extend({ options: { clickTolerance: 3 }, initialize: function (t, i, e, n) { p(this, n), this._element = t, this._dragStartTarget = i || t, this._preventOutline = e }, enable: function () { this._enabled || (ki(this._dragStartTarget, he, this._onDown, this), this._enabled = !0) }, disable: function () { this._enabled && (ce._dragging === this && this.finishDrag(), Ai(this._dragStartTarget, he, this._onDown, this), this._enabled = !1, this._moved = !1) }, _onDown: function (t) { if (!t._simulated && this._enabled && (this._moved = !1, !pi(this._element, "leaflet-zoom-anim") && !(ce._dragging || t.shiftKey || 1 !== t.which && 1 !== t.button && !t.touches || ((ce._dragging = this)._preventOutline && Mi(this._element), Ti(), Qt(), this._moving)))) { this.fire("down"); var i = t.touches ? t.touches[0] : t, e = Si(this._element); this._startPoint = new B(i.clientX, i.clientY), this._parentScale = Ei(e), ki(document, le[t.type], this._onMove, this), ki(document, ue[t.type], this._onUp, this) } }, _onMove: function (t) { if (!t._simulated && this._enabled) if (t.touches && 1 < t.touches.length) this._moved = !0; else { var i = t.touches && 1 === t.touches.length ? t.touches[0] : t, e = new B(i.clientX, i.clientY)._subtract(this._startPoint); (e.x || e.y) && (Math.abs(e.x) + Math.abs(e.y) < this.options.clickTolerance || (e.x /= this._parentScale.x, e.y /= this._parentScale.y, ji(t), this._moved || (this.fire("dragstart"), this._moved = !0, this._startPos = Li(this._element).subtract(e), mi(document.body, "leaflet-dragging"), this._lastTarget = t.target || t.srcElement, window.SVGElementInstance && this._lastTarget instanceof SVGElementInstance && (this._lastTarget = this._lastTarget.correspondingUseElement), mi(this._lastTarget, "leaflet-drag-target")), this._newPos = this._startPos.add(e), this._moving = !0, C(this._animRequest), this._lastEvent = t, this._animRequest = M(this._updatePosition, this, !0))) } }, _updatePosition: function () { var t = { originalEvent: this._lastEvent }; this.fire("predrag", t), Pi(this._element, this._newPos), this.fire("drag", t) }, _onUp: function (t) { !t._simulated && this._enabled && this.finishDrag() }, finishDrag: function () { for (var t in fi(document.body, "leaflet-dragging"), this._lastTarget && (fi(this._lastTarget, "leaflet-drag-target"), this._lastTarget = null), le) Ai(document, le[t], this._onMove, this), Ai(document, ue[t], this._onUp, this); zi(), ti(), this._moved && this._moving && (C(this._animRequest), this.fire("dragend", { distance: this._newPos.distanceTo(this._startPos) })), this._moving = !1, ce._dragging = !1 } }); function _e(t, i) { if (!i || !t.length) return t.slice(); var e = i * i; return t = function (t, i) { var e = t.length, n = new (typeof Uint8Array != void 0 + "" ? Uint8Array : Array)(e); n[0] = n[e - 1] = 1, function t(i, e, n, o, s) { var r, a, h, u = 0; for (a = o + 1; a <= s - 1; a++)h = ge(i[a], i[o], i[s], !0), u < h && (r = a, u = h); n < u && (e[r] = 1, t(i, e, n, o, r), t(i, e, n, r, s)) }(t, n, i, 0, e - 1); var o, s = []; for (o = 0; o < e; o++)n[o] && s.push(t[o]); return s }(t = function (t, i) { for (var e = [t[0]], n = 1, o = 0, s = t.length; n < s; n++)r = t[n], a = t[o], void 0, h = a.x - r.x, u = a.y - r.y, i < h * h + u * u && (e.push(t[n]), o = n); var r, a, h, u; o < s - 1 && e.push(t[s - 1]); return e }(t, e), e) } function de(t, i, e) { return Math.sqrt(ge(t, i, e, !0)) } function pe(t, i, e, n, o) { var s, r, a, h = n ? re : fe(t, e), u = fe(i, e); for (re = u; ;) { if (!(h | u)) return [t, i]; if (h & u) return !1; a = fe(r = me(t, i, s = h || u, e, o), e), s === h ? (t = r, h = a) : (i = r, u = a) } } function me(t, i, e, n, o) { var s, r, a = i.x - t.x, h = i.y - t.y, u = n.min, l = n.max; return 8 & e ? (s = t.x + a * (l.y - t.y) / h, r = l.y) : 4 & e ? (s = t.x + a * (u.y - t.y) / h, r = u.y) : 2 & e ? (s = l.x, r = t.y + h * (l.x - t.x) / a) : 1 & e && (s = u.x, r = t.y + h * (u.x - t.x) / a), new B(s, r, o) } function fe(t, i) { var e = 0; return t.x < i.min.x ? e |= 1 : t.x > i.max.x && (e |= 2), t.y < i.min.y ? e |= 4 : t.y > i.max.y && (e |= 8), e } function ge(t, i, e, n) { var o, s = i.x, r = i.y, a = e.x - s, h = e.y - r, u = a * a + h * h; return 0 < u && (1 < (o = ((t.x - s) * a + (t.y - r) * h) / u) ? (s = e.x, r = e.y) : 0 < o && (s += a * o, r += h * o)), a = t.x - s, h = t.y - r, n ? a * a + h * h : new B(s, r) } function ve(t) { return !v(t[0]) || "object" != typeof t[0][0] && void 0 !== t[0][0] } function ye(t) { return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."), ve(t) } var xe = (Object.freeze || Object)({ simplify: _e, pointToSegmentDistance: de, closestPointOnSegment: function (t, i, e) { return ge(t, i, e) }, clipSegment: pe, _getEdgeIntersection: me, _getBitCode: fe, _sqClosestPointOnSegment: ge, isFlat: ve, _flat: ye }); function we(t, i, e) { var n, o, s, r, a, h, u, l, c, _ = [1, 4, 2, 8]; for (o = 0, u = t.length; o < u; o++)t[o]._code = fe(t[o], i); for (r = 0; r < 4; r++) { for (l = _[r], n = [], o = 0, s = (u = t.length) - 1; o < u; s = o++)a = t[o], h = t[s], a._code & l ? h._code & l || ((c = me(h, a, l, i, e))._code = fe(c, i), n.push(c)) : (h._code & l && ((c = me(h, a, l, i, e))._code = fe(c, i), n.push(c)), n.push(a)); t = n } return t } var Pe, Le = (Object.freeze || Object)({ clipPolygon: we }), be = { project: function (t) { return new B(t.lng, t.lat) }, unproject: function (t) { return new j(t.y, t.x) }, bounds: new O([-180, -90], [180, 90]) }, Te = { R: 6378137, R_MINOR: 6356752.314245179, bounds: new O([-20037508.34279, -15496570.73972], [20037508.34279, 18764656.23138]), project: function (t) { var i = Math.PI / 180, e = this.R, n = t.lat * i, o = this.R_MINOR / e, s = Math.sqrt(1 - o * o), r = s * Math.sin(n), a = Math.tan(Math.PI / 4 - n / 2) / Math.pow((1 - r) / (1 + r), s / 2); return n = -e * Math.log(Math.max(a, 1e-10)), new B(t.lng * i * e, n) }, unproject: function (t) { for (var i, e = 180 / Math.PI, n = this.R, o = this.R_MINOR / n, s = Math.sqrt(1 - o * o), r = Math.exp(-t.y / n), a = Math.PI / 2 - 2 * Math.atan(r), h = 0, u = .1; h < 15 && 1e-7 < Math.abs(u); h++)i = s * Math.sin(a), i = Math.pow((1 - i) / (1 + i), s / 2), a += u = Math.PI / 2 - 2 * Math.atan(r * i) - a; return new j(a * e, t.x * e / n) } }, ze = (Object.freeze || Object)({ LonLat: be, Mercator: Te, SphericalMercator: q }), Me = h({}, U, { code: "EPSG:3395", projection: Te, transformation: (Pe = .5 / (Math.PI * Te.R), K(Pe, .5, -Pe, .5)) }), Ce = h({}, U, { code: "EPSG:4326", projection: be, transformation: K(1 / 180, 1, -1 / 180, .5) }), Se = h({}, F, { projection: be, transformation: K(1, 0, -1, 0), scale: function (t) { return Math.pow(2, t) }, zoom: function (t) { return Math.log(t) / Math.LN2 }, distance: function (t, i) { var e = i.lng - t.lng, n = i.lat - t.lat; return Math.sqrt(e * e + n * n) }, infinite: !0 }); F.Earth = U, F.EPSG3395 = Me, F.EPSG3857 = X, F.EPSG900913 = J, F.EPSG4326 = Ce, F.Simple = Se; var Ee = k.extend({ options: { pane: "overlayPane", attribution: null, bubblingMouseEvents: !0 }, addTo: function (t) { return t.addLayer(this), this }, remove: function () { return this.removeFrom(this._map || this._mapToAdd) }, removeFrom: function (t) { return t && t.removeLayer(this), this }, getPane: function (t) { return this._map.getPane(t ? this.options[t] || t : this.options.pane) }, addInteractiveTarget: function (t) { return this._map._targets[u(t)] = this }, removeInteractiveTarget: function (t) { return delete this._map._targets[u(t)], this }, getAttribution: function () { return this.options.attribution }, _layerAdd: function (t) { var i = t.target; if (i.hasLayer(this)) { if (this._map = i, this._zoomAnimated = i._zoomAnimated, this.getEvents) { var e = this.getEvents(); i.on(e, this), this.once("remove", function () { i.off(e, this) }, this) } this.onAdd(i), this.getAttribution && i.attributionControl && i.attributionControl.addAttribution(this.getAttribution()), this.fire("add"), i.fire("layeradd", { layer: this }) } } }); $i.include({ addLayer: function (t) { if (!t._layerAdd) throw new Error("The provided object is not a Layer."); var i = u(t); return this._layers[i] || ((this._layers[i] = t)._mapToAdd = this, t.beforeAdd && t.beforeAdd(this), this.whenReady(t._layerAdd, t)), this }, removeLayer: function (t) { var i = u(t); return this._layers[i] && (this._loaded && t.onRemove(this), t.getAttribution && this.attributionControl && this.attributionControl.removeAttribution(t.getAttribution()), delete this._layers[i], this._loaded && (this.fire("layerremove", { layer: t }), t.fire("remove")), t._map = t._mapToAdd = null), this }, hasLayer: function (t) { return !!t && u(t) in this._layers }, eachLayer: function (t, i) { for (var e in this._layers) t.call(i, this._layers[e]); return this }, _addLayers: function (t) { for (var i = 0, e = (t = t ? v(t) ? t : [t] : []).length; i < e; i++)this.addLayer(t[i]) }, _addZoomLimit: function (t) { !isNaN(t.options.maxZoom) && isNaN(t.options.minZoom) || (this._zoomBoundLayers[u(t)] = t, this._updateZoomLevels()) }, _removeZoomLimit: function (t) { var i = u(t); this._zoomBoundLayers[i] && (delete this._zoomBoundLayers[i], this._updateZoomLevels()) }, _updateZoomLevels: function () { var t = 1 / 0, i = -1 / 0, e = this._getZoomSpan(); for (var n in this._zoomBoundLayers) { var o = this._zoomBoundLayers[n].options; t = void 0 === o.minZoom ? t : Math.min(t, o.minZoom), i = void 0 === o.maxZoom ? i : Math.max(i, o.maxZoom) } this._layersMaxZoom = i === -1 / 0 ? void 0 : i, this._layersMinZoom = t === 1 / 0 ? void 0 : t, e !== this._getZoomSpan() && this.fire("zoomlevelschange"), void 0 === this.options.maxZoom && this._layersMaxZoom && this.getZoom() > this._layersMaxZoom && this.setZoom(this._layersMaxZoom), void 0 === this.options.minZoom && this._layersMinZoom && this.getZoom() < this._layersMinZoom && this.setZoom(this._layersMinZoom) } }); var Ze = Ee.extend({ initialize: function (t, i) { var e, n; if (p(this, i), this._layers = {}, t) for (e = 0, n = t.length; e < n; e++)this.addLayer(t[e]) }, addLayer: function (t) { var i = this.getLayerId(t); return this._layers[i] = t, this._map && this._map.addLayer(t), this }, removeLayer: function (t) { var i = t in this._layers ? t : this.getLayerId(t); return this._map && this._layers[i] && this._map.removeLayer(this._layers[i]), delete this._layers[i], this }, hasLayer: function (t) { return !!t && (t in this._layers || this.getLayerId(t) in this._layers) }, clearLayers: function () { return this.eachLayer(this.removeLayer, this) }, invoke: function (t) { var i, e, n = Array.prototype.slice.call(arguments, 1); for (i in this._layers) (e = this._layers[i])[t] && e[t].apply(e, n); return this }, onAdd: function (t) { this.eachLayer(t.addLayer, t) }, onRemove: function (t) { this.eachLayer(t.removeLayer, t) }, eachLayer: function (t, i) { for (var e in this._layers) t.call(i, this._layers[e]); return this }, getLayer: function (t) { return this._layers[t] }, getLayers: function () { var t = []; return this.eachLayer(t.push, t), t }, setZIndex: function (t) { return this.invoke("setZIndex", t) }, getLayerId: function (t) { return u(t) } }), ke = Ze.extend({ addLayer: function (t) { return this.hasLayer(t) ? this : (t.addEventParent(this), Ze.prototype.addLayer.call(this, t), this.fire("layeradd", { layer: t })) }, removeLayer: function (t) { return this.hasLayer(t) ? (t in this._layers && (t = this._layers[t]), t.removeEventParent(this), Ze.prototype.removeLayer.call(this, t), this.fire("layerremove", { layer: t })) : this }, setStyle: function (t) { return this.invoke("setStyle", t) }, bringToFront: function () { return this.invoke("bringToFront") }, bringToBack: function () { return this.invoke("bringToBack") }, getBounds: function () { var t = new N; for (var i in this._layers) { var e = this._layers[i]; t.extend(e.getBounds ? e.getBounds() : e.getLatLng()) } return t } }), Be = E.extend({ options: { popupAnchor: [0, 0], tooltipAnchor: [0, 0] }, initialize: function (t) { p(this, t) }, createIcon: function (t) { return this._createIcon("icon", t) }, createShadow: function (t) { return this._createIcon("shadow", t) }, _createIcon: function (t, i) { var e = this._getIconUrl(t); if (!e) { if ("icon" === t) throw new Error("iconUrl not set in Icon options (see the docs)."); return null } var n = this._createImg(e, i && "IMG" === i.tagName ? i : null); return this._setIconStyles(n, t), n }, _setIconStyles: function (t, i) { var e = this.options, n = e[i + "Size"]; "number" == typeof n && (n = [n, n]); var o = I(n), s = I("shadow" === i && e.shadowAnchor || e.iconAnchor || o && o.divideBy(2, !0)); t.className = "leaflet-marker-" + i + " " + (e.className || ""), s && (t.style.marginLeft = -s.x + "px", t.style.marginTop = -s.y + "px"), o && (t.style.width = o.x + "px", t.style.height = o.y + "px") }, _createImg: function (t, i) { return (i = i || document.createElement("img")).src = t, i }, _getIconUrl: function (t) { return Ct && this.options[t + "RetinaUrl"] || this.options[t + "Url"] } }); var Ae = Be.extend({ options: { iconUrl: "marker-icon.png", iconRetinaUrl: "marker-icon-2x.png", shadowUrl: "marker-shadow.png", iconSize: [25, 41], iconAnchor: [12, 41], popupAnchor: [1, -34], tooltipAnchor: [16, -28], shadowSize: [41, 41] }, _getIconUrl: function (t) { return Ae.imagePath || (Ae.imagePath = this._detectIconPath()), (this.options.imagePath || Ae.imagePath) + Be.prototype._getIconUrl.call(this, t) }, _detectIconPath: function () { var t = ui("div", "leaflet-default-icon-path", document.body), i = hi(t, "background-image") || hi(t, "backgroundImage"); return document.body.removeChild(t), i = null === i || 0 !== i.indexOf("url") ? "" : i.replace(/^url\(["']?/, "").replace(/marker-icon\.png["']?\)$/, "") } }), Ie = se.extend({ initialize: function (t) { this._marker = t }, addHooks: function () { var t = this._marker._icon; this._draggable || (this._draggable = new ce(t, t, !0)), this._draggable.on({ dragstart: this._onDragStart, predrag: this._onPreDrag, drag: this._onDrag, dragend: this._onDragEnd }, this).enable(), mi(t, "leaflet-marker-draggable") }, removeHooks: function () { this._draggable.off({ dragstart: this._onDragStart, predrag: this._onPreDrag, drag: this._onDrag, dragend: this._onDragEnd }, this).disable(), this._marker._icon && fi(this._marker._icon, "leaflet-marker-draggable") }, moved: function () { return this._draggable && this._draggable._moved }, _adjustPan: function (t) { var i = this._marker, e = i._map, n = this._marker.options.autoPanSpeed, o = this._marker.options.autoPanPadding, s = Li(i._icon), r = e.getPixelBounds(), a = e.getPixelOrigin(), h = R(r.min._subtract(a).add(o), r.max._subtract(a).subtract(o)); if (!h.contains(s)) { var u = I((Math.max(h.max.x, s.x) - h.max.x) / (r.max.x - h.max.x) - (Math.min(h.min.x, s.x) - h.min.x) / (r.min.x - h.min.x), (Math.max(h.max.y, s.y) - h.max.y) / (r.max.y - h.max.y) - (Math.min(h.min.y, s.y) - h.min.y) / (r.min.y - h.min.y)).multiplyBy(n); e.panBy(u, { animate: !1 }), this._draggable._newPos._add(u), this._draggable._startPos._add(u), Pi(i._icon, this._draggable._newPos), this._onDrag(t), this._panRequest = M(this._adjustPan.bind(this, t)) } }, _onDragStart: function () { this._oldLatLng = this._marker.getLatLng(), this._marker.closePopup().fire("movestart").fire("dragstart") }, _onPreDrag: function (t) { this._marker.options.autoPan && (C(this._panRequest), this._panRequest = M(this._adjustPan.bind(this, t))) }, _onDrag: function (t) { var i = this._marker, e = i._shadow, n = Li(i._icon), o = i._map.layerPointToLatLng(n); e && Pi(e, n), i._latlng = o, t.latlng = o, t.oldLatLng = this._oldLatLng, i.fire("move", t).fire("drag", t) }, _onDragEnd: function (t) { C(this._panRequest), delete this._oldLatLng, this._marker.fire("moveend").fire("dragend", t) } }), Oe = Ee.extend({ options: { icon: new Ae, interactive: !0, keyboard: !0, title: "", alt: "", zIndexOffset: 0, opacity: 1, riseOnHover: !1, riseOffset: 250, pane: "markerPane", shadowPane: "shadowPane", bubblingMouseEvents: !1, draggable: !1, autoPan: !1, autoPanPadding: [50, 50], autoPanSpeed: 10 }, initialize: function (t, i) { p(this, i), this._latlng = W(t) }, onAdd: function (t) { this._zoomAnimated = this._zoomAnimated && t.options.markerZoomAnimation, this._zoomAnimated && t.on("zoomanim", this._animateZoom, this), this._initIcon(), this.update() }, onRemove: function (t) { this.dragging && this.dragging.enabled() && (this.options.draggable = !0, this.dragging.removeHooks()), delete this.dragging, this._zoomAnimated && t.off("zoomanim", this._animateZoom, this), this._removeIcon(), this._removeShadow() }, getEvents: function () { return { zoom: this.update, viewreset: this.update } }, getLatLng: function () { return this._latlng }, setLatLng: function (t) { var i = this._latlng; return this._latlng = W(t), this.update(), this.fire("move", { oldLatLng: i, latlng: this._latlng }) }, setZIndexOffset: function (t) { return this.options.zIndexOffset = t, this.update() }, getIcon: function () { return this.options.icon }, setIcon: function (t) { return this.options.icon = t, this._map && (this._initIcon(), this.update()), this._popup && this.bindPopup(this._popup, this._popup.options), this }, getElement: function () { return this._icon }, update: function () { if (this._icon && this._map) { var t = this._map.latLngToLayerPoint(this._latlng).round(); this._setPos(t) } return this }, _initIcon: function () { var t = this.options, i = "leaflet-zoom-" + (this._zoomAnimated ? "animated" : "hide"), e = t.icon.createIcon(this._icon), n = !1; e !== this._icon && (this._icon && this._removeIcon(), n = !0, t.title && (e.title = t.title), "IMG" === e.tagName && (e.alt = t.alt || "")), mi(e, i), t.keyboard && (e.tabIndex = "0"), this._icon = e, t.riseOnHover && this.on({ mouseover: this._bringToFront, mouseout: this._resetZIndex }); var o = t.icon.createShadow(this._shadow), s = !1; o !== this._shadow && (this._removeShadow(), s = !0), o && (mi(o, i), o.alt = ""), this._shadow = o, t.opacity < 1 && this._updateOpacity(), n && this.getPane().appendChild(this._icon), this._initInteraction(), o && s && this.getPane(t.shadowPane).appendChild(this._shadow) }, _removeIcon: function () { this.options.riseOnHover && this.off({ mouseover: this._bringToFront, mouseout: this._resetZIndex }), li(this._icon), this.removeInteractiveTarget(this._icon), this._icon = null }, _removeShadow: function () { this._shadow && li(this._shadow), this._shadow = null }, _setPos: function (t) { this._icon && Pi(this._icon, t), this._shadow && Pi(this._shadow, t), this._zIndex = t.y + this.options.zIndexOffset, this._resetZIndex() }, _updateZIndex: function (t) { this._icon && (this._icon.style.zIndex = this._zIndex + t) }, _animateZoom: function (t) { var i = this._map._latLngToNewLayerPoint(this._latlng, t.zoom, t.center).round(); this._setPos(i) }, _initInteraction: function () { if (this.options.interactive && (mi(this._icon, "leaflet-interactive"), this.addInteractiveTarget(this._icon), Ie)) { var t = this.options.draggable; this.dragging && (t = this.dragging.enabled(), this.dragging.disable()), this.dragging = new Ie(this), t && this.dragging.enable() } }, setOpacity: function (t) { return this.options.opacity = t, this._map && this._updateOpacity(), this }, _updateOpacity: function () { var t = this.options.opacity; this._icon && yi(this._icon, t), this._shadow && yi(this._shadow, t) }, _bringToFront: function () { this._updateZIndex(this.options.riseOffset) }, _resetZIndex: function () { this._updateZIndex(0) }, _getPopupAnchor: function () { return this.options.icon.options.popupAnchor }, _getTooltipAnchor: function () { return this.options.icon.options.tooltipAnchor } }); var Re = Ee.extend({ options: { stroke: !0, color: "#3388ff", weight: 3, opacity: 1, lineCap: "round", lineJoin: "round", dashArray: null, dashOffset: null, fill: !1, fillColor: null, fillOpacity: .2, fillRule: "evenodd", interactive: !0, bubblingMouseEvents: !0 }, beforeAdd: function (t) { this._renderer = t.getRenderer(this) }, onAdd: function () { this._renderer._initPath(this), this._reset(), this._renderer._addPath(this) }, onRemove: function () { this._renderer._removePath(this) }, redraw: function () { return this._map && this._renderer._updatePath(this), this }, setStyle: function (t) { return p(this, t), this._renderer && (this._renderer._updateStyle(this), this.options.stroke && t && t.hasOwnProperty("weight") && this._updateBounds()), this }, bringToFront: function () { return this._renderer && this._renderer._bringToFront(this), this }, bringToBack: function () { return this._renderer && this._renderer._bringToBack(this), this }, getElement: function () { return this._path }, _reset: function () { this._project(), this._update() }, _clickTolerance: function () { return (this.options.stroke ? this.options.weight / 2 : 0) + this._renderer.options.tolerance } }), Ne = Re.extend({ options: { fill: !0, radius: 10 }, initialize: function (t, i) { p(this, i), this._latlng = W(t), this._radius = this.options.radius }, setLatLng: function (t) { var i = this._latlng; return this._latlng = W(t), this.redraw(), this.fire("move", { oldLatLng: i, latlng: this._latlng }) }, getLatLng: function () { return this._latlng }, setRadius: function (t) { return this.options.radius = this._radius = t, this.redraw() }, getRadius: function () { return this._radius }, setStyle: function (t) { var i = t && t.radius || this._radius; return Re.prototype.setStyle.call(this, t), this.setRadius(i), this }, _project: function () { this._point = this._map.latLngToLayerPoint(this._latlng), this._updateBounds() }, _updateBounds: function () { var t = this._radius, i = this._radiusY || t, e = this._clickTolerance(), n = [t + e, i + e]; this._pxBounds = new O(this._point.subtract(n), this._point.add(n)) }, _update: function () { this._map && this._updatePath() }, _updatePath: function () { this._renderer._updateCircle(this) }, _empty: function () { return this._radius && !this._renderer._bounds.intersects(this._pxBounds) }, _containsPoint: function (t) { return t.distanceTo(this._point) <= this._radius + this._clickTolerance() } }); var De = Ne.extend({ initialize: function (t, i, e) { if ("number" == typeof i && (i = h({}, e, { radius: i })), p(this, i), this._latlng = W(t), isNaN(this.options.radius)) throw new Error("Circle radius cannot be NaN"); this._mRadius = this.options.radius }, setRadius: function (t) { return this._mRadius = t, this.redraw() }, getRadius: function () { return this._mRadius }, getBounds: function () { var t = [this._radius, this._radiusY || this._radius]; return new N(this._map.layerPointToLatLng(this._point.subtract(t)), this._map.layerPointToLatLng(this._point.add(t))) }, setStyle: Re.prototype.setStyle, _project: function () { var t = this._latlng.lng, i = this._latlng.lat, e = this._map, n = e.options.crs; if (n.distance === U.distance) { var o = Math.PI / 180, s = this._mRadius / U.R / o, r = e.project([i + s, t]), a = e.project([i - s, t]), h = r.add(a).divideBy(2), u = e.unproject(h).lat, l = Math.acos((Math.cos(s * o) - Math.sin(i * o) * Math.sin(u * o)) / (Math.cos(i * o) * Math.cos(u * o))) / o; !isNaN(l) && 0 !== l || (l = s / Math.cos(Math.PI / 180 * i)), this._point = h.subtract(e.getPixelOrigin()), this._radius = isNaN(l) ? 0 : h.x - e.project([u, t - l]).x, this._radiusY = h.y - r.y } else { var c = n.unproject(n.project(this._latlng).subtract([this._mRadius, 0])); this._point = e.latLngToLayerPoint(this._latlng), this._radius = this._point.x - e.latLngToLayerPoint(c).x } this._updateBounds() } }); var je = Re.extend({ options: { smoothFactor: 1, noClip: !1 }, initialize: function (t, i) { p(this, i), this._setLatLngs(t) }, getLatLngs: function () { return this._latlngs }, setLatLngs: function (t) { return this._setLatLngs(t), this.redraw() }, isEmpty: function () { return !this._latlngs.length }, closestLayerPoint: function (t) { for (var i, e, n = 1 / 0, o = null, s = ge, r = 0, a = this._parts.length; r < a; r++)for (var h = this._parts[r], u = 1, l = h.length; u < l; u++) { var c = s(t, i = h[u - 1], e = h[u], !0); c < n && (n = c, o = s(t, i, e)) } return o && (o.distance = Math.sqrt(n)), o }, getCenter: function () { if (!this._map) throw new Error("Must add layer to map before using getCenter()"); var t, i, e, n, o, s, r, a = this._rings[0], h = a.length; if (!h) return null; for (i = t = 0; t < h - 1; t++)i += a[t].distanceTo(a[t + 1]) / 2; if (0 === i) return this._map.layerPointToLatLng(a[0]); for (n = t = 0; t < h - 1; t++)if (o = a[t], s = a[t + 1], i < (n += e = o.distanceTo(s))) return r = (n - i) / e, this._map.layerPointToLatLng([s.x - r * (s.x - o.x), s.y - r * (s.y - o.y)]) }, getBounds: function () { return this._bounds }, addLatLng: function (t, i) { return i = i || this._defaultShape(), t = W(t), i.push(t), this._bounds.extend(t), this.redraw() }, _setLatLngs: function (t) { this._bounds = new N, this._latlngs = this._convertLatLngs(t) }, _defaultShape: function () { return ve(this._latlngs) ? this._latlngs : this._latlngs[0] }, _convertLatLngs: function (t) { for (var i = [], e = ve(t), n = 0, o = t.length; n < o; n++)e ? (i[n] = W(t[n]), this._bounds.extend(i[n])) : i[n] = this._convertLatLngs(t[n]); return i }, _project: function () { var t = new O; this._rings = [], this._projectLatlngs(this._latlngs, this._rings, t), this._bounds.isValid() && t.isValid() && (this._rawPxBounds = t, this._updateBounds()) }, _updateBounds: function () { var t = this._clickTolerance(), i = new B(t, t); this._pxBounds = new O([this._rawPxBounds.min.subtract(i), this._rawPxBounds.max.add(i)]) }, _projectLatlngs: function (t, i, e) { var n, o, s = t[0] instanceof j, r = t.length; if (s) { for (o = [], n = 0; n < r; n++)o[n] = this._map.latLngToLayerPoint(t[n]), e.extend(o[n]); i.push(o) } else for (n = 0; n < r; n++)this._projectLatlngs(t[n], i, e) }, _clipPoints: function () { var t = this._renderer._bounds; if (this._parts = [], this._pxBounds && this._pxBounds.intersects(t)) if (this.options.noClip) this._parts = this._rings; else { var i, e, n, o, s, r, a, h = this._parts; for (n = i = 0, o = this._rings.length; i < o; i++)for (e = 0, s = (a = this._rings[i]).length; e < s - 1; e++)(r = pe(a[e], a[e + 1], t, e, !0)) && (h[n] = h[n] || [], h[n].push(r[0]), r[1] === a[e + 1] && e !== s - 2 || (h[n].push(r[1]), n++)) } }, _simplifyPoints: function () { for (var t = this._parts, i = this.options.smoothFactor, e = 0, n = t.length; e < n; e++)t[e] = _e(t[e], i) }, _update: function () { this._map && (this._clipPoints(), this._simplifyPoints(), this._updatePath()) }, _updatePath: function () { this._renderer._updatePoly(this) }, _containsPoint: function (t, i) { var e, n, o, s, r, a, h = this._clickTolerance(); if (!this._pxBounds || !this._pxBounds.contains(t)) return !1; for (e = 0, s = this._parts.length; e < s; e++)for (n = 0, o = (r = (a = this._parts[e]).length) - 1; n < r; o = n++)if ((i || 0 !== n) && de(t, a[o], a[n]) <= h) return !0; return !1 } }); je._flat = ye; var We = je.extend({ options: { fill: !0 }, isEmpty: function () { return !this._latlngs.length || !this._latlngs[0].length }, getCenter: function () { if (!this._map) throw new Error("Must add layer to map before using getCenter()"); var t, i, e, n, o, s, r, a, h, u = this._rings[0], l = u.length; if (!l) return null; for (s = r = a = 0, t = 0, i = l - 1; t < l; i = t++)e = u[t], n = u[i], o = e.y * n.x - n.y * e.x, r += (e.x + n.x) * o, a += (e.y + n.y) * o, s += 3 * o; return h = 0 === s ? u[0] : [r / s, a / s], this._map.layerPointToLatLng(h) }, _convertLatLngs: function (t) { var i = je.prototype._convertLatLngs.call(this, t), e = i.length; return 2 <= e && i[0] instanceof j && i[0].equals(i[e - 1]) && i.pop(), i }, _setLatLngs: function (t) { je.prototype._setLatLngs.call(this, t), ve(this._latlngs) && (this._latlngs = [this._latlngs]) }, _defaultShape: function () { return ve(this._latlngs[0]) ? this._latlngs[0] : this._latlngs[0][0] }, _clipPoints: function () { var t = this._renderer._bounds, i = this.options.weight, e = new B(i, i); if (t = new O(t.min.subtract(e), t.max.add(e)), this._parts = [], this._pxBounds && this._pxBounds.intersects(t)) if (this.options.noClip) this._parts = this._rings; else for (var n, o = 0, s = this._rings.length; o < s; o++)(n = we(this._rings[o], t, !0)).length && this._parts.push(n) }, _updatePath: function () { this._renderer._updatePoly(this, !0) }, _containsPoint: function (t) { var i, e, n, o, s, r, a, h, u = !1; if (!this._pxBounds || !this._pxBounds.contains(t)) return !1; for (o = 0, a = this._parts.length; o < a; o++)for (s = 0, r = (h = (i = this._parts[o]).length) - 1; s < h; r = s++)e = i[s], n = i[r], e.y > t.y != n.y > t.y && t.x < (n.x - e.x) * (t.y - e.y) / (n.y - e.y) + e.x && (u = !u); return u || je.prototype._containsPoint.call(this, t, !0) } }); var He = ke.extend({ initialize: function (t, i) { p(this, i), this._layers = {}, t && this.addData(t) }, addData: function (t) { var i, e, n, o = v(t) ? t : t.features; if (o) { for (i = 0, e = o.length; i < e; i++)((n = o[i]).geometries || n.geometry || n.features || n.coordinates) && this.addData(n); return this } var s = this.options; if (s.filter && !s.filter(t)) return this; var r = Fe(t, s); return r ? (r.feature = Xe(t), r.defaultOptions = r.options, this.resetStyle(r), s.onEachFeature && s.onEachFeature(t, r), this.addLayer(r)) : this }, resetStyle: function (t) { return void 0 === t ? this.eachLayer(this.resetStyle, this) : (t.options = h({}, t.defaultOptions), this._setLayerStyle(t, this.options.style), this) }, setStyle: function (i) { return this.eachLayer(function (t) { this._setLayerStyle(t, i) }, this) }, _setLayerStyle: function (t, i) { t.setStyle && ("function" == typeof i && (i = i(t.feature)), t.setStyle(i)) } }); function Fe(t, i) { var e, n, o, s, r = "Feature" === t.type ? t.geometry : t, a = r ? r.coordinates : null, h = [], u = i && i.pointToLayer, l = i && i.coordsToLatLng || Ve; if (!a && !r) return null; switch (r.type) { case "Point": return Ue(u, t, e = l(a), i); case "MultiPoint": for (o = 0, s = a.length; o < s; o++)e = l(a[o]), h.push(Ue(u, t, e, i)); return new ke(h); case "LineString": case "MultiLineString": return n = qe(a, "LineString" === r.type ? 0 : 1, l), new je(n, i); case "Polygon": case "MultiPolygon": return n = qe(a, "Polygon" === r.type ? 1 : 2, l), new We(n, i); case "GeometryCollection": for (o = 0, s = r.geometries.length; o < s; o++) { var c = Fe({ geometry: r.geometries[o], type: "Feature", properties: t.properties }, i); c && h.push(c) } return new ke(h); default: throw new Error("Invalid GeoJSON object.") } } function Ue(t, i, e, n) { return t ? t(i, e) : new Oe(e, n && n.markersInheritOptions && n) } function Ve(t) { return new j(t[1], t[0], t[2]) } function qe(t, i, e) { for (var n, o = [], s = 0, r = t.length; s < r; s++)n = i ? qe(t[s], i - 1, e) : (e || Ve)(t[s]), o.push(n); return o } function Ge(t, i) { return i = "number" == typeof i ? i : 6, void 0 !== t.alt ? [c(t.lng, i), c(t.lat, i), c(t.alt, i)] : [c(t.lng, i), c(t.lat, i)] } function Ke(t, i, e, n) { for (var o = [], s = 0, r = t.length; s < r; s++)o.push(i ? Ke(t[s], i - 1, e, n) : Ge(t[s], n)); return !i && e && o.push(o[0]), o } function Ye(t, i) { return t.feature ? h({}, t.feature, { geometry: i }) : Xe(i) } function Xe(t) { return "Feature" === t.type || "FeatureCollection" === t.type ? t : { type: "Feature", properties: {}, geometry: t } } var Je = { toGeoJSON: function (t) { return Ye(this, { type: "Point", coordinates: Ge(this.getLatLng(), t) }) } }; function $e(t, i) { return new He(t, i) } Oe.include(Je), De.include(Je), Ne.include(Je), je.include({ toGeoJSON: function (t) { var i = !ve(this._latlngs); return Ye(this, { type: (i ? "Multi" : "") + "LineString", coordinates: Ke(this._latlngs, i ? 1 : 0, !1, t) }) } }), We.include({ toGeoJSON: function (t) { var i = !ve(this._latlngs), e = i && !ve(this._latlngs[0]), n = Ke(this._latlngs, e ? 2 : i ? 1 : 0, !0, t); return i || (n = [n]), Ye(this, { type: (e ? "Multi" : "") + "Polygon", coordinates: n }) } }), Ze.include({ toMultiPoint: function (i) { var e = []; return this.eachLayer(function (t) { e.push(t.toGeoJSON(i).geometry.coordinates) }), Ye(this, { type: "MultiPoint", coordinates: e }) }, toGeoJSON: function (n) { var t = this.feature && this.feature.geometry && this.feature.geometry.type; if ("MultiPoint" === t) return this.toMultiPoint(n); var o = "GeometryCollection" === t, s = []; return this.eachLayer(function (t) { if (t.toGeoJSON) { var i = t.toGeoJSON(n); if (o) s.push(i.geometry); else { var e = Xe(i); "FeatureCollection" === e.type ? s.push.apply(s, e.features) : s.push(e) } } }), o ? Ye(this, { geometries: s, type: "GeometryCollection" }) : { type: "FeatureCollection", features: s } } }); var Qe = $e, tn = Ee.extend({ options: { opacity: 1, alt: "", interactive: !1, crossOrigin: !1, errorOverlayUrl: "", zIndex: 1, className: "" }, initialize: function (t, i, e) { this._url = t, this._bounds = D(i), p(this, e) }, onAdd: function () { this._image || (this._initImage(), this.options.opacity < 1 && this._updateOpacity()), this.options.interactive && (mi(this._image, "leaflet-interactive"), this.addInteractiveTarget(this._image)), this.getPane().appendChild(this._image), this._reset() }, onRemove: function () { li(this._image), this.options.interactive && this.removeInteractiveTarget(this._image) }, setOpacity: function (t) { return this.options.opacity = t, this._image && this._updateOpacity(), this }, setStyle: function (t) { return t.opacity && this.setOpacity(t.opacity), this }, bringToFront: function () { return this._map && _i(this._image), this }, bringToBack: function () { return this._map && di(this._image), this }, setUrl: function (t) { return this._url = t, this._image && (this._image.src = t), this }, setBounds: function (t) { return this._bounds = D(t), this._map && this._reset(), this }, getEvents: function () { var t = { zoom: this._reset, viewreset: this._reset }; return this._zoomAnimated && (t.zoomanim = this._animateZoom), t }, setZIndex: function (t) { return this.options.zIndex = t, this._updateZIndex(), this }, getBounds: function () { return this._bounds }, getElement: function () { return this._image }, _initImage: function () { var t = "IMG" === this._url.tagName, i = this._image = t ? this._url : ui("img"); mi(i, "leaflet-image-layer"), this._zoomAnimated && mi(i, "leaflet-zoom-animated"), this.options.className && mi(i, this.options.className), i.onselectstart = l, i.onmousemove = l, i.onload = a(this.fire, this, "load"), i.onerror = a(this._overlayOnError, this, "error"), !this.options.crossOrigin && "" !== this.options.crossOrigin || (i.crossOrigin = !0 === this.options.crossOrigin ? "" : this.options.crossOrigin), this.options.zIndex && this._updateZIndex(), t ? this._url = i.src : (i.src = this._url, i.alt = this.options.alt) }, _animateZoom: function (t) { var i = this._map.getZoomScale(t.zoom), e = this._map._latLngBoundsToNewLayerBounds(this._bounds, t.zoom, t.center).min; wi(this._image, e, i) }, _reset: function () { var t = this._image, i = new O(this._map.latLngToLayerPoint(this._bounds.getNorthWest()), this._map.latLngToLayerPoint(this._bounds.getSouthEast())), e = i.getSize(); Pi(t, i.min), t.style.width = e.x + "px", t.style.height = e.y + "px" }, _updateOpacity: function () { yi(this._image, this.options.opacity) }, _updateZIndex: function () { this._image && void 0 !== this.options.zIndex && null !== this.options.zIndex && (this._image.style.zIndex = this.options.zIndex) }, _overlayOnError: function () { this.fire("error"); var t = this.options.errorOverlayUrl; t && this._url !== t && (this._url = t, this._image.src = t) } }), en = tn.extend({ options: { autoplay: !0, loop: !0, keepAspectRatio: !0 }, _initImage: function () { var t = "VIDEO" === this._url.tagName, i = this._image = t ? this._url : ui("video"); if (mi(i, "leaflet-image-layer"), this._zoomAnimated && mi(i, "leaflet-zoom-animated"), this.options.className && mi(i, this.options.className), i.onselectstart = l, i.onmousemove = l, i.onloadeddata = a(this.fire, this, "load"), t) { for (var e = i.getElementsByTagName("source"), n = [], o = 0; o < e.length; o++)n.push(e[o].src); this._url = 0 < e.length ? n : [i.src] } else { v(this._url) || (this._url = [this._url]), !this.options.keepAspectRatio && i.style.hasOwnProperty("objectFit") && (i.style.objectFit = "fill"), i.autoplay = !!this.options.autoplay, i.loop = !!this.options.loop; for (var s = 0; s < this._url.length; s++) { var r = ui("source"); r.src = this._url[s], i.appendChild(r) } } } }); var nn = tn.extend({ _initImage: function () { var t = this._image = this._url; mi(t, "leaflet-image-layer"), this._zoomAnimated && mi(t, "leaflet-zoom-animated"), this.options.className && mi(t, this.options.className), t.onselectstart = l, t.onmousemove = l } }); var on = Ee.extend({ options: { offset: [0, 7], className: "", pane: "popupPane" }, initialize: function (t, i) { p(this, t), this._source = i }, onAdd: function (t) { this._zoomAnimated = t._zoomAnimated, this._container || this._initLayout(), t._fadeAnimated && yi(this._container, 0), clearTimeout(this._removeTimeout), this.getPane().appendChild(this._container), this.update(), t._fadeAnimated && yi(this._container, 1), this.bringToFront() }, onRemove: function (t) { t._fadeAnimated ? (yi(this._container, 0), this._removeTimeout = setTimeout(a(li, void 0, this._container), 200)) : li(this._container) }, getLatLng: function () { return this._latlng }, setLatLng: function (t) { return this._latlng = W(t), this._map && (this._updatePosition(), this._adjustPan()), this }, getContent: function () { return this._content }, setContent: function (t) { return this._content = t, this.update(), this }, getElement: function () { return this._container }, update: function () { this._map && (this._container.style.visibility = "hidden", this._updateContent(), this._updateLayout(), this._updatePosition(), this._container.style.visibility = "", this._adjustPan()) }, getEvents: function () { var t = { zoom: this._updatePosition, viewreset: this._updatePosition }; return this._zoomAnimated && (t.zoomanim = this._animateZoom), t }, isOpen: function () { return !!this._map && this._map.hasLayer(this) }, bringToFront: function () { return this._map && _i(this._container), this }, bringToBack: function () { return this._map && di(this._container), this }, _prepareOpen: function (t, i, e) { if (i instanceof Ee || (e = i, i = t), i instanceof ke) for (var n in t._layers) { i = t._layers[n]; break } if (!e) if (i.getCenter) e = i.getCenter(); else { if (!i.getLatLng) throw new Error("Unable to get source layer LatLng."); e = i.getLatLng() } return this._source = i, this.update(), e }, _updateContent: function () { if (this._content) { var t = this._contentNode, i = "function" == typeof this._content ? this._content(this._source || this) : this._content; if ("string" == typeof i) t.innerHTML = i; else { for (; t.hasChildNodes();)t.removeChild(t.firstChild); t.appendChild(i) } this.fire("contentupdate") } }, _updatePosition: function () { if (this._map) { var t = this._map.latLngToLayerPoint(this._latlng), i = I(this.options.offset), e = this._getAnchor(); this._zoomAnimated ? Pi(this._container, t.add(e)) : i = i.add(t).add(e); var n = this._containerBottom = -i.y, o = this._containerLeft = -Math.round(this._containerWidth / 2) + i.x; this._container.style.bottom = n + "px", this._container.style.left = o + "px" } }, _getAnchor: function () { return [0, 0] } }), sn = on.extend({ options: { maxWidth: 300, minWidth: 50, maxHeight: null, autoPan: !0, autoPanPaddingTopLeft: null, autoPanPaddingBottomRight: null, autoPanPadding: [5, 5], keepInView: !1, closeButton: !0, autoClose: !0, closeOnEscapeKey: !0, className: "" }, openOn: function (t) { return t.openPopup(this), this }, onAdd: function (t) { on.prototype.onAdd.call(this, t), t.fire("popupopen", { popup: this }), this._source && (this._source.fire("popupopen", { popup: this }, !0), this._source instanceof Re || this._source.on("preclick", Ri)) }, onRemove: function (t) { on.prototype.onRemove.call(this, t), t.fire("popupclose", { popup: this }), this._source && (this._source.fire("popupclose", { popup: this }, !0), this._source instanceof Re || this._source.off("preclick", Ri)) }, getEvents: function () { var t = on.prototype.getEvents.call(this); return (void 0 !== this.options.closeOnClick ? this.options.closeOnClick : this._map.options.closePopupOnClick) && (t.preclick = this._close), this.options.keepInView && (t.moveend = this._adjustPan), t }, _close: function () { this._map && this._map.closePopup(this) }, _initLayout: function () { var t = "leaflet-popup", i = this._container = ui("div", t + " " + (this.options.className || "") + " leaflet-zoom-animated"), e = this._wrapper = ui("div", t + "-content-wrapper", i); if (this._contentNode = ui("div", t + "-content", e), Di(e), Ni(this._contentNode), ki(e, "contextmenu", Ri), this._tipContainer = ui("div", t + "-tip-container", i), this._tip = ui("div", t + "-tip", this._tipContainer), this.options.closeButton) { var n = this._closeButton = ui("a", t + "-close-button", i); n.href = "#close", n.innerHTML = "&#215;", ki(n, "click", this._onCloseButtonClick, this) } }, _updateLayout: function () { var t = this._contentNode, i = t.style; i.width = "", i.whiteSpace = "nowrap"; var e = t.offsetWidth; e = Math.min(e, this.options.maxWidth), e = Math.max(e, this.options.minWidth), i.width = e + 1 + "px", i.whiteSpace = "", i.height = ""; var n = t.offsetHeight, o = this.options.maxHeight, s = "leaflet-popup-scrolled"; o && o < n ? (i.height = o + "px", mi(t, s)) : fi(t, s), this._containerWidth = this._container.offsetWidth }, _animateZoom: function (t) { var i = this._map._latLngToNewLayerPoint(this._latlng, t.zoom, t.center), e = this._getAnchor(); Pi(this._container, i.add(e)) }, _adjustPan: function () { if (this.options.autoPan) { this._map._panAnim && this._map._panAnim.stop(); var t = this._map, i = parseInt(hi(this._container, "marginBottom"), 10) || 0, e = this._container.offsetHeight + i, n = this._containerWidth, o = new B(this._containerLeft, -e - this._containerBottom); o._add(Li(this._container)); var s = t.layerPointToContainerPoint(o), r = I(this.options.autoPanPadding), a = I(this.options.autoPanPaddingTopLeft || r), h = I(this.options.autoPanPaddingBottomRight || r), u = t.getSize(), l = 0, c = 0; s.x + n + h.x > u.x && (l = s.x + n - u.x + h.x), s.x - l - a.x < 0 && (l = s.x - a.x), s.y + e + h.y > u.y && (c = s.y + e - u.y + h.y), s.y - c - a.y < 0 && (c = s.y - a.y), (l || c) && t.fire("autopanstart").panBy([l, c]) } }, _onCloseButtonClick: function (t) { this._close(), Wi(t) }, _getAnchor: function () { return I(this._source && this._source._getPopupAnchor ? this._source._getPopupAnchor() : [0, 0]) } }); $i.mergeOptions({ closePopupOnClick: !0 }), $i.include({ openPopup: function (t, i, e) { return t instanceof sn || (t = new sn(e).setContent(t)), i && t.setLatLng(i), this.hasLayer(t) ? this : (this._popup && this._popup.options.autoClose && this.closePopup(), this._popup = t, this.addLayer(t)) }, closePopup: function (t) { return t && t !== this._popup || (t = this._popup, this._popup = null), t && this.removeLayer(t), this } }), Ee.include({ bindPopup: function (t, i) { return t instanceof sn ? (p(t, i), (this._popup = t)._source = this) : (this._popup && !i || (this._popup = new sn(i, this)), this._popup.setContent(t)), this._popupHandlersAdded || (this.on({ click: this._openPopup, keypress: this._onKeyPress, remove: this.closePopup, move: this._movePopup }), this._popupHandlersAdded = !0), this }, unbindPopup: function () { return this._popup && (this.off({ click: this._openPopup, keypress: this._onKeyPress, remove: this.closePopup, move: this._movePopup }), this._popupHandlersAdded = !1, this._popup = null), this }, openPopup: function (t, i) { return this._popup && this._map && (i = this._popup._prepareOpen(this, t, i), this._map.openPopup(this._popup, i)), this }, closePopup: function () { return this._popup && this._popup._close(), this }, togglePopup: function (t) { return this._popup && (this._popup._map ? this.closePopup() : this.openPopup(t)), this }, isPopupOpen: function () { return !!this._popup && this._popup.isOpen() }, setPopupContent: function (t) { return this._popup && this._popup.setContent(t), this }, getPopup: function () { return this._popup }, _openPopup: function (t) { var i = t.layer || t.target; this._popup && this._map && (Wi(t), i instanceof Re ? this.openPopup(t.layer || t.target, t.latlng) : this._map.hasLayer(this._popup) && this._popup._source === i ? this.closePopup() : this.openPopup(i, t.latlng)) }, _movePopup: function (t) { this._popup.setLatLng(t.latlng) }, _onKeyPress: function (t) { 13 === t.originalEvent.keyCode && this._openPopup(t) } }); var rn = on.extend({ options: { pane: "tooltipPane", offset: [0, 0], direction: "auto", permanent: !1, sticky: !1, interactive: !1, opacity: .9 }, onAdd: function (t) { on.prototype.onAdd.call(this, t), this.setOpacity(this.options.opacity), t.fire("tooltipopen", { tooltip: this }), this._source && this._source.fire("tooltipopen", { tooltip: this }, !0) }, onRemove: function (t) { on.prototype.onRemove.call(this, t), t.fire("tooltipclose", { tooltip: this }), this._source && this._source.fire("tooltipclose", { tooltip: this }, !0) }, getEvents: function () { var t = on.prototype.getEvents.call(this); return Tt && !this.options.permanent && (t.preclick = this._close), t }, _close: function () { this._map && this._map.closeTooltip(this) }, _initLayout: function () { var t = "leaflet-tooltip " + (this.options.className || "") + " leaflet-zoom-" + (this._zoomAnimated ? "animated" : "hide"); this._contentNode = this._container = ui("div", t) }, _updateLayout: function () { }, _adjustPan: function () { }, _setPosition: function (t) { var i = this._map, e = this._container, n = i.latLngToContainerPoint(i.getCenter()), o = i.layerPointToContainerPoint(t), s = this.options.direction, r = e.offsetWidth, a = e.offsetHeight, h = I(this.options.offset), u = this._getAnchor(); t = "top" === s ? t.add(I(-r / 2 + h.x, -a + h.y + u.y, !0)) : "bottom" === s ? t.subtract(I(r / 2 - h.x, -h.y, !0)) : "center" === s ? t.subtract(I(r / 2 + h.x, a / 2 - u.y + h.y, !0)) : "right" === s || "auto" === s && o.x < n.x ? (s = "right", t.add(I(h.x + u.x, u.y - a / 2 + h.y, !0))) : (s = "left", t.subtract(I(r + u.x - h.x, a / 2 - u.y - h.y, !0))), fi(e, "leaflet-tooltip-right"), fi(e, "leaflet-tooltip-left"), fi(e, "leaflet-tooltip-top"), fi(e, "leaflet-tooltip-bottom"), mi(e, "leaflet-tooltip-" + s), Pi(e, t) }, _updatePosition: function () { var t = this._map.latLngToLayerPoint(this._latlng); this._setPosition(t) }, setOpacity: function (t) { this.options.opacity = t, this._container && yi(this._container, t) }, _animateZoom: function (t) { var i = this._map._latLngToNewLayerPoint(this._latlng, t.zoom, t.center); this._setPosition(i) }, _getAnchor: function () { return I(this._source && this._source._getTooltipAnchor && !this.options.sticky ? this._source._getTooltipAnchor() : [0, 0]) } }); $i.include({ openTooltip: function (t, i, e) { return t instanceof rn || (t = new rn(e).setContent(t)), i && t.setLatLng(i), this.hasLayer(t) ? this : this.addLayer(t) }, closeTooltip: function (t) { return t && this.removeLayer(t), this } }), Ee.include({ bindTooltip: function (t, i) { return t instanceof rn ? (p(t, i), (this._tooltip = t)._source = this) : (this._tooltip && !i || (this._tooltip = new rn(i, this)), this._tooltip.setContent(t)), this._initTooltipInteractions(), this._tooltip.options.permanent && this._map && this._map.hasLayer(this) && this.openTooltip(), this }, unbindTooltip: function () { return this._tooltip && (this._initTooltipInteractions(!0), this.closeTooltip(), this._tooltip = null), this }, _initTooltipInteractions: function (t) { if (t || !this._tooltipHandlersAdded) { var i = t ? "off" : "on", e = { remove: this.closeTooltip, move: this._moveTooltip }; this._tooltip.options.permanent ? e.add = this._openTooltip : (e.mouseover = this._openTooltip, e.mouseout = this.closeTooltip, this._tooltip.options.sticky && (e.mousemove = this._moveTooltip), Tt && (e.click = this._openTooltip)), this[i](e), this._tooltipHandlersAdded = !t } }, openTooltip: function (t, i) { return this._tooltip && this._map && (i = this._tooltip._prepareOpen(this, t, i), this._map.openTooltip(this._tooltip, i), this._tooltip.options.interactive && this._tooltip._container && (mi(this._tooltip._container, "leaflet-clickable"), this.addInteractiveTarget(this._tooltip._container))), this }, closeTooltip: function () { return this._tooltip && (this._tooltip._close(), this._tooltip.options.interactive && this._tooltip._container && (fi(this._tooltip._container, "leaflet-clickable"), this.removeInteractiveTarget(this._tooltip._container))), this }, toggleTooltip: function (t) { return this._tooltip && (this._tooltip._map ? this.closeTooltip() : this.openTooltip(t)), this }, isTooltipOpen: function () { return this._tooltip.isOpen() }, setTooltipContent: function (t) { return this._tooltip && this._tooltip.setContent(t), this }, getTooltip: function () { return this._tooltip }, _openTooltip: function (t) { var i = t.layer || t.target; this._tooltip && this._map && this.openTooltip(i, this._tooltip.options.sticky ? t.latlng : void 0) }, _moveTooltip: function (t) { var i, e, n = t.latlng; this._tooltip.options.sticky && t.originalEvent && (i = this._map.mouseEventToContainerPoint(t.originalEvent), e = this._map.containerPointToLayerPoint(i), n = this._map.layerPointToLatLng(e)), this._tooltip.setLatLng(n) } }); var an = Be.extend({ options: { iconSize: [12, 12], html: !1, bgPos: null, className: "leaflet-div-icon" }, createIcon: function (t) { var i = t && "DIV" === t.tagName ? t : document.createElement("div"), e = this.options; if (e.html instanceof Element ? (ci(i), i.appendChild(e.html)) : i.innerHTML = !1 !== e.html ? e.html : "", e.bgPos) { var n = I(e.bgPos); i.style.backgroundPosition = -n.x + "px " + -n.y + "px" } return this._setIconStyles(i, "icon"), i }, createShadow: function () { return null } }); Be.Default = Ae; var hn = Ee.extend({ options: { tileSize: 256, opacity: 1, updateWhenIdle: xt, updateWhenZooming: !0, updateInterval: 200, zIndex: 1, bounds: null, minZoom: 0, maxZoom: void 0, maxNativeZoom: void 0, minNativeZoom: void 0, noWrap: !1, pane: "tilePane", className: "", keepBuffer: 2 }, initialize: function (t) { p(this, t) }, onAdd: function () { this._initContainer(), this._levels = {}, this._tiles = {}, this._resetView(), this._update() }, beforeAdd: function (t) { t._addZoomLimit(this) }, onRemove: function (t) { this._removeAllTiles(), li(this._container), t._removeZoomLimit(this), this._container = null, this._tileZoom = void 0 }, bringToFront: function () { return this._map && (_i(this._container), this._setAutoZIndex(Math.max)), this }, bringToBack: function () { return this._map && (di(this._container), this._setAutoZIndex(Math.min)), this }, getContainer: function () { return this._container }, setOpacity: function (t) { return this.options.opacity = t, this._updateOpacity(), this }, setZIndex: function (t) { return this.options.zIndex = t, this._updateZIndex(), this }, isLoading: function () { return this._loading }, redraw: function () { return this._map && (this._removeAllTiles(), this._update()), this }, getEvents: function () { var t = { viewprereset: this._invalidateAll, viewreset: this._resetView, zoom: this._resetView, moveend: this._onMoveEnd }; return this.options.updateWhenIdle || (this._onMove || (this._onMove = o(this._onMoveEnd, this.options.updateInterval, this)), t.move = this._onMove), this._zoomAnimated && (t.zoomanim = this._animateZoom), t }, createTile: function () { return document.createElement("div") }, getTileSize: function () { var t = this.options.tileSize; return t instanceof B ? t : new B(t, t) }, _updateZIndex: function () { this._container && void 0 !== this.options.zIndex && null !== this.options.zIndex && (this._container.style.zIndex = this.options.zIndex) }, _setAutoZIndex: function (t) { for (var i, e = this.getPane().children, n = -t(-1 / 0, 1 / 0), o = 0, s = e.length; o < s; o++)i = e[o].style.zIndex, e[o] !== this._container && i && (n = t(n, +i)); isFinite(n) && (this.options.zIndex = n + t(-1, 1), this._updateZIndex()) }, _updateOpacity: function () { if (this._map && !et) { yi(this._container, this.options.opacity); var t = +new Date, i = !1, e = !1; for (var n in this._tiles) { var o = this._tiles[n]; if (o.current && o.loaded) { var s = Math.min(1, (t - o.loaded) / 200); yi(o.el, s), s < 1 ? i = !0 : (o.active ? e = !0 : this._onOpaqueTile(o), o.active = !0) } } e && !this._noPrune && this._pruneTiles(), i && (C(this._fadeFrame), this._fadeFrame = M(this._updateOpacity, this)) } }, _onOpaqueTile: l, _initContainer: function () { this._container || (this._container = ui("div", "leaflet-layer " + (this.options.className || "")), this._updateZIndex(), this.options.opacity < 1 && this._updateOpacity(), this.getPane().appendChild(this._container)) }, _updateLevels: function () { var t = this._tileZoom, i = this.options.maxZoom; if (void 0 !== t) { for (var e in this._levels) this._levels[e].el.children.length || e === t ? (this._levels[e].el.style.zIndex = i - Math.abs(t - e), this._onUpdateLevel(e)) : (li(this._levels[e].el), this._removeTilesAtZoom(e), this._onRemoveLevel(e), delete this._levels[e]); var n = this._levels[t], o = this._map; return n || ((n = this._levels[t] = {}).el = ui("div", "leaflet-tile-container leaflet-zoom-animated", this._container), n.el.style.zIndex = i, n.origin = o.project(o.unproject(o.getPixelOrigin()), t).round(), n.zoom = t, this._setZoomTransform(n, o.getCenter(), o.getZoom()), n.el.offsetWidth, this._onCreateLevel(n)), this._level = n } }, _onUpdateLevel: l, _onRemoveLevel: l, _onCreateLevel: l, _pruneTiles: function () { if (this._map) { var t, i, e = this._map.getZoom(); if (e > this.options.maxZoom || e < this.options.minZoom) this._removeAllTiles(); else { for (t in this._tiles) (i = this._tiles[t]).retain = i.current; for (t in this._tiles) if ((i = this._tiles[t]).current && !i.active) { var n = i.coords; this._retainParent(n.x, n.y, n.z, n.z - 5) || this._retainChildren(n.x, n.y, n.z, n.z + 2) } for (t in this._tiles) this._tiles[t].retain || this._removeTile(t) } } }, _removeTilesAtZoom: function (t) { for (var i in this._tiles) this._tiles[i].coords.z === t && this._removeTile(i) }, _removeAllTiles: function () { for (var t in this._tiles) this._removeTile(t) }, _invalidateAll: function () { for (var t in this._levels) li(this._levels[t].el), this._onRemoveLevel(t), delete this._levels[t]; this._removeAllTiles(), this._tileZoom = void 0 }, _retainParent: function (t, i, e, n) { var o = Math.floor(t / 2), s = Math.floor(i / 2), r = e - 1, a = new B(+o, +s); a.z = +r; var h = this._tileCoordsToKey(a), u = this._tiles[h]; return u && u.active ? u.retain = !0 : (u && u.loaded && (u.retain = !0), n < r && this._retainParent(o, s, r, n)) }, _retainChildren: function (t, i, e, n) { for (var o = 2 * t; o < 2 * t + 2; o++)for (var s = 2 * i; s < 2 * i + 2; s++) { var r = new B(o, s); r.z = e + 1; var a = this._tileCoordsToKey(r), h = this._tiles[a]; h && h.active ? h.retain = !0 : (h && h.loaded && (h.retain = !0), e + 1 < n && this._retainChildren(o, s, e + 1, n)) } }, _resetView: function (t) { var i = t && (t.pinch || t.flyTo); this._setView(this._map.getCenter(), this._map.getZoom(), i, i) }, _animateZoom: function (t) { this._setView(t.center, t.zoom, !0, t.noUpdate) }, _clampZoom: function (t) { var i = this.options; return void 0 !== i.minNativeZoom && t < i.minNativeZoom ? i.minNativeZoom : void 0 !== i.maxNativeZoom && i.maxNativeZoom < t ? i.maxNativeZoom : t }, _setView: function (t, i, e, n) { var o = this._clampZoom(Math.round(i)); (void 0 !== this.options.maxZoom && o > this.options.maxZoom || void 0 !== this.options.minZoom && o < this.options.minZoom) && (o = void 0); var s = this.options.updateWhenZooming && o !== this._tileZoom; n && !s || (this._tileZoom = o, this._abortLoading && this._abortLoading(), this._updateLevels(), this._resetGrid(), void 0 !== o && this._update(t), e || this._pruneTiles(), this._noPrune = !!e), this._setZoomTransforms(t, i) }, _setZoomTransforms: function (t, i) { for (var e in this._levels) this._setZoomTransform(this._levels[e], t, i) }, _setZoomTransform: function (t, i, e) { var n = this._map.getZoomScale(e, t.zoom), o = t.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(i, e)).round(); yt ? wi(t.el, o, n) : Pi(t.el, o) }, _resetGrid: function () { var t = this._map, i = t.options.crs, e = this._tileSize = this.getTileSize(), n = this._tileZoom, o = this._map.getPixelWorldBounds(this._tileZoom); o && (this._globalTileRange = this._pxBoundsToTileRange(o)), this._wrapX = i.wrapLng && !this.options.noWrap && [Math.floor(t.project([0, i.wrapLng[0]], n).x / e.x), Math.ceil(t.project([0, i.wrapLng[1]], n).x / e.y)], this._wrapY = i.wrapLat && !this.options.noWrap && [Math.floor(t.project([i.wrapLat[0], 0], n).y / e.x), Math.ceil(t.project([i.wrapLat[1], 0], n).y / e.y)] }, _onMoveEnd: function () { this._map && !this._map._animatingZoom && this._update() }, _getTiledPixelBounds: function (t) { var i = this._map, e = i._animatingZoom ? Math.max(i._animateToZoom, i.getZoom()) : i.getZoom(), n = i.getZoomScale(e, this._tileZoom), o = i.project(t, this._tileZoom).floor(), s = i.getSize().divideBy(2 * n); return new O(o.subtract(s), o.add(s)) }, _update: function (t) { var i = this._map; if (i) { var e = this._clampZoom(i.getZoom()); if (void 0 === t && (t = i.getCenter()), void 0 !== this._tileZoom) { var n = this._getTiledPixelBounds(t), o = this._pxBoundsToTileRange(n), s = o.getCenter(), r = [], a = this.options.keepBuffer, h = new O(o.getBottomLeft().subtract([a, -a]), o.getTopRight().add([a, -a])); if (!(isFinite(o.min.x) && isFinite(o.min.y) && isFinite(o.max.x) && isFinite(o.max.y))) throw new Error("Attempted to load an infinite number of tiles"); for (var u in this._tiles) { var l = this._tiles[u].coords; l.z === this._tileZoom && h.contains(new B(l.x, l.y)) || (this._tiles[u].current = !1) } if (1 < Math.abs(e - this._tileZoom)) this._setView(t, e); else { for (var c = o.min.y; c <= o.max.y; c++)for (var _ = o.min.x; _ <= o.max.x; _++) { var d = new B(_, c); if (d.z = this._tileZoom, this._isValidTile(d)) { var p = this._tiles[this._tileCoordsToKey(d)]; p ? p.current = !0 : r.push(d) } } if (r.sort(function (t, i) { return t.distanceTo(s) - i.distanceTo(s) }), 0 !== r.length) { this._loading || (this._loading = !0, this.fire("loading")); var m = document.createDocumentFragment(); for (_ = 0; _ < r.length; _++)this._addTile(r[_], m); this._level.el.appendChild(m) } } } } }, _isValidTile: function (t) { var i = this._map.options.crs; if (!i.infinite) { var e = this._globalTileRange; if (!i.wrapLng && (t.x < e.min.x || t.x > e.max.x) || !i.wrapLat && (t.y < e.min.y || t.y > e.max.y)) return !1 } if (!this.options.bounds) return !0; var n = this._tileCoordsToBounds(t); return D(this.options.bounds).overlaps(n) }, _keyToBounds: function (t) { return this._tileCoordsToBounds(this._keyToTileCoords(t)) }, _tileCoordsToNwSe: function (t) { var i = this._map, e = this.getTileSize(), n = t.scaleBy(e), o = n.add(e); return [i.unproject(n, t.z), i.unproject(o, t.z)] }, _tileCoordsToBounds: function (t) { var i = this._tileCoordsToNwSe(t), e = new N(i[0], i[1]); return this.options.noWrap || (e = this._map.wrapLatLngBounds(e)), e }, _tileCoordsToKey: function (t) { return t.x + ":" + t.y + ":" + t.z }, _keyToTileCoords: function (t) { var i = t.split(":"), e = new B(+i[0], +i[1]); return e.z = +i[2], e }, _removeTile: function (t) { var i = this._tiles[t]; i && (li(i.el), delete this._tiles[t], this.fire("tileunload", { tile: i.el, coords: this._keyToTileCoords(t) })) }, _initTile: function (t) { mi(t, "leaflet-tile"); var i = this.getTileSize(); t.style.width = i.x + "px", t.style.height = i.y + "px", t.onselectstart = l, t.onmousemove = l, et && this.options.opacity < 1 && yi(t, this.options.opacity), st && !rt && (t.style.WebkitBackfaceVisibility = "hidden") }, _addTile: function (t, i) { var e = this._getTilePos(t), n = this._tileCoordsToKey(t), o = this.createTile(this._wrapCoords(t), a(this._tileReady, this, t)); this._initTile(o), this.createTile.length < 2 && M(a(this._tileReady, this, t, null, o)), Pi(o, e), this._tiles[n] = { el: o, coords: t, current: !0 }, i.appendChild(o), this.fire("tileloadstart", { tile: o, coords: t }) }, _tileReady: function (t, i, e) { i && this.fire("tileerror", { error: i, tile: e, coords: t }); var n = this._tileCoordsToKey(t); (e = this._tiles[n]) && (e.loaded = +new Date, this._map._fadeAnimated ? (yi(e.el, 0), C(this._fadeFrame), this._fadeFrame = M(this._updateOpacity, this)) : (e.active = !0, this._pruneTiles()), i || (mi(e.el, "leaflet-tile-loaded"), this.fire("tileload", { tile: e.el, coords: t })), this._noTilesToLoad() && (this._loading = !1, this.fire("load"), et || !this._map._fadeAnimated ? M(this._pruneTiles, this) : setTimeout(a(this._pruneTiles, this), 250))) }, _getTilePos: function (t) { return t.scaleBy(this.getTileSize()).subtract(this._level.origin) }, _wrapCoords: function (t) { var i = new B(this._wrapX ? r(t.x, this._wrapX) : t.x, this._wrapY ? r(t.y, this._wrapY) : t.y); return i.z = t.z, i }, _pxBoundsToTileRange: function (t) { var i = this.getTileSize(); return new O(t.min.unscaleBy(i).floor(), t.max.unscaleBy(i).ceil().subtract([1, 1])) }, _noTilesToLoad: function () { for (var t in this._tiles) if (!this._tiles[t].loaded) return !1; return !0 } }); var un = hn.extend({ options: { minZoom: 0, maxZoom: 18, subdomains: "abc", errorTileUrl: "", zoomOffset: 0, tms: !1, zoomReverse: !1, detectRetina: !1, crossOrigin: !1 }, initialize: function (t, i) { this._url = t, (i = p(this, i)).detectRetina && Ct && 0 < i.maxZoom && (i.tileSize = Math.floor(i.tileSize / 2), i.zoomReverse ? (i.zoomOffset-- , i.minZoom++) : (i.zoomOffset++ , i.maxZoom--), i.minZoom = Math.max(0, i.minZoom)), "string" == typeof i.subdomains && (i.subdomains = i.subdomains.split("")), st || this.on("tileunload", this._onTileRemove) }, setUrl: function (t, i) { return this._url === t && void 0 === i && (i = !0), this._url = t, i || this.redraw(), this }, createTile: function (t, i) { var e = document.createElement("img"); return ki(e, "load", a(this._tileOnLoad, this, i, e)), ki(e, "error", a(this._tileOnError, this, i, e)), !this.options.crossOrigin && "" !== this.options.crossOrigin || (e.crossOrigin = !0 === this.options.crossOrigin ? "" : this.options.crossOrigin), e.alt = "", e.setAttribute("role", "presentation"), e.src = this.getTileUrl(t), e }, getTileUrl: function (t) { var i = { r: Ct ? "@2x" : "", s: this._getSubdomain(t), x: t.x, y: t.y, z: this._getZoomForUrl() }; if (this._map && !this._map.options.crs.infinite) { var e = this._globalTileRange.max.y - t.y; this.options.tms && (i.y = e), i["-y"] = e } return g(this._url, h(i, this.options)) }, _tileOnLoad: function (t, i) { et ? setTimeout(a(t, this, null, i), 0) : t(null, i) }, _tileOnError: function (t, i, e) { var n = this.options.errorTileUrl; n && i.getAttribute("src") !== n && (i.src = n), t(e, i) }, _onTileRemove: function (t) { t.tile.onload = null }, _getZoomForUrl: function () { var t = this._tileZoom, i = this.options.maxZoom; return this.options.zoomReverse && (t = i - t), t + this.options.zoomOffset }, _getSubdomain: function (t) { var i = Math.abs(t.x + t.y) % this.options.subdomains.length; return this.options.subdomains[i] }, _abortLoading: function () { var t, i; for (t in this._tiles) this._tiles[t].coords.z !== this._tileZoom && ((i = this._tiles[t].el).onload = l, i.onerror = l, i.complete || (i.src = x, li(i), delete this._tiles[t])) }, _removeTile: function (t) { var i = this._tiles[t]; if (i) return ht || i.el.setAttribute("src", x), hn.prototype._removeTile.call(this, t) }, _tileReady: function (t, i, e) { if (this._map && (!e || e.getAttribute("src") !== x)) return hn.prototype._tileReady.call(this, t, i, e) } }); function ln(t, i) { return new un(t, i) } var cn = un.extend({ defaultWmsParams: { service: "WMS", request: "GetMap", layers: "", styles: "", format: "image/jpeg", transparent: !1, version: "1.1.1" }, options: { crs: null, uppercase: !1 }, initialize: function (t, i) { this._url = t; var e = h({}, this.defaultWmsParams); for (var n in i) n in this.options || (e[n] = i[n]); var o = (i = p(this, i)).detectRetina && Ct ? 2 : 1, s = this.getTileSize(); e.width = s.x * o, e.height = s.y * o, this.wmsParams = e }, onAdd: function (t) { this._crs = this.options.crs || t.options.crs, this._wmsVersion = parseFloat(this.wmsParams.version); var i = 1.3 <= this._wmsVersion ? "crs" : "srs"; this.wmsParams[i] = this._crs.code, un.prototype.onAdd.call(this, t) }, getTileUrl: function (t) { var i = this._tileCoordsToNwSe(t), e = this._crs, n = R(e.project(i[0]), e.project(i[1])), o = n.min, s = n.max, r = (1.3 <= this._wmsVersion && this._crs === Ce ? [o.y, o.x, s.y, s.x] : [o.x, o.y, s.x, s.y]).join(","), a = un.prototype.getTileUrl.call(this, t); return a + m(this.wmsParams, a, this.options.uppercase) + (this.options.uppercase ? "&BBOX=" : "&bbox=") + r }, setParams: function (t, i) { return h(this.wmsParams, t), i || this.redraw(), this } }); un.WMS = cn, ln.wms = function (t, i) { return new cn(t, i) }; var _n = Ee.extend({ options: { padding: .1, tolerance: 0 }, initialize: function (t) { p(this, t), u(this), this._layers = this._layers || {} }, onAdd: function () { this._container || (this._initContainer(), this._zoomAnimated && mi(this._container, "leaflet-zoom-animated")), this.getPane().appendChild(this._container), this._update(), this.on("update", this._updatePaths, this) }, onRemove: function () { this.off("update", this._updatePaths, this), this._destroyContainer() }, getEvents: function () { var t = { viewreset: this._reset, zoom: this._onZoom, moveend: this._update, zoomend: this._onZoomEnd }; return this._zoomAnimated && (t.zoomanim = this._onAnimZoom), t }, _onAnimZoom: function (t) { this._updateTransform(t.center, t.zoom) }, _onZoom: function () { this._updateTransform(this._map.getCenter(), this._map.getZoom()) }, _updateTransform: function (t, i) { var e = this._map.getZoomScale(i, this._zoom), n = Li(this._container), o = this._map.getSize().multiplyBy(.5 + this.options.padding), s = this._map.project(this._center, i), r = this._map.project(t, i).subtract(s), a = o.multiplyBy(-e).add(n).add(o).subtract(r); yt ? wi(this._container, a, e) : Pi(this._container, a) }, _reset: function () { for (var t in this._update(), this._updateTransform(this._center, this._zoom), this._layers) this._layers[t]._reset() }, _onZoomEnd: function () { for (var t in this._layers) this._layers[t]._project() }, _updatePaths: function () { for (var t in this._layers) this._layers[t]._update() }, _update: function () { var t = this.options.padding, i = this._map.getSize(), e = this._map.containerPointToLayerPoint(i.multiplyBy(-t)).round(); this._bounds = new O(e, e.add(i.multiplyBy(1 + 2 * t)).round()), this._center = this._map.getCenter(), this._zoom = this._map.getZoom() } }), dn = _n.extend({ getEvents: function () { var t = _n.prototype.getEvents.call(this); return t.viewprereset = this._onViewPreReset, t }, _onViewPreReset: function () { this._postponeUpdatePaths = !0 }, onAdd: function () { _n.prototype.onAdd.call(this), this._draw() }, _initContainer: function () { var t = this._container = document.createElement("canvas"); ki(t, "mousemove", this._onMouseMove, this), ki(t, "click dblclick mousedown mouseup contextmenu", this._onClick, this), ki(t, "mouseout", this._handleMouseOut, this), this._ctx = t.getContext("2d") }, _destroyContainer: function () { C(this._redrawRequest), delete this._ctx, li(this._container), Ai(this._container), delete this._container }, _updatePaths: function () { if (!this._postponeUpdatePaths) { for (var t in this._redrawBounds = null, this._layers) this._layers[t]._update(); this._redraw() } }, _update: function () { if (!this._map._animatingZoom || !this._bounds) { _n.prototype._update.call(this); var t = this._bounds, i = this._container, e = t.getSize(), n = Ct ? 2 : 1; Pi(i, t.min), i.width = n * e.x, i.height = n * e.y, i.style.width = e.x + "px", i.style.height = e.y + "px", Ct && this._ctx.scale(2, 2), this._ctx.translate(-t.min.x, -t.min.y), this.fire("update") } }, _reset: function () { _n.prototype._reset.call(this), this._postponeUpdatePaths && (this._postponeUpdatePaths = !1, this._updatePaths()) }, _initPath: function (t) { this._updateDashArray(t); var i = (this._layers[u(t)] = t)._order = { layer: t, prev: this._drawLast, next: null }; this._drawLast && (this._drawLast.next = i), this._drawLast = i, this._drawFirst = this._drawFirst || this._drawLast }, _addPath: function (t) { this._requestRedraw(t) }, _removePath: function (t) { var i = t._order, e = i.next, n = i.prev; e ? e.prev = n : this._drawLast = n, n ? n.next = e : this._drawFirst = e, delete t._order, delete this._layers[u(t)], this._requestRedraw(t) }, _updatePath: function (t) { this._extendRedrawBounds(t), t._project(), t._update(), this._requestRedraw(t) }, _updateStyle: function (t) { this._updateDashArray(t), this._requestRedraw(t) }, _updateDashArray: function (t) { if ("string" == typeof t.options.dashArray) { var i, e, n = t.options.dashArray.split(/[, ]+/), o = []; for (e = 0; e < n.length; e++) { if (i = Number(n[e]), isNaN(i)) return; o.push(i) } t.options._dashArray = o } else t.options._dashArray = t.options.dashArray }, _requestRedraw: function (t) { this._map && (this._extendRedrawBounds(t), this._redrawRequest = this._redrawRequest || M(this._redraw, this)) }, _extendRedrawBounds: function (t) { if (t._pxBounds) { var i = (t.options.weight || 0) + 1; this._redrawBounds = this._redrawBounds || new O, this._redrawBounds.extend(t._pxBounds.min.subtract([i, i])), this._redrawBounds.extend(t._pxBounds.max.add([i, i])) } }, _redraw: function () { this._redrawRequest = null, this._redrawBounds && (this._redrawBounds.min._floor(), this._redrawBounds.max._ceil()), this._clear(), this._draw(), this._redrawBounds = null }, _clear: function () { var t = this._redrawBounds; if (t) { var i = t.getSize(); this._ctx.clearRect(t.min.x, t.min.y, i.x, i.y) } else this._ctx.clearRect(0, 0, this._container.width, this._container.height) }, _draw: function () { var t, i = this._redrawBounds; if (this._ctx.save(), i) { var e = i.getSize(); this._ctx.beginPath(), this._ctx.rect(i.min.x, i.min.y, e.x, e.y), this._ctx.clip() } this._drawing = !0; for (var n = this._drawFirst; n; n = n.next)t = n.layer, (!i || t._pxBounds && t._pxBounds.intersects(i)) && t._updatePath(); this._drawing = !1, this._ctx.restore() }, _updatePoly: function (t, i) { if (this._drawing) { var e, n, o, s, r = t._parts, a = r.length, h = this._ctx; if (a) { for (h.beginPath(), e = 0; e < a; e++) { for (n = 0, o = r[e].length; n < o; n++)s = r[e][n], h[n ? "lineTo" : "moveTo"](s.x, s.y); i && h.closePath() } this._fillStroke(h, t) } } }, _updateCircle: function (t) { if (this._drawing && !t._empty()) { var i = t._point, e = this._ctx, n = Math.max(Math.round(t._radius), 1), o = (Math.max(Math.round(t._radiusY), 1) || n) / n; 1 != o && (e.save(), e.scale(1, o)), e.beginPath(), e.arc(i.x, i.y / o, n, 0, 2 * Math.PI, !1), 1 != o && e.restore(), this._fillStroke(e, t) } }, _fillStroke: function (t, i) { var e = i.options; e.fill && (t.globalAlpha = e.fillOpacity, t.fillStyle = e.fillColor || e.color, t.fill(e.fillRule || "evenodd")), e.stroke && 0 !== e.weight && (t.setLineDash && t.setLineDash(i.options && i.options._dashArray || []), t.globalAlpha = e.opacity, t.lineWidth = e.weight, t.strokeStyle = e.color, t.lineCap = e.lineCap, t.lineJoin = e.lineJoin, t.stroke()) }, _onClick: function (t) { for (var i, e, n = this._map.mouseEventToLayerPoint(t), o = this._drawFirst; o; o = o.next)(i = o.layer).options.interactive && i._containsPoint(n) && !this._map._draggableMoved(i) && (e = i); e && (Gi(t), this._fireEvent([e], t)) }, _onMouseMove: function (t) { if (this._map && !this._map.dragging.moving() && !this._map._animatingZoom) { var i = this._map.mouseEventToLayerPoint(t); this._handleMouseHover(t, i) } }, _handleMouseOut: function (t) { var i = this._hoveredLayer; i && (fi(this._container, "leaflet-interactive"), this._fireEvent([i], t, "mouseout"), this._hoveredLayer = null, this._mouseHoverThrottled = !1) }, _handleMouseHover: function (t, i) { if (!this._mouseHoverThrottled) { for (var e, n, o = this._drawFirst; o; o = o.next)(e = o.layer).options.interactive && e._containsPoint(i) && (n = e); n !== this._hoveredLayer && (this._handleMouseOut(t), n && (mi(this._container, "leaflet-interactive"), this._fireEvent([n], t, "mouseover"), this._hoveredLayer = n)), this._hoveredLayer && this._fireEvent([this._hoveredLayer], t), this._mouseHoverThrottled = !0, setTimeout(L.bind(function () { this._mouseHoverThrottled = !1 }, this), 32) } }, _fireEvent: function (t, i, e) { this._map._fireDOMEvent(i, e || i.type, t) }, _bringToFront: function (t) { var i = t._order; if (i) { var e = i.next, n = i.prev; e && ((e.prev = n) ? n.next = e : e && (this._drawFirst = e), i.prev = this._drawLast, (this._drawLast.next = i).next = null, this._drawLast = i, this._requestRedraw(t)) } }, _bringToBack: function (t) { var i = t._order; if (i) { var e = i.next, n = i.prev; n && ((n.next = e) ? e.prev = n : n && (this._drawLast = n), i.prev = null, i.next = this._drawFirst, this._drawFirst.prev = i, this._drawFirst = i, this._requestRedraw(t)) } } }); function pn(t) { return Et ? new dn(t) : null } var mn = function () { try { return document.namespaces.add("lvml", "urn:schemas-microsoft-com:vml"), function (t) { return document.createElement("<lvml:" + t + ' class="lvml">') } } catch (t) { return function (t) { return document.createElement("<" + t + ' xmlns="urn:schemas-microsoft.com:vml" class="lvml">') } } }(), fn = { _initContainer: function () { this._container = ui("div", "leaflet-vml-container") }, _update: function () { this._map._animatingZoom || (_n.prototype._update.call(this), this.fire("update")) }, _initPath: function (t) { var i = t._container = mn("shape"); mi(i, "leaflet-vml-shape " + (this.options.className || "")), i.coordsize = "1 1", t._path = mn("path"), i.appendChild(t._path), this._updateStyle(t), this._layers[u(t)] = t }, _addPath: function (t) { var i = t._container; this._container.appendChild(i), t.options.interactive && t.addInteractiveTarget(i) }, _removePath: function (t) { var i = t._container; li(i), t.removeInteractiveTarget(i), delete this._layers[u(t)] }, _updateStyle: function (t) { var i = t._stroke, e = t._fill, n = t.options, o = t._container; o.stroked = !!n.stroke, o.filled = !!n.fill, n.stroke ? (i || (i = t._stroke = mn("stroke")), o.appendChild(i), i.weight = n.weight + "px", i.color = n.color, i.opacity = n.opacity, n.dashArray ? i.dashStyle = v(n.dashArray) ? n.dashArray.join(" ") : n.dashArray.replace(/( *, *)/g, " ") : i.dashStyle = "", i.endcap = n.lineCap.replace("butt", "flat"), i.joinstyle = n.lineJoin) : i && (o.removeChild(i), t._stroke = null), n.fill ? (e || (e = t._fill = mn("fill")), o.appendChild(e), e.color = n.fillColor || n.color, e.opacity = n.fillOpacity) : e && (o.removeChild(e), t._fill = null) }, _updateCircle: function (t) { var i = t._point.round(), e = Math.round(t._radius), n = Math.round(t._radiusY || e); this._setPath(t, t._empty() ? "M0 0" : "AL " + i.x + "," + i.y + " " + e + "," + n + " 0,23592600") }, _setPath: function (t, i) { t._path.v = i }, _bringToFront: function (t) { _i(t._container) }, _bringToBack: function (t) { di(t._container) } }, gn = kt ? mn : $, vn = _n.extend({ getEvents: function () { var t = _n.prototype.getEvents.call(this); return t.zoomstart = this._onZoomStart, t }, _initContainer: function () { this._container = gn("svg"), this._container.setAttribute("pointer-events", "none"), this._rootGroup = gn("g"), this._container.appendChild(this._rootGroup) }, _destroyContainer: function () { li(this._container), Ai(this._container), delete this._container, delete this._rootGroup, delete this._svgSize }, _onZoomStart: function () { this._update() }, _update: function () { if (!this._map._animatingZoom || !this._bounds) { _n.prototype._update.call(this); var t = this._bounds, i = t.getSize(), e = this._container; this._svgSize && this._svgSize.equals(i) || (this._svgSize = i, e.setAttribute("width", i.x), e.setAttribute("height", i.y)), Pi(e, t.min), e.setAttribute("viewBox", [t.min.x, t.min.y, i.x, i.y].join(" ")), this.fire("update") } }, _initPath: function (t) { var i = t._path = gn("path"); t.options.className && mi(i, t.options.className), t.options.interactive && mi(i, "leaflet-interactive"), this._updateStyle(t), this._layers[u(t)] = t }, _addPath: function (t) { this._rootGroup || this._initContainer(), this._rootGroup.appendChild(t._path), t.addInteractiveTarget(t._path) }, _removePath: function (t) { li(t._path), t.removeInteractiveTarget(t._path), delete this._layers[u(t)] }, _updatePath: function (t) { t._project(), t._update() }, _updateStyle: function (t) { var i = t._path, e = t.options; i && (e.stroke ? (i.setAttribute("stroke", e.color), i.setAttribute("stroke-opacity", e.opacity), i.setAttribute("stroke-width", e.weight), i.setAttribute("stroke-linecap", e.lineCap), i.setAttribute("stroke-linejoin", e.lineJoin), e.dashArray ? i.setAttribute("stroke-dasharray", e.dashArray) : i.removeAttribute("stroke-dasharray"), e.dashOffset ? i.setAttribute("stroke-dashoffset", e.dashOffset) : i.removeAttribute("stroke-dashoffset")) : i.setAttribute("stroke", "none"), e.fill ? (i.setAttribute("fill", e.fillColor || e.color), i.setAttribute("fill-opacity", e.fillOpacity), i.setAttribute("fill-rule", e.fillRule || "evenodd")) : i.setAttribute("fill", "none")) }, _updatePoly: function (t, i) { this._setPath(t, Q(t._parts, i)) }, _updateCircle: function (t) { var i = t._point, e = Math.max(Math.round(t._radius), 1), n = "a" + e + "," + (Math.max(Math.round(t._radiusY), 1) || e) + " 0 1,0 ", o = t._empty() ? "M0 0" : "M" + (i.x - e) + "," + i.y + n + 2 * e + ",0 " + n + 2 * -e + ",0 "; this._setPath(t, o) }, _setPath: function (t, i) { t._path.setAttribute("d", i) }, _bringToFront: function (t) { _i(t._path) }, _bringToBack: function (t) { di(t._path) } }); function yn(t) { return Zt || kt ? new vn(t) : null } kt && vn.include(fn), $i.include({ getRenderer: function (t) { var i = t.options.renderer || this._getPaneRenderer(t.options.pane) || this.options.renderer || this._renderer; return i || (i = this._renderer = this._createRenderer()), this.hasLayer(i) || this.addLayer(i), i }, _getPaneRenderer: function (t) { if ("overlayPane" === t || void 0 === t) return !1; var i = this._paneRenderers[t]; return void 0 === i && (i = this._createRenderer({ pane: t }), this._paneRenderers[t] = i), i }, _createRenderer: function (t) { return this.options.preferCanvas && pn(t) || yn(t) } }); var xn = We.extend({ initialize: function (t, i) { We.prototype.initialize.call(this, this._boundsToLatLngs(t), i) }, setBounds: function (t) { return this.setLatLngs(this._boundsToLatLngs(t)) }, _boundsToLatLngs: function (t) { return [(t = D(t)).getSouthWest(), t.getNorthWest(), t.getNorthEast(), t.getSouthEast()] } }); vn.create = gn, vn.pointsToPath = Q, He.geometryToLayer = Fe, He.coordsToLatLng = Ve, He.coordsToLatLngs = qe, He.latLngToCoords = Ge, He.latLngsToCoords = Ke, He.getFeature = Ye, He.asFeature = Xe, $i.mergeOptions({ boxZoom: !0 }); var wn = se.extend({ initialize: function (t) { this._map = t, this._container = t._container, this._pane = t._panes.overlayPane, this._resetStateTimeout = 0, t.on("unload", this._destroy, this) }, addHooks: function () { ki(this._container, "mousedown", this._onMouseDown, this) }, removeHooks: function () { Ai(this._container, "mousedown", this._onMouseDown, this) }, moved: function () { return this._moved }, _destroy: function () { li(this._pane), delete this._pane }, _resetState: function () { this._resetStateTimeout = 0, this._moved = !1 }, _clearDeferredResetState: function () { 0 !== this._resetStateTimeout && (clearTimeout(this._resetStateTimeout), this._resetStateTimeout = 0) }, _onMouseDown: function (t) { if (!t.shiftKey || 1 !== t.which && 1 !== t.button) return !1; this._clearDeferredResetState(), this._resetState(), Qt(), Ti(), this._startPoint = this._map.mouseEventToContainerPoint(t), ki(document, { contextmenu: Wi, mousemove: this._onMouseMove, mouseup: this._onMouseUp, keydown: this._onKeyDown }, this) }, _onMouseMove: function (t) { this._moved || (this._moved = !0, this._box = ui("div", "leaflet-zoom-box", this._container), mi(this._container, "leaflet-crosshair"), this._map.fire("boxzoomstart")), this._point = this._map.mouseEventToContainerPoint(t); var i = new O(this._point, this._startPoint), e = i.getSize(); Pi(this._box, i.min), this._box.style.width = e.x + "px", this._box.style.height = e.y + "px" }, _finish: function () { this._moved && (li(this._box), fi(this._container, "leaflet-crosshair")), ti(), zi(), Ai(document, { contextmenu: Wi, mousemove: this._onMouseMove, mouseup: this._onMouseUp, keydown: this._onKeyDown }, this) }, _onMouseUp: function (t) { if ((1 === t.which || 1 === t.button) && (this._finish(), this._moved)) { this._clearDeferredResetState(), this._resetStateTimeout = setTimeout(a(this._resetState, this), 0); var i = new N(this._map.containerPointToLatLng(this._startPoint), this._map.containerPointToLatLng(this._point)); this._map.fitBounds(i).fire("boxzoomend", { boxZoomBounds: i }) } }, _onKeyDown: function (t) { 27 === t.keyCode && this._finish() } }); $i.addInitHook("addHandler", "boxZoom", wn), $i.mergeOptions({ doubleClickZoom: !0 }); var Pn = se.extend({ addHooks: function () { this._map.on("dblclick", this._onDoubleClick, this) }, removeHooks: function () { this._map.off("dblclick", this._onDoubleClick, this) }, _onDoubleClick: function (t) { var i = this._map, e = i.getZoom(), n = i.options.zoomDelta, o = t.originalEvent.shiftKey ? e - n : e + n; "center" === i.options.doubleClickZoom ? i.setZoom(o) : i.setZoomAround(t.containerPoint, o) } }); $i.addInitHook("addHandler", "doubleClickZoom", Pn), $i.mergeOptions({ dragging: !0, inertia: !rt, inertiaDeceleration: 3400, inertiaMaxSpeed: 1 / 0, easeLinearity: .2, worldCopyJump: !1, maxBoundsViscosity: 0 }); var Ln = se.extend({ addHooks: function () { if (!this._draggable) { var t = this._map; this._draggable = new ce(t._mapPane, t._container), this._draggable.on({ dragstart: this._onDragStart, drag: this._onDrag, dragend: this._onDragEnd }, this), this._draggable.on("predrag", this._onPreDragLimit, this), t.options.worldCopyJump && (this._draggable.on("predrag", this._onPreDragWrap, this), t.on("zoomend", this._onZoomEnd, this), t.whenReady(this._onZoomEnd, this)) } mi(this._map._container, "leaflet-grab leaflet-touch-drag"), this._draggable.enable(), this._positions = [], this._times = [] }, removeHooks: function () { fi(this._map._container, "leaflet-grab"), fi(this._map._container, "leaflet-touch-drag"), this._draggable.disable() }, moved: function () { return this._draggable && this._draggable._moved }, moving: function () { return this._draggable && this._draggable._moving }, _onDragStart: function () { var t = this._map; if (t._stop(), this._map.options.maxBounds && this._map.options.maxBoundsViscosity) { var i = D(this._map.options.maxBounds); this._offsetLimit = R(this._map.latLngToContainerPoint(i.getNorthWest()).multiplyBy(-1), this._map.latLngToContainerPoint(i.getSouthEast()).multiplyBy(-1).add(this._map.getSize())), this._viscosity = Math.min(1, Math.max(0, this._map.options.maxBoundsViscosity)) } else this._offsetLimit = null; t.fire("movestart").fire("dragstart"), t.options.inertia && (this._positions = [], this._times = []) }, _onDrag: function (t) { if (this._map.options.inertia) { var i = this._lastTime = +new Date, e = this._lastPos = this._draggable._absPos || this._draggable._newPos; this._positions.push(e), this._times.push(i), this._prunePositions(i) } this._map.fire("move", t).fire("drag", t) }, _prunePositions: function (t) { for (; 1 < this._positions.length && 50 < t - this._times[0];)this._positions.shift(), this._times.shift() }, _onZoomEnd: function () { var t = this._map.getSize().divideBy(2), i = this._map.latLngToLayerPoint([0, 0]); this._initialWorldOffset = i.subtract(t).x, this._worldWidth = this._map.getPixelWorldBounds().getSize().x }, _viscousLimit: function (t, i) { return t - (t - i) * this._viscosity }, _onPreDragLimit: function () { if (this._viscosity && this._offsetLimit) { var t = this._draggable._newPos.subtract(this._draggable._startPos), i = this._offsetLimit; t.x < i.min.x && (t.x = this._viscousLimit(t.x, i.min.x)), t.y < i.min.y && (t.y = this._viscousLimit(t.y, i.min.y)), t.x > i.max.x && (t.x = this._viscousLimit(t.x, i.max.x)), t.y > i.max.y && (t.y = this._viscousLimit(t.y, i.max.y)), this._draggable._newPos = this._draggable._startPos.add(t) } }, _onPreDragWrap: function () { var t = this._worldWidth, i = Math.round(t / 2), e = this._initialWorldOffset, n = this._draggable._newPos.x, o = (n - i + e) % t + i - e, s = (n + i + e) % t - i - e, r = Math.abs(o + e) < Math.abs(s + e) ? o : s; this._draggable._absPos = this._draggable._newPos.clone(), this._draggable._newPos.x = r }, _onDragEnd: function (t) { var i = this._map, e = i.options, n = !e.inertia || this._times.length < 2; if (i.fire("dragend", t), n) i.fire("moveend"); else { this._prunePositions(+new Date); var o = this._lastPos.subtract(this._positions[0]), s = (this._lastTime - this._times[0]) / 1e3, r = e.easeLinearity, a = o.multiplyBy(r / s), h = a.distanceTo([0, 0]), u = Math.min(e.inertiaMaxSpeed, h), l = a.multiplyBy(u / h), c = u / (e.inertiaDeceleration * r), _ = l.multiplyBy(-c / 2).round(); _.x || _.y ? (_ = i._limitOffset(_, i.options.maxBounds), M(function () { i.panBy(_, { duration: c, easeLinearity: r, noMoveStart: !0, animate: !0 }) })) : i.fire("moveend") } } }); $i.addInitHook("addHandler", "dragging", Ln), $i.mergeOptions({ keyboard: !0, keyboardPanDelta: 80 }); var bn = se.extend({ keyCodes: { left: [37], right: [39], down: [40], up: [38], zoomIn: [187, 107, 61, 171], zoomOut: [189, 109, 54, 173] }, initialize: function (t) { this._map = t, this._setPanDelta(t.options.keyboardPanDelta), this._setZoomDelta(t.options.zoomDelta) }, addHooks: function () { var t = this._map._container; t.tabIndex <= 0 && (t.tabIndex = "0"), ki(t, { focus: this._onFocus, blur: this._onBlur, mousedown: this._onMouseDown }, this), this._map.on({ focus: this._addHooks, blur: this._removeHooks }, this) }, removeHooks: function () { this._removeHooks(), Ai(this._map._container, { focus: this._onFocus, blur: this._onBlur, mousedown: this._onMouseDown }, this), this._map.off({ focus: this._addHooks, blur: this._removeHooks }, this) }, _onMouseDown: function () { if (!this._focused) { var t = document.body, i = document.documentElement, e = t.scrollTop || i.scrollTop, n = t.scrollLeft || i.scrollLeft; this._map._container.focus(), window.scrollTo(n, e) } }, _onFocus: function () { this._focused = !0, this._map.fire("focus") }, _onBlur: function () { this._focused = !1, this._map.fire("blur") }, _setPanDelta: function (t) { var i, e, n = this._panKeys = {}, o = this.keyCodes; for (i = 0, e = o.left.length; i < e; i++)n[o.left[i]] = [-1 * t, 0]; for (i = 0, e = o.right.length; i < e; i++)n[o.right[i]] = [t, 0]; for (i = 0, e = o.down.length; i < e; i++)n[o.down[i]] = [0, t]; for (i = 0, e = o.up.length; i < e; i++)n[o.up[i]] = [0, -1 * t] }, _setZoomDelta: function (t) { var i, e, n = this._zoomKeys = {}, o = this.keyCodes; for (i = 0, e = o.zoomIn.length; i < e; i++)n[o.zoomIn[i]] = t; for (i = 0, e = o.zoomOut.length; i < e; i++)n[o.zoomOut[i]] = -t }, _addHooks: function () { ki(document, "keydown", this._onKeyDown, this) }, _removeHooks: function () { Ai(document, "keydown", this._onKeyDown, this) }, _onKeyDown: function (t) { if (!(t.altKey || t.ctrlKey || t.metaKey)) { var i, e = t.keyCode, n = this._map; if (e in this._panKeys) n._panAnim && n._panAnim._inProgress || (i = this._panKeys[e], t.shiftKey && (i = I(i).multiplyBy(3)), n.panBy(i), n.options.maxBounds && n.panInsideBounds(n.options.maxBounds)); else if (e in this._zoomKeys) n.setZoom(n.getZoom() + (t.shiftKey ? 3 : 1) * this._zoomKeys[e]); else { if (27 !== e || !n._popup || !n._popup.options.closeOnEscapeKey) return; n.closePopup() } Wi(t) } } }); $i.addInitHook("addHandler", "keyboard", bn), $i.mergeOptions({ scrollWheelZoom: !0, wheelDebounceTime: 40, wheelPxPerZoomLevel: 60 }); var Tn = se.extend({ addHooks: function () { ki(this._map._container, "mousewheel", this._onWheelScroll, this), this._delta = 0 }, removeHooks: function () { Ai(this._map._container, "mousewheel", this._onWheelScroll, this) }, _onWheelScroll: function (t) { var i = Ui(t), e = this._map.options.wheelDebounceTime; this._delta += i, this._lastMousePos = this._map.mouseEventToContainerPoint(t), this._startTime || (this._startTime = +new Date); var n = Math.max(e - (+new Date - this._startTime), 0); clearTimeout(this._timer), this._timer = setTimeout(a(this._performZoom, this), n), Wi(t) }, _performZoom: function () { var t = this._map, i = t.getZoom(), e = this._map.options.zoomSnap || 0; t._stop(); var n = this._delta / (4 * this._map.options.wheelPxPerZoomLevel), o = 4 * Math.log(2 / (1 + Math.exp(-Math.abs(n)))) / Math.LN2, s = e ? Math.ceil(o / e) * e : o, r = t._limitZoom(i + (0 < this._delta ? s : -s)) - i; this._delta = 0, this._startTime = null, r && ("center" === t.options.scrollWheelZoom ? t.setZoom(i + r) : t.setZoomAround(this._lastMousePos, i + r)) } }); $i.addInitHook("addHandler", "scrollWheelZoom", Tn), $i.mergeOptions({ tap: !0, tapTolerance: 15 }); var zn = se.extend({ addHooks: function () { ki(this._map._container, "touchstart", this._onDown, this) }, removeHooks: function () { Ai(this._map._container, "touchstart", this._onDown, this) }, _onDown: function (t) { if (t.touches) { if (ji(t), this._fireClick = !0, 1 < t.touches.length) return this._fireClick = !1, void clearTimeout(this._holdTimeout); var i = t.touches[0], e = i.target; this._startPos = this._newPos = new B(i.clientX, i.clientY), e.tagName && "a" === e.tagName.toLowerCase() && mi(e, "leaflet-active"), this._holdTimeout = setTimeout(a(function () { this._isTapValid() && (this._fireClick = !1, this._onUp(), this._simulateEvent("contextmenu", i)) }, this), 1e3), this._simulateEvent("mousedown", i), ki(document, { touchmove: this._onMove, touchend: this._onUp }, this) } }, _onUp: function (t) { if (clearTimeout(this._holdTimeout), Ai(document, { touchmove: this._onMove, touchend: this._onUp }, this), this._fireClick && t && t.changedTouches) { var i = t.changedTouches[0], e = i.target; e && e.tagName && "a" === e.tagName.toLowerCase() && fi(e, "leaflet-active"), this._simulateEvent("mouseup", i), this._isTapValid() && this._simulateEvent("click", i) } }, _isTapValid: function () { return this._newPos.distanceTo(this._startPos) <= this._map.options.tapTolerance }, _onMove: function (t) { var i = t.touches[0]; this._newPos = new B(i.clientX, i.clientY), this._simulateEvent("mousemove", i) }, _simulateEvent: function (t, i) { var e = document.createEvent("MouseEvents"); e._simulated = !0, i.target._simulatedClick = !0, e.initMouseEvent(t, !0, !0, window, 1, i.screenX, i.screenY, i.clientX, i.clientY, !1, !1, !1, !1, 0, null), i.target.dispatchEvent(e) } }); Tt && !bt && $i.addInitHook("addHandler", "tap", zn), $i.mergeOptions({ touchZoom: Tt && !rt, bounceAtZoomLimits: !0 }); var Mn = se.extend({ addHooks: function () { mi(this._map._container, "leaflet-touch-zoom"), ki(this._map._container, "touchstart", this._onTouchStart, this) }, removeHooks: function () { fi(this._map._container, "leaflet-touch-zoom"), Ai(this._map._container, "touchstart", this._onTouchStart, this) }, _onTouchStart: function (t) { var i = this._map; if (t.touches && 2 === t.touches.length && !i._animatingZoom && !this._zooming) { var e = i.mouseEventToContainerPoint(t.touches[0]), n = i.mouseEventToContainerPoint(t.touches[1]); this._centerPoint = i.getSize()._divideBy(2), this._startLatLng = i.containerPointToLatLng(this._centerPoint), "center" !== i.options.touchZoom && (this._pinchStartLatLng = i.containerPointToLatLng(e.add(n)._divideBy(2))), this._startDist = e.distanceTo(n), this._startZoom = i.getZoom(), this._moved = !1, this._zooming = !0, i._stop(), ki(document, "touchmove", this._onTouchMove, this), ki(document, "touchend", this._onTouchEnd, this), ji(t) } }, _onTouchMove: function (t) { if (t.touches && 2 === t.touches.length && this._zooming) { var i = this._map, e = i.mouseEventToContainerPoint(t.touches[0]), n = i.mouseEventToContainerPoint(t.touches[1]), o = e.distanceTo(n) / this._startDist; if (this._zoom = i.getScaleZoom(o, this._startZoom), !i.options.bounceAtZoomLimits && (this._zoom < i.getMinZoom() && o < 1 || this._zoom > i.getMaxZoom() && 1 < o) && (this._zoom = i._limitZoom(this._zoom)), "center" === i.options.touchZoom) { if (this._center = this._startLatLng, 1 == o) return } else { var s = e._add(n)._divideBy(2)._subtract(this._centerPoint); if (1 == o && 0 === s.x && 0 === s.y) return; this._center = i.unproject(i.project(this._pinchStartLatLng, this._zoom).subtract(s), this._zoom) } this._moved || (i._moveStart(!0, !1), this._moved = !0), C(this._animRequest); var r = a(i._move, i, this._center, this._zoom, { pinch: !0, round: !1 }); this._animRequest = M(r, this, !0), ji(t) } }, _onTouchEnd: function () { this._moved && this._zooming ? (this._zooming = !1, C(this._animRequest), Ai(document, "touchmove", this._onTouchMove), Ai(document, "touchend", this._onTouchEnd), this._map.options.zoomAnimation ? this._map._animateZoom(this._center, this._map._limitZoom(this._zoom), !0, this._map.options.zoomSnap) : this._map._resetView(this._center, this._map._limitZoom(this._zoom))) : this._zooming = !1 } }); $i.addInitHook("addHandler", "touchZoom", Mn), $i.BoxZoom = wn, $i.DoubleClickZoom = Pn, $i.Drag = Ln, $i.Keyboard = bn, $i.ScrollWheelZoom = Tn, $i.Tap = zn, $i.TouchZoom = Mn, Object.freeze = i, t.version = "1.6.0", t.Control = te, t.control = Qi, t.Browser = At, t.Evented = k, t.Mixin = ae, t.Util = S, t.Class = E, t.Handler = se, t.extend = h, t.bind = a, t.stamp = u, t.setOptions = p, t.DomEvent = Xi, t.DomUtil = Zi, t.PosAnimation = Ji, t.Draggable = ce, t.LineUtil = xe, t.PolyUtil = Le, t.Point = B, t.point = I, t.Bounds = O, t.bounds = R, t.Transformation = G, t.transformation = K, t.Projection = ze, t.LatLng = j, t.latLng = W, t.LatLngBounds = N, t.latLngBounds = D, t.CRS = F, t.GeoJSON = He, t.geoJSON = $e, t.geoJson = Qe, t.Layer = Ee, t.LayerGroup = Ze, t.layerGroup = function (t, i) { return new Ze(t, i) }, t.FeatureGroup = ke, t.featureGroup = function (t) { return new ke(t) }, t.ImageOverlay = tn, t.imageOverlay = function (t, i, e) { return new tn(t, i, e) }, t.VideoOverlay = en, t.videoOverlay = function (t, i, e) { return new en(t, i, e) }, t.SVGOverlay = nn, t.svgOverlay = function (t, i, e) { return new nn(t, i, e) }, t.DivOverlay = on, t.Popup = sn, t.popup = function (t, i) { return new sn(t, i) }, t.Tooltip = rn, t.tooltip = function (t, i) { return new rn(t, i) }, t.Icon = Be, t.icon = function (t) { return new Be(t) }, t.DivIcon = an, t.divIcon = function (t) { return new an(t) }, t.Marker = Oe, t.marker = function (t, i) { return new Oe(t, i) }, t.TileLayer = un, t.tileLayer = ln, t.GridLayer = hn, t.gridLayer = function (t) { return new hn(t) }, t.SVG = vn, t.svg = yn, t.Renderer = _n, t.Canvas = dn, t.canvas = pn, t.Path = Re, t.CircleMarker = Ne, t.circleMarker = function (t, i) { return new Ne(t, i) }, t.Circle = De, t.circle = function (t, i, e) { return new De(t, i, e) }, t.Polyline = je, t.polyline = function (t, i) { return new je(t, i) }, t.Polygon = We, t.polygon = function (t, i) { return new We(t, i) }, t.Rectangle = xn, t.rectangle = function (t, i) { return new xn(t, i) }, t.Map = $i, t.map = function (t, i) { return new $i(t, i) }; var Cn = window.L; t.noConflict = function () { return window.L = Cn, this }, window.L = t });