@{
    @using Newtonsoft.Json;
    @using ExpressBase.Common;
    @using ExpressBase.Objects;
    @using ExpressBase.Common.Objects;
    @using ServiceStack;
    @using System.Runtime.Serialization;
    var dvobj = EbSerializers.Json_Serialize(ViewBag.data);
    //var dvobj = JsonConvert.SerializeObject(ViewBag.data);
}

<link rel="stylesheet" type="text/css" href="~/css/splitWindow.css">
<script src="~/js/splitWindow.js" type="text/javascript"></script>
<style>
</style>
@{
    if (ViewBag.data.EbDataSource.FilterDialogRefId != null && ViewBag.data.EbDataSource.FilterDialogRefId != "")
    {
        //foreach (EbControl control in ViewBag.data.EbDataSource.FilterDialog.Controls)
        //{
        //    if (control is EbSimpleSelect)
        //    {
        //        (control as EbSimpleSelect).InitFromDataBase(ViewBag.serviceclient as JsonServiceClient);
        //    }
        //}
        @await Component.InvokeAsync("ParameterDiv", new { paramDiv = ViewBag.data.EbDataSource.FilterDialog });

    }
}

@*@section EbHead {
        <script>
            @Html.Raw(ViewBag.HtmlHead);
        </script>
    }*@
<script>
    @Html.Raw(ViewBag.HtmlHead);
    if ('@ViewBag.wc' === 'uc' || prevfocusedId !== undefined) {
        $.extend(dvcontainerObj.currentObj, @Html.Raw(dvobj));
    }
    else {
        commonO = $("#layout_div").data("commonObj");
        console.log(commonO);

        commonO.Current_obj =  @Html.Raw(dvobj);
    }

</script>

