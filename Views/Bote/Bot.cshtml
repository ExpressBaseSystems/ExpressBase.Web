@{
    var bApnd = true;
    if (ViewBag.Env == "Development")
    {
        bApnd = false;
    }
}

@using ExpressBase.Objects;

@*<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" />*@
<link rel="stylesheet" type="text/css" href="~/css/commonStyles/bootstrap.min.css" />
@*jith*@
<link rel="stylesheet" type="text/css" href="~/css/Eb.css" asp-append-version=@bApnd />    <!-- Add the slick-theme.css if you want default styling -->
<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/kenwheeler/slick@1.8.1/slick/slick-theme.css" />
<link rel="stylesheet" type="text/css" href="~/css/jquery.datetimepicker.css" asp-append-version=@bApnd>
<link rel="stylesheet" type="text/css" href="~/css/bootstrap-select.min.css" asp-append-version=@bApnd />
@*amal*@
<link rel="stylesheet" type="text/css" href="~/css/FormBuiderStyles.css" asp-append-version=@bApnd />
<link rel="stylesheet" type="text/css" href="~/css/EbChatBot.css" asp-append-version=@bApnd />
@*jith*@
<link rel="stylesheet" type="text/css" href="~/css/Eb_datatable.css" asp-append-version=@bApnd />
@*roby*@
<link rel="stylesheet" type="text/css" href="~/css/Common/offline-theme-dark.css" asp-append-version=@bApnd />
@*jith*@
@*<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />*@
<link rel="stylesheet" type="text/css" href="~/css/font-awesome.css" />
@*jith*@
@*<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css" />*@
<link rel="stylesheet" type="text/css" href="~/css/datatables.min.css" asp-append-version=@bApnd />
@*jith*@
<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/kenwheeler/slick@1.8.1/slick/slick.css" />
<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" asp-append-version=@bApnd>
<link rel="stylesheet" type="text/css" href="~/css/EbCommonStyles/eb-style.css" asp-append-version=@bApnd />
@*amal*@
<link href="https://rawgit.com/KidSysco/jquery-ui-month-picker/v3.0.0/demo/MonthPicker.min.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/rateYo/2.3.2/jquery.rateyo.min.css">

<link rel="stylesheet" type="text/css" href="~/css/EbControls/EbCardSet.css" asp-append-version=@bApnd/>
<link rel="stylesheet" href="~/css/yearpicker.css">

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
@*<script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>*@
<script type="text/javascript" src="~/js/CommonJS/bootstrap.min.js"></script>
@*jith*@
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.1/moment.min.js"></script>
<script type="text/javascript" src="~/js/jquery.datetimepicker.min.js" asp-append-version=@bApnd></script>
<script type="text/javascript" src="~/js/EbDataTable.js" asp-append-version=@bApnd></script>
<script type="text/javascript" src="~/js/vue-select.js" asp-append-version=@bApnd></script>
<script type="text/javascript" src="~/js/splitWindow.js" asp-append-version=@bApnd></script>
<script type="text/javascript" src="~/js/Eb_UtilityFuncions.js" asp-append-version=@bApnd></script>
<script type="text/javascript" src="https://unpkg.com/vue@2.1.10"></script>
<script type="text/javascript" src="~/js/Eb_select.js" asp-append-version=@bApnd></script>
<script type="text/javascript" src="~/js/FormBuilder/InitFormControls.js" asp-append-version=@bApnd></script>
<link rel="stylesheet" type="text/css" href="~/css/DVBuilder.css" />
@*<link rel="stylesheet" type="text/css" href="~/css/splitWindow.css" />*@
<link rel="stylesheet" type="text/css" href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css">

@*jith*@
<script type="text/javascript" src="~/js/ss-utils.js" asp-append-version=@bApnd></script>
@*amal*@
<script type="text/javascript" src="~/js/Common/offline.js" asp-append-version=@bApnd></script>
@*jith*@
<script type="text/javascript" src="~/js/eb_common.js" asp-append-version=@bApnd></script>
@*amal*@
<script type="text/javascript" src="~/js/EbServerEvents/eventsource.min.js" asp-append-version=@bApnd></script>
@*amal*@
<script type="text/javascript" src="~/js/EbServerEvents/ServerEvents.js" asp-append-version=@bApnd></script>
@*amal*@
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-confirmation/1.0.7/bootstrap-confirmation.min.js"></script>
@*jith*@
<script type="text/javascript" src="~/js/ChatBot/Eb_chatBot.js" asp-append-version=@bApnd></script>
@*jith*@
<script type="text/javascript" src="~/js/Eb_Basic_DataTable.js" asp-append-version=@bApnd></script>
@*amal*@
<script type="text/javascript" src="~/js/FormBuilder/EbSurveyRender.js" asp-append-version=@bApnd></script>

<script type="text/javascript" src="~/js/jQuery Mask Plugin v1.14.9.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.2/js/bootstrap-select.min.js"></script>
@*Dona*@
<script type="text/javascript" src="//cdn.jsdelivr.net/gh/kenwheeler/slick@1.8.1/slick/slick.min.js"></script>
@*
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>*@
<script type="text/javascript" src="~/js/datatables.min.js" asp-append-version=@bApnd></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-locationpicker/0.1.12/locationpicker.jquery.min.js"></script>
@*
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDcaoSVEMF_TRq6Lx-dkqh3Rvrv8_w-0tM&callback=initMap&libraries=places"></script>*@
@*
    <script type="text/javascript" src='https://maps.google.com/maps/api/js?key=AIzaSyDcaoSVEMF_TRq6Lx-dkqh3Rvrv8_w-0tM&sensor=false&libraries=places'></script>*@
<script type="text/javascript" src='https://maps.google.com/maps/api/js?key=AIzaSyDcaoSVEMF_TRq6Lx-dkqh3Rvrv8_w-0tM&libraries=places'></script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.1.3/Chart.js"></script>
<script type="text/javascript" src="https://npmcdn.com/Chart.Zoom.js@0.3.0/Chart.Zoom.min.js"></script>
<script src="~/js/EbControls/EbProgressBar.js" type="text/javascript" asp-append-version=@bApnd></script>
<script src="~/js/EbControls/EbMsgBox.js" type="text/javascript" asp-append-version=@bApnd></script>
<script src="~/js/FormBuilder/EbCardRender.js" type="text/javascript" asp-append-version=@bApnd></script>
@*amal*@
<script type="text/javascript" src="~/js/jquery.inputmask.bundle.js" asp-append-version=@bApnd></script>
@*jith*@
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"
        integrity="sha256-T0Vest3yCU7pafRw9r+settMBX6JkKN06dqBnpQ8d30="
        crossorigin="anonymous"></script>
<script src="https://rawgit.com/KidSysco/jquery-ui-month-picker/v3.0.0/demo/MonthPicker.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/rateYo/2.3.2/jquery.rateyo.min.js"></script>
<script type="text/javascript" src="~/js/EbControls/EbSimpleFileUploader.js"></script>

<script type="text/javascript" src="~/js/yearpicker.js" asp-append-version=@bApnd></script>

<script type="text/javascript" src="~/js/CommonDataTable.js" asp-append-version=@bApnd></script>
<script type="text/javascript" src="~/js/splitWindow.js"></script>
<script type="text/javascript" src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery.lazy/1.7.8/jquery.lazy.min.js"></script>

<style>
    body {
        margin: 0;
        padding: 0px;
    }
</style>

@{
    EbToolbox _toolBox = new EbToolbox(ExpressBase.Common.Objects.BuilderType.BotForm);

    <script>
        @Html.Raw(_toolBox.AllMetas);
        @Html.Raw(_toolBox.EbObjectTypes);
    </script>
}

<script>
    @Html.Raw(ViewBag.ControlOperations);
        window.ebcontext = {
            sid: "@ViewBag.tid",
            user: null,
            //menu: {},
            //locations: {},
            //header: {},
            //setup:new Setup(),
            env:'@ViewBag.Env'
        }
</script>

<script>
    var solid = "@ViewBag.tid";
    var appid = "@ViewBag.appid";
    var settings = @Html.Raw(ViewBag.settings);
    var ServerEventUrl = "@ViewBag.ServerEventUrl";
    var chatBotObj = null;
    $(document).ready(function () {
        var html = document.getElementsByTagName('html')[0];
        html.style.setProperty("--botThemeColor", (settings.ThemeColor || "#055c9b"));

        chatBotObj = new Eb_chatBot(solid, appid, settings, '@ViewBag.ServiceUrl', ServerEventUrl);

        $.get("https://ipinfo.io", function (response) {
            chatBotObj.userDtls.ip = response.ip;
            chatBotObj.userDtls.browser = getBrowserName();
        }, "jsonp");
    });

    // This is called with the results from from FB.getLoginStatus().
    function statusChangeCallback(response) {
        console.log('statusChangeCallback');
        //console.log(response);
        chatBotObj.FB = FB;
        if (response.status === 'connected') {
            chatBotObj.FBLogined();
        } else {
            chatBotObj.FBNotLogined();
        }
    }

    // This function is called when someone finishes with the Login
    function checkLoginState() {
        FB.getLoginStatus(function (response) {
            statusChangeCallback(response);
        });
    };

    window.fbAsyncInit = function () {
        FB.init({
            appId: ('@ViewBag.Env' === 'Development' ? '141908109794829' : ('@ViewBag.Env' === 'Staging' ? '1525758114176201' : '2202041803145524')),//'141908109794829',//,'1525758114176201',//
            cookie: true,  // enable cookies to allow the server to access
            // the session
            xfbml: true,  // parse social plugins on this page
            version: ('@ViewBag.Env' === 'Development' ? 'v2.11' : ('@ViewBag.Env' === 'Staging' ? 'v2.8' : 'v3.0')) // use graph api version 2.8
        });
        FB.getLoginStatus(function (response) {
            statusChangeCallback(response);
        });

    };


    // Load the SDK asynchronously
    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));



</script>
