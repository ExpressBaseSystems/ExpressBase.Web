@{
    Layout = "~/Views/Shared/LayoutExternal.cshtml";

}
@Html.Raw(new System.Net.WebClient().DownloadString("https://expressbase.com/GetHeader/" + ViewBag.Env))
@using ExpressBase.Objects.ServiceStack_Artifacts;
<link rel="stylesheet" type="text/css" href="~/css/EbWiki/eb_wiki.css">
<script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
<script type="text/javascript" src="~/js/wiki/eb_wiki.js"></script>

@section StyleSheet{
    @*<script>
            window.___blgc = `@Html.Raw(ViewBag.Wiki.HTML)`;
            var d = document.createElement("div");
            d.innerHTML = ___blgc;
            var p = $(d).text().substring(0, $(d).text().indexOf("."));
            var _meta = `<meta property="og:description" content="${p}">`;
            document.write(_meta);
        </script>*@
    @*<meta property="og:title" content="@ViewBag.Wiki.Title">
        <meta property="og:description" content="">
        <meta property="og:image" content="">
        <meta property="og:url" content="@ViewBag.Url">
        <meta name="twitter:card" content="">

        <!--  Non-Essential, But Recommended -->

        <meta property="og:site_name" content="EXPRESSbase Systems">
        <meta name="twitter:image:alt" content="">


        <!--  Non-Essential, But Required for Analytics -->

        <meta property="fb:app_id" content="your_app_id" />
        <meta name="twitter:site" content="">*@

    <link rel="canonical" href="@ViewBag.Url" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="@ViewBag.Wiki.Title" />
    <meta property="og:description" content="" />
    <meta property="og:url" content="@ViewBag.Url" />
    <meta property="og:site_name" content="EXPRESSbase Systems - Fast growing Small & Midsize Businesses deserve rapidly evolving software." />
    <meta property="article:publisher" content="https://www.facebook.com/expressbase" />
    @foreach (Object ob in ViewBag.TagObject)
    {
        <meta property="article:tag" content="@ob" />
    }
    <meta property="article:section" content="National" />
    <meta property="og:image" content="" />
    <meta property="og:image:secure_url" content="" />
    <meta property="og:image:width" content="820" />
    <meta property="og:image:height" content="450" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:description" content="EXPRESSbase Systems Documentation - Fast growing Small & Midsize Businesses deserve rapidly evolving software." />
    <meta name="twitter:title" content=" @ViewBag.Wiki.Title |EXPRESSbase Systems" />
    <meta name="twitter:site" content="" />
    <meta name="twitter:image" content="" />
    <meta name="twitter:creator" content="" />


}
<script>
    $(document).ready(function () {
        new addwiki();
        if(PR)
        PR.prettyPrint();
        //document.title = '@ViewBag.Wiki.Title'
    });
</script>
<div class="container" style="margin-top:70px">
    <div class="row">
        <div class="col-sm-12 wiki_data_div">
            @{
                Wiki wiki = ViewBag.Wiki;

                @Html.Raw(wiki.HTML)
            }
        </div>
        <script>
            //$(document).ready(function () {
            let title = $(".wiki_data_div h1").text();
            title = title.replace(/(\r\n|\n|\r)/gm, "");
            let desc = $(".wiki_data_div p").text().substring(0, $(".wiki_data_div p").text().indexOf("."));
            $(`meta[property="og:title"]`).prop("content", `${title} -  ${desc} `);
            $(`meta[property="og:description"]`).prop("content", `${desc}`);
            $(`meta[property="twitter:description"]`).prop("content", `${desc}`);
            $(`meta[property="twitter:title"]`).prop("content", `${title}`);
            $(`meta[property="og:image"]`).attr("content", ``);
            $("title").text(`@ViewBag.Wiki.Title : ${desc}`);
                    //});
        </script>
    </div>
</div>
