
@{
    Layout = "~/Views/Shared/_Layout1.cshtml";
}
<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/croppie/2.5.1/croppie.min.css" />
<link rel="stylesheet" href="~/css/EbImageCropper.css" />
<link rel="stylesheet" href="~/css/TenantAddSolution.css" />
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/croppie/2.5.1/croppie.min.js"></script>
<script src="~/js/EbImageCropper.js" type="text/javascript"></script>
<div class="row tAddAcc">
    <div class="container detailsec">
        <div class="col-md-3 detailsec-name pd-0">
            <div class="detailsec-name-head">
                <h4>Solution Info</h4>
                @*</div>
                    <div class="detailsec-name-desc">
                        The cloud is a platform of continuous innovation.*@
            </div>
        </div>
        <div class="col-md-3 logo-upload-container">
            <div class="logo-upload" id="logo-prev">

            </div>
        </div>
        <div class="col-md-6 detailsec-form">
            <div class="tier">
                <div class="form-group">

                    <input type="text" required="required" id="solutionname" name="accountname" class="form-control" placeholder="Solution Name" />
                </div>
                <div class="client-id-sec">
                    <input type="text" required="required" id="cid" name="cid" class="form-control input-clientId" placeholder="Client id" />
                    <div class="clientId-auto">.expressbase.com</div>
                    <button class="btn is-edit-clientid pricing-modal-btn" id="is-edit-clientid"><i class="fa fa-pencil-square-o" aria-hidden="true"></i></button>
                </div>
                <div class="form-group">
                    <button class="btn btn-upload pricing-modal-btn" data-toggle="modal" data-target="#eb-cropie">upload logo</button>
                </div>
            </div>
        </div>
    </div>
    <div class="container products-head">
        <h4>Select Products</h4>
    </div>
    <div class="container-fluid eb-products">
        <div class="col-md-2 col-md-offset-1 Eb-product-container">
            <div class="Eb-product-container-bdy" pid="Forms">
                <div class="pro-icon-bx">
                    <img src="~/images/svg/form1.svg" />
                </div>
                <div class="pro-name-bx">
                    Forms
                </div>
                <button class="btn btn-sm btn-upload">Add</button>
            </div>
        </div>
        <div class="col-md-2 Eb-product-container">
            <div class="Eb-product-container-bdy" pid="Visualization">
                <div class="pro-icon-bx">
                    <img src="~/images/svg/dv1.svg" />
                </div>
                <div class="pro-name-bx">
                    Visualization
                </div>
                <button class="btn btn-sm btn-upload">Add</button>
            </div>
        </div>
        <div class="col-md-2 Eb-product-container">
            <div class="Eb-product-container-bdy" pid="Report">
                <div class="pro-icon-bx">
                    <img src="~/images/svg/report1.svg" />
                </div>
                <div class="pro-name-bx">
                    Report
                </div>
                <button class="btn btn-sm btn-upload">Add</button>
            </div>
        </div>
        <div class="col-md-2 Eb-product-container">
            <div class="Eb-product-container-bdy" pid="ChatBot">
                <div class="pro-icon-bx">
                    <img src="~/images/svg/chat1.svg" />
                </div>
                <div class="pro-name-bx">
                    ChatBot
                </div>
                <button class="btn btn-sm btn-upload">Add</button>
            </div>
        </div>
        <div class="col-md-2 Eb-product-container">
            <div class="Eb-product-container-bdy" pid="Documents">
                <div class="pro-icon-bx">
                    <img src="~/images/svg/document1.svg" />
                </div>
                <div class="pro-name-bx">
                    Documents
                </div>
                <button class="btn btn-sm btn-upload">Add</button>
            </div>
        </div>
    </div>
    <div class="container products-head">
        <h4>Select Plans</h4>
    </div>
    <div class="container add-accPricing-sec">
        <table class="table add-accPricing-sec-table">
            <thead>
                <tr>
                    <th class="tadd-pricing-head"></th>
                    <th class="tadd-pricing-head">FREE FOR EVER</th>
                    <th class="tadd-pricing-head">STANDARD</th>
                    <th class="tadd-pricing-head">PRO</th>
                    <th class="tadd-pricing-head">ENTERPRISE</th>
                </tr>
            </thead>
            <tbody>
                <tr pritem="Forms">
                    <td class="pricing-icon"><img src="~/images/svg/form1.svg" /><div class="p-icon-text">Forms</div></td>
                    <td product="Forms" plan="FREE" price="0">
                        <div class="pricing-container">
                            <div class="T-add-amount">$0</div>
                        </div>
                      
                    </td>
                    <td product="Forms" plan="STANDARD" price="1">
                        <div class="pricing-container">
                            <div class="T-add-amount">$1</div>
                        </div>
                        
                    </td>
                    <td product="Forms" plan="PRO" price="2">
                        <div class="pricing-container">
                            <div class="T-add-amount">$2</div>
                        </div>
                       
                    </td>
                    <td product="Forms" plan="ENTERPRISE" price="3">
                        <div class="pricing-container">
                            <div class="T-add-amount">$3</div>
                        </div>
                        
                    </td>
                    <td class="compare">
                        <div class="pricing-container">
                            <button class="btn pricing-modal-btn" data-toggle="modal" data-target="#eb-common-price-modal">Compare</button>
                        </div>
                    </td>
                </tr>
                <tr pritem="Visualization">
                    <td class="pricing-icon"><img src="~/images/svg/dv1.svg" /><div class="p-icon-text">Visualization</div></td>
                    <td class="tdclass disabled-click" product="Visualization" plan="FREE" price="0">
                        <div class="pricing-container">
                            <div class="T-add-amount">$0</div>

                        </div>
                        
                    </td>
                    <td product="Visualization" plan="STANDARD" price="1">
                        <div class="pricing-container">
                            <div class="T-add-amount">$1</div>
                        </div>
                        
                    </td>
                    <td product="Visualization" plan="PRO" price="2">
                        <div class="pricing-container">
                            <div class="T-add-amount">$2</div>
                        </div>
                        
                    </td>
                    <td product="Visualization" plan="ENTERPRISE" price="3">
                        <div class="pricing-container">
                            <div class="T-add-amount">$3</div>

                        </div>
                        
                    </td>
                    <td class="compare">
                        <div class="pricing-container">
                            <button class="btn pricing-modal-btn" data-toggle="modal" data-target="#eb-common-price-modal">Compare</button>
                        </div>
                    </td>
                </tr>
                <tr pritem="Report">
                    <td class="pricing-icon"><img src="~/images/svg/report1.svg" /><div class="p-icon-text">Report</div></td>
                    <td product="Report" plan="FREE" price="0">
                        <div class="pricing-container">
                            <div class="T-add-amount">$0</div>

                        </div>
                        
                    </td>
                    <td product="Report" plan="STANDARD" price="1">
                        <div class="pricing-container">
                            <div class="T-add-amount">$1</div>

                        </div>
                        
                    </td>
                    <td product="Report" plan="PRO" price="2">
                        <div class="pricing-container">
                            <div class="T-add-amount">$2</div>

                        </div>
                        
                    </td>
                    <td product="Report" plan="ENTERPRISE" price="3">
                        <div class="pricing-container">
                            <div class="T-add-amount">$3</div>

                        </div>
                        
                    </td>
                    <td class="compare">
                        <div class="pricing-container">
                            <button class="btn pricing-modal-btn" data-toggle="modal" data-target="#eb-common-price-modal">Compare</button>
                        </div>
                    </td>
                </tr>
                <tr pritem="ChatBot">
                    <td class="pricing-icon"><img src="~/images/svg/chat1.svg" /><div class="p-icon-text">ChatBot</div></td>
                    <td product="ChatBot" plan="FREE" price="0">
                        <div class="pricing-container">
                            <div class="T-add-amount">$0</div>
                        </div>
                        
                    </td>
                    <td product="ChatBot" plan="STANDARD" price="1">
                        <div class="pricing-container">
                            <div class="T-add-amount">$1</div>

                        </div>
                        
                    </td>
                    <td product="ChatBot" plan="PRO" price="2">
                        <div class="pricing-container">
                            <div class="T-add-amount">$2</div>

                        </div>
                        
                    </td>
                    <td product="ChatBot" plan="ENTERPRISE" price="3">
                        <div class="pricing-container">
                            <div class="T-add-amount">$3</div>

                        </div>
                        
                    </td>
                    <td class="compare">
                        <div class="pricing-container">
                            <button class="btn pricing-modal-btn" data-toggle="modal" data-target="#eb-common-price-modal">Compare</button>
                        </div>
                    </td>
                </tr>
                <tr pritem="Documents">
                    <td class="pricing-icon"><img src="~/images/svg/document1.svg" /><div class="p-icon-text">Documents</div></td>
                    <td product="Documents" plan="FREE" price="0">
                        <div class="pricing-container">
                            <div class="T-add-amount">$0</div>
                        </div>
                        
                    </td>
                    <td product="Documents" plan="STANDARD" price="1">
                        <div class="pricing-container">
                            <div class="T-add-amount">$1</div>

                        </div>
                        
                    </td>
                    <td product="Documents" plan="PRO" price="2">
                        <div class="pricing-container">
                            <div class="T-add-amount">$2</div>

                        </div>
                       
                    </td>
                    <td product="Documents" plan="ENTERPRISE" price="3">
                        <div class="pricing-container">
                            <div class="T-add-amount">$3</div>

                        </div>
                        
                    </td>
                    <td class="compare">
                        <div class="pricing-container">
                            <button class="btn pricing-modal-btn" data-toggle="modal" data-target="#eb-common-price-modal">Compare</button>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="container products-head">
        <h4>Review</h4>
    </div>
    <div class="container review-container">
        <div class="row review-container-row-outer">
            <div class="col-md-10" id="review-sec">
                <div class="solution-info">
                    <div class="form-inline">
                        <label>Solution name </label>
                        <div class="sol-name-review" id="sol-name-review"></div>
                    </div>
                    <div class="form-inline">
                        <label>Client id </label>
                        <div class="sol-name-review" id="cid-name-review"></div>
                    </div>
                </div>
                <div class="subscrib-info" id="subscrib-info">
                </div>
            </div>
            <div class="col-md-2 tot-sec" id="tot-sec">
                <div class="total">
                    <h4 class="text-center">Total</h4>
                    <div class="total-count-cont">
                        $0
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="eb-common-price-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
    <div class="modal-dialog">
        <div class="eb-common-price-modal-container">
            @await Component.InvokeAsync("EbPricing")
        </div>
    </div>
</div>
<div class="modal fade eb-cropper" id="eb-cropie" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
    <div class="modal-dialog">
        <div class="eb-cropie-container">
            <div id="eb-cropie-inner">

            </div>
        </div>
    </div>
</div>
<script>
    $(document).ready(function () {
        $('#cid').attr('disabled', 'disabled');
        $('#subscrib-info').hide();
        var upload = new EbImageCropper({
            preview: 'logo-prev',
            cropperContainer: 'eb-cropie-inner'
        });
        $('#is-edit-clientid').click(function () {
            $('#cid').removeAttr('disabled');
        });        
        $('.btn-upload').off('click').on('click', function () {
            $(this).toggleClass('subscribed');
            $('#subscrib-info').show();
            if ($(this).hasClass('subscribed')) {
                $(this).text(' ');
                $(this).css({ "background": "#69ea69", "border": "none" });
                $(this).append('<i class="fa fa-check" aria-hidden="true" style="color:white;"></i>');
                $('[pritem=' + $(this).parent().attr('pid') + ']').children('[plan=FREE]').toggleClass('price-selected');               
                addProductTorev($(this).parent());
            }
            else {
                $(this).children('i').remove();
                $(this).text('Add');
                $(this).css({ "background": "white", "border": "1px solid #e1e0e0" });              
            }
        });

        $('#solutionname').change(function () {
            $('#sol-name-review').text($(this).val());
        });
        $('#cid').change(function () {
            $('#cid-name-review').text($(this).val());
        });

        function addProductTorev(prod) {
            $('#subscrib-info').append(`<div class="form-inline" revpid="${prod.attr('pid')}">
                    <label>${prod.attr('pid')}</label>
                    <div class="sol-name-review" id="plan">FREE $0</div>
                </div>`);
        };
        //not('.disabled-click')       
            $(".add-accPricing-sec-table td").not('.compare').off('click').on('click', function () {               
                if ($('[pid=' + $(this).parent().attr('pritem') + ']').children('.btn-upload').hasClass('subscribed')) {
                    $(this).toggleClass('price-selected');
                    if ($(this).hasClass('price-selected')) {
                        $(this).siblings().each(function (i, obj) {
                            $(obj).removeClass('price-selected');
                        });
                        addPlanToRev($(this));
                    }
                    else {
                        $(this).children('i').hide();
                    }
                }
                else
                    alert('product not selected!');
            });
        
        function addPlanToRev(plan) {          
            $("#subscrib-info").children('[revpid=' + plan.attr('product') + ']').children('.sol-name-review').text(plan.attr('plan') + '($' + plan.attr('price') + ')').attr("price", plan.attr('price'));                      
                calculateAmount();                    
        };
        function calculateAmount() {
            var tot = 0;
            $('#subscrib-info').children().each(function (i, obj) {               
                var total = parseInt($(obj).children('.sol-name-review').attr('price'));
                tot = tot + total;
                $('.total-count-cont').text('$' + tot);
            });
        }
    });
</script>