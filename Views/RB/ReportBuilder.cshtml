@{
    Layout = "~/Views/Shared/_Layout1.cshtml";

}
@using ExpressBase.Objects;
@using ExpressBase.Common.Objects;
@using ExpressBase.Objects.ServiceStack_Artifacts;
@*<script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"></script>
<script type="text/javascript" src="~/js/Eb_ReportBuilder.js"></script>
<script type="text/javascript" src="~/js/split.js"></script>
<script type="text/javascript" src='~/js/Eb_formBuilder.js'></script>
<script type="text/javascript" src="~/js/Eb_PropertyGrid.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.2/js/bootstrap-select.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
<link rel="stylesheet" type="text/css" href="~/css/Eb_ReportBuilder.css" />
<link rel="stylesheet" type="text/css" href="~/css/font-awesome.min.css">
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/css/select2.min.css" rel="stylesheet" />
<link rel="stylesheet" type="text/css" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/themes/smoothness/jquery-ui.css">
<link rel="stylesheet" type="text/css" href="~/css/FormBuiderStyles.css" />
<link rel="stylesheet" type="text/css" href="~/css/style.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.2/css/bootstrap-select.min.css">*@
    <div class="row" style="margin-top: 20px">
        <div class="reportmenu">
            <div class="form-inline" id="options">
                <div class="form-group">
                    <button class="btn" id="newPage" data-toggle="tooltip" data-placement="bottom" title="New page"><i class="fa fa-file-text" aria-hidden="true"></i></button>
                </div>
                <div class="form-group">
                    <select id="pagesize">
                        <option value="">Page Size</option>
                        <option value="Letter">Letter</option>
                        <option value="A3">A3</option>
                        <option value="A4">A4</option>
                        <option value="A5">A5</option>
                        <option value="custom-size">Custom</option>
                    </select>
                </div>
                <div class="form-group" id="custom-size" style="display:none">
                    <div class="input-group">
                        <input type="text" class="custom-size" id="customHeight" placeholder="Height" />
                        X
                        <input type="text" class="custom-size" id="customWidth" placeholder="Width" />
                        <select class="measurement" id="custome-unit">
                            <option value="cm">Cm</option>
                            <option value="mm">mm</option>
                            <option value="inch">inch</option>
                            <option value="px">pixel</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <button id="createCustom" data-toggle="tooltip" data-placement="bottom" title="Align Left">Go</button>
                    </div>
                </div>
                <div class="form-group">
                    <button class="btn" data-toggle="tooltip" data-placement="bottom" title="Align Left"><i class="fa fa-align-left" aria-hidden="true"></i></button>
                </div>
                <div class="form-group">
                    <input type="file" style="display:none" id="Rptbgimg" />
                    <button class="btn" data-toggle="tooltip" data-placement="bottom" title="Background Image" onclick="$('#Rptbgimg').click();"><i class="fa fa-picture-o" aria-hidden="true"></i></button>
                </div>
                <div class="form-group">
                    <button class="btn" data-toggle="tooltip" data-placement="bottom" title="Align Left"><i class="fa fa-align-left" aria-hidden="true"></i></button>
                </div>
                <div class="form-group">
                    <button class="btn" data-toggle="tooltip" data-placement="bottom" title="Align Center"><i class="fa fa-align-center" aria-hidden="true"></i></button>
                </div>
                <div class="form-group">
                    <button class="btn" data-toggle="tooltip" data-placement="bottom" title="Align Right"><i class="fa fa-align-right" aria-hidden="true"></i></button>
                </div>
                <div class="form-group">
                    <button class="btn" data-toggle="tooltip" data-placement="bottom" title="Align Justify"><i class="fa fa-align-justify" aria-hidden="true"></i></button>
                </div>
                <div class="form-group">
                    <button class="btn" data-toggle="tooltip" data-placement="bottom" title="Trash"><i class="fa fa-trash" aria-hidden="true"></i></button>
                </div>
                <div class="form-group">
                    <input type="color" id="fontcolor" class="btn btn-default" style="display:none" />
                    <button class="btn" onclick="$('#fontcolor').click();"><i class="fa fa-paint-brush" aria-hidden="true"></i> Font Color</button>
                </div>
                <div class="form-group">
                    <button class="btn" data-toggle="tooltip" data-placement="bottom" title="Trash"><i class="fa fa-trash" aria-hidden="true"></i></button>
                </div>
                <div class="form-group">
                    <input type="text" id="RptName">
                </div>
                <div class="form-group">
                    <textarea  id="RptDesc"></textarea>
                </div>
                <div class="form-group">
                    <button class="btn" id="save" data-toggle="tooltip" data-placement="bottom" title="Save"><i class="fa fa-floppy-o" aria-hidden="true"></i></button>
                </div>
                <div class="form-group">
                    <button class="btn" id="commit" data-toggle="tooltip" data-placement="bottom" title="Commit"><i class="fa fa-cloud-upload" aria-hidden="true"></i></button>
                </div>
            </div>
        </div>
    </div>
    <div class="row pgB">
        <div class="tab-section">
            <ul class="nav nav-tabs" role="tablist">
                <li class="nav-item active">
                    <a class="nav-link" data-toggle="tab" href="#home" role="tab">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#Preview" role="tab">Preview</a>
                </li>
            </ul>
        </div>
        <div class="tab-content">
            <div class="tab-pane active" id="home" role="tabpanel">
                <div class="tab-menu">
                    <div class="form-inline">
                        <div class="form-group">
                            <button class="btn dropdown-toggle" data-toggle="dropdown" id="eb-shapes"><i class="fa fa-cubes" aria-hidden="true"></i> Shapes</button>
                            <div class="dropdown-menu shapes-tank">
                                <button class="btn btn-xs shapes" id="circle" data-toggle="tooltip" data-placement="bottom" title="Circle"><i class="fa fa-circle-thin fa-lg" aria-hidden="true"></i></button>

                                <button class="btn btn-xs shapes" id="rectangle" data-toggle="tooltip" data-placement="bottom" title="Rectangle"><i class="fa fa-square-o fa-lg" aria-hidden="true"></i></button>

                                <button class="btn btn-xs shapes" id="arrow-right" data-toggle="tooltip" data-placement="bottom" title="Arrow"><i class="fa fa-long-arrow-right fa-lg" aria-hidden="true"></i></button>

                                <button class="btn btn-xs shapes" id="arrow-left" data-toggle="tooltip" data-placement="bottom" title="Arrow"><i class="fa fa-long-arrow-left fa-lg" aria-hidden="true"></i></button>

                                <button class="btn btn-xs shapes" id="arrow-up" data-toggle="tooltip" data-placement="bottom" title="Arrow"><i class="fa fa-long-arrow-up fa-lg" aria-hidden="true"></i></button>

                                <button class="btn btn-xs shapes" id="arrow-down" data-toggle="tooltip" data-placement="bottom" title="Arrow"><i class="fa fa-long-arrow-down fa-lg" aria-hidden="true"></i></button>

                                <button class="btn btn-xs shapes" id="by-dir-arrow-h" data-toggle="tooltip" data-placement="bottom" title="Arrow"><i class="fa fa-arrows-v fa-lg" aria-hidden="true"></i></button>

                                <button class="btn btn-xs shapes" id="by-dir-arrow-v" data-toggle="tooltip" data-placement="bottom" title="By directional Arrow"><i class="fa fa-arrows-h fa-lg" aria-hidden="true"></i></button>

                                <button class="btn btn-xs shapes" id="h-line" data-toggle="tooltip" data-placement="bottom" title="Horrizontal Line"><i> __ </i></button>

                                <button class="btn btn-xs shapes" id="v-line" data-toggle="tooltip" data-placement="bottom" title="Vertical Line"><i> | </i></button>
                            </div>
                        </div>
                        <div class="form-group">
                            <button class="btn qr-Br-img-btn draggable" id="pg-img" data-toggle="tooltip" data-placement="bottom" title="Add image"><i class="fa fa-picture-o" aria-hidden="true"></i></button>
                        </div>
                        <div class="form-group">
                            <button class="btn qr-Br-img-btn draggable" id="Br-code" data-toggle="tooltip" data-placement="bottom" title="Bar code"><i class="fa fa-barcode" aria-hidden="true"></i></button>
                        </div>
                        <div class="form-group">
                            <button class="btn qr-Br-img-btn draggable" id="Qr" data-toggle="tooltip" data-placement="bottom" title="Qr Code"><i class="fa fa-qrcode" aria-hidden="true"></i></button>
                        </div>
                        </div>
                    </div>
                <div class="col-md-2 side-toolbar">
                    <div class="toolbox">
                        @await Component.InvokeAsync("EbObjectSelector", new { Type = (int)EbObjectType.DataSource });
                    </div>
                </div>
                <div class="col-md-8" style="padding-right:0;margin-top:73px">
                    <div class="title text-center" style="display:none"></div>
                    <div class='ruler' style="display:none"></div>
                    <div class='rulerleft' style="display:none"></div>
                    <div id="pageCanvas" style="position:relative;margin-top:24px;margin-bottom:50px">
                    </div>
                </div>
                <div class="col-md-2 PGgrid">
                    <div class="formB-box pGreportBuilder" id="propGrid" style="display:none">

                    </div>
                </div>
            </div>
            <div class="tab-pane" id="Preview" role="tabpanel">...</div>
        </div>
    </div>

    <script>
        $(document).ready(function () {
            var report = new RptBuilder('A4', save, newPage, commit, @ViewBag.IsNew);

            $("#pagesize").change(function () {
                var type = $(this).val();
                if (type === 'custom-size') {
                    getCustomSize(type);
                }
                else if (type !== 'custom-size') {
                    var report = new RptBuilder(type, save, newPage, commit, @ViewBag.IsNew);
                }
            });

            getCustomSize = function (type) {
                $('#custom-size').show();

                $('#createCustom').on('click', function () {
                    var custHeight = $('#customHeight').val();
                    var custWidth = $('#customWidth').val();
                    var custunit = $('#custome-unit').val();
                    var report = new RptBuilder(type, save, newPage, commit, @ViewBag.IsNew, custHeight, custWidth, custunit);
                })
            };

            $("#Rptbgimg").change(function () {
                setBackgroud(this);
            });
        });
    </script>
